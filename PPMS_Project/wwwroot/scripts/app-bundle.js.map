{"version":3,"sources":["src/actual_cost.js","src/app.js","src/blankpage.js","src/blur-image.js","src/buh.js","src/cache_obj.js","src/child-router.js","src/entity-manager-factory.js","src/environment.js","src/group_individual.js","src/guest.js","src/helpers.js","src/main-header.js","src/main.js","src/mainpage.js","src/mainview.js","src/masterfiles.js","src/multi-observer.js","src/nav-bar.js","src/objBudget.js","src/personnel.js","src/service.js","src/settings.js","src/summary.js","src/users.js","src/welcome.js","src/converters/datepattern.js","src/converters/filtercustom.js","src/converters/number-format.js","src/converters/signals.js","src/converters/sort.js","src/converters/sorttext.js","src/converters/take.js","src/modals/budget.js","src/modals/buh-program-dialog.js","src/modals/buh-search.js","src/modals/change_password.js","src/modals/confirm_dialog.js","src/modals/edit-person.js","src/modals/globalindivmstr.js","src/modals/indivmstr.js","src/modals/job.js","src/modals/login.js","src/modals/modal-wizard.js","src/modals/modalcontainer.js","src/modals/paymentterm.js","src/modals/program.js","src/modals/talentmanagergroups.js","src/ppfcs/buh.js","src/ppfcs/cache_budget.js","src/tools/gridpaging.js","src/ppfcs/actual_cost/actual_cost.js","src/ppfcs/budget/guest.js","src/ppfcs/budget/main-header.js","src/ppfcs/budget/mainview.js","src/ppfcs/budget/personnel.js","src/ppfcs/budget/summary.js"],"names":["actual_cost","objBudget","_objBudget","App","configureRouter","config","router","title","map","route","name","moduleId","nav","options","blankpage","BlurImageCustomAttribute","Element","element","valueChanged","newImage","complete","drawBlur","onload","mul_table","shg_table","BLUR_RADIUS","stackBlurCanvasRGBA","canvas","top_x","top_y","width","height","radius","isNaN","context","getContext","imageData","getImageData","e","Error","pixels","data","x","y","i","p","yp","yi","yw","r_sum","g_sum","b_sum","a_sum","r_out_sum","g_out_sum","b_out_sum","a_out_sum","r_in_sum","g_in_sum","b_in_sum","a_in_sum","pr","pg","pb","pa","rbs","div","w4","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","BlurStack","stack","next","stackEnd","stackIn","stackOut","mul_sum","shg_sum","r","g","b","a","putImageData","image","w","h","canvasContext","drawImage","buh","DialogService","_objBUH","PROGRAMS","dialogService","loginDisabled","logoutDisabled","masterFilesLoaded","_disableCells","_disableAdd","_disableDelete","_disableSave","_disableSearch","_disableGrid","_status","_user","_programs","controllers","length","close","addBUH","fnCRUD","value","BUH_PERSONNEL_ID","OPTIONAL_GLOBAL_ID","FIRST_NAME","MIDDLE_NAME","LAST_NAME","EMAIL_ADDRESS","searchExistingBuh","varDelete","confirm","found","find","all","PROGRAM_CD","getBUHForEdit","from","where","executeQuery","then","success","results","entityAspect","setDeleted","saveChanges","fail","getEntities","forEach","entity","errors","getValidationErrors","console","log","error","saveBUH","toUpperCase","varInsert","getMax","orderByDesc","take","successMax","createEntity","CREATED_BY","CREATED_DT","Date","now","addEntity","deleteSelected","index","splice","open","viewModel","whenClosed","response","wasCancelled","searchBUH","output","item","filter","undefined","foundItems","push","searchPrograms","PROGRAM_TITLE","fnInitMasterfiles","initType","_toastr","info","timeOut","fnPassUserObject","fnLogin","varCookie","varSplitCookie","split","USER_ID","COMPANY_ID","Is_HR","Is_Branch","showingLogout","clear","LoginPassed","user","logout","cache_obj","ALLOW_PASS_CONFIDENTIAL","PROGRAM_USER","_ACCESS","CALLER","ACTION","ACTION_CALLER","VALUE1","VALUE2","VALUE3","VALUE4","OBSERVERS","init_modal","close_modal","open_modal","enable_modal_button","open_modal_message","clear_indiv_modal","clear_program_modal","clear_log","clear_login_modal","clear_talentmanager_modal","pass_value","login_passed","pass_group","loggedout","confirm_dialog","enable_approved","pass_indiv","pass_job","clear_job_modal","budget_loaded","logoutPage","loginPage","ChildRouter","heading","initializeBreeze","EntityManager","EntityQuery","generateID","entityManager","initializeAdapterInstance","serviceName","saveOptions","SaveOptions","allowConcurrentSaves","fetchMetadata","Promise","resolve","core","getUuid","copyEntityManager","copy","createEmptyCopy","entityChanged","subscribe","logChanges","message","entityType","getKey","toString","entityAction","getName","EntityAction","PropertyChange","pcArgs","args","propertyName","oldValue","newValue","EntityStateChange","entityState","debug","testing","group_individual","multiObserver","grpMembers","_signal","_GLOBAL_GRP_ID","_GROUP_NAME","isDisableSave","disabledfindTalent","disabledfindTM","findTalent","tmpgrpMembers","varExists","val","indiv","GLOBAL_INDIV_ID","STATUS_CD","GLOBAL_GRP_ID","PERSONNEL_NAME","findTalentManager","GROUP_NAME","getGlobalIndivsFromGrpIndiv","LoginReady","isNavigating","tmpIndivs","_query","GLOBAL_INDIV_WITH_ALIAS","GRP_INDIV_ID","PassedGroup","saveGroupIndiv","getQueryEntities","successEnties","existingIndiv","LAST_UPDATED_DT","LAST_UPDATED_BY","setTimeout","addIndividual","deleteItem","isFound","_item","GuestCustomElement","_enableAdd","_enableRemove","budget_dialog","fnCheckBudget","copy_template_guest","fnCallCopy","reset_all","resetView","_PYMNTTERM","PAYMENT_TERM","fnModalPaymentTerm","passTerm","term","GUEST","REF_DESC","PYMNT_TERM_CD","REF_CD","varRefCd","each","PAY_RATE_FACTOR_TMP","PAY_RATE_FACTOR","format","INPUT_AMT_TMP","INPUT_AMT","visible","reset_summary","saveGuest","fnAddGuest","fnRemoveGuest","BDGT_TMPL_GUEST_DTL_ID","HEADER","BDGT_TMPL_ID","BDGT_AMT","parseFloat","replace","REMARKS","USER","fnRegularBlurEvt","fnRegularFocus","prop","AmountBlur","property","varConverted","substringMatcher","getFilter","checkCookie","setCookie","removeCookie","getCookie","strs","findMatches","q","cb","matches","substrRegex","RegExp","$","str","test","varFilterArray","propertyText","indexOf","cname","cvalue","mins","d","setTime","getTime","expires","toUTCString","document","cookie","expireAt","setMonth","getMonth","crumbs","crumbName","toGMTString","ca","c","charAt","substring","Datepicker","DPGlobal","parseFormat","picker","template","appendTo","on","click","proxy","isInput","is","component","focus","show","keyup","update","minViewMode","viewMode","startViewMode","weekStart","weekEnd","onRender","fillDow","fillMonths","showMode","prototype","constructor","outerHeight","place","window","stopPropagation","preventDefault","that","ev","target","closest","hide","trigger","type","date","off","set","formated","formatDate","setValue","newDate","parseDate","viewDate","getFullYear","fill","offset","css","top","left","dowCnt","html","dates","daysMin","append","monthsShort","year","month","currentDate","valueOf","text","months","prevMonth","day","getDaysInMonth","setDate","getDay","nextMonth","getDate","clsName","prevY","prevM","empty","join","currentYear","end","removeClass","eq","addClass","parseInt","yearCont","nodeName","toLowerCase","className","modes","navFnc","call","navStep","parent","setFullYear","Math","min","mousedown","dir","max","fn","datepicker","option","$this","extend","defaults","Constructor","days","daysShort","isLeapYear","separator","match","parts","setHours","setMinutes","setSeconds","setMilliseconds","cnt","m","yy","yyyy","dd","mm","headTemplate","contTemplate","jQuery","MainHeaderCustomElement","ModalWizard","toastr","_PROGRAM_GENRE_MSTR","_TELECAST_MODE_MSTR","_EPISODE_TYPE_MSTR","_STATIONS","_disableCreateBudget","_disableCancelBudget","_disableRefreshBudget","_disableSaveBudget","_disableBudgetId","_disablePrintBudget","_disableCopyBudget","programDisabled","budgetDisabled","CloseBudgetDialog","pass_program","PassedProgram","budget_refresh","fnBudgetRefreshHandle","fnClearHeader","_ModalWizard","BDGT_FROM","BDGT_TO","varToday","p1","Predicate","create","p2","pred","and","checkExpired","APPR_STAT_CD","checkDate","id","parse","validate","inputChanged","evt","keyCode","speak","speak1","alert","to","_COMPANY_ID","fnClearBudget","LoggedOut","CHARGE_CD","PROGRAM_GENRE_CD","TELECAST_MODE_CD","EPISODE_TYPE_CD","EPISODES","TAPING_DAYS","STATION_ID","REGULAR","pop","SEMI_REGULAR","STAFF","PROGRAM_GENRE_MSTR","unshift","TELECAST_MODE_MSTR","EPISODE_TYPE_MSTR","STATIONS","_STATUS","expand","select","_LOADING_BUDGET","STATUS","disable_search_personnel","PROGRAM_MSTR","fnBudget","fnDialogProgram","fnSaveBudget","varUseReport","popup","ActualCostService","moveTo","model","varGetHeader","IS_COPYING","fnBudgetValidation_1","reject","varAddMin","varSubMin","p3","p4","countError","fnBudgetValidation_2","c1","PROGRAM_ID","pred2","_queryCheckActual","varPromises","newPromise","resolve_2","reject_2","varTmpFrom","ACTUAL_FROM","varTmpTo","ACTUAL_TO","ACTUAL_COST_ID","_queryCheckVtr","foundVtr","varDataFromCompare","varDataToCompare","varMaxDate","allDate","varVtr","VTR_LIVE_DT","varDateCompare","new_date","add","BDGT_TMPL_HDR","passed","fnValidation_Approved","c2","passed_status","strValidation","isValid","TOTAL","includes","fnExecuteSaveBudgetHeader","subtract","varFrom","varTo","trim","BDGT_VIEW_FCTR","PARENT_PROGRAM_ID","BDGT_VIEW_CD","CHARGE_TYPE_CD","BDGT_TOTAL","BDGT_STAT_CD","BDGT_FOR_CD","PROGRAM_NAME","STATION_SENT_DATE","STATION_SENT","entities","copy_template","getEntityQuery","fnDialogBudget","configure","aurelia","use","standardConfiguration","developmentLogging","plugin","useDefaults","settings","lock","centerHorizontalOnly","startingZIndex","start","setRoot","mainpage","Router","budgetAccess","actualAccess","talentgroupAccess","buhAccess","headerVisible","_cache_obj","ROLE_CD","isEmpty","post","serviceNameBase","HASH","done","fnCheckAccess","filterMenu","varFound","APPLICATION","APPLICATION_DESC","navigateToRoute","navigateTo","mainview","clickTab","refreshPersonnelTab","loadMasterfiles","fnLoadIndiv","loadLookups","getJobByGlobalCompany","getJobByName","getLookups","getPaymentTerm","getGLOBALINDIVandALIAS","getJOB_GRP_CATEGORY","getProgramGenre","getTelecastMode","getEpisodeMode","getEpisodeType","getTalentSupplierComp","getTalentSupplierIndiv","getGlobalGrp","getGrpIndiv","getBdgtHdr","getIOCC","getGlobalIndiv","getAliasTrx","getGlobalCompany","getCompany","getCategory","getDivision","getReference","getJobGroup","getJob","getLocation","getUsers","getUserTrx","globalIndiv","talentSuppComp","talentSuppIndiv","globalAlias","globalCompany","globalGrp","jobMstr","jobGrp","category","lookups","reference","entityNames","IO_CC_MSTR","GLOBAL_INDIV_MSTR","GLOBAL_ALIAS_TRX","GLOBAL_COMPANY_MSTR","COMPANY_MSTR","DIVISION_MSTR","JOB_GRP_MSTR","JOB_MSTR","LOCATION_MSTR","CATEGORY_MSTR","REFERENCE_CD_MSTR","USER_PROFILE_MSTR","USER_ROLE_TRX","GRP_INDIV_MSTR","GLOBAL_GRP_MSTR","TALENT_SUPPLIER_COMP_MSTR","TALENT_SUPPLIER_INDIV_MSTR","EPISODE_MODE_MSTR","MODULE_ACCESS_TRX","JOB_GRP_CATEGORY","getLocal","unchanged","EntityState","Unchanged","initialValues","varCheck","GLOBAL_ID","varJob","JOB_ID","JOB_DESC","varJOB_p","varGrpCategory","JOB_GRP_ID","CATEGORY_ID","CATEGORY_DESC","paymentterm","ref","REF_GRP_CD","varTmpObject","varGlobalAlias","varGlobalIndiv","varTalentComp","varTalentSuppIndiv","varGlobalGrp","varAlias","ALIAS","varFoundAlias","ALIAS_NAME","GIVEN_NAME","PERSONNEL_INFO_SRC","SUPPLIER_INDIV_GLOBAL_ID","COMPANY_NAME","SUPPLIER_COMP_GLOBAL_ID","p_jobMstr","p_jobGrp","p_category","varFindGrp","allGrp","JOB_GRP_CD","JOB_GRP_DESC","CATEGORY_CD","varFindCategory","allCategory","using","execute","queryFailed","processLookups","query","getLocalSelect","resource","ordering","includeNullos","orderBy","executeQueryLocally","objName","blankValue","createNullos","manager","createNullo","entityName","values","jqXHR","textStatus","msg","MultiObserver","inject","observerLocator","observe","properties","callback","subscriptions","object","getObserver","NavBar","varCheckUser","EMPLOYEE_ID","currentInstruction","home","keyboard","overlayDismiss","changePassword","_INPUT_AMT_REGULAR","_INPUT_AMT_SEMI_REGULAR","_INPUT_AMT_STAFF","_INPUT_AMT_GUEST","_INPUT_AMT_TOTAL","clear_budget_modal","PersonnelCustomElement","styleStringHidden","styleStringVisible","_JOBS","_Personnel","_PersonnelTM","_Index","varPymnt","isIndivMstrTalentsDisabled","isIndivMstrManagerDisabled","isJobDisabled","isIndivMstrDisabled","_ce_head","onSpeculateProp","ButtonStatus","PassedIndiv","refreshOnSelect","passJob","job","varResult","_personnelSearch","collapse_expand_head","ce_value","styleString","collapse_expand","fnCheckExistingTalents","TALENTS","REMOVE","myFunction","usr","TALENT_MANAGER","BDGT_TMPL_DTL_ID_TMP","BDGT_TMPL_DTL_ID","BDGT_TMPL_DTL_ID_LINK","BDGT_TMPL_DTL_ID_LINK_TMP","toPersonModel","USE","savePersonnel","scrollDiv","varPsClType","varJobLength","varCategoryLength","CONTRACT_AMT","STAFF_WORK","PAY_TO_PERSON_FL","BUDGET_AMT","TAPING_DAY_CNT","PERSONNEL_CLASS_CD","CONFIDENTIAL","POOL_RECORD","GROUP_ORDER","GLOBAL_ID_LINK","setPersonnelValues","obj","varTM","CONTRACT_AMT_TMP","BLANK_PERSONNEL_NAME","CONFIDENTIAL_TMP","STAFF_WORK_TMP","POOL_RECORD_TMP","varToDelete","removeTalent","varToSplice","fnModalJob","tblHeader","divRegular","scrollTop","tblData","position","varCol","clientWidth","showTalents","_selectedItem","showTalentMngr","fnIndivMstr","removeTalentMngr","varJobTManager","getDefaultPymntTerm","fnPassedPersonnels","varIndiv","allIndiv","varTalent","modalIndivMstrTalents","ids","allReg","personnel","moveTrigger","_currentIndex","varCopy","focusTrigger","tag","varErrorDuplicate","varErrorJobTerms","varErrorCheckTalentManager","varDuplicateValidation","varI","varJ","j","varIndex","getAllDtl","foundDtl","IsNewTalent","PER_TAPING_DAY_RATE","PERSONNEL_CLASS_TYPE","getPersonnelClassType","WITH_TALENT_MANAGER","varInsertTM","varTalentMngrToDelete","allTm","varTalentToDelete","varTalentToEdit","varCheckTalent","allTalent","varTalentMngrToEdit","fnSequenceDispatch","varPaymentTerm","fnBlankPersonnelRegular","varBudgetLast","chkRemove","removeRegular","varRemoved","fnIndivMstrTalents","fnIndivMstrManager","service","serviceBase","serviceBaseUpdate","getSvcUrl","method","getSvcUrlUpdate","GetJson","jsonIn","ajax","url","dataType","json","PostJson","contentType","PostUpdateJson","pageSize","actualCostWebUrl","actualCostServiceBase","SummaryCustomElement","_INPUT_AMT_MAINSTAY","varObserveSubscriptions","_multiObserver","fnCheckSummary","fnResetSummarySubscription","fnCheckAll","_objBudget_LOADING_BUDGET","varSubscription","varSubscriptionTM","toDispose","Users","http","users","useStandardConfiguration","withBaseUrl","activate","fetch","Welcome","firstName","lastName","previousValue","fullName","submit","canDeactivate","UpperValueConverter","toView","DatepatternValueConverter","FiltercustomValueConverter","array","signal","allFilter","NumberFormatValueConverter","SignalsValueConverter","SortValueConverter","direction","factor","slice","sort","SorttextValueConverter","TakeValueConverter","count","budget","controller","items","pageindex","varFilterArrayLength","currPredicate","lstPredicates","ClearSearch","fnManualFilter","tmpVar","_rBUDGET_TITLE","querySelectorAll","varOb","getAttribute","getValue","FilterQueryOp","Contains","varValuesHasChanged","tmpVarNew","sortBy","reverse","PROGRAM_IO","failed","selectedBudget","ok","fnKeyup","_bBDGT_TMPL_ID","_bPROGRAM_TITLE","_bPROGRAM_IO","_bAPPR_STAT_CD","buhProgramDialog","varFilterArraySelected","attached","selectedTalent","_rGROUP_TITLE","SelectingDone","_bPROGRAM_CD","buhSearch","_rBUH_SEARCH","selectedBUH","_bOPTIONAL_GLOBAL_ID","_bFIRST_NAME","change_password","keyPressed","$event","which","savePassword","_NEW_PASSWORD","showing","_buttonTitle","_isDisableElement","_width","_message","CloseModal","val1","val2","val3","OpenModal","InitializeModal","_id","_setTitle","showDialog","_setContent","content","cleardispatch","continue","closeModal","enableButton","isEnabled","EditPerson","person","globalindivmstr","varActiveFromCompanyMstr","result_p","all_p","_bGLOBAL_INDIV_ID","_bPERSONNEL_NAME","indivmstr","selectedIndiv","intTest","hasFocus","_rJOB_TITLE","varJobs","JOB_GRP","selectedJob","_bJOB_GRP","_bJOB_DESC","refJobDesc","login","_user_content","_content","_companies","_users","_USER_PROFILE_MSTR","user_expired","disableLogButton","varGetUserRole","ClearLogin","tryLogin","_PASSWORD","_USER","_COMPANY","fnCheckUser","loginSuccess","varUserAtt","checkRole","MODULE_MSTR","MODULE_NAME","ACCESS_FL","resetPassword","isUndefined","isNull","location","reload","_USERChanged","EXPIRE_DT","modalcontainer","buttonTitle","display","btnRef","selectedTerm","program","findProgramUser","allP","selectedProgram","talentmanagergroups","_bGLOBAL_GRP_ID","_bGROUP_NAME","cache_budget","gridpaging","_Pages","_PagesShow","subscription","onChange","intByTmp","intDivTmp","ceil","divby","endClick","endValue","selectedClick","_cache_budget","_cache_budget_LOADING_BUDGET"],"mappings":"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","file":"app-bundle.js","sourcesContent":["\r\nimport { inject } from 'aurelia-framework';\r\nimport { objBudget } from 'objBudget';\r\nimport settings from './settings';\r\n@inject(objBudget)\r\nexport class actual_cost{\r\n    _objBudget;\r\n    constructor(objBudget) {\r\n        this._objBudget = objBudget;\r\n        //console.log(this._objBudget.USER);\r\n    //  window.location.href=\"http://absppms2:8084/\";\r\n      //window.location.href=\"http://localhost:15253/\";\r\n  }\r\n\r\n}\r\n","import 'bootstrap';\nimport {inject} from 'aurelia-framework';\n//import 'bootstrap/css/bootstrap.css!';\nimport toastr from \"toastr\";\n@inject(toastr)\nexport class App {\n  configureRouter(config, router){\n    config.title = 'PPMS';\n    config.map([\n      { route: ['', 'blankpage'], name: 'blankpage', moduleId: 'blankpage', nav: true, title: 'PPMS' },\n      { route: 'mainpage', name: 'mainpage', moduleId: 'mainpage', nav: true, title: 'Main Page' },\n      { route: 'mainview', name: 'mainview', moduleId: 'ppfcs/budget/mainview', nav: true, title: 'Budget Template' },\n      { route: 'group_individual', name: 'group_individual', moduleId: 'group_individual', nav: true, title:'Talent Groups' },\n      { route: 'actual_cost', name: 'actual_cost', moduleId: 'ppfcs/actual_cost/actual_cost', nav: true, title:'Actual Cost' },\n      { route: 'buh', name: 'buh', moduleId: 'buh', nav: true, title:'BUH' }\n    ]);\n\n    this.router = router;\n    \n    toastr.options = {\n      \"closeButton\": true,\n      \"debug\": false,\n      \"positionClass\": \"toast-bottom-right\",\n      \"onclick\": null,\n      \"showDuration\": \"300\",\n      \"hideDuration\": \"1000\",\n      \"timeOut\": \"5000\",\n      //\"timeOut\": \"300000\",\n      //\"extendedTimeOut\": \"1000\",\n      \"showEasing\": \"swing\",\n      \"hideEasing\": \"linear\",\n      \"showMethod\": \"fadeIn\",\n      \"hideMethod\": \"fadeOut\"\n    };\n  }\n}\n","\nexport class blankpage {\r\n    \r\n}","import {inject} from 'aurelia-framework';\n\n@inject(Element)\nexport class BlurImageCustomAttribute {\n  constructor(element){\n    this.element = element;\n  }\n\n  valueChanged(newImage){\n    if(newImage.complete){\n      drawBlur(this.element, newImage);\n    } else{\n      newImage.onload = () => drawBlur(this.element, newImage);\n    }\n  }\n}\n\n/*\nThis Snippet is using a modified Stack Blur js lib for blurring the header images.\n*/\n\n/*\n\nStackBlur - a fast almost Gaussian Blur For Canvas\n\nVersion:     0.5\nAuthor:\t\tMario Klingemann\nContact: \tmario@quasimondo.com\nWebsite:\thttp://www.quasimondo.com/StackBlurForCanvas\nTwitter:\t@quasimondo\n\nIn case you find this class useful - especially in commercial projects -\nI am not totally unhappy for a small donation to my PayPal account\nmario@quasimondo.de\n\nOr support me on flattr:\nhttps://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript\n\nCopyright (c) 2010 Mario Klingemann\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\nvar mul_table = [\n        512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,\n        454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,\n        482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,\n        437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,\n        497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,\n        320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,\n        446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,\n        329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,\n        505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,\n        399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,\n        324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,\n        268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,\n        451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,\n        385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,\n        332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,\n        289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];\n\n\nvar shg_table = [\n\t     9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17,\n\t\t17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19,\n\t\t19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20,\n\t\t20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21,\n\t\t21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21,\n\t\t21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22,\n\t\t22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22,\n\t\t22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23,\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n\t\t23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24 ];\n\nvar BLUR_RADIUS = 40;\n\nfunction stackBlurCanvasRGBA( canvas, top_x, top_y, width, height, radius )\n{\n\tif ( isNaN(radius) || radius < 1 ) return;\n\tradius |= 0;\n\n\tvar context = canvas.getContext(\"2d\");\n\tvar imageData;\n\n\ttry {\n\t  imageData = context.getImageData( top_x, top_y, width, height );\n\t} catch(e) {\n\t  throw new Error(\"unable to access image data: \" + e);\n\t}\n\n\tvar pixels = imageData.data;\n\n\tvar x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum,\n\tr_out_sum, g_out_sum, b_out_sum, a_out_sum,\n\tr_in_sum, g_in_sum, b_in_sum, a_in_sum,\n\tpr, pg, pb, pa, rbs;\n\n\tvar div = radius + radius + 1;\n\tvar w4 = width << 2;\n\tvar widthMinus1  = width - 1;\n\tvar heightMinus1 = height - 1;\n\tvar radiusPlus1  = radius + 1;\n\tvar sumFactor = radiusPlus1 * ( radiusPlus1 + 1 ) / 2;\n\n\tvar stackStart = new BlurStack();\n\tvar stack = stackStart;\n\tfor ( i = 1; i < div; i++ )\n\t{\n\t\tstack = stack.next = new BlurStack();\n\t\tif ( i == radiusPlus1 ) var stackEnd = stack;\n\t}\n\tstack.next = stackStart;\n\tvar stackIn = null;\n\tvar stackOut = null;\n\n\tyw = yi = 0;\n\n\tvar mul_sum = mul_table[radius];\n\tvar shg_sum = shg_table[radius];\n\n\tfor ( y = 0; y < height; y++ )\n\t{\n\t\tr_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;\n\n\t\tr_out_sum = radiusPlus1 * ( pr = pixels[yi] );\n\t\tg_out_sum = radiusPlus1 * ( pg = pixels[yi+1] );\n\t\tb_out_sum = radiusPlus1 * ( pb = pixels[yi+2] );\n\t\ta_out_sum = radiusPlus1 * ( pa = pixels[yi+3] );\n\n\t\tr_sum += sumFactor * pr;\n\t\tg_sum += sumFactor * pg;\n\t\tb_sum += sumFactor * pb;\n\t\ta_sum += sumFactor * pa;\n\n\t\tstack = stackStart;\n\n\t\tfor( i = 0; i < radiusPlus1; i++ )\n\t\t{\n\t\t\tstack.r = pr;\n\t\t\tstack.g = pg;\n\t\t\tstack.b = pb;\n\t\t\tstack.a = pa;\n\t\t\tstack = stack.next;\n\t\t}\n\n\t\tfor( i = 1; i < radiusPlus1; i++ )\n\t\t{\n\t\t\tp = yi + (( widthMinus1 < i ? widthMinus1 : i ) << 2 );\n\t\t\tr_sum += ( stack.r = ( pr = pixels[p])) * ( rbs = radiusPlus1 - i );\n\t\t\tg_sum += ( stack.g = ( pg = pixels[p+1])) * rbs;\n\t\t\tb_sum += ( stack.b = ( pb = pixels[p+2])) * rbs;\n\t\t\ta_sum += ( stack.a = ( pa = pixels[p+3])) * rbs;\n\n\t\t\tr_in_sum += pr;\n\t\t\tg_in_sum += pg;\n\t\t\tb_in_sum += pb;\n\t\t\ta_in_sum += pa;\n\n\t\t\tstack = stack.next;\n\t\t}\n\n\n\t\tstackIn = stackStart;\n\t\tstackOut = stackEnd;\n\t\tfor ( x = 0; x < width; x++ )\n\t\t{\n\t\t\tpixels[yi+3] = pa = (a_sum * mul_sum) >> shg_sum;\n\t\t\tif ( pa != 0 )\n\t\t\t{\n\t\t\t\tpa = 255 / pa;\n\t\t\t\tpixels[yi]   = ((r_sum * mul_sum) >> shg_sum) * pa;\n\t\t\t\tpixels[yi+1] = ((g_sum * mul_sum) >> shg_sum) * pa;\n\t\t\t\tpixels[yi+2] = ((b_sum * mul_sum) >> shg_sum) * pa;\n\t\t\t} else {\n\t\t\t\tpixels[yi] = pixels[yi+1] = pixels[yi+2] = 0;\n\t\t\t}\n\n\t\t\tr_sum -= r_out_sum;\n\t\t\tg_sum -= g_out_sum;\n\t\t\tb_sum -= b_out_sum;\n\t\t\ta_sum -= a_out_sum;\n\n\t\t\tr_out_sum -= stackIn.r;\n\t\t\tg_out_sum -= stackIn.g;\n\t\t\tb_out_sum -= stackIn.b;\n\t\t\ta_out_sum -= stackIn.a;\n\n\t\t\tp =  ( yw + ( ( p = x + radius + 1 ) < widthMinus1 ? p : widthMinus1 ) ) << 2;\n\n\t\t\tr_in_sum += ( stackIn.r = pixels[p]);\n\t\t\tg_in_sum += ( stackIn.g = pixels[p+1]);\n\t\t\tb_in_sum += ( stackIn.b = pixels[p+2]);\n\t\t\ta_in_sum += ( stackIn.a = pixels[p+3]);\n\n\t\t\tr_sum += r_in_sum;\n\t\t\tg_sum += g_in_sum;\n\t\t\tb_sum += b_in_sum;\n\t\t\ta_sum += a_in_sum;\n\n\t\t\tstackIn = stackIn.next;\n\n\t\t\tr_out_sum += ( pr = stackOut.r );\n\t\t\tg_out_sum += ( pg = stackOut.g );\n\t\t\tb_out_sum += ( pb = stackOut.b );\n\t\t\ta_out_sum += ( pa = stackOut.a );\n\n\t\t\tr_in_sum -= pr;\n\t\t\tg_in_sum -= pg;\n\t\t\tb_in_sum -= pb;\n\t\t\ta_in_sum -= pa;\n\n\t\t\tstackOut = stackOut.next;\n\n\t\t\tyi += 4;\n\t\t}\n\t\tyw += width;\n\t}\n\n\n\tfor ( x = 0; x < width; x++ )\n\t{\n\t\tg_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;\n\n\t\tyi = x << 2;\n\t\tr_out_sum = radiusPlus1 * ( pr = pixels[yi]);\n\t\tg_out_sum = radiusPlus1 * ( pg = pixels[yi+1]);\n\t\tb_out_sum = radiusPlus1 * ( pb = pixels[yi+2]);\n\t\ta_out_sum = radiusPlus1 * ( pa = pixels[yi+3]);\n\n\t\tr_sum += sumFactor * pr;\n\t\tg_sum += sumFactor * pg;\n\t\tb_sum += sumFactor * pb;\n\t\ta_sum += sumFactor * pa;\n\n\t\tstack = stackStart;\n\n\t\tfor( i = 0; i < radiusPlus1; i++ )\n\t\t{\n\t\t\tstack.r = pr;\n\t\t\tstack.g = pg;\n\t\t\tstack.b = pb;\n\t\t\tstack.a = pa;\n\t\t\tstack = stack.next;\n\t\t}\n\n\t\typ = width;\n\n\t\tfor( i = 1; i <= radius; i++ )\n\t\t{\n\t\t\tyi = ( yp + x ) << 2;\n\n\t\t\tr_sum += ( stack.r = ( pr = pixels[yi])) * ( rbs = radiusPlus1 - i );\n\t\t\tg_sum += ( stack.g = ( pg = pixels[yi+1])) * rbs;\n\t\t\tb_sum += ( stack.b = ( pb = pixels[yi+2])) * rbs;\n\t\t\ta_sum += ( stack.a = ( pa = pixels[yi+3])) * rbs;\n\n\t\t\tr_in_sum += pr;\n\t\t\tg_in_sum += pg;\n\t\t\tb_in_sum += pb;\n\t\t\ta_in_sum += pa;\n\n\t\t\tstack = stack.next;\n\n\t\t\tif( i < heightMinus1 )\n\t\t\t{\n\t\t\t\typ += width;\n\t\t\t}\n\t\t}\n\n\t\tyi = x;\n\t\tstackIn = stackStart;\n\t\tstackOut = stackEnd;\n\t\tfor ( y = 0; y < height; y++ )\n\t\t{\n\t\t\tp = yi << 2;\n\t\t\tpixels[p+3] = pa = (a_sum * mul_sum) >> shg_sum;\n\t\t\tif ( pa > 0 )\n\t\t\t{\n\t\t\t\tpa = 255 / pa;\n\t\t\t\tpixels[p]   = ((r_sum * mul_sum) >> shg_sum ) * pa;\n\t\t\t\tpixels[p+1] = ((g_sum * mul_sum) >> shg_sum ) * pa;\n\t\t\t\tpixels[p+2] = ((b_sum * mul_sum) >> shg_sum ) * pa;\n\t\t\t} else {\n\t\t\t\tpixels[p] = pixels[p+1] = pixels[p+2] = 0;\n\t\t\t}\n\n\t\t\tr_sum -= r_out_sum;\n\t\t\tg_sum -= g_out_sum;\n\t\t\tb_sum -= b_out_sum;\n\t\t\ta_sum -= a_out_sum;\n\n\t\t\tr_out_sum -= stackIn.r;\n\t\t\tg_out_sum -= stackIn.g;\n\t\t\tb_out_sum -= stackIn.b;\n\t\t\ta_out_sum -= stackIn.a;\n\n\t\t\tp = ( x + (( ( p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1 ) * width )) << 2;\n\n\t\t\tr_sum += ( r_in_sum += ( stackIn.r = pixels[p]));\n\t\t\tg_sum += ( g_in_sum += ( stackIn.g = pixels[p+1]));\n\t\t\tb_sum += ( b_in_sum += ( stackIn.b = pixels[p+2]));\n\t\t\ta_sum += ( a_in_sum += ( stackIn.a = pixels[p+3]));\n\n\t\t\tstackIn = stackIn.next;\n\n\t\t\tr_out_sum += ( pr = stackOut.r );\n\t\t\tg_out_sum += ( pg = stackOut.g );\n\t\t\tb_out_sum += ( pb = stackOut.b );\n\t\t\ta_out_sum += ( pa = stackOut.a );\n\n\t\t\tr_in_sum -= pr;\n\t\t\tg_in_sum -= pg;\n\t\t\tb_in_sum -= pb;\n\t\t\ta_in_sum -= pa;\n\n\t\t\tstackOut = stackOut.next;\n\n\t\t\tyi += width;\n\t\t}\n\t}\n\n\tcontext.putImageData( imageData, top_x, top_y );\n\n}\n\nfunction BlurStack()\n{\n\tthis.r = 0;\n\tthis.g = 0;\n\tthis.b = 0;\n\tthis.a = 0;\n\tthis.next = null;\n}\n\nfunction drawBlur(canvas, image) {\n  var w = canvas.width;\n  var h = canvas.height;\n  var canvasContext = canvas.getContext('2d');\n  canvasContext.drawImage(image, 0, 0, w, h);\n  stackBlurCanvasRGBA(canvas, 0, 0, w, h, BLUR_RADIUS);\n};\n","import {EntityManager, EntityQuery} from './entity-manager-factory';\r\nimport {checkCookie,setCookie,removeCookie} from './helpers';\r\nimport {initializeBreeze,generateID} from './entity-manager-factory';\r\nimport {loadMasterfiles, loadTables, loadLookups, getLookups} from './masterfiles';\r\nimport toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {substringMatcher} from 'helpers';\r\nimport typeahead from 'typeahead';\r\nimport _ from 'underscore';\r\nimport {buhProgramDialog} from 'modals/buh-program-dialog';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {login} from 'modals/login';\r\nimport {buhSearch} from 'modals/buh-search';\r\n//import {handle, Dispatcher} from 'aurelia-flux';  \r\n\r\n//import { MultiObserver }from 'multi-observer';\r\nimport {  objBudget } from 'objBudget';\r\n\r\n\r\n@inject(objBudget,DialogService)\r\nexport class buh {\r\n\t_objBUH={PROGRAMS:[]};\r\n\t_objBudget=null;\r\n\tdialogService=null;\r\n\tloginDisabled=true;\r\n\tlogoutDisabled=false;\r\n\t//_BUH_PERSONNEL_ID=0;\r\n\tmasterFilesLoaded=false;\r\n\t_disableCells=true;\r\n\t_disableAdd=false;\r\n\t_disableDelete=true;\r\n\t_disableSave=true;\r\n\t_disableSearch=false;\r\n\t_disableGrid=true;\r\n\t_status=\"\";\r\n\t_user={};\r\n\t_programs=[];\r\n\tconstructor(objBudget,DialogService)\r\n\t{\r\n\r\n\t\tthis.dialogService=DialogService;\r\n\t\tthis._objBudget=objBudget;\r\n\r\n\t\t\t\r\n\r\n\t\tif(this.dialogService.controllers.length>0)\r\n\t\t{\r\n\t\t\tfor (var i = this.dialogService.controllers.length - 1; i >= 0; i--) {\r\n\t\t\t\tthis.dialogService.controllers[i].close();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t\t\t//toastr.success(\"Loading Programs\", \"Loading\");\r\n\r\n\t\t\t\t//initializeBreeze().then(() => {\t\r\n\r\n\r\n\t\t\t\t//\tvar _query = EntityQuery().from('PROGRAM_MSTR').where(breeze.Predicate.and(this.currPredicate)).select('PROGRAM_CD,PROGRAM_TITLE,PROGRAM_ID,BUH_PERSONNEL_ID');\r\n\t\t\t\t//\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\t\t//\t\tthis._programs= success.results;\r\n\t\t\t\t//\t});\t\r\n\t\t\t\t//      //have to set timeout because of IE, other templates are not loading\r\n\t\t\t\t//      // quickly and loading at same time with functions\r\n\t\t\t\t//      setTimeout(() => {\r\n\r\n\t\t\t\t//      \tif (checkCookie(\"PPMS_USER\") == \"\" || checkCookie(\"PPMS_USER\")==undefined || checkCookie(\"PPMS_USER\").indexOf('undefined')>=0)\r\n\t\t\t\t//      \t{\r\n\t\t\t\t//      \t\tthis.fnLogin();\r\n\t\t\t\t//      \t\tthis.loginDisabled=false;\r\n\t\t\t\t//      \t\tthis.logoutDisabled=true;\r\n\t\t\t\t//      \t\treturn;\r\n\t\t\t\t//      \t}\r\n\r\n\t\t\t\t//      \tthis.fnInitMasterfiles(0,\"\");\r\n\r\n\r\n\t\t\t\t//      }, 2000);\r\n\t\t\t\t//  });\r\n\r\n\r\n    // toastr.options = {\r\n    //   \"closeButton\": true,\r\n    //   \"debug\": false,\r\n    //   \"positionClass\": \"toast-bottom-right\",\r\n    //   \"onclick\": null,\r\n    //   \"showDuration\": \"300\",\r\n    //   \"hideDuration\": \"1000\",\r\n    //   //\"timeOut\": \"300000\",\r\n    //   //\"extendedTimeOut\": \"1000\",\r\n    //   \"showEasing\": \"swing\",\r\n    //   \"hideEasing\": \"linear\",\r\n    //   \"showMethod\": \"fadeIn\",\r\n    //   \"hideMethod\": \"fadeOut\"\r\n    // };\r\n\r\n\t}\r\n\r\n\taddBUH(){\r\n\t\tthis.fnCRUD(\"add\");\r\n\t}\r\n\r\n\tfnCRUD(value)\r\n\t{\r\n\t\tthis._disableCells=true;\r\n\t\tthis._disableSave=true;\r\n\t\tthis._disableDelete=true;\r\n\t\tthis._disableAdd=true;\r\n\t\tthis._disableGrid=true;\r\n\t\tthis._disableSearch=true;\r\n\t\tswitch(value){\r\n\t\t\tcase \"cancel\":\r\n\t\t\t{\r\n\t\t\t\tthis._disableSearch=false;\t\r\n\t\t\t\tthis._disableAdd=false;\r\n\t\t\t\tthis._objBUH={\r\n\t\t\t\t\tBUH_PERSONNEL_ID: 0,\r\n\t\t\t\t\tOPTIONAL_GLOBAL_ID: \"\",\r\n\t\t\t\t\tFIRST_NAME: \"\",\r\n\t\t\t\t\tMIDDLE_NAME: \"\",\r\n\t\t\t\t\tLAST_NAME: \"\",\r\n\t\t\t\t\tEMAIL_ADDRESS: \"\",PROGRAMS:[]};\r\n\t\t\t\tthis._status=\"\";\t\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"search\":\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.searchExistingBuh();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"add\":\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._status=\"add\";\r\n\t\t\t\t\tthis._disableCells=false;\r\n\t\t\t\t\tthis._disableSave=false;\r\n\t\t\t\t\tthis._objBUH={\r\n\t\t\t\t\t\tBUH_PERSONNEL_ID: \"\",\r\n\t\t\t\t\t\tOPTIONAL_GLOBAL_ID: \"\",\r\n\t\t\t\t\t\tFIRST_NAME: \"\",\r\n\t\t\t\t\t\tMIDDLE_NAME: \"\",\r\n\t\t\t\t\t\tLAST_NAME: \"\",\r\n\t\t\t\t\t\tEMAIL_ADDRESS: \"\",PROGRAMS:[]};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"delete\":\r\n\t\t\t\t\t{\r\n\r\n\t\t\t\t\t\tvar varDelete =confirm(\"Delete BUH?\");\r\n\r\n\r\n\t\t\t\t\t\tif(varDelete)\r\n\t\t\t\t\t\t{\r\n\r\n\r\n\t\t\t\t\t\t\tfor (var i = this._objBUH.PROGRAMS.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\t\t\tvar found = this._programs.find((all)=>all.PROGRAM_CD==this._objBUH.PROGRAMS[i].PROGRAM_CD);\r\n\t\t\t\t\t\t\t\tfound.BUH_PERSONNEL_ID=0;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar getBUHForEdit = EntityQuery().from('BUH_PERSONNEL').where(\"BUH_PERSONNEL_ID\",\"==\",this._objBUH.BUH_PERSONNEL_ID);\r\n\t\t\t\t\t\t\tEntityManager().executeQuery(getBUHForEdit).then((success) => {\r\n\t\t\t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\t\t\t\t\t\t\t\tEntityManager().saveChanges().then((success) => {\r\n\r\n\t\t\t\t\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"Program\");\r\n\r\n\t\t\t\t\t\t\t\t}, (fail) => {\r\n\r\n\t\t\t\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\tthis.fnCRUD(\"cancel\");\r\n\r\n\r\n\t\t\t\t\t\t\t});\r\n\r\n\r\n\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis._disableCells=false;\r\n\t\t\t\t\t\tthis._disableSave=false;\r\n\t\t\t\t\t\tthis._disableDelete=false;\r\n\t\t\t\t\t\tthis._disableAdd=false;\r\n\t\t\t\t\t\tthis._disableGrid=false;\r\n\t\t\t\t\t\tthis._disableSearch=false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"save\":\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.saveBUH();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tsaveBUH()\r\n\t\t\t{\r\n\t\t\t\tif(this._status==\"view\")\r\n\t\t\t\t{\r\n\t\t\t\t\tvar getBUHForEdit = EntityQuery().from('BUH_PERSONNEL').where(\"BUH_PERSONNEL_ID\",\"==\",this._objBUH.BUH_PERSONNEL_ID);\r\n\t\t\t\t\tEntityManager().executeQuery(getBUHForEdit).then((success) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsuccess.results[0].OPTIONAL_GLOBAL_ID=this._objBUH.OPTIONAL_GLOBAL_ID.toUpperCase();\r\n\t\t\t\t\t\tsuccess.results[0].FIRST_NAME=this._objBUH.FIRST_NAME.toUpperCase();\r\n\t\t\t\t\t\tsuccess.results[0].MIDDLE_NAME=this._objBUH.MIDDLE_NAME.toUpperCase();\r\n\t\t\t\t\t\tsuccess.results[0].LAST_NAME=this._objBUH.LAST_NAME.toUpperCase();\r\n\t\t\t\t\t\tsuccess.results[0].EMAIL_ADDRESS=this._objBUH.EMAIL_ADDRESS.toUpperCase();\r\n\r\n\t\t\t\t\t\tEntityManager().saveChanges().then((success) => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"New Business Unit Head\");\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis._disableDelete=false;\r\n\t\t\t\t\t\t\tthis._disableGrid=false;\r\n\t\t\t\t\t\t\tthis._disableAdd=false;\r\n\t\t\t\t\t\t\tthis._disableSearch=false;\r\n\t\t\t\t\t\t\tthis._disableCells=false;\r\n\t\t\t\t\t\t\tthis._disableSave=false;\r\n\r\n\t\t\t\t\t\t}, (fail) => {\r\n\r\n\t\t\t\t\t\t\tif(varInsert!=null)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvarInsert.entityAspect.setDeleted();  \r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tconsole.log(fail);\r\n\t\t\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\r\n\t\t\t\t\t\t});\r\n\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t///INSERTING\r\n\t\t\tvar getMax = EntityQuery().from('BUH_PERSONNEL').orderByDesc('BUH_PERSONNEL_ID').take(1);\r\n\t\t\tEntityManager().executeQuery(getMax).then((successMax) => {\r\n\t\t\t\tvar getMax = 1;\r\n\r\n\t\t\t\tif (successMax.results.length > 0)\r\n\t\t\t\t\tgetMax = successMax.results[0].BUH_PERSONNEL_ID + 1;\r\n\r\n\r\n\t\t\t\tvar varInsert = EntityManager().createEntity('BUH_PERSONNEL', {\r\n\t\t\t\t\tBUH_PERSONNEL_ID: getMax,\r\n\t\t\t\t\tOPTIONAL_GLOBAL_ID: this._objBUH.OPTIONAL_GLOBAL_ID.toUpperCase(),\r\n\t\t\t\t\tFIRST_NAME: this._objBUH.FIRST_NAME.toUpperCase(),\r\n\t\t\t\t\tMIDDLE_NAME: this._objBUH.MIDDLE_NAME.toUpperCase(),\r\n\t\t\t\t\tLAST_NAME: this._objBUH.LAST_NAME.toUpperCase(),\r\n\t\t\t\t\tEMAIL_ADDRESS: this._objBUH.EMAIL_ADDRESS.toUpperCase(),\r\n\t\t\t\t\tCREATED_BY: \"PAULV\",\r\n\t\t\t\t\tCREATED_DT: new Date(Date.now()),\r\n\t\t\t\t});\r\n\r\n\t\t\t\tEntityManager().addEntity(varInsert);\r\n\r\n\t\t\t\tEntityManager().saveChanges().then((success) => {\r\n\r\n\t\t\t\t\tthis._objBUH.BUH_PERSONNEL_ID=getMax;\r\n\r\n\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"New Business Unit Head\");\r\n\r\n\t\t\t\t\tthis._disableDelete=false;\r\n\t\t\t\t\tthis._disableGrid=false;\r\n\t\t\t\t\tthis._disableAdd=false;\r\n\t\t\t\t\tthis._disableSearch=false;\r\n\t\t\t\t\tthis._disableDelete=false;\r\n\t\t\t\t\tthis._disableCells=false;\r\n\t\t\t\t\tthis._disableSave=false;\r\n\t\t\t\t\tthis._status=\"view\";\r\n\r\n\t\t\t\t}, (fail) => {\r\n\r\n\t\t\t\t\tif(varInsert!=null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvarInsert.entityAspect.setDeleted();  \r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconsole.log(fail);\r\n\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\r\n\r\n\r\n\t\t}\r\n\r\n\r\n\t\tdeleteSelected(index)\r\n\t\t{\r\n\t\t\tvar varDelete =confirm(\"Delete record?\");\r\n\t\t\tif(varDelete)\r\n\t\t\t{\r\n\r\n\t\t\t\tvar found = this._programs.find((all)=>all.PROGRAM_CD==this._objBUH.PROGRAMS[index].PROGRAM_CD);\r\n\t\t\t\tfound.BUH_PERSONNEL_ID=0;\r\n\r\n\r\n\t\t\t\tEntityManager().saveChanges().then((success) => {\r\n\r\n\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"Program\");\r\n\r\n\t\t\t\t}, (fail) => {\r\n\r\n\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tthis._objBUH.PROGRAMS.splice(index,1);\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\r\n\t\tsearchExistingBuh(){\r\n\t\t\t\r\n\t\t\tthis.dialogService.open({\r\n\t\t\t\tviewModel: buhSearch\r\n            }).whenClosed(response => {\r\n\r\n\t\t\t\tif (!response.wasCancelled) {\r\n\t\t\t\t\tthis.searchBUH(response.output);\r\n\t\t\t\t\tthis._disableGrid=false;\r\n\t\t\t\t\tthis._disableDelete=false;\r\n\t\t\t\t\tthis._disableSave=false;\r\n\t\t\t\t\tthis._disableCells=false;\r\n\t\t\t\t} \r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._disableSearch=false;\r\n\t\t\t\t\tthis._disableAdd=false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tsearchBUH(item)\r\n\t\t{\r\n\t\t\tthis._status=\"view\";\r\n\r\n\t\t\tthis._objBUH.BUH_PERSONNEL_ID=item.BUH_PERSONNEL_ID;\r\n\t\t\tthis._objBUH.OPTIONAL_GLOBAL_ID=item.OPTIONAL_GLOBAL_ID;\r\n\t\t\tthis._objBUH.FIRST_NAME=item.FIRST_NAME;\r\n\t\t\tthis._objBUH.MIDDLE_NAME=item.MIDDLE_NAME;\r\n\t\t\tthis._objBUH.LAST_NAME=item.LAST_NAME;\r\n\t\t\tthis._objBUH.EMAIL_ADDRESS=item.EMAIL_ADDRESS;\r\n\r\n\t\t\tthis._disableAdd=false;\r\n\t\t\tthis._disableSearch=false;\r\n\r\n\t\t\tthis._objBUH.PROGRAMS=[];\r\n\r\n\t\t\tvar found = this._programs.filter((all)=>all.BUH_PERSONNEL_ID==item.BUH_PERSONNEL_ID);\r\n\t\t\t\r\n\t\t\tif(found!==undefined)\r\n\t\t\t\tfound.forEach((foundItems)=>\r\n\t\t\t\t{\t\r\n\t\t\t\t\tthis._objBUH.PROGRAMS.push(foundItems);\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\r\n\r\n\t\tsearchPrograms(){\t\r\n\t\t\tthis.dialogService.open({\r\n\t\t\t\tviewModel: buhProgramDialog\r\n            }).whenClosed(response => {\r\n\r\n\t\t\t\tif (!response.wasCancelled) {\r\n\r\n\t\t\t\t\tfor (var a = response.output.length - 1; a >= 0; --a) {\r\n\t\t\t\t\t\tvar found = this._programs.find((all)=>all.PROGRAM_CD==response.output[a].PROGRAM_CD);\r\n\t\t\t\t\t\tconsole.log(found.BUH_PERSONNEL_ID);\r\n\t\t\t\t\t\tif(found.BUH_PERSONNEL_ID==0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis._objBUH.PROGRAMS.push(response.output[a]);\r\n\t\t\t\t\t\t\tfound.BUH_PERSONNEL_ID=this._objBUH.BUH_PERSONNEL_ID;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttoastr.error(\"<strong>\"+found.PROGRAM_TITLE+\"</strong> cannot be added, it is assigned to other BUH Personnel.\", \"Problem occured\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tEntityManager().saveChanges().then((success) => {\r\n\r\n\t\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"Program\");\r\n\r\n\t\t\t\t\t}, (fail) => {\r\n\r\n\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\r\n\t\t\t\t\t});\r\n\r\n\r\n\r\n\r\n\t\t\t        \t//this._objBUH.PROGRAMS=response.output;\r\n\t\t\t        } \r\n\t\t\t    });\r\n\t\t}\r\n\r\n\t\tfnInitMasterfiles(initType,output){\r\n\r\n\t\t\tif(this.masterFilesLoaded==false)\r\n\t\t\t{\r\n\t\t\t\tthis._toastr = toastr;\r\n\t\t\t\ttoastr.info(\"Masterfiles...\", \"Loading please wait..\", { timeOut: 15000 });\r\n\t\t\t\tthis.loginDisabled = true;\r\n\t\t\t\tloadMasterfiles().then(() => {\r\n\t\t\t\t\tloadLookups().then(() => {\r\n\r\n\t\t\t\t\t\t//this._objBudget.OBSERVERS.init_modal.forEach((all) => {\r\n\t\t\t\t\t\t//\tall();\r\n\t\t\t\t\t\t//});\r\n\r\n\r\n\r\n\t\t\t\t\t\tthis.masterFilesLoaded = true;\r\n\r\n\t\t\t\t\t\tthis.fnPassUserObject(initType,output);\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.fnPassUserObject(initType,output);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfnLogin(){\r\n\t\t\tthis.dialogService.open({\r\n\t\t\t\tviewModel: login\r\n            }).whenClosed(response => {\r\n\r\n\t\t\t\tif (!response.wasCancelled) {\r\n\t\t\t\t\tthis.fnInitMasterfiles(1, response.output);\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfnPassUserObject(initType,output){\r\n\r\n\t\t\tif (initType == 1) {\r\n\r\n\r\n\t\t\t} else {\r\n\t\t\t\tvar varCookie = checkCookie(\"PPMS_USER\");\r\n\t\t\t\tvar varSplitCookie = varCookie.split('^');\r\n\t\t\t\tthis._user = {\r\n\t\t\t\t\tUSER_ID: varSplitCookie[0],\r\n\t\t\t\t\tCOMPANY_ID: varSplitCookie[1],\r\n\t\t\t\t\tIs_HR: varSplitCookie[2],\r\n\t\t\t\t\tIs_Branch: varSplitCookie[0]\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.loginDisabled = true;\r\n\t\t\t\tthis.logoutDisabled = false;\r\n\t\t\t\tthis.showingLogout = \"visible\";\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"Let's Start...\", \"Success\");\r\n\t\t\t\tthis._disableAdd=false;\r\n\t\t\t\tthis._disableSearch=false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.LoginPassed(output);\r\n\r\n\t\t}\r\n\r\n\t\tLoginPassed(user) {\r\n\r\n\t\t\tthis._user = user; \r\n\r\n      //console.log(user.USER_ID+\"^\"+user.COMPANY_ID+\"^\"+user.Is_HR+\"^\"+user.Is_Branch);\r\n\r\n      setCookie(\"PPMS_USER\", user.USER_ID+\"^\"+user.COMPANY_ID+\"^\"+user.Is_HR+\"^\"+user.Is_Branch, 30);\r\n      toastr.clear();\r\n      toastr.success(\"Let's Start...\", \"Success\");\r\n\r\n      this.logoutDisabled = false;\r\n      this.loginDisabled=true;\r\n\r\n      this.showingLogout = \"visible\";\r\n      this._disableAdd=false;\r\n\t  this._disableSearch=false;\r\n  }\r\n\r\n\r\n\r\n  logout() {\r\n  \tthis.fnCRUD(\"cancel\");\r\n  \tthis._disableAdd=true;\r\n\tthis._disableSearch=true;\r\n  \tthis.loginDisabled=false;\r\n  \tthis.logoutDisabled=true;\r\n\r\n  \tthis._user ={};\r\n  \tremoveCookie();\r\n  \tthis.showingLogout = \"hidden\";\r\n  \tthis.fnLogin();\r\n\r\n  }\r\n}","export class cache_obj{\r\n\r\n    ALLOW_PASS_CONFIDENTIAL=false;\r\n\r\n    PROGRAM_USER=[];\r\n    _ACCESS = {};\r\n    CALLER={ACTION:null,ACTION_CALLER:null,VALUE1:null,VALUE2:null,VALUE3:null,VALUE4:null};\r\n    OBSERVERS = {\r\n        init_modal:[], \r\n        close_modal:[], \r\n        open_modal:[], \r\n        enable_modal_button: [], \r\n        open_modal_message:[],\r\n        clear_indiv_modal: [], \r\n        clear_program_modal: [], \r\n        clear_log:[], \r\n        clear_login_modal:[], \r\n        clear_talentmanager_modal: [],\r\n        pass_value:[],\r\n        login_passed:[],\r\n        pass_group:[], \r\n        loggedout:[], \r\n        confirm_dialog:[],\r\n        enable_approved:[], \r\n        pass_indiv:[], \r\n        pass_job:[],\r\n        clear_job_modal:[],\r\n        budget_loaded: [],\n        logoutPage: [],\n        loginPage:[]\r\n    };\r\n}","export class ChildRouter{\n  heading = 'Child Router';\n\n  configureRouter(config, router){\n    config.map([\n      { route: ['','welcome'],  name: 'welcome',       moduleId: 'welcome',       nav: true, title:'Welcome' },\n      { route: 'users',         name: 'users',         moduleId: 'users',         nav: true, title:'Github Users' },\n      { route: 'child-router',  name: 'child-router',  moduleId: 'child-router',  nav: true, title:'Child Router' }\n    ]);\n\n    this.router = router;\n  }\n}\n","import settings from './settings';\r\nimport breeze from 'breeze-client';\r\n\r\nvar entityManager;\r\n//var EntityQuery = breeze.EntityQuery;\r\n\r\n\r\nexport function initializeBreeze() {\r\n  try {\r\n\r\n    breeze.config.initializeAdapterInstance('dataService', 'webApiOData', true);\r\n    entityManager = new breeze.EntityManager(settings.serviceName);\r\n    \r\n    //saveOptions: new breeze.SaveOptions({allowConcurrentSaves: true})\r\n    entityManager.saveOptions = new breeze.SaveOptions({ allowConcurrentSaves: true });\r\n    \r\n    return entityManager.fetchMetadata();\r\n\r\n\r\n  } catch (e) {\r\n    console.log(e);\r\n    return Promise.resolve(false);\r\n  }\r\n\r\n}\r\n/**\r\n * Creates Breeze EntityManager instances.\r\n */\r\nexport function EntityManager() {\r\n  return entityManager;\r\n  //copy\r\n  /*entityManager = new breeze.EntityManager(settings.serviceName);\r\n  return entityManager.fetchMetadata()\r\n    .then(() => copyEntityManager());*/\r\n}\r\n\r\nexport function EntityQuery() {\r\n  return breeze.EntityQuery;\r\n}\r\n\r\n\r\nexport function generateID(){\r\n  return breeze.core.getUuid();\r\n}\r\n\r\n\r\nfunction copyEntityManager() {\r\n  var copy = entityManager.createEmptyCopy();\r\n  copy.entityChanged.subscribe(logChanges);\r\n  return copy;\r\n}\r\n\r\n// log entity changes to the console for debugging purposes.\r\nfunction logChanges(data) {\r\n  var message = 'Entity Changed.  Entity: ' + (data.entity ? data.entity.entityType.name + '/' + data.entity.entityAspect.getKey().toString() : '?') + ';  EntityAction: ' + data.entityAction.getName() + '; ';\r\n  if (data.entityAction === breeze.EntityAction.PropertyChange) {\r\n    var pcArgs = data.args;\r\n    message += 'PropertyName: ' + (pcArgs.propertyName || 'null') + '; Old Value: ' + (pcArgs.oldValue ? pcArgs.oldValue.toString() : 'null') + '; New Value: ' + (pcArgs.newValue ? pcArgs.newValue.toString() : 'null') + ';';\r\n  }\r\n  if (data.entityAction === breeze.EntityAction.EntityStateChange) {\r\n    message += 'New State: ' + data.entity.entityAspect.entityState.getName() + ';';\r\n  }\r\n}\r\n","export default {\n  debug: true,\n  testing: true\n};\n","import {checkCookie,setCookie,removeCookie} from './helpers';\r\nimport {initializeBreeze,generateID} from './entity-manager-factory';\r\nimport {loadMasterfiles, loadTables, loadLookups, getLookups} from './masterfiles';\r\nimport toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {substringMatcher} from 'helpers';\r\nimport typeahead from 'typeahead';\r\nimport _ from 'underscore';\r\nimport {EntityManager, EntityQuery} from './entity-manager-factory';\r\n//import {handle, Dispatcher} from 'aurelia-flux';  \r\nimport { MultiObserver }from 'multi-observer';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {login} from 'modals/login';\r\nimport {globalindivmstr} from 'modals/globalindivmstr';\r\nimport {talentmanagergroups} from 'modals/talentmanagergroups';\r\nimport settings from './settings';\r\n\r\n@inject(MultiObserver,DialogService)\r\nexport class group_individual {\r\n\tmasterFilesLoaded=false;\r\n\tmodalTalentManager;\r\n\tmodalIndivMstr;\r\n\tgrpMembers = [];\r\n\t//_dispatcher;\r\n\t_signal = null;\r\n\t_GLOBAL_GRP_ID = \"\";\r\n\t_GROUP_NAME = \"\";\r\n\tisDisableSave = true;\r\n\tshowingLogout=\"hidden\";\r\n\t_user=\"\";\r\n\r\n\tdisabledfindTalent=true;\r\n\tdisabledfindTM=false;\r\n\tconstructor(multiObserver,dialogService) {\r\n\r\n\t\tthis.dialogService=dialogService;\r\n\t\tif(this.dialogService.controllers.length>0)\r\n\t\t{\r\n\t\t\tfor (var i = this.dialogService.controllers.length - 1; i >= 0; i--) {\r\n\t\t\t\tthis.dialogService.controllers[i].close();\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t//initializeBreeze().then(() => {\r\n\t\t//      //have to set timeout because of IE, other templates are not loading\r\n\t\t//      // quickly and loading at same time with functions\r\n\t\t//      setTimeout(() => {\r\n\r\n\t\t//      \tif (checkCookie(\"PPMS_USER\") == \"\" || checkCookie(\"PPMS_USER\")==undefined || checkCookie(\"PPMS_USER\").indexOf('undefined')>=0)\r\n\t\t//      \t{\r\n\t\t//      \t\tthis.fnLogin();\r\n\t\t//      \t\tthis.loginDisabled=false;\r\n\t\t//      \t\tthis.logoutDisabled=true;\r\n\t\t//      \t\treturn;\r\n\t\t//      \t}\r\n\r\n\t\t//      \tthis.fnInitMasterfiles(0,\"\");\r\n\r\n\r\n\t\t//      }, 2000);\r\n\t\t//  });\r\n\r\n\t\t// toastr.options = {\r\n\t\t// \t\"closeButton\": true,\r\n\t\t// \t\"debug\": false,\r\n\t\t// \t\"positionClass\": \"toast-bottom-right\",\r\n\t\t// \t\"onclick\": null,\r\n\t\t// \t\"showDuration\": \"300\",\r\n\t\t// \t\"hideDuration\": \"1000\",\r\n\t\t// \t//\"timeOut\": \"300000\",\r\n\t\t// \t//\"extendedTimeOut\": \"1000\",\r\n\t\t// \t\"showEasing\": \"swing\",\r\n\t\t// \t\"hideEasing\": \"linear\",\r\n\t\t// \t\"showMethod\": \"fadeIn\",\r\n\t\t// \t\"hideMethod\": \"fadeOut\"\r\n\t\t// };\r\n\r\n\t\r\n\t}\r\n\r\n\r\n\t\t//this._dispatcher = Dispatcher;\r\n\t\t// this.modalTalentManager = {\r\n\t\t// \ttitle: 'Talent Managers',\r\n\t\t// \tcontent: 'modals/talentmanagergroups',\r\n\t\t// \tvalue: \"\",\r\n\t\t// \tid: generateID(),\r\n\t\t// \tbuttonTitle: \"Find Talent Manager\",\r\n\t\t// \tcleardispatch: \"clear_talentmanager_modal\"\r\n\t\t\t\r\n\t\t// };\r\n\r\n\r\n\t\t// this.modalIndivMstr = {\r\n\t\t// \ttitle: 'Talent Managers',\r\n\t\t// \tcontent: 'modals/globalindivmstr',\r\n\t\t// \tvalue: \"\",\r\n\t\t// \tid: generateID(),\r\n\t\t// \tbuttonTitle: \"Search Talent\",\r\n\t\t// \tcleardispatch: \"clear_indiv_modal\"\r\n\t\t// };\r\n\r\n\t\t// this.modalLogin = {\r\n\t\t// \ttitle: 'LOG-IN',\r\n\t\t// \tcontent: 'modals/login',\r\n\t\t// \tvalue: \"\",\r\n\t\t// \tid: generateID(),\r\n\t\t// \tbuttonTitle: \"Log In\",\r\n\t\t// \tcleardispatch: \"clear_login_modal\",\r\n\t\t// \twidth:500\r\n\t\t// };\r\n\tfindTalent()\r\n\t{\r\n\t\tthis.dialogService.open({\r\n        viewModel: globalindivmstr\r\n        }).whenClosed(response => {\r\n        \r\n        if (!response.wasCancelled) {\r\n           \r\n\t\t\t\tvar tmpgrpMembers=this.grpMembers;\r\n\t\t\t\tvar varExists = false;\r\n\t\t\t\tresponse.output\r\n\t\t\t\t.forEach((val) => {\r\n\r\n\t\t\t\t\tvarExists = false;\r\n\r\n\t\t\t\t\ttmpgrpMembers.forEach((indiv) => {\r\n\t\t\t\t\t\tif (val.GLOBAL_INDIV_ID == indiv.GLOBAL_INDIV_ID) {\r\n\t\t\t\t\t\t\tindiv.STATUS_CD = \"ACTV\";\r\n\t\t\t\t\t\t\tvarExists = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\r\n\t\t\t\t\tif (!varExists) {\r\n\t\t\t\t\t\ttmpgrpMembers.push({\r\n\t\t\t\t\t\t\tGLOBAL_INDIV_ID: val.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\t\tGLOBAL_GRP_ID: this._GLOBAL_GRP_ID,\r\n\t\t\t\t\t\t\tPERSONNEL_NAME: val.PERSONNEL_NAME,\r\n\t\t\t\t\t\t\tSTATUS_CD: \"ACTV\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\ttmpgrpMembers.forEach((all) => {\r\n\t\t\t\t\tif (all.STATUS_CD == \"\" || all.STATUS_CD === undefined)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tall.STATUS_CD = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.grpMembers=tmpgrpMembers;\r\n\r\n\t\t\t\tthis._signal = generateID();\r\n\r\n\r\n\t\t\t\r\n\r\n        } else {\r\n          \r\n        }\r\n      });\r\n\t}\r\n\r\n\tfindTalentManager()\r\n\t{\r\n\t\tthis.dialogService.open({\r\n        viewModel: talentmanagergroups\r\n        }).whenClosed(response => {\r\n        \r\n        if (!response.wasCancelled) {\r\n           \r\n\t\t\t\tthis._GLOBAL_GRP_ID = response.output.GLOBAL_GRP_ID;\r\n\t\t\t\tthis._GROUP_NAME = response.output.GROUP_NAME;\r\n\r\n\t\t\t\tthis.getGlobalIndivsFromGrpIndiv();\r\n\r\n\r\n\t\t\t\tthis.disabledfindTalent=false;\t\r\n\t\t\t\tthis.isDisableSave=false;\r\n\r\n        } else {\r\n          \r\n        }\r\n      });\r\n\t}\r\n\r\n\r\n\t//@handle('login.passed')\r\n\tLoginReady(user) {\r\n\t\t\tthis._user=user;\r\n\t\t\tsetCookie(\"PPMS_USER\", user.USER_ID+\"^\"+user.COMPANY_ID+\"^\"+user.Is_HR+\"^\"+user.Is_Branch, 30);\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"Let's Start...\", \"Success\");\r\n\t\t\tthis.disabledfindTM=false;\r\n\r\n\t\t\tthis.showingLogout=\"visible\";\r\n\t}\r\n\r\n\r\n\r\n\t\tfnInitMasterfiles(initType,output){\r\n\r\n\t\t\tif(this.masterFilesLoaded==false)\r\n            {\n                settings.isNavigating = true;\r\n\t\t\t\tthis._toastr = toastr;\r\n\t\t\t\ttoastr.info(\"Masterfiles...\", \"Loading please wait..\", { timeOut: 15000 });\r\n\t\t\t\tthis.loginDisabled = true;\r\n\t\t\t\tloadMasterfiles().then(() => {\r\n\t\t\t\t\tloadLookups().then(() => {\r\n\r\n\t\t\t\t\t\tthis.masterFilesLoaded = true;\r\n\r\n\t\t\t\t\t\tthis.fnPassUserObject(initType,output);\r\n                        settings.isNavigating = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.fnPassUserObject(initType,output);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfnLogin(){\r\n\t\t\tthis.dialogService.open({\r\n\t\t\t\tviewModel: login\r\n            }).whenClosed(response => {\r\n\r\n\t\t\t\tif (!response.wasCancelled) {\r\n\t\t\t\t\tthis.fnInitMasterfiles(1, response.output);\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfnPassUserObject(initType,output){\r\n\r\n\t\t\tif (initType == 1) {\r\n\r\n\r\n\t\t\t} else {\r\n\t\t\t\tvar varCookie = checkCookie(\"PPMS_USER\");\r\n\t\t\t\tvar varSplitCookie = varCookie.split('^');\r\n\t\t\t\tthis._user = {\r\n\t\t\t\t\tUSER_ID: varSplitCookie[0],\r\n\t\t\t\t\tCOMPANY_ID: varSplitCookie[1],\r\n\t\t\t\t\tIs_HR: varSplitCookie[2],\r\n\t\t\t\t\tIs_Branch: varSplitCookie[0]\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.loginDisabled = true;\r\n\t\t\t\tthis.logoutDisabled = false;\r\n\t\t\t\tthis.showingLogout = \"visible\";\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"Let's Start...\", \"Success\");\r\n\t\t\t\tthis.disabledfindTM=false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.LoginPassed(output);\r\n\r\n\t\t}\r\n\r\nLoginPassed(user) {\r\n\r\n\t\t\tthis._user = user; \r\n\r\n      setCookie(\"PPMS_USER\", user.USER_ID+\"^\"+user.COMPANY_ID+\"^\"+user.Is_HR+\"^\"+user.Is_Branch, 30);\r\n      toastr.clear();\r\n      toastr.success(\"Let's Start...\", \"Success\");\r\n\r\n      this.logoutDisabled = false;\r\n      this.loginDisabled=true;\r\n\r\n      this.showingLogout = \"visible\";\r\n\r\n      this.disabledfindTM=false;\r\n  }\r\n\r\n\r\n\r\n  logout() {\r\n  \tthis.disabledfindTM=true;\r\n  \tthis.isDisableSave=true;\r\n\tthis.clear();\r\n  \tthis.loginDisabled=false;\r\n  \tthis.logoutDisabled=true;\r\n  \tthis._user ={};\r\n  \tremoveCookie();\r\n  \tthis.showingLogout = \"hidden\";\r\n  \tthis.fnLogin();\r\n\r\n  }\r\n\t\r\n\r\n\tgetGlobalIndivsFromGrpIndiv(){\r\n\t\tthis.grpMembers=[];\r\n\t\tvar tmpIndivs = [];\r\n\t\tvar _query = EntityQuery().from('GRP_INDIV_MSTR').where(\"GLOBAL_GRP_ID\", \"==\", this._GLOBAL_GRP_ID);\r\n\t\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\tsuccess.results.forEach((all) => {\r\n\t\t\t\t\r\n\t\t\t\tgetLookups().GLOBAL_INDIV_WITH_ALIAS.forEach((item)=>{\r\n\r\n\t\t\t\t\tif(item.GLOBAL_INDIV_ID==all.GLOBAL_INDIV_ID)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttmpIndivs.push({\r\n\t\t\t\t\t\t\tGLOBAL_INDIV_ID: all.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\t\tGLOBAL_GRP_ID: all.GLOBAL_GRP_ID,\r\n\t\t\t\t\t\t\tPERSONNEL_NAME: item.PERSONNEL_NAME,\r\n\t\t\t\t\t\t\tGRP_INDIV_ID: all.GRP_INDIV_ID,\r\n\t\t\t\t\t\t\tSTATUS_CD: all.STATUS_CD\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// console.log(success.results);\r\n\t\t\t\t// \t\tconsole.log(tmpIndivs);\r\n\r\n\t\t\t\tif(success.results.length==tmpIndivs.length)\t\t\t\t\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.grpMembers=tmpIndivs;\r\n\t\t\t\t\tthis._signal = generateID();\r\n\t\t\t\t\ttoastr.success(\"Refreshed..\", \"Data Reloaded..\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// var _getIndiv = EntityQuery().from('GLOBAL_INDIV_MSTR').where(\"GLOBAL_INDIV_ID\", \"==\", all.GLOBAL_INDIV_ID);\r\n\t\t\t\t// EntityManager().executeQuery(_getIndiv).then((successIndiv) => {\r\n\r\n\t\t\t\t// \t_.each(successIndiv.results, (singleIndiv) => {\r\n\r\n\t\t\t\t// \t\ttmpIndivs.push({\r\n\t\t\t\t// \t\t\tGLOBAL_INDIV_ID: all.GLOBAL_INDIV_ID,\r\n\t\t\t\t// \t\t\tGLOBAL_GRP_ID: all.GLOBAL_GRP_ID,\r\n\t\t\t\t// \t\t\tPERSONNEL_NAME: singleIndiv.LAST_NAME + ', ' + singleIndiv.GIVEN_NAME + ' ' + singleIndiv.MIDDLE_NAME,\r\n\t\t\t\t// \t\t\tGRP_INDIV_ID: all.GRP_INDIV_ID,\r\n\t\t\t\t// \t\t\tSTATUS_CD: all.STATUS_CD\r\n\t\t\t\t// \t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t// \t\tif(success.results.length==tmpIndivs.length)\t\t\t\t\r\n\t\t\t\t// \t\t{\r\n\t\t\t\t// \t\t\tthis.grpMembers=tmpIndivs;\r\n\t\t\t\t// \t\t\tthis._signal = generateID();\r\n\t\t\t\t// \t\t\ttoastr.success(\"Refreshed..\", \"Data Reloaded..\");\r\n\t\t\t\t// \t\t}\r\n\r\n\t\t\t\t// \t});\r\n\t\t\t\t// });\r\n\t\t\r\n\t\t\t});\r\n\r\n\t\t\t\r\n\t\t});\r\n\r\n\t}\r\n\t//passed grp indiv mstr\r\n\t//@handle('pass.group')\r\n\tPassedGroup(value) {\r\n\r\n\r\n\t\t//this._dispatcher.dispatch('close.modal', this.modalIndivMstr.id);\r\n\t}\r\n\r\n\tsaveGroupIndiv() {\r\n\r\n\t\t//get existing entites\r\n\t\tvar getQueryEntities = EntityQuery().from('GRP_INDIV_MSTR').where(\"GLOBAL_GRP_ID\", \"==\", this._GLOBAL_GRP_ID);\r\n\t\tEntityManager().executeQuery(getQueryEntities).then((successEnties)=> {\r\n\r\n\t\t\t//get max grp indiv id\r\n\t\t\tvar getMax = EntityQuery().from('GRP_INDIV_MSTR').orderByDesc('GRP_INDIV_ID').take(1);\r\n\t\t\tEntityManager().executeQuery(getMax).then((successMax) => {\r\n\t\t\t\tvar getMax = 1;\r\n\r\n\t\t\t\tif (successMax.results.length > 0)\r\n\t\t\t\t\tgetMax = successMax.results[0].GRP_INDIV_ID + 1;\r\n\r\n\t\t\t\tthis.grpMembers.forEach((indiv) => {\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (indiv.GRP_INDIV_ID === undefined) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar varInsert = EntityManager().createEntity('GRP_INDIV_MSTR', {\r\n\t\t\t\t\t\t\tGLOBAL_INDIV_ID: indiv.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\t\tGLOBAL_GRP_ID: indiv.GLOBAL_GRP_ID,\r\n\t\t\t\t\t\t\tCREATED_BY: this._user.USER_ID, \r\n\t\t\t\t\t\t\tSTATUS_CD: \"ACTV\",\r\n\t\t\t\t\t\t\tCREATED_DT: new Date(Date.now()),\r\n\t\t\t\t\t\t\tGRP_INDIV_ID: getMax\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t++getMax;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tEntityManager().addEntity(varInsert);\r\n\t\t\t\t\t} \r\n\t\t\t\t\telse \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsuccessEnties.results.forEach((existingIndiv) => {\r\n\t\t\t\t\t\t\tif(existingIndiv.GLOBAL_INDIV_ID==indiv.GLOBAL_INDIV_ID)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif (indiv.STATUS_CD == \"INACTV\" && existingIndiv.STATUS_CD != \"INACTV\") {\r\n\t\t\t\t\t\t\t\t\texistingIndiv.STATUS_CD = \"INACTV\";\r\n\t\t\t\t\t\t\t\t\texistingIndiv.LAST_UPDATED_DT = Date.now();\r\n\t\t\t\t\t\t\t\t\texistingIndiv.LAST_UPDATED_BY = this._user.USER_ID;\r\n\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t} else if (indiv.STATUS_CD != existingIndiv.STATUS_CD) {\r\n\t\t\t\t\t\t\t\t\texistingIndiv.STATUS_CD = indiv.STATUS_CD;\r\n\t\t\t\t\t\t\t\t\texistingIndiv.LAST_UPDATED_DT = Date.now();\r\n\t\t\t\t\t\t\t\t\texistingIndiv.LAST_UPDATED_BY = this._user.USER_ID;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tEntityManager().saveChanges().then((success) => {\r\n\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"Talent Manager Group\");\r\n\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.getGlobalIndivsFromGrpIndiv();\r\n\t\t\t\t\t}, 1000);\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t}, (fail) => {\r\n\t\t\t\t\tconsole.log(fail);\r\n\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t});\r\n\r\n\r\n\t\t});\r\n\r\n\t\t\r\n\t}\r\n\r\n\taddIndividual() {\r\n\t\tthis.grpMembers.push({});\r\n\t}\r\n\r\n\tdeleteItem(item) { //item\r\n\t\tvar isFound = this.grpMembers.find((_item) => {\r\n\t\t\tif (_item.GLOBAL_INDIV_ID == item.GLOBAL_INDIV_ID) {\r\n\t\t\t\titem.STATUS_CD = \"INACTV\";\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis._signal = generateID();\r\n\t}\r\n\r\n\tclear(){\r\n\t\tthis.grpMembers=[];\t\t\r\n\t\tthis._GLOBAL_GRP_ID = \"\";\r\n\t\tthis._GROUP_NAME = \"\";\r\n\r\n\t\tthis.isDisableSave=true;\r\n\t\tthis.disabledfindTalent=true;\r\n\r\n\r\n\t}\r\n}","import {bindable,inject} from 'aurelia-framework';\r\nimport {objBudget} from 'objBudget';\r\nimport {EntityManager,EntityQuery} from './entity-manager-factory';\r\nimport {generateID} from './entity-manager-factory';\r\n//import {handle, Dispatcher} from 'aurelia-flux';  \r\nimport {getLookups} from './masterfiles';\r\nimport {  substringMatcher } from 'helpers';\r\nimport typeahead from 'typeahead';\r\nimport settings from './settings';\r\nimport _ from 'underscore';\r\nimport numeral from 'numeral';\r\nimport toastr from \"toastr\";\r\nimport { MultiObserver }from 'multi-observer';\r\nimport { paymentterm } from 'modals/paymentterm';\r\nimport {DialogService} from 'aurelia-dialog';\r\n\r\n@inject(objBudget,MultiObserver,DialogService)\r\nexport class GuestCustomElement {\r\n\r\n  @bindable to;\r\n  _objBudget = null;\r\n  //_dispatcher;\r\n  _enableAdd=false;\r\n  _enableRemove=false;\r\n  _signal;\r\n  _PYMNTTERM;\r\n  dialogService=null;\r\n  constructor(objBudget, multiObserver, dialogService) {\r\n      if (EntityManager() === undefined) {\r\n          return;\r\n      }\r\n\r\n    this._objBudget = objBudget;\r\n    this.dialogService=dialogService;\r\n    //this._objBudget.OBSERVERS.login_passed.push(() => {\r\n    //  this.LoginPassed();\r\n    //});\r\n    \r\n    this._objBudget.OBSERVERS.budget_dialog.push((val) => {\r\n      this.fnCheckBudget(val);\r\n    });\r\n\r\n    this._objBudget.OBSERVERS.copy_template_guest.push(() => {\r\n      this.fnCallCopy();\r\n    });\r\n\r\n    this._objBudget.OBSERVERS.reset_all.push(() => {\r\n      this.resetView();\r\n    });\r\n\r\n    this._PYMNTTERM = getLookups().PAYMENT_TERM;\r\n\r\n  }\r\n  \r\n\r\n  fnModalPaymentTerm(){\r\n    this.dialogService.open({\r\n      viewModel: paymentterm\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        this.passTerm(response.output);\r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  passTerm(term) {\r\n    this._objBudget.GUEST[0].PAYMENT_TERM=term.REF_DESC\r\n    this._objBudget.GUEST[0].PYMNT_TERM_CD = term.REF_CD;\r\n  }\r\n\r\n  \r\n  //LoginPassed() {\r\n  //  this._PYMNTTERM = getLookups().PAYMENT_TERM;\r\n  //}\r\n\r\n  //@handle('budget.dialog')\r\n  fnCheckBudget(value) {\r\n\r\n    var _query = EntityQuery().from('BDGT_TMPL_GUEST_DTL').where('BDGT_TMPL_ID', '==', value);\r\n    EntityManager().executeQuery(_query).then((found) => {\r\n      \r\n      this._objBudget.GUEST = found.results;\r\n      \r\n      var varRefCd = [];\r\n\r\n      _.each(this._objBudget.GUEST, (item) => {\r\n\r\n        for (var i = 0; i <= this._PYMNTTERM.length - 1; ++i) {\r\n          if (this._PYMNTTERM[i].REF_CD == item.PYMNT_TERM_CD) {\r\n            item.PAYMENT_TERM = this._PYMNTTERM[i].REF_DESC;\r\n            break;\r\n          }\r\n        };\r\n\r\n        \r\n        item.PAY_RATE_FACTOR_TMP=numeral(item.PAY_RATE_FACTOR).format('0,0.00');\r\n        item.INPUT_AMT_TMP=numeral(item.INPUT_AMT).format('0,0.00');\r\n        item.visible=true;\r\n      });\r\n\r\n      this._enableAdd=false;\r\n      this._enableRemove=false;\r\n\r\n      if(this._objBudget.GUEST.length==0)\r\n        this._enableAdd=true;\r\n      else\r\n        this._enableRemove=true;        \r\n\r\n\r\n      // this.fnReloadTypeahead();\r\n\r\n      //this._objBudget.CALLER.ACTION='reset.summary';\r\n\r\n      this._objBudget.OBSERVERS.reset_summary.forEach((all) => {\r\n        all();\r\n      });\r\n\r\n      if(this._objBudget.GUEST.length>0)\r\n        toastr.success(\"GUEST PERSONNEL\", \"Loading Successful.\");\r\n      //this._dispatcher.dispatch('reset.summary');\r\n\r\n    });\r\n\r\n  }\r\n\r\n //@handle('copy.template')\r\n fnCallCopy()\r\n {\r\n   // console.log('passed');\r\n  //if (use==\"GUEST\") {\r\n    this.saveGuest();\r\n  //}\r\n}\r\n\r\n\r\n\r\n  // //CREATE typeahead on focus instead...........!!!!!!!!!!!!\r\n  // fnReloadTypeahead() {\r\n\r\n  //   $('.pymnttrmclass').typeahead('destroy');\r\n\r\n  //   var varCnt = 0;\r\n\r\n  //   _.each($(this.tblData).find(\".pymnttrmclass\"), (all) => {\r\n\r\n  //     $(all).attr(\"tableTermIndex\", varCnt);\r\n  //     ++varCnt;\r\n  //   });\r\n\r\n\r\n  //   $(\"input[tableTermIndex*='\" + 0 + \"']\")\r\n  //     .typeahead({\r\n  //       hint: false,\r\n  //       highlight: true,\r\n  //       minLength: 1,\r\n  //       limit: 10\r\n  //     }, {\r\n  //       source: substringMatcher(this._PYMNTTERM.map((item) => {\r\n  //         return item.REF_DESC\r\n  //       }))\r\n\r\n\r\n  //     });\r\n\r\n  // }\r\n\r\n  fnAddGuest(){\r\n    if(this._objBudget.GUEST.length>0)\r\n    {\r\n      this._objBudget.GUEST[0].visible=true;  \r\n    }\r\n    else\r\n      this._objBudget.GUEST.push({INPUT_AMT_TMP:numeral(0).format('0,0.00'),PAY_RATE_FACTOR_TMP:numeral(1).format('0,0.00'),\r\n        INPUT_AMT:0,PAY_RATE_FACTOR:1,visible:true});\r\n\r\n      //delayed bec breeze is still processing\r\n      // setTimeout(()=>{\r\n      //   this.fnReloadTypeahead();\r\n      // },200);\r\n      \r\n\r\n      this._enableAdd=false;\r\n      this._enableRemove=true;\r\n      this._signal = generateID();\r\n    }\r\n\r\n    \r\n  //@handle('reset.all')\r\n  resetView() {\r\n    this._signal = generateID();\r\n  }\r\n  \r\n  fnRemoveGuest() {\r\n    if (this._objBudget.GUEST.length > 0) {\r\n      this._objBudget.GUEST[0].visible = false;\r\n    }\r\n\r\n    this._enableAdd = true;\r\n    this._enableRemove = false;\r\n    this._signal = generateID();\r\n  }\r\n\r\n  saveGuest(){\r\n\r\n\r\n    if (this._objBudget.GUEST.length > 0) {\r\n      if (this._objBudget.GUEST[0].PYMNT_TERM_CD == \"\" || this._objBudget.GUEST[0] == undefined || this._objBudget.GUEST[0] == null) {\r\n        toastr.error(\"<strong>Payment Term not defined</strong><br /><br />Saving cancelled.\", \"Problem occured\");\r\n        return;\r\n      }\r\n    }\r\n\r\n\r\n    var getMax = EntityQuery().from('BDGT_TMPL_GUEST_DTL').orderByDesc('BDGT_TMPL_GUEST_DTL_ID').take(1);\r\n    EntityManager().executeQuery(getMax).then((successMax) => {\r\n      var getMax = 1;\r\n\r\n      if (successMax.results.length > 0)\r\n        getMax = successMax.results[0].BDGT_TMPL_GUEST_DTL_ID + 1;\r\n\r\n\r\n      //console.log(this._objBudget.HEADER.BDGT_TMPL_ID);\r\n      var _query = EntityQuery().from('BDGT_TMPL_GUEST_DTL').where('BDGT_TMPL_ID', '==', this._objBudget.HEADER.BDGT_TMPL_ID);\r\n      EntityManager().executeQuery(_query).then((found) => {\r\n\r\n        \r\n        if(this._objBudget.GUEST.length>0)\r\n          if (this._objBudget.GUEST[0].visible) {\r\n\r\n            if (found.results.length > 0) {\r\n\r\n              found.results[0].BDGT_AMT = parseFloat(this._objBudget.GUEST[0].INPUT_AMT_TMP.replace(/,/g,''));\r\n              found.results[0].PYMNT_TERM_CD = this._objBudget.GUEST[0].PYMNT_TERM_CD;\r\n              found.results[0].INPUT_AMT = parseFloat(this._objBudget.GUEST[0].INPUT_AMT_TMP.replace(/,/g,''));\r\n              found.results[0].PAY_RATE_FACTOR = parseFloat(this._objBudget.GUEST[0].PAY_RATE_FACTOR_TMP.replace(/,/g,''));\r\n              found.results[0].REMARKS = this._objBudget.GUEST[0].REMARKS;\r\n\r\n              found.results[0].LAST_UPDATED_BY = this._objBudget.USER.USER_ID;\r\n              found.results[0].LAST_UPDATED_DT =  new Date();\r\n\r\n              \r\n            } else {\r\n\r\n              var varInsert = EntityManager().createEntity('BDGT_TMPL_GUEST_DTL', {\r\n                BDGT_TMPL_GUEST_DTL_ID: getMax,\r\n                PYMNT_TERM_CD: this._objBudget.GUEST[0].PYMNT_TERM_CD,\r\n                INPUT_AMT: parseFloat(this._objBudget.GUEST[0].INPUT_AMT_TMP.replace(/,/g,'')),\r\n                BDGT_AMT: parseFloat(this._objBudget.GUEST[0].INPUT_AMT_TMP.replace(/,/g,'')),\r\n                PAY_RATE_FACTOR: parseFloat(this._objBudget.GUEST[0].PAY_RATE_FACTOR_TMP.replace(/,/g,'')),\r\n                REMARKS: this._objBudget.GUEST[0].REMARKS,\r\n                BDGT_TMPL_ID: this._objBudget.HEADER.BDGT_TMPL_ID,\r\n                CREATED_BY: this._objBudget.USER.USER_ID,\r\n                CREATED_DT: new Date()\r\n              });\r\n              \r\n              EntityManager().addEntity(varInsert);\r\n\r\n            }\r\n          }\r\n          else\r\n          {\r\n            if (found.results.length > 0)\r\n              found.results[0].entityAspect.setDeleted();\r\n          }\r\n\r\n\r\n          EntityManager().saveChanges().then((success) => {\r\n            this.fnCheckBudget(this._objBudget.HEADER.BDGT_TMPL_ID);\r\n            toastr.success(\"Succesfully Saved\", \"GUEST\");\r\n\r\n          }, (fail) => {\r\n\r\n            EntityManager().getEntities().forEach(function(entity) {\r\n              var errors = entity.entityAspect.getValidationErrors();\r\n              if (errors.length > 0)\r\n                console.log(errors);\r\n            });\r\n            console.log(fail);\r\n            toastr.error(\"Error Occured\",\r\n              fail);\r\n          });\r\n\r\n        });\r\n\r\n\r\n    });\r\n\r\n  }\r\n\r\n  fnRegularBlurEvt(item, index) {\r\n\r\n    // if($(\"input[tableTermIndex*='\" + index + \"']\").val()===undefined) return;\r\n\r\n\r\n    // this._objBudget.GUEST[index].PAYMENT_TERM = $(\"input[tableTermIndex*='\" + index + \"']\").val().toUpperCase();\r\n\r\n    //   var varFound = this._PYMNTTERM.find((all) => {\r\n    //     return this._objBudget.GUEST[index].PAYMENT_TERM.trim() == all.REF_DESC.trim();\r\n    //   });\r\n\r\n    //   if (varFound !== undefined) {\r\n    //     this._objBudget.GUEST[index].PYMNT_TERM_CD = varFound.REF_CD;\r\n    //   } else\r\n    //     this._objBudget.GUEST[index].PYMNT_TERM_CD = \"\";\r\n\r\n  }\r\n\r\n  fnRegularFocus(index, prop) {\r\n\r\n    this.fnModalPaymentTerm();\r\n    \r\n  }\r\n\r\n\r\n  // fnRegularFocus(index) {\r\n\r\n  //   // if ($(\"input[tableTermIndex*='\" + index + \"']\").attr(\"hasTypeahead\") !== undefined) {\r\n  //   //   return;\r\n  //   // }\r\n\r\n  //   // $(\"input[tableTermIndex*='\" + index + \"']\").attr(\"hasTypeahead\", \"true\");\r\n\r\n  //   $(\"input[tableTermIndex*='\" + index + \"']\").focus();\r\n\r\n  // }\r\n\r\n  AmountBlur(item, property) {\r\n    var varConverted = numeral(item[property]).format('0,0.00');\r\n    item[property] = varConverted;\r\n  }\r\n\r\n}","export function substringMatcher (strs) {\r\n\t\r\n  return function findMatches(q, cb) {\r\n    var matches;\r\n\r\n    // an array that will be populated with substring matches\r\n    matches = [];\r\n\r\n    // regex used to determine if a string contains the substring `q`\r\n    var substrRegex = new RegExp(q, 'i');\r\n\r\n    // iterate through the pool of strings and for any string that\r\n    // contains the substring `q`, add it to the `matches` array\r\n    $.each(strs, function(i, str) {\r\n      if (substrRegex.test(str)) {\r\n        matches.push(str);\r\n      }\r\n    });\r\n\r\n    cb(matches);\r\n  };\r\n}\r\n\r\n\r\nexport function getFilter(varFilterArray, propertyName: object, propertyText: string)\r\n{\r\n    if (varFilterArray === undefined || varFilterArray === null || propertyName === undefined || propertyName === null || propertyName === '') {\r\n        return varFilterArray;\r\n    }\r\n    \r\n    return varFilterArray.filter(x => \r\n      (x[propertyText]===undefined?\"\":x[propertyText].toString()).indexOf(\r\n      (propertyName===undefined?\"\":propertyName).toUpperCase()) !== -1\r\n\r\n      )\r\n}\r\n\r\nexport function checkCookie(value) {\r\n  var user = getCookie(value);\r\n  if (user != \"\") {\r\n    //alert(\"Welcome again \" + user);\r\n    return user;\r\n  } else {\r\n    return \"\";\r\n    // user = prompt(\"Please enter your name:\", \"\");\r\n    // if (user != \"\" && user != null) {\r\n    //   setCookie(\"username\", user, 30);\r\n    // }\r\n  }\r\n}\r\n\r\nexport function setCookie(cname, cvalue, mins) {\r\n  var d = new Date();\r\n  //d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n  d.setTime(d.getTime() +  (60 * 60 * mins * 200));\r\n  var expires = \"expires=\" + d.toUTCString();\r\n  document.cookie = cname + \"=\" + cvalue + \"; \" + expires;\r\n}\r\n\r\nexport function removeCookie() {\r\n\r\n  //document.cookie = undefined;\r\n\r\n  var  expireAt = new Date;\r\n  expireAt.setMonth(expireAt.getMonth() - 1);\r\n\r\n  if (document.cookie != \"\") {\r\n    var crumbs = document.cookie.split(\";\");\r\n    for (var i = 0; i < crumbs.length; i++) {\r\n      var crumbName = crumbs[i].split(\"=\")[0];\r\n      document.cookie = crumbName + \"=;expires=\" + expireAt.toGMTString();\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\nexport function getCookie(cname) {\r\n   var name = cname + \"=\";\r\n   var ca = document.cookie.split(';');\r\n   for (var i = 0; i < ca.length; i++) {\r\n     var c = ca[i];\r\n     while (c.charAt(0) == ' ') c = c.substring(1);\r\n     if (c.indexOf(name) == 0) return c.substring(name.length, c.length);\r\n   }\r\n   return \"\";\r\n }\r\n\r\n\r\n\r\n//you paste this script instead to execute inside <script src=\"../bootstrap-datepicker.js\"></script>.\r\n//because jquery is not being loaded quickly before <script src=\"../bootstrap-datepicker.js\"></script> on the index file. \r\n//so error occurs bec. jquery must be initialized first\r\n//bootstrap-datepicker.js copy\r\n!function( $ ) {\r\n  \r\n  // Picker object\r\n  \r\n  var Datepicker = function(element, options){\r\n    this.element = $(element);\r\n    this.format = DPGlobal.parseFormat(options.format||this.element.data('date-format')||'mm/dd/yyyy');\r\n    this.picker = $(DPGlobal.template)\r\n              .appendTo('body')\r\n              .on({\r\n                click: $.proxy(this.click, this)//,\r\n                //mousedown: $.proxy(this.mousedown, this)\r\n              });\r\n    this.isInput = this.element.is('input');\r\n    this.component = this.element.is('.date') ? this.element.find('.add-on') : false;\r\n    \r\n    if (this.isInput) {\r\n      this.element.on({\r\n        focus: $.proxy(this.show, this),\r\n        //blur: $.proxy(this.hide, this),\r\n        keyup: $.proxy(this.update, this)\r\n      });\r\n    } else {\r\n      if (this.component){\r\n        this.component.on('click', $.proxy(this.show, this));\r\n      } else {\r\n        this.element.on('click', $.proxy(this.show, this));\r\n      }\r\n    }\r\n  \r\n    this.minViewMode = options.minViewMode||this.element.data('date-minviewmode')||0;\r\n    if (typeof this.minViewMode === 'string') {\r\n      switch (this.minViewMode) {\r\n        case 'months':\r\n          this.minViewMode = 1;\r\n          break;\r\n        case 'years':\r\n          this.minViewMode = 2;\r\n          break;\r\n        default:\r\n          this.minViewMode = 0;\r\n          break;\r\n      }\r\n    }\r\n    this.viewMode = options.viewMode||this.element.data('date-viewmode')||0;\r\n    if (typeof this.viewMode === 'string') {\r\n      switch (this.viewMode) {\r\n        case 'months':\r\n          this.viewMode = 1;\r\n          break;\r\n        case 'years':\r\n          this.viewMode = 2;\r\n          break;\r\n        default:\r\n          this.viewMode = 0;\r\n          break;\r\n      }\r\n    }\r\n    this.startViewMode = this.viewMode;\r\n    this.weekStart = options.weekStart||this.element.data('date-weekstart')||0;\r\n    this.weekEnd = this.weekStart === 0 ? 6 : this.weekStart - 1;\r\n    this.onRender = options.onRender;\r\n    this.fillDow();\r\n    this.fillMonths();\r\n    this.update();\r\n    this.showMode();\r\n  };\r\n  \r\n  Datepicker.prototype = {\r\n    constructor: Datepicker,\r\n    \r\n    show: function(e) {\r\n      this.picker.show();\r\n      this.height = this.component ? this.component.outerHeight() : this.element.outerHeight();\r\n      this.place();\r\n      $(window).on('resize', $.proxy(this.place, this));\r\n      if (e ) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n      }\r\n      if (!this.isInput) {\r\n      }\r\n      var that = this;\r\n      $(document).on('mousedown', function(ev){\r\n        if ($(ev.target).closest('.datepicker').length == 0) {\r\n          that.hide();\r\n        }\r\n      });\r\n      this.element.trigger({\r\n        type: 'show',\r\n        date: this.date\r\n      });\r\n    },\r\n    \r\n    hide: function(){\r\n      this.picker.hide();\r\n      $(window).off('resize', this.place);\r\n      this.viewMode = this.startViewMode;\r\n      this.showMode();\r\n      if (!this.isInput) {\r\n        $(document).off('mousedown', this.hide);\r\n      }\r\n      //this.set();\r\n      this.element.trigger({\r\n        type: 'hide',\r\n        date: this.date\r\n      });\r\n    },\r\n    \r\n    set: function() {\r\n      var formated = DPGlobal.formatDate(this.date, this.format);\r\n      if (!this.isInput) {\r\n        if (this.component){\r\n          this.element.find('input').prop('value', formated);\r\n        }\r\n        this.element.data('date', formated);\r\n      } else {\r\n        this.element.prop('value', formated);\r\n      }\r\n    },\r\n    \r\n    setValue: function(newDate) {\r\n      if (typeof newDate === 'string') {\r\n        this.date = DPGlobal.parseDate(newDate, this.format);\r\n      } else {\r\n        this.date = new Date(newDate);\r\n      }\r\n      this.set();\r\n      this.viewDate = new Date(this.date.getFullYear(), this.date.getMonth(), 1, 0, 0, 0, 0);\r\n      this.fill();\r\n    },\r\n    \r\n    place: function(){\r\n      var offset = this.component ? this.component.offset() : this.element.offset();\r\n      this.picker.css({\r\n        top: offset.top + this.height,\r\n        left: offset.left\r\n      });\r\n    },\r\n    \r\n    update: function(newDate){\r\n      this.date = DPGlobal.parseDate(\r\n        typeof newDate === 'string' ? newDate : (this.isInput ? this.element.prop('value') : this.element.data('date')),\r\n        this.format\r\n      );\r\n      this.viewDate = new Date(this.date.getFullYear(), this.date.getMonth(), 1, 0, 0, 0, 0);\r\n      this.fill();\r\n    },\r\n    \r\n    fillDow: function(){\r\n      var dowCnt = this.weekStart;\r\n      var html = '<tr>';\r\n      while (dowCnt < this.weekStart + 7) {\r\n        html += '<th class=\"dow\">'+DPGlobal.dates.daysMin[(dowCnt++)%7]+'</th>';\r\n      }\r\n      html += '</tr>';\r\n      this.picker.find('.datepicker-days thead').append(html);\r\n    },\r\n    \r\n    fillMonths: function(){\r\n      var html = '';\r\n      var i = 0\r\n      while (i < 12) {\r\n        html += '<span class=\"month\">'+DPGlobal.dates.monthsShort[i++]+'</span>';\r\n      }\r\n      this.picker.find('.datepicker-months td').append(html);\r\n    },\r\n    \r\n    fill: function() {\r\n      var d = new Date(this.viewDate),\r\n        year = d.getFullYear(),\r\n        month = d.getMonth(),\r\n        currentDate = this.date.valueOf();\r\n      this.picker.find('.datepicker-days th:eq(1)')\r\n            .text(DPGlobal.dates.months[month]+' '+year);\r\n      var prevMonth = new Date(year, month-1, 28,0,0,0,0),\r\n        day = DPGlobal.getDaysInMonth(prevMonth.getFullYear(), prevMonth.getMonth());\r\n      prevMonth.setDate(day);\r\n      prevMonth.setDate(day - (prevMonth.getDay() - this.weekStart + 7)%7);\r\n      var nextMonth = new Date(prevMonth);\r\n      nextMonth.setDate(nextMonth.getDate() + 42);\r\n      nextMonth = nextMonth.valueOf();\r\n      var html = [];\r\n      var clsName,\r\n        prevY,\r\n        prevM;\r\n      while(prevMonth.valueOf() < nextMonth) {\r\n        if (prevMonth.getDay() === this.weekStart) {\r\n          html.push('<tr>');\r\n        }\r\n        clsName = this.onRender(prevMonth);\r\n        prevY = prevMonth.getFullYear();\r\n        prevM = prevMonth.getMonth();\r\n        if ((prevM < month &&  prevY === year) ||  prevY < year) {\r\n          clsName += ' old';\r\n        } else if ((prevM > month && prevY === year) || prevY > year) {\r\n          clsName += ' new';\r\n        }\r\n        if (prevMonth.valueOf() === currentDate) {\r\n          clsName += ' active';\r\n        }\r\n        html.push('<td class=\"day '+clsName+'\">'+prevMonth.getDate() + '</td>');\r\n        if (prevMonth.getDay() === this.weekEnd) {\r\n          html.push('</tr>');\r\n        }\r\n        prevMonth.setDate(prevMonth.getDate()+1);\r\n      }\r\n      this.picker.find('.datepicker-days tbody').empty().append(html.join(''));\r\n      var currentYear = this.date.getFullYear();\r\n      \r\n      var months = this.picker.find('.datepicker-months')\r\n            .find('th:eq(1)')\r\n              .text(year)\r\n              .end()\r\n            .find('span').removeClass('active');\r\n      if (currentYear === year) {\r\n        months.eq(this.date.getMonth()).addClass('active');\r\n      }\r\n      \r\n      html = '';\r\n      year = parseInt(year/10, 10) * 10;\r\n      var yearCont = this.picker.find('.datepicker-years')\r\n                .find('th:eq(1)')\r\n                  .text(year + '-' + (year + 9))\r\n                  .end()\r\n                .find('td');\r\n      year -= 1;\r\n      for (var i = -1; i < 11; i++) {\r\n        html += '<span class=\"year'+(i === -1 || i === 10 ? ' old' : '')+(currentYear === year ? ' active' : '')+'\">'+year+'</span>';\r\n        year += 1;\r\n      }\r\n      yearCont.html(html);\r\n    },\r\n    \r\n    click: function(e) {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n      var target = $(e.target).closest('span, td, th');\r\n      if (target.length === 1) {\r\n        switch(target[0].nodeName.toLowerCase()) {\r\n          case 'th':\r\n            switch(target[0].className) {\r\n              case 'switch':\r\n                this.showMode(1);\r\n                break;\r\n              case 'prev':\r\n              case 'next':\r\n                this.viewDate['set'+DPGlobal.modes[this.viewMode].navFnc].call(\r\n                  this.viewDate,\r\n                  this.viewDate['get'+DPGlobal.modes[this.viewMode].navFnc].call(this.viewDate) + \r\n                  DPGlobal.modes[this.viewMode].navStep * (target[0].className === 'prev' ? -1 : 1)\r\n                );\r\n                this.fill();\r\n                this.set();\r\n                break;\r\n            }\r\n            break;\r\n          case 'span':\r\n            if (target.is('.month')) {\r\n              var month = target.parent().find('span').index(target);\r\n              this.viewDate.setMonth(month);\r\n            } else {\r\n              var year = parseInt(target.text(), 10)||0;\r\n              this.viewDate.setFullYear(year);\r\n            }\r\n            if (this.viewMode !== 0) {\r\n              this.date = new Date(this.viewDate);\r\n              this.element.trigger({\r\n                type: 'changeDate',\r\n                date: this.date,\r\n                viewMode: DPGlobal.modes[this.viewMode].clsName\r\n              });\r\n            }\r\n            this.showMode(-1);\r\n            this.fill();\r\n            this.set();\r\n            break;\r\n          case 'td':\r\n            if (target.is('.day') && !target.is('.disabled')){\r\n              var day = parseInt(target.text(), 10)||1;\r\n              var month = this.viewDate.getMonth();\r\n              if (target.is('.old')) {\r\n                month -= 1;\r\n              } else if (target.is('.new')) {\r\n                month += 1;\r\n              }\r\n              var year = this.viewDate.getFullYear();\r\n              this.date = new Date(year, month, day,0,0,0,0);\r\n              this.viewDate = new Date(year, month, Math.min(28, day),0,0,0,0);\r\n              this.fill();\r\n              this.set();\r\n              this.element.trigger({\r\n                type: 'changeDate',\r\n                date: this.date,\r\n                viewMode: DPGlobal.modes[this.viewMode].clsName\r\n              });\r\n            }\r\n            break;\r\n        }\r\n      }\r\n    },\r\n    \r\n    mousedown: function(e){\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    },\r\n    \r\n    showMode: function(dir) {\r\n      if (dir) {\r\n        this.viewMode = Math.max(this.minViewMode, Math.min(2, this.viewMode + dir));\r\n      }\r\n      this.picker.find('>div').hide().filter('.datepicker-'+DPGlobal.modes[this.viewMode].clsName).show();\r\n    }\r\n  };\r\n  \r\n  $.fn.datepicker = function ( option, val ) {\r\n    return this.each(function () {\r\n      var $this = $(this),\r\n        data = $this.data('datepicker'),\r\n        options = typeof option === 'object' && option;\r\n      if (!data) {\r\n        $this.data('datepicker', (data = new Datepicker(this, $.extend({}, $.fn.datepicker.defaults,options))));\r\n      }\r\n      if (typeof option === 'string') data[option](val);\r\n    });\r\n  };\r\n\r\n  $.fn.datepicker.defaults = {\r\n    onRender: function(date) {\r\n      return '';\r\n    }\r\n  };\r\n  $.fn.datepicker.Constructor = Datepicker;\r\n  \r\n  var DPGlobal = {\r\n    modes: [\r\n      {\r\n        clsName: 'days',\r\n        navFnc: 'Month',\r\n        navStep: 1\r\n      },\r\n      {\r\n        clsName: 'months',\r\n        navFnc: 'FullYear',\r\n        navStep: 1\r\n      },\r\n      {\r\n        clsName: 'years',\r\n        navFnc: 'FullYear',\r\n        navStep: 10\r\n    }],\r\n    dates:{\r\n      days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"],\r\n      daysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\r\n      daysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"],\r\n      months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n      monthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\r\n    },\r\n    isLeapYear: function (year) {\r\n      return (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0))\r\n    },\r\n    getDaysInMonth: function (year, month) {\r\n      return [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month]\r\n    },\r\n    parseFormat: function(format){\r\n      var separator = format.match(/[.\\/\\-\\s].*?/),\r\n        parts = format.split(/\\W+/);\r\n      if (!separator || !parts || parts.length === 0){\r\n        throw new Error(\"Invalid date format.\");\r\n      }\r\n      return {separator: separator, parts: parts};\r\n    },\r\n    parseDate: function(date, format) {\r\n      var parts = date.split(format.separator),\r\n        date = new Date(),\r\n        val;\r\n      date.setHours(0);\r\n      date.setMinutes(0);\r\n      date.setSeconds(0);\r\n      date.setMilliseconds(0);\r\n      if (parts.length === format.parts.length) {\r\n        var year = date.getFullYear(), day = date.getDate(), month = date.getMonth();\r\n        for (var i=0, cnt = format.parts.length; i < cnt; i++) {\r\n          val = parseInt(parts[i], 10)||1;\r\n          switch(format.parts[i]) {\r\n            case 'dd':\r\n            case 'd':\r\n              day = val;\r\n              date.setDate(val);\r\n              break;\r\n            case 'mm':\r\n            case 'm':\r\n              month = val - 1;\r\n              date.setMonth(val - 1);\r\n              break;\r\n            case 'yy':\r\n              year = 2000 + val;\r\n              date.setFullYear(2000 + val);\r\n              break;\r\n            case 'yyyy':\r\n              year = val;\r\n              date.setFullYear(val);\r\n              break;\r\n          }\r\n        }\r\n        date = new Date(year, month, day, 0 ,0 ,0);\r\n      }\r\n      return date;\r\n    },\r\n    formatDate: function(date, format){\r\n      var val = {\r\n        d: date.getDate(),\r\n        m: date.getMonth() + 1,\r\n        yy: date.getFullYear().toString().substring(2),\r\n        yyyy: date.getFullYear()\r\n      };\r\n      val.dd = (val.d < 10 ? '0' : '') + val.d;\r\n      val.mm = (val.m < 10 ? '0' : '') + val.m;\r\n      var date = [];\r\n      for (var i=0, cnt = format.parts.length; i < cnt; i++) {\r\n        date.push(val[format.parts[i]]);\r\n      }\r\n      return date.join(format.separator);\r\n    },\r\n    headTemplate: '<thead>'+\r\n              '<tr>'+\r\n                '<th class=\"prev\">&lsaquo;</th>'+\r\n                '<th colspan=\"5\" class=\"switch\"></th>'+\r\n                '<th class=\"next\">&rsaquo;</th>'+\r\n              '</tr>'+\r\n            '</thead>',\r\n    contTemplate: '<tbody><tr><td colspan=\"7\"></td></tr></tbody>'\r\n  };\r\n  DPGlobal.template = '<div class=\"datepicker dropdown-menu\">'+\r\n              '<div class=\"datepicker-days\">'+\r\n                '<table class=\" table-condensed\">'+\r\n                  DPGlobal.headTemplate+\r\n                  '<tbody></tbody>'+\r\n                '</table>'+\r\n              '</div>'+\r\n              '<div class=\"datepicker-months\">'+\r\n                '<table class=\"table-condensed\">'+\r\n                  DPGlobal.headTemplate+\r\n                  DPGlobal.contTemplate+\r\n                '</table>'+\r\n              '</div>'+\r\n              '<div class=\"datepicker-years\">'+\r\n                '<table class=\"table-condensed\">'+\r\n                  DPGlobal.headTemplate+\r\n                  DPGlobal.contTemplate+\r\n                '</table>'+\r\n              '</div>'+\r\n            '</div>';\r\n\r\n}( window.jQuery );","\r\nimport {bindable,inject} from 'aurelia-framework';\r\nimport {objBudget} from 'objBudget';\r\nimport {EntityManager,EntityQuery} from './entity-manager-factory';\r\nimport {generateID} from './entity-manager-factory';\r\n//import {handle, Dispatcher} from 'aurelia-flux';  \r\nimport {getLookups} from './masterfiles';\r\nimport settings from './settings';\r\n// import $ from 'jquery';\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport toastr from \"toastr\";\r\nimport moment from 'moment';\r\nimport _ from 'underscore';\r\nimport { MultiObserver }from 'multi-observer';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {program} from 'modals/program';\r\nimport {budget} from 'modals/budget';\r\nimport {confirm_dialog} from 'modals/confirm_dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n//import  datepicker  from 'bootstrap-datepicker';\r\n\r\n/*\r\n  NOTES\r\n  breeze.debug.js function getUriKey(aspect) is updated\r\n  fmtProperty(kps[0], aspect) is replaced by\r\n  fmtProperty(kps[0], aspect).replace(\"M\",\"\") because odata\r\n  is not accepting decimal with 'M' - decimal identity\r\n\r\n  example id 123M is being passed, accepted is 123\r\n  existing primary cannot be replaced to int from decimal bec. ppp is using it.\r\n  if breeze is updated, implement this again\r\n\r\n*/\r\n\r\n\r\n@inject(objBudget,ModalWizard,toastr,MultiObserver,DialogService)\r\nexport class MainHeaderCustomElement {\r\n  \r\n  @bindable to;\r\n  _objBudget = null;\r\n  _user;\r\n  //_dispatcher;\r\n  _PROGRAM_GENRE_MSTR=[];\r\n  _TELECAST_MODE_MSTR=[];\r\n  _EPISODE_TYPE_MSTR=[];\r\n  _STATIONS=[];\r\n  _STATUS;//=[\"DRAFT\",\"APPROVED\",\"CLOSED\",\"EXPIRED\"];\r\n  //@bindable modalBudget;\r\n  _COMPANY_ID;\r\n  _ModalWizard;\r\n  \r\n\r\n  _disableCreateBudget = false;\r\n  _disableCancelBudget=true;\r\n  _disableRefreshBudget=true;\r\n  _disableSaveBudget=true;\r\n  _disableBudgetId=false;\r\n  _disablePrintBudget=true;\r\n  _disableCopyBudget=true;\r\n  dialogService=null;\r\n  programDisabled=true;\r\n  budgetDisabled=false;\r\n\r\n  \r\n\r\n  constructor(objBudget,ModalWizard,toastr,multiObserver,DialogService) {\r\n      if (EntityManager() === undefined) {\r\n         \r\n          return;\r\n      }\r\n\r\n    this.dialogService=DialogService;\r\n    this._objBudget=objBudget;\r\n\r\n\r\n    this.LoginPassed(this._objBudget.USER);\r\n    //this._objBudget.OBSERVERS.login_passed.push((val) => {\r\n    //  this.LoginPassed(val);\r\n    //});\r\n\r\n    //this._objBudget.OBSERVERS.loggedout.push(() => {\r\n    //  this.LoggedOut();\r\n    //});\r\n\r\n    this._objBudget.OBSERVERS.budget_dialog.push((val) => {\r\n      this.CloseBudgetDialog(val);\r\n    });\r\n\r\n    this._objBudget.OBSERVERS.pass_program.push((val) => {\r\n      this.PassedProgram(val);\r\n    });\r\n\r\n    this._objBudget.OBSERVERS.budget_refresh.push(() => {\r\n      this.fnBudgetRefreshHandle();\r\n    });\r\n\r\n    this._objBudget.OBSERVERS.budget_loaded.push(() => {\r\n       if(this._disableSaveBudget==true)\r\n       {\r\n          this._disableSaveBudget = false;\r\n          settings.isNavigating = false;\r\n          toastr.success(\"Budget has been successfully loaded.\", \"Budget Template\");\r\n       }\r\n    });\r\n\r\n    this._toastr = toastr;\r\n    \r\n    \r\n   // this._dispatcher=Dispatcher;\r\n    this.fnClearHeader();\r\n\r\n\r\n    this._disableCreateBudget = false;\r\n    this._disableCancelBudget=true;\r\n    this._disableRefreshBudget=true;\r\n    this._disableSaveBudget=true;\r\n    this._disableBudgetId=false;\r\n    this._disablePrintBudget=true;\r\n    this._disableCopyBudget=true;\r\n    this._ModalWizard = ModalWizard;\r\n\r\n    \r\n    //this.fnExecuteDatePicker();\r\n    setTimeout(() => {\r\n      \r\n       $('.datepicker').datepicker();\r\n     // this._objBudget.TESTT('hahaa');        \r\n      $('#refFrom').datepicker({\r\n          format: \"mm/dd/yyyy\"\r\n        })\r\n        .on(\"changeDate\", () => {\r\n\r\n          if (new Date($('#refFrom').val()) > new Date($('#refTo').val())) {\r\n            toastr.error(\"Invalid date range.\", \"Date Change..\");\r\n            $('#refTo').datepicker(\"setValue\", new Date($('#refFrom').val()));\r\n            return;\r\n          }\r\n\r\n          this._objBudget.HEADER.BDGT_FROM = $('#refFrom').val();\r\n          if(this._objBudget.HEADER.BDGT_TO==\"\")\r\n          {\r\n              this._objBudget.HEADER.BDGT_TO=this._objBudget.HEADER.BDGT_FROM;\r\n          }\r\n\r\n          $('#refFrom').datepicker('hide');\r\n        });\r\n\r\n\r\n      $('#refTo').datepicker({\r\n          format: \"mm/dd/yyyy\"\r\n        })\r\n        .on(\"changeDate\", () => {\r\n\r\n          if (new Date($('#refTo').val()) < new Date($('#refFrom').val())) {\r\n            toastr.error(\"Invalid date range.\", \"Date Change..\");\r\n            $('#refFrom').datepicker(\"setValue\", new Date($('#refTo').val()));\r\n            return;\r\n          }\r\n\r\n          this._objBudget.HEADER.BDGT_TO = $('#refTo').val();\r\n          $('#refTo').datepicker('hide');\r\n        });\r\n    }, 1000);\r\n    \r\n\r\n    //UPDATE EXPIRED BUDGET    \r\n    var varToday = new Date(Date.now());\r\n    var p1 = breeze.Predicate.create('BDGT_TO', '<=', new Date(varToday.getFullYear(), varToday.getMonth(), varToday.getDate()));\r\n    var p2 = breeze.Predicate.create('APPR_STAT_CD', '==', \"APP-APPROVED\");\r\n    var pred = breeze.Predicate.and([p1, p2]);\r\n\r\n\r\n    var checkExpired = EntityQuery().from('BDGT_TMPL_HDR').where(pred);\r\n    \r\n    \r\n    EntityManager().executeQuery(checkExpired).then((success) => {\r\n      success.results.forEach((all) => {\r\n        //console.log(all);\r\n        all.APPR_STAT_CD=\"APP-EXPIRED\";\r\n        all.LAST_UPDATED_BY=\"ADMIN\";\r\n        all.LAST_UPDATED_DT= new Date(Date.now());\r\n      });\r\n\r\n      EntityManager().saveChanges().then((success) => {\r\n      //  console.log(success);\r\n      }, (fail) => {\r\n        console.log(fail);\r\n      });\r\n    });\r\n\r\n  }\r\n\r\n  /////cannot use this bec first value is undefined before correct data will be placed by datepicker\r\n  checkDate(id){\r\n\r\n     setTimeout(() => {\r\n     // console.log($(\"#\"+id).val());\r\n     // console.log(Date.parse($(\"#\"+id).val()));\r\n      if(!Date.parse($(\"#\"+id).val()))\r\n      {\r\n        toastr.error(\"Invalid starting date \", \"Date Change..\");  \r\n      }\r\n      else\r\n      {\r\n        $(\"#\"+id).datepicker(\"setValue\", new Date($(\"#\"+id).val()));\r\n      }\r\n\r\n     },1000);\r\n    \r\n    // if(!moment($('#refFrom').val(),'MM-DD-YYYY',true).isValid()){\r\n    //     item\r\n    // }\r\n    // console.log(moment($('#refFrom').val(),'MM-DD-YYYY')._i);\r\n    //   this._objBudget.HEADER.BDGT_FROM=moment($('#refFrom').val(),'MM-DD-YYYY');\r\n  }\r\n\r\n\r\n  validate() {\r\n\r\n    // var _query = EntityQuery().from('BDGT_TMPL_HDR').where('BDGT_TMPL_ID', '==', '0');\r\n    // this._objBudget = EntityManager().executeQueryLocally(_query)[0]; //if has offline;\r\n    // //console.log(EntityManager().executeQueryLocally(_query));\r\n    // EntityManager().executeQuery(_query).then((found) => {\r\n    \r\n    // });\r\n  }\r\n\r\n\r\n  inputChanged(evt, value) {\r\n    if (evt.keyCode == 13) {\r\n\r\n    // this._objBudget.CALLER.VALUE1=this._objBudget.HEADER.BDGT_TMPL_ID; \r\n    // this._objBudget.CALLER.ACTION='budget.dialog';\r\n\r\n    settings.isNavigating = true;\r\n    this._objBudget.OBSERVERS.budget_dialog.forEach((all)=>{\r\n      all(this._objBudget.HEADER.BDGT_TMPL_ID);\r\n    });\r\n\r\n      // this._dispatcher.dispatch('budget.dialog', this._objBudget.HEADER.BDGT_TMPL_ID);\r\n    }\r\n  }\r\n\r\n  speak() {\r\n    console.log(this._objBudget);\r\n    //alert(`Hello ${this.to}!`);\r\n  }\r\n\r\n  speak1() {\r\n    alert(`Hello ${this.to}!`);\r\n\r\n  }\r\n\r\n  //@handle('login.passed')\r\n  LoginPassed(user) {\r\n      \r\n    this._user = user.USER_ID;\r\n    this._COMPANY_ID = user.COMPANY_ID;\r\n\r\n   \r\n\r\n    this.budgetDisabled=false;\r\n\r\n    // this._objBudget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n    //   all(this.modalBudget.id, true);\r\n    // });\r\n    \r\n    this.programDisabled=true;\r\n    // this._objBudget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n    //   all(this.modalProgram.id, false);\r\n    // });\r\n\r\n   \r\n    this.fnClearBudget();\r\n\r\n    this._disableCreateBudget=false;\r\n    this._disableCancelBudget=true;\r\n    this._disableRefreshBudget=true;\r\n    this._disableSaveBudget=true;\r\n    this._disablePrintBudget=true;\r\n    this._disableCopyBudget=true;\r\n  }\r\n\r\n  //@handle('loggedout')\r\n  LoggedOut()\r\n  {\r\n      alert(44);\r\n    this._disableCreateBudget = true;\r\n    this._disableCancelBudget = true;\r\n    this._disableRefreshBudget = true;\r\n    this._disableSaveBudget = true;\r\n    this._disablePrintBudget = true;\r\n    this._disableCopyBudget=true;\r\n\r\n    this.budgetDisabled=false;\r\n    // this._objBudget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n    //   all(this.modalBudget.id, false);\r\n    // });\r\n\r\n    this.programDisabled=true;\r\n    // this._objBudget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n    //   all(this.modalProgram.id, false);\r\n    // });\r\n\r\n    //this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n    //this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, false);\r\n\r\n    this.fnClearHeader();\r\n  }\r\n\r\n  fnClearHeader(){\r\n     //var PROGRAM_MSTR={PROGRAM_TITLE:\"\"}  ;\r\n     this._objBudget.HEADER = {\r\n      BDGT_TMPL_ID:\"\",\r\n      //PROGRAM_MSTR.PROGRAM_TITLE:\"\",\r\n      CHARGE_CD:\"\",\r\n      PROGRAM_GENRE_CD:\"\",\r\n      TELECAST_MODE_CD:\"\",\r\n      EPISODE_TYPE_CD:\"\",\r\n      EPISODES:\"\",\r\n      TAPING_DAYS:\"\",\r\n      BDGT_FROM:\"\",\r\n      BDGT_TO:\"\",\r\n      STATION_ID:\"\",\r\n      APPR_STAT_CD:\"\",\r\n      REMARKS:\"\"\r\n   };\r\n\r\n    while (this._objBudget.REGULAR.length > 0) {\r\n      this._objBudget.REGULAR.pop();\r\n    }\r\n    this._objBudget.REGULAR=[];\r\n\r\n    while (this._objBudget.SEMI_REGULAR.length > 0) {\r\n      this._objBudget.SEMI_REGULAR.pop();\r\n    }\r\n    this._objBudget.SEMI_REGULAR = [];\r\n   \r\n    while (this._objBudget.STAFF.length > 0) {\r\n      this._objBudget.STAFF.pop();\r\n    }\r\n    this._objBudget.STAFF = [];\r\n\r\n    while (this._objBudget.GUEST.length > 0) {\r\n      this._objBudget.GUEST.pop();\r\n    }\r\n\r\n    this._objBudget.GUEST = [];\r\n\r\n    this._objBudget.OBSERVERS.reset_summary.forEach((all) => {\r\n      all();\r\n    });\r\n\r\n\r\n    // setTimeout(() => {\r\n    //   this._objBudget.CALLER.ACTION = 'reset.summary';\r\n    // }, 200);\r\n\r\n    //this._dispatcher.dispatch('reset.summary');\r\n\r\n    this._disableBudgetId=false;\r\n\r\n     this._objBudget.OBSERVERS.reset_all.forEach((all) => {\r\n      all();\r\n    });\r\n\r\n    // setTimeout(() => {\r\n    //   this._objBudget.CALLER.ACTION = 'reset.all';\r\n    // }, 400);\r\n\r\n    //this._dispatcher.dispatch('reset.all');\r\n\r\n  }\r\n\r\n  fnClearBudget(){\r\n    this.fnClearHeader();\r\n\r\n    this._PROGRAM_GENRE_MSTR=getLookups().PROGRAM_GENRE_MSTR;\r\n    this._PROGRAM_GENRE_MSTR.unshift({});\r\n    this._TELECAST_MODE_MSTR=getLookups().TELECAST_MODE_MSTR;\r\n    this._TELECAST_MODE_MSTR.unshift({});\r\n    this._EPISODE_TYPE_MSTR=getLookups().EPISODE_TYPE_MSTR;\r\n    this._EPISODE_TYPE_MSTR.unshift({});\r\n    this._STATIONS=settings.STATIONS;\r\n\r\n    this._STATUS=[{}];\r\n    // getLookups().REFERENCE_CD_MSTR.forEach((item)=>{\r\n    //   if(item.REF_GRP_CD=='APPR_STAT_CD')\r\n    //   {\r\n    //       this._STATUS.push(item);\r\n    //       console.log(item);\r\n    //   }\r\n    // });\r\n  }\r\n\r\n  //@handle('budget.dialog')\r\n  CloseBudgetDialog(value) {\r\n\r\n\r\n    //  if (this.modalBudget.id == this._ModalWizard.ids[this._ModalWizard.ids.length-1]) {\r\n    //   this._ModalWizard.ids.pop();\r\n\r\n    //   this._objBudget.OBSERVERS.close_modal.forEach((all) => {\r\n    //     all(this.modalBudget.id);\r\n    //   });\r\n\r\n    //   //this._dispatcher.dispatch('close.modal', this.modalBudget.id);\r\n    // }\r\n\r\n    \r\n    var _query = EntityQuery().from('BDGT_TMPL_HDR').where('BDGT_TMPL_ID', '==', value).expand('PROGRAM_MSTR').select('BDGT_TMPL_ID, PROGRAM_MSTR, CHARGE_CD, PROGRAM_GENRE_CD,  TELECAST_MODE_CD,  EPISODE_TYPE_CD,   EPISODES,  TAPING_DAYS, BDGT_FROM, BDGT_TO, STATION_ID, APPR_STAT_CD, REMARKS, CREATED_BY, LAST_UPDATED_BY ');\r\n\r\n    EntityManager().executeQuery(_query).then((found) => {\r\n \r\n        this._STATUS=[{REF_CD:\"APP-DRAFT\",REF_DESC:\"APP-DRAFT\"},{REF_CD:\"APP-APPROVED\",REF_DESC:\"APP-APPROVED\"}];       \r\n        \r\n        if(found.results.length==0) return;\r\n\r\n        this._objBudget.HEADER = found.results[0];\r\n\r\n        this._objBudget.HEADER.BDGT_FROM=moment(new Date(this._objBudget.HEADER.BDGT_FROM)).format('MM-DD-YYYY');\r\n        this._objBudget.HEADER.BDGT_TO=moment(new Date(this._objBudget.HEADER.BDGT_TO)).format('MM-DD-YYYY');\r\n        \r\n        this._disableBudgetId=true;\r\n        //update buttons\r\n        this._disableCreateBudget=true;\r\n        this._disableCancelBudget=false;\r\n        this._disableRefreshBudget=false;\r\n\r\n        this._objBudget._LOADING_BUDGET=1;\r\n        this._disableSaveBudget=true;\r\n        \r\n        this._disablePrintBudget = false;\r\n        this._disableCopyBudget=false;\r\n\r\n        this.budgetDisabled=true;        \r\n        // this._objBudget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n        //   all(this.modalBudget.id, false);\r\n        // });\r\n\r\n        //this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n\r\n        if(this._objBudget.HEADER.APPR_STAT_CD==\"APP-CLOSED\")\r\n        {\r\n          this._STATUS=[{REF_CD:\"APP-CLOSED\",REF_DESC:\"APP-CLOSED\"}];\r\n          this._disableSaveBudget = true;\r\n          //this._disablePrintBudget = true;\r\n        }\r\n        else if(this._objBudget.HEADER.APPR_STAT_CD==\"APP-EXPIRED\")\r\n        {\r\n          this._STATUS=[{REF_CD:\"APP-EXPIRED\",REF_DESC:\"APP-EXPIRED\"}];\r\n          this._disableSaveBudget = true;\r\n          this._disablePrintBudget = true;\r\n          //this._disableCopyBudget=false;\r\n        }\r\n        else if(this._objBudget.HEADER.APPR_STAT_CD==\"APP-DRAFT\")\r\n        {\r\n          \r\n          this.programDisabled=false;\r\n          // this._objBudget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n          //   all( this.modalProgram.id, true);\r\n          // });\r\n\r\n          //this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n\r\n\r\n\r\n          this._objBudget.OBSERVERS.enable_approved.forEach((all) => {\r\n            all(true);\r\n          });\r\n\r\n          //this._dispatcher.dispatch('enable.approved',true);\r\n        }\r\n        else\r\n        {\r\n\r\n            this._objBudget.OBSERVERS.enable_approved.forEach((all) => {\r\n              all(false);\r\n            });\r\n\r\n            //this._dispatcher.dispatch('enable.approved', false);\r\n        }\r\n\r\n         if(this._objBudget.HEADER.APPR_STAT_CD==\"APP-APPROVED\")\r\n         {\r\n\r\n            this._objBudget.STATUS=\"APPROVED\";\r\n            this._disableSaveBudget=true;\r\n\r\n            this.programDisabled=true;\r\n            // this._objBudget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n            //   all(this.modalProgram.id, false);\r\n            // });\r\n\r\n            //this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, false);\r\n         }\r\n         // else if(this._objBudget.HEADER.APPR_STAT_CD==\"APP-APPROVED\")\r\n         // {\r\n         //    this._objBudget.STATUS=\"EXPIRED\";\r\n         // }\r\n         else\r\n            this._objBudget.STATUS=\"VIEW\";\r\n\r\n         \r\n        this._objBudget.OBSERVERS.disable_search_personnel.forEach((all) => {\r\n            all(this._objBudget.HEADER.APPR_STAT_CD==\"APP-DRAFT\");\r\n        });         \r\n\r\n    },(fail)=>{\r\n      console.log(fail);\r\n\r\n    });\r\n\r\n  }\r\n\r\n  \r\n\r\n\r\n  //@handle('pass.program')\r\n  PassedProgram(value) {\r\n    this._objBudget.HEADER.PROGRAM_MSTR=value;\r\n    this._objBudget.HEADER.CHARGE_CD=value.PROGRAM_CD;\r\n\r\n\r\n    // if (this.modalProgram.id == this._ModalWizard.ids[this._ModalWizard.ids.length-1]) {\r\n    //   this._ModalWizard.ids.pop();\r\n\r\n    //   this._objBudget.OBSERVERS.close_modal.forEach((all)=>{\r\n    //     all(this.modalProgram.id);\r\n    //   });\r\n\r\n    // }\r\n  }\r\n\r\n\r\n  //@handle('budget.refresh')\r\n  fnBudgetRefreshHandle()\r\n  {\r\n      this.fnBudget(\"refresh\");\r\n  }\r\n\r\n  \r\n  fnBudget(call){\r\n\r\n    switch(call)\r\n    {\r\n      case \"create\":\r\n      {\r\n        this._disableCreateBudget=true;\r\n        this._disableCancelBudget=false;\r\n        this._disableRefreshBudget=true;\r\n        this._disableSaveBudget=false;\r\n        this._disableBudgetId=true;\r\n        this._disablePrintBudget = true;\r\n\r\n\r\n        this.budgetDisabled=true;\r\n        this.programDisabled=false;\r\n        // this._objBudget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n        //   all(this.modalBudget.id, false);\r\n        //   all(this.modalProgram.id, true);\r\n        // });\r\n\r\n    \r\n        this._objBudget.STATUS=\"CREATE\";\r\n        this._STATUS=[{REF_CD:\"APP-DRAFT\",REF_DESC:\"APP-DRAFT\"}];\r\n\r\n        this.fnDialogProgram();\r\n\r\n        break;\r\n      }\r\n      case \"cancel\":\r\n      {\r\n        this.fnClearHeader();\r\n        this._disableCreateBudget=false;\r\n        this._disableCancelBudget=false;\r\n        this._disableRefreshBudget=true;\r\n        this._disableSaveBudget=true;\r\n        this._disablePrintBudget = true;\r\n\r\n        this.budgetDisabled=false;\r\n        this.programDisabled=true;\r\n        // this._objBudget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n        //   all(this.modalBudget.id, true);\r\n        //   all(this.modalProgram.id, false);\r\n        // });\r\n\r\n        // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, false);\r\n        // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, true);\r\n        this._objBudget.STATUS=\"NONE\";\r\n        break;\r\n      }\r\n      case \"refresh\":\r\n      {\r\n\r\n        this._disableCreateBudget=true;\r\n        this._disableSaveBudget=false;\r\n        this._disableCancelBudget=false;\r\n        this._disableRefreshBudget=false;\r\n        this._disablePrintBudget = true;\r\n    \r\n        this._objBudget.OBSERVERS.budget_dialog.forEach((all) => {\r\n          all(this._objBudget.HEADER.BDGT_TMPL_ID);\r\n        });\r\n\r\n        this.budgetDisabled=true;\r\n        this.programDisabled=false;\r\n        // this._objBudget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n        //   all(this.modalBudget.id, false);\r\n        //   all(this.modalProgram.id, true);\r\n        // });\r\n\r\n        // this._dispatcher.dispatch('budget.dialog', this._objBudget.HEADER.BDGT_TMPL_ID);\r\n        // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n        // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n\r\n        break;\r\n      }\r\n      case \"save\":\r\n      {\r\n       \r\n        this.fnSaveBudget(\"\");\r\n\r\n        break;\r\n      }\r\n      case \"print\":\r\n      {\r\n\r\n        var varUseReport=\"\";\r\n        if(this._objBudget.HEADER.APPR_STAT_CD==\"APP-DRAFT\")\r\n        {\r\n            varUseReport=\"Draft\";\r\n        }\r\n        if(this._objBudget.HEADER.APPR_STAT_CD==\"APP-APPROVED\")\r\n        {\r\n            varUseReport=\"Approved\";\r\n        }\r\n\r\n\r\n        if(varUseReport!=\"\")\r\n        {\r\n           // var popup = window.open(\"http://absppms:8080/ReportServer/Pages/ReportViewer.aspx?%2fPPID+Reports%2fBudget_Print&rs:Command=Render&Actual_Cost_id=\"+this._objBudget.HEADER.BDGT_TMPL_ID+\"&isConfidential=\"+this._objBudget.ALLOW_PASS_CONFIDENTIAL+\"\", \"popupWindow\", \"width=1280px,height=1024px,scrollbars=yes,directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,addressbar=0,fullscreen=false\");\r\n            var popup = window.open(settings.ActualCostService+\"/report/Budget_\"+varUseReport+\"_Report.aspx?BDID=\"+this._objBudget.HEADER.BDGT_TMPL_ID+\"&ConcealConfidentialBudgetAmt=\"+this._objBudget.ALLOW_PASS_CONFIDENTIAL+\"&USER_ACCOUNT=\"+this._user+\"&COMPANY_ID=\"+this._COMPANY_ID, \"popupWindow\", \"width=1280px,height=1024px,scrollbars=yes,directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,addressbar=0,fullscreen=false\");\r\n           popup.moveTo(0, 0);\r\n        }\r\n        \r\n        \r\n         break;\r\n      }\r\n      case \"copy\":\r\n      {\r\n        \r\n\r\n                this.dialogService.open({ viewModel: confirm_dialog, model: 'Copy Template?' }).whenClosed(response => {\r\n          if (!response.wasCancelled) {\r\n             //console.log(response.output);\r\n\r\n\r\n              var varGetHeader = EntityQuery().from('BDGT_TMPL_HDR').where('BDGT_TMPL_ID', '==', this._objBudget.HEADER.BDGT_TMPL_ID);\r\n\r\n              EntityManager().executeQuery(varGetHeader).then((found) => {\r\n                found.results[0].APPR_STAT_CD = \"APP-CLOSED\";\r\n                EntityManager().saveChanges().then((success) => {\r\n\r\n                  this._objBudget.HEADER.BDGT_TMPL_ID = \"\";\r\n                  this._objBudget.HEADER.APPR_STAT_CD = \"APP-DRAFT\";\r\n                  this._objBudget.STATUS = \"DRAFT\";\r\n                  this._objBudget.IS_COPYING = true;\r\n                  \r\n                  this.fnSaveBudget(\"\");\r\n\r\n                });\r\n              });\r\n\r\n            \r\n\r\n\r\n          } else {\r\n            \r\n          }\r\n         \r\n        });\r\n\r\n      }\r\n      break;\r\n      case \"close\":{\r\n\r\n            this.dialogService.open({ viewModel: confirm_dialog, model: 'Close Template?' }).whenClosed(response => {\r\n          if (!response.wasCancelled) {\r\n            \r\n                //this._objBudget.HEADER.APPR_STAT_CD='APP-CLOSED';\r\n                this.fnSaveBudget('APP-CLOSED');\r\n           \r\n            \r\n          } else {\r\n            \r\n          }\r\n         \r\n        });\r\n\r\n      }\r\n      break;\r\n\r\n\r\n    }\r\n  }\r\n\r\n\r\n  fnBudgetValidation_1(){\r\n   \r\n      return new Promise((resolve,reject)=>{ \r\n\r\n      var varAddMin = new Date(this._objBudget.HEADER.BDGT_TO);\r\n      var varSubMin = new Date(this._objBudget.HEADER.BDGT_FROM);\r\n\r\n      var p1 = breeze.Predicate.create('BDGT_FROM', '>=', new Date(varSubMin.getFullYear(), varSubMin.getMonth(), varSubMin.getDate() - 1));\r\n      var p2 = breeze.Predicate.create('BDGT_TO', '<=', new Date(varAddMin.getFullYear(), varAddMin.getMonth(), varAddMin.getDate() + 1));\r\n      var p3 = breeze.Predicate.create('BDGT_TMPL_ID', '!=', this._objBudget.HEADER.BDGT_TMPL_ID);\r\n      var p4 = breeze.Predicate.create('EPISODE_TYPE_CD', '==', this._objBudget.HEADER.EPISODE_TYPE_CD);\r\n      var pred = breeze.Predicate.and([p1, p2, p3, p4]);\r\n\r\n      var _query = EntityQuery().from('BDGT_TMPL_HDR').where(pred);\r\n      EntityManager().executeQuery(_query).then((found) => {\r\n        if (found.results !== undefined) {\r\n          var countError=0;\r\n          found.results.forEach((all) => {\r\n            //if (all.APPR_STAT_CD.includes('EXPIRE') || all.APPR_STAT_CD.includes('CLOSE')) {\r\n              toastr.error(\"Budget can only be acceptable if date will be out of range of the last CLOSED/EXPIRED TEMPLATE\");\r\n              ++countError; \r\n            //}\r\n          });\r\n\r\n          if(countError>0)\r\n            reject(false); \r\n          else\r\n            resolve(true);\r\n\r\n        }\r\n        else\r\n          resolve(true);\r\n      });\r\n\r\n          \r\n\r\n      });\r\n\r\n  }\r\n\r\n  fnBudgetValidation_2(){\r\n\r\n     return new Promise((resolve,reject)=>{ \r\n\r\n      var varAddMin = new Date(this._objBudget.HEADER.BDGT_TO);\r\n      var varSubMin = new Date(this._objBudget.HEADER.BDGT_FROM);\r\n\r\n      var p3 = breeze.Predicate.create('BDGT_TMPL_ID', '!=', this._objBudget.HEADER.BDGT_TMPL_ID);\r\n      var c1 = breeze.Predicate.create('BDGT_TMPL_HDR.PROGRAM_ID', '==', this._objBudget.HEADER.PROGRAM_MSTR.PROGRAM_ID)\r\n\r\n      var pred2 = breeze.Predicate.and([c1, p3]);\r\n      var _queryCheckActual = EntityQuery().from('ACTUAL_COST_HDR').where(pred2).expand(\"BDGT_TMPL_HDR\");\r\n      EntityManager().executeQuery(_queryCheckActual).then((found) => {\r\n\r\n        if (found.results !== undefined) {\r\n\r\n              var varPromises = [];\r\n              found.results.forEach((all) => {\r\n\r\n\r\n                var newPromise = new Promise((resolve_2, reject_2) => {\r\n\r\n                  var varTmpFrom = new Date(all.ACTUAL_FROM.getFullYear(), all.ACTUAL_FROM.getMonth(), all.ACTUAL_FROM.getDate());\r\n                  var varTmpTo = new Date(all.ACTUAL_TO.getFullYear(), all.ACTUAL_TO.getMonth(), all.ACTUAL_TO.getDate());\r\n\r\n                if ((varTmpFrom <= new Date(this._objBudget.HEADER.BDGT_FROM) && varTmpFrom >= new Date(this._objBudget.HEADER.BDGT_TO)) ||\r\n                      (varTmpTo <= new Date(this._objBudget.HEADER.BDGT_FROM) && varTmpTo >= new Date(this._objBudget.HEADER.BDGT_TO)) ||\r\n                      (varTmpFrom >= new Date(this._objBudget.HEADER.BDGT_TO)) ||\r\n                      (varTmpFrom >= new Date(this._objBudget.HEADER.BDGT_FROM) && varTmpTo <= new Date(this._objBudget.HEADER.BDGT_TO))\r\n                    ) {\r\n                      toastr.error(\"Please enter range beyond the created budget (AC:\" + all.ACTUAL_COST_ID + \")\");\r\n                      reject_2(false); \r\n                    }\r\n\r\n\r\n\r\n                  var _queryCheckVtr = EntityQuery().from('VTR_LIVE_DT_DTL').where('ACTUAL_COST_ID', '==', all.ACTUAL_COST_ID);\r\n                  EntityManager().executeQuery(_queryCheckVtr).then((foundVtr) => {\r\n\r\n                    if (foundVtr.results === undefined) {\r\n                      resolve_2(true);\r\n                    }\r\n\r\n                    var varDataFromCompare = new Date(this._objBudget.HEADER.BDGT_FROM);\r\n                    var varDataToCompare = new Date(this._objBudget.HEADER.BDGT_FROM);\r\n\r\n                    var varMaxDate = null;\r\n                    foundVtr.results.forEach((allDate) => {\r\n\r\n                      //var varVtr = new Date(all.VTR_LIVE_DT.getFullYear(), all.VTR_LIVE_DT.getMonth(), all.VTR_LIVE_DT.getDate());\r\n                        var varVtr = moment(new Date(allDate.VTR_LIVE_DT)).format('MM-DD-YYYY');\r\n                        var varDateCompare = new Date(varVtr);\r\n\r\n                        if (varDataFromCompare <= varDateCompare && varDateCompare <= varDataToCompare) {\r\n                        if (varMaxDate == null)\r\n                          varMaxDate = varVtr;\r\n                        else if (varMaxDate < varVtr)\r\n                          varMaxDate = varVtr;\r\n\r\n                        //toastr.error(\"Please enter range beyond the created budget (AC:\" + all.ACTUAL_COST_ID + \")\");\r\n                      }\r\n                    });\r\n\r\n                    if (varMaxDate == null) {\r\n                      resolve_2(true);\r\n                    } else {\r\n                      var new_date = moment(varMaxDate, \"MM-DD-YYYY\");\r\n                      new_date.add(1, 'days');\r\n                      new_date = moment(new Date(new_date)).format('MM-DD-YYYY');\r\n\r\n                      //console.log(new_date);\r\n                      //console.log(new Date(this._objBudget.HEADER.BDGT_FROM));\r\n                      //if (new_date > new Date(this._objBudget.HEADER.BDGT_FROM))\r\n                      toastr.error(\"An existing ActualCost with Id (\" + all.ACTUAL_COST_ID + \") is using this budget template. <br>BudgetId (\" + all.BDGT_TMPL_ID + \") with status (\" + all.BDGT_TMPL_HDR.APPR_STAT_CD.replace(\"APP-\", \"\") + \").\" +\r\n                        \" Either open the existing Budget Template and create a Copy, or start the validity on \" + new_date);\r\n\r\n                      reject_2(false);\r\n                    }\r\n\r\n             \r\n                  });\r\n\r\n\r\n                });\r\n\r\n                varPromises.push(newPromise);\r\n\r\n\r\n\r\n              });\r\n\r\n              Promise.all(varPromises).then((passed) => {\r\n                resolve(true);\r\n              }, (fail) => {\r\n                reject(false);\r\n                //reject(fail);\r\n              });\r\n\r\n\r\n          // found.results.forEach((all) => {\r\n\r\n\r\n          //   var varTmpFrom = new Date(all.ACTUAL_FROM.getFullYear(), all.ACTUAL_FROM.getMonth(), all.ACTUAL_FROM.getDate());\r\n          //   var varTmpTo = new Date(all.ACTUAL_TO.getFullYear(), all.ACTUAL_TO.getMonth(), all.ACTUAL_TO.getDate());\r\n\r\n          //   if ((varTmpFrom <= new Date(this._objBudget.HEADER.BDGT_FROM) && varTmpFrom >= new Date(this._objBudget.HEADER.BDGT_TO)) ||\r\n          //     (varTmpTo <= new Date(this._objBudget.HEADER.BDGT_FROM) && varTmpTo >= new Date(this._objBudget.HEADER.BDGT_TO)) ||\r\n          //     (varTmpFrom >= new Date(this._objBudget.HEADER.BDGT_TO)) ||\r\n          //     (varTmpFrom >= new Date(this._objBudget.HEADER.BDGT_FROM) && varTmpTo <= new Date(this._objBudget.HEADER.BDGT_TO))\r\n          //   ) {\r\n          //     toastr.error(\"Please enter range beyond the created budget (AC:\" + all.ACTUAL_COST_ID + \")\");\r\n          //     reject(false); \r\n          //   }\r\n\r\n\r\n\r\n          //   var _queryCheckVtr = EntityQuery().from('VTR_LIVE_DT_DTL').where('ACTUAL_COST_ID', '==', all.ACTUAL_COST_ID);\r\n          //   EntityManager().executeQuery(_queryCheckVtr).then((foundVtr) => {\r\n\r\n          //     var varMaxDate = null;\r\n          //     foundVtr.results.forEach((allDate) => {\r\n\r\n          //       //var varVtr = new Date(all.VTR_LIVE_DT.getFullYear(), all.VTR_LIVE_DT.getMonth(), all.VTR_LIVE_DT.getDate());\r\n          //       var varVtr = moment(new Date(allDate.VTR_LIVE_DT)).format('MM-DD-YYYY');\r\n          //       if (this._objBudget.HEADER.BDGT_FROM >= varVtr && varVtr <= this._objBudget.HEADER.BDGT_TO) {\r\n          //         if (varMaxDate == null)\r\n          //           varMaxDate = varVtr;\r\n          //         else if (varMaxDate < varVtr)\r\n          //           varMaxDate = varVtr;\r\n\r\n          //       }\r\n          //     });\r\n\r\n          //     if (varMaxDate !== null && (all.BDGT_TMPL_HDR.APPR_STAT_CD == \"APP-EXPIRED\" || all.BDGT_TMPL_HDR.APPR_STAT_CD == \"APP-CLOSED\" || all.BDGT_TMPL_HDR.APPR_STAT_CD == \"APP-APPROVED\")) {\r\n          //       var new_date = moment(varMaxDate, \"DD-MM-YYYY\").add(1, 'days');\r\n          //       new_date = moment(new Date(new_date)).format('MM-DD-YYYY');\r\n          //       toastr.error(\"An existing ActualCost with Id (\" + all.ACTUAL_COST_ID + \") is using this budget template. <br>BudgetId (\" + all.BDGT_TMPL_ID + \") with status (\" + all.BDGT_TMPL_HDR.APPR_STAT_CD.replace(\"APP-\", \"\") + \").\" +\r\n          //         \" Either open the existing Budget Template and create a Copy, or start the validity on \" + new_date);\r\n\r\n          //        reject(false); \r\n          //     }\r\n\r\n          //   });\r\n\r\n          // });\r\n\r\n\r\n\r\n        }\r\n        else\r\n            resolve(true); \r\n\r\n      });\r\n\r\n\r\n\r\n\r\n       \r\n\r\n      });\r\n\r\n\r\n\r\n  }\r\n\r\n  fnValidation_Approved(){\r\n\r\n    return new Promise((resolve,reject) => \r\n    {\r\n      var p3 = breeze.Predicate.create('BDGT_TMPL_ID', '!=', this._objBudget.HEADER.BDGT_TMPL_ID);\r\n      var c1 = breeze.Predicate.create('BDGT_TMPL_HDR.PROGRAM_ID', '==', this._objBudget.HEADER.PROGRAM_MSTR.PROGRAM_ID);\r\n      var c2 = breeze.Predicate.create('APPR_STAT_CD', '==', \"APP-APPROVED\");\r\n      var pred2 = breeze.Predicate.and([c1, c2, p3]);\r\n      var _queryCheckActual = EntityQuery().from('ACTUAL_COST_HDR').where(pred2).expand(\"BDGT_TMPL_HDR\");\r\n      EntityManager().executeQuery(_queryCheckActual).then((found) => {\r\n\r\n        if (found.results !== undefined) {\r\n\r\n          var varPromises=[];\r\n          found.results.forEach((all) => {\r\n\r\n\r\n             var newPromise =  new Promise((resolve_2, reject_2) => {\r\n\r\n              var varTmpFrom = new Date(all.ACTUAL_FROM.getFullYear(), all.ACTUAL_FROM.getMonth(), all.ACTUAL_FROM.getDate());\r\n              var varTmpTo = new Date(all.ACTUAL_TO.getFullYear(), all.ACTUAL_TO.getMonth(), all.ACTUAL_TO.getDate());\r\n\r\n\r\n\r\n              var _queryCheckVtr = EntityQuery().from('VTR_LIVE_DT_DTL').where('ACTUAL_COST_ID', '==', all.ACTUAL_COST_ID);\r\n              EntityManager().executeQuery(_queryCheckVtr).then((foundVtr) => {\r\n\r\n                if (foundVtr.results === undefined) {\r\n                   resolve_2(true);\r\n                }\r\n                var varDataFromCompare = new Date(this._objBudget.HEADER.BDGT_FROM);\r\n                var varDataToCompare = new Date(this._objBudget.HEADER.BDGT_FROM);\r\n\r\n                var varMaxDate = null;\r\n                foundVtr.results.forEach((allDate) => {\r\n\r\n                  //var varVtr = new Date(all.VTR_LIVE_DT.getFullYear(), all.VTR_LIVE_DT.getMonth(), all.VTR_LIVE_DT.getDate());\r\n                  var varVtr = moment(new Date(allDate.VTR_LIVE_DT)).format('MM-DD-YYYY');\r\n                 \r\n                //  if (this._objBudget.HEADER.BDGT_FROM <= varVtr && varVtr <= this._objBudget.HEADER.BDGT_TO) {\r\n                  var varVtr = moment(new Date(allDate.VTR_LIVE_DT)).format('MM-DD-YYYY');\r\n                  var varDateCompare = new Date(varVtr);\r\n\r\n                  if (varDataFromCompare <= varDateCompare && varDateCompare <= varDataToCompare) {\r\n                    if (varMaxDate == null)\r\n                      varMaxDate = varVtr;\r\n                    else if (varMaxDate < varVtr)\r\n                      varMaxDate = varVtr;\r\n\r\n                    //toastr.error(\"Please enter range beyond the created budget (AC:\" + all.ACTUAL_COST_ID + \")\");\r\n                  }\r\n                });\r\n\r\n                if(varMaxDate==null)\r\n                {\r\n                    resolve_2(true);\r\n                } \r\n                else\r\n                {\r\n                  //console.log(varMaxDate);\r\n                  var new_date = moment(varMaxDate, \"MM-DD-YYYY\");\r\n                  //console.log(new_date);\r\n                  new_date.add(1, 'days');\r\n                  new_date = moment(new Date(new_date)).format('MM-DD-YYYY');\r\n                 //    console.log(new_date);\r\n                  //   console.log(new Date(this._objBudget.HEADER.BDGT_FROM));\r\n                 //    if (new_date > new Date(this._objBudget.HEADER.BDGT_FROM))\r\n                  toastr.error(\"An existing ActualCost with Id (\" + all.ACTUAL_COST_ID + \") is using this budget template. <br>BudgetId (\" + all.BDGT_TMPL_ID + \") with status (\" + all.BDGT_TMPL_HDR.APPR_STAT_CD.replace(\"APP-\", \"\") + \").\" +\r\n                    \" Either open the existing Budget Template and create a Copy, or start the validity on \" + new_date);\r\n\r\n                  reject_2(false);\r\n                }\r\n\r\n             \r\n              });\r\n\r\n\r\n             });\r\n\r\n            varPromises.push(newPromise);\r\n\r\n          });\r\n\r\n         Promise.all(varPromises).then((passed) => {\r\n             resolve(true);\r\n          }, (fail) => {\r\n             reject(false);\r\n             //reject(fail);\r\n          });\r\n\r\n        }\r\n        else\r\n           resolve(true);\r\n        \r\n\r\n      });\r\n\r\n      \r\n\r\n    });\r\n    \r\n  }\r\n\r\n\r\n  fnSaveBudget(passed_status) \r\n  {\r\n\r\n     var strValidation=\"\";\r\n\r\n     if(this._objBudget.HEADER.PROGRAM_MSTR.PROGRAM_TITLE==\"\")\r\n     {\r\n        strValidation+=\"No Program specified. <br>\";\r\n     }\r\n     \r\n     if(!moment(this._objBudget.HEADER.BDGT_FROM).isValid() || !moment(this._objBudget.HEADER.BDGT_TO).isValid())\r\n     {\r\n        strValidation+=\"Invalid Template Start/End Date validity. <br>\";\r\n     }\r\n\r\n     if(this._objBudget.HEADER.PROGRAM_GENRE_CD==\"\")\r\n     {\r\n        strValidation+=\"No Program Genre. <br>\";\r\n     }\r\n     \r\n     if(this._objBudget.HEADER.EPISODE_TYPE_CD==\"\")\r\n     {\r\n        strValidation+=\"No Episode Type. <br>\";\r\n     }\r\n\r\n     if(this._objBudget.HEADER.TELECAST_MODE_CD==\"\")\r\n     {\r\n        strValidation+=\"No Telecast Mode. <br>\";\r\n     }\r\n\r\n     if(!parseInt(this._objBudget.HEADER.TAPING_DAYS)>0)\r\n     {\r\n        strValidation+=\"Invalid Taping Day(s).<br>\";\r\n     }\r\n\r\n     if(!parseInt(this._objBudget.HEADER.EPISODES)>0)\r\n     {\r\n        strValidation+=\"Invalid Episode(s).<br>\";\r\n     }\r\n\r\n     if(strValidation!=\"\")\r\n     {\r\n        toastr.error(\"Exception occured. <br/><br/>\"+strValidation, \"Budget Template\");\r\n        return;\r\n     }\r\n     \r\n     if(this._objBudget.TOTAL<=0 && this._objBudget.HEADER.APPR_STAT_CD.includes('APPROVED'))\r\n     {\r\n        toastr.error(\"Cannot have Zero Total Budget.\", \"Budget Template\");\r\n        return;\r\n     }\r\n\r\n     //have to add +8 hrs or browser minus 8 hrs when passed to server\r\n    // if (this._objBudget.HEADER.BDGT_FROM !== undefined)\r\n    //   this._objBudget.HEADER.BDGT_FROM = moment(new Date(this._objBudget.HEADER.BDGT_FROM)).add(8, 'hours');\r\n\r\n    // if (this._objBudget.HEADER.BDGT_TO !== undefined)\r\n    //   this._objBudget.HEADER.BDGT_TO = moment(new Date(this._objBudget.HEADER.BDGT_TO)).add(8, 'hours');\r\n     //this._objBudget.HEADER.APPR_STAT_CD\r\n     if (passed_status.includes('EXPIRE') || passed_status.includes('CLOSE')) {\r\n        //this.fnBudgetValidation_1(),  removed\r\n      Promise.all([this.fnBudgetValidation_2()]).then((passed) => {\r\n       if(passed_status!='')\r\n         this._objBudget.HEADER.APPR_STAT_CD=passed_status;\r\n         this.fnExecuteSaveBudgetHeader();\r\n      }, (fail) => {\r\n        toastr.error(\"Saving Cancelled.\", \"Saving..\");\r\n\r\n      });\r\n    }\r\n    else if (this._objBudget.HEADER.APPR_STAT_CD.includes('APPROVED')) {\r\n\r\n      this.fnValidation_Approved().then((passed) => {\r\n\r\n        var varToday = new Date(Date.now());\r\n\r\n        if (new Date(varToday.getFullYear(), varToday.getMonth(), varToday.getDate()) >= new Date(moment(this._objBudget.HEADER.BDGT_TO).subtract(8, 'hours').format('MM-DD-YYYY'))) {\r\n          this._objBudget.HEADER.APPR_STAT_CD = \"APP-EXPIRED\";\r\n        }\r\n\r\n        this.fnExecuteSaveBudgetHeader();\r\n\r\n      }, (fail) => {\r\n        toastr.error(\"Saving Cancelled.\", \"Saving..\");\r\n      });\r\n      \r\n    }\r\n    else\r\n    {\r\n      this.fnExecuteSaveBudgetHeader();\r\n    }\r\n\r\n\r\n    return;\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  fnExecuteSaveBudgetHeader()\r\n  {\r\n\r\n      var varInsert=null;\r\n\r\n    // if (this._objBudget.HEADER.BDGT_FROM !== undefined)\r\n    //   this._objBudget.HEADER.BDGT_FROM = moment(new Date(this._objBudget.HEADER.BDGT_FROM)).add(8, 'hours');\r\n\r\n    // if (this._objBudget.HEADER.BDGT_TO !== undefined)\r\n    //   this._objBudget.HEADER.BDGT_TO = moment(new Date(this._objBudget.HEADER.BDGT_TO)).add(8, 'hours');\r\n\r\n\r\n    // console.log(this._objBudget.HEADER.BDGT_FROM);\r\n    // console.log(this._objBudget.HEADER.BDGT_TO);\r\n\r\n      var varFrom = moment(new Date(this._objBudget.HEADER.BDGT_FROM)).add(8, 'hours');\r\n      varFrom = new Date(varFrom);\r\n\r\n      var varTo = moment(new Date(this._objBudget.HEADER.BDGT_TO)).add(8, 'hours');\r\n      varTo = new Date(varTo);\r\n\r\n      //var varTo = new Date(this._objBudget.HEADER.BDGT_TO);\r\n\r\n      // console.log(varFrom);\r\n      // console.log(varTo);\r\n\r\n      if (this._objBudget.HEADER.REMARKS === undefined || this._objBudget.HEADER.REMARKS == null) {\r\n        this._objBudget.HEADER.REMARKS=\"NONE\";\r\n      }\r\n      else if (this._objBudget.HEADER.REMARKS.trim()==\"\")\r\n      {\r\n        this._objBudget.HEADER.REMARKS=\"NONE\";\r\n      }\r\n\r\n\r\n      if (this._objBudget.HEADER.BDGT_TMPL_ID == \"\") {\r\n      var getMax = EntityQuery().from('BDGT_TMPL_HDR').orderByDesc('BDGT_TMPL_ID').take(1);\r\n\r\n      //CHANGED 6-17-2016, changed bec before if only 1 value available will auto bind to APPR_STAT_CD, now have to set it first\r\n      if(this._objBudget.HEADER.APPR_STAT_CD==null || this._objBudget.HEADER.APPR_STAT_CD==undefined || this._objBudget.HEADER.APPR_STAT_CD=='undefined')\r\n      {\r\n        this._objBudget.HEADER.APPR_STAT_CD=this._STATUS[0].REF_CD;\r\n      }\r\n\r\n      //console.log(this._objBudget.HEADER.APPR_STAT_CD);\r\n\r\n      EntityManager().executeQuery(getMax).then((successMax) => {\r\n        var getMax = 1;\r\n\r\n        if (successMax.results.length > 0)\r\n          getMax = successMax.results[0].BDGT_TMPL_ID + 1;\r\n\r\n          varInsert = EntityManager().createEntity('BDGT_TMPL_HDR', {\r\n          BDGT_TMPL_ID: getMax,\r\n          COMPANY_ID: this._COMPANY_ID,\r\n          BDGT_FROM: varFrom,\r\n          BDGT_TO: varTo,\r\n          //PROGRAM_TYPE_CD: indiv.GLOBAL_GRP_ID,\r\n          //EPISODE_MODE_CD: indiv.GLOBAL_GRP_ID,\r\n          EPISODE_TYPE_CD: this._objBudget.HEADER.EPISODE_TYPE_CD,\r\n          BDGT_VIEW_FCTR: 1,\r\n          TAPING_DAYS: this._objBudget.HEADER.TAPING_DAYS,\r\n          PROGRAM_ID: this._objBudget.HEADER.PROGRAM_MSTR.PROGRAM_ID,\r\n          CHARGE_CD: this._objBudget.HEADER.CHARGE_CD,\r\n          PROGRAM_GENRE_CD: this._objBudget.HEADER.PROGRAM_GENRE_CD,\r\n          PARENT_PROGRAM_ID: this._objBudget.HEADER.PROGRAM_MSTR.PROGRAM_ID,\r\n          BDGT_VIEW_CD: 'EPISODIC',\r\n          APPR_STAT_CD: this._objBudget.HEADER.APPR_STAT_CD,\r\n          CHARGE_TYPE_CD: '',\r\n          BDGT_TOTAL: 0,\r\n          REMARKS: this._objBudget.HEADER.REMARKS,\r\n          CREATED_BY: this._user,\r\n          CREATED_DT: new Date(Date.now()),\r\n          //LAST_UPDATED_BY: indiv.GLOBAL_GRP_ID,\r\n          //LAST_UPDATED_DT: indiv.GLOBAL_GRP_ID,\r\n          TELECAST_MODE_CD: this._objBudget.HEADER.TELECAST_MODE_CD,\r\n          BDGT_STAT_CD: getMax,\r\n          //BDGT_TMPL_TYPE_CD: indiv.GLOBAL_GRP_ID,\r\n          BDGT_FOR_CD: 'BDGT-EPISODIC',\r\n          PROGRAM_NAME: this._objBudget.HEADER.PROGRAM_MSTR.PROGRAM_TITLE,\r\n          EPISODES: this._objBudget.HEADER.EPISODES,\r\n          STATION_ID: this._objBudget.HEADER.STATION_ID,\r\n          STATION_SENT_DATE: new Date(),\r\n          STATION_SENT: 0\r\n        });\r\n\r\n        EntityManager().addEntity(varInsert);\r\n\r\n        EntityManager().saveChanges().then((success) => {\r\n\r\n          this._objBudget.HEADER.BDGT_TMPL_ID = success.entities[0].BDGT_TMPL_ID;\r\n\r\n          this._disableCreateBudget=true;\r\n          this._disableCancelBudget=false;\r\n          this._disableRefreshBudget=false;\r\n          this._disableSaveBudget=false;\r\n\r\n\r\n          if(this._objBudget.HEADER.APPR_STAT_CD==\"APP-APPROVED\")\r\n          {\r\n            this._objBudget.STATUS=\"APPROVED\";\r\n            this._disableSaveBudget=true;\r\n\r\n            this.budgetDisabled=true;\r\n            this.programDisabled=true;\r\n\r\n            // this._objBudget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n            //   all(this.modalBudget.id, false);\r\n            //   all(this.modalProgram.id, false);\r\n            // });\r\n\r\n            // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n            // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, false);\r\n          }\r\n          else\r\n          {\r\n          \r\n            this.budgetDisabled=true;\r\n            this.programDisabled=false;\r\n\r\n            // this._objBudget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n            //   all(this.modalBudget.id, false);\r\n            //   all(this.modalProgram.id, true);\r\n            // });\r\n\r\n            // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n            // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n          }\r\n\r\n          toastr.success(\"Succesfully Saved\", \"Budget Template\");\r\n\r\n\r\n          if(this._objBudget.IS_COPYING)\r\n          {\r\n\r\n            this._objBudget.OBSERVERS.copy_template.forEach((all) => {\r\n              \r\n              all('REGULAR');\r\n              //all('GUEST');\r\n            });\r\n\r\n\r\n            // this._dispatcher.dispatch('copy.template','REGULAR');\r\n            // this._dispatcher.dispatch('copy.template','GUEST');\r\n\r\n\r\n            this._objBudget.IS_COPYING=false;\r\n\r\n            //  setTimeout(()=>{\r\n\r\n            \r\n            //   this.fnBudget(\"refresh\");\r\n            // },5000);\r\n            \r\n            //this._IS_COPYING=\"\";\r\n          }\r\n          else\r\n          {\r\n            this.fnBudget(\"refresh\"); \r\n          }\r\n\r\n          this._disableCreateBudget=true;\r\n          this._disableSaveBudget=false;\r\n          this._disableCancelBudget=false;\r\n          this._disableRefreshBudget=false;\r\n          this._disablePrintBudget = true;\r\n\r\n          this.budgetDisabled=false;\r\n          this.programDisabled=false;\r\n\r\n          // this._objBudget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n          //   all(this.modalBudget.id, true);\r\n          //   all(this.modalProgram.id, true);\r\n          // });\r\n\r\n          // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, true);\r\n          // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n\r\n\r\n        }, (fail) => {\r\n\r\n          if(varInsert!=null)\r\n          {\r\n            varInsert.entityAspect.setDeleted();  \r\n          }\r\n          \r\n          EntityManager().getEntities().forEach(function(entity) {\r\n            var errors = entity.entityAspect.getValidationErrors();\r\n            if (errors.length > 0)\r\n              console.log(errors);\r\n          });\r\n          console.log(fail);\r\n          toastr.error(\"Error Occured\", fail);\r\n        });\r\n\r\n      });\r\n\r\n    } else {\r\n      \r\n      var getEntityQuery = EntityQuery().from('BDGT_TMPL_HDR').where(\"BDGT_TMPL_ID\", \"==\", this._objBudget.HEADER.BDGT_TMPL_ID);\r\n      EntityManager().executeQuery(getEntityQuery).then((item) => {\r\n\r\n        item.results[0].BDGT_FROM = varFrom;\r\n        item.results[0].BDGT_TO = varTo;\r\n        item.results[0].EPISODE_TYPE_CD = this._objBudget.HEADER.EPISODE_TYPE_CD;\r\n        item.results[0].TAPING_DAYS = this._objBudget.HEADER.TAPING_DAYS;\r\n        item.results[0].PROGRAM_ID = this._objBudget.HEADER.PROGRAM_MSTR.PROGRAM_ID;\r\n        item.results[0].CHARGE_CD = this._objBudget.HEADER.CHARGE_CD;\r\n        item.results[0].PROGRAM_GENRE_CD = this._objBudget.HEADER.PROGRAM_GENRE_CD;\r\n        item.results[0].PARENT_PROGRAM_ID = this._objBudget.HEADER.PROGRAM_MSTR.PROGRAM_ID;\r\n        item.results[0].APPR_STAT_CD = this._objBudget.HEADER.APPR_STAT_CD;\r\n        item.results[0].REMARKS = this._objBudget.HEADER.REMARKS;\r\n        item.results[0].LAST_UPDATED_BY = this._user;\r\n        item.results[0].LAST_UPDATED_DT = new Date(Date.now());\r\n        item.results[0].TELECAST_MODE_CD = this._objBudget.HEADER.TELECAST_MODE_CD;\r\n        item.results[0].PROGRAM_NAME = this._objBudget.HEADER.PROGRAM_MSTR.PROGRAM_TITLE;\r\n        item.results[0].EPISODES = this._objBudget.HEADER.EPISODES;\r\n        item.results[0].STATION_ID =  this._objBudget.HEADER.STATION_ID;\r\n\r\n        EntityManager().saveChanges().then((success) => {\r\n          \r\n          this._disableCreateBudget = true;\r\n          this._disableCancelBudget = false;\r\n          this._disableRefreshBudget = false;\r\n          this._disableSaveBudget = false;\r\n\r\n\r\n          this.budgetDisabled=true;\r\n          this.programDisabled=false;\r\n          // this._objBudget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n          //   all(this.modalBudget.id, false);\r\n          //   all(this.modalProgram.id, true);\r\n          // });\r\n\r\n          // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n          // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n\r\n          toastr.success(\"Succesfully Saved\", \"Budget Template\");\r\n          this.fnBudget(\"refresh\"); \r\n        }, (fail) => {\r\n\r\n          EntityManager().getEntities().forEach(function(entity) {\r\n            var errors = entity.entityAspect.getValidationErrors();\r\n            if (errors.length > 0)\r\n              console.log(errors);\r\n          });\r\n          console.log(fail);\r\n          toastr.error(\"Error Occured\", fail);\r\n        });\r\n\r\n\r\n      });\r\n     \r\n\r\n        \r\n      this._disableBudgetId=true;\r\n\r\n      // this._objBudget.CALLER.VALUE1 = this.modalBudget.id;\r\n      // this._objBudget.CALLER.VALUE2 = false;\r\n      // this._objBudget.CALLER.ACTION = 'enable.modal.button';\r\n\r\n      this.budgetDisabled=true;\r\n      // this._objBudget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n      //   all(this.modalBudget.id, false);\r\n      // });\r\n\r\n      //this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n      this._disablePrintBudget = false;\r\n    }\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n    fnDialogProgram(){\r\n      this.dialogService.open({\r\n        viewModel: program\r\n      }).whenClosed(response => {\r\n        \r\n        if (!response.wasCancelled) {\r\n          \r\n        } else {\r\n          \r\n        }\r\n      });\r\n    }\r\n\r\n\r\n\r\n    fnDialogBudget(){\r\n      this.dialogService.open({\r\n        viewModel: budget\r\n      }).whenClosed(response => {\r\n          settings.isNavigating = true;\r\n        if (!response.wasCancelled) {\r\n        \r\n        } else {\r\n          \r\n        }\r\n      });\r\n    }\r\n\r\n\r\n}","export function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .developmentLogging()\n    .plugin('aurelia-animator-css')\n\t.plugin('aurelia-breeze')\n  .plugin('aurelia-dialog', config => {\n      config.useDefaults();\n      config.settings.lock = false;\n      config.settings.centerHorizontalOnly = false;\n      config.settings.startingZIndex = 500;\n    });\n\n\n\t//.plugin('aurelia-bs-modal')\n\t;\n  aurelia.start().then(a => a.setRoot());\n}\n","import { inject } from 'aurelia-framework';\r\nimport { computedFrom, customElement } from 'aurelia-framework';\r\nimport { cache_obj } from 'cache_obj';\r\nimport { initializeBreeze } from './entity-manager-factory';\r\nimport { loadMasterfiles, loadTables, loadLookups, getLookups } from './masterfiles';\r\nimport toastr from \"toastr\";\r\nimport { DialogService } from 'aurelia-dialog';\r\n// import  jquery from \"jquery\";\r\nimport { generateID } from './entity-manager-factory';\r\n//import {handle, Dispatcher} from 'aurelia-flux';  \r\nimport { checkCookie, setCookie, removeCookie, getCookie } from './helpers';\r\n//import { MultiObserver } from 'multi-observer';\r\nimport settings from './settings';\nimport { Router } from 'aurelia-router';\nimport _ from 'underscore';\n@inject(toastr, cache_obj, DialogService, Router) //MultiObserver\nexport class mainpage {\r\n\r\n\r\n    _toastr = null;\r\n    _cache_obj;\r\n    \n    router;\n    budgetAccess=false;\n    actualAccess = false;\n    talentgroupAccess = false;\n    buhAccess = false;\n    headerVisible = false;\r\n    constructor(toastr, cache_obj, dialogService, Router) { //multiObserver\r\n        \r\n        this._cache_obj = cache_obj;\r\n        this.router = Router;\r\n\n        setTimeout(() => {\n           \n            \n            if (this._cache_obj.USER.ROLE_CD !== undefined)\n            {\n                //console.log(this._cache_obj.USER.ROLE_CD);\n                if (this._cache_obj.USER.ROLE_CD.includes('ACCESSALL')) {\n                    this.budgetAccess = true;\n                    this.talentgroupAccess = true;\n                    this.buhAccess = true;\n                    this.actualAccess = true;\n                    this.headerVisible = true;\n                }\n                \n                if (_.isEmpty(this._cache_obj._ACCESS))\n                {\n                  $.post(settings.serviceNameBase + \"/UserAccess/User_Access\", {\r\n                      \"USER_ID\": this._cache_obj.USER.USER_ID,\r\n                      \"HASH\": this._cache_obj.USER.HASH\r\n                  }).done((response) => {\n                      this._cache_obj._ACCESS = response;\n                      this.fnCheckAccess();\n                  });\n                }\n                else\n                {\n                    this.fnCheckAccess();\r\n                }\n\n                //else if (this._cache_obj.USER.ROLE_CD.includes('HR'))\n                //{\n                //    //this.budgetAccess = true;\n                //    this.router.navigateToRoute('mainview');\r\n                //}\n                //else if (this._cache_obj.USER.ROLE_CD.includes('PPFCS')) {\n                //    this.router.navigateToRoute('actual_cost'); return;\n                //    //this.actualAccess = true;\n                //    this.headerVisible = true;\r\n                //}\n                \r\n            }\n            \n        }, 1000);\n        \n\n        //if (this._cache_obj.OBSERVERS.loggedout.length==0)\r\n        //this._cache_obj.OBSERVERS.loggedout.push(() => {\n        //    this.logout();\r\n        //});\n\n        //if (this._cache_obj.OBSERVERS.loginPage.length == 0)\r\n        //    this._cache_obj.OBSERVERS.loginPage.push(() => {\n        //    //    alert(1);\r\n        //    this.fnLogin();\r\n        //});\n\n       \n\r\n        //initializeBreeze().then(() => {\r\n        //    //have to set timeout because of IE, other templates are not loading\r\n        //    // quickly and loading at same time with functions\r\n        //    setTimeout(() => {\n\n        //        var varCheckUser = checkCookie(\"PPMS_USER\");\r\n        //      //  console.log(varCheckUser);\r\n        //        if (varCheckUser == \"\" || varCheckUser == undefined || varCheckUser.indexOf('undefined') >= 0 || varCheckUser.split('^')[0] == \"\") {\n        //           // alert(0);\r\n        //            this.fnLogin();\r\n        //            this.loginDisabled = false;\r\n        //            this.logoutDisabled = true;\r\n        //            return;\r\n        //        }\r\n\r\n        //        this.fnInitMasterfiles(0, \"\");\r\n\r\n\r\n        //    }, 2000);\r\n        //});\r\n\r\n     \n\n\r\n        //this._cache_obj.OBSERVERS.logoutPage.push(() => {\r\n        //    this.logout();\r\n        //});\n\n       \r\n    }\n\n    fnCheckAccess()\n    {\n        \n        var filterMenu = ['PROGRAM BUDGET TEMPLATE', 'ACTUALS COST PROCESSING'];\n        var varFound = this._cache_obj._ACCESS.APPLICATION.filter(all => filterMenu.includes(all.APPLICATION_DESC));\n        if (varFound.length == 1)\n        {\n            if (varFound == 'PROGRAM BUDGET TEMPLATE')\n                this.router.navigateToRoute('mainview');\n            else\n                this.router.navigateToRoute('actual_cost');\r\n        }\n        else\n        {\n            this.budgetAccess = true;\n            this.talentgroupAccess = true;\n            this.buhAccess = true;\n            this.actualAccess = true;\n            this.headerVisible = true;\r\n        }\r\n    }\n\n    navigateTo(title)\n    {\n        //console.log(title);\n        this.router.navigateToRoute(title);\r\n    }\r\n\r\n    //fnInitMasterfiles(initType, output) {\r\n\r\n    //    if (this.masterFilesLoaded == false) {\n\r\n    //        this._toastr = toastr;\r\n    //        toastr.clear();\r\n    //        toastr.info(\"Masterfiles...\", \"Loading please wait..\", { timeOut: 15000 });\r\n    //        this.loginDisabled = true;\r\n    //        loadMasterfiles().then(() => {\r\n    //            loadLookups().then(() => {\r\n\r\n    //                this._cache_obj.OBSERVERS.init_modal.forEach((all) => {\r\n    //                    all();\r\n    //                });\r\n\r\n\r\n\r\n    //                this.masterFilesLoaded = true;\r\n\r\n    //                this.fnPassUserObject(initType, output);\r\n\r\n    //            });\r\n    //        });\r\n    //    }\r\n    //    else {\r\n    //        this.fnPassUserObject(initType, output);\r\n    //    }\r\n\r\n    //}\r\n\r\n    //fnPassUserObject(initType, output) {\r\n    //  //  console.log(initType);\r\n    //    if (initType == 1) {\r\n\r\n\r\n    //    } else {\r\n    //        var varCookie = checkCookie(\"PPMS_USER\");\n    //       // console.log(varCookie)\r\n    //        var varSplitCookie = varCookie.split('^');\r\n    //        this._user = {\r\n    //            USER_ID: varSplitCookie[0],\r\n    //            COMPANY_ID: varSplitCookie[1],\r\n    //            Is_HR: varSplitCookie[2],\r\n    //            Is_Branch: varSplitCookie[3],\n    //            EMPLOYEE_ID: varSplitCookie[4],\n    //            HASH: varSplitCookie[5],\n    //            EMAIL_ADDRESS: varSplitCookie[6],\r\n    //        };\r\n\r\n    //        this._cache_obj.USER = this._user;\r\n    //        console.log(this._cache_obj.USER);\r\n    //        this._cache_obj.OBSERVERS.login_passed.forEach((all) => {\r\n    //            all(this._user);\r\n    //        });\r\n\r\n    //        this.loginDisabled = true;\r\n    //        this.logoutDisabled = false;\r\n    //        this.showingLogout = \"visible\";\r\n    //        toastr.clear();\r\n    //        toastr.success(\"Let's Start...\", \"Success\");\n    //        this.showMenus = true;\r\n    //        return;\r\n    //    }\r\n\r\n    //    this.LoginPassed(output);\r\n    //    this._cache_obj.OBSERVERS.login_passed.forEach((all) => {\r\n    //        all(output);\r\n    //    });\r\n    //}\r\n\r\n\r\n    //// @handle('login.passed')\r\n    //LoginPassed(user) {\r\n\r\n    //    this._user = user;\n    //   // console.log(user);\r\n    //    // total 6 hours\r\n    //    //setCookie(\"PPMS_USER\", user.USER_ID + \"^\" + user.COMPANY_ID + \"^\" + user.Is_HR + \"^\" + user.Is_Branch, 30);\n    //    setCookie(\"PPMS_USER\", user.USER_ID + \"^\" + user.COMPANY_ID + \"^\" + user.Is_HR + \"^\"\r\n    //        + user.Is_Branch + \"^\" + user.EMPLOYEE_ID + \"^\" + user.HASH + \"^\" + user.EMAIL_ADDRESS, 30);\r\n\n        \r\n    //    toastr.clear();\r\n    //    toastr.success(\"Let's Start...\", \"Success\");\r\n\r\n    //    this.showMenus = true;\r\n    //    // this._cache_obj.OBSERVERS.close_modal.forEach((all) => {\r\n    //    //   all(this.modalLogin.id);\r\n    //    // });\r\n\r\n    //    this.loginDisabled = true;\r\n    //    this.logoutDisabled = false;\r\n    //    // this._cache_obj.OBSERVERS.enable_modal_button.forEach((all) => {\r\n    //    //   all(this.modalLogin.id, false);\r\n    //    // });\r\n\r\n\r\n    //    this.showingLogout = \"visible\";\r\n\r\n    //}\r\n\r\n    //logout() {\r\n    //    this.showMenus = false;\r\n      \r\n    //    // this._cache_obj.OBSERVERS.open_modal.forEach((all) => {\r\n    //    //   all(this.modalLogin.id, true);\r\n    //    // });\r\n    \r\n    //    this.fnLogin();\r\n    //    // this._cache_obj.OBSERVERS.enable_modal_button.forEach((all) => {\r\n    //    //   all(this.modalLogin.id, true);\r\n    //    // });\r\n\r\n    //    //this._cache_obj.OBSERVERS.loggedout.forEach((all) => {\r\n    //    //    all();\r\n    //    //});\r\n\r\n    //    this._cache_obj.OBSERVERS.clear_log.forEach((all) => {\r\n    //        all();\r\n    //    });\r\n\r\n    //    this._cache_obj.USER = {};\r\n    //    removeCookie();\r\n    //    this.showingLogout = \"hidden\";\r\n\r\n    //}\r\n\r\n\r\n    //fnLogin() {\n    //    this.showMenus = false;\r\n    //    this.dialogService.open({\r\n    //        viewModel: login\r\n    //    }).whenClosed(response => {\n    //        //response.closeResult((result) => {\n    //        //    console.log(result);\n    //        //});\r\n\r\n    //        if (!response.wasCancelled) {\r\n    //            this.fnInitMasterfiles(1, response.output);\r\n    //        } else {\r\n\r\n    //        }\r\n    //    });\r\n    //}\r\n}","import {inject} from 'aurelia-framework';\r\nimport {computedFrom,customElement} from 'aurelia-framework';\r\nimport {  objBudget } from 'objBudget';\r\nimport {initializeBreeze} from './entity-manager-factory';\r\nimport {loadMasterfiles, loadTables, loadLookups, getLookups} from './masterfiles';\r\nimport toastr from \"toastr\";\r\nimport {DialogService} from 'aurelia-dialog';\r\n// import  jquery from \"jquery\";\r\nimport {generateID} from './entity-manager-factory';\r\n//import {handle, Dispatcher} from 'aurelia-flux';  \r\nimport {checkCookie,setCookie,removeCookie} from './helpers';\r\nimport { MultiObserver }from 'multi-observer';\r\nimport { login } from 'modals/login';\r\nimport { Router } from 'aurelia-router';\r\nimport { EntityManager, EntityQuery } from './entity-manager-factory';\r\n\r\n//@customElement('main-header')\r\n@inject(toastr, objBudget, MultiObserver, DialogService, Router)\r\nexport class mainview {\r\n\r\n\r\n  router;\r\n  _toastr = null;\r\n  //_dispatcher;\r\n  showingLogout=\"hidden\";\r\n  _objBudget;\r\n  dialogService=null;\r\n  loginDisabled=true;\r\n  logoutDisabled=false;\r\n  masterFilesLoaded=false;\r\n  constructor(toastr, objBudget, multiObserver, dialogService, Router) {\r\n    //this.fnExecuteDatePicker();\r\n    //console.log(elem);\r\n    this._objBudget=objBudget;\r\n    this.router = Router;\r\n\r\n    if (EntityManager() === undefined) {\r\n        this.router.navigateToRoute('mainpage');\r\n        return;\r\n    }\r\n\r\n    // multiObserver.observe(\r\n    //   [\r\n    //     [this._objBudget.CALLER, 'ACTION'],[this._objBudget.CALLER, 'ACTION_CALLER']\r\n    //   ], (newValue, oldValue) => {\r\n\r\n    //     if (this._objBudget.CALLER.ACTION == '')\r\n    //       return;\r\n        \r\n    //     if(this._objBudget.CALLER.ACTION=='login.passed')\r\n    //     {\r\n    //         this.LoginPassed(this._objBudget.CALLER.ACTION,this._objBudget.CALLER.VALUE1);\r\n    //     }\r\n    //     else\r\n    //     {\r\n    //       return;\r\n    //     }\r\n\r\n    //     //this._objBudget.CALLER.ACTION='';\r\n    //   });\r\n\r\n\r\n    // this._objBudget.OBSERVERS.login_passed.push((val) => {\r\n    //   this.LoginPassed(val);\r\n    // });\r\n\r\n    \r\n    // this.modalLogin = {\r\n    //   title: 'LOG-IN',\r\n    //   content: 'modals/login',\r\n    //   value: \"\",\r\n    //   id: generateID(),\r\n    //   buttonTitle: \"LOG-IN\",\r\n    //   width:500\r\n    // };\r\n\r\n    //$('.datepicker').datepicker();\r\n\r\n    //this._dispatcher = Dispatcher;\r\n      \r\n    //this.fnPassUserObject(0, \"\");\r\n    \r\n    //initializeBreeze().then(() => {\r\n    //  //have to set timeout because of IE, other templates are not loading\r\n    //  // quickly and loading at same time with functions\r\n    //  setTimeout(() => {\r\n        \r\n    //    if (checkCookie(\"PPMS_USER\") == \"\" || checkCookie(\"PPMS_USER\")==undefined || checkCookie(\"PPMS_USER\").indexOf('undefined')>=0)\r\n    //    {\r\n    //        this.fnLogin();\r\n    //        this.loginDisabled=false;\r\n    //        this.logoutDisabled=true;\r\n    //        return;\r\n    //    }\r\n        \r\n    //    this.fnInitMasterfiles(0,\"\");\r\n\r\n\r\n    //  }, 2000);\r\n    //});\r\n\r\n      // $('a[data-toggle=\"tab\"]').on('shown.bs.tab', function(e) {\r\n      //         if($(e.target)[0].text==\"Regular\")\r\n      //         {\r\n      //           console.log(\"ok\");\r\n      //         }\r\n      //         // e.target // newly activated tab\r\n      //         // e.relatedTarget // previous active tab\r\n      //       });\r\n    this.dialogService=dialogService;\r\n    \r\n      if(this.dialogService.controllers.length>0)\r\n      {\r\n        for (var i = this.dialogService.controllers.length - 1; i >= 0; i--) {\r\n          this.dialogService.controllers[i].close();\r\n        }\r\n      }\r\n\r\n  }\r\n\r\n//  fnInitMasterfiles(initType,output){\r\n    \r\n//    if(this.masterFilesLoaded==false)\r\n//    {\r\n\r\n//          this._toastr = toastr;\r\n//          toastr.clear();\r\n//          toastr.info(\"Masterfiles...\", \"Loading please wait..\", { timeOut: 15000 });\r\n//          this.loginDisabled = true;\r\n//          loadMasterfiles().then(() => {\r\n//                loadLookups().then(() => {\r\n\r\n//                  this._objBudget.OBSERVERS.init_modal.forEach((all) => {\r\n//                    all();\r\n//                  });\r\n\r\n               \r\n                  \r\n//                  this.masterFilesLoaded = true;\r\n\r\n//                  this.fnPassUserObject(initType,output);\r\n\r\n//                });\r\n//            });\r\n//    }\r\n//    else\r\n//    {\r\n//        this.fnPassUserObject(initType,output);\r\n//    }\r\n\r\n//}\r\n\r\n  //fnPassUserObject(initType,output){\r\n      \r\n  //  if (initType == 1) {\r\n      \r\n\r\n  //  } else {\r\n  //    var varCookie = checkCookie(\"PPMS_USER\");\r\n  //    var varSplitCookie = varCookie.split('^');\r\n  //    this._user = {\r\n  //      USER_ID: varSplitCookie[0],\r\n  //      COMPANY_ID: varSplitCookie[1],\r\n  //      Is_HR: varSplitCookie[2],\r\n  //      Is_Branch: varSplitCookie[0]\r\n  //    };\r\n\r\n  //    this._objBudget.USER = this._user;\r\n\r\n  //    this._objBudget.OBSERVERS.login_passed.forEach((all) => {\r\n  //      all(this._user);\r\n  //    });\r\n\r\n  //    this.loginDisabled = true;\r\n  //    this.logoutDisabled = false;\r\n  //    this.showingLogout = \"visible\";\r\n  //    toastr.clear();\r\n  //    toastr.success(\"Let's Start...\", \"Success\");\r\n  //    return;\r\n  //  }\r\n\r\n  //  this.LoginPassed(output);\r\n  //    this._objBudget.OBSERVERS.login_passed.forEach((all) => {\r\n  //      all(output);\r\n  //    });\r\n  //}\r\n\r\n  clickTab(index){\r\n      if(index==0){\r\n\r\n      }\r\n      else if(index==1){\r\n\r\n          this._objBudget.OBSERVERS.refreshPersonnelTab.forEach((all) => {\r\n            all('REGULAR');\r\n          });\r\n\r\n          // this._objBudget.CALLER.VALUE1 = 'REGULAR';\r\n          // this._objBudget.CALLER.ACTION = 'refreshPersonnelTab';\r\n           //this._dispatcher.dispatch('refreshPersonnelTab','REGULAR');\r\n      }\r\n      else if(index==2){\r\n\r\n         this._objBudget.OBSERVERS.refreshPersonnelTab.forEach((all) => {\r\n            all('SEMI_REGULAR');\r\n          });\r\n            // this._objBudget.CALLER.VALUE1 = 'SEMI_REGULAR';\r\n            // this._objBudget.CALLER.ACTION = 'refreshPersonnelTab';\r\n           //this._dispatcher.dispatch('refreshPersonnelTab','SEMI_REGULAR');\r\n      }\r\n      else if(index==3){\r\n\r\n          this._objBudget.OBSERVERS.refreshPersonnelTab.forEach((all) => {\r\n            all('STAFF');\r\n          });\r\n\r\n            // this._objBudget.CALLER.VALUE1 = 'STAFF';\r\n            // this._objBudget.CALLER.ACTION = 'refreshPersonnelTab';\r\n           //this._dispatcher.dispatch('refreshPersonnelTab','STAFF');\r\n      }\r\n  }\r\n\r\n   // @handle('login.passed')\r\n    LoginPassed(user) {\r\n \r\n      this._user = user; \r\n      // total 6 hours\r\n      setCookie(\"PPMS_USER\", user.USER_ID+\"^\"+user.COMPANY_ID+\"^\"+user.Is_HR+\"^\"+user.Is_Branch, 30);\r\n      toastr.clear();\r\n      toastr.success(\"Let's Start...\", \"Success\");\r\n\r\n\r\n        // this._objBudget.OBSERVERS.close_modal.forEach((all) => {\r\n        //   all(this.modalLogin.id);\r\n        // });\r\n\r\n        this.loginDisabled=true;\r\n        this.logoutDisabled=false;\r\n        // this._objBudget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n        //   all(this.modalLogin.id, false);\r\n        // });\r\n\r\n    \r\n      this.showingLogout = \"visible\";\r\n\r\n    }\r\n\r\n    logout() {\r\n   \r\n        this.loginDisabled=false;\r\n        this.logoutDisabled=true;\r\n        // this._objBudget.OBSERVERS.open_modal.forEach((all) => {\r\n        //   all(this.modalLogin.id, true);\r\n        // });\r\n\r\n        this.fnLogin();\r\n        // this._objBudget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n        //   all(this.modalLogin.id, true);\r\n        // });\r\n\r\n        this._objBudget.OBSERVERS.loggedout.forEach((all) => {\r\n          all();\r\n        });\r\n\r\n        this._objBudget.OBSERVERS.clear_log.forEach((all) => {\r\n          all();\r\n        });\r\n\r\n        //this._objBudget.OBSERVERS.logoutPage.push(() => {\r\n        //    this.router.navigateToRoute('mainpage');\r\n        //});\r\n\r\n      this._objBudget.USER={};\r\n      removeCookie();\r\n      this.showingLogout = \"hidden\";\r\n\r\n    }\r\n\r\n\r\n    fnLogin() {\r\n        \r\n      this.dialogService.open({\r\n          viewModel: login\r\n      }).whenClosed(response => {\r\n          //response.closeResult((result) => {\r\n          //    console.log(result);\r\n          //});\r\n             \r\n        if (!response.wasCancelled) {\r\n           this.fnInitMasterfiles(1, response.output);\r\n        } else {\r\n          \r\n        }\r\n      });\r\n    }\r\n}","import {\r\n  EntityManager,EntityQuery\r\n}\r\nfrom './entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport breeze from 'breeze-client';\n\r\nvar globalIndiv = null;\r\nvar talentSuppComp = null;\r\nvar talentSuppIndiv = null;\r\nvar globalAlias = null;\r\nvar globalCompany=[];\r\nvar globalGrp = null;\r\nvar jobMstr;\r\nvar jobGrp;\r\nvar category;\r\nvar lookups = null;\r\nvar reference;\r\nvar entityNames = {\r\n  //PROGRAM_MSTR: \"PROGRAM_MSTR\",\r\n  IO_CC_MSTR: \"IO_CC_MSTR\",\r\n  GLOBAL_INDIV_MSTR: \"GLOBAL_INDIV_MSTR\",\r\n  //GLOBAL_MSTR: \"GLOBAL_MSTR\",\r\n  GLOBAL_ALIAS_TRX: \"GLOBAL_ALIAS_TRX\",\r\n  GLOBAL_COMPANY_MSTR: \"GLOBAL_COMPANY_MSTR\",\r\n  COMPANY_MSTR: \"COMPANY_MSTR\",\r\n  DIVISION_MSTR: \"DIVISION_MSTR\",\r\n  JOB_GRP_MSTR: \"JOB_GRP_MSTR\",\r\n  JOB_MSTR: \"JOB_MSTR\",\r\n  LOCATION_MSTR: \"LOCATION_MSTR\",\r\n  CATEGORY_MSTR: \"CATEGORY_MSTR\",\r\n  REFERENCE_CD_MSTR: \"REFERENCE_CD_MSTR\",\r\n  USER_PROFILE_MSTR: \"USER_PROFILE_MSTR\",\r\n  USER_ROLE_TRX: \"USER_ROLE_TRX\",\r\n  BDGT_TMPL_HDR: \"BDGT_TMPL_HDR\",\r\n  GRP_INDIV_MSTR: \"GRP_INDIV_MSTR\",\r\n  GLOBAL_GRP_MSTR: \"GLOBAL_GRP_MSTR\",\r\n  TALENT_SUPPLIER_COMP_MSTR: \"TALENT_SUPPLIER_COMP_MSTR\",\r\n  TALENT_SUPPLIER_INDIV_MSTR: \"TALENT_SUPPLIER_INDIV_MSTR\",\r\n  PROGRAM_GENRE_MSTR: \"PROGRAM_GENRE_MSTR\",\r\n  TELECAST_MODE_MSTR: \"TELECAST_MODE_MSTR\",\r\n  EPISODE_MODE_MSTR: \"EPISODE_MODE_MSTR\",\r\n  EPISODE_TYPE_MSTR: \"EPISODE_TYPE_MSTR\",\r\n  MODULE_ACCESS_TRX: \"MODULE_ACCESS_TRX\"\r\n  // ,\r\n  // PROGRAM_USER_TRX: \"PROGRAM_USER_TRX\"\r\n};\r\n\r\nexport function loadMasterfiles() {\r\n  try {\r\n    // getAliasTrx().then((a)=>{\r\n    //   console.log(a);\r\n\r\n    // });\r\n   if(lookups!=null) {\r\n      return new Promise((resolve)=>{ return resolve(true); });\r\n   }\r\n\r\n\r\n    return Promise.all([\r\n//      getPrograms(),\r\n      getGlobalIndiv(),\r\n      getTalentSupplierComp(),\r\n      getTalentSupplierIndiv(),\r\n      getAliasTrx(),\r\n      getGlobalGrp(),\r\n\r\n      //getIOCC(),\r\n      //getGlobalMstr(),\r\n      getGlobalCompany(),\r\n      getCompany(),\r\n      getCategory(),\r\n      getDivision(),\r\n      getReference(),\r\n      getJobGroup(),\r\n      getJob(),\r\n      getLocation(),\r\n      getUsers(),\r\n      getUserTrx(),\r\n      getBdgtHdr(),\r\n      getGrpIndiv(),\r\n\r\n      getProgramGenre(),\r\n      getTelecastMode(),\r\n      getEpisodeMode(),\r\n      getEpisodeType()\r\n      //getProgramUser()\r\n      //getModuleAccess()\r\n      ]);\r\n  } catch (e) {\r\n    Promise.resolve(false);\r\n  }\r\n}\r\n\r\nexport function fnLoadIndiv(){\r\n    //globalIndiv = getLocalSelect('GLOBAL_INDIV_MSTR', 'LAST_NAME', 'GLOBAL_INDIV_ID, LAST_NAME, GIVEN_NAME, MIDDLE_NAME', true);\r\n    //talentSuppComp =  getLocalSelect('TALENT_SUPPLIER_COMP_MSTR', 'COMPANY_NAME', 'SUPPLIER_COMP_GLOBAL_ID, COMPANY_NAME', true);\r\n    //talentSuppIndiv = getLocalSelect('TALENT_SUPPLIER_INDIV_MSTR', 'LAST_NAME', 'TALENT_SUPPLIER_INDIV_ID, LAST_NAME, GIVEN_NAME, MIDDLE_NAME', true);\r\n    //globalAlias = getLocalSelect('GLOBAL_ALIAS_TRX', 'ALIAS_NAME','GLOBAL_ALIAS_ID, GLOBAL_ID, ALIAS_NAME', true);\r\n    //globalGrp = getLocalSelect('GLOBAL_GRP_MSTR','GROUP_NAME', 'GLOBAL_GRP_ID, GROUP_NAME', true);\r\n    //jobMstr = getLocalSelect('JOB_MSTR', 'JOB_ID','JOB_ID, JOB_GRP_ID, JOB_DESC', true);\r\n    //jobGrp = getLocalSelect('JOB_GRP_MSTR', 'JOB_GRP_ID','JOB_GRP_ID, JOB_GRP_CD, JOB_GRP_DESC, COMPANY_ID', true);\r\n    //category = getLocalSelect('CATEGORY_MSTR', 'CATEGORY_ID','CATEGORY_ID, CATEGORY_CD, CATEGORY_DESC, COMPANY_ID', true);\r\n    //reference = getLocal('REFERENCE_CD_MSTR', 'REF_DESC', true);\r\n}\r\n\r\nexport function loadLookups() {\r\n\r\n   if(lookups!=null) {\r\n      return new Promise((resolve)=>{ return resolve(true); });\r\n   }\r\n\r\n\r\n  fnLoadIndiv();\r\n\r\n  return new Promise((resolve, reject) => {\r\n\r\n\r\n    lookups = {\r\n      //PROGRAM_MSTR: getLocal('PROGRAM_MSTR', 'PROGRAM_TITLE', true),\r\n      //IO_CC_MSTR: getLocal('IO_CC_MSTR', 'IO_DESC', true),\r\n      GLOBAL_INDIV_MSTR: globalIndiv,\r\n      TALENT_SUPPLIER_COMP_MSTR: talentSuppComp,\r\n      TALENT_SUPPLIER_INDIV_MSTR: talentSuppIndiv,\r\n      //GLOBAL_MSTR: getLocal('GLOBAL_MSTR', 'GLOBAL_ID', true),\r\n      GLOBAL_ALIAS_TRX: globalAlias,\r\n      GLOBAL_INDIV_WITH_ALIAS: getGLOBALINDIVandALIAS(),\r\n      JOB_GRP_CATEGORY: getJOB_GRP_CATEGORY(),\r\n      GLOBAL_COMPANY_MSTR: globalCompany,\r\n      COMPANY_MSTR: getLocal('COMPANY_MSTR', 'COMPANY_ID', true),\r\n      DIVISION_MSTR: getLocal('DIVISION_MSTR', 'DIVISION_NAME', true),\r\n      JOB_GRP_MSTR: jobGrp,\r\n      JOB_MSTR: jobMstr,\r\n      LOCATION_MSTR: getLocal('LOCATION_MSTR', 'LOCATION_DESC', true),\r\n      CATEGORY_MSTR: category,\r\n      REFERENCE_CD_MSTR: reference,\r\n      USER_PROFILE_MSTR: getLocal('USER_PROFILE_MSTR', 'USER_ID', true),\r\n      USER_ROLE_TRX: getLocal('USER_ROLE_TRX', 'USER_ID', true),\r\n      BDGT_TMPL_HDR: getLocal('BDGT_TMPL_HDR', 'BDGT_TMPL_ID', true),\r\n      GRP_INDIV_MSTR: getLocal('GRP_INDIV_MSTR', 'GRP_INDIV_ID', true),\r\n      GLOBAL_GRP_MSTR: globalGrp,//getLocal('GLOBAL_GRP_MSTR', 'GROUP_NAME', true),\r\n      PROGRAM_GENRE_MSTR: getLocal('PROGRAM_GENRE_MSTR', 'PROGRAM_GENRE_CD', true),\r\n      TELECAST_MODE_MSTR: getLocal('TELECAST_MODE_MSTR', 'TELECAST_MODE_CD', true),\r\n      EPISODE_MODE_MSTR: getLocal('EPISODE_MODE_MSTR', 'EPISODE_MODE_CD', true),\r\n      EPISODE_TYPE_MSTR: getLocal('EPISODE_TYPE_MSTR', 'EPISODE_TYPE_CD', true),\r\n      //PROGRAM_USER_TRX: getLocal('PROGRAM_USER_TRX', 'USER_ID', true),\r\n      PAYMENT_TERM: getPaymentTerm(),\r\n\r\n      //MODULE_ACCESS_TRX: getLocal('MODULE_ACCESS_TRX', 'MODULE_ACCESS_ID',true)\r\n\r\n    };\r\n\r\n    //Insert dummy Budget Header\r\n    var unchanged = breeze.EntityState.Unchanged;\r\n    var initialValues = {\r\n        'BDGT_TMPL_ID': 0,\r\n      };\r\n    EntityManager().createEntity(\"BDGT_TMPL_HDR\", initialValues, unchanged);\r\n\r\n    resolve(true);\r\n\r\n  });\r\n\r\n}\r\n\r\nexport function getJobByGlobalCompany(val)\r\n{\r\n\r\n        var varCheck = globalCompany.find((all) => all.GLOBAL_ID == val);\r\n        var varJob = {\r\n          JOB_ID: \"\",\r\n          JOB_DESC: \"\"\r\n        };\r\n\r\n        if (varCheck !== undefined) {\r\n\r\n          varJob.JOB_ID = varCheck.JOB_ID;\r\n\r\n          var varJOB_p = jobMstr.find((all) => all.JOB_ID == varJob.JOB_ID);\r\n\r\n          varJob.JOB_DESC = varJOB_p.JOB_DESC;\r\n\r\n          var varGrpCategory = getJOB_GRP_CATEGORY().find((all) => all.JOB_GRP_ID == varJOB_p.JOB_GRP_ID);\r\n          varJob.CATEGORY_ID = varGrpCategory.CATEGORY_ID;\r\n          varJob.CATEGORY_DESC = varGrpCategory.CATEGORY_DESC;\r\n          varJob.COMPANY_ID = varGrpCategory.COMPANY_ID;\r\n\r\n        }\r\n\r\n        return varJob;\r\n\r\n}\r\n\r\nexport function getJobByName(val)\r\n{\r\n\r\n        var varJOB_p = jobMstr.find((all) => all.JOB_DESC == val);\r\n\r\n        var varJob = {\r\n          JOB_ID: \"\",\r\n          JOB_DESC: \"\"\r\n        };\r\n\r\n        if (varJOB_p !== undefined) {\r\n\r\n          varJob.JOB_ID = varJOB_p.JOB_ID;\r\n\r\n          varJob.JOB_DESC = varJOB_p.JOB_DESC;\r\n\r\n          var varGrpCategory = getJOB_GRP_CATEGORY().find((all) => all.JOB_GRP_ID == varJOB_p.JOB_GRP_ID);\r\n          varJob.CATEGORY_ID = varGrpCategory.CATEGORY_ID;\r\n          varJob.CATEGORY_DESC = varGrpCategory.CATEGORY_DESC;\r\n          varJob.COMPANY_ID = varGrpCategory.COMPANY_ID;\r\n\r\n        }\r\n\r\n        return varJob;\r\n\r\n}\r\n\r\nexport function getLookups() {\r\n  return lookups;\r\n}\r\n\r\n// export function getPrograms() {\r\n//   var query = EntityQuery().from('PROGRAM_MSTR')\r\n//   return EntityManager().executeQuery(query).then(function() {\r\n//     processLookups(entityNames.PROGRAM_MSTR, {\r\n//       'PROGRAM_ID': 0, //breeze.core.getUuid()\r\n//       'PROGRAM_TITLE': ' [SELECT A VALUE]'\r\n//     });\r\n//   }, queryFailed);\r\n\r\n\r\n//   /*return EntityQuery().from('PROGRAM_MSTR')\r\n//     .using(EntityManager()).execute()\r\n//     .then(\r\n//       function() {\r\n//         processLookups(entityNames.PROGRAM_MSTR, {\r\n//           'PROGRAM_ID': 0, //breeze.core.getUuid()\r\n//           'PROGRAM_TITLE': '[SELECT A VALUE]'\r\n//         });\r\n//       }, queryFailed);*/\r\n// }\r\n\r\nexport function getPaymentTerm(){\r\n  var paymentterm=[];\r\n  reference.forEach((ref) => {\r\n          if (ref.REF_GRP_CD == 'PYMNT_TERM_CD') {\r\n            paymentterm.push(ref);\r\n          }\r\n        });\r\n  return paymentterm;\r\n}\r\n\r\n\r\nexport function getGLOBALINDIVandALIAS(){\r\n\r\n  var varTmpObject=[];\r\n  var varGlobalAlias = globalAlias;\r\n  var varGlobalIndiv = globalIndiv ;\r\n  var varTalentComp = talentSuppComp;\r\n  var varTalentSuppIndiv = talentSuppIndiv;\r\n  var varGlobalGrp = globalGrp;\r\n\r\n  varGlobalIndiv.forEach((all) => {\r\n//    console.log(varGlobalIndiv);\r\n    var varAlias = \"\";\r\n    if (all.ALIAS != \"\" && all.ALIAS != null) {\r\n      varAlias = \"(\" + all.ALIAS;\r\n    }\r\n\r\n    var varFoundAlias=varGlobalAlias.find(item=>item.GLOBAL_ID==all.GLOBAL_INDIV_ID);\r\n\r\n    if(varFoundAlias!==undefined)\r\n    if (varAlias == \"\")\r\n      varAlias = \"(\" + varFoundAlias.ALIAS_NAME;\r\n    else if (varAlias == \"(\")\r\n      varAlias = varFoundAlias.ALIAS_NAME;\r\n    else\r\n      varAlias += \",\" + varFoundAlias.ALIAS_NAME;\r\n\r\n    if (varAlias != \"\") {\r\n      varAlias += \")\";\r\n    }\r\n\r\n    varTmpObject.push({\r\n      PERSONNEL_NAME: (all.LAST_NAME + ', ' + all.GIVEN_NAME + ' ' + all.MIDDLE_NAME + varAlias).toUpperCase(),\r\n      GLOBAL_INDIV_ID: all.GLOBAL_INDIV_ID,\r\n      PERSONNEL_INFO_SRC: 'INDIV'\r\n    });\r\n\r\n  });\r\n\r\n\r\n  varTalentSuppIndiv.forEach((all) => {\r\n\r\n    var varAlias = \"\";\r\n    if (all.ALIAS != \"\" && all.ALIAS != null) {\r\n      varAlias = \"(\" + all.ALIAS;\r\n    }\r\n\r\n    var varFoundAlias = varGlobalAlias.find(item => item.GLOBAL_ID == all.SUPPLIER_INDIV_GLOBAL_ID);\r\n\r\n    if(varFoundAlias!==undefined)\r\n    if (varAlias == \"\")\r\n      varAlias = \"(\" + varFoundAlias.ALIAS_NAME;\r\n    else if (varAlias == \"(\")\r\n      varAlias = varFoundAlias.ALIAS_NAME;\r\n    else\r\n      varAlias += \",\" + varFoundAlias.ALIAS_NAME;\r\n\r\n    if (varAlias != \"\") {\r\n      varAlias += \")\";\r\n    }\r\n\r\n\r\n    varTmpObject.push({\r\n      PERSONNEL_NAME: (all.LAST_NAME + ', ' + all.GIVEN_NAME + ' ' + all.MIDDLE_NAME + varAlias).toUpperCase(),\r\n      GLOBAL_INDIV_ID: all.SUPPLIER_INDIV_GLOBAL_ID,\r\n      PERSONNEL_INFO_SRC: 'TSUPPLIER'\r\n    });\r\n\r\n  });\r\n\r\n\r\n  varTalentComp.forEach((all) => {\r\n    varTmpObject.push({\r\n      PERSONNEL_NAME: all.COMPANY_NAME.toUpperCase(),\r\n      GLOBAL_INDIV_ID: all.SUPPLIER_COMP_GLOBAL_ID,\r\n      PERSONNEL_INFO_SRC: 'TCOMP'\r\n    });\r\n\r\n  });\r\n\r\n\r\n varGlobalGrp.forEach((all) => {\r\n    varTmpObject.push({\r\n      PERSONNEL_NAME: all.GROUP_NAME.toUpperCase(),\r\n      GLOBAL_INDIV_ID: all.GLOBAL_GRP_ID,\r\n      PERSONNEL_INFO_SRC: 'GLGRP'\r\n    });\r\n\r\n  });\r\n\r\n\r\n\r\n      return varTmpObject;\r\n\r\n}\r\n\r\n\r\n\r\nexport function getJOB_GRP_CATEGORY(){\r\n\r\n  var varTmpObject=[];\r\n  var p_jobMstr = jobMstr;\r\n  var p_jobGrp = jobGrp;\r\n  var p_category = category;\r\n\r\n  // console.log(p_jobMstr);\r\n  // console.log(p_jobGrp);\r\n\r\n  p_jobMstr.forEach((all) => {\r\n    //console.log(all);\r\n    var varFindGrp = p_jobGrp.find((allGrp)=>allGrp.JOB_GRP_ID==all.JOB_GRP_ID);\r\n    // console.log(varFindGrp);\r\n    varTmpObject.push({\r\n      JOB_ID: all.JOB_ID,\r\n      JOB_GRP_ID: varFindGrp.JOB_GRP_ID,\r\n      JOB_GRP_CD: varFindGrp.JOB_GRP_CD,\r\n      JOB_GRP_DESC: (varFindGrp!==undefined?varFindGrp.JOB_GRP_DESC:\"\"),\r\n      CATEGORY_ID: \"\",\r\n      CATEGORY_CD: \"\",\r\n      CATEGORY_DESC: \"\",\r\n      COMPANY_ID: varFindGrp.COMPANY_ID,\r\n      JOB_DESC: all.JOB_DESC\r\n    });\r\n\r\n  });\r\n\r\n\r\n  varTmpObject.forEach((all) => {\r\n\r\n      var varFindCategory = p_category.find((allCategory) => allCategory.CATEGORY_CD == all.JOB_GRP_CD && allCategory.COMPANY_ID == all.COMPANY_ID);\r\n      //console.log(varFindCategory);\r\n    if (varFindCategory !== undefined) {\r\n      all.CATEGORY_CD = varFindCategory.CATEGORY_CD;\r\n      all.CATEGORY_ID = varFindCategory.CATEGORY_ID;\r\n      all.CATEGORY_DESC = varFindCategory.CATEGORY_DESC;\r\n    }\r\n\r\n  });\r\n\r\n      return varTmpObject;\r\n\r\n}\r\n\r\n// export function getModuleAccess() {\r\n//   return EntityQuery().from('MODULE_ACCESS_TRX').expand(\"MODULE_MSTR\")\r\n//     .using(EntityManager()).execute()\r\n//     .then(\r\n//       ()=>{\r\n\r\n//       }, queryFailed);\r\n// }\r\n\r\n\r\nexport function getProgramGenre() {\r\n  return EntityQuery().from('PROGRAM_GENRE_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      ()=>{}, queryFailed);\r\n}\r\n\r\nexport function getTelecastMode() {\r\n  return EntityQuery().from('TELECAST_MODE_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      ()=>{}, queryFailed);\r\n}\r\n\r\nexport function getEpisodeMode() {\r\n  return EntityQuery().from('EPISODE_MODE_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      ()=>{}, queryFailed);\r\n}\r\n\r\nexport function getEpisodeType() {\r\n  return EntityQuery().from('EPISODE_TYPE_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      ()=>{}, queryFailed);\r\n}\r\n\r\n\r\n// export function getProgramUser() {\r\n//   return EntityQuery().from('PROGRAM_USER_TRX')\r\n//     .using(EntityManager()).execute()\r\n//     .then(\r\n//       ()=>{}, queryFailed);\r\n// }\r\n\r\n\r\n\r\nexport function getTalentSupplierComp() {\r\n  // return EntityQuery().from('TALENT_SUPPLIER_COMP_MSTR').select('TALENT_SUPPLIER_COMP_MSTR', 'COMPANY_NAME', 'SUPPLIER_COMP_GLOBAL_ID, COMPANY_NAME')\r\n  //   .using(EntityManager()).execute()\r\n  //   .then(\r\n  //     ()=>{}, queryFailed);\r\n\r\n    // var _query = EntityQuery().from('TALENT_SUPPLIER_COMP_MSTR').select('TALENT_SUPPLIER_COMP_MSTR', 'COMPANY_NAME', 'SUPPLIER_COMP_GLOBAL_ID, COMPANY_NAME');\r\n    //   EntityManager().executeQuery(_query).then((success) => {\r\n    //       console.log(success);\r\n    //   });\r\n\r\n     return new Promise((resolve)=>{\r\n      EntityQuery().from('TALENT_SUPPLIER_COMP_MSTR').select('COMPANY_NAME', 'SUPPLIER_COMP_GLOBAL_ID, COMPANY_NAME')\r\n     .using(EntityManager()).execute()\r\n     .then((success)=>{\r\n      talentSuppComp = success.results;\r\n      resolve(true);\r\n    });\r\n\r\n   });\r\n\r\n}\r\n\r\n\r\nexport function getTalentSupplierIndiv() {\r\n  // return EntityQuery().from('TALENT_SUPPLIER_INDIV_MSTR')\r\n  //   .using(EntityManager()).execute()\r\n  //   .then(\r\n  //     ()=>{}, queryFailed);\r\n  //\r\n\r\n\r\n    return new Promise((resolve)=>{\r\n      EntityQuery().from('TALENT_SUPPLIER_INDIV_MSTR').select('LAST_NAME', 'TALENT_SUPPLIER_INDIV_ID, LAST_NAME, GIVEN_NAME, MIDDLE_NAME')\r\n     .using(EntityManager()).execute()\r\n     .then((success)=>{\r\n      talentSuppIndiv = success.results;\r\n      resolve(true);\r\n    });\r\n\r\n   });\r\n\r\n}\r\n\r\n\r\n\r\nexport function getGlobalGrp() {\r\n\r\n  // return EntityQuery().from('GLOBAL_GRP_MSTR').select('GLOBAL_GRP_ID, GROUP_NAME')\r\n  //   .using(EntityManager()).execute()\r\n  //   .then(\r\n  //     ()=>{}, queryFailed);\r\n   return new Promise((resolve)=>{\r\n      EntityQuery().from('GLOBAL_GRP_MSTR').select('GLOBAL_GRP_ID, GROUP_NAME')\r\n     .using(EntityManager()).execute()\r\n     .then((success)=>{\r\n      globalGrp = success.results;\r\n      resolve(true);\r\n    });\r\n\r\n   });\r\n}\r\n\r\n\r\nexport function getGrpIndiv() {\r\n  return EntityQuery().from('GRP_INDIV_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      ()=>{}, queryFailed);\r\n}\r\n\r\n\r\nexport function getBdgtHdr() {\r\n  return EntityQuery().from('BDGT_TMPL_HDR').take(1)\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      ()=>{}, queryFailed);\r\n}\r\n\r\nexport function getIOCC() {\r\n  return EntityQuery().from('IO_CC_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      function() {\r\n        processLookups(entityNames.IO_CC_MSTR, {\r\n          'CHARGE_CD': breeze.core.getUuid(),\r\n          'IO_DESC': '[SELECT A VALUE]'\r\n        });\r\n\r\n      }, queryFailed);\r\n}\r\n\r\nexport function getGlobalIndiv() {\r\n return new Promise((resolve)=>{\r\n   EntityQuery().from('GLOBAL_INDIV_MSTR').select('GLOBAL_INDIV_ID,GIVEN_NAME,MIDDLE_NAME,LAST_NAME')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    globalIndiv = success.results;\r\n    resolve(true);\r\n  });\r\n\r\n });\r\n\r\n}\r\n\r\n// export function getGlobalMstr() {\r\n//   return EntityQuery().from('GLOBAL_MSTR')\r\n//     .using(EntityManager()).execute();\r\n// }\r\nexport function getAliasTrx() {\r\n  // return EntityQuery().from('GLOBAL_ALIAS_TRX')\r\n  //   .using(EntityManager()).execute();\r\n\r\n  //globalAlias\r\n//'GLOBAL_GRP_MSTR','GROUP_NAME', 'GLOBAL_GRP_ID, GROUP_NAME'\r\n\r\nreturn new Promise((resolve)=>{\r\n   EntityQuery().from('GLOBAL_ALIAS_TRX').select('GLOBAL_ALIAS_ID','ALIAS_NAME', 'GLOBAL_ID')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    globalAlias = success.results;\r\n    resolve(true);\r\n  });\r\n\r\n });\r\n\r\n}\r\nexport function getGlobalCompany() {\r\n\r\nreturn new Promise((resolve)=>{\r\n   EntityQuery().from('GLOBAL_COMPANY_MSTR').select('GLOBAL_COMPANY_ID, GLOBAL_ID, JOB_ID, COMPANY_ID, STATUS_CD')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    globalCompany = success.results;\r\n    resolve(true);\r\n  });\r\n\r\n });\r\n\r\n  // return EntityQuery().from('GLOBAL_COMPANY_MSTR').select('GLOBAL_COMPANY_ID, GLOBAL_ID, JOB_ID, COMPANY_ID')\r\n  //   .using(EntityManager()).execute();\r\n}\r\nexport function getCompany() {\r\n  var query = EntityQuery().from('COMPANY_MSTR')\r\n  return EntityManager().executeQuery(query).then(function() {\r\n    processLookups(entityNames.COMPANY_MSTR, {\r\n      'COMPANY_ID': 0, //breeze.core.getUuid()\r\n      'COMPANY_NAME': ' [SELECT A VALUE]'\r\n    });\r\n  }, queryFailed);\r\n\r\n\r\n  /*return EntityQuery().from('PROGRAM_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      function() {\r\n        processLookups(entityNames.PROGRAM_MSTR, {\r\n          'PROGRAM_ID': 0, //breeze.core.getUuid()\r\n          'PROGRAM_TITLE': '[SELECT A VALUE]'\r\n        });\r\n      }, queryFailed);*/\r\n}\r\nexport function getCategory() {\r\n\r\n  // var query = EntityQuery().from('CATEGORY_MSTR')\r\n  // return EntityManager().executeQuery(query).then(function() {\r\n  //   processLookups(entityNames.CATEGORY_MSTR, {\r\n  //     'CATEGORY_ID': 0, //breeze.core.getUuid()\r\n  //     'CATEGORY_DESC': ' [SELECT A VALUE]'\r\n  //   });\r\n  // }, queryFailed);\r\n\r\n\r\nreturn new Promise((resolve)=>{\r\n   EntityQuery().from('CATEGORY_MSTR')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    category = success.results;\r\n    category.push({ 'CATEGORY_ID': 0,\r\n    'CATEGORY_DESC': ' [SELECT A VALUE]'});\r\n    resolve(true);\r\n  });\r\n\r\n });\r\n\r\n}\r\nexport function getDivision() {\r\n  var query = EntityQuery().from('DIVISION_MSTR');//.select('DIVISION_ID,DIVISION_CD,DIVISION_NAME')\r\n  return EntityManager().executeQuery(query).then(function() {\r\n    processLookups(entityNames.DIVISION_MSTR, {\r\n      'DIVISION_ID': 0, //breeze.core.getUuid()\r\n      'DIVISION_NAME': ' [SELECT A VALUE]'\r\n    });\r\n  }, queryFailed);\r\n}\r\nexport function getReference() {\r\n\r\n  // var query = EntityQuery().from('REFERENCE_CD_MSTR');//.select('REF_CD,REF_GRP_CD,REF_DESC')\r\n  // return EntityManager().executeQuery(query).then(function() {\r\n  //   processLookups(entityNames.REFERENCE_CD_MSTR, {\r\n  //     'REF_CD': breeze.core.getUuid(),\r\n  //     'REF_DESC': ' [SELECT A VALUE]',\r\n  //     'REF_GRP_CD': breeze.core.getUuid()\r\n  //   });\r\n  // }, queryFailed);\r\n\r\n\r\n\r\n    return new Promise((resolve)=>{\r\n   EntityQuery().from('REFERENCE_CD_MSTR').select('REF_CD,REF_GRP_CD,REF_DESC')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    reference = success.results;\r\n   // jobGrp.push({ 'REF_CD': breeze.core.getUuid(), 'REF_DESC':' [SELECT A VALUE]','REF_GRP_CD':breeze.core.getUuid()});\r\n    resolve(true);\r\n  });\r\n});\r\n\r\n\r\n}\r\nexport function getJobGroup() {\r\n  // var query = EntityQuery().from('JOB_GRP_MSTR');//.select('JOB_GRP_ID, JOB_GRP_CD, JOB_GRP_DESC');\r\n  // return EntityManager().executeQuery(query).then(function() {\r\n  //   processLookups(entityNames.JOB_GRP_MSTR, {\r\n  //     'JOB_GRP_ID': 0, //breeze.core.getUuid()\r\n  //     'JOB_GRP_DESC': ' [SELECT A VALUE]'\r\n  //   });\r\n  // }, queryFailed);\r\n\r\n    return new Promise((resolve)=>{\r\n   EntityQuery().from('JOB_GRP_MSTR').select('JOB_GRP_ID, JOB_GRP_CD, JOB_GRP_DESC, COMPANY_ID')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    jobGrp = success.results;\r\n    //jobGrp.push({ 'JOB_GRP_ID': 0, 'JOB_GRP_DESC':' [SELECT A VALUE]'});\r\n    resolve(true);\r\n  });\r\n});\r\n}\r\n\r\nexport function getJob() {\r\n\r\n  return new Promise((resolve)=>{\r\n   EntityQuery().from('JOB_MSTR').select('JOB_ID, JOB_GRP_ID, JOB_DESC')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    jobMstr = success.results;\r\n    //jobMstr.push({ 'JOB_ID': 0, 'JOB_DESC':' [SELECT A VALUE]'});\r\n    resolve(true);\r\n  });\r\n\r\n });\r\n\r\n  // var query = EntityQuery().from('JOB_MSTR');//.select('JOB_ID, JOB_GRP_ID, JOB_DESC');\r\n  // return EntityManager().executeQuery(query).then(function(success) {\r\n\r\n  //     //EntityManager().createEntity(entityNames.JOB_MSTR, {},null);\r\n  //  // console.log(success);\r\n  //   // processLookups(entityNames.JOB_MSTR, {\r\n  //   //   'JOB_ID': 0, //breeze.core.getUuid()\r\n  //   //   'JOB_DESC': ' [SELECT A VALUE]'\r\n  //   // });\r\n  // }, queryFailed);\r\n\r\n\r\n}\r\nexport function getLocation() {\r\n  var query = EntityQuery().from('LOCATION_MSTR')\r\n  return EntityManager().executeQuery(query).then(function() {\r\n    processLookups(entityNames.LOCATION_MSTR, {\r\n      'LOCATION_CD': breeze.core.getUuid(),\r\n      'LOCATION_DESC': ' [SELECT A VALUE]'\r\n    });\r\n  }, queryFailed);\r\n}\r\n\r\nexport function getUsers() {\r\n  var query = EntityQuery().from('USER_PROFILE_MSTR');//.select('USER_ID,COMPANY_ID,EMPLOYEE_ID')\r\n  return EntityManager().executeQuery(query).then(function() {\r\n    processLookups(entityNames.USER_PROFILE_MSTR, {\r\n      'USER_ID': '[SELECT A USER]'\r\n    });\r\n  }, queryFailed);\r\n}\r\n\r\n\r\nexport function getUserTrx() {\r\n  var query = EntityQuery().from('USER_ROLE_TRX')\r\n  return EntityManager().executeQuery(query).then(function() {\r\n    processLookups(entityNames.USER_ROLE_TRX, {\r\n      'USER_ID': ''\r\n    });\r\n  }, queryFailed);\r\n}\r\n\r\nfunction getLocalSelect(resource, ordering, select, includeNullos) {\r\n\r\n  var query = EntityQuery().from(resource).select(select).orderBy(ordering); //.using(breeze.FetchStrategy.FromLocalCache);\r\n\r\n  return EntityManager().executeQueryLocally(query);\r\n}\r\n\r\n\r\nfunction getLocal(resource, ordering, includeNullos) {\r\n\r\n  var query = EntityQuery().from(resource).orderBy(ordering); //.using(breeze.FetchStrategy.FromLocalCache);\r\n\r\n  return EntityManager().executeQueryLocally(query);\r\n}\r\n\r\nfunction processLookups(objName, blankValue) {\r\n  //you commented it to remove inserting initial value on index 0\r\n  createNullos(EntityManager(), objName, blankValue);\r\n}\r\n\r\nfunction createNullos(manager, objName, blankValue) {\r\n\r\n  var unchanged = breeze.EntityState.Unchanged;\r\n\r\n  createNullo(manager, objName, blankValue, unchanged);\r\n\r\n}\r\n\r\nfunction createNullo(manager, entityName, values, unchanged) {\r\n  var initialValues = values || {}; //nAME: ' [ SELECT A VALUE]'\r\n  return manager.createEntity(entityName, initialValues, unchanged);\r\n\r\n}\r\n\r\nfunction queryFailed(jqXHR, textStatus) {\r\n  var msg = 'Error retrieving data ' + textStatus;\r\n  toastr.error(msg, \"Exception occured..\")\r\n\r\n  // loggerToastProvider.logError(msg, jqXHR, system.getModuleId, datacontext);\r\n}\r\n","import {ObserverLocator} from 'aurelia-framework'; // or 'aurelia-binding'\r\n\r\nexport class MultiObserver {  \r\n    static inject() { return [ObserverLocator]; }\r\n    constructor(observerLocator) {\r\n        this.observerLocator = observerLocator;\r\n    }\r\n\r\n    observe(properties, callback) {\r\n        var subscriptions = [],\r\n            i = properties.length,\r\n            object, propertyName;\r\n\r\n        while (i--) {\r\n            object = properties[i][0];\r\n            propertyName = properties[i][1];\r\n\r\n            subscriptions.push(this.observerLocator.getObserver(object, propertyName).subscribe(callback));\r\n        }\r\n\r\n        // return dispose function\r\n        return () => {\r\n            while (subscriptions.length) {\r\n                subscriptions.pop();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}","import {bindable} from 'aurelia-framework';\nimport { cache_obj } from 'cache_obj';\nimport { inject } from 'aurelia-framework';\nimport { Router } from 'aurelia-router';\nimport { checkCookie, setCookie, removeCookie, getCookie } from './helpers';\nimport { initializeBreeze } from './entity-manager-factory';\nimport toastr from \"toastr\";\nimport { login } from 'modals/login';\nimport { change_password } from 'modals/change_password';\nimport { DialogService } from 'aurelia-dialog';\nimport { loadMasterfiles, loadTables, loadLookups, getLookups } from './masterfiles';\nimport settings from './settings';\n\n\n@inject(cache_obj, Router, DialogService)\nexport class NavBar {\n    @bindable router = null;\n    _cache_obj;\n    router;\n    masterFilesLoaded = false;\n    constructor(cache_obj, Router, DialogService)\n    {\n        this.router = Router;\n        this._cache_obj = cache_obj;\n        \r\n        this.dialogService = DialogService;\r\n        this.settings = settings;\n      \n        //initializeBreeze().then(() => {\r\n        //    //have to set timeout because of IE, other templates are not loading\r\n        //    // quickly and loading at same time with functions\r\n        //    setTimeout(() => {\n\n        //        var varCheckUser = checkCookie(\"PPMS_USER\");\n\n        //        if (this.router.currentInstruction.config.name != \"mainpage\" && (varCheckUser == \"\" || varCheckUser == undefined || varCheckUser.indexOf('undefined') >= 0 || varCheckUser.split('^')[0] == \"\")) {\n        //            this.router.navigateToRoute('mainpage');\r\n        //        }\n        //        else {\n        //            var varCookie = checkCookie(\"PPMS_USER\");\n        //            var varSplitCookie = varCookie.split('^');\r\n        //            var _user = {\r\n        //                USER_ID: varSplitCookie[0],\r\n        //                COMPANY_ID: varSplitCookie[1],\r\n        //                Is_HR: varSplitCookie[2],\r\n        //                Is_Branch: varSplitCookie[3],\n        //                EMPLOYEE_ID: varSplitCookie[4],\n        //                HASH: varSplitCookie[5],\n        //                EMAIL_ADDRESS: varSplitCookie[6],\r\n        //            };\r\n\r\n        //            this._cache_obj.USER = _user;\r\n        //        }\r\n\r\n        //    }, 2000);\r\n        //});\n\n       initializeBreeze().then(() => {\r\n            //have to set timeout because of IE, other templates are not loading\r\n            // quickly and loading at same time with functions\r\n            setTimeout(() => {\n                this.router.navigateToRoute('blankpage');\n                var varCheckUser = checkCookie(\"PPMS_USER\");\n                //console.log(varCheckUser);\n                //this.router.currentInstruction.config.name != \"blankpage\" && \n                if ((varCheckUser == \"\" || varCheckUser == undefined || varCheckUser.indexOf('undefined') >= 0 || varCheckUser.split('^')[0] == \"\")) {\n                    this.fnLogin();\n                    return;\r\n                }\n                else {\n                    var varCookie = checkCookie(\"PPMS_USER\");\n                    var varSplitCookie = varCookie.split('^');\r\n                    var _user = {\r\n                        USER_ID: varSplitCookie[0],\r\n                        COMPANY_ID: varSplitCookie[1],\r\n                        Is_HR: varSplitCookie[2],\r\n                        Is_Branch: varSplitCookie[3],\n                        EMPLOYEE_ID: varSplitCookie[4],\n                        HASH: varSplitCookie[5],\n                        EMAIL_ADDRESS: varSplitCookie[6],\r\n                    };\r\n\r\n                    this._cache_obj.USER = _user;\r\n                }\n\r\n                this.fnInitMasterfiles(0, \"\");\r\n\r\n\r\n            }, 2000);\r\n        });\r\n\r\n    }\n\n    fnInitMasterfiles(initType, output) {\r\n\r\n        if (this.masterFilesLoaded == false) {\n            settings.isNavigating = true;\r\n            this._toastr = toastr;\r\n            toastr.clear();\r\n            toastr.info(\"Masterfiles...\", \"Loading please wait..\", { timeOut: 15000 });\r\n          \r\n            loadMasterfiles().then(() => {\r\n                loadLookups().then(() => {\r\n\r\n                    //this._cache_obj.OBSERVERS.init_modal.forEach((all) => {\r\n                    //    all();\r\n                    //});\r\n\r\n\r\n\r\n                    this.masterFilesLoaded = true;\r\n\r\n                    this.fnPassUserObject(initType, output);\r\n\r\n                });\r\n            });\r\n        }\r\n        else {\r\n            this.fnPassUserObject(initType, output);\r\n        }\r\n\r\n    }\r\n\r\n    fnPassUserObject(initType, output) {\r\n        \r\n        if (initType == 1) {\r\n\r\n\r\n        } else {\r\n            var varCookie = checkCookie(\"PPMS_USER\");\n\n            \n\r\n            var varSplitCookie = varCookie.split('^');\r\n            this._user = {\r\n                USER_ID: varSplitCookie[0],\r\n                COMPANY_ID: varSplitCookie[1],\r\n                Is_HR: varSplitCookie[2],\r\n                Is_Branch: varSplitCookie[3],\n                EMPLOYEE_ID: varSplitCookie[4],\n                HASH: varSplitCookie[5],\n                EMAIL_ADDRESS: varSplitCookie[6],\n                ROLE_CD: varSplitCookie[7]\r\n            };\r\n\r\n            this._cache_obj.USER = this._user;\r\n            \r\n            toastr.clear();\r\n            toastr.success(\"Let's Start...\", \"Success\");\n            settings.isNavigating = false;\n            if (this.router.currentInstruction.config.name == \"blankpage\")\n            {\n                this.router.navigateToRoute('mainpage');\r\n            }\n\n      \n\r\n            return;\r\n        }\r\n\r\n        this.LoginPassed(output);\r\n     \r\n    }\r\n\r\n\r\n    // @handle('login.passed')\r\n    LoginPassed(user) {\r\n\r\n        this._user = user;\n        //console.log(user);\n        setCookie(\"PPMS_USER\", user.USER_ID + \"^\" + user.COMPANY_ID + \"^\" + user.Is_HR + \"^\"\r\n            + user.Is_Branch + \"^\" + user.EMPLOYEE_ID + \"^\" + user.HASH + \"^\" + user.EMAIL_ADDRESS + \"^\" + user.ROLE_CD, 30);\r\n        settings.isNavigating = false;\n\n       \n        \n      //  console.log(checkCookie(\"PPMS_USER\"));\r\n        toastr.clear();\r\n        toastr.success(\"Let's Start...\", \"Success\");\r\n\r\n        if (this.router.currentInstruction.config.name == \"blankpage\") {\n            this.router.navigateToRoute('mainpage');\r\n        }\r\n    }\r\n\n    logout() {\n      \n        if (this.router.currentInstruction.config.name != \"blankpage\")\n            this.router.navigateToRoute('blankpage');\n        else\r\n            this._cache_obj.OBSERVERS.loggedout.forEach((all) => {\r\n                all();\r\n            });\r\n\r\n        this._cache_obj.OBSERVERS.clear_log.forEach((all) => {\r\n            all();\r\n        });\r\n\r\n        this._cache_obj.USER = {};\n        this._cache_obj._ACCESS = {};\n\n   \r\n        removeCookie();\r\n\n        this.fnLogin();\n       \r\n        \r\n    }\n\n\n    home()\n    {\n        this.router.navigateToRoute('mainpage');\r\n    }\n    \n\n\r\n    fnLogin() {\n\r\n        if (this.dialogService.controllers.length > 0) {\r\n            for (var i = this.dialogService.controllers.length - 1; i >= 0; i--) {\r\n                this.dialogService.controllers[i].close();\r\n            }\r\n        }\r\n\n     \r\n        this.dialogService.open({\r\n            viewModel: login, keyboard: false, overlayDismiss: false, lock:true\r\n        }).whenClosed(response => {\n           \r\n            if (!response.wasCancelled) {\r\n                this.fnInitMasterfiles(1, response.output);\r\n            } else {\r\n                toastr.clear();\r\n                toastr.info(\"Please Login...\", \"You cannot continue ..\", { timeOut: 15000 });\n                this.fnLogin();\r\n            }\r\n        });\r\n    }\n\n    changePassword()\n    {\n        this.dialogService.open({\r\n            viewModel: change_password\r\n        }).whenClosed(response => {\n\r\n            if (!response.wasCancelled) {\r\n                \r\n            } else {\r\n               \r\n            }\r\n        });\r\n    }\n    \n}\n","export class objBudget{\r\n    HEADER = {};\r\n    REGULAR = [];\r\n    SEMI_REGULAR = [];\r\n    STAFF = [];\r\n    GUEST=[];\r\n    USER={};\r\n    TOTAL=0;\r\n    STATUS=\"NONE\";\r\n    ALLOW_PASS_CONFIDENTIAL=false;\r\n    IS_COPYING=false;\r\n    _INPUT_AMT_REGULAR=0;\r\n    _INPUT_AMT_SEMI_REGULAR=0;\r\n    _INPUT_AMT_STAFF=0;\r\n    _INPUT_AMT_GUEST=0;\r\n    _INPUT_AMT_TOTAL=0;\r\n    PROGRAM_USER=[];\r\n    _LOADING_BUDGET=0;\r\n    CALLER={ACTION:null,ACTION_CALLER:null,VALUE1:null,VALUE2:null,VALUE3:null,VALUE4:null};\r\n    OBSERVERS = {\r\n        init_modal:[], //0\r\n        close_modal:[], //1\r\n        open_modal:[], //1 \r\n        enable_modal_button: [], //2,\r\n        clear_budget_modal:[], //0, \r\n        open_modal_message:[], //3\r\n        clear_indiv_modal: [], //0\r\n        clear_program_modal: [], //0\r\n        clear_log:[], //0\r\n        clear_login_modal:[], //0\r\n        clear_talentmanager_modal: [],//\r\n        pass_value:[],//1\r\n        login_passed:[],//1\r\n        pass_group:[], //1\r\n        copy_template:[], //1\r\n        copy_template_guest:[],\r\n        reset_all:[], //0\r\n        loggedout:[], //0\r\n        budget_dialog:[], //1\r\n        pass_program:[], //1\r\n        budget_refresh:[], //0\r\n        confirm_dialog:[],//1\r\n        enable_approved:[], //1\r\n        pass_indiv:[], //0\r\n        refreshPersonnelTab:[], //1\r\n        reset_summary:[],//0\r\n        pass_job:[],//1\r\n        clear_job_modal:[],\r\n        disable_search_personnel:[], //1,\r\n        budget_loaded: [],\r\n        logoutPage: [],\r\n        loginPage:[]\r\n    };\r\n}","import {  bindable, inject } from 'aurelia-framework';\r\nimport {  objBudget } from 'objBudget';\r\nimport {  EntityManager, EntityQuery } from './entity-manager-factory';\r\nimport {  generateID } from './entity-manager-factory';\r\n\r\nimport {  getLookups,getJobByGlobalCompany,getJobByName } from './masterfiles';\r\nimport {  substringMatcher } from 'helpers';\r\nimport typeahead from 'typeahead';\r\nimport settings from './settings';\r\nimport _ from 'underscore';\r\nimport {  ModalWizard } from 'modals/modal-wizard';\r\nimport numeral from 'numeral';\r\nimport { MultiObserver }from 'multi-observer';\r\nimport toastr from \"toastr\";\r\n\r\nimport { globalindivmstr } from 'modals/globalindivmstr';\r\nimport { indivmstr } from 'modals/indivmstr';\r\nimport { job } from 'modals/job';\r\nimport { paymentterm } from 'modals/paymentterm';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n@inject(objBudget, ModalWizard, MultiObserver, DialogService)\r\nexport class PersonnelCustomElement\r\n{\r\n\r\n  @bindable toPerson;\r\n  @bindable toPersonModel;\r\n\r\n  _objBudget = null;\r\n\r\n  styleStringHidden = 'visibility: hidden;display:none;';\r\n  styleStringVisible = 'visibility: visible;';\r\n  _ModalWizard;\r\n  _selectedItem;\r\n  _JOBS = null;\r\n  _PYMNTTERM = [];\r\n  _currentIndex;\r\n  _ce_head;\r\n  _personnelSearch;\r\n  _signal;\r\n  _Personnel=[];\r\n  _PersonnelTM=[];\r\n  _Index=0;\r\n  varPymnt=null;\r\n  isIndivMstrTalentsDisabled=false;\r\n  isIndivMstrManagerDisabled=false;\r\n  isJobDisabled=false;\r\n  isIndivMstrDisabled=false;\r\n  dialogService=null;\r\n\r\n  constructor(objBudget, ModalWizard, multiObserver,dialogService) \r\n  {\r\n\r\n    if (EntityManager() === undefined) {\r\n        return;\r\n    }\r\n\r\n    this.dialogService=dialogService;\r\n    this._objBudget = objBudget;\r\n    //this._dispatcher = Dispatcher;\r\n    this._ModalWizard = ModalWizard;\r\n    this._ce_head = \"+\";\r\n\r\n    multiObserver.observe(\r\n      [\r\n      [this, '_personnelSearch']\r\n      ], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n    \r\n    \r\n    this._objBudget.OBSERVERS.disable_search_personnel.push((val) => {\r\n      this.ButtonStatus(val);\r\n    });\r\n\r\n    //this._objBudget.OBSERVERS.login_passed.push(() => {\r\n    //  this.LoginPassed();\r\n    //});\r\n\r\n    this._objBudget.OBSERVERS.reset_all.push(() => {\r\n      this.resetView();\r\n    });\r\n\r\n    this._objBudget.OBSERVERS.budget_dialog.push((val) => {\r\n      this.CloseBudgetDialog(val);\r\n    });\r\n\r\n    this._objBudget.OBSERVERS.enable_approved.push((val) => {\r\n      this.ButtonStatus(val);\r\n    });\r\n\r\n    this._objBudget.OBSERVERS.copy_template.push((val) => {\r\n      this.fnCallCopy(val);\r\n    });\r\n\r\n    this._objBudget.OBSERVERS.pass_indiv.push((val) => {\r\n      this.PassedIndiv(val);\r\n    });\r\n\r\n    this._objBudget.OBSERVERS.pass_group.push((val) => {\r\n      this.PassedGroup(val);\r\n    });\r\n\r\n    this._objBudget.OBSERVERS.refreshPersonnelTab.push((val) => {\r\n      this.refreshOnSelect(val);\r\n    });\r\n\r\n    this._objBudget.OBSERVERS.pass_job.push((val) => {\r\n      this.passJob(val);\r\n    });\r\n\r\n    this._PYMNTTERM = getLookups().PAYMENT_TERM;\r\n    //GET BACK HERE!!!. these part is being saved 3 times, regular, semi and staff\r\n    this._JOBS = getLookups().JOB_GRP_CATEGORY.filter\r\n        ((all) => all.COMPANY_ID == this._objBudget.USER.COMPANY_ID);\r\n\r\n    //console.log(this._PYMNTTERM);\r\n  }\r\n\r\n\r\n  \r\n  //LoginPassed() \r\n  //{\r\n\r\n  //  //GET BACK HERE!!!. these part is being saved 3 times, regular, semi and staff\r\n  //  this._PYMNTTERM = getLookups().PAYMENT_TERM;\r\n  //  //GET BACK HERE!!!. these part is being saved 3 times, regular, semi and staff\r\n  //  this._JOBS = getLookups().JOB_GRP_CATEGORY.filter\r\n  //  ((all)=>all.COMPANY_ID==this._objBudget.USER.COMPANY_ID);\r\n\r\n  //}\r\n\r\n\r\n  passJob(job)\r\n  {\r\n    var index = this._Index;\r\n    \r\n    this._Personnel[index].JOB_ID = job.JOB_ID;\r\n    this._Personnel[index].JOB_DESC = job.JOB_DESC;\r\n    var varGrpCategory = getLookups().JOB_GRP_CATEGORY.find((all) => all.JOB_ID == this._Personnel[index].JOB_ID && all.COMPANY_ID ==\r\n      this._objBudget.USER.COMPANY_ID);\r\n\r\n    if (varGrpCategory !== undefined) {\r\n      this._Personnel[index].CATEGORY_ID = varGrpCategory.CATEGORY_ID;\r\n      this._Personnel[index].CATEGORY_DESC = varGrpCategory.CATEGORY_DESC;\r\n    }\r\n    \r\n  }\r\n\r\n  onSpeculateProp(newValue, oldValue)\r\n  {\r\n\r\n    var varResult = [];\r\n\r\n    this._Personnel.forEach((all) =>\r\n    {\r\n      all.visible = true;\r\n\r\n      if (this._personnelSearch.toUpperCase() !== \"\") \r\n      {\r\n        if (all['PERSONNEL_NAME'] !== undefined && all['PERSONNEL_NAME']!=null)\r\n          if (!all['PERSONNEL_NAME'].toUpperCase().includes(this._personnelSearch.toUpperCase())) \r\n          {\r\n            all.visible = false;\r\n          }\r\n\r\n          if (all['BLANK_PERSONNEL_NAME'] !== undefined && all['PERSONNEL_NAME']!=null)\r\n            if (!all['BLANK_PERSONNEL_NAME'].toUpperCase().includes(this._personnelSearch.toUpperCase())) \r\n            {\r\n              all.visible = false;\r\n            }\r\n\r\n          }\r\n          \r\n        });\r\n\r\n    this._signal = generateID();\r\n\r\n  }\r\n\r\n\r\n  \r\n  //@handle('reset.all')\r\n  resetView() \r\n  {\r\n\r\n    this._signal = generateID();\r\n\r\n  }\r\n\r\n  collapse_expand_head()\r\n  {\r\n    if (this._ce_head == \"+\") \r\n    {\r\n      this._ce_head = \"-\";\r\n      this._Personnel.forEach((item) => \r\n      {\r\n        item.ce_value = \"-\";\r\n        item.styleString = this.styleStringVisible;\r\n      });\r\n\r\n    } \r\n    else \r\n    {\r\n      this._ce_head = \"+\";\r\n      this._Personnel.forEach((item) => \r\n      {\r\n        item.ce_value = \"+\";\r\n        item.styleString = this.styleStringHidden;\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  collapse_expand(item) \r\n  {\r\n\r\n    if (item.ce_value == \"+\") \r\n    {\r\n\r\n      item.ce_value = \"-\";\r\n      item.styleString = this.styleStringVisible;\r\n\r\n    } \r\n    else \r\n    {\r\n\r\n      item.ce_value = \"+\";\r\n      item.styleString = this.styleStringHidden;\r\n\r\n    }\r\n  }\r\n\r\n\r\n  //@handle('budget.dialog')\r\n  CloseBudgetDialog(value) \r\n  {\r\n\r\n    this.fnCheckBudget(value);\r\n\r\n  }\r\n\r\n\r\n  fnCheckExistingTalents(TALENTS,item)\r\n  {\r\n\r\n    if(TALENTS==undefined || TALENTS==null || TALENTS==\"\")\r\n    {\r\n     \r\n      return true;\r\n    }\r\n    else if(TALENTS.length>0)\r\n    {\r\n      if(item)\r\n        item.REMOVE=false;\r\n\r\n      return false;\r\n    }\r\n    \r\n    return true;\r\n\r\n  } \r\n\r\n  myFunction() \r\n  {\r\n\r\n    alert('loaded');\r\n\r\n  }\r\n\r\n  //@handle('enable.approved')\r\n  ButtonStatus(value) \r\n  {\r\n\r\n    this._objBudget.OBSERVERS.enable_modal_button.forEach((all)=>\r\n    {\r\n      this.isIndivMstrDisabled=!value;\r\n      this.isIndivMstrTalentsDisabled=!value;\r\n      \r\n    });\r\n\r\n  }\r\n\r\n\r\n //@handle('copy.template')\r\n fnCallCopy(usr)\r\n {\r\n   \r\n  this._Personnel.forEach((item) => \r\n  {\r\n    if (item.TALENT_MANAGER !== undefined) \r\n    {\r\n      item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP = undefined;\r\n      item.TALENT_MANAGER.BDGT_TMPL_DTL_ID = undefined;\r\n    };\r\n    item.BDGT_TMPL_DTL_ID=undefined;\r\n    \r\n    item.BDGT_TMPL_DTL_ID_LINK = undefined;\r\n    item.BDGT_TMPL_DTL_ID_LINK_TMP = undefined;\r\n\r\n  });\r\n  \r\n  if (this.toPersonModel.USE == usr)\r\n   this.savePersonnel(1);\r\n\r\n \r\n}\r\n\r\n\r\n\r\nfnCheckBudget(BDGT_TMPL_ID) \r\n{\r\n\r\n\r\n  this._objBudget.OBSERVERS.enable_modal_button.forEach((all)=>\r\n  {\r\n    this.isIndivMstrDisabled=false;\r\n    this.isIndivMstrTalentsDisabled=false;\r\n  });\r\n\r\n  \r\n  setTimeout(() => \r\n  {\r\n\r\n    this.scrollDiv();\r\n\r\n  }, 5000);\r\n\r\n  var varPsClType=\"\";\r\n  if (this.toPersonModel.USE == \"REGULAR\") \r\n  {\r\n\r\n    varPsClType = \"Regular\";\r\n    this._objBudget.REGULAR = [];\r\n\r\n  } \r\n  else if (this.toPersonModel.USE == \"SEMI_REGULAR\") \r\n  {\r\n\r\n    varPsClType = \"Semi-Regular\";\r\n    this._objBudget.SEMI_REGULAR = [];\r\n\r\n  } \r\n  else if (this.toPersonModel.USE == \"STAFF\") \r\n  {\r\n\r\n    varPsClType = \"Staff\";\r\n    this._objBudget.STAFF = [];\r\n\r\n  }\r\n  \r\n\r\n  var p1 = breeze.Predicate.create('BDGT_TMPL_ID', '==', BDGT_TMPL_ID);\r\n  var p2 = breeze.Predicate.create('PERSONNEL_CLASS_TYPE', '==', varPsClType);\r\n  var pred = breeze.Predicate.and([p1, p2]);\r\n  \r\n\r\n  var _query = EntityQuery().from('BDGT_TMPL_DTL').where(pred).orderBy(\"GROUP_ORDER\");\r\n  EntityManager().executeQuery(_query).then((found) => {\r\n\r\n      //this._objBudget.REGULAR = found.results.filter(all => all.PERSONNEL_CLASS_TYPE.toUpperCase() == \"REGULAR\");\r\n\r\n      var varJobLength = getLookups().JOB_MSTR.length - 1;\r\n      var varCategoryLength = getLookups().CATEGORY_MSTR.length - 1;\r\n      \r\n      this._Personnel.splice(0,this._Personnel.length);\r\n      this._PersonnelTM.splice(0,this._PersonnelTM.length);\r\n      \r\n\r\n      found.results.forEach((item)=>\r\n      {\r\n\r\n        this._Personnel.push(\r\n        {\r\n          BDGT_TMPL_DTL_ID: item.BDGT_TMPL_DTL_ID,\r\n          BDGT_TMPL_ID: this._objBudget.HEADER.BDGT_TMPL_ID,\r\n          JOB_ID: item.JOB_ID,\r\n          GLOBAL_ID: item.GLOBAL_ID,\r\n          CONTRACT_AMT: item.CONTRACT_AMT,\r\n          CATEGORY_ID: item.CATEGORY_ID,\r\n          STAFF_WORK: item.STAFF_WORK,\r\n          PYMNT_TERM_CD: item.PYMNT_TERM_CD,\r\n          PAY_TO_PERSON_FL: 'T',\r\n          PAY_RATE_FACTOR: item.PAY_RATE_FACTOR,\r\n          BUDGET_AMT: item.INPUT_AMT,\r\n          TAPING_DAY_CNT: this._objBudget.HEADER.TAPING_DAYS,\r\n          PERSONNEL_CLASS_CD: item.PERSONNEL_CLASS_CD,\r\n          REMARKS: item.REMARKS,\r\n          PERSONNEL_INFO_SRC: item.PERSONNEL_INFO_SRC,\r\n          PERSONNEL_NAME: item.PERSONNEL_NAME,\r\n          INPUT_AMT: item.INPUT_AMT,\r\n          CONFIDENTIAL: item.CONFIDENTIAL,\r\n          POOL_RECORD: item.POOL_RECORD,\r\n          GROUP_ORDER: item.GROUP_ORDER,\r\n          GLOBAL_ID_LINK: item.GLOBAL_ID_LINK,\r\n          BDGT_TMPL_DTL_ID_LINK: item.BDGT_TMPL_DTL_ID_LINK\r\n        });\r\n\r\n      });\r\n      \r\n\r\n\r\n      if (this.toPersonModel.USE == \"REGULAR\") \r\n      {\r\n\r\n        this._objBudget.REGULAR = this._Personnel;\r\n\r\n        if(this._objBudget.REGULAR.length>0)\r\n          toastr.success(\"REGULAR PERSONNEL\", \"Loading Successful.\");\r\n        //this._Personnel = this._objBudget.REGULAR;\r\n        this.setPersonnelValues(this._objBudget.REGULAR, varJobLength, varCategoryLength);\r\n\r\n      }\r\n      else if (this.toPersonModel.USE == \"SEMI_REGULAR\") \r\n      {\r\n\r\n        varPsClType = \"Semi-Regular\";\r\n\r\n        this._objBudget.SEMI_REGULAR = this._Personnel;\r\n        \r\n        if(this._objBudget.SEMI_REGULAR.length>0)\r\n          toastr.success(\"SEMI-REGULAR PERSONNEL\", \"Loading Successful.\");\r\n\r\n        //this._Personnel = this._objBudget.SEMI_REGULAR;\r\n        this.setPersonnelValues(this._objBudget.SEMI_REGULAR, varJobLength, varCategoryLength);\r\n\r\n      }\r\n      else if (this.toPersonModel.USE == \"STAFF\")\r\n      {\r\n\r\n        varPsClType = \"Staff\";\r\n\r\n        this._objBudget.STAFF = this._Personnel;\r\n\r\n        if(this._objBudget.STAFF.length>0)\r\n          toastr.success(\"STAFF PERSONNEL\", \"Loading Successful.\");\r\n        \r\n        //this._Personnel = this._objBudget.STAFF;\r\n        this.setPersonnelValues(this._objBudget.STAFF, varJobLength, varCategoryLength);\r\n\r\n      }\r\n\r\n      this._signal = generateID();\r\n      \r\n\r\n      this._objBudget.OBSERVERS.reset_summary.forEach((all)=>\r\n      {\r\n\r\n        all();\r\n\r\n      });\r\n\r\n    });\r\n  \r\n}\r\n\r\nsetPersonnelValues(obj,varJobLength,varCategoryLength) \r\n{\r\n \r\n     //move this undefined setting in able not to conflict while adding new talents on the second looop\r\n     _.each(obj, (item) => {\r\n      item.TALENTS = undefined; \r\n    });\r\n     \r\n     _.each(obj, (item) => {\r\n\r\n       \r\n      for (var i = 0; i <= varJobLength; ++i) {\r\n        if (getLookups().JOB_MSTR[i].JOB_ID == item.JOB_ID) {\r\n          item.JOB_DESC = getLookups().JOB_MSTR[i].JOB_DESC;\r\n          break;\r\n        }\r\n      };\r\n\r\n      for (var i = 0; i <= varCategoryLength; ++i) {\r\n        if (getLookups().CATEGORY_MSTR[i].CATEGORY_ID == item.CATEGORY_ID) {\r\n          item.CATEGORY_DESC = getLookups().CATEGORY_MSTR[i].CATEGORY_DESC;\r\n          break;\r\n        }\r\n      };\r\n\r\n\r\n      for (var i = 0; i <= this._PYMNTTERM.length - 1; ++i) {\r\n        if (this._PYMNTTERM[i].REF_CD == item.PYMNT_TERM_CD) {\r\n          item.PAYMENT_TERM = this._PYMNTTERM[i].REF_DESC;\r\n          break;\r\n        }\r\n      };\r\n\r\n\r\n      if (item.BDGT_TMPL_DTL_ID_LINK !== 0) {\r\n\r\n        //var varTalent = getLookups().GLOBAL_INDIV_WITH_ALIAS.find((allIndiv) => allIndiv.GLOBAL_INDIV_ID == item.GLOBAL_ID_LINK);\r\n       //console.log(item.BDGT_TMPL_DTL_ID_LINK);\r\n       var varTM = obj.find((all)=>all.BDGT_TMPL_DTL_ID==item.BDGT_TMPL_DTL_ID_LINK);\r\n       item.TALENT_MANAGER = {\r\n        BDGT_TMPL_DTL_ID_TMP: varTM.BDGT_TMPL_DTL_ID,\r\n        GLOBAL_INDIV_ID: varTM.GLOBAL_ID,\r\n        PERSONNEL_NAME: varTM.PERSONNEL_NAME,\r\n        CONTRACT_AMT_TMP:numeral(varTM.CONTRACT_AMT).format('0,0.00'),\r\n        INPUT_AMT_TMP:numeral(varTM.INPUT_AMT).format('0,0.00'),\r\n        PAY_RATE_FACTOR_TMP:numeral(varTM.PAY_RATE_FACTOR).format('0,0.00'),\r\n        REMARKS: varTM.REMARKS,\r\n        JOB_ID: varTM.JOB_ID,\r\n        CATEGORY_ID: varTM.CATEGORY_ID,\r\n        GROUP_ORDER:-1\r\n      };\r\n\r\n      this._PersonnelTM.push({\r\n        BDGT_TMPL_DTL_ID: varTM.BDGT_TMPL_DTL_ID,\r\n        BDGT_TMPL_DTL_ID_TMP: varTM.BDGT_TMPL_DTL_ID,\r\n        GLOBAL_INDIV_ID: varTM.GLOBAL_ID,\r\n        PERSONNEL_NAME: varTM.PERSONNEL_NAME,\r\n        CONTRACT_AMT_TMP:numeral(varTM.CONTRACT_AMT).format('0,0.00'),\r\n        INPUT_AMT_TMP:numeral(varTM.INPUT_AMT).format('0,0.00'),\r\n        PAY_RATE_FACTOR_TMP:numeral(varTM.PAY_RATE_FACTOR).format('0,0.00'),\r\n        REMARKS: varTM.REMARKS,\r\n        JOB_ID: varTM.JOB_ID,\r\n        CATEGORY_ID: varTM.CATEGORY_ID,\r\n        GROUP_ORDER:-1\r\n      });\r\n\r\n      \r\n\r\n    }\r\n\r\n\r\n\r\n    item.BLANK_PERSONNEL_NAME = item.PERSONNEL_NAME;\r\n    item.CONTRACT_AMT_TMP = numeral(item.CONTRACT_AMT).format('0,0.00');\r\n    item.INPUT_AMT_TMP = numeral(item.INPUT_AMT).format('0,0.00');\r\n    item.PAY_RATE_FACTOR_TMP = numeral(item.PAY_RATE_FACTOR).format('0,0.00');\r\n    item.CONFIDENTIAL_TMP = (item.CONFIDENTIAL == 1 ? true : false);\r\n    item.STAFF_WORK_TMP = (item.STAFF_WORK == 1 ? true : false);\r\n    item.POOL_RECORD_TMP = (item.POOL_RECORD == 1 ? true : false);\r\n\r\n    item.BDGT_TMPL_DTL_ID_LINK_TMP = item.BDGT_TMPL_DTL_ID_LINK;\r\n    \r\n    item.styleString = this.styleStringHidden;\r\n    item.ce_value = \"+\";\r\n    item.visible = true;\r\n    \r\n\r\n  });\r\n     \r\n     \r\n     for (var i = obj.length - 1; i >= 0; i--) {\r\n      var varToDelete = this._PersonnelTM.find((all)=>all.BDGT_TMPL_DTL_ID_TMP==obj[i].BDGT_TMPL_DTL_ID);\r\n\r\n      if(varToDelete!==undefined)\r\n      { \r\n        obj.splice(i,1);\r\n      }\r\n    }\r\n    \r\n  }\r\n\r\n\r\n  removeTalent(parent,item,index)\r\n  {\r\n    this._Personnel.forEach((all)=>{\r\n      if(all.GLOBAL_ID==item.GLOBAL_INDIV_ID)\r\n      {\r\n        //remove this on the list of talents of talent manager\r\n        var varToSplice = parent.item.TALENTS.splice(index,1);\r\n\r\n        delete item.TALENT_MANAGER.CONTRACT_AMT_TMP;\r\n        delete item.TALENT_MANAGER.INPUT_AMT_TMP;\r\n        delete item.TALENT_MANAGER.PAY_RATE_FACTOR_TMP;\r\n        delete item.TALENT_MANAGER.REMARKS;\r\n        delete item.TALENT_MANAGER;\r\n\r\n        this._signal = generateID();\r\n      }\r\n    });\r\n  }\r\n\r\n  fnRegularFocus(index, prop) \r\n  {\r\n\r\n    this._Index = index;\r\n    if (prop == \"JOB\")\r\n    { \r\n\r\n      this.fnModalJob();\r\n\r\n      return;\r\n    }\r\n\r\n\r\n    this.fnModalPaymentTerm();\r\n    \r\n\r\n    \r\n  }\r\n\r\n  //CREATE typeahead on focus instead...........!!!!!!!!!!!!\r\n  // fnReloadTypeahead() {\r\n\r\n  //   //$('.jobclass').typeahead('destroy');\r\n\r\n  //   var varCnt = 0;\r\n\r\n  //   _.each($(this.tblData).find(\".jobclass\"), (all) => {\r\n\r\n  //     $(all).attr(\"tableJobIndex\", varCnt);\r\n  //     //$(\"input[tableJobIndex*='\" + varCnt + \"']\").removeAttr(\"hasTypeahead\");\r\n  //     ++varCnt;\r\n\r\n\r\n  //   });\r\n\r\n\r\n  //   $(\".pymnttrmclass\").typeahead('destroy');\r\n  //   $(\".pymnttrmclass\")\r\n  //     .typeahead({\r\n  //       hint: false,\r\n  //       highlight: true,\r\n  //       minLength: 1,\r\n  //       limit: 10\r\n  //     }, {\r\n  //       source: substringMatcher(this._PYMNTTERM.map((item) => {\r\n  //         return item.REF_DESC\r\n  //       }))\r\n\r\n\r\n  //     });\r\n\r\n  //   varCnt = 0;\r\n  //   _.each($(this.tblData).find(\".pymnttrmclass\"), (all) => {\r\n  //     $(all).attr(\"tableTermIndex\", varCnt);\r\n\r\n  //     ++varCnt;\r\n\r\n\r\n  //   });\r\n  // }\r\n\r\n  scrollDiv() \r\n  {\r\n\r\n\r\n    $(this.tblHeader).css(\"visibility\",\"visible\");\r\n    // console.log($(this.tblData).position().top);\r\n    // console.log($(this.tblHeader).height());\r\n    // console.log($(this.divRegular).scrollTop());\r\n    $(this.tblHeader).css(\"top\", $(this.divRegular).scrollTop() + $(this.tblData).position().top);\r\n\r\n    var varCol = 0;\r\n    _.each($(this.tblData).find('td'), (item) => {\r\n\r\n      //last two is not really td element\r\n      if (varCol > $(this.tblHeader).find('td').length - 2)\r\n        return;\r\n\r\n      $($(this.tblHeader).find('td')[varCol]).css(\"width\", $(this.tblData).find('td')[varCol].clientWidth + 1);\r\n      ++varCol;\r\n    });\r\n\r\n\r\n  }\r\n\r\n  AmountBlur(item, property) \r\n  {\r\n\r\n    var varConverted = numeral(item[property]).format('0,0.00');\r\n    item[property] = varConverted;\r\n\r\n  }\r\n\r\n  showTalents(item)\r\n  {\r\n\r\n    this._selectedItem = item;\r\n\r\n    this._objBudget.OBSERVERS.open_modal.forEach((all)=>{\r\n      //all(this.modalIndivMstrTalents.id, true);\r\n      this.isIndivMstrTalentsDisabled=false;\r\n    });\r\n\r\n    //this._dispatcher.dispatch('open.modal', this.modalIndivMstrTalents.id, true);\r\n  }\r\n\r\n\r\n  showTalentMngr(item) \r\n  {\r\n\r\n    this._selectedItem = item;\r\n\r\n    this.fnIndivMstr();\r\n    \r\n  }\r\n\r\n  removeTalentMngr(item)\r\n  {\r\n    item.TALENT_MANAGER = undefined;\r\n\r\n    \r\n     // AURELIA now is not supporting removing of property, changed it to undefined instead\r\n     // delete all.TALENT_MANAGER.CONTRACT_AMT_TMP;\r\n     // delete all.TALENT_MANAGER.INPUT_AMT_TMP;\r\n     // delete all.TALENT_MANAGER.PAY_RATE_FACTOR_TMP;\r\n     // delete all.TALENT_MANAGER.REMARKS;\r\n     //delete all.TALENT_MANAGER;\r\n     \r\n\r\n     this._signal = generateID();\r\n\r\n     this._objBudget.OBSERVERS.reset_summary.forEach((all)=>{\r\n       all();\r\n     });\r\n\r\n   }\r\n\r\n  //@handle('pass.indiv')\r\n  PassedIndiv(value) \r\n  {\r\n   // if (this.modalIndivMstrManager.id == this._ModalWizard.ids[this._ModalWizard.ids.length - 1]) {\r\n  //    this._ModalWizard.ids.pop();\r\n\r\n\r\n    // this._objBudget.OBSERVERS.close_modal.forEach((all)=>{\r\n    //   all(this.modalIndivMstrManager.id);\r\n    // });\r\n\r\n      //this._dispatcher.dispatch('close.modal', this.modalIndivMstrManager.id);\r\n      if(this._selectedItem!==undefined)\r\n        if(value.GLOBAL_INDIV_ID==this._selectedItem.GLOBAL_ID)\r\n        {\r\n          toastr.error(\"<strong>Talent Manager cannot be same Personnel</strong>.\", \"Problem occured\");\r\n          return;\r\n        }\r\n\r\n      // this._selectedItem.TALENT_MANAGER = value;\r\n      // this._selectedItem.TALENT_MANAGER.CONTRACT_AMT_TMP = numeral(0).format('0,0.00');\r\n      // this._selectedItem.TALENT_MANAGER.INPUT_AMT_TMP = numeral(0).format('0,0.00');\r\n      // this._selectedItem.TALENT_MANAGER.PAY_RATE_FACTOR_TMP = numeral(0).format('0,0.00');\r\n\r\n\r\n      var varJobTManager = getJobByName(\"TALENT MANAGER\");\r\n      if(parseInt(varJobTManager.COMPANY_ID)!=parseInt(this._objBudget.USER.COMPANY_ID))\r\n      {\r\n        toastr.error(varJobTManager.JOB_DESC+\" Job is not included on jobs from users company.\", \"Problem occured\");\r\n        varJobTManager.JOB_ID=\"\";\r\n        varJobTManager.JOB_DESC=\"\";\r\n      }\r\n\r\n\r\n      this.getDefaultPymntTerm();\r\n\r\n      this._selectedItem.TALENT_MANAGER = { GLOBAL_INDIV_ID: value.GLOBAL_INDIV_ID, PERSONNEL_NAME: value.PERSONNEL_NAME,\r\n        PERSONNEL_INFO_SRC: value.PERSONNEL_INFO_SRC,\r\n        JOB_ID: varJobTManager.JOB_ID,\r\n        JOB_DESC: varJobTManager.JOB_DESC,\r\n        PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n        PAYMENT_TERM: this.varPymnt.REF_DESC,\r\n        CATEGORY_ID: varJobTManager.CATEGORY_ID,\r\n        CATEGORY_DESC: varJobTManager.CATEGORY_DESC,\r\n        PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n        CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n        INPUT_AMT_TMP: numeral(0).format('0,0.00')\r\n      };  \r\n\r\n      \r\n      this._objBudget.OBSERVERS.reset_summary.forEach((all)=>\r\n      {\r\n        all();\r\n      });\r\n\r\n      \r\n\r\n    //}\r\n  }\r\n\r\n  getDefaultPymntTerm()\r\n  {\r\n\r\n    if(this.varPymnt==null)\r\n      this.varPymnt=this._PYMNTTERM.find(all => all.REF_GRP_CD == 'PYMNT_TERM_CD' && all.REF_CD == 'DAILY');\r\n\r\n  }\r\n\r\n  fnPassedPersonnels(value)\r\n  {\r\n      console.log(value);\r\n    this.getDefaultPymntTerm();\r\n\r\n    value.forEach((val) => {\r\n\r\n      var varJob =  getJobByGlobalCompany(val.GLOBAL_INDIV_ID);\r\n\r\n      if (parseInt(varJob.COMPANY_ID) !== parseInt(this._objBudget.USER.COMPANY_ID)) {\r\n        toastr.error(varJob.JOB_DESC +\" Job is not included on jobs from users company.\", \"Problem occured\");\r\n        varJob.JOB_ID = \"\";\r\n        varJob.JOB_DESC = \"\";\r\n      }\r\n\r\n      this._Personnel.push({\r\n        GLOBAL_ID: val.GLOBAL_INDIV_ID,\r\n        PERSONNEL_NAME: val.PERSONNEL_NAME,\r\n        PERSONNEL_INFO_SRC: val.PERSONNEL_INFO_SRC,\r\n        JOB_ID: varJob.JOB_ID,\r\n        JOB_DESC: varJob.JOB_DESC,\r\n        PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n        PAYMENT_TERM: this.varPymnt.REF_DESC,\r\n        CATEGORY_ID: varJob.CATEGORY_ID,\r\n        CATEGORY_DESC: varJob.CATEGORY_DESC,\r\n        PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n        CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n        INPUT_AMT_TMP: numeral(0).format('0,0.00'),\r\n        STAFF_WORK_TMP: false,\r\n        CONFIDENTIAL_TMP: false,\r\n        visible: true\r\n          //t_talent_manager:true\r\n        });\r\n\r\n      \r\n    });\r\n\r\n\r\n    this._Personnel.forEach((all) => {\r\n      if (all.STATUS_CD == \"\" || all.STATUS_CD === undefined) {\r\n        all.STATUS_CD = \"\";\r\n      }\r\n      all.ce_value = \"+\";\r\n      all.styleString = this.styleStringHidden;\r\n    });\r\n\r\n\r\n      //this.setPersonnel(tmpgrpMembers) ;\r\n      \r\n      \r\n      this._Personnel.forEach((all)=>{\r\n        var varIndiv = getLookups().GRP_INDIV_MSTR.find((allIndiv)=>allIndiv.GLOBAL_INDIV_ID==all.GLOBAL_ID);\r\n        \r\n        if(varIndiv!==undefined)\r\n        {\r\n         var varJobTManager = getJobByName(\"TALENT MANAGER\");\r\n\r\n         if (parseInt(varJobTManager.COMPANY_ID) != parseInt(this._objBudget.USER.COMPANY_ID)) {\r\n          toastr.error(varJobTManager.JOB_DESC + \"Job is not included on jobs from users company.\", \"Problem occured\");\r\n          varJobTManager.JOB_ID = \"\";\r\n          varJobTManager.JOB_DESC = \"\";\r\n        }\r\n\r\n        var varTalent = getLookups().GLOBAL_GRP_MSTR.find((allIndiv)=>allIndiv.GLOBAL_GRP_ID==varIndiv.GLOBAL_GRP_ID);\r\n        all.TALENT_MANAGER = { GLOBAL_INDIV_ID: varTalent.GLOBAL_GRP_ID, PERSONNEL_NAME: varTalent.GROUP_NAME,\r\n          PERSONNEL_INFO_SRC: varJobTManager.PERSONNEL_INFO_SRC,\r\n          JOB_ID: varJobTManager.JOB_ID,\r\n          JOB_DESC: varJobTManager.JOB_DESC,\r\n          PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n          PAYMENT_TERM: this.varPymnt.REF_DESC,\r\n          CATEGORY_ID: varJobTManager.CATEGORY_ID,\r\n          CATEGORY_DESC: varJobTManager.CATEGORY_DESC,\r\n          PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n          CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n          INPUT_AMT_TMP: numeral(0).format('0,0.00'),\r\n          STAFF_WORK_TMP: false,\r\n          CONFIDENTIAL_TMP: false\r\n        };  \r\n\r\n        \r\n      }\r\n\r\n    });\r\n      \r\n\r\n      this._objBudget.OBSERVERS.reset_summary.forEach((all)=>{\r\n        all();\r\n      });\r\n\r\n\r\n    }\r\n\r\n  //@handle('pass.group')\r\n  PassedGroup(value) \r\n  {\r\n\r\n    // if (this.modalIndivMstr.id == this._ModalWizard.ids[this._ModalWizard.ids.length - 1]) {\r\n\r\n\r\n    //   this._ModalWizard.ids.pop();\r\n\r\n\r\n    //   this._objBudget.OBSERVERS.close_modal.forEach((all)=>{\r\n    //     all(this.modalIndivMstr.id);\r\n    //   });\r\n\r\n\r\n\r\n    // } else \r\n\r\n    if (this.modalIndivMstrTalents.id == this._ModalWizard.ids[this._ModalWizard.ids.length - 1]) {\r\n\r\n      \r\n      //var tmpgrpMembers = this._Personnel;\r\n      \r\n      this.getDefaultPymntTerm();\r\n\r\n      this._selectedItem.TALENTS = value;\r\n\r\n      this._selectedItem.TALENTS.forEach((all)=>{\r\n        if (this._Personnel.find((allReg) => allReg.GLOBAL_ID == all.GLOBAL_INDIV_ID) === undefined) {\r\n          \r\n          var varJob = getJobByGlobalCompany(all.GLOBAL_INDIV_ID);\r\n\r\n          if (parseInt(varJob.COMPANY_ID) != parseInt(this._objBudget.USER.COMPANY_ID)) {\r\n            toastr.error(varJob.JOB_DESC+\" Job is not included on jobs from users company.\", \"Problem occured\");\r\n            varJob.JOB_ID = \"\";\r\n            varJob.JOB_DESC = \"\";\r\n          }\r\n\r\n          var varTalent = getLookups().GLOBAL_INDIV_WITH_ALIAS.find((allIndiv)=>allIndiv.GLOBAL_INDIV_ID==all.GLOBAL_INDIV_ID);\r\n\r\n          this._Personnel.push({\r\n            GLOBAL_ID: all.GLOBAL_INDIV_ID,\r\n            PERSONNEL_NAME: all.PERSONNEL_NAME,\r\n            PERSONNEL_INFO_SRC: varTalent.PERSONNEL_INFO_SRC,\r\n            JOB_ID: varJob.JOB_ID,\r\n            JOB_DESC: varJob.JOB_DESC,\r\n            PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n            PAYMENT_TERM: this.varPymnt.REF_DESC,\r\n            CATEGORY_ID: varJob.CATEGORY_ID,\r\n            CATEGORY_DESC: varJob.CATEGORY_DESC,\r\n            PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n            CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n            INPUT_AMT_TMP: numeral(0).format('0,0.00'),\r\n            STAFF_WORK_TMP: false,\r\n            CONFIDENTIAL_TMP: false,\r\n            GLOBAL_ID_LINK: this._selectedItem.GLOBAL_ID,\r\n            TALENT_MANAGER: {\r\n              GLOBAL_INDIV_ID: this._selectedItem.GLOBAL_ID,\r\n              PERSONNEL_NAME: this._selectedItem.PERSONNEL_NAME\r\n            }\r\n          });\r\n        }\r\n      });\r\n      \r\n\r\n      this._ModalWizard.ids.pop();\r\n\r\n\r\n\r\n      // this._objBudget.OBSERVERS.close_modal.forEach((all)=>{\r\n      //   all(this.modalIndivMstrTalents.id);\r\n      // });\r\n\r\n\r\n      this._objBudget.OBSERVERS.reset_summary.forEach((all)=>{\r\n        all();\r\n      });\r\n\r\n    }\r\n\r\n    this._signal = generateID();\r\n\r\n    // setTimeout(() => {\r\n    //   this.fnReloadTypeahead();\r\n    //  }, 5000);\r\n  }\r\n\r\n  //@handle('refreshPersonnelTab')\r\n  refreshOnSelect(personnel) \r\n  {\r\n    $(this.tblHeader).css(\"visibility\",\"hidden\");\r\n  }\r\n\r\n  moveTrigger(value) \r\n  {\r\n\r\n    if (value == \"up\") \r\n    {\r\n      if (this._currentIndex > 0) \r\n      {\r\n\r\n        this._Personnel.splice(this._currentIndex-1, 0, this._Personnel[this._currentIndex]);\r\n        var varCopy = this._Personnel.splice(this._currentIndex + 1, 1);\r\n        this._currentIndex = this._currentIndex-1;\r\n\r\n      }\r\n\r\n    } \r\n    else \r\n    {\r\n\r\n      if (this._currentIndex < this._Personnel.length - 1) {\r\n\r\n       // var varIndex=this._currentIndex + 1;\r\n       //  var varFinish=false;\r\n       //  while (!varFinish) {\r\n       //    if (this._Personnel[varIndex].GROUP_ORDER == -1) {\r\n       //        ++varIndex;\r\n       //        console.log(varIndex);\r\n       //    }\r\n       //    else\r\n       //    {\r\n       //        varFinish=true;\r\n       //    }\r\n\r\n\r\n       //    if(varIndex<0)\r\n       //    {\r\n       //      varFinish=true;\r\n       //      varIndex=this._Personnel.length - 1;\r\n       //    }\r\n       //  }\r\n\r\n       //  this._Personnel.splice(this._currentIndex + 2, 0, this._Personnel[this._currentIndex]);\r\n       //  var varCopy = this._Personnel.splice(this._currentIndex, 1);\r\n       //  this._currentIndex = this._currentIndex + 1;\r\n\r\n       this._Personnel.splice(this._currentIndex + 2, 0, this._Personnel[this._currentIndex]);\r\n       var varCopy = this._Personnel.splice(this._currentIndex, 1);\r\n       this._currentIndex = this._currentIndex + 1;\r\n     }\r\n   }\r\n\r\n    //have to do bec refreshing on filter arrangement will not be refreshed.\r\n    this._signal = generateID();\r\n  }\r\n\r\n  focusTrigger(index)\r\n  {\r\n\r\n    this._currentIndex = index;\r\n    \r\n  }\r\n\r\n  savePersonnel(tag) \r\n  {\r\n    \r\n    var varErrorDuplicate = \"\";\r\n    var varErrorJobTerms = \"\";\r\n    var varErrorCheckTalentManager = \"\";\r\n\r\n    var varDuplicateValidation = [];\r\n\r\n    var varI=0;//eliminate talent manager\r\n    var varJ=0;//eliminate talent manager\r\n\r\n    for (var i = 0; i <= this._Personnel.length - 1; ++i) {\r\n      \r\n      \r\n      for (var j = 0; j <= this._Personnel.length - 1; ++j) {\r\n\r\n        if(this._Personnel[j].GROUP_ORDER!==-1 && this._Personnel[i].GROUP_ORDER!==-1)\r\n        {\r\n          if (this._Personnel[j].PERSONNEL_NAME == this._Personnel[i].PERSONNEL_NAME &&\r\n            this._Personnel[j].JOB_ID == this._Personnel[i].JOB_ID && i != j && varDuplicateValidation.find((all) => all == this._Personnel[j].PERSONNEL_NAME) == undefined && (this._Personnel[i].PERSONNEL_NAME == null ? \"\" : this._Personnel[i].PERSONNEL_NAME.trim()) != \"\") {\r\n\r\n            varErrorDuplicate += \"<br /><br />\" + this._Personnel[j].PERSONNEL_NAME + \"-\" + this._Personnel[j].JOB_DESC + \" Row(\" + (varJ + 1) + \").\";\r\n\r\n          varDuplicateValidation.push(this._Personnel[j].PERSONNEL_NAME);\r\n        }\r\n        \r\n      }\r\n\r\n      if(this._Personnel[j].GROUP_ORDER!==-1)\r\n      {\r\n        ++varJ;\r\n      }\r\n      \r\n    }\r\n\r\n    if (this._Personnel[i].GROUP_ORDER !== -1) {\r\n      ++varI;\r\n    }\r\n  }\r\n\r\n    varI=0;//eliminate talent manager\r\n    varJ=0;//eliminate talent manager\r\n\r\n    for (var j = 0; j <= this._Personnel.length - 1; ++j) {\r\n\r\n      if(this._Personnel[j].GROUP_ORDER!==-1)\r\n        if (this._Personnel[j].JOB_ID === undefined || this._Personnel[j].JOB_ID == \"\" || this._Personnel[j].PYMNT_TERM_CD == \"\" || this._Personnel[j].PYMNT_TERM_CD === undefined || this._Personnel[j].JOB_ID === null || this._Personnel[j].PYMNT_TERM_CD === null)\r\n        { \r\n          varErrorJobTerms += \"<br /><br />\" + \"Row (\" + (varJ + 1) + \").\";\r\n        }\r\n\r\n\r\n        if(this._Personnel[j].GROUP_ORDER!==-1)\r\n        {\r\n          ++varJ;\r\n        }\r\n        \r\n      }\r\n\r\n\r\n      if (varErrorDuplicate != \"\") {\r\n        toastr.error(\"<strong>Duplicate Personnel and Job</strong>\" + varErrorDuplicate + \"<br /><br />Saving cancelled.\", \"Problem occured\");\r\n      }\r\n\r\n      if (varErrorJobTerms != \"\") {\r\n        toastr.error(\"<strong>JOB/PAYMENT TERM not set</strong>\" + varErrorJobTerms + \"<br /><br />Saving cancelled.\", \"Problem occured\");\r\n      }\r\n\r\n\r\n      if (varErrorDuplicate != \"\" || varErrorJobTerms!=\"\" || varErrorCheckTalentManager!=\"\") {\r\n        return;\r\n      }\r\n\r\n      \r\n\r\n      var getMax = EntityQuery().from('BDGT_TMPL_DTL').orderByDesc('BDGT_TMPL_DTL_ID').take(1);\r\n      EntityManager().executeQuery(getMax).then((successMax) => {\r\n        var getMax = 1;\r\n\r\n        if (successMax.results.length > 0)\r\n          getMax = successMax.results[0].BDGT_TMPL_DTL_ID + 1;\r\n\r\n        var varIndex = 1;\r\n        \r\n\r\n        var getAllDtl = EntityQuery().from('BDGT_TMPL_DTL').where(\"BDGT_TMPL_ID\", '==', this._objBudget.HEADER.BDGT_TMPL_ID);\r\n        EntityManager().executeQuery(getAllDtl).then((foundDtl) => {\r\n\r\n          this._Personnel.forEach((item) => {\r\n            if (item.BDGT_TMPL_DTL_ID === undefined) {\r\n              item.BDGT_TMPL_DTL_ID_TMP = getMax;\r\n              ++getMax;\r\n            }\r\n          });\r\n\r\n          this._Personnel.forEach((item) => {\r\n            if (item.TALENT_MANAGER !== undefined) {\r\n\r\n              if (item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP == undefined) {\r\n                item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP = getMax;\r\n                item.BDGT_TMPL_DTL_ID_LINK = getMax;\r\n                item.TALENT_MANAGER.IsNewTalent = true;\r\n                ++getMax;\r\n              }\r\n\r\n\r\n            }\r\n\r\n          });\r\n\r\n\r\n\r\n          this._Personnel.forEach((item) => {\r\n           \r\n\r\n            if (item.BDGT_TMPL_DTL_ID === undefined && item.GROUP_ORDER !== -1) {\r\n              \r\n              var varInsert = EntityManager().createEntity('BDGT_TMPL_DTL', {\r\n                BDGT_TMPL_DTL_ID: item.BDGT_TMPL_DTL_ID_TMP,\r\n                BDGT_TMPL_ID: this._objBudget.HEADER.BDGT_TMPL_ID,\r\n                JOB_ID: item.JOB_ID,\r\n                GLOBAL_ID: item.GLOBAL_ID,\r\n                CONTRACT_AMT: item.CONTRACT_AMT_TMP.replace(/,/g, ''),\r\n                CATEGORY_ID: item.CATEGORY_ID,\r\n                STAFF_WORK: (item.STAFF_WORK_TMP === undefined ? 0 : (item.STAFF_WORK_TMP == true ? 1 : 0)),\r\n                PYMNT_TERM_CD: item.PYMNT_TERM_CD,\r\n                PAY_TO_PERSON_FL: 'T',\r\n                PAY_RATE_FACTOR: item.PAY_RATE_FACTOR_TMP.replace(/,/g, ''),\r\n                BUDGET_AMT: item.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                TAPING_DAY_CNT: this._objBudget.HEADER.TAPING_DAYS,\r\n                PERSONNEL_CLASS_CD: (this.toPersonModel.USE != \"STAFF\" ? \"Mainstay\" : \"Staff\"),\r\n                REMARKS: item.REMARKS,\r\n                PERSONNEL_INFO_SRC: item.PERSONNEL_INFO_SRC,\r\n                PERSONNEL_NAME: (item.BLANK_PERSONNEL_NAME !== undefined ? item.BLANK_PERSONNEL_NAME : item.PERSONNEL_NAME),\r\n                CREATED_BY: this._objBudget.USER.USER_ID,\r\n                CREATED_DT: new Date(),\r\n                INPUT_AMT: item.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                EPISODES: this._objBudget.HEADER.EPISODES,\r\n                CONFIDENTIAL: (item.CONFIDENTIAL_TMP === undefined ? 0 : (item.CONFIDENTIAL_TMP == true ? 1 : 0)),\r\n                PER_TAPING_DAY_RATE: 0,\r\n                PERSONNEL_CLASS_TYPE: this.getPersonnelClassType(),\r\n                POOL_RECORD: (item.POOL_RECORD_TMP==null || item.POOL_RECORD_TMP==undefined?0:(item.POOL_RECORD_TMP == true ? 1 : 0)),\r\n                GROUP_ORDER: varIndex,\r\n                GLOBAL_ID_LINK: (item.TALENT_MANAGER !== undefined && item.TALENT_MANAGER !== null ? item.TALENT_MANAGER.GLOBAL_INDIV_ID : \"NONE\"),\r\n                BDGT_TMPL_DTL_ID_LINK: (item.BDGT_TMPL_DTL_ID_LINK !== undefined && item.BDGT_TMPL_DTL_ID_LINK !== null? item.BDGT_TMPL_DTL_ID_LINK : 0),\r\n                WITH_TALENT_MANAGER: (item.TALENT_MANAGER !== undefined && item.TALENT_MANAGER !== null ? '1' : '0')\r\n              });\r\n              \r\n\r\n              EntityManager().addEntity(varInsert);\r\n\r\n            //has talent manager\r\n            if (item.TALENT_MANAGER !== undefined) {\r\n              \r\n              var varInsertTM = EntityManager().createEntity('BDGT_TMPL_DTL', {\r\n                BDGT_TMPL_DTL_ID: item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP,\r\n                BDGT_TMPL_ID: this._objBudget.HEADER.BDGT_TMPL_ID,\r\n                JOB_ID: item.TALENT_MANAGER.JOB_ID,\r\n                GLOBAL_ID: item.TALENT_MANAGER.GLOBAL_INDIV_ID,\r\n                CONTRACT_AMT: item.TALENT_MANAGER.CONTRACT_AMT_TMP.replace(/,/g, ''),\r\n                CATEGORY_ID: item.TALENT_MANAGER.CATEGORY_ID,\r\n                STAFF_WORK: 0,\r\n                PYMNT_TERM_CD: item.PYMNT_TERM_CD,\r\n                PAY_TO_PERSON_FL: 'T',\r\n                PAY_RATE_FACTOR: item.TALENT_MANAGER.PAY_RATE_FACTOR_TMP.replace(/,/g, ''),\r\n                BUDGET_AMT: item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                TAPING_DAY_CNT: this._objBudget.HEADER.TAPING_DAYS,\r\n                PERSONNEL_CLASS_CD: (this.toPersonModel.USE != \"STAFF\" ? \"Mainstay\" : \"Staff\"),\r\n                REMARKS: item.TALENT_MANAGER.REMARKS,\r\n                PERSONNEL_INFO_SRC: item.PERSONNEL_INFO_SRC,\r\n                PERSONNEL_NAME: item.TALENT_MANAGER.PERSONNEL_NAME,\r\n                CREATED_BY: this._objBudget.USER.USER_ID,\r\n                CREATED_DT: new Date(),\r\n                INPUT_AMT: item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                EPISODES: this._objBudget.HEADER.EPISODES,\r\n                CONFIDENTIAL: 0,\r\n                PER_TAPING_DAY_RATE: 0,\r\n                PERSONNEL_CLASS_TYPE: this.getPersonnelClassType(),\r\n                POOL_RECORD: 0,\r\n                GROUP_ORDER: -1,\r\n                WITH_TALENT_MANAGER: '0',\r\n                GLOBAL_ID_LINK: 'NONE',\r\n                BDGT_TMPL_DTL_ID_LINK:0\r\n              });\r\n\r\n              EntityManager().addEntity(varInsertTM);\r\n            }\r\n\r\n          } else if (item.REMOVE == true) {\r\n            \r\n            if (item.TALENT_MANAGER !== undefined) {\r\n              var varTalentMngrToDelete = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n              console.log(varTalentMngrToDelete);\r\n              varTalentMngrToDelete.entityAspect.setDeleted();\r\n            }\r\n\r\n            var varTalentToDelete = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID);\r\n            //console.log(varTalentToDelete);\r\n            varTalentToDelete.entityAspect.setDeleted();\r\n            // item.entityAspect.setDeleted();      \r\n\r\n          } else {\r\n           \r\n            var varTalentToEdit = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID);\r\n\r\n            varTalentToEdit.JOB_ID = item.JOB_ID;\r\n            \r\n            varTalentToEdit.GLOBAL_ID = item.GLOBAL_ID;\r\n            varTalentToEdit.CONTRACT_AMT = item.CONTRACT_AMT_TMP.replace(/,/g, '');\r\n            varTalentToEdit.CATEGORY_ID = item.CATEGORY_ID;\r\n            varTalentToEdit.STAFF_WORK = (item.STAFF_WORK_TMP === undefined ? 0 : (item.STAFF_WORK_TMP == true ? 1 : 0));\r\n            varTalentToEdit.PYMNT_TERM_CD = item.PYMNT_TERM_CD;\r\n            varTalentToEdit.PAY_RATE_FACTOR = item.PAY_RATE_FACTOR_TMP.replace(/,/g, '');\r\n            varTalentToEdit.BUDGET_AMT = item.INPUT_AMT_TMP.replace(/,/g, '');\r\n            varTalentToEdit.TAPING_DAY_CNT = this._objBudget.HEADER.TAPING_DAYS;\r\n            varTalentToEdit.REMARKS = item.REMARKS;\r\n            varTalentToEdit.PERSONNEL_INFO_SRC = item.PERSONNEL_INFO_SRC;\r\n            varTalentToEdit.PERSONNEL_NAME = (item.BLANK_PERSONNEL_NAME !== undefined ? item.BLANK_PERSONNEL_NAME : item.PERSONNEL_NAME);\r\n            varTalentToEdit.LAST_UPDATED_BY = this._objBudget.USER.USER_ID;\r\n            varTalentToEdit.LAST_UPDATED_DT = new Date();\r\n            varTalentToEdit.INPUT_AMT = item.INPUT_AMT_TMP.replace(/,/g, '');\r\n            varTalentToEdit.EPISODES = this._objBudget.HEADER.EPISODES;\r\n            varTalentToEdit.CONFIDENTIAL = (item.CONFIDENTIAL_TMP === undefined ? 0 : (item.CONFIDENTIAL_TMP == true ? 1 : 0));\r\n            varTalentToEdit.POOL_RECORD = (item.POOL_RECORD_TMP==null || item.POOL_RECORD_TMP==undefined?0:(item.POOL_RECORD_TMP == true ? 1 : 0));\r\n\r\n            if (varTalentToEdit.GROUP_ORDER !== -1)\r\n              varTalentToEdit.GROUP_ORDER = varIndex;\r\n\r\n            varTalentToEdit.GLOBAL_ID_LINK = (item.TALENT_MANAGER !== undefined && item.TALENT_MANAGER !== null ? item.TALENT_MANAGER.GLOBAL_INDIV_ID : \"NONE\");\r\n            varTalentToEdit.BDGT_TMPL_DTL_ID_LINK = (item.BDGT_TMPL_DTL_ID_LINK !== undefined && item.BDGT_TMPL_DTL_ID_LINK !== null ? item.BDGT_TMPL_DTL_ID_LINK : 0);\r\n            varTalentToEdit.WITH_TALENT_MANAGER = (item.TALENT_MANAGER !== undefined && item.TALENT_MANAGER!==null ? '1' : '0');\r\n\r\n\r\n            if (item.TALENT_MANAGER !== undefined) {\r\n\r\n             \r\n\r\n              if (item.BDGT_TMPL_DTL_ID_LINK_TMP !== undefined) {\r\n                //check existing linked talent manager before saving check if not match\r\n                var varCheckTalent = this._PersonnelTM.find((allTalent) => allTalent.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n                \r\n                if (varCheckTalent !== undefined) {\r\n\r\n                  if (varCheckTalent.BDGT_TMPL_DTL_ID !== item.BDGT_TMPL_DTL_ID_LINK) {\r\n\r\n                    var varTalentMngrToEdit = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n                    \r\n                    varTalentMngrToEdit.entityAspect.setDeleted();\r\n                    // //varCheckTalent.entityAspect.setDeleted();\r\n                    //   var varRemoveTalent = this._Personnel.find((allTalent) => allTalent.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n                    //   if (varRemoveTalent !== undefined) {\r\n                    //     var getForDelete = EntityQuery().from('BDGT_TMPL_DTL').where(\"BDGT_TMPL_DTL_ID\", '==', varRemoveTalent.BDGT_TMPL_DTL_ID);\r\n                    //     EntityManager().executeQuery(getForDelete).then((found) => {\r\n                    //       found.results[0].setDeleted();\r\n                    //     });\r\n\r\n                    //     // varRemoveTalent.entityAspect.setDeleted();      \r\n                    //   }\r\n                  } else {\r\n                    var varTalentMngrToEdit = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n                    varTalentMngrToEdit.CONTRACT_AMT = item.TALENT_MANAGER.CONTRACT_AMT_TMP.replace(/,/g, '');\r\n                    varTalentMngrToEdit.PAY_RATE_FACTOR = item.TALENT_MANAGER.PAY_RATE_FACTOR_TMP.replace(/,/g, '');\r\n                    varTalentMngrToEdit.INPUT_AMT = item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, '');\r\n                    varTalentMngrToEdit.BUDGET_AMT = item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, '');\r\n                    varTalentMngrToEdit.REMARKS = item.TALENT_MANAGER.REMARKS;\r\n\r\n                  }\r\n\r\n                }\r\n              }\r\n\r\n              if (item.TALENT_MANAGER.IsNewTalent) {\r\n                //add new Talent Manager, existing Talent Manager should be remove before adding new\r\n                var varInsertTM = EntityManager().createEntity('BDGT_TMPL_DTL', {\r\n                  BDGT_TMPL_DTL_ID: item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP,\r\n                  BDGT_TMPL_ID: this._objBudget.HEADER.BDGT_TMPL_ID,\r\n                  JOB_ID: item.TALENT_MANAGER.JOB_ID,\r\n                  GLOBAL_ID: item.TALENT_MANAGER.GLOBAL_INDIV_ID,\r\n                  CONTRACT_AMT: item.TALENT_MANAGER.CONTRACT_AMT_TMP.replace(/,/g, ''),\r\n                  CATEGORY_ID: item.TALENT_MANAGER.CATEGORY_ID,\r\n                  STAFF_WORK: 0,\r\n                  PYMNT_TERM_CD: item.PYMNT_TERM_CD,\r\n                  PAY_TO_PERSON_FL: 'T',\r\n                  PAY_RATE_FACTOR: item.TALENT_MANAGER.PAY_RATE_FACTOR_TMP.replace(/,/g, ''),\r\n                  BUDGET_AMT: item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                  TAPING_DAY_CNT: this._objBudget.HEADER.TAPING_DAYS,\r\n                  PERSONNEL_CLASS_CD: (this.toPersonModel.USE != \"STAFF\" ? \"Mainstay\" : \"Staff\"),\r\n                  REMARKS: item.TALENT_MANAGER.REMARKS,\r\n                  PERSONNEL_INFO_SRC: item.PERSONNEL_INFO_SRC,\r\n                  PERSONNEL_NAME: item.TALENT_MANAGER.PERSONNEL_NAME,\r\n                  CREATED_BY: this._objBudget.USER.USER_ID,\r\n                  CREATED_DT: new Date(),\r\n                  INPUT_AMT: item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                  EPISODES: this._objBudget.HEADER.EPISODES,\r\n                  CONFIDENTIAL: 0,\r\n                  PER_TAPING_DAY_RATE: 0,\r\n                  PERSONNEL_CLASS_TYPE: this.getPersonnelClassType(),\r\n                  POOL_RECORD: 0,\r\n                  GROUP_ORDER: -1,\r\n                  WITH_TALENT_MANAGER:'0',\r\n                  GLOBAL_ID_LINK: 'NONE',\r\n                  BDGT_TMPL_DTL_ID_LINK:0,\r\n                });\r\n                EntityManager().addEntity(varInsertTM);\r\n              }\r\n\r\n            } else if (item.TALENT_MANAGER === undefined && item.BDGT_TMPL_DTL_ID_LINK_TMP !== undefined) {\r\n\r\n              var varTalentMngrToDelete = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n\r\n              if (varTalentMngrToDelete !== undefined)\r\n              {\r\n                var varTalentToEdit = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID);\r\n                varTalentMngrToDelete.entityAspect.setDeleted();\r\n\r\n                varTalentToEdit.GLOBAL_ID_LINK = 'NONE';\r\n                varTalentToEdit.BDGT_TMPL_DTL_ID_LINK = 0;\r\n                varTalentToEdit.WITH_TALENT_MANAGER = '0';\r\n\r\n              }\r\n              \r\n            }\r\n\r\n          }\r\n\r\n          ++varIndex;\r\n\r\n        });\r\n\r\nEntityManager().saveChanges().then((success) => {\r\n  this.fnCheckBudget(this._objBudget.HEADER.BDGT_TMPL_ID);\r\n  toastr.success(\"Succesfully Saved\", this.toPersonModel.USE);\r\n\r\n  if(tag==1)\r\n    this.fnSequenceDispatch();\r\n\r\n}, (fail) => {\r\n\r\n  EntityManager().getEntities().forEach(function(entity) {\r\n    var errors = entity.entityAspect.getValidationErrors();\r\n    if (errors.length > 0)\r\n      console.log(errors);\r\n  });\r\n  console.log(fail);\r\n  toastr.error(\"Error Occured\",\r\n    fail);\r\n\r\n  if(tag==1)\r\n    this.fnSequenceDispatch();\r\n  \r\n\r\n});\r\n\r\n\r\n      }); //foundDtl\r\n\r\n\r\n\r\n\r\n\r\n\r\n    });//max dtl\r\n\r\n}\r\n\r\nfnSequenceDispatch()\r\n{\r\n\r\n  if (this.toPersonModel.USE == \"REGULAR\")\r\n  {\r\n\r\n    this._objBudget.OBSERVERS.copy_template.forEach((all)=>{\r\n      all('SEMI_REGULAR');\r\n    });\r\n\r\n  }\r\n  else if (this.toPersonModel.USE == \"SEMI_REGULAR\")\r\n  {\r\n\r\n    this._objBudget.OBSERVERS.copy_template.forEach((all)=>{\r\n      all('STAFF');\r\n    });\r\n\r\n  }\r\n  else if (this.toPersonModel.USE == \"STAFF\")\r\n  {\r\n\r\n    this._objBudget.OBSERVERS.copy_template_guest.forEach((all)=>{\r\n     all();\r\n   }); \r\n\r\n  }\r\n\r\n\r\n  \r\n}\r\n\r\ngetPersonnelClassType()\r\n{\r\n  if(this.toPersonModel.USE=='REGULAR')\r\n  {\r\n    return 'Regular';\r\n  }\r\n  else if(this.toPersonModel.USE=='SEMI_REGULAR')\r\n  {\r\n    return 'Semi-Regular';\r\n  }\r\n  else\r\n    return 'Staff'; \r\n}\r\n\r\nfnRegularBlurEvt(item, property, index, BDGT_TMPL_DTL_ID)\r\n{\r\n\r\n\r\n if (property == \"TERM\") {\r\n  if($(\"input[tableTermIndex*='\" + index + \"']\").val()===undefined) return;\r\n  this._Personnel[index].PAYMENT_TERM = $(\"input[tableTermIndex*='\" + index + \"']\").val().toUpperCase();\r\n\r\n  var varPaymentTerm=this._Personnel[index].PAYMENT_TERM.trim();\r\n  var varFound = this._PYMNTTERM.find((all) => {\r\n    return varPaymentTerm == all.REF_DESC.trim();\r\n  });\r\n\r\n\r\n  if (varFound !== undefined) {\r\n    this._Personnel[index].PYMNT_TERM_CD = varFound.REF_CD;\r\n  } else\r\n  this._Personnel[index].PYMNT_TERM_CD = \"\";\r\n\r\n\r\n}\r\n\r\n}\r\n\r\nfnBlankPersonnelRegular()\r\n{\r\n  \r\n  this.getDefaultPymntTerm();\r\n\r\n  this._Personnel.push({visible:true,PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n    CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n    INPUT_AMT_TMP: numeral(0).format('0,0.00'),\r\n    PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n    PAYMENT_TERM: this.varPymnt.REF_DESC\r\n  });\r\n\r\n  var varBudgetLast = this._Personnel[this._Personnel.length - 1];\r\n  varBudgetLast.ce_value = \"+\";\r\n  varBudgetLast.styleString = this.styleStringHidden;\r\n\r\n    // setTimeout(()=>{this.fnReloadTypeahead();},500);\r\n    \r\n    this._signal = generateID();\r\n\r\n    this._objBudget.OBSERVERS.reset_summary.forEach((all)=>{\r\n      all();\r\n    });\r\n\r\n    //this._objBudget.CALLER.ACTION='reset.summary';\r\n\r\n    //this._dispatcher.dispatch('reset.summary');\r\n  }\r\n\r\n  chkRemove(item)\r\n  {\r\n    if(item.REMOVE)\r\n    {\r\n      item.REMOVE=false;\r\n    }\r\n    else\r\n    {\r\n      item.REMOVE=true;\r\n    }\r\n  }\r\n\r\n  removeRegular(index) \r\n  {\r\n   \r\n    var varRemoved = this._Personnel.splice(index, 1);\r\n    this._signal = generateID();\r\n    //this._objBudget.CALLER.ACTION='reset.summary';\r\n    this._objBudget.OBSERVERS.reset_summary.forEach((all)=>{\r\n      all();\r\n    });\r\n    //this._dispatcher.dispatch('reset.summary');\r\n  }\r\n\r\n  fnIndivMstrTalents(){\r\n    this.dialogService.open({\r\n      viewModel: globalindivmstr\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        \r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n  fnIndivMstr()\r\n  {\r\n    this.dialogService.open({\r\n      viewModel: indivmstr\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        this.PassedIndiv(response.output);\r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n  fnModalJob()\r\n  {\r\n    this.dialogService.open({\r\n      viewModel: job\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        this.passJob(response.output);\r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  fnModalPaymentTerm()\r\n  {\r\n    this.dialogService.open({\r\n      viewModel: paymentterm\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        this.passTerm(response.output);\r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  passTerm(term) \r\n  {\r\n\r\n    var index = this._Index;\r\n    \r\n    this._Personnel[index].PYMNT_TERM_CD = term.REF_CD;\r\n    this._Personnel[index].PAYMENT_TERM = term.REF_DESC;\r\n    \r\n  }\r\n\r\n  fnIndivMstrManager()\r\n  {\r\n   this.dialogService.open({\r\n    viewModel: globalindivmstr\r\n   }).whenClosed(response => {\r\n    \r\n    if (!response.wasCancelled) {\r\n      this.fnPassedPersonnels(response.output);\r\n    } else {\r\n      \r\n    }\r\n  });\r\n}\r\n}","import settings from './settings';\nexport class service{\r\n    serviceBase = settings.serviceBase+ '/WcfDataService.svc/';\r\n    getSvcUrl(method) {\r\n\t\t\treturn serviceBase + method;\r\n\t\t};\r\n\tserviceBaseUpdate = 'home/';\r\n\tgetSvcUrlUpdate(method) {\r\n\t\t\treturn serviceBaseUpdate + method;\r\n\t\t};\r\n\r\n\tGetJson(method, jsonIn, callback) {\r\n\t\t$.ajax({\r\n\t\t\turl: getSvcUrl(method),\r\n\t\t\ttype: \"GET\",\r\n            dataType: \"jsonp\",\r\n\t\t\tsuccess: function(json) {\r\n\t\t\t\tcallback(json);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tPostJson(method, jsonIn, callback) {\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: getSvcUrl(method),\r\n\t\t\ttype: \"POST\",\r\n\t\t\tdata: jsonIn, //ko.toJSON(jsonIn)\r\n            dataType: \"jsonp\",\r\n\t\t\tcontentType: \"application/json\",\r\n\t\t\tsuccess: function(json) {\r\n\t\t\t\tcallback(json);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tPostUpdateJson(method, jsonIn, callback) {\r\n\t\t$.ajax({\r\n\t\t\turl: getSvcUrlUpdate(method),\r\n\t\t\ttype: \"POST\",\r\n\t\t\tdata: jsonIn,\r\n            dataType: \"jsonp\",\r\n\t\t\tcontentType: \"application/json\",\r\n\t\t\tsuccess: function(json) {\r\n\t\t\t\tcallback(json);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}","/**\r\n* Global settings/constants\r\n*/\r\n// http://localhost:30313/\r\n// http://absppms2:8094/odata\r\n//http://absppms01:8085/odata\n//http://absppms2:8072/odata\r\n//ctrl + alt + f (default) formatting indention\n//serviceName: \"http://localhost:30313/odata\",\r\n//serviceNameBase: \"http://localhost:30313\", \n//serviceName: \"http://absppms2:8094/odata\",\r\n//serviceName: \"http://absppms01:8085/odata\"\n\r\nexport default {\r\n    \n    serviceName: \"http://absppms2:8072/odata\", //odata url\r\n    serviceNameBase: \"http://absppms2:8072\", //base api url\n  pageSize: 100,\r\n  STATIONS: [\"\", \"CEBU\", \"DAVAO\"],\r\n  //actualCostWebUrl: \"http://localhost:15253\",\r\n  actualCostWebUrl: \"http://absppms2:8084\", //actual cost url\r\n  actualCostServiceBase: \"http://absppms2:8083\", //actual cost service\r\n  isNavigating: false,\n };\r\n","import {bindable,inject} from 'aurelia-framework';\r\nimport {objBudget} from 'objBudget';\r\nimport {EntityManager,EntityQuery} from './entity-manager-factory';\r\nimport {generateID} from './entity-manager-factory';\r\n//import {handle, Dispatcher} from 'aurelia-flux';  \r\nimport {getLookups} from './masterfiles';\r\nimport {  substringMatcher } from 'helpers';\r\nimport typeahead from 'typeahead';\r\nimport settings from './settings';\r\nimport _ from 'underscore';\r\nimport numeral from 'numeral';\r\nimport toastr from \"toastr\";\r\nimport {  MultiObserver }from 'multi-observer';\r\n\r\n@inject(objBudget,MultiObserver)\r\nexport class SummaryCustomElement {\r\n\r\n  @bindable to;\r\n  _objBudget = null;\r\n  //_dispatcher;\r\n  _enableAdd=false;\r\n  _enableRemove=false;\r\n  _signal;\r\n  _PYMNTTERM;\r\n  _multiObserver;\r\n  _INPUT_AMT_MAINSTAY=0;\r\n  _INPUT_AMT_STAFF=0;\r\n  _INPUT_AMT_GUEST=0;\r\n  _INPUT_AMT_TOTAL=0;\r\n  varObserveSubscriptions=[];\r\n\r\n  constructor(objBudget, multiObserver) {\r\n    this._objBudget = objBudget;\r\n\r\n    this._multiObserver=multiObserver;\r\n\r\n    this._objBudget.OBSERVERS.budget_dialog.push((val) => {\r\n      this.fnCheckSummary(val);\r\n    });\r\n\r\n    this._objBudget.OBSERVERS.reset_summary.push(() => {\r\n      this.fnResetSummarySubscription();\r\n    });\r\n\r\n  }\r\n\r\n  fnCheckAll(){\r\n\r\n    this._INPUT_AMT_MAINSTAY=0;\r\n    this._INPUT_AMT_TOTAL=0;\r\n    this._objBudget._INPUT_AMT_REGULAR=0;\r\n    this._objBudget._INPUT_AMT_SEMI_REGULAR=0;\r\n\r\n    this._objBudget.REGULAR.forEach((all)=>{\r\n\r\n      if (this._objBudget.ALLOW_PASS_CONFIDENTIAL || !all.CONFIDENTIAL_TMP) {\r\n        if (all.GROUP_ORDER !== -1)\r\n          if (all.INPUT_AMT_TMP != \"\" && all.INPUT_AMT_TMP != null && all.INPUT_AMT_TMP != undefined) {\r\n            this._INPUT_AMT_MAINSTAY += parseFloat(all.INPUT_AMT_TMP.replace(/,/g, ''));\r\n            \r\n          }\r\n\r\n          if (all.TALENT_MANAGER) {\r\n            if (all.TALENT_MANAGER.INPUT_AMT_TMP != \"\" && all.TALENT_MANAGER.INPUT_AMT_TMP != null && all.TALENT_MANAGER.INPUT_AMT_TMP != undefined) {\r\n              this._INPUT_AMT_MAINSTAY += parseFloat(all.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''));\r\n\r\n            }            \r\n          }\r\n        }\r\n      });\r\n\r\n    this._objBudget._INPUT_AMT_REGULAR = numeral(this._INPUT_AMT_MAINSTAY).format('0,0.00');\r\n\r\n    this._objBudget.SEMI_REGULAR.forEach((all)=>{\r\n\r\n      if (all.INPUT_AMT_TMP != \"\" && all.INPUT_AMT_TMP != null && all.INPUT_AMT_TMP != undefined) {\r\n        if (all.GROUP_ORDER !== -1) {\r\n          if (this._objBudget.ALLOW_PASS_CONFIDENTIAL || !all.CONFIDENTIAL_TMP)\r\n            this._INPUT_AMT_MAINSTAY += parseFloat(all.INPUT_AMT_TMP.replace(/,/g, ''));\r\n          this._objBudget._INPUT_AMT_SEMI_REGULAR+=parseFloat(all.INPUT_AMT_TMP.replace(/,/g, ''));\r\n        }\r\n\r\n        if (all.TALENT_MANAGER) {\r\n          if (all.TALENT_MANAGER.INPUT_AMT_TMP != \"\" && all.TALENT_MANAGER.INPUT_AMT_TMP != null && all.TALENT_MANAGER.INPUT_AMT_TMP != undefined) {\r\n            this._INPUT_AMT_MAINSTAY += parseFloat(all.TALENT_MANAGER.INPUT_AMT_TMP .replace(/,/g, ''));\r\n            this._objBudget._INPUT_AMT_SEMI_REGULAR+=parseFloat(all.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''));\r\n          }            \r\n        }\r\n\r\n      }\r\n\r\n    });\r\n    \r\n    this._INPUT_AMT_TOTAL=this._INPUT_AMT_MAINSTAY;\r\n    this._INPUT_AMT_MAINSTAY=numeral(this._INPUT_AMT_MAINSTAY).format('0,0.00');\r\n\r\n    this._objBudget._INPUT_AMT_SEMI_REGULAR=numeral(this._objBudget._INPUT_AMT_SEMI_REGULAR).format('0,0.00');\r\n\r\n    this._INPUT_AMT_STAFF=0;\r\n    this._objBudget._INPUT_AMT_STAFF=0; \r\n\r\n    this._objBudget.STAFF.forEach((all)=>{\r\n\r\n      if (all.INPUT_AMT_TMP != \"\" && all.INPUT_AMT_TMP != null && all.INPUT_AMT_TMP != undefined)\r\n      {\r\n\r\n        if (all.GROUP_ORDER !== -1)\r\n        {\r\n\r\n          if (this._objBudget.ALLOW_PASS_CONFIDENTIAL || !all.CONFIDENTIAL_TMP)\r\n            this._INPUT_AMT_STAFF += parseFloat(all.INPUT_AMT_TMP.replace(/,/g, ''));\r\n        }\r\n\r\n        if (all.TALENT_MANAGER) \r\n        {\r\n\r\n          if (all.TALENT_MANAGER.INPUT_AMT_TMP != \"\" && all.TALENT_MANAGER.INPUT_AMT_TMP != null && all.TALENT_MANAGER.INPUT_AMT_TMP != undefined) {\r\n            this._INPUT_AMT_STAFF += parseFloat(all.TALENT_MANAGER.INPUT_AMT_TMP .replace(/,/g, ''));\r\n          }          \r\n\r\n        }\r\n\r\n      }\r\n\r\n    });\r\n\r\n    \r\n\r\n    this._INPUT_AMT_TOTAL+=this._INPUT_AMT_STAFF;\r\n    this._INPUT_AMT_STAFF=numeral(this._INPUT_AMT_STAFF).format('0,0.00');\r\n    this._objBudget._INPUT_AMT_STAFF=this._INPUT_AMT_STAFF;\r\n\r\n    this._INPUT_AMT_GUEST=0;\r\n    this._objBudget.GUEST.forEach((all) => \r\n    {\r\n\r\n      if(all.GROUP_ORDER!==-1)    \r\n        if(all.INPUT_AMT_TMP!=\"\" && all.INPUT_AMT_TMP!=null && all.INPUT_AMT_TMP!=undefined)\r\n       // if(this._objBudget.ALLOW_PASS_CONFIDENTIAL)\r\n     this._INPUT_AMT_GUEST += parseFloat(all.INPUT_AMT_TMP.replace(/,/g, '')) * all.PAY_RATE_FACTOR;\r\n\r\n   });\r\n\r\n    \r\n\r\n    this._INPUT_AMT_TOTAL+=this._INPUT_AMT_GUEST;\r\n    this._INPUT_AMT_GUEST=numeral(this._INPUT_AMT_GUEST).format('0,0.00');\r\n    this._objBudget._INPUT_AMT_GUEST=numeral(this._INPUT_AMT_GUEST).format('0,0.00');\r\n\r\n    this._INPUT_AMT_TOTAL=numeral(this._INPUT_AMT_TOTAL).format('0,0.00');    \r\n\r\n    this._objBudget.TOTAL = this._INPUT_AMT_TOTAL;\r\n\r\n    if(this._objBudget._LOADING_BUDGET==1 && this._objBudget.TOTAL!=0)\r\n    {\r\n      this._objBudget_LOADING_BUDGET=0;\r\n      this._objBudget.OBSERVERS.budget_loaded.forEach((all)=>{\r\n        all();\r\n      });\r\n    }\r\n    \r\n  }\r\n\r\n  //@handle('budget.dialog')\r\n  fnCheckSummary(value) {\r\n\r\n    setTimeout(() => \r\n    {\r\n\r\n                      //REGULAR\r\n                      for (var name in this._objBudget.REGULAR) \r\n                      {\r\n\r\n                       var varSubscription = this._multiObserver.observe(\r\n                        [\r\n                        [this._objBudget.REGULAR[name], 'INPUT_AMT_TMP']\r\n                            // [this._objBudget.REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                            // [this._objBudget.REGULAR[name], 'CONTRACT_AMT_TMP']\r\n                            ], (newValue, oldValue) => {\r\n\r\n                              this.fnCheckAll();\r\n\r\n                            });\r\n\r\n                       this.varObserveSubscriptions.push(varSubscription);\r\n\r\n                       if(this._objBudget.REGULAR[name].TALENT_MANAGER!==undefined)\r\n                       {\r\n                            //[this._objBudget.REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n\r\n                            var varSubscriptionTM = this._multiObserver.observe(\r\n                              [\r\n                              [this._objBudget.REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                                    // [this._objBudget.REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                                    // [this._objBudget.REGULAR[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                                    ], (newValue, oldValue) => {\r\n\r\n                                      this.fnCheckAll();\r\n\r\n                                    });\r\n\r\n                            this.varObserveSubscriptions.push(varSubscriptionTM);\r\n\r\n                          }\r\n\r\n                        }\r\n\r\n\r\n                      //SEMI-REGULAR\r\n                      for (var name in this._objBudget.SEMI_REGULAR)\r\n                      {\r\n\r\n                        var varSubscription = this._multiObserver.observe(\r\n                          [\r\n                          [this._objBudget.SEMI_REGULAR[name], 'INPUT_AMT_TMP'],\r\n                            //[this._objBudget.SEMI_REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                            // [this._objBudget.SEMI_REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                            // [this._objBudget.SEMI_REGULAR[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                            ], (newValue, oldValue) =>\r\n                            {\r\n\r\n                              this.fnCheckAll();\r\n\r\n                            });\r\n\r\n                        this.varObserveSubscriptions.push(varSubscription);\r\n\r\n                        if(this._objBudget.SEMI_REGULAR[name].TALENT_MANAGER!==undefined)\r\n                        {\r\n                              //[this._objBudget.REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n\r\n                              var varSubscriptionTM = this._multiObserver.observe(\r\n                                [\r\n                                [this._objBudget.SEMI_REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                                      // [this._objBudget.REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                                      // [this._objBudget.REGULAR[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                                      ], (newValue, oldValue) => {\r\n\r\n                                        this.fnCheckAll();\r\n\r\n                                      });\r\n\r\n                              this.varObserveSubscriptions.push(varSubscriptionTM);\r\n\r\n                            }\r\n                          }\r\n\r\n\r\n                    //STAFF\r\n                    for (var name in this._objBudget.STAFF) \r\n                    {\r\n\r\n                      var varSubscription = this._multiObserver.observe(\r\n                        [\r\n                        [this._objBudget.STAFF[name], 'INPUT_AMT_TMP'],\r\n                          //[this._objBudget.STAFF[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                          // [this._objBudget.STAFF[name], 'PAY_RATE_FACTOR_TMP'],\r\n                          // [this._objBudget.STAFF[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                          ], (newValue, oldValue) => {\r\n\r\n\r\n\r\n                            this.fnCheckAll();\r\n\r\n                          });\r\n\r\n                      this.varObserveSubscriptions.push(varSubscription);\r\n\r\n                      if (this._objBudget.STAFF[name].TALENT_MANAGER!==undefined) \r\n                      {\r\n                        //[this._objBudget.REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n\r\n                        var varSubscriptionTM = this._multiObserver.observe(\r\n                          [\r\n                          [this._objBudget.STAFF[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                            // [this._objBudget.REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                            // [this._objBudget.REGULAR[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                            ], (newValue, oldValue) => {\r\n\r\n\r\n\r\n                              this.fnCheckAll();\r\n\r\n                            });\r\n\r\n                        this.varObserveSubscriptions.push(varSubscriptionTM);\r\n\r\n                      }\r\n\r\n                    }\r\n\r\n\r\n                  //GUEST\r\n                  for (var name in this._objBudget.GUEST)\r\n                  {\r\n\r\n                    var varSubscription = this._multiObserver.observe(\r\n                      [\r\n                      [this._objBudget.GUEST[name], 'INPUT_AMT_TMP']\r\n                        // [this._objBudget.GUEST[name], 'PAY_RATE_FACTOR_TMP']\r\n\r\n                        ], (newValue, oldValue) => {\r\n\r\n\r\n                          this.fnCheckAll();\r\n\r\n                        });\r\n\r\n                    this.varObserveSubscriptions.push(varSubscription);\r\n\r\n                  }\r\n\r\n                  this.fnCheckAll();\r\n\r\n                }\r\n\r\n                , 6000);\r\n\r\n}\r\n\r\n  //@handle('reset.summary')\r\n  fnResetSummarySubscription()\r\n  {\r\n\r\n    this.varObserveSubscriptions.forEach((toDispose) => {\r\n      toDispose();\r\n    });\r\n\r\n    while (this.varObserveSubscriptions.length > 0) {\r\n     this.varObserveSubscriptions.pop();\r\n   }\r\n\r\n   this.fnCheckSummary();\r\n }\r\n \r\n}","import {inject} from 'aurelia-framework';\nimport {HttpClient} from 'aurelia-fetch-client';\n//import 'fetch';\n\n@inject(HttpClient)\nexport class Users{\n  heading = 'Github Users';\n  users = [];\n\n  constructor(http){\n    http.configure(config => {\n      config\n        .useStandardConfiguration()\n        .withBaseUrl('https://api.github.com/');\n    });\n\n    this.http = http;\n  }\n\n  activate(){\n    return this.http.fetch('users')\n      .then(response => response.json())\n      .then(users => this.users = users);\n  }\n}\n","import {inject,computedFrom} from 'aurelia-framework';\nimport {initializeBreeze} from './entity-manager-factory';\nimport {loadMasterfiles, loadTables, loadLookups, getLookups} from './masterfiles';\nimport toastr from \"toastr\";\n\n@inject(toastr)\nexport class Welcome {\n  heading = 'Welcome to the Aurelia Navigation App!';\n  firstName = 'John';\n  lastName = 'Doe';\n  previousValue = this.fullName;\n  _toastr = null;\n  constructor(toastr) {\n    toastr.options = {\n      \"closeButton\": true,\n      \"debug\": false,\n      \"positionClass\": \"toast-bottom-right\",\n      \"onclick\": null,\n      \"showDuration\": \"300\",\n      \"hideDuration\": \"1000\",\n      //\"timeOut\": \"300000\",\n      //\"extendedTimeOut\": \"1000\",\n      \"showEasing\": \"swing\",\n      \"hideEasing\": \"linear\",\n      \"showMethod\": \"fadeIn\",\n      \"hideMethod\": \"fadeOut\"\n    };\n\n   \n\n  }\n\n  //Getters can't be observed with Object.observe, so they must be dirty checked.\n  //However, if you tell Aurelia the dependencies, it no longer needs to dirty check the property.\n  //To optimize by declaring the properties that this getter is computed from, uncomment the line below.\n  //@computedFrom('firstName', 'lastName')\n  get fullName() {\n    return `${this.firstName} ${this.lastName}`;\n  }\n\n  submit() {\n    console.log(getLookups().PROGRAMS);\n\n    this.previousValue = this.fullName;\n    alert(`Welcome, ${this.fullName}!`);\n  }\n\n  canDeactivate() {\n    if (this.fullName !== this.previousValue) {\n      return confirm('Are you sure you want to leave?');\n    }\n  }\n}\n\nexport class UpperValueConverter {\n  toView(value) {\n    return value && value.toUpperCase();\n  }\n}","import moment from 'moment';\r\n\r\nexport class DatepatternValueConverter {\r\n    toView(value) {\r\n    \tif(value===undefined || value==null)\r\n    \t\treturn moment(new Date(),'MM-DD-YYYY').format('MM-DD-YYYY');\r\n    \telse\r\n    \t{\r\n    \t\tif(moment(value,'MM-DD-YYYY',true).isValid())\r\n    \t\t{\r\n    \t\t\treturn moment(value,'MM-DD-YYYY').format('MM-DD-YYYY');\r\n    \t\t}\r\n    \t\telse\r\n    \t\t\treturn moment(new Date(),'MM-DD-YYYY').format('MM-DD-YYYY');\r\n    \t}\r\n\t    \t\r\n        //return new Date(value).toLocaleDateString();\r\n    }\r\n}","export class FiltercustomValueConverter {\r\n    toView(array, propertyName, value, signal) {\r\n            \r\n            //this filter is reverse in condition\r\n\t\t\tvar varResult = [];\r\n    \t\tarray.forEach((all)=>{\r\n\r\n                        if(propertyName.indexOf(',')>0)\r\n                        {\r\n                            var varCheck = propertyName.split(',').find((allFilter)=>all[allFilter]!=value\r\n                            );\r\n                        \r\n                            if(varCheck==undefined)\r\n                            {\r\n                                varResult.push(all);    \r\n                            }\r\n                        }\r\n                        else\r\n    \t\t\t\t\tif(all[propertyName]==value)\t\t\t\t\t\t\r\n    \t\t\t\t\t\t varResult.push(all);\t\r\n\t\t\t\t\t });\r\n\r\n\r\n    \t\t// for (var i = array.length - 1; i >= 0; i--) {\r\n    \t\t// \tconsole.log(propertyName);\r\n    \t\t// \tconsole.log((array[i])[propertyName]);\r\n    \t\t// \tconsole.log(value);\r\n    \t\t// \tif(array[propertyName]==value)\r\n    \t\t// \t{\r\n    \t\t// \t\tarray.splice(i,1);\r\n    \t\t// \t}\r\n    \t\t// };\r\n\r\n    \t\tarray = varResult;\r\n\t\treturn array;\r\n    }\r\n}","import numeral from 'numeral';\r\n\r\nexport class NumberFormatValueConverter {\r\n  toView(value, format) {\r\n    return numeral(value).format(format);\r\n  }\r\n}","export class SignalsValueConverter {\r\n    toView(value, signal) {\r\n\t\treturn value;\r\n    }\r\n}","export class SortValueConverter {\r\n    toView(array, propertyName, direction) {\r\n        var factor = direction === 'ascending' ? 1 : -1;\r\n        return array\r\n          .slice(0)\r\n          .sort((a, b) => {\r\n              return (a[propertyName] - b[propertyName]) * factor\r\n          });\r\n    }\r\n}","export class SorttextValueConverter {\r\n    toView(array, propertyName, direction) {\r\n   //      array.forEach((a)=>{\r\n\t\t\t// \t\tconsole.log(a[propertyName]);\r\n\r\n\t\t\t// });\r\n        if(direction==\"ascending\")\r\n\t\t{\t\r\n\r\n\t\t\treturn array.sort(function(a, b) {\r\n\t\t\t\t//console.log(a[propertyName]);\r\n\t\t\t\tif (a[propertyName] > b[propertyName]) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\tif (a[propertyName] < b[propertyName]) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\t\t\t\t// a must be equal to b\r\n\t\t\t\treturn 0;\r\n\t\t\t});\r\n        }\r\n        else\r\n        {\r\n        \treturn array.sort(function(a, b) {\r\n\t\t\t\tif (a[propertyName] > b[propertyName]) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\t\t\t\tif (a[propertyName] < b[propertyName]) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\t// a must be equal to b\r\n\t\t\t\treturn 0;\r\n\t\t\t});\t\r\n        }\r\n\r\n    }\r\n}","export class TakeValueConverter {\r\n    toView(array, count, index) {\r\n        return array.slice(index*count, (index*count)+count);\r\n    }\r\n}","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';  \r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {cache_obj} from 'cache_obj';\r\nimport { DialogController } from 'aurelia-dialog';\nimport breeze from 'breeze-client';\r\n\r\n@inject(MultiObserver,ObserverLocator,Element,cache_obj,DialogController)\r\nexport class budget {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArrayLength=0;\r\n\tvarFilterArray = [];\r\n\tcurrPredicate=null;\r\n\t_cache_obj;\r\n\tlstPredicates=[];\r\n\tcontroller=null;\r\n\tconstructor(multiObserver,observerLocator,Element,cache_obj,controller) {\r\n\t\tthis.controller=controller;\r\n\t\t//this._dispatcher=Dispatcher;\r\n\t\tthis._cache_obj=cache_obj;\r\n\t\tthis.observerLocator=observerLocator;\r\n\t\t\r\n\t\tthis.items=getLookups().BDGT_TMPL_HDR;\r\n\r\n\t\t// var _query = EntityQuery().from('BDGT_TMPL_HDR').where(\"BDGT_TMPL_ID\", \"==\", this._GLOBAL_GRP_ID);\r\n\t\t// EntityManager().executeQuery(_query).then((success) => {});\r\n\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t[this, '_bBDGT_TMPL_ID'],\r\n\t\t\t[this, '_bPROGRAM_TITLE'],\r\n\t\t\t[this, '_bPROGRAM_IO'],\r\n\t\t\t[this, '_bAPPR_STAT_CD']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_budget_modal.push(()=>{\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n\tfnManualFilter(tmpVar)\r\n\t{\r\n\t\t\r\n\t\tthis.lstPredicates=[];\r\n\r\n\t\t_.each(this._rBUDGET_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\t\t\t\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\")\r\n\t\t\t\tif(varOb.propertyName.indexOf(\"BDGT_TMPL_ID\")>-1)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.lstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), \"==\", varOb.getValue()));\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.lstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', '').replace('PROGRAM_TITLE','PROGRAM_MSTR.PROGRAM_TITLE').replace('PROGRAM_IO','PROGRAM_MSTR.PROGRAM_IO'), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(tmpVar.length>0)\r\n\t\t\t\t{\r\n\t\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t});\r\n\r\n\t\treturn tmpVar;\r\n\t}\r\n\r\n\tonSpeculateProp(newValue, oldValue) {\r\n\t\t\r\n\t\tvar varValuesHasChanged=false;\r\n\t\t//check if inputs has value else return;\r\n\t\t_.each(this._rBUDGET_TITLE.querySelectorAll('input'), all => {\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n\t\t\t{\t\r\n\t\t\t\tvarValuesHasChanged=true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(!varValuesHasChanged) return;\r\n\r\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\r\n\t\t//if has existing results, use it, else, query to server\r\n\t\tif(tmpVar.length>0) \r\n\t\t{\r\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'BDGT_TMPL_ID').reverse();\r\n\t\t\tthis.varFilterArray = tmpVarNew;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.currPredicate=this.lstPredicates;\r\n\t\t\r\n\t\t//delay to get minimize bloated multiple/simultaneous searching\r\n\t\tsetTimeout((a) => {\r\n\r\n\t\t\tif (a !== this.currPredicate)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis.varFilterArray = [];\r\n\r\n\t\t\tvar _query = EntityQuery().from('BDGT_TMPL_HDR').where(breeze.Predicate.and(this.currPredicate)).expand('PROGRAM_MSTR').orderBy(\"BDGT_TMPL_ID desc\").select('BDGT_TMPL_ID,PROGRAM_MSTR.PROGRAM_TITLE,PROGRAM_MSTR.PROGRAM_IO, APPR_STAT_CD');\r\n            EntityManager().executeQuery(_query).then((success) => {\n                \r\n\t\t\t\ttmpVar = [];\r\n\t\t\t\t_.each(success.results, (all) => {\r\n\t\t\t\t\ttmpVar.push({\r\n\t\t\t\t\t\tPROGRAM_TITLE: all.PROGRAM_MSTR.PROGRAM_TITLE,\r\n\t\t\t\t\t\tBDGT_TMPL_ID: parseInt(all.BDGT_TMPL_ID),\r\n\t\t\t\t\t\tPROGRAM_IO: all.PROGRAM_MSTR.PROGRAM_IO,\r\n\t\t\t\t\t\tAPPR_STAT_CD: all.APPR_STAT_CD.replace('APP-','')\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\r\n\t\t\t}, (failed) => {\r\n\t\t\t\ttoastr.error(failed, \"Failed loading PROGRAM Names\");\r\n\t\t\t});\r\n\r\n\t\t}, 500, this.currPredicate);\r\n\r\n\t}\r\n\r\n\tselectedBudget(item){\r\n\t\t\r\n\t\tthis._cache_obj.OBSERVERS.budget_dialog.forEach((all)=>{\r\n\t\t\tall(item.BDGT_TMPL_ID);\r\n\t\t});\r\n\r\n\t\tthis.controller.ok();\r\n\r\n\t}\r\n\r\n\tfnKeyup(evt,item){\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis.selectedBudget(this.varFilterArray[0]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tClearSearch(){\r\n\t\tthis._bBDGT_TMPL_ID=\"\";\r\n\t\tthis._bPROGRAM_TITLE=\"\";\r\n\t\tthis._bPROGRAM_IO=\"\";\r\n\t\tthis._bAPPR_STAT_CD=\"\";\r\n\t\t\r\n\t\tthis.varFilterArray=[];\r\n\t\tthis.varFilterArrayLength = 0;\r\n\t}\r\n}\r\n","import {getLookups} from '../masterfiles';\nimport {MultiObserver} from 'multi-observer'; \nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\nimport {getFilter} from '../helpers';\nimport _ from 'underscore';\nimport $ from 'jquery';\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\nimport toastr from \"toastr\";\nimport {ModalWizard} from 'modals/modal-wizard';\nimport {cache_obj} from 'cache_obj';\nimport {DialogController} from 'aurelia-dialog';\nimport breeze from 'breeze-client';\n\n\n@inject(MultiObserver, ObserverLocator, Element, ModalWizard, cache_obj, DialogController)\nexport class buhProgramDialog {\n\titems = [];\n\tobserverLocator = null;\n\tpageindex=0;\n\tvarFilterArray = [];\n\tvarFilterArraySelected=[];\n\tvarFilterArrayLength=0;\n\t\n\t_ModalWizard;\n\t_cache_obj;\n\tcontroller=null;\n\t_programs=[];\n\tconstructor(multiObserver, observerLocator, Element, ModalWizard, cache_obj,controller) {\n\t\tthis.controller=controller;\n\n\t\tthis._ModalWizard=ModalWizard;\n\t\tthis._cache_obj=cache_obj;\n\t\t\n\t\ttoastr.info(\"Program Data...\", \"Loading..\");\n\t\t\n\t\ttoastr.success(\"Start Search...\", \"Loading Finish..\");\n\n\t\tthis.observerLocator = observerLocator;\n\t\t\n\t\tmultiObserver.observe(\n\t\t\t[\n\t\t\t\t[this, '_bPROGRAM_CD'],\n\t\t\t\t[this, '_bPROGRAM_TITLE']\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\n\n\t\t\n\t\tvar _query = EntityQuery().from('PROGRAM_MSTR').where(breeze.Predicate.and(this.currPredicate)).select('PROGRAM_CD,PROGRAM_TITLE,PROGRAM_ID,BUH_PERSONNEL_ID');\n\t\t\tEntityManager().executeQuery(_query).then((success) => {\n\t\t\t\tthis._programs=success.results;\n\n\t\t\t}, (failed) => {\n\t\t\t\ttoastr.error(failed, \"Failed loading Programs\");\n\t\t\t});\n\n\t}\n\n\tattached(){\n    \t\t//console.log($(this));\n  \t}\n\n\tselectedTalent(item) {\n\t\tvar isFound=this.varFilterArraySelected.find((_item)=>{\n\t\t\tif(_item.PROGRAM_CD==item.PROGRAM_CD)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\n\t\tif( isFound===undefined){\n\t\t\tthis.varFilterArraySelected.push(item);\n\t\t}\n\t\n\t}\n\n\tfnKeyup(evt,item){\n\t\tif(evt.keyCode==13){\n\t\t\tif(this.varFilterArray.length==1)\n\t\t\t{\n\t\t\t\tthis.varFilterArraySelected.push(this.varFilterArray[0]);\n\t\t\t}\n\t\t}\n\t}\n\n\tfnManualFilter(tmpVar)\n\t{\n\t\tvar lstPredicates=[];\n\t\t_.each(this._rGROUP_TITLE.querySelectorAll('input'), all => {\n\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\n\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\"){\n\t\t\t\t\n\t\t\t\tif(varOb.propertyName.indexOf(\"PROGRAM_TITLE\")>-1)\n\t\t\t\t{\n\t\t\t\t\tlstPredicates.push(breeze.Predicate.create(\"PROGRAM_TITLE\", breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\n\t\t\t\t}\n\t\t\t}\n\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\n\n\t\t});\n\n\n\t\treturn tmpVar;\n\t}\n\n\n\tonSpeculateProp(newValue, oldValue) {\n\t\t\n\t\tif(this._rGROUP_TITLE===undefined || this._rGROUP_TITLE===null || this._rGROUP_TITLE==='') return;\n\t\t\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\n\t\t\n\t\tif(tmpVar.length>0) \n\t\t{\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'PROGRAM_TITLE').reverse();\n \t\t\tthis.varFilterArray = tmpVarNew;\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\n\t\t\treturn;\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttmpVar=this.fnManualFilter(this._programs.filter((all)=>all.PROGRAM_TITLE.indexOf('[')<=0)); \n\t\t}\n\t\t\n\t\tthis.varFilterArray = tmpVar;\n\t\tthis.varFilterArrayLength = this.varFilterArray.length;\n\n\t}\n\n\tdeleteSelected(index){\n\t\tthis.varFilterArraySelected.splice(index,1);\n\t}\n\n\tSelectingDone(){\n\n\t\tthis.controller.ok(this.varFilterArraySelected);\n\t\t\n\t}\n\n\t//@handle('clear.indiv.modal')\n\tClearSearch(){\n\t\tthis.varFilterArraySelected=[];\n\t\tthis._bPROGRAM_CD=\"\";\n\t\tthis._bPROGRAM_TITLE=\"\";\n\t\tthis.varFilterArray = [];\n\t\tthis.varFilterArrayLength = 0;\n\n\t}\n\n}","import {getLookups} from '../masterfiles';\nimport {MultiObserver} from 'multi-observer'; \nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\nimport {getFilter} from '../helpers';\nimport _ from 'underscore';\nimport $ from 'jquery';\n//import {Dispatcher, handle} from 'aurelia-flux';  \nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\nimport toastr from \"toastr\";\nimport {cache_obj} from 'cache_obj';\nimport {DialogController} from 'aurelia-dialog';\nimport breeze from 'breeze-client';\n\n\n@inject(MultiObserver,ObserverLocator,Element, cache_obj,DialogController)\nexport class buhSearch {\n\titems = [];\n\tobserverLocator = null;\n\tpageindex=0;\n\tvarFilterArrayLength=0;\n\tvarFilterArray = [];\n\tcurrPredicate=null;\n\tcontroller=null;\n\tconstructor(multiObserver,observerLocator,Element, cache_obj, controller) {\n\t\tthis.controller=controller;\n\n\t\tthis.observerLocator=observerLocator;\n\t\t\n\t\tthis._cache_obj=cache_obj;\n\t\t\n\t\tvar _query = EntityQuery().from('BUH_PERSONNEL').orderByDesc(\"BUH_PERSONNEL_ID\");\n\t\tEntityManager().executeQuery(_query).then((success) => {\n\t\t\tthis.items=success.results;\n\n\t\t}, (failed) => {\n\t\t\ttoastr.error(failed, \"Failed loading PROGRAM Names\");\n\t\t});\n\n\t\tmultiObserver.observe(\n\t\t\t[\n\t\t\t[this, '_bOPTIONAL_GLOBAL_ID'],\n\t\t\t[this, '_bFIRST_NAME'],\n\t\t\t[this, '_bLAST_NAME'],\n\t\t\t[this, '_bMIDDLE_NAME'],\n\t\t\t[this, '_bEMAIL_ADDRESS'],\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\n\n\t\t\n\n\t\tthis._cache_obj.OBSERVERS.clear_program_modal.push(() => {\n\t\t\tthis.ClearSearch();\n\t\t});\n\n\t}\n\n\tselectedTalent(item){\n\t\n\t\tthis._cache_obj.OBSERVERS.pass_value.forEach((all) => {\n\t\t\tall(item);\n\t\t});\n\t}\n\n\tonSpeculateProp(newValue, oldValue) {\n\t\t\n\t\t\n\t\tvar varValuesHasChanged=false;\n\t\t//check if inputs has value else return;\n\t\t_.each(this._rBUH_SEARCH.querySelectorAll('input'), all => {\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\n\n\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\n\t\t\t{\t\n\t\t\t\tvarValuesHasChanged=true;\n\t\t\t}\n\t\t});\n\t\t\n\n\t\tif(!varValuesHasChanged) return;\n\t\t//++this.intTest;\n\t\tvar tmpVar = [];\n\t\tif(this.varFilterArray.length>0)\n\t\t\ttmpVar=this.varFilterArray;\n\n\n\t\tvar lstPredicates=[];\n\t\t_.each(this._rBUH_SEARCH.querySelectorAll('input'), all => {\n\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\n\t\t\t\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\")\n\t\t\t// if(varOb.propertyName.indexOf(\"OPTIONAL_GLOBAL_ID\")>-1)\n\t\t\t// {\n\t\t\t// \tlstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), \"==\", varOb.getValue().toUpperCase()));\n\t\t\t// }\n\t\t\t// else\n\t\t\t// {\n\t\t\t\tlstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\n\t\t\t//}\n\n\t\t\tif(tmpVar.length>0)\n\t\t\t{\n\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\n\t\t\t}\n\n\n\t\t});\n\n\t\t//console.log(lstPredicates);\n\t\tthis.currPredicate=lstPredicates;\n\n\n\t\t//if has existing results, use it, else, query to server\n\t\tif(tmpVar.length>0) \n\t\t{\n\t\t\tthis.varFilterArray = tmpVar;\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\n\t\t\treturn;\n\t\t}\n\n\t\t//delay to get minimize bloated multiple/simultaneous searching\n\t\tsetTimeout((a) => {\n\n\t\t\tif (a !== this.currPredicate)\n\t\t\t\treturn;\n\n\t\t\tthis.varFilterArray = [];\n\n\t\t\tvar _query = EntityQuery().from('BUH_PERSONNEL').where(breeze.Predicate.and(this.currPredicate)).select('BUH_PERSONNEL_ID,OPTIONAL_GLOBAL_ID,FIRST_NAME,MIDDLE_NAME,LAST_NAME, EMAIL_ADDRESS');\n\t\t\tEntityManager().executeQuery(_query).then((success) => {\n\t\t\t\ttmpVar = [];\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t_.each(success.results, (all) => {\n\t\t\t\t\ttmpVar.push(all);\n\t\t\t\t});\n\n\t\t\t\t\n\t\t\t\tthis.varFilterArray = tmpVar;\n\t\t\t\tthis.varFilterArrayLength = this.varFilterArray.length;\n\n\n\t\t\t}, (failed) => {\n\t\t\t\ttoastr.error(failed, \"Failed loading BUH Names\");\n\t\t\t});\n\n\t\t}, 500, this.currPredicate);\n\n\t}\n\n\tselectedBUH(item){\n\t\tthis.controller.ok(item);\n\t\t\n\t}\n\n\t//@handle('clear.program.modal')\n\tClearSearch(){\n\t\tthis._bOPTIONAL_GLOBAL_ID=\"\";\n\t\tthis._bFIRST_NAME=\"\";\n\t\tthis.varFilterArray = [];\n\t\tthis.varFilterArrayLength = 0;\n\t}\n}\n","\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n\r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\n//import {HttpClient} from 'aurelia-http-client';\r\nimport {cache_obj} from 'cache_obj';\r\nimport { DialogController } from 'aurelia-dialog';\r\nimport settings from '../settings';\r\n\r\n@inject(MultiObserver, ObserverLocator, Element, cache_obj,DialogController)\r\nexport class change_password {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\r\n\t//_HttpClient;\r\n\r\n\t_USER;\r\n\t_COMPANY;\r\n\t_PASSWORD;\r\n\r\n    _cache_obj;\r\n    _NEW_PASSWORD;\r\n\r\n\tconstructor(multiObserver, observerLocator, Element, cache_obj,controller) \r\n\t{\r\n\t\tthis.controller=controller;\r\n\t\tthis._cache_obj=cache_obj;\r\n\t}\r\n\r\n    keyPressed($event) {\r\n        if ($event.which === 13) {\r\n            this.savePassword();\r\n        }\r\n    }\r\n\r\n\r\n    savePassword() \r\n    {\r\n        \r\n        if (this._NEW_PASSWORD === undefined || _.isEmpty(this._NEW_PASSWORD) || this._NEW_PASSWORD.length!=8) {\r\n            toastr.error(\"Invalid Password, must be 8 characters long.\", \"Change Password\");\r\n            return;\r\n        }\r\n        settings.isNavigating = true;\r\n        toastr.info(\"Please wait..\", \"Saving Password\");\r\n        \r\n        $.post(settings.serviceNameBase +\"/useraccess/Set_Password\", {\r\n            \"USER_ID\": this._cache_obj.USER.USER_ID,\r\n            \"COMPANY_ID\": this._cache_obj.USER.COMPANY_ID,\r\n            \"Password\": this._NEW_PASSWORD,\r\n            \"HASH\": this._cache_obj.USER.HASH\r\n        }).done((response) => {\r\n            settings.isNavigating = false;\r\n            toastr.clear();\r\n            if (response == \"\" || response == \"false\") {\r\n                toastr.error(\"Problem Occured\", \"Change Password\");\r\n            }\r\n            else if (response == \"duplicate\") {\r\n                toastr.error(\"Password cannot be same as your current.\", \"Change Password\");\r\n            } \r\n            else {\r\n                toastr.success(\"Password successfully saved and e-mailed to you.\", \"Change Password\");\r\n                this.controller.ok(\"\");\r\n            }\r\n        });\r\n\t}\r\n\r\n\r\n}\r\n","import {bindable, inject} from 'aurelia-framework';\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport { MultiObserver }from 'multi-observer';\r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\n\r\n@inject(MultiObserver,ModalWizard,cache_obj,DialogController)\r\nexport class confirm_dialog{\r\n\t@bindable _setContent;\r\n\t@bindable _setTitle;\r\n\t@bindable to;\r\n\t@bindable _id;\r\n\tshowing=false;\r\n\t_buttonTitle = 'Search'\r\n\t_isDisableElement=true;\r\n\t_ModalWizard;\r\n\t_width=\"500\";\r\n\t_message=\"\";\r\n\t_cache_obj;\r\n\tcontroller=null;\r\n\tconstructor(multiObserver,ModalWizard,cache_obj,controller){\r\n\t\t\r\n\t\tthis.controller=controller;\r\n\t\t\r\n\t\tthis._ModalWizard=ModalWizard;\r\n\t\tthis._cache_obj=cache_obj;\r\n\r\n\r\n\t\t//this._cache_obj.OBSERVERS.init_modal.push(() => {\r\n\t\t//\tthis.InitializeModal();\r\n\t\t//});\r\n\r\n\t\tthis._cache_obj.OBSERVERS.close_modal.push((val) => {\r\n\t\t\tthis.CloseModal(val);\r\n\t\t});\r\n\r\n\t\tthis._cache_obj.OBSERVERS.open_modal_message.push((val1,val2,val3) => {\r\n\t\t\tthis.OpenModal(val1,val2,val3);\r\n\t\t});\r\n\r\n\t\tthis._cache_obj.OBSERVERS.enable_modal_button.push((val1,val2) => {\r\n\t\t\tthis.OpenModal(val1,val2);\r\n\t\t});\r\n\t\t\r\n\t}\r\n\r\n\r\n  activate(message)\r\n  {\r\n    this._message=message;\r\n  }\r\n\r\n  /////cannot use this\r\n\t//@handle('init.modal')\r\n    InitializeModal() {\r\n\t\t\t//this._setTitle = this.to.title;\r\n\t\t\t//this._id = this.to.id;\r\n\t\t\t//this._width= this.to.width;\r\n\r\n\t\t\t//if(this.to.display==\"none\")\r\n\t\t\t//{\r\n\t\t\t//\t$(this.btnRef).css(\"visibility\",\"hidden\");\r\n\t\t\t//\tthis._buttonTitle = \"\";\r\n\t\t\t//}\r\n    }\r\n\r\n\r\n\t//@handle('close.modal')\r\n    CloseModal(id) {\r\n    \tif(this._id==id)\r\n    \t\tthis.showing=false;\r\n\r\n    \tthis._ModalWizard.ids.pop();\r\n        //this.messages.push(message);\r\n        //this.dispatcher.dispatch('message.sent', message);\r\n    }\r\n\r\n    //@handle('open.modal.message')\r\n    OpenModal(id, title, message) {\r\n    \tif(this._id==id)\r\n    \t{\t\r\n    \t\tthis._setTitle=title;\r\n    \t\tthis._message=message;\r\n    \t\tthis.showDialog();\r\n    \t\tthis._ModalWizard.ids.push(this._id);\r\n    \t}\r\n    }\r\n\r\n    confirm(){\r\n\r\n  //   \tthis._cache_obj.OBSERVERS.confirm_dialog.forEach((all)=>{\r\n\t\t// \tall(this._message);\r\n\t\t// });\r\n\t\tthis.controller.ok();\r\n\t\t//this._dispatcher.dispatch('confirm.dialog',this._message);\r\n\t}\r\n\r\n\r\n\tshowDialog() {\r\n\t\tthis._setContent = this.to.content;\r\n\t\t//have to do this because theres a problem clicking the modal outside.\r\n\t\t//no sure why this have to be the soltn.\r\n\t\tthis.showing = false;\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.showing = true;\r\n\t\t\tthis._ModalWizard.ids.push(this._id);\r\n\r\n\t\t\tif(this.to.cleardispatch!==undefined)\r\n\t\t\tthis._cache_obj.OBSERVERS[this.to.cleardispatch].forEach((all) => {\r\n\t\t\t\tall();\r\n\t\t\t});\r\n\r\n\t\t\t//this._dispatcher.dispatch(this.to.cleardispatch);\r\n\r\n\t\t}, 10);\r\n\r\n\t}\r\n\r\n\tcontinue(){\r\n\r\n\t}\r\n\r\n\tcloseModal(){\r\n\t\tthis.showing=false;\r\n\t}\r\n\t\r\n\t//@handle('enable.modal.button')\r\n\tenableButton(id ,isEnabled){\r\n\t\tif(this._id==id)\r\n\t\tthis._isDisableElement=!isEnabled;\r\n\t}\r\n}","import {DialogController} from 'aurelia-dialog';\r\n\r\nexport class EditPerson {\r\n  static inject = [DialogController];\r\n  person = { firstName: '' };\r\n  constructor(controller){\r\n    this.controller = controller;\r\n  }\r\n  activate(person){\r\n    this.person = person;\r\n  }\r\n}","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer';\r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';\r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\n\n\r\n@inject(MultiObserver, ObserverLocator, Element, ModalWizard, cache_obj, DialogController)\r\nexport class globalindivmstr {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArray = [];\r\n\tvarFilterArraySelected=[];\r\n\tvarFilterArrayLength=0;\r\n\t_ModalWizard;\r\n\t_cache_obj;\r\n\tcontroller=null;\r\n\tvarActiveFromCompanyMstr=[];\r\n\tconstructor(multiObserver, observerLocator, Element, ModalWizard, cache_obj,controller) {\r\n\t\tthis.controller=controller;\r\n\r\n\t\tthis._ModalWizard=ModalWizard;\r\n\t\tthis._cache_obj=cache_obj;\r\n\r\n\t\ttoastr.info(\"Personnel Data...\", \"Loading..\");\r\n\t\tthis.varActiveFromCompanyMstr = _.filter(getLookups().GLOBAL_COMPANY_MSTR,(all)=>all.STATUS_CD!='ACTV').map((val)=>{return val.GLOBAL_ID});\r\n\r\n\t\ttoastr.success(\"Start Search...\", \"Loading Finish..\");\r\n\t\tthis.observerLocator = observerLocator;\r\n\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t\t[this, '_bGLOBAL_INDIV_ID'],\r\n\t\t\t\t[this, '_bPERSONNEL_NAME']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_indiv_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tattached(){\r\n    \t\t//console.log($(this));\r\n  \t}\r\n\r\n\tselectedTalent(item)\r\n\t{\r\n\r\n\t\tvar isFound=this.varFilterArraySelected.find((_item)=>{\r\n\t\t\tif(_item.GLOBAL_INDIV_ID==item.GLOBAL_INDIV_ID)\r\n\t\t\t{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif( isFound===undefined){\r\n\t\t\tthis.varFilterArraySelected.push(item);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfnKeyup(evt,item)\r\n\t{\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis.varFilterArraySelected.push(this.varFilterArray[0]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfnManualFilter(tmpVar)\r\n\t{\r\n\t\tvar lstPredicates=[];\r\n\t\t_.each(this._rGROUP_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\"){\r\n\r\n\t\t\t\tif(varOb.propertyName.indexOf(\"PERSONNEL_NAME\")>-1)\r\n\t\t\t\t{\r\n\t\t\t\t\t//varOb.propertyName=\"concat(concat(concat(LAST_NAME,', '), GIVEN_NAME)), MIDDLE_NAME)\";\r\n\t\t\t\t\tlstPredicates.push(breeze.Predicate.create(\"concat(concat(concat(LAST_NAME,', '), GIVEN_NAME), MIDDLE_NAME)\", breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tlstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\r\n\t\t});\r\n\r\n\t\treturn tmpVar;\r\n\t}\r\n\r\n\r\n\tonSpeculateProp(newValue, oldValue) {\r\n\r\n\t\tif(this._rGROUP_TITLE===undefined || this._rGROUP_TITLE===null || this._rGROUP_TITLE==='') return;\r\n\r\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\r\n\t\tif(tmpVar.length>0)\r\n\t\t{\r\n\r\n\r\n\r\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'PERSONNEL_NAME').reverse();\r\n \t\t\tthis.varFilterArray = tmpVarNew;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\ttmpVar=this.fnManualFilter(getLookups().GLOBAL_INDIV_WITH_ALIAS);\r\n\t\t\t//console.log(tmpVar);\r\n\t\t\t//console.log(this.varActiveFromCompanyMstr);\r\n\t\t\tvar varFound=_.filter(tmpVar,(all)=>{\r\n\r\n\t\t\t\tvar result_p=_.find(this.varActiveFromCompanyMstr,(all_p)=>{\r\n \t\t\t\t\treturn all_p==all.GLOBAL_INDIV_ID;\r\n \t\t\t\t});\r\n\r\n\t\t\t return result_p==undefined;\r\n\r\n\t\t\t});\r\n\t\t\ttmpVar=varFound;\r\n\t\t\t//console.log(varFound);\r\n\t\t}\r\n\r\n\t\tthis.varFilterArray = tmpVar;\r\n\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\r\n\t}\r\n\r\n\tdeleteSelected(index){\r\n\t\tthis.varFilterArraySelected.splice(index,1);\r\n\t}\r\n\r\n\tSelectingDone(){\r\n\r\n\t\tthis.controller.ok(this.varFilterArraySelected);\r\n\r\n\t}\r\n\r\n\tClearSearch(){\r\n\r\n\t\tthis.varFilterArraySelected=[];\r\n\t\tthis._bGLOBAL_INDIV_ID=\"\";\r\n\t\tthis._bPERSONNEL_NAME=\"\";\r\n\t\tthis.varFilterArray = [];\r\n\t\tthis.varFilterArrayLength = 0;\r\n\r\n\t}\r\n\r\n}\r\n","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\n\n\r\n@inject(MultiObserver, ObserverLocator, Element, ModalWizard, cache_obj, DialogController)\r\nexport class indivmstr {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArray = [];\r\n\tvarFilterArrayLength=0;\r\n\t_ModalWizard;\r\n\t_cache_obj;\r\n\tcontroller=null;\r\n\tconstructor(multiObserver, observerLocator, Element, ModalWizard,cache_obj,controller) \r\n\t{\r\n\r\n\t\tthis.controller=controller;\r\n\t\tthis._cache_obj=cache_obj;\r\n\t\tthis._ModalWizard=ModalWizard;\r\n\t\ttoastr.info(\"Personnel Data...\", \"Loading..\");\r\n\r\n\t\ttoastr.success(\"Start Search...\", \"Loading Finish..\");\r\n\r\n\r\n\t\tthis.observerLocator = observerLocator;\r\n\t\t\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t[this, '_bGLOBAL_INDIV_ID'],\r\n\t\t\t[this, '_bPERSONNEL_NAME']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_indiv_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n\tselectedIndiv(item) \r\n\t{\r\n\t\t\r\n\t\tthis.controller.ok(item);\r\n\t\r\n\t}\r\n\r\n\tfnManualFilter(tmpVar)\r\n\t{\r\n\r\n\t\tvar lstPredicates=[];\r\n\r\n\t\t_.each(this._rGROUP_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\t\t\t\r\n\t\t\tif(varOb.getValue()!=undefined && \r\n\t\t\t\tvarOb.getValue()!=null && \r\n\t\t\t\tvarOb.getValue()!=\"\" && \r\n\t\t\t\tvarOb.getValue()!=\"undefined\"){\r\n\t\t\t\t\r\n\t\t\t\tif(varOb.propertyName.indexOf(\"PERSONNEL_NAME\")>-1)\r\n\t\t\t\t{\r\n\t\t\t\t\t//varOb.propertyName=\"concat(concat(concat(LAST_NAME,', '), GIVEN_NAME)), MIDDLE_NAME)\";\r\n\t\t\t\t\tlstPredicates.push(breeze.Predicate.create(\"concat(concat(concat(LAST_NAME,', '), GIVEN_NAME), MIDDLE_NAME)\", breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tlstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\r\n\t\t});\r\n\r\n\r\n\t\treturn tmpVar;\r\n\t}\r\n\r\n\tonSpeculateProp(newValue, oldValue) {\r\n\t\t\r\n\t\tif(this._rGROUP_TITLE===undefined || this._rGROUP_TITLE===null) return;\r\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\t\t\r\n\t\tif(tmpVar.length>0) \r\n\t\t{\r\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'PERSONNEL_NAME').reverse();\r\n\t\t\tthis.varFilterArray = tmpVarNew;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\ttmpVar=this.fnManualFilter(getLookups().GLOBAL_INDIV_WITH_ALIAS); \r\n\t\t}\r\n\t\t\r\n\t\tthis.varFilterArray = tmpVar;\r\n\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\r\n\r\n\t}\r\n\r\n\tfnKeyup(evt,item){\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis.selectedIndiv(this.varFilterArray[0])\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t//@handle('clear.indiv.modal')\r\n\tClearSearch(){\r\n\t\tthis._bGLOBAL_INDIV_ID=\"\";\r\n\t\tthis._bPERSONNEL_NAME=\"\";\r\n\t\tthis.varFilterArray = [];\r\n\t\tthis.varFilterArrayLength = 0;\r\n\t}\r\n\r\n}","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';  \r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\n\r\n@inject(MultiObserver,ObserverLocator,Element, cache_obj, DialogController)\r\nexport class job {\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArrayLength=0;\r\n\tvarFilterArray = [];\r\n\tcurrPredicate=null;\r\n\tintTest=0;\r\n\thasFocus=true;\r\n\tcontroller=null;\r\n\tconstructor(multiObserver,observerLocator,Element, cache_obj, controller) {\r\n\r\n\t\tthis.controller=controller;\r\n\r\n\t\tthis.observerLocator=observerLocator;\r\n\t\t\r\n\t\tthis._cache_obj=cache_obj;\r\n\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t[this, '_bJOB_GRP'],\r\n\t\t\t[this, '_bJOB_DESC']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_job_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t}\r\n\r\n\tselectedTalent(item)\r\n\t{\r\n\r\n\t\tthis._cache_obj.OBSERVERS.pass_job.forEach((all)=>{\r\n\t\t\tall(item);\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tfnManualFilter(tmpVar)\r\n\t{\r\n\t\tthis.currPredicate = [];\r\n\t\t_.each(this._rJOB_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif (varOb.getValue() != undefined && varOb.getValue() != null && varOb.getValue() != \"\" && varOb.getValue() != \"undefined\")\r\n\t\t\t\tthis.currPredicate.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\r\n\t\t\tif (tmpVar.length > 0)\r\n\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\r\n\t\t});\r\n\r\n\t\treturn tmpVar;\r\n\t}\r\n\r\n\tonSpeculateProp(newValue, oldValue) \r\n\t{\r\n\t\t\r\n\r\n\t\tvar varValuesHasChanged=false;\r\n\r\n\t\t//check if inputs has value else return;\r\n\t\t_.each(this._rJOB_TITLE.querySelectorAll('input'), all => \r\n\t\t{\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n\t\t\t{\t\r\n\t\t\t\tvarValuesHasChanged=true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\tif(!varValuesHasChanged) return;\r\n\r\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\r\n\t\t//if has existing results, use it, else, query to server\r\n\t\tif(tmpVar.length>0) \r\n\t\t{\r\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'JOB_DESC').reverse();\r\n\t\t\tthis.varFilterArray = tmpVarNew;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//delay to get minimize bloated multiple/simultaneous searching\r\n\t\tsetTimeout((a) => \r\n\t\t{\r\n\r\n\t\t\tif (a !== this.currPredicate)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar varJobs = getLookups().JOB_GRP_CATEGORY.filter\r\n\t\t\t((all)=>all.COMPANY_ID==this._cache_obj.USER.COMPANY_ID);\r\n\r\n\t\t\tthis.varFilterArray = [];\r\n\r\n\t\t\t_.each(varJobs, (all) => {\r\n\t\t\t\tif(all.JOB_DESC.indexOf(\"[SELECT\")==-1)\r\n\t\t\t\t\ttmpVar.push({\r\n\t\t\t\t\t\tJOB_DESC: all.JOB_DESC,\r\n\t\t\t\t\t\tJOB_GRP: all.CATEGORY_DESC,\r\n\t\t\t\t\t\tJOB_ID: all.JOB_ID\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\ttmpVar=this.fnManualFilter(tmpVar); \r\n\r\n\t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\r\n\t\t}, \r\n\r\n\t\t500, this.currPredicate);\r\n\r\n\t}\r\n\r\n\tselectedJob(item)\r\n\t{\r\n\r\n\t\tthis.controller.ok(item);\r\n\r\n\t}\r\n\r\n\tClearSearch()\r\n\t{\r\n\t\tthis._bJOB_GRP=\"\";\r\n\t\tthis._bJOB_DESC=\"\";\r\n\t\tthis.varFilterArray = [];\r\n\t\tthis.varFilterArrayLength = 0;\r\n\t\t\r\n\t\tsetTimeout(() => {\r\n\t\t\t$(this.refJobDesc).focus();\r\n\t\t}, 500);\r\n\t}\r\n\r\n\r\n\tfnKeyup(evt,item){\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\r\n\t\t\t\tthis._cache_obj.OBSERVERS.pass_job.forEach((all)=>{\r\n\t\t\t\t\tall(this.varFilterArray[0]);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';  \r\nimport { EntityManager, EntityQuery } from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\n//import {HttpClient} from 'aurelia-http-client';\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport {cache_obj} from 'cache_obj';\r\nimport { DialogController, DialogService} from 'aurelia-dialog';\r\nimport settings from '../settings';\r\nimport moment from 'moment';\r\nimport { confirm_dialog } from 'modals/confirm_dialog';\r\nimport { setCookie } from '../helpers';\r\n\r\n@inject(MultiObserver, ObserverLocator, Element, ModalWizard, cache_obj, DialogController, DialogService)\r\nexport class login {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\r\n\tvarFilterArray = [];\r\n\tvarFilterArraySelected = [];\r\n\r\n\t//_HttpClient;\r\n\t_user_content = [];\r\n\t_content = [];\r\n\t@bindable _USER;\r\n\t_COMPANY;\r\n\t_PASSWORD;\r\n\t_ModalWizard;\r\n    _cache_obj;\r\n    _companies=[];\r\n    _users = [];\r\n    _USER_PROFILE_MSTR = [];\r\n    user_expired = false;\r\n    disableLogButton = false;\r\n    dialogService;\r\n    constructor(multiObserver, observerLocator, Element, ModalWizard, cache_obj, controller, DialogService) \r\n    {\r\n        \r\n       \r\n        this.dialogService = DialogService;\r\n        this.controller = controller;\r\n        //controller.settings.lock = true;\r\n\t\tthis._ModalWizard=ModalWizard;\r\n\r\n\t\tthis._cache_obj=cache_obj;\r\n\t\t//httpClient.configure(config => {\r\n\t\t//\tconfig\r\n  //              .withBaseUrl(settings.actualCostWebUrl+'/search/')\r\n\t\t//\t\t//.withHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept')\r\n\t\t//});\r\n\r\n\t\t//this._HttpClient = httpClient;\r\n\r\n\t\t////this._HttpClient.post(\"get_users\").then(response => {\r\n\t\t////\tthis._content = JSON.parse(response.content);\r\n  ////      });\r\n\r\n\t\t\r\n        var varGetUserRole = EntityQuery().from('USER_ROLE_TRX').orderBy(\"USER_ID\");\r\n\r\n        EntityManager().executeQuery(varGetUserRole).then((found) => {\r\n        \tthis._user_content.push({});\r\n            found.results.forEach((all) => {\r\n              \r\n\t\t\tif(all.ROLE_CD==null || all.ROLE_CD==undefined)\r\n\t\t\t{\r\n\t\t\t\tthis._user_content.push(all);\r\n\t\t\t}\r\n            else if (all.ROLE_CD.includes('ACCESSALL') || all.ROLE_CD.includes('PPFCS'))\r\n\t\t\t{\r\n\t\t\t\tthis._user_content.push(all);\r\n\t\t\t}\r\n\r\n\t\t});\r\n        });\r\n\r\n\r\n\r\n        EntityManager().executeQuery(EntityQuery().from('COMPANY_MSTR').orderBy(\"COMPANY_NAME\")).then((found) => {\r\n            this._companies.push({ COMPANY_ID: 0, COMPANY_NAME: \"\" });\r\n            found.results.forEach((all) => {\r\n                this._companies.push({ COMPANY_ID: all.COMPANY_ID, COMPANY_NAME: all.COMPANY_NAME });\r\n            });\r\n        });\r\n\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_log.push(() => {\r\n\t\t\tthis.ClearLogin();\r\n\t\t});\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_login_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n        EntityManager().executeQuery(EntityQuery().from('USER_PROFILE_MSTR')).then((found) => {\r\n            this._USER_PROFILE_MSTR=found.results;\r\n        });\r\n\r\n        //$.ajax({\r\n        //    type: 'get',\r\n        //    url: settings.serviceNameBase + \"/UserAccess/Check_User\",\r\n        //    data: {\r\n        //        \"USER_ID\": \"KARRENA\",\r\n        //        \"COMPANY_ID\": 1,\r\n        //        \"PASSWORD\": \"12345678\",\r\n        //        \"UPDATE_EXPIRED\": false\r\n        //    },\r\n        //    xhrFields: {\r\n        //        withCredentials: true\r\n        //    },\r\n        //         success: function () { alert(\"Success\"); },\r\n        //    error: function () { alert('Failed!'); }\r\n        //});\r\n\r\n        //$.post(settings.serviceNameBase + \"/UserAccess/Check_User\", {\r\n        //    \"USER_ID\": \"KARRENA\",\r\n        //    \"COMPANY_ID\": 1,\r\n        //    \"PASSWORD\": \"12345678\",\r\n        //    \"UPDATE_EXPIRED\": false\r\n        //}).done((response) => {\r\n        //    console.log(response);\r\n        //    this.loginSuccess(response)//,this._dispatcher\r\n        //    this._ModalWizard.ids.pop();\r\n        //});\r\n\r\n        //$.ajax({\r\n\r\n        //    url: settings.serviceNameBase + \"/UserAccess/Check_User\",\r\n        //    data: {\r\n        //    \"USER_ID\": \"KARRENA\",\r\n        //    \"COMPANY_ID\": 1,\r\n        //    \"PASSWORD\": \"12345678\",\r\n        //    \"UPDATE_EXPIRED\": false},\r\n        //    type: 'GET',\r\n        //    crossDomain: true,\r\n        //    dataType: 'jsonp',\r\n        //    success: function () { alert(\"Success\"); },\r\n        //    error: function () { alert('Failed!'); }\r\n        //    //beforeSend: xhr.setRequestHeader('Authorization', token)\r\n        //});\r\n\r\n       /* $.ajax({\r\n            type: \"GET\",\r\n            dataType: 'jsonp',\r\n            headers: {\r\n                'Access-Control-Allow-Origin': '*'\r\n            },\r\n            data: {\r\n            \"USER_ID\": \"KARRENA\",\r\n            \"COMPANY_ID\": 1,\r\n            \"PASSWORD\": \"12345678\",\r\n            \"UPDATE_EXPIRED\": false},\r\n            url: settings.serviceNameBase + \"/UserAccess/Check_User\",\r\n            success: function (data) {\r\n                alert(9);\r\n            }\r\n        });*/\r\n\t}\r\n\r\n\tkeyPressed($event)\r\n\t{\r\n\t\tif ($event.which === 13) {\r\n\t\t\tthis.tryLogin();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\ttryLogin() \r\n    {\r\n        //$.ajax({\r\n        //    type: \"POST\",\r\n        //    url: \"http://localhost:30313/home/Check_User\",\r\n        //    jsonp: \"callback\",\r\n        //    success: (response) => {\r\n        //    this.loginSuccess(response)//,this._dispatcher\r\n        //    this._ModalWizard.ids.pop();\r\n        //    },\r\n        //    dataType: \"jsonp\"\r\n        //});\r\n\r\n      //  window.open(\"http://localhost:30313/home/Utilization_Type_A\", \"1\");\r\n        \r\n        this.disableLogButton = true;\r\n\r\n       \r\n\r\n        if (this._PASSWORD === undefined || _.isEmpty(this._PASSWORD) || this._USER.USER_ID === undefined || _.isEmpty(this._USER.USER_ID)) \r\n        {\r\n            toastr.error(\"USER ID/PASSWORD cannot be empty.\", \"Change Password\");\r\n            this.disableLogButton = false;\r\n            return;\r\n        }\r\n        else if (this._PASSWORD.length != 8)\r\n        {\r\n            toastr.error(\"Invalid Password, must be 8 characters long.\", \"Change Password\");\r\n            this.disableLogButton = false;\r\n            return;\r\n        }\r\n\r\n        //_NEW_PASSWORD\r\n        if (this.user_expired)\r\n        {\r\n            if (this._PASSWORD == this._NEW_PASSWORD)\r\n            {\r\n                toastr.error(\"New password cannot be similar with current.\", \"Password\");\r\n                this.disableLogButton = false;\r\n                return;\r\n            }\r\n            else if (this._NEW_PASSWORD === undefined || _.isEmpty(this._NEW_PASSWORD) || this._NEW_PASSWORD.length != 8) \r\n            {\r\n                toastr.error(\"Invalid Password, must be 8 characters long.\", \"Change Password\");\r\n                this.disableLogButton = false;\r\n                return;\r\n            }\r\n               \r\n        }\r\n        settings.isNavigating = true;\r\n        toastr.info(\"Please wait..\", \"Authentication\", { timeOut: 30000});\r\n       \r\n        if (this.user_expired) {\r\n            $.post(settings.serviceNameBase + \"/useraccess/Set_Password\", {\r\n                \"USER_ID\": this._USER.USER_ID,\r\n                \"COMPANY_ID\": this._COMPANY.COMPANY_ID,\r\n                \"PASSWORD\": this._PASSWORD,\r\n                \"NEWPASSWORD\": this._NEW_PASSWORD,\r\n                \"HASH\": \"\"\r\n            }).done((response) => {\r\n                toastr.clear();\r\n                if (response == \"\" || response == \"false\") {\r\n                    toastr.error(\"Problem Occured\", \"Change Password\");\r\n                    this.disableLogButton = false;\r\n                }\r\n                else if (response == \"duplicate\") {\r\n                    toastr.error(\"Password cannot be same as your current.\", \"Change Password\");\r\n                    this.disableLogButton = false;\r\n                }\r\n                else {\r\n                  \r\n                    toastr.success(\"Password successfully saved and e-mailed to you.\", \"Change Password\");\r\n                    this._PASSWORD = this._NEW_PASSWORD;\r\n                    this.fnCheckUser();\r\n                }\r\n                settings.isNavigating = false;\r\n            });\r\n        }\r\n        else\r\n        {\r\n         \r\n            this.fnCheckUser();\r\n        }\r\n            \r\n      \r\n       \r\n    }\r\n\r\n    fnCheckUser()\r\n    {\r\n        settings.isNavigating = false;\r\n        toastr.clear();\r\n        //$.ajax({\r\n        //    dataType: \"json\",\r\n        //    type: \"GET\",\r\n        //    url: settings.serviceNameBase + \"/UserAccess/Check_User\",\r\n        //    success: function (result) {\r\n        //        console.log(result);\r\n        //    }\r\n        //});\r\n\r\n        $.post(settings.serviceNameBase + \"/UserAccess/Check_User\", {\r\n            \"USER_ID\": this._USER.USER_ID,\r\n            \"COMPANY_ID\": this._COMPANY.COMPANY_ID,\r\n            \"PASSWORD\": this._PASSWORD,\r\n            \"UPDATE_EXPIRED\": false\r\n        }).done((response) => {\r\n            //console.log(response);\r\n            this.loginSuccess(response)//,this._dispatcher\r\n            this._ModalWizard.ids.pop();\r\n        });\r\n    }\r\n\r\n\tloginSuccess(response, CALLER)\r\n\t{\r\n        //console.log(response);\r\n\t\tif (response == \"\") {\r\n            toastr.error(\"USER ID Not found\", \"Searching USER..\");\r\n            this.disableLogButton = false;\r\n            return;\r\n\t\t} else {\r\n            toastr.success(\"Welcome.. \" + response.USER_ID, \"User Found\");\r\n            \r\n            var varUserAtt = response;//JSON.parse(response);\r\n            varUserAtt.ROLE_CD = this._USER.ROLE_CD;\r\n            \r\n            this.controller.ok(varUserAtt);\r\n\r\n            this._cache_obj.USER = varUserAtt;\r\n           // console.log(this._cache_obj.USER);\r\n\t\t\tthis._cache_obj.ALLOW_PASS_CONFIDENTIAL = false;\r\n\r\n\t\t\tvar checkRole = EntityQuery().from('MODULE_ACCESS_TRX').where(\"ROLE_CD\", \"==\", this._USER.ROLE_CD)\r\n\t\t\t\t.select('ROLE_CD,MODULE_MSTR.MODULE_NAME,ACCESS_FL')\r\n\t\t\t\t.expand('MODULE_MSTR');\r\n            \r\n\t\t\tEntityManager().executeQuery(checkRole).then((success) => \r\n\t\t\t{\r\n\t\t\t\tsuccess.results.forEach((all) => {\r\n\t\t\t\t\tif (all.ROLE_CD == this._USER.ROLE_CD) {\r\n\r\n\t\t\t\t\t\tif (all.MODULE_MSTR.MODULE_NAME.includes(\"CONCEAL\") && all.ACCESS_FL == \"1\") {\r\n\t\t\t\t\t\t\tthis._cache_obj.ALLOW_PASS_CONFIDENTIAL = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n            });\r\n\r\n\r\n            $.post(settings.serviceNameBase + \"/UserAccess/User_Access\", {\r\n                \"USER_ID\": this._USER.USER_ID,\r\n                \"HASH\": this._USER.HASH\r\n            }).done((response) => {\r\n                this._cache_obj._ACCESS = response;\r\n                });\r\n\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tClearLogin()\r\n\t{\r\n\t\tthis._USER=\"\";\r\n\t\tthis._COMPANY=\"\";\r\n\t\tthis._PASSWORD=\"\";\r\n\r\n        this._cache_obj.USER = {};\r\n        this._cache_obj._ACCESS = {};\r\n\t}\t\t\r\n\r\n\t//@handle('clear.login.modal')\r\n\tClearSearch()\r\n\t{\r\n\t\tthis._USER=\"\";\r\n\t\tthis._COMPANY=null;\r\n\t\tthis._PASSWORD=\"\";\r\n    }\r\n\r\n    resetPassword() {\r\n     \r\n        if (_.isUndefined(this._USER.USER_ID) || _.isNull(this._USER.USER_ID) || this._USER.USER_ID.trim().length === 0\r\n            || _.isUndefined(this._COMPANY.COMPANY_ID) || _.isNull(this._COMPANY.COMPANY_ID)) {\r\n            toastr.error(\"Invalid USER/COMPANY\", \"Reset Password\");\r\n            return;\r\n        }\r\n\r\n        this.dialogService.open({ viewModel: confirm_dialog, model: 'Reset Password?' }).whenClosed(response => {\r\n            if (!response.wasCancelled) {\r\n\r\n                toastr.info(\"Please wait..\", \"Resetting Password\");\r\n                settings.isNavigating = true;\r\n                $.post(settings.serviceNameBase + \"/home/Reset_Password\", {\r\n                    \"USER_ID\": this._USER.USER_ID,\r\n                    \"COMPANY_ID\": this._COMPANY.COMPANY_ID\r\n                }).done((response) => {\r\n                    settings.isNavigating = false;\r\n                    if (response == \"false\") {\r\n                        toastr.error(\"Error saving new password.\", \"Reset Password\");\r\n                    } else {\r\n                        toastr.success(\"Password has been reset and emailed to you.\", \"Reset Password\");\r\n\r\n                        if (this.user_expired)\r\n                            setTimeout(() => { location.reload(); }, 3000);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n       \r\n    }\r\n\r\n    _USERChanged()\r\n    {\r\n        if ((_.isUndefined(this._USER.USER_ID) || _.isNull(this._USER.USER_ID) || this._USER.USER_ID.trim().length === 0))\r\n        { }\r\n        else\r\n        {\r\n            var varFound = this._USER_PROFILE_MSTR.find((all) => all.USER_ID == this._USER.USER_ID);\r\n            if (!_.isUndefined(varFound.EXPIRE_DT) && !_.isNull(varFound.EXPIRE_DT))\r\n            {\r\n                //console.clear();\r\n                \r\n                var varDateCompare = new Date(moment(new Date(varFound.EXPIRE_DT)));\r\n                if (varDateCompare < new Date())\r\n                {\r\n                    if (!this.user_expired)\r\n                        this.user_expired = true;\r\n                }\r\n                else\r\n                    this.user_expired = false;\r\n            }\r\n            else\r\n            {\r\n                toastr.error(\"Please call administrator.\", \"ACCOUNT EXPIRY PROBLEM.\");\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n}\r\n","export class ModalWizard{\r\n   ids = [];\r\n}","import {bindable, inject} from 'aurelia-framework';\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport {MultiObserver}from 'multi-observer';\r\nimport {  cache_obj } from 'cache_obj';\r\n\r\n@inject(ModalWizard,MultiObserver,cache_obj)\r\nexport class modalcontainer{\r\n\t@bindable _setContent;\r\n\t@bindable _setTitle;\r\n\t@bindable to;\r\n\t@bindable _id;\r\n\tshowing=false;\r\n\t_buttonTitle = 'Search'\r\n\t_isDisableElement=true;\r\n\t_ModalWizard;\r\n\t_width=\"900\";\r\n\tmultiObserver;\r\n\t_cache_obj = null;\r\n\tconstructor(ModalWizard,multiObserver,cache_obj){\r\n\t\tthis._cache_obj=cache_obj;\r\n\r\n\t\tthis._ModalWizard=ModalWizard;\r\n\t\tthis.multiObserver=multiObserver;\r\n\r\n\t\t\r\n\t\tthis._cache_obj.OBSERVERS.init_modal.push(() => {\r\n\t\t\tthis.InitializeModal();\r\n\t\t});\r\n\r\n\t\tthis._cache_obj.OBSERVERS.close_modal.push((val) => {\r\n\t\t\tthis.CloseModal(val);\r\n\t\t});\r\n    \t\r\n    \tthis._cache_obj.OBSERVERS.open_modal.push((val) => {\r\n\t\t\tthis.OpenModal(val);\r\n\t\t});\r\n\r\n\t\tthis._cache_obj.OBSERVERS.enable_modal_button.push((val1,val2) => {\r\n\t\t\tthis.enableButton(val1,val2);\r\n\t\t});\r\n\t}\r\n\r\n\r\n\r\n\t//@handle('init.modal')\r\n    InitializeModal() {\r\n\r\n    \t\t//console.log(this.to);\r\n    \t\tthis._buttonTitle = this.to.buttonTitle;\r\n\t\t\tthis._setTitle = this.to.title;\r\n\t\t\tthis._id = this.to.id;\r\n\t\t\tthis._width= this.to.width;\r\n\r\n\t\t\tif(this.to.display==\"none\")\r\n\t\t\t{\r\n\t\t\t\t$(this.btnRef).css(\"visibility\",\"hidden\");\r\n\t\t\t\tthis._buttonTitle = \"\";\r\n\t\t\t}\r\n    }\r\n\r\n\r\n\t//@handle('close.modal')\r\n    CloseModal(id) {\r\n    \tif(this._id==id)\r\n    \t\tthis.showing=false;\r\n\r\n    \tthis._ModalWizard.ids.pop();\r\n        //this.messages.push(message);\r\n        //this.dispatcher.dispatch('message.sent', message);\r\n    }\r\n\r\n    //@handle('open.modal')\r\n    OpenModal(id) {\r\n\r\n    \t// console.log(this._id);\r\n    \t// \tconsole.log(id);\r\n    \tif(this._id==id)\r\n    \t{\r\n    \t\t//console.log(id);\r\n    \t\tthis.showDialog();\r\n    \t\tthis._ModalWizard.ids.push(this._id);\r\n    \t}\r\n    }\r\n\r\n\tshowDialog() {\r\n\r\n\t\t //console.log(this.multiObserver);\r\n    // this.multiObserver.observe(\r\n    //   [\r\n    //     [this._cache_obj, 'TEST1']\r\n    //   ], (newValue, oldValue) => {\r\n\r\n    //   \tconsole.log(2);\r\n    //  \tthis.showing=false;\r\n    // \tthis._ModalWizard.ids.pop();\r\n\r\n    //   });\r\n\r\n\t\tthis._setContent = this.to.content;\r\n\t\t//have to do this because theres a problem clicking the modal outside.\r\n\t\t//no sure why this have to be the soltn.\r\n\t\tthis.showing = false;\r\n\r\n\t\t// window.setTimeout(() => {\r\n\t\t// \tconsole.log(\"Passed dialog3\");\r\n\t\t// \tthis.showing = true;\r\n\t\t// \tthis._ModalWizard.ids.push(this._id);\r\n\t\t// \tthis._dispatcher.dispatch(this.to.cleardispatch);\r\n\t\t// }, 1000);\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.showing = true;\r\n\t\t\tthis._ModalWizard.ids.push(this._id);\r\n\r\n\t\t\t//this._cache_obj.CALLER.ACTION=this.to.cleardispatch;\r\n\r\n\t\t\tif(this.to.cleardispatch!==undefined)\r\n\t\t\tthis._cache_obj.OBSERVERS[this.to.cleardispatch].forEach((all) => {\r\n\t\t\t\tall();\r\n\t\t\t});\r\n\r\n\r\n\t\t\t//this._dispatcher.dispatch(this.to.cleardispatch);\r\n\t\t}, 500);\r\n\r\n\t}\r\n\r\n\tcloseModal(){\r\n\t\tthis.showing=false;\r\n\t}\r\n\t\r\n\t//@handle('enable.modal.button')\r\n\tenableButton(id ,isEnabled){\r\n\t\tif(this._id==id)\r\n\t\tthis._isDisableElement=!isEnabled;\r\n\t}\r\n}","import {getLookups} from '../masterfiles';\nimport {inject, bindable} from 'aurelia-framework';\nimport {getFilter} from '../helpers';\nimport _ from 'underscore';\nimport $ from 'jquery';\n//import {Dispatcher, handle} from 'aurelia-flux';  \nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\nimport toastr from \"toastr\";\nimport {DialogController} from 'aurelia-dialog';\n\n@inject(Element, DialogController)\nexport class paymentterm {\n\n\tvarFilterArray = [];\n\tcontroller=null;\n\tconstructor(Element, controller) {\n\n\t\tthis.controller=controller;\n\t\t\n\t\tthis.varFilterArray=getLookups().PAYMENT_TERM;\n\n\t}\n\n\tselectedTerm(item){\n\t\t\n\t\tthis.controller.ok(item);\n\n\t}\n\n\tfnKeyup(evt,item){\n\t\tconsole.log(evt.keyCode);\n\t\tif(evt.keyCode==13){\n\t\t\tif(this.varFilterArray.length==1)\n\t\t\t{\n\t\t\t\tthis.selectedIndiv(this.varFilterArray[0])\n\t\t\t}\n\t\t}\n\t}\n}\n","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';  \r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\n\r\n@inject(MultiObserver,ObserverLocator,Element, cache_obj,DialogController)\r\nexport class program {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArrayLength=0;\r\n\tvarFilterArray = [];\r\n\tcurrPredicate=null;\r\n\tcontroller=null;\r\n\tconstructor(multiObserver,observerLocator,Element, cache_obj, controller) {\r\n\t\tthis.controller=controller;\r\n\t\r\n\t\t\r\n\t\tthis.observerLocator=observerLocator;\r\n\t\t\r\n\t\tthis.items=getLookups().BDGT_TMPL_HDR;\r\n\r\n\t\tthis._cache_obj=cache_obj;\r\n\t\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t\t[this, '_bPROGRAM_CD'],\r\n\t\t\t\t[this, '_bPROGRAM_TITLE']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_program_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tselectedTalent(item){\r\n\r\n\t\tthis._cache_obj.OBSERVERS.pass_value.forEach((all) => {\r\n\t\t\tall(item);\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tonSpeculateProp(newValue, oldValue) {\r\n\t\t\r\n\t\t\r\n\t\tvar varValuesHasChanged=false;\r\n\t\t//check if inputs has value else return;\r\n\t\t_.each(this._rBUDGET_TITLE.querySelectorAll('input'), all => {\r\n\t\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n\t\t\t\t{\t\r\n\t\t\t\t\tvarValuesHasChanged=true;\r\n\t\t\t\t}\r\n\t\t});\r\n\t\t\r\n\r\n\t\tif(!varValuesHasChanged) return;\r\n\t\t//++this.intTest;\r\n\t\tvar tmpVar = [];\r\n\t\tif(this.varFilterArray.length>0)\r\n\t\t\ttmpVar=this.varFilterArray;\r\n\r\n\t\tvar lstPredicates=[];\r\n\t\t_.each(this._rBUDGET_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\t\t\t\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\")\r\n\t\t\t\r\n\t\t\t\tlstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\r\n\t\t\tif(tmpVar.length>0)\r\n\t\t\t{\r\n\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t});\r\n\r\n\t\tthis.currPredicate=lstPredicates;\r\n\r\n\r\n\t\t//if has existing results, use it, else, query to server\r\n\t\tif(tmpVar.length>0) \r\n\t\t{\r\n \t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\r\n\t\tif(this._cache_obj.PROGRAM_USER.length==0)\r\n\t\t{\r\n\r\n\t\t\tvar _query = EntityQuery().from('PROGRAM_USER_TRX');\r\n\t\t\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\t\tsuccess.results.forEach((all)=>{\r\n\t\t\t\t\tif(all.USER_ID==this._cache_obj.USER.USER_ID)\r\n\t\t\t\t\t\tthis._cache_obj.PROGRAM_USER.push(all);\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\r\n\t\t}\r\n\r\n\t\t//delay to get minimize bloated multiple/simultaneous searching\r\n\t\tsetTimeout((a) => {\r\n\r\n\t\t\tif (a !== this.currPredicate)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis.varFilterArray = [];\r\n\r\n\t\t\tvar _query = EntityQuery().from('PROGRAM_MSTR').where(breeze.Predicate.and(this.currPredicate)).select('PROGRAM_CD,PROGRAM_TITLE,PROGRAM_ID,BUH_PERSONNEL_ID');\r\n\t\t\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\t\ttmpVar = [];\r\n\r\n\t\t\t\t_.each(success.results, (all) => {\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar findProgramUser=this._cache_obj.PROGRAM_USER.find((allP)=>allP.PROGRAM_ID==all.PROGRAM_ID);\r\n\t\t\t\t\tif(findProgramUser!== undefined)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttmpVar.push({\r\n\t\t\t\t\t\tPROGRAM_TITLE: all.PROGRAM_TITLE,\r\n\t\t\t\t\t\tPROGRAM_CD: all.PROGRAM_CD,\r\n\t\t\t\t\t\tPROGRAM_ID: all.PROGRAM_ID,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//if (tmpVar.length < this.varFilterArray.length || this.varFilterArray.length == 0) { //console.log(tmpVar);\r\n\t\t\t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\t\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\t\t\t\t//}\r\n\r\n\t\t\t}, (failed) => {\r\n\t\t\t\ttoastr.error(failed, \"Failed loading PROGRAM Names\");\r\n\t\t\t});\r\n\r\n\t\t}, 500, this.currPredicate);\r\n\r\n\t}\r\n\r\n\tselectedProgram(item){\r\n\r\n\t\t// this._cache_obj.CALLER.VALUE1 = item;\r\n\t\t// this._cache_obj.CALLER.ACTION=\"pass.program\";\r\n\r\n\t\tthis._cache_obj.OBSERVERS.pass_program.forEach((all) => {\r\n\t\t\tall(item);\r\n\t\t});\r\n\r\n\t\tthis.controller.ok();\r\n\t\t//this._dispatcher.dispatch('pass.program', item);\r\n\t}\r\n\r\n\t//@handle('clear.program.modal')\r\n\tClearSearch(){\r\n\t\tthis._bPROGRAM_CD=\"\";\r\n\t\tthis._bPROGRAM_TITLE=\"\";\r\n\t\tthis.varFilterArray = [];\r\n\t\tthis.varFilterArrayLength = 0;\r\n\t}\r\n}\r\n","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';  \r\nimport {objBudget} from 'objBudget';\r\nimport {DialogController} from 'aurelia-dialog';\r\n\r\n@inject(MultiObserver,ObserverLocator,Element,objBudget,DialogController)\r\nexport class talentmanagergroups {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\r\n\tvarFilterArray = [];\r\n\t//_dispatcher;\r\n\tvarFilterArrayLength=0;\r\n\tpageindex=0;\r\n\t_objBudget;\r\n\tcontroller=null;\r\n\r\n\tconstructor(multiObserver,observerLocator,Element,objBudget,controller) {\r\n\t\tthis.controller=controller;\r\n\t\t//this._dispatcher=Dispatcher;\r\n\t\tthis._objBudget = objBudget;\r\n\t\tthis.observerLocator=observerLocator;\r\n\t\t\r\n\t\tthis.items=getLookups().GLOBAL_GRP_MSTR;\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t[this, '_bGLOBAL_GRP_ID'],\r\n\t\t\t[this, '_bGROUP_NAME']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\t\tthis._objBudget.OBSERVERS.clear_talentmanager_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tselectedTalent(item)\r\n\t{\r\n\t\t\r\n\t\tthis.controller.ok(item);\r\n\r\n\t}\r\n\r\n\tfnKeyup(evt,item)\r\n\t{\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis._objBudget.OBSERVERS.pass_value.forEach((all) => {\r\n\t\t\t\t\tall(this.varFilterArray[0]);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSpeculateProp(newValue, oldValue) \r\n\t{\r\n\r\n\r\n\t\tvar varValuesHasChanged=false;\r\n\t\t//check if inputs has value else return;\r\n\t\t_.each(this._rGROUP_TITLE.querySelectorAll('input'), all => {\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n\t\t\t{\t\r\n\t\t\t\tvarValuesHasChanged=true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\r\n\r\n\t\tif(!varValuesHasChanged) return;\r\n\r\n\t\tvar tmpVar = this.items;\r\n\t\t_.each(this._rGROUP_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\t\t\t\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\")\r\n\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue().toUpperCase() , all.getAttribute('searchable').replace('_s', ''));\r\n\r\n\t\t});\r\n\r\n\t\tthis.varFilterArray = tmpVar;\r\n\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t}\r\n\r\n\t//@handle('clear.talentmanager.modal')\r\n\tClearSearch()\r\n\t{\r\n\t\tthis.varFilterArray=[];\r\n\t\tthis.varFilterArrayLength=0;\r\n\t\tthis._bGLOBAL_GRP_ID=\"\";\r\n\t\tthis._bGROUP_NAME=\"\";\r\n\t\tthis.varFilterArray = [];\r\n\t\tthis.varFilterArrayLength=0;\r\n\t}\r\n}","import { EntityManager, EntityQuery, initializeBreeze, generateID} from '../entity-manager-factory';\nimport { checkCookie, setCookie, removeCookie, substringMatcher} from '../helpers';\nimport {loadMasterfiles, loadTables, loadLookups, getLookups} from '../masterfiles';\nimport toastr from \"toastr\";\nimport {inject} from 'aurelia-framework';\nimport typeahead from 'typeahead';\nimport _ from 'underscore';\nimport {buhProgramDialog} from '../modals/buh-program-dialog';\nimport {DialogService} from 'aurelia-dialog';\nimport { login } from '../modals/login';\nimport { buhSearch } from '../modals/buh-search';\n@inject(DialogService)\nexport class buh {\n\t_objBUH={PROGRAMS:[]};\n\n\tdialogService=null;\n\tloginDisabled=true;\n\tlogoutDisabled=false;\n\t//_BUH_PERSONNEL_ID=0;\n\tmasterFilesLoaded=false;\n\t_disableCells=true;\n\t_disableAdd=false;\n\t_disableDelete=true;\n\t_disableSave=true;\n\t_disableSearch=false;\n\t_disableGrid=true;\n\t_status=\"\";\n\t_user={};\n\t_programs=[];\n\tconstructor(DialogService)\n\t{\n\n\t\tthis.dialogService=DialogService;\n\t\n\n\t\tif(this.dialogService.controllers.length>0)\n\t\t{\n\t\t\tfor (var i = this.dialogService.controllers.length - 1; i >= 0; i--) {\n\t\t\t\tthis.dialogService.controllers[i].close();\n\t\t\t}\n\t\t}\n\n\n\t\t\t\t//toastr.success(\"Loading Programs\", \"Loading\");\n\n\t\t\t\t//initializeBreeze().then(() => {\t\n\n\n\t\t\t\t//\tvar _query = EntityQuery().from('PROGRAM_MSTR').where(breeze.Predicate.and(this.currPredicate)).select('PROGRAM_CD,PROGRAM_TITLE,PROGRAM_ID,BUH_PERSONNEL_ID');\n\t\t\t\t//\tEntityManager().executeQuery(_query).then((success) => {\n\t\t\t\t//\t\tthis._programs= success.results;\n\t\t\t\t//\t});\t\n\t\t\t\t//      //have to set timeout because of IE, other templates are not loading\n\t\t\t\t//      // quickly and loading at same time with functions\n\t\t\t\t//      setTimeout(() => {\n\n\t\t\t\t//      \tif (checkCookie(\"PPMS_USER\") == \"\" || checkCookie(\"PPMS_USER\")==undefined || checkCookie(\"PPMS_USER\").indexOf('undefined')>=0)\n\t\t\t\t//      \t{\n\t\t\t\t//      \t\tthis.fnLogin();\n\t\t\t\t//      \t\tthis.loginDisabled=false;\n\t\t\t\t//      \t\tthis.logoutDisabled=true;\n\t\t\t\t//      \t\treturn;\n\t\t\t\t//      \t}\n\n\t\t\t\t//      \tthis.fnInitMasterfiles(0,\"\");\n\n\n\t\t\t\t//      }, 2000);\n\t\t\t\t//  });\n\n\n    // toastr.options = {\n    //   \"closeButton\": true,\n    //   \"debug\": false,\n    //   \"positionClass\": \"toast-bottom-right\",\n    //   \"onclick\": null,\n    //   \"showDuration\": \"300\",\n    //   \"hideDuration\": \"1000\",\n    //   //\"timeOut\": \"300000\",\n    //   //\"extendedTimeOut\": \"1000\",\n    //   \"showEasing\": \"swing\",\n    //   \"hideEasing\": \"linear\",\n    //   \"showMethod\": \"fadeIn\",\n    //   \"hideMethod\": \"fadeOut\"\n    // };\n\n\t}\n\n\taddBUH(){\n\t\tthis.fnCRUD(\"add\");\n\t}\n\n\tfnCRUD(value)\n\t{\n\t\tthis._disableCells=true;\n\t\tthis._disableSave=true;\n\t\tthis._disableDelete=true;\n\t\tthis._disableAdd=true;\n\t\tthis._disableGrid=true;\n\t\tthis._disableSearch=true;\n\t\tswitch(value){\n\t\t\tcase \"cancel\":\n\t\t\t{\n\t\t\t\tthis._disableSearch=false;\t\n\t\t\t\tthis._disableAdd=false;\n\t\t\t\tthis._objBUH={\n\t\t\t\t\tBUH_PERSONNEL_ID: 0,\n\t\t\t\t\tOPTIONAL_GLOBAL_ID: \"\",\n\t\t\t\t\tFIRST_NAME: \"\",\n\t\t\t\t\tMIDDLE_NAME: \"\",\n\t\t\t\t\tLAST_NAME: \"\",\n\t\t\t\t\tEMAIL_ADDRESS: \"\",PROGRAMS:[]};\n\t\t\t\tthis._status=\"\";\t\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\tcase \"search\":\n\t\t\t\t{\n\t\t\t\t\tthis.searchExistingBuh();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\tcase \"add\":\n\t\t\t\t{\n\t\t\t\t\tthis._status=\"add\";\n\t\t\t\t\tthis._disableCells=false;\n\t\t\t\t\tthis._disableSave=false;\n\t\t\t\t\tthis._objBUH={\n\t\t\t\t\t\tBUH_PERSONNEL_ID: \"\",\n\t\t\t\t\t\tOPTIONAL_GLOBAL_ID: \"\",\n\t\t\t\t\t\tFIRST_NAME: \"\",\n\t\t\t\t\t\tMIDDLE_NAME: \"\",\n\t\t\t\t\t\tLAST_NAME: \"\",\n\t\t\t\t\t\tEMAIL_ADDRESS: \"\",PROGRAMS:[]};\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"delete\":\n\t\t\t\t\t{\n\n\t\t\t\t\t\tvar varDelete =confirm(\"Delete BUH?\");\n\n\n\t\t\t\t\t\tif(varDelete)\n\t\t\t\t\t\t{\n\n\n\t\t\t\t\t\t\tfor (var i = this._objBUH.PROGRAMS.length - 1; i >= 0; i--) {\n\t\t\t\t\t\t\t\tvar found = this._programs.find((all)=>all.PROGRAM_CD==this._objBUH.PROGRAMS[i].PROGRAM_CD);\n\t\t\t\t\t\t\t\tfound.BUH_PERSONNEL_ID=0;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar getBUHForEdit = EntityQuery().from('BUH_PERSONNEL').where(\"BUH_PERSONNEL_ID\",\"==\",this._objBUH.BUH_PERSONNEL_ID);\n\t\t\t\t\t\t\tEntityManager().executeQuery(getBUHForEdit).then((success) => {\n\t\t\t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\n\t\t\t\t\t\t\t\tEntityManager().saveChanges().then((success) => {\n\n\t\t\t\t\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"Program\");\n\n\t\t\t\t\t\t\t\t}, (fail) => {\n\n\t\t\t\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\n\t\t\t\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\n\t\t\t\t\t\t\t\t\t\tif (errors.length > 0)\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(errors);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tthis.fnCRUD(\"cancel\");\n\n\n\t\t\t\t\t\t\t});\n\n\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._disableCells=false;\n\t\t\t\t\t\tthis._disableSave=false;\n\t\t\t\t\t\tthis._disableDelete=false;\n\t\t\t\t\t\tthis._disableAdd=false;\n\t\t\t\t\t\tthis._disableGrid=false;\n\t\t\t\t\t\tthis._disableSearch=false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"save\":\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.saveBUH();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsaveBUH()\n\t\t\t{\n\t\t\t\tif(this._status==\"view\")\n\t\t\t\t{\n\t\t\t\t\tvar getBUHForEdit = EntityQuery().from('BUH_PERSONNEL').where(\"BUH_PERSONNEL_ID\",\"==\",this._objBUH.BUH_PERSONNEL_ID);\n\t\t\t\t\tEntityManager().executeQuery(getBUHForEdit).then((success) => {\n\t\t\t\t\t\t\n\t\t\t\t\t\tsuccess.results[0].OPTIONAL_GLOBAL_ID=this._objBUH.OPTIONAL_GLOBAL_ID.toUpperCase();\n\t\t\t\t\t\tsuccess.results[0].FIRST_NAME=this._objBUH.FIRST_NAME.toUpperCase();\n\t\t\t\t\t\tsuccess.results[0].MIDDLE_NAME=this._objBUH.MIDDLE_NAME.toUpperCase();\n\t\t\t\t\t\tsuccess.results[0].LAST_NAME=this._objBUH.LAST_NAME.toUpperCase();\n\t\t\t\t\t\tsuccess.results[0].EMAIL_ADDRESS=this._objBUH.EMAIL_ADDRESS.toUpperCase();\n\n\t\t\t\t\t\tEntityManager().saveChanges().then((success) => {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"New Business Unit Head\");\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis._disableDelete=false;\n\t\t\t\t\t\t\tthis._disableGrid=false;\n\t\t\t\t\t\t\tthis._disableAdd=false;\n\t\t\t\t\t\t\tthis._disableSearch=false;\n\t\t\t\t\t\t\tthis._disableCells=false;\n\t\t\t\t\t\t\tthis._disableSave=false;\n\n\t\t\t\t\t\t}, (fail) => {\n\n\t\t\t\t\t\t\tif(varInsert!=null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvarInsert.entityAspect.setDeleted();  \n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\n\t\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\n\t\t\t\t\t\t\t\tif (errors.length > 0)\n\t\t\t\t\t\t\t\t\tconsole.log(errors);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconsole.log(fail);\n\t\t\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\n\t\t\t\t\t\t});\n\n\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t///INSERTING\n\t\t\tvar getMax = EntityQuery().from('BUH_PERSONNEL').orderByDesc('BUH_PERSONNEL_ID').take(1);\n\t\t\tEntityManager().executeQuery(getMax).then((successMax) => {\n\t\t\t\tvar getMax = 1;\n\n\t\t\t\tif (successMax.results.length > 0)\n\t\t\t\t\tgetMax = successMax.results[0].BUH_PERSONNEL_ID + 1;\n\n\n\t\t\t\tvar varInsert = EntityManager().createEntity('BUH_PERSONNEL', {\n\t\t\t\t\tBUH_PERSONNEL_ID: getMax,\n\t\t\t\t\tOPTIONAL_GLOBAL_ID: this._objBUH.OPTIONAL_GLOBAL_ID.toUpperCase(),\n\t\t\t\t\tFIRST_NAME: this._objBUH.FIRST_NAME.toUpperCase(),\n\t\t\t\t\tMIDDLE_NAME: this._objBUH.MIDDLE_NAME.toUpperCase(),\n\t\t\t\t\tLAST_NAME: this._objBUH.LAST_NAME.toUpperCase(),\n\t\t\t\t\tEMAIL_ADDRESS: this._objBUH.EMAIL_ADDRESS.toUpperCase(),\n\t\t\t\t\tCREATED_BY: \"PAULV\",\n\t\t\t\t\tCREATED_DT: new Date(Date.now()),\n\t\t\t\t});\n\n\t\t\t\tEntityManager().addEntity(varInsert);\n\n\t\t\t\tEntityManager().saveChanges().then((success) => {\n\n\t\t\t\t\tthis._objBUH.BUH_PERSONNEL_ID=getMax;\n\n\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"New Business Unit Head\");\n\n\t\t\t\t\tthis._disableDelete=false;\n\t\t\t\t\tthis._disableGrid=false;\n\t\t\t\t\tthis._disableAdd=false;\n\t\t\t\t\tthis._disableSearch=false;\n\t\t\t\t\tthis._disableDelete=false;\n\t\t\t\t\tthis._disableCells=false;\n\t\t\t\t\tthis._disableSave=false;\n\t\t\t\t\tthis._status=\"view\";\n\n\t\t\t\t}, (fail) => {\n\n\t\t\t\t\tif(varInsert!=null)\n\t\t\t\t\t{\n\t\t\t\t\t\tvarInsert.entityAspect.setDeleted();  \n\t\t\t\t\t}\n\n\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\n\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\n\t\t\t\t\t\tif (errors.length > 0)\n\t\t\t\t\t\t\tconsole.log(errors);\n\t\t\t\t\t});\n\t\t\t\t\tconsole.log(fail);\n\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\n\t\t\t\t});\n\n\t\t\t});\n\n\n\n\t\t}\n\n\n\t\tdeleteSelected(index)\n\t\t{\n\t\t\tvar varDelete =confirm(\"Delete record?\");\n\t\t\tif(varDelete)\n\t\t\t{\n\n\t\t\t\tvar found = this._programs.find((all)=>all.PROGRAM_CD==this._objBUH.PROGRAMS[index].PROGRAM_CD);\n\t\t\t\tfound.BUH_PERSONNEL_ID=0;\n\n\n\t\t\t\tEntityManager().saveChanges().then((success) => {\n\n\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"Program\");\n\n\t\t\t\t}, (fail) => {\n\n\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\n\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\n\t\t\t\t\t\tif (errors.length > 0)\n\t\t\t\t\t\t\tconsole.log(errors);\n\t\t\t\t\t});\n\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\n\t\t\t\t});\n\n\n\t\t\t\tthis._objBUH.PROGRAMS.splice(index,1);\t\n\t\t\t}\n\t\t\t\n\t\t}\n\n\n\t\tsearchExistingBuh(){\n\t\t\t\n\t\t\tthis.dialogService.open({\n\t\t\t\tviewModel: buhSearch\n            }).whenClosed(response => {\n\n\t\t\t\tif (!response.wasCancelled) {\n\t\t\t\t\tthis.searchBUH(response.output);\n\t\t\t\t\tthis._disableGrid=false;\n\t\t\t\t\tthis._disableDelete=false;\n\t\t\t\t\tthis._disableSave=false;\n\t\t\t\t\tthis._disableCells=false;\n\t\t\t\t} \n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis._disableSearch=false;\n\t\t\t\t\tthis._disableAdd=false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tsearchBUH(item)\n\t\t{\n\t\t\tthis._status=\"view\";\n\n\t\t\tthis._objBUH.BUH_PERSONNEL_ID=item.BUH_PERSONNEL_ID;\n\t\t\tthis._objBUH.OPTIONAL_GLOBAL_ID=item.OPTIONAL_GLOBAL_ID;\n\t\t\tthis._objBUH.FIRST_NAME=item.FIRST_NAME;\n\t\t\tthis._objBUH.MIDDLE_NAME=item.MIDDLE_NAME;\n\t\t\tthis._objBUH.LAST_NAME=item.LAST_NAME;\n\t\t\tthis._objBUH.EMAIL_ADDRESS=item.EMAIL_ADDRESS;\n\n\t\t\tthis._disableAdd=false;\n\t\t\tthis._disableSearch=false;\n\n\t\t\tthis._objBUH.PROGRAMS=[];\n\n\t\t\tvar found = this._programs.filter((all)=>all.BUH_PERSONNEL_ID==item.BUH_PERSONNEL_ID);\n\t\t\t\n\t\t\tif(found!==undefined)\n\t\t\t\tfound.forEach((foundItems)=>\n\t\t\t\t{\t\n\t\t\t\t\tthis._objBUH.PROGRAMS.push(foundItems);\n\t\t\t\t});\n\t\t\t\n\t\t}\n\n\n\t\tsearchPrograms(){\t\n\t\t\tthis.dialogService.open({\n\t\t\t\tviewModel: buhProgramDialog\n            }).whenClosed(response => {\n\n\t\t\t\tif (!response.wasCancelled) {\n\n\t\t\t\t\tfor (var a = response.output.length - 1; a >= 0; --a) {\n\t\t\t\t\t\tvar found = this._programs.find((all)=>all.PROGRAM_CD==response.output[a].PROGRAM_CD);\n\t\t\t\t\t\tconsole.log(found.BUH_PERSONNEL_ID);\n\t\t\t\t\t\tif(found.BUH_PERSONNEL_ID==0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis._objBUH.PROGRAMS.push(response.output[a]);\n\t\t\t\t\t\t\tfound.BUH_PERSONNEL_ID=this._objBUH.BUH_PERSONNEL_ID;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttoastr.error(\"<strong>\"+found.PROGRAM_TITLE+\"</strong> cannot be added, it is assigned to other BUH Personnel.\", \"Problem occured\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tEntityManager().saveChanges().then((success) => {\n\n\t\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"Program\");\n\n\t\t\t\t\t}, (fail) => {\n\n\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\n\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\n\t\t\t\t\t\t\tif (errors.length > 0)\n\t\t\t\t\t\t\t\tconsole.log(errors);\n\t\t\t\t\t\t});\n\t\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\n\t\t\t\t\t});\n\n\n\n\n\t\t\t        \t//this._objBUH.PROGRAMS=response.output;\n\t\t\t        } \n\t\t\t    });\n\t\t}\n\n\t\tfnInitMasterfiles(initType,output){\n\n\t\t\tif(this.masterFilesLoaded==false)\n\t\t\t{\n\t\t\t\tthis._toastr = toastr;\n\t\t\t\ttoastr.info(\"Masterfiles...\", \"Loading please wait..\", { timeOut: 15000 });\n\t\t\t\tthis.loginDisabled = true;\n\t\t\t\tloadMasterfiles().then(() => {\n\t\t\t\t\tloadLookups().then(() => {\n                        \n\t\t\t\t\t\tthis.masterFilesLoaded = true;\n\n\t\t\t\t\t\tthis.fnPassUserObject(initType,output);\n\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.fnPassUserObject(initType,output);\n\t\t\t}\n\t\t}\n\n\n\t\tfnLogin(){\n\t\t\tthis.dialogService.open({\n\t\t\t\tviewModel: login\n            }).whenClosed(response => {\n\n\t\t\t\tif (!response.wasCancelled) {\n\t\t\t\t\tthis.fnInitMasterfiles(1, response.output);\n\t\t\t\t} else {\n\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfnPassUserObject(initType,output){\n\n\t\t\tif (initType == 1) {\n\n\n\t\t\t} else {\n\t\t\t\tvar varCookie = checkCookie(\"PPMS_USER\");\n\t\t\t\tvar varSplitCookie = varCookie.split('^');\n\t\t\t\tthis._user = {\n\t\t\t\t\tUSER_ID: varSplitCookie[0],\n\t\t\t\t\tCOMPANY_ID: varSplitCookie[1],\n\t\t\t\t\tIs_HR: varSplitCookie[2],\n\t\t\t\t\tIs_Branch: varSplitCookie[0]\n\t\t\t\t};\n\n\t\t\t\tthis.loginDisabled = true;\n\t\t\t\tthis.logoutDisabled = false;\n\t\t\t\tthis.showingLogout = \"visible\";\n\t\t\t\ttoastr.clear();\n\t\t\t\ttoastr.success(\"Let's Start...\", \"Success\");\n\t\t\t\tthis._disableAdd=false;\n\t\t\t\tthis._disableSearch=false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.LoginPassed(output);\n\n\t\t}\n\n\t\tLoginPassed(user) {\n\n\t\t\tthis._user = user; \n\n      //console.log(user.USER_ID+\"^\"+user.COMPANY_ID+\"^\"+user.Is_HR+\"^\"+user.Is_Branch);\n\n      setCookie(\"PPMS_USER\", user.USER_ID+\"^\"+user.COMPANY_ID+\"^\"+user.Is_HR+\"^\"+user.Is_Branch, 30);\n      toastr.clear();\n      toastr.success(\"Let's Start...\", \"Success\");\n\n      this.logoutDisabled = false;\n      this.loginDisabled=true;\n\n      this.showingLogout = \"visible\";\n      this._disableAdd=false;\n\t  this._disableSearch=false;\n  }\n\n\n\n  logout() {\n  \tthis.fnCRUD(\"cancel\");\n  \tthis._disableAdd=true;\n\tthis._disableSearch=true;\n  \tthis.loginDisabled=false;\n  \tthis.logoutDisabled=true;\n\n  \tthis._user ={};\n  \tremoveCookie();\n  \tthis.showingLogout = \"hidden\";\n  \tthis.fnLogin();\n\n  }\n}","export class cache_budget{\r\n    HEADER = {};\r\n    REGULAR = [];\r\n    SEMI_REGULAR = [];\r\n    STAFF = [];\r\n    GUEST=[];\r\n    USER={};\r\n    TOTAL=0;\r\n    STATUS = \"NONE\";\r\n    IS_COPYING=false;\r\n    _INPUT_AMT_REGULAR=0;\r\n    _INPUT_AMT_SEMI_REGULAR=0;\r\n    _INPUT_AMT_STAFF=0;\r\n    _INPUT_AMT_GUEST=0;\r\n    _INPUT_AMT_TOTAL=0;\r\n    IS_COPYING = false;\r\n    _LOADING_BUDGET = 0;\n   \r\n    CALLER={ACTION:null,ACTION_CALLER:null,VALUE1:null,VALUE2:null,VALUE3:null,VALUE4:null};\r\n    OBSERVERS = {\r\n       \r\n        clear_budget_modal:[], //0, \r\n        budget_dialog: [], \r\n        copy_template_guest:[],\r\n        copy_template:[],\r\n        budget_refresh:[], //0\r\n        reset_all:[],\r\n        refreshPersonnelTab:[], //1\r\n        reset_summary:[],//0\r\n        pass_program:[],\r\n        budget_loaded: [],\n        disable_search_personnel:[]\r\n    };\r\n}","import {bindable, inject} from 'aurelia-framework';\r\nimport {ObserverLocator} from 'aurelia-binding';\r\nimport {  cache_obj } from 'cache_obj';\r\n\r\n@inject(ObserverLocator,cache_obj)\r\nexport class gridpaging{\r\n\t\r\n\t@bindable to;\r\n\t@bindable pageindex;\r\n\t@bindable divby;\r\n\tshowing=false;\r\n\t_buttonTitle = 'Search';\r\n\t_isDisableElement=true;\r\n\t_Pages = [[]];\r\n\t_PagesShow = [];\r\n\t_currentIndex=0;\r\n\t_cache_obj;\r\n\tconstructor(observerLocator,cache_obj){\r\n\t\tthis._cache_obj=cache_obj;\r\n\r\n\t\t var subscription = observerLocator\r\n      .getObserver(this, 'to')\r\n      .subscribe(()=>{ this.onChange(); });\r\n\r\n      \tthis._cache_obj.OBSERVERS.enable_modal_button.push((id, val) => {\r\n\t\t\tthis.enableButton(id,val);\r\n\t\t});\r\n\r\n\t}\r\n\r\n  onChange() \r\n  {\r\n\t\ttry \r\n\t\t{\r\n\t\t\tthis._Pages = [];\r\n\t\t\tthis._PagesShow = [];\r\n\t\t\tif (this.to != undefined && this.to != null) {\r\n\t\t\t\t\r\n\t\t\t\tvar intByTmp = 0;\r\n\t\t\t\tvar intDivTmp = 0;\r\n\t\t\t\tthis._Pages.push([]);\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i <= Math.ceil(this.to / this.divby) - 1; ++i) {\r\n\r\n\t\t\t\t\tif (intDivTmp >= 10) {\r\n\r\n\t\t\t\t\t\tthis._Pages.push([]);\r\n\t\t\t\t\t\t++intByTmp;\r\n\t\t\t\t\t\tintDivTmp = 1;\r\n\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t\t++intDivTmp;\r\n\r\n\t\t\t\t\tthis._Pages[intByTmp].push(i + 1);\r\n\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis._PagesShow=this._Pages[0];\r\n\t\t\t\tthis._currentIndex=0;\r\n\t\t\t\tthis.pageindex=0;\r\n\t\t\t\t// console.log(this._Pages.length);\r\n\t\t\t\t// console.log(this.to);\r\n\t\t\t}\r\n\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n  }\r\n\r\n\tendClick(endValue) {\r\n\r\n\t\tif (endValue == 0 && this._currentIndex > 0) {\r\n\t\t\t--this._currentIndex;\r\n\t\t} else if (endValue == 1 && this._currentIndex < this._Pages.length-1) {\r\n\t\t\t++this._currentIndex;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._PagesShow = this._Pages[this._currentIndex];\r\n\r\n\r\n\t\tthis.pageindex = this._Pages[this._currentIndex][0] - 1\r\n\r\n\t}\r\n  selectedClick(endValue){\r\n  \tthis.pageindex=this._Pages[this._currentIndex][endValue]-1;\r\n  }\r\n  \r\n\r\n\t//@handle('init.modal')\r\n    InitializeModal() {\r\n\r\n   //  \t\tthis._buttonTitle = this.to.buttonTitle;\r\n\t\t\t// this._setTitle = this.to.title;\r\n\t\t\t// this._id = this.to.id;\r\n    }\r\n\r\n\r\n\t//@handle('enable.modal.button')\r\n\tenableButton(id ,isEnabled){\r\n\t\tif(this._id==id)\r\n\t\tthis._isDisableElement=!isEnabled;\r\n\t}\r\n}","\r\nimport { inject } from 'aurelia-framework';\r\nimport { cache_obj } from 'cache_obj';\r\nimport settings from 'settings';\n@inject(cache_obj)\nexport class actual_cost{\n    _cache_obj;\r\n    constructor(cache_obj) {\n        this._cache_obj = cache_obj;\n        //console.log(this._cache_obj.USER);\r\n    //  window.location.href=\"http://absppms2:8084/\";\r\n      //window.location.href=\"http://localhost:15253/\";\r\n  }\r\n\r\n}\r\n","import {bindable,inject} from 'aurelia-framework';\r\nimport { cache_budget } from 'ppfcs/cache_budget';\r\nimport { EntityManager, EntityQuery, generateID } from 'entity-manager-factory';\r\n//import {handle, Dispatcher} from 'aurelia-flux';  \r\nimport { getLookups } from 'masterfiles';\r\nimport {  substringMatcher } from 'helpers';\r\nimport typeahead from 'typeahead';\r\nimport settings from 'settings';\r\nimport _ from 'underscore';\r\nimport numeral from 'numeral';\r\nimport toastr from \"toastr\";\r\nimport { MultiObserver }from 'multi-observer';\r\nimport { paymentterm } from '../../modals/paymentterm';\r\nimport {DialogService} from 'aurelia-dialog';\r\n\r\n@inject(MultiObserver,DialogService)\r\nexport class GuestCustomElement {\r\n\r\n  @bindable to;\r\n  _cache_budget = null;\r\n  //_dispatcher;\r\n  _enableAdd=false;\r\n  _enableRemove=false;\r\n  _signal;\r\n  _PYMNTTERM;\r\n  dialogService=null;\r\n  constructor(cache_budget, multiObserver, dialogService) {\n      if (EntityManager() === undefined) {\n          return;\r\n      }\n\n      this._cache_budget = cache_budget;\r\n    this.dialogService=dialogService;\r\n   \r\n    \r\n    this._cache_budget.OBSERVERS.budget_dialog.push((val) => {\r\n      this.fnCheckBudget(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.copy_template_guest.push(() => {\r\n      this.fnCallCopy();\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.reset_all.push(() => {\r\n      this.resetView();\r\n    });\r\n\n    this._PYMNTTERM = getLookups().PAYMENT_TERM;\n\r\n  }\r\n  \r\n\r\n  fnModalPaymentTerm(){\r\n    this.dialogService.open({\r\n      viewModel: paymentterm\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        this.passTerm(response.output);\r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  passTerm(term) {\r\n      this._cache_budget.GUEST[0].PAYMENT_TERM=term.REF_DESC\r\n      this._cache_budget.GUEST[0].PYMNT_TERM_CD = term.REF_CD;\r\n  }\r\n\n  \r\n  //LoginPassed() {\r\n  //  this._PYMNTTERM = getLookups().PAYMENT_TERM;\r\n  //}\r\n\r\n  //@handle('budget.dialog')\r\n  fnCheckBudget(value) {\r\n\r\n    var _query = EntityQuery().from('BDGT_TMPL_GUEST_DTL').where('BDGT_TMPL_ID', '==', value);\r\n    EntityManager().executeQuery(_query).then((found) => {\r\n      \r\n        this._cache_budget.GUEST = found.results;\r\n      \r\n      var varRefCd = [];\r\n\r\n      _.each(this._cache_budget.GUEST, (item) => {\r\n\r\n        for (var i = 0; i <= this._PYMNTTERM.length - 1; ++i) {\r\n          if (this._PYMNTTERM[i].REF_CD == item.PYMNT_TERM_CD) {\r\n            item.PAYMENT_TERM = this._PYMNTTERM[i].REF_DESC;\r\n            break;\r\n          }\r\n        };\r\n\r\n        \r\n        item.PAY_RATE_FACTOR_TMP=numeral(item.PAY_RATE_FACTOR).format('0,0.00');\r\n        item.INPUT_AMT_TMP=numeral(item.INPUT_AMT).format('0,0.00');\r\n        item.visible=true;\r\n      });\r\n\r\n      this._enableAdd=false;\r\n      this._enableRemove=false;\r\n\r\n      if (this._cache_budget.GUEST.length==0)\r\n        this._enableAdd=true;\r\n      else\r\n        this._enableRemove=true;        \r\n\r\n\r\n      // this.fnReloadTypeahead();\r\n\r\n      //this._cache_budget.CALLER.ACTION='reset.summary';\r\n\r\n      this._cache_budget.OBSERVERS.reset_summary.forEach((all) => {\r\n        all();\r\n      });\r\n\r\n      if (this._cache_budget.GUEST.length>0)\r\n        toastr.success(\"GUEST PERSONNEL\", \"Loading Successful.\");\r\n      //this._dispatcher.dispatch('reset.summary');\r\n\r\n    });\r\n\r\n  }\r\n\r\n //@handle('copy.template')\r\n fnCallCopy()\r\n {\r\n   // console.log('passed');\r\n  //if (use==\"GUEST\") {\r\n    this.saveGuest();\r\n  //}\r\n}\r\n\r\n\r\n\r\n  // //CREATE typeahead on focus instead...........!!!!!!!!!!!!\r\n  // fnReloadTypeahead() {\r\n\r\n  //   $('.pymnttrmclass').typeahead('destroy');\r\n\r\n  //   var varCnt = 0;\r\n\r\n  //   _.each($(this.tblData).find(\".pymnttrmclass\"), (all) => {\r\n\r\n  //     $(all).attr(\"tableTermIndex\", varCnt);\r\n  //     ++varCnt;\r\n  //   });\r\n\r\n\r\n  //   $(\"input[tableTermIndex*='\" + 0 + \"']\")\r\n  //     .typeahead({\r\n  //       hint: false,\r\n  //       highlight: true,\r\n  //       minLength: 1,\r\n  //       limit: 10\r\n  //     }, {\r\n  //       source: substringMatcher(this._PYMNTTERM.map((item) => {\r\n  //         return item.REF_DESC\r\n  //       }))\r\n\r\n\r\n  //     });\r\n\r\n  // }\r\n\r\n  fnAddGuest(){\r\n      if (this._cache_budget.GUEST.length>0)\r\n    {\r\n          this._cache_budget.GUEST[0].visible=true;  \r\n    }\r\n    else\r\n          this._cache_budget.GUEST.push({INPUT_AMT_TMP:numeral(0).format('0,0.00'),PAY_RATE_FACTOR_TMP:numeral(1).format('0,0.00'),\r\n        INPUT_AMT:0,PAY_RATE_FACTOR:1,visible:true});\r\n\r\n      //delayed bec breeze is still processing\r\n      // setTimeout(()=>{\r\n      //   this.fnReloadTypeahead();\r\n      // },200);\r\n      \r\n\r\n      this._enableAdd=false;\r\n      this._enableRemove=true;\r\n      this._signal = generateID();\r\n    }\r\n\r\n    \r\n  //@handle('reset.all')\r\n  resetView() {\r\n    this._signal = generateID();\r\n  }\r\n  \r\n  fnRemoveGuest() {\r\n      if (this._cache_budget.GUEST.length > 0) {\r\n          this._cache_budget.GUEST[0].visible = false;\r\n    }\r\n\r\n    this._enableAdd = true;\r\n    this._enableRemove = false;\r\n    this._signal = generateID();\r\n  }\r\n\r\n  saveGuest(){\r\n\r\n\r\n      if (this._cache_budget.GUEST.length > 0) {\r\n          if (this._cache_budget.GUEST[0].PYMNT_TERM_CD == \"\" || this._cache_budget.GUEST[0] == undefined || this._cache_budget.GUEST[0] == null) {\r\n        toastr.error(\"<strong>Payment Term not defined</strong><br /><br />Saving cancelled.\", \"Problem occured\");\r\n        return;\r\n      }\r\n    }\r\n\r\n\r\n    var getMax = EntityQuery().from('BDGT_TMPL_GUEST_DTL').orderByDesc('BDGT_TMPL_GUEST_DTL_ID').take(1);\r\n    EntityManager().executeQuery(getMax).then((successMax) => {\r\n      var getMax = 1;\r\n\r\n      if (successMax.results.length > 0)\r\n        getMax = successMax.results[0].BDGT_TMPL_GUEST_DTL_ID + 1;\r\n\r\n\r\n      //console.log(this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n      var _query = EntityQuery().from('BDGT_TMPL_GUEST_DTL').where('BDGT_TMPL_ID', '==', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n      EntityManager().executeQuery(_query).then((found) => {\r\n\r\n        \r\n          if (this._cache_budget.GUEST.length>0)\r\n              if (this._cache_budget.GUEST[0].visible) {\r\n\r\n            if (found.results.length > 0) {\r\n\r\n                found.results[0].BDGT_AMT = parseFloat(this._cache_budget.GUEST[0].INPUT_AMT_TMP.replace(/,/g,''));\r\n                found.results[0].PYMNT_TERM_CD = this._cache_budget.GUEST[0].PYMNT_TERM_CD;\r\n                found.results[0].INPUT_AMT = parseFloat(this._cache_budget.GUEST[0].INPUT_AMT_TMP.replace(/,/g,''));\r\n                found.results[0].PAY_RATE_FACTOR = parseFloat(this._cache_budget.GUEST[0].PAY_RATE_FACTOR_TMP.replace(/,/g,''));\r\n                found.results[0].REMARKS = this._cache_budget.GUEST[0].REMARKS;\r\n\r\n                found.results[0].LAST_UPDATED_BY = this._cache_budget.USER.USER_ID;\r\n              found.results[0].LAST_UPDATED_DT =  new Date();\r\n\r\n              \r\n            } else {\r\n\r\n              var varInsert = EntityManager().createEntity('BDGT_TMPL_GUEST_DTL', {\r\n                BDGT_TMPL_GUEST_DTL_ID: getMax,\r\n                PYMNT_TERM_CD: this._cache_budget.GUEST[0].PYMNT_TERM_CD,\r\n                INPUT_AMT: parseFloat(this._cache_budget.GUEST[0].INPUT_AMT_TMP.replace(/,/g,'')),\r\n                BDGT_AMT: parseFloat(this._cache_budget.GUEST[0].INPUT_AMT_TMP.replace(/,/g,'')),\r\n                PAY_RATE_FACTOR: parseFloat(this._cache_budget.GUEST[0].PAY_RATE_FACTOR_TMP.replace(/,/g,'')),\r\n                REMARKS: this._cache_budget.GUEST[0].REMARKS,\r\n                BDGT_TMPL_ID: this._cache_budget.HEADER.BDGT_TMPL_ID,\r\n                CREATED_BY: this._cache_budget.USER.USER_ID,\r\n                CREATED_DT: new Date()\r\n              });\r\n              \r\n              EntityManager().addEntity(varInsert);\r\n\r\n            }\r\n          }\r\n          else\r\n          {\r\n            if (found.results.length > 0)\r\n              found.results[0].entityAspect.setDeleted();\r\n          }\r\n\r\n\r\n          EntityManager().saveChanges().then((success) => {\r\n            this.fnCheckBudget(this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n            toastr.success(\"Succesfully Saved\", \"GUEST\");\r\n\r\n          }, (fail) => {\r\n\r\n            EntityManager().getEntities().forEach(function(entity) {\r\n              var errors = entity.entityAspect.getValidationErrors();\r\n              if (errors.length > 0)\r\n                console.log(errors);\r\n            });\r\n            console.log(fail);\r\n            toastr.error(\"Error Occured\",\r\n              fail);\r\n          });\r\n\r\n        });\r\n\r\n\r\n    });\r\n\r\n  }\r\n\r\n  fnRegularBlurEvt(item, index) {\r\n\r\n    // if($(\"input[tableTermIndex*='\" + index + \"']\").val()===undefined) return;\r\n\r\n\r\n    // this._cache_budget.GUEST[index].PAYMENT_TERM = $(\"input[tableTermIndex*='\" + index + \"']\").val().toUpperCase();\r\n\r\n    //   var varFound = this._PYMNTTERM.find((all) => {\r\n    //     return this._cache_budget.GUEST[index].PAYMENT_TERM.trim() == all.REF_DESC.trim();\r\n    //   });\r\n\r\n    //   if (varFound !== undefined) {\r\n    //     this._cache_budget.GUEST[index].PYMNT_TERM_CD = varFound.REF_CD;\r\n    //   } else\r\n    //     this._cache_budget.GUEST[index].PYMNT_TERM_CD = \"\";\r\n\r\n  }\r\n\r\n  fnRegularFocus(index, prop) {\r\n\r\n    this.fnModalPaymentTerm();\r\n    \r\n  }\r\n\r\n\r\n  // fnRegularFocus(index) {\r\n\r\n  //   // if ($(\"input[tableTermIndex*='\" + index + \"']\").attr(\"hasTypeahead\") !== undefined) {\r\n  //   //   return;\r\n  //   // }\r\n\r\n  //   // $(\"input[tableTermIndex*='\" + index + \"']\").attr(\"hasTypeahead\", \"true\");\r\n\r\n  //   $(\"input[tableTermIndex*='\" + index + \"']\").focus();\r\n\r\n  // }\r\n\r\n  AmountBlur(item, property) {\r\n    var varConverted = numeral(item[property]).format('0,0.00');\r\n    item[property] = varConverted;\r\n  }\r\n\r\n}","import {bindable,inject} from 'aurelia-framework';\r\nimport { cache_obj } from 'cache_obj';\nimport { cache_budget } from 'ppfcs/cache_budget';\r\nimport { EntityManager, EntityQuery, generateID} from 'entity-manager-factory';\r\n//import {handle, Dispatcher} from 'aurelia-flux';  \r\nimport { getLookups } from 'masterfiles';\r\nimport settings from 'settings';\r\n// import $ from 'jquery';\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport toastr from \"toastr\";\r\nimport moment from 'moment';\r\nimport _ from 'underscore';\r\nimport { MultiObserver }from 'multi-observer';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport { program } from '../../modals/program';\r\nimport { budget } from '../../modals/budget';\r\nimport { confirm_dialog } from '../../modals/confirm_dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n//import  datepicker  from 'bootstrap-datepicker';\r\n\r\n/*\r\n  NOTES\r\n  breeze.debug.js function getUriKey(aspect) is updated\r\n  fmtProperty(kps[0], aspect) is replaced by\r\n  fmtProperty(kps[0], aspect).replace(\"M\",\"\") because odata\r\n  is not accepting decimal with 'M' - decimal identity\r\n\r\n  example id 123M is being passed, accepted is 123\r\n  existing primary cannot be replaced to int from decimal bec. ppp is using it.\r\n  if breeze is updated, implement this again\r\n\r\n*/\r\n\r\n\r\n@inject(cache_obj,cache_budget,ModalWizard,toastr,MultiObserver,DialogService)\r\nexport class MainHeaderCustomElement {\r\n  \r\n  @bindable to;\r\n  _cache_obj = null;\r\n  _user;\r\n  //_dispatcher;\r\n  _PROGRAM_GENRE_MSTR=[];\r\n  _TELECAST_MODE_MSTR=[];\r\n  _EPISODE_TYPE_MSTR=[];\r\n  _STATIONS=[];\r\n  _STATUS;//=[\"DRAFT\",\"APPROVED\",\"CLOSED\",\"EXPIRED\"];\r\n  //@bindable modalBudget;\r\n  _COMPANY_ID;\r\n  _ModalWizard;\r\n  \r\n\r\n  _disableCreateBudget = false;\r\n  _disableCancelBudget=true;\r\n  _disableRefreshBudget=true;\r\n  _disableSaveBudget=true;\r\n  _disableBudgetId=false;\r\n  _disablePrintBudget=true;\r\n  _disableCopyBudget=true;\r\n  dialogService=null;\r\n  programDisabled=true;\r\n  budgetDisabled=false;\r\n\r\n  \r\n\r\n  constructor(cache_obj,cache_budget,ModalWizard,toastr,multiObserver,DialogService) {\r\n      if (EntityManager() === undefined) {\r\n         \r\n          return;\r\n      }\r\n\r\n    this.dialogService=DialogService;\r\n    this._cache_obj = cache_obj;\n    this._cache_budget = cache_budget;\r\n    \r\n\r\n    this.LoginPassed(this._cache_obj.USER);\r\n    \r\n    this._cache_budget.OBSERVERS.budget_dialog.push((val) => {\r\n      this.CloseBudgetDialog(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.pass_program.push((val) => {\r\n      this.PassedProgram(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.budget_refresh.push(() => {\r\n      this.fnBudgetRefreshHandle();\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.budget_loaded.push(() => {\r\n       if(this._disableSaveBudget==true)\r\n       {\r\n          this._disableSaveBudget = false;\r\n          settings.isNavigating = false;\r\n          toastr.success(\"Budget has been successfully loaded.\", \"Budget Template\");\r\n       }\r\n    });\r\n\r\n    this._toastr = toastr;\r\n    \r\n    \r\n   // this._dispatcher=Dispatcher;\r\n    this.fnClearHeader();\r\n\r\n\r\n    this._disableCreateBudget = false;\r\n    this._disableCancelBudget=true;\r\n    this._disableRefreshBudget=true;\r\n    this._disableSaveBudget=true;\r\n    this._disableBudgetId=false;\r\n    this._disablePrintBudget=true;\r\n    this._disableCopyBudget=true;\r\n    this._ModalWizard = ModalWizard;\r\n\r\n    \r\n    //this.fnExecuteDatePicker();\r\n    setTimeout(() => {\r\n      \r\n       $('.datepicker').datepicker();\r\n         \r\n      $('#refFrom').datepicker({\r\n          format: \"mm/dd/yyyy\"\r\n        })\r\n        .on(\"changeDate\", () => {\r\n\r\n          if (new Date($('#refFrom').val()) > new Date($('#refTo').val())) {\r\n            toastr.error(\"Invalid date range.\", \"Date Change..\");\r\n            $('#refTo').datepicker(\"setValue\", new Date($('#refFrom').val()));\r\n            return;\r\n          }\r\n\r\n          this._cache_budget.HEADER.BDGT_FROM = $('#refFrom').val();\r\n          if(this._cache_budget.HEADER.BDGT_TO==\"\")\r\n          {\r\n              this._cache_budget.HEADER.BDGT_TO=this._cache_budget.HEADER.BDGT_FROM;\r\n          }\r\n\r\n          $('#refFrom').datepicker('hide');\r\n        });\r\n\r\n\r\n      $('#refTo').datepicker({\r\n          format: \"mm/dd/yyyy\"\r\n        })\r\n        .on(\"changeDate\", () => {\r\n\r\n          if (new Date($('#refTo').val()) < new Date($('#refFrom').val())) {\r\n            toastr.error(\"Invalid date range.\", \"Date Change..\");\r\n            $('#refFrom').datepicker(\"setValue\", new Date($('#refTo').val()));\r\n            return;\r\n          }\r\n\r\n          this._cache_budget.HEADER.BDGT_TO = $('#refTo').val();\r\n          $('#refTo').datepicker('hide');\r\n        });\r\n    }, 1000);\r\n    \r\n\r\n    //UPDATE EXPIRED BUDGET    \r\n    var varToday = new Date(Date.now());\r\n    var p1 = breeze.Predicate.create('BDGT_TO', '<=', new Date(varToday.getFullYear(), varToday.getMonth(), varToday.getDate()));\r\n    var p2 = breeze.Predicate.create('APPR_STAT_CD', '==', \"APP-APPROVED\");\r\n    var pred = breeze.Predicate.and([p1, p2]);\r\n\r\n\r\n    var checkExpired = EntityQuery().from('BDGT_TMPL_HDR').where(pred);\r\n    \r\n    \r\n    EntityManager().executeQuery(checkExpired).then((success) => {\r\n      success.results.forEach((all) => {\r\n        //console.log(all);\r\n        all.APPR_STAT_CD=\"APP-EXPIRED\";\r\n        all.LAST_UPDATED_BY=\"ADMIN\";\r\n        all.LAST_UPDATED_DT= new Date(Date.now());\r\n      });\r\n\r\n      EntityManager().saveChanges().then((success) => {\r\n      //  console.log(success);\r\n      }, (fail) => {\r\n        console.log(fail);\r\n      });\r\n    });\r\n\r\n  }\r\n\r\n  /////cannot use this bec first value is undefined before correct data will be placed by datepicker\r\n  checkDate(id){\r\n\r\n     setTimeout(() => {\r\n     // console.log($(\"#\"+id).val());\r\n     // console.log(Date.parse($(\"#\"+id).val()));\r\n      if(!Date.parse($(\"#\"+id).val()))\r\n      {\r\n        toastr.error(\"Invalid starting date \", \"Date Change..\");  \r\n      }\r\n      else\r\n      {\r\n        $(\"#\"+id).datepicker(\"setValue\", new Date($(\"#\"+id).val()));\r\n      }\r\n\r\n     },1000);\r\n    \r\n    // if(!moment($('#refFrom').val(),'MM-DD-YYYY',true).isValid()){\r\n    //     item\r\n    // }\r\n    // console.log(moment($('#refFrom').val(),'MM-DD-YYYY')._i);\r\n    //   this._cache_budget.HEADER.BDGT_FROM=moment($('#refFrom').val(),'MM-DD-YYYY');\r\n  }\r\n\r\n\r\n  validate() {\r\n\r\n    // var _query = EntityQuery().from('BDGT_TMPL_HDR').where('BDGT_TMPL_ID', '==', '0');\r\n    // this._cache_budget = EntityManager().executeQueryLocally(_query)[0]; //if has offline;\r\n    // //console.log(EntityManager().executeQueryLocally(_query));\r\n    // EntityManager().executeQuery(_query).then((found) => {\r\n    \r\n    // });\r\n  }\r\n\r\n\r\n  inputChanged(evt, value) {\r\n    if (evt.keyCode == 13) {\r\n\r\n    // this._cache_budget.CALLER.VALUE1=this._cache_budget.HEADER.BDGT_TMPL_ID; \r\n    // this._cache_budget.CALLER.ACTION='budget.dialog';\r\n\r\n\r\n    this._cache_budget.OBSERVERS.budget_dialog.forEach((all)=>{\r\n      all(this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n    });\r\n\r\n      // this._dispatcher.dispatch('budget.dialog', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n    }\r\n  }\r\n    \r\n  //@handle('login.passed')\r\n  LoginPassed(user) {\r\n      \r\n    this._user = user.USER_ID;\r\n    this._COMPANY_ID = user.COMPANY_ID;\r\n\r\n   \r\n\r\n    this.budgetDisabled=false;\r\n\r\n    // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n    //   all(this.modalBudget.id, true);\r\n    // });\r\n    \r\n    this.programDisabled=true;\r\n    // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n    //   all(this.modalProgram.id, false);\r\n    // });\r\n\r\n   \r\n    this.fnClearBudget();\r\n\r\n    this._disableCreateBudget=false;\r\n    this._disableCancelBudget=true;\r\n    this._disableRefreshBudget=true;\r\n    this._disableSaveBudget=true;\r\n    this._disablePrintBudget=true;\r\n    this._disableCopyBudget=true;\r\n  }\r\n\r\n  //@handle('loggedout')\r\n  LoggedOut()\r\n  {\r\n      alert(44);\r\n    this._disableCreateBudget = true;\r\n    this._disableCancelBudget = true;\r\n    this._disableRefreshBudget = true;\r\n    this._disableSaveBudget = true;\r\n    this._disablePrintBudget = true;\r\n    this._disableCopyBudget=true;\r\n\r\n    this.budgetDisabled=false;\r\n    // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n    //   all(this.modalBudget.id, false);\r\n    // });\r\n\r\n    this.programDisabled=true;\r\n    // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n    //   all(this.modalProgram.id, false);\r\n    // });\r\n\r\n    //this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n    //this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, false);\r\n\r\n    this.fnClearHeader();\r\n  }\r\n\r\n  fnClearHeader(){\r\n     //var PROGRAM_MSTR={PROGRAM_TITLE:\"\"}  ;\r\n     this._cache_budget.HEADER = {\r\n      BDGT_TMPL_ID:\"\",\r\n      //PROGRAM_MSTR.PROGRAM_TITLE:\"\",\r\n      CHARGE_CD:\"\",\r\n      PROGRAM_GENRE_CD:\"\",\r\n      TELECAST_MODE_CD:\"\",\r\n      EPISODE_TYPE_CD:\"\",\r\n      EPISODES:\"\",\r\n      TAPING_DAYS:\"\",\r\n      BDGT_FROM:\"\",\r\n      BDGT_TO:\"\",\r\n      STATION_ID:\"\",\r\n      APPR_STAT_CD:\"\",\r\n      REMARKS:\"\"\r\n   };\r\n\r\n    while (this._cache_budget.REGULAR.length > 0) {\r\n      this._cache_budget.REGULAR.pop();\r\n    }\r\n    this._cache_budget.REGULAR=[];\r\n\r\n    while (this._cache_budget.SEMI_REGULAR.length > 0) {\r\n      this._cache_budget.SEMI_REGULAR.pop();\r\n    }\r\n    this._cache_budget.SEMI_REGULAR = [];\r\n   \r\n    while (this._cache_budget.STAFF.length > 0) {\r\n      this._cache_budget.STAFF.pop();\r\n    }\r\n    this._cache_budget.STAFF = [];\r\n\r\n    while (this._cache_budget.GUEST.length > 0) {\r\n      this._cache_budget.GUEST.pop();\r\n    }\r\n\r\n    this._cache_budget.GUEST = [];\r\n\r\n    this._cache_budget.OBSERVERS.reset_summary.forEach((all) => {\r\n      all();\r\n    });\r\n\r\n      \r\n    this._disableBudgetId=false;\r\n\r\n     this._cache_budget.OBSERVERS.reset_all.forEach((all) => {\r\n      all();\r\n    });\r\n\r\n    \r\n  }\r\n\r\n  fnClearBudget(){\r\n    this.fnClearHeader();\r\n\r\n    this._PROGRAM_GENRE_MSTR=getLookups().PROGRAM_GENRE_MSTR;\r\n    this._PROGRAM_GENRE_MSTR.unshift({});\r\n    this._TELECAST_MODE_MSTR=getLookups().TELECAST_MODE_MSTR;\r\n    this._TELECAST_MODE_MSTR.unshift({});\r\n    this._EPISODE_TYPE_MSTR=getLookups().EPISODE_TYPE_MSTR;\r\n    this._EPISODE_TYPE_MSTR.unshift({});\r\n    this._STATIONS=settings.STATIONS;\r\n\r\n    this._STATUS=[{}];\r\n    // getLookups().REFERENCE_CD_MSTR.forEach((item)=>{\r\n    //   if(item.REF_GRP_CD=='APPR_STAT_CD')\r\n    //   {\r\n    //       this._STATUS.push(item);\r\n    //       console.log(item);\r\n    //   }\r\n    // });\r\n  }\r\n\r\n  //@handle('budget.dialog')\r\n  CloseBudgetDialog(value) {\r\n      \r\n    var _query = EntityQuery().from('BDGT_TMPL_HDR').where('BDGT_TMPL_ID', '==', value).expand('PROGRAM_MSTR').select('BDGT_TMPL_ID, PROGRAM_MSTR, CHARGE_CD, PROGRAM_GENRE_CD,  TELECAST_MODE_CD,  EPISODE_TYPE_CD,   EPISODES,  TAPING_DAYS, BDGT_FROM, BDGT_TO, STATION_ID, APPR_STAT_CD, REMARKS, CREATED_BY, LAST_UPDATED_BY ');\r\n\r\n    EntityManager().executeQuery(_query).then((found) => {\r\n \r\n        this._STATUS=[{REF_CD:\"APP-DRAFT\",REF_DESC:\"APP-DRAFT\"},{REF_CD:\"APP-APPROVED\",REF_DESC:\"APP-APPROVED\"}];       \r\n        \r\n        if(found.results.length==0) return;\r\n\r\n        this._cache_budget.HEADER = found.results[0];\r\n\r\n        this._cache_budget.HEADER.BDGT_FROM=moment(new Date(this._cache_budget.HEADER.BDGT_FROM)).format('MM-DD-YYYY');\r\n        this._cache_budget.HEADER.BDGT_TO=moment(new Date(this._cache_budget.HEADER.BDGT_TO)).format('MM-DD-YYYY');\r\n        \r\n        this._disableBudgetId=true;\r\n        //update buttons\r\n        this._disableCreateBudget=true;\r\n        this._disableCancelBudget=false;\r\n        this._disableRefreshBudget=false;\r\n\r\n        this._cache_budget._LOADING_BUDGET=1;\r\n        this._disableSaveBudget=true;\r\n        \r\n        this._disablePrintBudget = false;\r\n        this._disableCopyBudget=false;\r\n\r\n        this.budgetDisabled=true;        \r\n        // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n        //   all(this.modalBudget.id, false);\r\n        // });\r\n\r\n        //this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n\r\n        if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-CLOSED\")\r\n        {\r\n          this._STATUS=[{REF_CD:\"APP-CLOSED\",REF_DESC:\"APP-CLOSED\"}];\r\n          this._disableSaveBudget = true;\r\n          //this._disablePrintBudget = true;\r\n        }\r\n        else if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-EXPIRED\")\r\n        {\r\n          this._STATUS=[{REF_CD:\"APP-EXPIRED\",REF_DESC:\"APP-EXPIRED\"}];\r\n          this._disableSaveBudget = true;\r\n          this._disablePrintBudget = true;\r\n          //this._disableCopyBudget=false;\r\n        }\r\n        else if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-DRAFT\")\r\n        {\r\n          \r\n          this.programDisabled=false;\r\n          // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n          //   all( this.modalProgram.id, true);\r\n          // });\r\n\r\n          //this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n\r\n\r\n\r\n          this._cache_budget.OBSERVERS.enable_approved.forEach((all) => {\r\n            all(true);\r\n          });\r\n\r\n          //this._dispatcher.dispatch('enable.approved',true);\r\n        }\r\n        else\r\n        {\r\n\r\n            this._cache_budget.OBSERVERS.enable_approved.forEach((all) => {\r\n              all(false);\r\n            });\r\n\r\n            //this._dispatcher.dispatch('enable.approved', false);\r\n        }\r\n\r\n         if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-APPROVED\")\r\n         {\r\n\r\n            this._cache_budget.STATUS=\"APPROVED\";\r\n            this._disableSaveBudget=true;\r\n\r\n            this.programDisabled=true;\r\n            // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n            //   all(this.modalProgram.id, false);\r\n            // });\r\n\r\n            //this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, false);\r\n         }\r\n         // else if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-APPROVED\")\r\n         // {\r\n         //    this._cache_budget.STATUS=\"EXPIRED\";\r\n         // }\r\n         else\r\n            this._cache_budget.STATUS=\"VIEW\";\r\n\r\n         \r\n        this._cache_budget.OBSERVERS.disable_search_personnel.forEach((all) => {\r\n            all(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-DRAFT\");\r\n        });         \r\n\r\n    },(fail)=>{\r\n      console.log(fail);\r\n\r\n    });\r\n\r\n  }\r\n\r\n  \r\n\r\n\r\n  //@handle('pass.program')\r\n  PassedProgram(value) {\r\n    this._cache_budget.HEADER.PROGRAM_MSTR=value;\r\n    this._cache_budget.HEADER.CHARGE_CD=value.PROGRAM_CD;\r\n\r\n\r\n    // if (this.modalProgram.id == this._ModalWizard.ids[this._ModalWizard.ids.length-1]) {\r\n    //   this._ModalWizard.ids.pop();\r\n\r\n    //   this._cache_budget.OBSERVERS.close_modal.forEach((all)=>{\r\n    //     all(this.modalProgram.id);\r\n    //   });\r\n\r\n    // }\r\n  }\r\n\r\n\r\n  //@handle('budget.refresh')\r\n  fnBudgetRefreshHandle()\r\n  {\r\n      this.fnBudget(\"refresh\");\r\n  }\r\n\r\n  \r\n  fnBudget(call){\r\n\r\n    switch(call)\r\n    {\r\n      case \"create\":\r\n      {\r\n        this._disableCreateBudget=true;\r\n        this._disableCancelBudget=false;\r\n        this._disableRefreshBudget=true;\r\n        this._disableSaveBudget=false;\r\n        this._disableBudgetId=true;\r\n        this._disablePrintBudget = true;\r\n\r\n\r\n        this.budgetDisabled=true;\r\n        this.programDisabled=false;\r\n        // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n        //   all(this.modalBudget.id, false);\r\n        //   all(this.modalProgram.id, true);\r\n        // });\r\n\r\n    \r\n        this._cache_budget.STATUS=\"CREATE\";\r\n        this._STATUS=[{REF_CD:\"APP-DRAFT\",REF_DESC:\"APP-DRAFT\"}];\r\n\r\n        this.fnDialogProgram();\r\n\r\n        break;\r\n      }\r\n      case \"cancel\":\r\n      {\r\n        this.fnClearHeader();\r\n        this._disableCreateBudget=false;\r\n        this._disableCancelBudget=false;\r\n        this._disableRefreshBudget=true;\r\n        this._disableSaveBudget=true;\r\n        this._disablePrintBudget = true;\r\n\r\n        this.budgetDisabled=false;\r\n        this.programDisabled=true;\r\n        // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n        //   all(this.modalBudget.id, true);\r\n        //   all(this.modalProgram.id, false);\r\n        // });\r\n\r\n        // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, false);\r\n        // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, true);\r\n        this._cache_budget.STATUS=\"NONE\";\r\n        break;\r\n      }\r\n      case \"refresh\":\r\n      {\r\n\r\n        this._disableCreateBudget=true;\r\n        this._disableSaveBudget=false;\r\n        this._disableCancelBudget=false;\r\n        this._disableRefreshBudget=false;\r\n        this._disablePrintBudget = true;\r\n    \r\n        this._cache_budget.OBSERVERS.budget_dialog.forEach((all) => {\r\n          all(this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n        });\r\n\r\n        this.budgetDisabled=true;\r\n        this.programDisabled=false;\r\n        // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n        //   all(this.modalBudget.id, false);\r\n        //   all(this.modalProgram.id, true);\r\n        // });\r\n\r\n        // this._dispatcher.dispatch('budget.dialog', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n        // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n        // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n\r\n        break;\r\n      }\r\n      case \"save\":\r\n      {\r\n       \r\n        this.fnSaveBudget(\"\");\r\n\r\n        break;\r\n      }\r\n      case \"print\":\r\n      {\r\n\r\n        var varUseReport=\"\";\r\n        if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-DRAFT\")\r\n        {\r\n            varUseReport=\"Draft\";\r\n        }\r\n        if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-APPROVED\")\r\n        {\r\n            varUseReport=\"Approved\";\r\n        }\r\n\r\n\r\n        if(varUseReport!=\"\")\r\n        {\r\n           // var popup = window.open(\"http://absppms:8080/ReportServer/Pages/ReportViewer.aspx?%2fPPID+Reports%2fBudget_Print&rs:Command=Render&Actual_Cost_id=\"+this._cache_budget.HEADER.BDGT_TMPL_ID+\"&isConfidential=\"+this._cache_obj.ALLOW_PASS_CONFIDENTIAL+\"\", \"popupWindow\", \"width=1280px,height=1024px,scrollbars=yes,directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,addressbar=0,fullscreen=false\");\r\n            var popup = window.open(settings.actualCostWebUrl+\"/report/Budget_\"+varUseReport+\"_Report.aspx?BDID=\"+this._cache_obj.HEADER.BDGT_TMPL_ID+\"&ConcealConfidentialBudgetAmt=\"+this._cache_obj.ALLOW_PASS_CONFIDENTIAL+\"&USER_ACCOUNT=\"+this._user+\"&COMPANY_ID=\"+this._COMPANY_ID, \"popupWindow\", \"width=1280px,height=1024px,scrollbars=yes,directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,addressbar=0,fullscreen=false\");\r\n           popup.moveTo(0, 0);\r\n        }\r\n        \r\n        \r\n         break;\r\n      }\r\n      case \"copy\":\r\n      {\r\n        \r\n\r\n                this.dialogService.open({ viewModel: confirm_dialog, model: 'Copy Template?' }).whenClosed(response => {\r\n          if (!response.wasCancelled) {\r\n             //console.log(response.output);\r\n\r\n\r\n              var varGetHeader = EntityQuery().from('BDGT_TMPL_HDR').where('BDGT_TMPL_ID', '==', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n\r\n              EntityManager().executeQuery(varGetHeader).then((found) => {\r\n                found.results[0].APPR_STAT_CD = \"APP-CLOSED\";\r\n                EntityManager().saveChanges().then((success) => {\r\n\r\n                  this._cache_budget.HEADER.BDGT_TMPL_ID = \"\";\r\n                  this._cache_budget.HEADER.APPR_STAT_CD = \"APP-DRAFT\";\r\n                  this._cache_budget.STATUS = \"DRAFT\";\r\n                  this._cache_budget.IS_COPYING = true;\r\n                  \r\n                  this.fnSaveBudget(\"\");\r\n\r\n                });\r\n              });\r\n\r\n            \r\n\r\n\r\n          } else {\r\n            \r\n          }\r\n         \r\n        });\r\n\r\n      }\r\n      break;\r\n      case \"close\":{\r\n\r\n            this.dialogService.open({ viewModel: confirm_dialog, model: 'Close Template?' }).whenClosed(response => {\r\n          if (!response.wasCancelled) {\r\n            \r\n                //this._cache_budget.HEADER.APPR_STAT_CD='APP-CLOSED';\r\n                this.fnSaveBudget('APP-CLOSED');\r\n           \r\n            \r\n          } else {\r\n            \r\n          }\r\n         \r\n        });\r\n\r\n      }\r\n      break;\r\n\r\n\r\n    }\r\n  }\r\n\r\n\r\n  fnBudgetValidation_1(){\r\n   \r\n      return new Promise((resolve,reject)=>{ \r\n\r\n      var varAddMin = new Date(this._cache_budget.HEADER.BDGT_TO);\r\n      var varSubMin = new Date(this._cache_budget.HEADER.BDGT_FROM);\r\n\r\n      var p1 = breeze.Predicate.create('BDGT_FROM', '>=', new Date(varSubMin.getFullYear(), varSubMin.getMonth(), varSubMin.getDate() - 1));\r\n      var p2 = breeze.Predicate.create('BDGT_TO', '<=', new Date(varAddMin.getFullYear(), varAddMin.getMonth(), varAddMin.getDate() + 1));\r\n      var p3 = breeze.Predicate.create('BDGT_TMPL_ID', '!=', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n      var p4 = breeze.Predicate.create('EPISODE_TYPE_CD', '==', this._cache_budget.HEADER.EPISODE_TYPE_CD);\r\n      var pred = breeze.Predicate.and([p1, p2, p3, p4]);\r\n\r\n      var _query = EntityQuery().from('BDGT_TMPL_HDR').where(pred);\r\n      EntityManager().executeQuery(_query).then((found) => {\r\n        if (found.results !== undefined) {\r\n          var countError=0;\r\n          found.results.forEach((all) => {\r\n            //if (all.APPR_STAT_CD.includes('EXPIRE') || all.APPR_STAT_CD.includes('CLOSE')) {\r\n              toastr.error(\"Budget can only be acceptable if date will be out of range of the last CLOSED/EXPIRED TEMPLATE\");\r\n              ++countError; \r\n            //}\r\n          });\r\n\r\n          if(countError>0)\r\n            reject(false); \r\n          else\r\n            resolve(true);\r\n\r\n        }\r\n        else\r\n          resolve(true);\r\n      });\r\n\r\n          \r\n\r\n      });\r\n\r\n  }\r\n\r\n  fnBudgetValidation_2(){\r\n\r\n     return new Promise((resolve,reject)=>{ \r\n\r\n      var varAddMin = new Date(this._cache_budget.HEADER.BDGT_TO);\r\n      var varSubMin = new Date(this._cache_budget.HEADER.BDGT_FROM);\r\n\r\n      var p3 = breeze.Predicate.create('BDGT_TMPL_ID', '!=', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n      var c1 = breeze.Predicate.create('BDGT_TMPL_HDR.PROGRAM_ID', '==', this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_ID)\r\n\r\n      var pred2 = breeze.Predicate.and([c1, p3]);\r\n      var _queryCheckActual = EntityQuery().from('ACTUAL_COST_HDR').where(pred2).expand(\"BDGT_TMPL_HDR\");\r\n      EntityManager().executeQuery(_queryCheckActual).then((found) => {\r\n\r\n        if (found.results !== undefined) {\r\n\r\n              var varPromises = [];\r\n              found.results.forEach((all) => {\r\n\r\n\r\n                var newPromise = new Promise((resolve_2, reject_2) => {\r\n\r\n                  var varTmpFrom = new Date(all.ACTUAL_FROM.getFullYear(), all.ACTUAL_FROM.getMonth(), all.ACTUAL_FROM.getDate());\r\n                  var varTmpTo = new Date(all.ACTUAL_TO.getFullYear(), all.ACTUAL_TO.getMonth(), all.ACTUAL_TO.getDate());\r\n\r\n                if ((varTmpFrom <= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n                      (varTmpTo <= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpTo >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n                      (varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n                      (varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpTo <= new Date(this._cache_budget.HEADER.BDGT_TO))\r\n                    ) {\r\n                      toastr.error(\"Please enter range beyond the created budget (AC:\" + all.ACTUAL_COST_ID + \")\");\r\n                      reject_2(false); \r\n                    }\r\n\r\n\r\n\r\n                  var _queryCheckVtr = EntityQuery().from('VTR_LIVE_DT_DTL').where('ACTUAL_COST_ID', '==', all.ACTUAL_COST_ID);\r\n                  EntityManager().executeQuery(_queryCheckVtr).then((foundVtr) => {\r\n\r\n                    if (foundVtr.results === undefined) {\r\n                      resolve_2(true);\r\n                    }\r\n\r\n                    var varDataFromCompare = new Date(this._cache_budget.HEADER.BDGT_FROM);\r\n                    var varDataToCompare = new Date(this._cache_budget.HEADER.BDGT_FROM);\r\n\r\n                    var varMaxDate = null;\r\n                    foundVtr.results.forEach((allDate) => {\r\n\r\n                      //var varVtr = new Date(all.VTR_LIVE_DT.getFullYear(), all.VTR_LIVE_DT.getMonth(), all.VTR_LIVE_DT.getDate());\r\n                        var varVtr = moment(new Date(allDate.VTR_LIVE_DT)).format('MM-DD-YYYY');\r\n                        var varDateCompare = new Date(varVtr);\r\n\r\n                        if (varDataFromCompare <= varDateCompare && varDateCompare <= varDataToCompare) {\r\n                        if (varMaxDate == null)\r\n                          varMaxDate = varVtr;\r\n                        else if (varMaxDate < varVtr)\r\n                          varMaxDate = varVtr;\r\n\r\n                        //toastr.error(\"Please enter range beyond the created budget (AC:\" + all.ACTUAL_COST_ID + \")\");\r\n                      }\r\n                    });\r\n\r\n                    if (varMaxDate == null) {\r\n                      resolve_2(true);\r\n                    } else {\r\n                      var new_date = moment(varMaxDate, \"MM-DD-YYYY\");\r\n                      new_date.add(1, 'days');\r\n                      new_date = moment(new Date(new_date)).format('MM-DD-YYYY');\r\n                      toastr.error(\"An existing ActualCost with Id (\" + all.ACTUAL_COST_ID + \") is using this budget template. <br>BudgetId (\" + all.BDGT_TMPL_ID + \") with status (\" + all.BDGT_TMPL_HDR.APPR_STAT_CD.replace(\"APP-\", \"\") + \").\" +\r\n                        \" Either open the existing Budget Template and create a Copy, or start the validity on \" + new_date);\r\n\r\n                      reject_2(false);\r\n                    }\r\n\r\n             \r\n                  });\r\n\r\n\r\n                });\r\n\r\n                varPromises.push(newPromise);\r\n\r\n\r\n\r\n              });\r\n\r\n              Promise.all(varPromises).then((passed) => {\r\n                resolve(true);\r\n              }, (fail) => {\r\n                reject(false);\r\n                //reject(fail);\r\n              });\r\n\r\n\r\n          // found.results.forEach((all) => {\r\n\r\n\r\n          //   var varTmpFrom = new Date(all.ACTUAL_FROM.getFullYear(), all.ACTUAL_FROM.getMonth(), all.ACTUAL_FROM.getDate());\r\n          //   var varTmpTo = new Date(all.ACTUAL_TO.getFullYear(), all.ACTUAL_TO.getMonth(), all.ACTUAL_TO.getDate());\r\n\r\n          //   if ((varTmpFrom <= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n          //     (varTmpTo <= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpTo >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n          //     (varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n          //     (varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpTo <= new Date(this._cache_budget.HEADER.BDGT_TO))\r\n          //   ) {\r\n          //     toastr.error(\"Please enter range beyond the created budget (AC:\" + all.ACTUAL_COST_ID + \")\");\r\n          //     reject(false); \r\n          //   }\r\n\r\n\r\n\r\n          //   var _queryCheckVtr = EntityQuery().from('VTR_LIVE_DT_DTL').where('ACTUAL_COST_ID', '==', all.ACTUAL_COST_ID);\r\n          //   EntityManager().executeQuery(_queryCheckVtr).then((foundVtr) => {\r\n\r\n          //     var varMaxDate = null;\r\n          //     foundVtr.results.forEach((allDate) => {\r\n\r\n          //       //var varVtr = new Date(all.VTR_LIVE_DT.getFullYear(), all.VTR_LIVE_DT.getMonth(), all.VTR_LIVE_DT.getDate());\r\n          //       var varVtr = moment(new Date(allDate.VTR_LIVE_DT)).format('MM-DD-YYYY');\r\n          //       if (this._cache_budget.HEADER.BDGT_FROM >= varVtr && varVtr <= this._cache_budget.HEADER.BDGT_TO) {\r\n          //         if (varMaxDate == null)\r\n          //           varMaxDate = varVtr;\r\n          //         else if (varMaxDate < varVtr)\r\n          //           varMaxDate = varVtr;\r\n\r\n          //       }\r\n          //     });\r\n\r\n          //     if (varMaxDate !== null && (all.BDGT_TMPL_HDR.APPR_STAT_CD == \"APP-EXPIRED\" || all.BDGT_TMPL_HDR.APPR_STAT_CD == \"APP-CLOSED\" || all.BDGT_TMPL_HDR.APPR_STAT_CD == \"APP-APPROVED\")) {\r\n          //       var new_date = moment(varMaxDate, \"DD-MM-YYYY\").add(1, 'days');\r\n          //       new_date = moment(new Date(new_date)).format('MM-DD-YYYY');\r\n          //       toastr.error(\"An existing ActualCost with Id (\" + all.ACTUAL_COST_ID + \") is using this budget template. <br>BudgetId (\" + all.BDGT_TMPL_ID + \") with status (\" + all.BDGT_TMPL_HDR.APPR_STAT_CD.replace(\"APP-\", \"\") + \").\" +\r\n          //         \" Either open the existing Budget Template and create a Copy, or start the validity on \" + new_date);\r\n\r\n          //        reject(false); \r\n          //     }\r\n\r\n          //   });\r\n\r\n          // });\r\n\r\n\r\n\r\n        }\r\n        else\r\n            resolve(true); \r\n\r\n      });\r\n\r\n\r\n\r\n\r\n       \r\n\r\n      });\r\n\r\n\r\n\r\n  }\r\n\r\n  fnValidation_Approved(){\r\n\r\n    return new Promise((resolve,reject) => \r\n    {\r\n      var p3 = breeze.Predicate.create('BDGT_TMPL_ID', '!=', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n      var c1 = breeze.Predicate.create('BDGT_TMPL_HDR.PROGRAM_ID', '==', this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_ID);\r\n      var c2 = breeze.Predicate.create('APPR_STAT_CD', '==', \"APP-APPROVED\");\r\n      var pred2 = breeze.Predicate.and([c1, c2, p3]);\r\n      var _queryCheckActual = EntityQuery().from('ACTUAL_COST_HDR').where(pred2).expand(\"BDGT_TMPL_HDR\");\r\n      EntityManager().executeQuery(_queryCheckActual).then((found) => {\r\n\r\n        if (found.results !== undefined) {\r\n\r\n          var varPromises=[];\r\n          found.results.forEach((all) => {\r\n\r\n\r\n             var newPromise =  new Promise((resolve_2, reject_2) => {\r\n\r\n              var varTmpFrom = new Date(all.ACTUAL_FROM.getFullYear(), all.ACTUAL_FROM.getMonth(), all.ACTUAL_FROM.getDate());\r\n              var varTmpTo = new Date(all.ACTUAL_TO.getFullYear(), all.ACTUAL_TO.getMonth(), all.ACTUAL_TO.getDate());\r\n\r\n\r\n\r\n              var _queryCheckVtr = EntityQuery().from('VTR_LIVE_DT_DTL').where('ACTUAL_COST_ID', '==', all.ACTUAL_COST_ID);\r\n              EntityManager().executeQuery(_queryCheckVtr).then((foundVtr) => {\r\n\r\n                if (foundVtr.results === undefined) {\r\n                   resolve_2(true);\r\n                }\r\n\r\n                var varMaxDate = null;\r\n                foundVtr.results.forEach((allDate) => {\r\n\r\n                  //var varVtr = new Date(all.VTR_LIVE_DT.getFullYear(), all.VTR_LIVE_DT.getMonth(), all.VTR_LIVE_DT.getDate());\r\n                  var varVtr = moment(new Date(allDate.VTR_LIVE_DT)).format('MM-DD-YYYY');\r\n                 \r\n                  if (this._cache_budget.HEADER.BDGT_FROM <= varVtr && varVtr <= this._cache_budget.HEADER.BDGT_TO) {\r\n                    if (varMaxDate == null)\r\n                      varMaxDate = varVtr;\r\n                    else if (varMaxDate < varVtr)\r\n                      varMaxDate = varVtr;\r\n\r\n                    //toastr.error(\"Please enter range beyond the created budget (AC:\" + all.ACTUAL_COST_ID + \")\");\r\n                  }\r\n                });\r\n\r\n                if(varMaxDate==null)\r\n                {\r\n                    resolve_2(true);\r\n                } \r\n                else\r\n                {\r\n                  //console.log(varMaxDate);\r\n                  var new_date = moment(varMaxDate, \"MM-DD-YYYY\");\r\n                  //console.log(new_date);\r\n                  new_date.add(1, 'days');\r\n                  new_date = moment(new Date(new_date)).format('MM-DD-YYYY');\r\n                  toastr.error(\"An existing ActualCost with Id (\" + all.ACTUAL_COST_ID + \") is using this budget template. <br>BudgetId (\" + all.BDGT_TMPL_ID + \") with status (\" + all.BDGT_TMPL_HDR.APPR_STAT_CD.replace(\"APP-\", \"\") + \").\" +\r\n                    \" Either open the existing Budget Template and create a Copy, or start the validity on \" + new_date);\r\n\r\n                  reject_2(false);\r\n                }\r\n\r\n             \r\n              });\r\n\r\n\r\n             });\r\n\r\n            varPromises.push(newPromise);\r\n\r\n          });\r\n\r\n         Promise.all(varPromises).then((passed) => {\r\n             resolve(true);\r\n          }, (fail) => {\r\n             reject(false);\r\n             //reject(fail);\r\n          });\r\n\r\n        }\r\n        else\r\n           resolve(true);\r\n        \r\n\r\n      });\r\n\r\n      \r\n\r\n    });\r\n    \r\n  }\r\n\r\n\r\n  fnSaveBudget(passed_status) \r\n  {\r\n\r\n     var strValidation=\"\";\r\n\r\n     if(this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_TITLE==\"\")\r\n     {\r\n        strValidation+=\"No Program specified. <br>\";\r\n     }\r\n     \r\n     if(!moment(this._cache_budget.HEADER.BDGT_FROM).isValid() || !moment(this._cache_budget.HEADER.BDGT_TO).isValid())\r\n     {\r\n        strValidation+=\"Invalid Template Start/End Date validity. <br>\";\r\n     }\r\n\r\n     if(this._cache_budget.HEADER.PROGRAM_GENRE_CD==\"\")\r\n     {\r\n        strValidation+=\"No Program Genre. <br>\";\r\n     }\r\n     \r\n     if(this._cache_budget.HEADER.EPISODE_TYPE_CD==\"\")\r\n     {\r\n        strValidation+=\"No Episode Type. <br>\";\r\n     }\r\n\r\n     if(this._cache_budget.HEADER.TELECAST_MODE_CD==\"\")\r\n     {\r\n        strValidation+=\"No Telecast Mode. <br>\";\r\n     }\r\n\r\n     if(!parseInt(this._cache_budget.HEADER.TAPING_DAYS)>0)\r\n     {\r\n        strValidation+=\"Invalid Taping Day(s).<br>\";\r\n     }\r\n\r\n     if(!parseInt(this._cache_budget.HEADER.EPISODES)>0)\r\n     {\r\n        strValidation+=\"Invalid Episode(s).<br>\";\r\n     }\r\n\r\n     if(strValidation!=\"\")\r\n     {\r\n        toastr.error(\"Exception occured. <br/><br/>\"+strValidation, \"Budget Template\");\r\n        return;\r\n     }\r\n     \r\n     if(this._cache_budget.TOTAL<=0 && this._cache_budget.HEADER.APPR_STAT_CD.includes('APPROVED'))\r\n     {\r\n        toastr.error(\"Cannot have Zero Total Budget.\", \"Budget Template\");\r\n        return;\r\n     }\r\n\r\n     //have to add +8 hrs or browser minus 8 hrs when passed to server\r\n    // if (this._cache_budget.HEADER.BDGT_FROM !== undefined)\r\n    //   this._cache_budget.HEADER.BDGT_FROM = moment(new Date(this._cache_budget.HEADER.BDGT_FROM)).add(8, 'hours');\r\n\r\n    // if (this._cache_budget.HEADER.BDGT_TO !== undefined)\r\n    //   this._cache_budget.HEADER.BDGT_TO = moment(new Date(this._cache_budget.HEADER.BDGT_TO)).add(8, 'hours');\r\n     //this._cache_budget.HEADER.APPR_STAT_CD\r\n    if (passed_status.includes('EXPIRE') || passed_status.includes('CLOSE')) {\r\n      Promise.all([this.fnBudgetValidation_1(), this.fnBudgetValidation_2()]).then((passed) => {\r\n       if(passed_status!='')\r\n         this._cache_budget.HEADER.APPR_STAT_CD=passed_status;\r\n         this.fnExecuteSaveBudgetHeader();\r\n      }, (fail) => {\r\n        toastr.error(\"Saving Cancelled.\", \"Saving..\");\r\n\r\n      });\r\n    }\r\n    else if (this._cache_budget.HEADER.APPR_STAT_CD.includes('APPROVED')) {\r\n\r\n      this.fnValidation_Approved().then((passed) => {\r\n\r\n        var varToday = new Date(Date.now());\r\n\r\n        if (new Date(varToday.getFullYear(), varToday.getMonth(), varToday.getDate()) >= new Date(moment(this._cache_budget.HEADER.BDGT_TO).subtract(8, 'hours').format('MM-DD-YYYY'))) {\r\n          this._cache_budget.HEADER.APPR_STAT_CD = \"APP-EXPIRED\";\r\n        }\r\n\r\n        this.fnExecuteSaveBudgetHeader();\r\n\r\n      }, (fail) => {\r\n        toastr.error(\"Saving Cancelled.\", \"Saving..\");\r\n      });\r\n      \r\n    }\r\n    else\r\n    {\r\n      this.fnExecuteSaveBudgetHeader();\r\n    }\r\n\r\n\r\n    return;\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  fnExecuteSaveBudgetHeader()\r\n  {\r\n\r\n      var varInsert=null;\r\n\r\n    // if (this._cache_budget.HEADER.BDGT_FROM !== undefined)\r\n    //   this._cache_budget.HEADER.BDGT_FROM = moment(new Date(this._cache_budget.HEADER.BDGT_FROM)).add(8, 'hours');\r\n\r\n    // if (this._cache_budget.HEADER.BDGT_TO !== undefined)\r\n    //   this._cache_budget.HEADER.BDGT_TO = moment(new Date(this._cache_budget.HEADER.BDGT_TO)).add(8, 'hours');\r\n\r\n\r\n    // console.log(this._cache_budget.HEADER.BDGT_FROM);\r\n    // console.log(this._cache_budget.HEADER.BDGT_TO);\r\n\r\n      var varFrom = moment(new Date(this._cache_budget.HEADER.BDGT_FROM)).add(8, 'hours');\r\n      varFrom = new Date(varFrom);\r\n\r\n      var varTo = moment(new Date(this._cache_budget.HEADER.BDGT_TO)).add(8, 'hours');\r\n      varTo = new Date(varTo);\r\n\r\n      //var varTo = new Date(this._cache_budget.HEADER.BDGT_TO);\r\n\r\n      // console.log(varFrom);\r\n      // console.log(varTo);\r\n\r\n      if (this._cache_budget.HEADER.REMARKS === undefined || this._cache_budget.HEADER.REMARKS === null) {\r\n        this._cache_budget.HEADER.REMARKS=\"NONE\";\r\n      }\r\n      else if (this._cache_budget.HEADER.REMARKS.trim()==\"\")\r\n      {\r\n        this._cache_budget.HEADER.REMARKS=\"NONE\";\r\n      }\r\n\r\n\r\n      if (this._cache_budget.HEADER.BDGT_TMPL_ID == \"\") {\r\n      var getMax = EntityQuery().from('BDGT_TMPL_HDR').orderByDesc('BDGT_TMPL_ID').take(1);\r\n\r\n      //CHANGED 6-17-2016, changed bec before if only 1 value available will auto bind to APPR_STAT_CD, now have to set it first\r\n      if(this._cache_budget.HEADER.APPR_STAT_CD==null || this._cache_budget.HEADER.APPR_STAT_CD==undefined || this._cache_budget.HEADER.APPR_STAT_CD=='undefined')\r\n      {\r\n        this._cache_budget.HEADER.APPR_STAT_CD=this._STATUS[0].REF_CD;\r\n      }\r\n\r\n      //console.log(this._cache_budget.HEADER.APPR_STAT_CD);\r\n\r\n      EntityManager().executeQuery(getMax).then((successMax) => {\r\n        var getMax = 1;\r\n\r\n        if (successMax.results.length > 0)\r\n          getMax = successMax.results[0].BDGT_TMPL_ID + 1;\r\n\r\n          varInsert = EntityManager().createEntity('BDGT_TMPL_HDR', {\r\n          BDGT_TMPL_ID: getMax,\r\n          COMPANY_ID: this._COMPANY_ID,\r\n          BDGT_FROM: varFrom,\r\n          BDGT_TO: varTo,\r\n          //PROGRAM_TYPE_CD: indiv.GLOBAL_GRP_ID,\r\n          //EPISODE_MODE_CD: indiv.GLOBAL_GRP_ID,\r\n          EPISODE_TYPE_CD: this._cache_budget.HEADER.EPISODE_TYPE_CD,\r\n          BDGT_VIEW_FCTR: 1,\r\n          TAPING_DAYS: this._cache_budget.HEADER.TAPING_DAYS,\r\n          PROGRAM_ID: this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_ID,\r\n          CHARGE_CD: this._cache_budget.HEADER.CHARGE_CD,\r\n          PROGRAM_GENRE_CD: this._cache_budget.HEADER.PROGRAM_GENRE_CD,\r\n          PARENT_PROGRAM_ID: this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_ID,\r\n          BDGT_VIEW_CD: 'EPISODIC',\r\n          APPR_STAT_CD: this._cache_budget.HEADER.APPR_STAT_CD,\r\n          CHARGE_TYPE_CD: '',\r\n          BDGT_TOTAL: 0,\r\n          REMARKS: this._cache_budget.HEADER.REMARKS,\r\n          CREATED_BY: this._user,\r\n          CREATED_DT: new Date(Date.now()),\r\n          //LAST_UPDATED_BY: indiv.GLOBAL_GRP_ID,\r\n          //LAST_UPDATED_DT: indiv.GLOBAL_GRP_ID,\r\n          TELECAST_MODE_CD: this._cache_budget.HEADER.TELECAST_MODE_CD,\r\n          BDGT_STAT_CD: getMax,\r\n          //BDGT_TMPL_TYPE_CD: indiv.GLOBAL_GRP_ID,\r\n          BDGT_FOR_CD: 'BDGT-EPISODIC',\r\n          PROGRAM_NAME: this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_TITLE,\r\n          EPISODES: this._cache_budget.HEADER.EPISODES,\r\n          STATION_ID: this._cache_budget.HEADER.STATION_ID,\r\n          STATION_SENT_DATE: new Date(),\r\n          STATION_SENT: 0\r\n        });\r\n\r\n        EntityManager().addEntity(varInsert);\r\n\r\n        EntityManager().saveChanges().then((success) => {\r\n\r\n          this._cache_budget.HEADER.BDGT_TMPL_ID = success.entities[0].BDGT_TMPL_ID;\r\n\r\n          this._disableCreateBudget=true;\r\n          this._disableCancelBudget=false;\r\n          this._disableRefreshBudget=false;\r\n          this._disableSaveBudget=false;\r\n\r\n\r\n          if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-APPROVED\")\r\n          {\r\n            this._cache_budget.STATUS=\"APPROVED\";\r\n            this._disableSaveBudget=true;\r\n\r\n            this.budgetDisabled=true;\r\n            this.programDisabled=true;\r\n\r\n            // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n            //   all(this.modalBudget.id, false);\r\n            //   all(this.modalProgram.id, false);\r\n            // });\r\n\r\n            // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n            // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, false);\r\n          }\r\n          else\r\n          {\r\n          \r\n            this.budgetDisabled=true;\r\n            this.programDisabled=false;\r\n\r\n            // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n            //   all(this.modalBudget.id, false);\r\n            //   all(this.modalProgram.id, true);\r\n            // });\r\n\r\n            // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n            // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n          }\r\n\r\n          toastr.success(\"Succesfully Saved\", \"Budget Template\");\r\n\r\n\r\n          if(this._cache_budget.IS_COPYING)\r\n          {\r\n\r\n            this._cache_budget.OBSERVERS.copy_template.forEach((all) => {\r\n              \r\n              all('REGULAR');\r\n              //all('GUEST');\r\n            });\r\n\r\n\r\n            // this._dispatcher.dispatch('copy.template','REGULAR');\r\n            // this._dispatcher.dispatch('copy.template','GUEST');\r\n\r\n\r\n            this._cache_budget.IS_COPYING=false;\r\n\r\n            //  setTimeout(()=>{\r\n\r\n            \r\n            //   this.fnBudget(\"refresh\");\r\n            // },5000);\r\n            \r\n            //this._IS_COPYING=\"\";\r\n          }\r\n          else\r\n          {\r\n            this.fnBudget(\"refresh\"); \r\n          }\r\n\r\n          this._disableCreateBudget=true;\r\n          this._disableSaveBudget=false;\r\n          this._disableCancelBudget=false;\r\n          this._disableRefreshBudget=false;\r\n          this._disablePrintBudget = true;\r\n\r\n          this.budgetDisabled=false;\r\n          this.programDisabled=false;\r\n\r\n          // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n          //   all(this.modalBudget.id, true);\r\n          //   all(this.modalProgram.id, true);\r\n          // });\r\n\r\n          // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, true);\r\n          // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n\r\n\r\n        }, (fail) => {\r\n\r\n          if(varInsert!=null)\r\n          {\r\n            varInsert.entityAspect.setDeleted();  \r\n          }\r\n          \r\n          EntityManager().getEntities().forEach(function(entity) {\r\n            var errors = entity.entityAspect.getValidationErrors();\r\n            if (errors.length > 0)\r\n              console.log(errors);\r\n          });\r\n          console.log(fail);\r\n          toastr.error(\"Error Occured\", fail);\r\n        });\r\n\r\n      });\r\n\r\n    } else {\r\n      \r\n      var getEntityQuery = EntityQuery().from('BDGT_TMPL_HDR').where(\"BDGT_TMPL_ID\", \"==\", this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n      EntityManager().executeQuery(getEntityQuery).then((item) => {\r\n\r\n        item.results[0].BDGT_FROM = varFrom;\r\n        item.results[0].BDGT_TO = varTo;\r\n        item.results[0].EPISODE_TYPE_CD = this._cache_budget.HEADER.EPISODE_TYPE_CD;\r\n        item.results[0].TAPING_DAYS = this._cache_budget.HEADER.TAPING_DAYS;\r\n        item.results[0].PROGRAM_ID = this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_ID;\r\n        item.results[0].CHARGE_CD = this._cache_budget.HEADER.CHARGE_CD;\r\n        item.results[0].PROGRAM_GENRE_CD = this._cache_budget.HEADER.PROGRAM_GENRE_CD;\r\n        item.results[0].PARENT_PROGRAM_ID = this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_ID;\r\n        item.results[0].APPR_STAT_CD = this._cache_budget.HEADER.APPR_STAT_CD;\r\n        item.results[0].REMARKS = this._cache_budget.HEADER.REMARKS;\r\n        item.results[0].LAST_UPDATED_BY = this._user;\r\n        item.results[0].LAST_UPDATED_DT = new Date(Date.now());\r\n        item.results[0].TELECAST_MODE_CD = this._cache_budget.HEADER.TELECAST_MODE_CD;\r\n        item.results[0].PROGRAM_NAME = this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_TITLE;\r\n        item.results[0].EPISODES = this._cache_budget.HEADER.EPISODES;\r\n        item.results[0].STATION_ID =  this._cache_budget.HEADER.STATION_ID;\r\n\r\n        EntityManager().saveChanges().then((success) => {\r\n          \r\n          this._disableCreateBudget = true;\r\n          this._disableCancelBudget = false;\r\n          this._disableRefreshBudget = false;\r\n          this._disableSaveBudget = false;\r\n\r\n\r\n          this.budgetDisabled=true;\r\n          this.programDisabled=false;\r\n          // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n          //   all(this.modalBudget.id, false);\r\n          //   all(this.modalProgram.id, true);\r\n          // });\r\n\r\n          // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n          // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n\r\n          toastr.success(\"Succesfully Saved\", \"Budget Template\");\r\n          this.fnBudget(\"refresh\"); \r\n        }, (fail) => {\r\n\r\n          EntityManager().getEntities().forEach(function(entity) {\r\n            var errors = entity.entityAspect.getValidationErrors();\r\n            if (errors.length > 0)\r\n              console.log(errors);\r\n          });\r\n          console.log(fail);\r\n          toastr.error(\"Error Occured\", fail);\r\n        });\r\n\r\n\r\n      });\r\n     \r\n\r\n        \r\n      this._disableBudgetId=true;\r\n\r\n      // this._cache_budget.CALLER.VALUE1 = this.modalBudget.id;\r\n      // this._cache_budget.CALLER.VALUE2 = false;\r\n      // this._cache_budget.CALLER.ACTION = 'enable.modal.button';\r\n\r\n      this.budgetDisabled=true;\r\n      // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n      //   all(this.modalBudget.id, false);\r\n      // });\r\n\r\n      //this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n      this._disablePrintBudget = false;\r\n    }\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n    fnDialogProgram(){\r\n      this.dialogService.open({\r\n        viewModel: program\r\n      }).whenClosed(response => {\r\n        \r\n        if (!response.wasCancelled) {\r\n          \r\n        } else {\r\n          \r\n        }\r\n      });\r\n    }\r\n\r\n\r\n\r\n    fnDialogBudget(){\r\n      this.dialogService.open({\r\n        viewModel: budget\r\n      }).whenClosed(response => {\r\n          settings.isNavigating = true;\r\n        if (!response.wasCancelled) {\r\n        \r\n        } else {\r\n          \r\n        }\r\n      });\r\n    }\r\n\r\n\r\n}","import {inject} from 'aurelia-framework';\r\nimport {computedFrom,customElement} from 'aurelia-framework';\r\nimport { cache_budget } from 'ppfcs/cache_budget';\r\nimport { initializeBreeze, generateID } from 'entity-manager-factory';\r\nimport { loadMasterfiles, loadTables, loadLookups, getLookups } from 'masterfiles';\r\nimport toastr from \"toastr\";\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport { checkCookie, setCookie, removeCookie } from '../../helpers';\r\nimport { MultiObserver }from 'multi-observer';\r\nimport { login } from 'modals/login';\nimport { Router } from 'aurelia-router';\nimport { EntityManager, EntityQuery } from 'entity-manager-factory';\n\r\n//@customElement('main-header')\r\n@inject(toastr, cache_budget, MultiObserver, DialogService, Router)\r\nexport class mainview {\r\n\r\n\r\n  router;\r\n  _toastr = null;\r\n  //_dispatcher;\r\n  showingLogout=\"hidden\";\r\n  _cache_budget;\r\n  dialogService=null;\r\n  loginDisabled=true;\r\n  logoutDisabled=false;\r\n  masterFilesLoaded=false;\r\n  constructor(toastr, cache_budget, multiObserver, dialogService, Router) {\r\n    //this.fnExecuteDatePicker();\r\n    //console.log(elem);\r\n    this._cache_budget=cache_budget;\r\n    this.router = Router;\r\n\n    if (EntityManager() === undefined) {\n        this.router.navigateToRoute('mainpage');\n        return;\r\n    }\n\r\n    this.dialogService=dialogService;\r\n    \r\n      if(this.dialogService.controllers.length>0)\r\n      {\r\n        for (var i = this.dialogService.controllers.length - 1; i >= 0; i--) {\r\n          this.dialogService.controllers[i].close();\r\n        }\r\n      }\r\n\r\n  }\r\n    \r\n  clickTab(index){\r\n      if(index==0){\r\n\r\n      }\r\n      else if(index==1){\r\n\r\n          this._cache_budget.OBSERVERS.refreshPersonnelTab.forEach((all) => {\r\n            all('REGULAR');\r\n          });\r\n          \r\n      }\r\n      else if(index==2){\r\n\r\n         this._cache_budget.OBSERVERS.refreshPersonnelTab.forEach((all) => {\r\n            all('SEMI_REGULAR');\r\n          });\r\n          \r\n      }\r\n      else if(index==3){\r\n\r\n          this._cache_budget.OBSERVERS.refreshPersonnelTab.forEach((all) => {\r\n            all('STAFF');\r\n          });\r\n          \r\n      }\r\n  }\r\n\r\n   \r\n}","import {  bindable, inject } from 'aurelia-framework';\r\nimport { cache_budget } from 'ppfcs/cache_budget';\nimport { cache_obj } from 'cache_obj';\r\nimport { EntityManager, EntityQuery, generateID } from 'entity-manager-factory';\r\nimport {  getLookups,getJobByGlobalCompany,getJobByName } from 'masterfiles';\r\nimport {  substringMatcher } from 'helpers';\r\nimport typeahead from 'typeahead';\r\nimport settings from 'settings';\r\nimport _ from 'underscore';\r\nimport {  ModalWizard } from 'modals/modal-wizard';\r\nimport numeral from 'numeral';\r\nimport { MultiObserver } from 'multi-observer';\r\nimport toastr from \"toastr\";\r\n\r\nimport { globalindivmstr } from '../../modals/globalindivmstr';\r\nimport { indivmstr } from '../../modals/indivmstr';\r\nimport { job } from '../../modals/job';\r\nimport { paymentterm } from '../../modals/paymentterm';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\n\r\n@inject(cache_obj, cache_budget, ModalWizard, MultiObserver, DialogService)\r\nexport class PersonnelCustomElement\r\n{\r\n\r\n  @bindable toPerson;\r\n  @bindable toPersonModel;\r\n\r\n  _cache_obj = null;\n  _cache_budget = null;\r\n\r\n  styleStringHidden = 'visibility: hidden;display:none;';\r\n  styleStringVisible = 'visibility: visible;';\r\n  _ModalWizard;\r\n  _selectedItem;\r\n  _JOBS = null;\r\n  _PYMNTTERM = [];\r\n  _currentIndex;\r\n  _ce_head;\r\n  _personnelSearch;\r\n  _signal;\r\n  _Personnel=[];\r\n  _PersonnelTM=[];\r\n  _Index=0;\r\n  varPymnt=null;\r\n  isIndivMstrTalentsDisabled=false;\r\n  isIndivMstrManagerDisabled=false;\r\n  isJobDisabled=false;\r\n  isIndivMstrDisabled=false;\r\n  dialogService=null;\r\n  _cache_budget;\n\r\n  constructor(cache_obj, cache_budget, ModalWizard, multiObserver,dialogService) \r\n  {\n\n    if (EntityManager() === undefined) {\n        return;\r\n    }\n\n    this.cache_budget = cache_budget;\r\n    this.dialogService=dialogService;\r\n\n    this._cache_obj = cache_obj;\r\n    this._cache_budget = cache_budget;\n      \r\n    this._ModalWizard = ModalWizard;\r\n    this._ce_head = \"+\";\r\n\r\n    multiObserver.observe(\r\n      [\r\n      [this, '_personnelSearch']\r\n      ], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n    \r\n    \r\n    this._cache_budget.OBSERVERS.disable_search_personnel.push((val) => {\r\n      this.ButtonStatus(val);\r\n    });\r\n\r\n    //this._cache_budget.OBSERVERS.login_passed.push(() => {\r\n    //  this.LoginPassed();\r\n    //});\r\n\r\n    this._cache_budget.OBSERVERS.reset_all.push(() => {\r\n      this.resetView();\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.budget_dialog.push((val) => {\r\n      this.CloseBudgetDialog(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.enable_approved.push((val) => {\r\n      this.ButtonStatus(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.copy_template.push((val) => {\r\n      this.fnCallCopy(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.pass_indiv.push((val) => {\r\n      this.PassedIndiv(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.pass_group.push((val) => {\r\n      this.PassedGroup(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.refreshPersonnelTab.push((val) => {\r\n      this.refreshOnSelect(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.pass_job.push((val) => {\r\n      this.passJob(val);\r\n    });\n\n    this._PYMNTTERM = getLookups().PAYMENT_TERM;\r\n    //GET BACK HERE!!!. these part is being saved 3 times, regular, semi and staff\r\n    this._JOBS = getLookups().JOB_GRP_CATEGORY.filter\r\n        ((all) => all.COMPANY_ID == this._cache_obj.USER.COMPANY_ID);\r\n\n    //console.log(this._PYMNTTERM);\r\n  }\r\n\r\n\r\n  \r\n  //LoginPassed() \r\n  //{\r\n\r\n  //  //GET BACK HERE!!!. these part is being saved 3 times, regular, semi and staff\r\n  //  this._PYMNTTERM = getLookups().PAYMENT_TERM;\r\n  //  //GET BACK HERE!!!. these part is being saved 3 times, regular, semi and staff\r\n  //  this._JOBS = getLookups().JOB_GRP_CATEGORY.filter\r\n  //  ((all)=>all.COMPANY_ID==this._cache_obj.USER.COMPANY_ID);\r\n\r\n  //}\r\n\r\n\r\n  passJob(job)\r\n  {\r\n    var index = this._Index;\r\n    \r\n    this._Personnel[index].JOB_ID = job.JOB_ID;\r\n    this._Personnel[index].JOB_DESC = job.JOB_DESC;\r\n    var varGrpCategory = getLookups().JOB_GRP_CATEGORY.find((all) => all.JOB_ID == this._Personnel[index].JOB_ID && all.COMPANY_ID ==\r\n      this._cache_obj.USER.COMPANY_ID);\r\n\r\n    if (varGrpCategory !== undefined) {\r\n      this._Personnel[index].CATEGORY_ID = varGrpCategory.CATEGORY_ID;\r\n      this._Personnel[index].CATEGORY_DESC = varGrpCategory.CATEGORY_DESC;\r\n    }\r\n    \r\n  }\r\n\r\n  onSpeculateProp(newValue, oldValue)\r\n  {\r\n\r\n    var varResult = [];\r\n\r\n    this._Personnel.forEach((all) =>\r\n    {\r\n      all.visible = true;\r\n\r\n      if (this._personnelSearch.toUpperCase() !== \"\") \r\n      {\r\n        if (all['PERSONNEL_NAME'] !== undefined && all['PERSONNEL_NAME']!=null)\r\n          if (!all['PERSONNEL_NAME'].toUpperCase().includes(this._personnelSearch.toUpperCase())) \r\n          {\r\n            all.visible = false;\r\n          }\r\n\r\n          if (all['BLANK_PERSONNEL_NAME'] !== undefined && all['PERSONNEL_NAME']!=null)\r\n            if (!all['BLANK_PERSONNEL_NAME'].toUpperCase().includes(this._personnelSearch.toUpperCase())) \r\n            {\r\n              all.visible = false;\r\n            }\r\n\r\n          }\r\n          \r\n        });\r\n\r\n    this._signal = generateID();\r\n\r\n  }\r\n\r\n\r\n  \r\n  //@handle('reset.all')\r\n  resetView() \r\n  {\r\n\r\n    this._signal = generateID();\r\n\r\n  }\r\n\r\n  collapse_expand_head()\r\n  {\r\n    if (this._ce_head == \"+\") \r\n    {\r\n      this._ce_head = \"-\";\r\n      this._Personnel.forEach((item) => \r\n      {\r\n        item.ce_value = \"-\";\r\n        item.styleString = this.styleStringVisible;\r\n      });\r\n\r\n    } \r\n    else \r\n    {\r\n      this._ce_head = \"+\";\r\n      this._Personnel.forEach((item) => \r\n      {\r\n        item.ce_value = \"+\";\r\n        item.styleString = this.styleStringHidden;\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  collapse_expand(item) \r\n  {\r\n\r\n    if (item.ce_value == \"+\") \r\n    {\r\n\r\n      item.ce_value = \"-\";\r\n      item.styleString = this.styleStringVisible;\r\n\r\n    } \r\n    else \r\n    {\r\n\r\n      item.ce_value = \"+\";\r\n      item.styleString = this.styleStringHidden;\r\n\r\n    }\r\n  }\r\n\r\n\r\n  //@handle('budget.dialog')\r\n  CloseBudgetDialog(value) \r\n  {\r\n\r\n    this.fnCheckBudget(value);\r\n\r\n  }\r\n\r\n\r\n  fnCheckExistingTalents(TALENTS,item)\r\n  {\r\n\r\n    if(TALENTS==undefined || TALENTS==null || TALENTS==\"\")\r\n    {\r\n     \r\n      return true;\r\n    }\r\n    else if(TALENTS.length>0)\r\n    {\r\n      if(item)\r\n        item.REMOVE=false;\r\n\r\n      return false;\r\n    }\r\n    \r\n    return true;\r\n\r\n  } \r\n\r\n  myFunction() \r\n  {\r\n\r\n    alert('loaded');\r\n\r\n  }\r\n\r\n  //@handle('enable.approved')\r\n  ButtonStatus(value) \r\n  {\r\n\r\n    this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>\r\n    {\r\n      this.isIndivMstrDisabled=!value;\r\n      this.isIndivMstrTalentsDisabled=!value;\r\n      \r\n    });\r\n\r\n  }\r\n\r\n\r\n //@handle('copy.template')\r\n fnCallCopy(usr)\r\n {\r\n   \r\n  this._Personnel.forEach((item) => \r\n  {\r\n    if (item.TALENT_MANAGER !== undefined) \r\n    {\r\n      item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP = undefined;\r\n      item.TALENT_MANAGER.BDGT_TMPL_DTL_ID = undefined;\r\n    };\r\n    item.BDGT_TMPL_DTL_ID=undefined;\r\n    \r\n    item.BDGT_TMPL_DTL_ID_LINK = undefined;\r\n    item.BDGT_TMPL_DTL_ID_LINK_TMP = undefined;\r\n\r\n  });\r\n  \r\n  if (this.toPersonModel.USE == usr)\r\n   this.savePersonnel(1);\r\n\r\n \r\n}\r\n\r\n\r\n\r\nfnCheckBudget(BDGT_TMPL_ID) \r\n{\r\n\r\n\r\n  this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>\r\n  {\r\n    this.isIndivMstrDisabled=false;\r\n    this.isIndivMstrTalentsDisabled=false;\r\n  });\r\n\r\n  \r\n  setTimeout(() => \r\n  {\r\n\r\n    this.scrollDiv();\r\n\r\n  }, 5000);\r\n\r\n  var varPsClType=\"\";\r\n  if (this.toPersonModel.USE == \"REGULAR\") \r\n  {\r\n\r\n    varPsClType = \"Regular\";\r\n    this._cache_budget.REGULAR = [];\r\n\r\n  } \r\n  else if (this.toPersonModel.USE == \"SEMI_REGULAR\") \r\n  {\r\n\r\n    varPsClType = \"Semi-Regular\";\r\n    this._cache_budget.SEMI_REGULAR = [];\r\n\r\n  } \r\n  else if (this.toPersonModel.USE == \"STAFF\") \r\n  {\r\n\r\n    varPsClType = \"Staff\";\r\n    this._cache_budget.STAFF = [];\r\n\r\n  }\r\n  \r\n\r\n  var p1 = breeze.Predicate.create('BDGT_TMPL_ID', '==', BDGT_TMPL_ID);\r\n  var p2 = breeze.Predicate.create('PERSONNEL_CLASS_TYPE', '==', varPsClType);\r\n  var pred = breeze.Predicate.and([p1, p2]);\r\n  \r\n\r\n  var _query = EntityQuery().from('BDGT_TMPL_DTL').where(pred).orderBy(\"GROUP_ORDER\");\r\n  EntityManager().executeQuery(_query).then((found) => {\r\n\r\n      //this._cache_budget.REGULAR = found.results.filter(all => all.PERSONNEL_CLASS_TYPE.toUpperCase() == \"REGULAR\");\r\n\r\n      var varJobLength = getLookups().JOB_MSTR.length - 1;\r\n      var varCategoryLength = getLookups().CATEGORY_MSTR.length - 1;\r\n      \r\n      this._Personnel.splice(0,this._Personnel.length);\r\n      this._PersonnelTM.splice(0,this._PersonnelTM.length);\r\n      \r\n\r\n      found.results.forEach((item)=>\r\n      {\r\n\r\n        this._Personnel.push(\r\n        {\r\n          BDGT_TMPL_DTL_ID: item.BDGT_TMPL_DTL_ID,\r\n          BDGT_TMPL_ID: this._cache_budget.HEADER.BDGT_TMPL_ID,\r\n          JOB_ID: item.JOB_ID,\r\n          GLOBAL_ID: item.GLOBAL_ID,\r\n          CONTRACT_AMT: item.CONTRACT_AMT,\r\n          CATEGORY_ID: item.CATEGORY_ID,\r\n          STAFF_WORK: item.STAFF_WORK,\r\n          PYMNT_TERM_CD: item.PYMNT_TERM_CD,\r\n          PAY_TO_PERSON_FL: 'T',\r\n          PAY_RATE_FACTOR: item.PAY_RATE_FACTOR,\r\n          BUDGET_AMT: item.INPUT_AMT,\r\n          TAPING_DAY_CNT: this._cache_budget.HEADER.TAPING_DAYS,\r\n          PERSONNEL_CLASS_CD: item.PERSONNEL_CLASS_CD,\r\n          REMARKS: item.REMARKS,\r\n          PERSONNEL_INFO_SRC: item.PERSONNEL_INFO_SRC,\r\n          PERSONNEL_NAME: item.PERSONNEL_NAME,\r\n          INPUT_AMT: item.INPUT_AMT,\r\n          CONFIDENTIAL: item.CONFIDENTIAL,\r\n          POOL_RECORD: item.POOL_RECORD,\r\n          GROUP_ORDER: item.GROUP_ORDER,\r\n          GLOBAL_ID_LINK: item.GLOBAL_ID_LINK,\r\n          BDGT_TMPL_DTL_ID_LINK: item.BDGT_TMPL_DTL_ID_LINK\r\n        });\r\n\r\n      });\r\n      \r\n\r\n\r\n      if (this.toPersonModel.USE == \"REGULAR\") \r\n      {\r\n\r\n        this._cache_budget.REGULAR = this._Personnel;\r\n\r\n        if(this._cache_budget.REGULAR.length>0)\r\n          toastr.success(\"REGULAR PERSONNEL\", \"Loading Successful.\");\r\n        //this._Personnel = this._cache_budget.REGULAR;\r\n        this.setPersonnelValues(this._cache_budget.REGULAR, varJobLength, varCategoryLength);\r\n\r\n      }\r\n      else if (this.toPersonModel.USE == \"SEMI_REGULAR\") \r\n      {\r\n\r\n        varPsClType = \"Semi-Regular\";\r\n\r\n        this._cache_budget.SEMI_REGULAR = this._Personnel;\r\n        \r\n        if(this._cache_budget.SEMI_REGULAR.length>0)\r\n          toastr.success(\"SEMI-REGULAR PERSONNEL\", \"Loading Successful.\");\r\n\r\n        //this._Personnel = this._cache_budget.SEMI_REGULAR;\r\n        this.setPersonnelValues(this._cache_budget.SEMI_REGULAR, varJobLength, varCategoryLength);\r\n\r\n      }\r\n      else if (this.toPersonModel.USE == \"STAFF\")\r\n      {\r\n\r\n        varPsClType = \"Staff\";\r\n\r\n        this._cache_budget.STAFF = this._Personnel;\r\n\r\n        if(this._cache_budget.STAFF.length>0)\r\n          toastr.success(\"STAFF PERSONNEL\", \"Loading Successful.\");\r\n        \r\n        //this._Personnel = this._cache_budget.STAFF;\r\n        this.setPersonnelValues(this._cache_budget.STAFF, varJobLength, varCategoryLength);\r\n\r\n      }\r\n\r\n      this._signal = generateID();\r\n      \r\n\r\n      this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>\r\n      {\r\n\r\n        all();\r\n\r\n      });\r\n\r\n    });\r\n  \r\n}\r\n\r\nsetPersonnelValues(obj,varJobLength,varCategoryLength) \r\n{\r\n \r\n     //move this undefined setting in able not to conflict while adding new talents on the second looop\r\n     _.each(obj, (item) => {\r\n      item.TALENTS = undefined; \r\n    });\r\n     \r\n     _.each(obj, (item) => {\r\n\r\n       \r\n      for (var i = 0; i <= varJobLength; ++i) {\r\n        if (getLookups().JOB_MSTR[i].JOB_ID == item.JOB_ID) {\r\n          item.JOB_DESC = getLookups().JOB_MSTR[i].JOB_DESC;\r\n          break;\r\n        }\r\n      };\r\n\r\n      for (var i = 0; i <= varCategoryLength; ++i) {\r\n        if (getLookups().CATEGORY_MSTR[i].CATEGORY_ID == item.CATEGORY_ID) {\r\n          item.CATEGORY_DESC = getLookups().CATEGORY_MSTR[i].CATEGORY_DESC;\r\n          break;\r\n        }\r\n      };\r\n\r\n\r\n      for (var i = 0; i <= this._PYMNTTERM.length - 1; ++i) {\r\n        if (this._PYMNTTERM[i].REF_CD == item.PYMNT_TERM_CD) {\r\n          item.PAYMENT_TERM = this._PYMNTTERM[i].REF_DESC;\r\n          break;\r\n        }\r\n      };\r\n\r\n\r\n      if (item.BDGT_TMPL_DTL_ID_LINK !== 0) {\r\n\r\n        //var varTalent = getLookups().GLOBAL_INDIV_WITH_ALIAS.find((allIndiv) => allIndiv.GLOBAL_INDIV_ID == item.GLOBAL_ID_LINK);\r\n       //console.log(item.BDGT_TMPL_DTL_ID_LINK);\r\n       var varTM = obj.find((all)=>all.BDGT_TMPL_DTL_ID==item.BDGT_TMPL_DTL_ID_LINK);\r\n       item.TALENT_MANAGER = {\r\n        BDGT_TMPL_DTL_ID_TMP: varTM.BDGT_TMPL_DTL_ID,\r\n        GLOBAL_INDIV_ID: varTM.GLOBAL_ID,\r\n        PERSONNEL_NAME: varTM.PERSONNEL_NAME,\r\n        CONTRACT_AMT_TMP:numeral(varTM.CONTRACT_AMT).format('0,0.00'),\r\n        INPUT_AMT_TMP:numeral(varTM.INPUT_AMT).format('0,0.00'),\r\n        PAY_RATE_FACTOR_TMP:numeral(varTM.PAY_RATE_FACTOR).format('0,0.00'),\r\n        REMARKS: varTM.REMARKS,\r\n        JOB_ID: varTM.JOB_ID,\r\n        CATEGORY_ID: varTM.CATEGORY_ID,\r\n        GROUP_ORDER:-1\r\n      };\r\n\r\n      this._PersonnelTM.push({\r\n        BDGT_TMPL_DTL_ID: varTM.BDGT_TMPL_DTL_ID,\r\n        BDGT_TMPL_DTL_ID_TMP: varTM.BDGT_TMPL_DTL_ID,\r\n        GLOBAL_INDIV_ID: varTM.GLOBAL_ID,\r\n        PERSONNEL_NAME: varTM.PERSONNEL_NAME,\r\n        CONTRACT_AMT_TMP:numeral(varTM.CONTRACT_AMT).format('0,0.00'),\r\n        INPUT_AMT_TMP:numeral(varTM.INPUT_AMT).format('0,0.00'),\r\n        PAY_RATE_FACTOR_TMP:numeral(varTM.PAY_RATE_FACTOR).format('0,0.00'),\r\n        REMARKS: varTM.REMARKS,\r\n        JOB_ID: varTM.JOB_ID,\r\n        CATEGORY_ID: varTM.CATEGORY_ID,\r\n        GROUP_ORDER:-1\r\n      });\r\n\r\n      \r\n\r\n    }\r\n\r\n\r\n\r\n    item.BLANK_PERSONNEL_NAME = item.PERSONNEL_NAME;\r\n    item.CONTRACT_AMT_TMP = numeral(item.CONTRACT_AMT).format('0,0.00');\r\n    item.INPUT_AMT_TMP = numeral(item.INPUT_AMT).format('0,0.00');\r\n    item.PAY_RATE_FACTOR_TMP = numeral(item.PAY_RATE_FACTOR).format('0,0.00');\r\n    item.CONFIDENTIAL_TMP = (item.CONFIDENTIAL == 1 ? true : false);\r\n    item.STAFF_WORK_TMP = (item.STAFF_WORK == 1 ? true : false);\r\n    item.POOL_RECORD_TMP = (item.POOL_RECORD == 1 ? true : false);\r\n\r\n    item.BDGT_TMPL_DTL_ID_LINK_TMP = item.BDGT_TMPL_DTL_ID_LINK;\r\n    \r\n    item.styleString = this.styleStringHidden;\r\n    item.ce_value = \"+\";\r\n    item.visible = true;\r\n    \r\n\r\n  });\r\n     \r\n     \r\n     for (var i = obj.length - 1; i >= 0; i--) {\r\n      var varToDelete = this._PersonnelTM.find((all)=>all.BDGT_TMPL_DTL_ID_TMP==obj[i].BDGT_TMPL_DTL_ID);\r\n\r\n      if(varToDelete!==undefined)\r\n      { \r\n        obj.splice(i,1);\r\n      }\r\n    }\r\n    \r\n  }\r\n\r\n\r\n  removeTalent(parent,item,index)\r\n  {\r\n    this._Personnel.forEach((all)=>{\r\n      if(all.GLOBAL_ID==item.GLOBAL_INDIV_ID)\r\n      {\r\n        //remove this on the list of talents of talent manager\r\n        var varToSplice = parent.item.TALENTS.splice(index,1);\r\n\r\n        delete item.TALENT_MANAGER.CONTRACT_AMT_TMP;\r\n        delete item.TALENT_MANAGER.INPUT_AMT_TMP;\r\n        delete item.TALENT_MANAGER.PAY_RATE_FACTOR_TMP;\r\n        delete item.TALENT_MANAGER.REMARKS;\r\n        delete item.TALENT_MANAGER;\r\n\r\n        this._signal = generateID();\r\n      }\r\n    });\r\n  }\r\n\r\n  fnRegularFocus(index, prop) \r\n  {\r\n\r\n    this._Index = index;\r\n    if (prop == \"JOB\")\r\n    { \r\n\r\n      this.fnModalJob();\r\n\r\n      return;\r\n    }\r\n\r\n\r\n    this.fnModalPaymentTerm();\r\n    \r\n\r\n    \r\n  }\r\n\r\n  //CREATE typeahead on focus instead...........!!!!!!!!!!!!\r\n  // fnReloadTypeahead() {\r\n\r\n  //   //$('.jobclass').typeahead('destroy');\r\n\r\n  //   var varCnt = 0;\r\n\r\n  //   _.each($(this.tblData).find(\".jobclass\"), (all) => {\r\n\r\n  //     $(all).attr(\"tableJobIndex\", varCnt);\r\n  //     //$(\"input[tableJobIndex*='\" + varCnt + \"']\").removeAttr(\"hasTypeahead\");\r\n  //     ++varCnt;\r\n\r\n\r\n  //   });\r\n\r\n\r\n  //   $(\".pymnttrmclass\").typeahead('destroy');\r\n  //   $(\".pymnttrmclass\")\r\n  //     .typeahead({\r\n  //       hint: false,\r\n  //       highlight: true,\r\n  //       minLength: 1,\r\n  //       limit: 10\r\n  //     }, {\r\n  //       source: substringMatcher(this._PYMNTTERM.map((item) => {\r\n  //         return item.REF_DESC\r\n  //       }))\r\n\r\n\r\n  //     });\r\n\r\n  //   varCnt = 0;\r\n  //   _.each($(this.tblData).find(\".pymnttrmclass\"), (all) => {\r\n  //     $(all).attr(\"tableTermIndex\", varCnt);\r\n\r\n  //     ++varCnt;\r\n\r\n\r\n  //   });\r\n  // }\r\n\r\n  scrollDiv() \r\n  {\r\n\r\n\r\n    $(this.tblHeader).css(\"visibility\",\"visible\");\r\n    // console.log($(this.tblData).position().top);\r\n    // console.log($(this.tblHeader).height());\r\n    // console.log($(this.divRegular).scrollTop());\r\n    $(this.tblHeader).css(\"top\", $(this.divRegular).scrollTop() + $(this.tblData).position().top);\r\n\r\n    var varCol = 0;\r\n    _.each($(this.tblData).find('td'), (item) => {\r\n\r\n      //last two is not really td element\r\n      if (varCol > $(this.tblHeader).find('td').length - 2)\r\n        return;\r\n\r\n      $($(this.tblHeader).find('td')[varCol]).css(\"width\", $(this.tblData).find('td')[varCol].clientWidth + 1);\r\n      ++varCol;\r\n    });\r\n\r\n\r\n  }\r\n\r\n  AmountBlur(item, property) \r\n  {\r\n\r\n    var varConverted = numeral(item[property]).format('0,0.00');\r\n    item[property] = varConverted;\r\n\r\n  }\r\n\r\n  showTalents(item)\r\n  {\r\n\r\n    this._selectedItem = item;\r\n\r\n    this._cache_budget.OBSERVERS.open_modal.forEach((all)=>{\r\n      //all(this.modalIndivMstrTalents.id, true);\r\n      this.isIndivMstrTalentsDisabled=false;\r\n    });\r\n\r\n    //this._dispatcher.dispatch('open.modal', this.modalIndivMstrTalents.id, true);\r\n  }\r\n\r\n\r\n  showTalentMngr(item) \r\n  {\r\n\r\n    this._selectedItem = item;\r\n\r\n    this.fnIndivMstr();\r\n    \r\n  }\r\n\r\n  removeTalentMngr(item)\r\n  {\r\n    item.TALENT_MANAGER = undefined;\r\n\r\n    \r\n     // AURELIA now is not supporting removing of property, changed it to undefined instead\r\n     // delete all.TALENT_MANAGER.CONTRACT_AMT_TMP;\r\n     // delete all.TALENT_MANAGER.INPUT_AMT_TMP;\r\n     // delete all.TALENT_MANAGER.PAY_RATE_FACTOR_TMP;\r\n     // delete all.TALENT_MANAGER.REMARKS;\r\n     //delete all.TALENT_MANAGER;\r\n     \r\n\r\n     this._signal = generateID();\r\n\r\n     this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>{\r\n       all();\r\n     });\r\n\r\n   }\r\n\r\n  //@handle('pass.indiv')\r\n  PassedIndiv(value) \r\n  {\r\n   // if (this.modalIndivMstrManager.id == this._ModalWizard.ids[this._ModalWizard.ids.length - 1]) {\r\n  //    this._ModalWizard.ids.pop();\r\n\r\n\r\n    // this._cache_budget.OBSERVERS.close_modal.forEach((all)=>{\r\n    //   all(this.modalIndivMstrManager.id);\r\n    // });\r\n\r\n      //this._dispatcher.dispatch('close.modal', this.modalIndivMstrManager.id);\r\n      if(this._selectedItem!==undefined)\r\n        if(value.GLOBAL_INDIV_ID==this._selectedItem.GLOBAL_ID)\r\n        {\r\n          toastr.error(\"<strong>Talent Manager cannot be same Personnel</strong>.\", \"Problem occured\");\r\n          return;\r\n        }\r\n\r\n      // this._selectedItem.TALENT_MANAGER = value;\r\n      // this._selectedItem.TALENT_MANAGER.CONTRACT_AMT_TMP = numeral(0).format('0,0.00');\r\n      // this._selectedItem.TALENT_MANAGER.INPUT_AMT_TMP = numeral(0).format('0,0.00');\r\n      // this._selectedItem.TALENT_MANAGER.PAY_RATE_FACTOR_TMP = numeral(0).format('0,0.00');\r\n\r\n\r\n      var varJobTManager = getJobByName(\"TALENT MANAGER\");\r\n      if(parseInt(varJobTManager.COMPANY_ID)!=parseInt(this._cache_obj.USER.COMPANY_ID))\r\n      {\r\n        toastr.error(varJobTManager.JOB_DESC+\" Job is not included on jobs from users company.\", \"Problem occured\");\r\n        varJobTManager.JOB_ID=\"\";\r\n        varJobTManager.JOB_DESC=\"\";\r\n      }\r\n\r\n\r\n      this.getDefaultPymntTerm();\r\n\r\n      this._selectedItem.TALENT_MANAGER = { GLOBAL_INDIV_ID: value.GLOBAL_INDIV_ID, PERSONNEL_NAME: value.PERSONNEL_NAME,\r\n        PERSONNEL_INFO_SRC: value.PERSONNEL_INFO_SRC,\r\n        JOB_ID: varJobTManager.JOB_ID,\r\n        JOB_DESC: varJobTManager.JOB_DESC,\r\n        PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n        PAYMENT_TERM: this.varPymnt.REF_DESC,\r\n        CATEGORY_ID: varJobTManager.CATEGORY_ID,\r\n        CATEGORY_DESC: varJobTManager.CATEGORY_DESC,\r\n        PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n        CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n        INPUT_AMT_TMP: numeral(0).format('0,0.00')\r\n      };  \r\n\r\n      \r\n      this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>\r\n      {\r\n        all();\r\n      });\r\n\r\n      \r\n\r\n    //}\r\n  }\r\n\r\n  getDefaultPymntTerm()\r\n  {\r\n\r\n    if(this.varPymnt==null)\r\n      this.varPymnt=this._PYMNTTERM.find(all => all.REF_GRP_CD == 'PYMNT_TERM_CD' && all.REF_CD == 'DAILY');\r\n\r\n  }\r\n\r\n  fnPassedPersonnels(value)\r\n  {\r\n      console.log(value);\r\n    this.getDefaultPymntTerm();\r\n\r\n    value.forEach((val) => {\r\n\r\n      var varJob =  getJobByGlobalCompany(val.GLOBAL_INDIV_ID);\r\n\r\n      if (parseInt(varJob.COMPANY_ID) !== parseInt(this._cache_obj.USER.COMPANY_ID)) {\r\n        toastr.error(varJob.JOB_DESC +\" Job is not included on jobs from users company.\", \"Problem occured\");\r\n        varJob.JOB_ID = \"\";\r\n        varJob.JOB_DESC = \"\";\r\n      }\r\n\r\n      this._Personnel.push({\r\n        GLOBAL_ID: val.GLOBAL_INDIV_ID,\r\n        PERSONNEL_NAME: val.PERSONNEL_NAME,\r\n        PERSONNEL_INFO_SRC: val.PERSONNEL_INFO_SRC,\r\n        JOB_ID: varJob.JOB_ID,\r\n        JOB_DESC: varJob.JOB_DESC,\r\n        PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n        PAYMENT_TERM: this.varPymnt.REF_DESC,\r\n        CATEGORY_ID: varJob.CATEGORY_ID,\r\n        CATEGORY_DESC: varJob.CATEGORY_DESC,\r\n        PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n        CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n        INPUT_AMT_TMP: numeral(0).format('0,0.00'),\r\n        STAFF_WORK_TMP: false,\r\n        CONFIDENTIAL_TMP: false,\r\n        visible: true\r\n          //t_talent_manager:true\r\n        });\r\n\r\n      \r\n    });\r\n\r\n\r\n    this._Personnel.forEach((all) => {\r\n      if (all.STATUS_CD == \"\" || all.STATUS_CD === undefined) {\r\n        all.STATUS_CD = \"\";\r\n      }\r\n      all.ce_value = \"+\";\r\n      all.styleString = this.styleStringHidden;\r\n    });\r\n\r\n\r\n      //this.setPersonnel(tmpgrpMembers) ;\r\n      \r\n      \r\n      this._Personnel.forEach((all)=>{\r\n        var varIndiv = getLookups().GRP_INDIV_MSTR.find((allIndiv)=>allIndiv.GLOBAL_INDIV_ID==all.GLOBAL_ID);\r\n        \r\n        if(varIndiv!==undefined)\r\n        {\r\n         var varJobTManager = getJobByName(\"TALENT MANAGER\");\r\n\r\n         if (parseInt(varJobTManager.COMPANY_ID) != parseInt(this._cache_obj.USER.COMPANY_ID)) {\r\n          toastr.error(varJobTManager.JOB_DESC + \"Job is not included on jobs from users company.\", \"Problem occured\");\r\n          varJobTManager.JOB_ID = \"\";\r\n          varJobTManager.JOB_DESC = \"\";\r\n        }\r\n\r\n        var varTalent = getLookups().GLOBAL_GRP_MSTR.find((allIndiv)=>allIndiv.GLOBAL_GRP_ID==varIndiv.GLOBAL_GRP_ID);\r\n        all.TALENT_MANAGER = { GLOBAL_INDIV_ID: varTalent.GLOBAL_GRP_ID, PERSONNEL_NAME: varTalent.GROUP_NAME,\r\n          PERSONNEL_INFO_SRC: varJobTManager.PERSONNEL_INFO_SRC,\r\n          JOB_ID: varJobTManager.JOB_ID,\r\n          JOB_DESC: varJobTManager.JOB_DESC,\r\n          PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n          PAYMENT_TERM: this.varPymnt.REF_DESC,\r\n          CATEGORY_ID: varJobTManager.CATEGORY_ID,\r\n          CATEGORY_DESC: varJobTManager.CATEGORY_DESC,\r\n          PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n          CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n          INPUT_AMT_TMP: numeral(0).format('0,0.00'),\r\n          STAFF_WORK_TMP: false,\r\n          CONFIDENTIAL_TMP: false\r\n        };  \r\n\r\n        \r\n      }\r\n\r\n    });\r\n      \r\n\r\n      this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>{\r\n        all();\r\n      });\r\n\r\n\r\n    }\r\n\r\n  //@handle('pass.group')\r\n  PassedGroup(value) \r\n  {\r\n\r\n    // if (this.modalIndivMstr.id == this._ModalWizard.ids[this._ModalWizard.ids.length - 1]) {\r\n\r\n\r\n    //   this._ModalWizard.ids.pop();\r\n\r\n\r\n    //   this._cache_obj.OBSERVERS.close_modal.forEach((all)=>{\r\n    //     all(this.modalIndivMstr.id);\r\n    //   });\r\n\r\n\r\n\r\n    // } else \r\n\r\n    if (this.modalIndivMstrTalents.id == this._ModalWizard.ids[this._ModalWizard.ids.length - 1]) {\r\n\r\n      \r\n      //var tmpgrpMembers = this._Personnel;\r\n      \r\n      this.getDefaultPymntTerm();\r\n\r\n      this._selectedItem.TALENTS = value;\r\n\r\n      this._selectedItem.TALENTS.forEach((all)=>{\r\n        if (this._Personnel.find((allReg) => allReg.GLOBAL_ID == all.GLOBAL_INDIV_ID) === undefined) {\r\n          \r\n          var varJob = getJobByGlobalCompany(all.GLOBAL_INDIV_ID);\r\n\r\n          if (parseInt(varJob.COMPANY_ID) != parseInt(this._cache_obj.USER.COMPANY_ID)) {\r\n            toastr.error(varJob.JOB_DESC+\" Job is not included on jobs from users company.\", \"Problem occured\");\r\n            varJob.JOB_ID = \"\";\r\n            varJob.JOB_DESC = \"\";\r\n          }\r\n\r\n          var varTalent = getLookups().GLOBAL_INDIV_WITH_ALIAS.find((allIndiv)=>allIndiv.GLOBAL_INDIV_ID==all.GLOBAL_INDIV_ID);\r\n\r\n          this._Personnel.push({\r\n            GLOBAL_ID: all.GLOBAL_INDIV_ID,\r\n            PERSONNEL_NAME: all.PERSONNEL_NAME,\r\n            PERSONNEL_INFO_SRC: varTalent.PERSONNEL_INFO_SRC,\r\n            JOB_ID: varJob.JOB_ID,\r\n            JOB_DESC: varJob.JOB_DESC,\r\n            PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n            PAYMENT_TERM: this.varPymnt.REF_DESC,\r\n            CATEGORY_ID: varJob.CATEGORY_ID,\r\n            CATEGORY_DESC: varJob.CATEGORY_DESC,\r\n            PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n            CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n            INPUT_AMT_TMP: numeral(0).format('0,0.00'),\r\n            STAFF_WORK_TMP: false,\r\n            CONFIDENTIAL_TMP: false,\r\n            GLOBAL_ID_LINK: this._selectedItem.GLOBAL_ID,\r\n            TALENT_MANAGER: {\r\n              GLOBAL_INDIV_ID: this._selectedItem.GLOBAL_ID,\r\n              PERSONNEL_NAME: this._selectedItem.PERSONNEL_NAME\r\n            }\r\n          });\r\n        }\r\n      });\r\n      \r\n\r\n      this._ModalWizard.ids.pop();\r\n\r\n\r\n\r\n      // this._cache_budget.OBSERVERS.close_modal.forEach((all)=>{\r\n      //   all(this.modalIndivMstrTalents.id);\r\n      // });\r\n\r\n\r\n      this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>{\r\n        all();\r\n      });\r\n\r\n    }\r\n\r\n    this._signal = generateID();\r\n\r\n    // setTimeout(() => {\r\n    //   this.fnReloadTypeahead();\r\n    //  }, 5000);\r\n  }\r\n\r\n  //@handle('refreshPersonnelTab')\r\n  refreshOnSelect(personnel) \r\n  {\r\n    $(this.tblHeader).css(\"visibility\",\"hidden\");\r\n  }\r\n\r\n  moveTrigger(value) \r\n  {\r\n\r\n    if (value == \"up\") \r\n    {\r\n      if (this._currentIndex > 0) \r\n      {\r\n\r\n        this._Personnel.splice(this._currentIndex-1, 0, this._Personnel[this._currentIndex]);\r\n        var varCopy = this._Personnel.splice(this._currentIndex + 1, 1);\r\n        this._currentIndex = this._currentIndex-1;\r\n\r\n      }\r\n\r\n    } \r\n    else \r\n    {\r\n\r\n      if (this._currentIndex < this._Personnel.length - 1) {\r\n\r\n       // var varIndex=this._currentIndex + 1;\r\n       //  var varFinish=false;\r\n       //  while (!varFinish) {\r\n       //    if (this._Personnel[varIndex].GROUP_ORDER == -1) {\r\n       //        ++varIndex;\r\n       //        console.log(varIndex);\r\n       //    }\r\n       //    else\r\n       //    {\r\n       //        varFinish=true;\r\n       //    }\r\n\r\n\r\n       //    if(varIndex<0)\r\n       //    {\r\n       //      varFinish=true;\r\n       //      varIndex=this._Personnel.length - 1;\r\n       //    }\r\n       //  }\r\n\r\n       //  this._Personnel.splice(this._currentIndex + 2, 0, this._Personnel[this._currentIndex]);\r\n       //  var varCopy = this._Personnel.splice(this._currentIndex, 1);\r\n       //  this._currentIndex = this._currentIndex + 1;\r\n\r\n       this._Personnel.splice(this._currentIndex + 2, 0, this._Personnel[this._currentIndex]);\r\n       var varCopy = this._Personnel.splice(this._currentIndex, 1);\r\n       this._currentIndex = this._currentIndex + 1;\r\n     }\r\n   }\r\n\r\n    //have to do bec refreshing on filter arrangement will not be refreshed.\r\n    this._signal = generateID();\r\n  }\r\n\r\n  focusTrigger(index)\r\n  {\r\n\r\n    this._currentIndex = index;\r\n    \r\n  }\r\n\r\n  savePersonnel(tag) \r\n  {\r\n    \r\n    var varErrorDuplicate = \"\";\r\n    var varErrorJobTerms = \"\";\r\n    var varErrorCheckTalentManager = \"\";\r\n\r\n    var varDuplicateValidation = [];\r\n\r\n    var varI=0;//eliminate talent manager\r\n    var varJ=0;//eliminate talent manager\r\n\r\n    for (var i = 0; i <= this._Personnel.length - 1; ++i) {\r\n      \r\n      \r\n      for (var j = 0; j <= this._Personnel.length - 1; ++j) {\r\n\r\n        if(this._Personnel[j].GROUP_ORDER!==-1 && this._Personnel[i].GROUP_ORDER!==-1)\r\n        {\r\n          if (this._Personnel[j].PERSONNEL_NAME == this._Personnel[i].PERSONNEL_NAME &&\r\n            this._Personnel[j].JOB_ID == this._Personnel[i].JOB_ID && i != j && varDuplicateValidation.find((all) => all == this._Personnel[j].PERSONNEL_NAME) == undefined && (this._Personnel[i].PERSONNEL_NAME == null ? \"\" : this._Personnel[i].PERSONNEL_NAME.trim()) != \"\") {\r\n\r\n            varErrorDuplicate += \"<br /><br />\" + this._Personnel[j].PERSONNEL_NAME + \"-\" + this._Personnel[j].JOB_DESC + \" Row(\" + (varJ + 1) + \").\";\r\n\r\n          varDuplicateValidation.push(this._Personnel[j].PERSONNEL_NAME);\r\n        }\r\n        \r\n      }\r\n\r\n      if(this._Personnel[j].GROUP_ORDER!==-1)\r\n      {\r\n        ++varJ;\r\n      }\r\n      \r\n    }\r\n\r\n    if (this._Personnel[i].GROUP_ORDER !== -1) {\r\n      ++varI;\r\n    }\r\n  }\r\n\r\n    varI=0;//eliminate talent manager\r\n    varJ=0;//eliminate talent manager\r\n\r\n    for (var j = 0; j <= this._Personnel.length - 1; ++j) {\r\n\r\n      if(this._Personnel[j].GROUP_ORDER!==-1)\r\n        if (this._Personnel[j].JOB_ID === undefined || this._Personnel[j].JOB_ID == \"\" || this._Personnel[j].PYMNT_TERM_CD == \"\" || this._Personnel[j].PYMNT_TERM_CD === undefined || this._Personnel[j].JOB_ID === null || this._Personnel[j].PYMNT_TERM_CD === null)\r\n        { \r\n          varErrorJobTerms += \"<br /><br />\" + \"Row (\" + (varJ + 1) + \").\";\r\n        }\r\n\r\n\r\n        if(this._Personnel[j].GROUP_ORDER!==-1)\r\n        {\r\n          ++varJ;\r\n        }\r\n        \r\n      }\r\n\r\n\r\n      if (varErrorDuplicate != \"\") {\r\n        toastr.error(\"<strong>Duplicate Personnel and Job</strong>\" + varErrorDuplicate + \"<br /><br />Saving cancelled.\", \"Problem occured\");\r\n      }\r\n\r\n      if (varErrorJobTerms != \"\") {\r\n        toastr.error(\"<strong>JOB/PAYMENT TERM not set</strong>\" + varErrorJobTerms + \"<br /><br />Saving cancelled.\", \"Problem occured\");\r\n      }\r\n\r\n\r\n      if (varErrorDuplicate != \"\" || varErrorJobTerms!=\"\" || varErrorCheckTalentManager!=\"\") {\r\n        return;\r\n      }\r\n\r\n      \r\n\r\n      var getMax = EntityQuery().from('BDGT_TMPL_DTL').orderByDesc('BDGT_TMPL_DTL_ID').take(1);\r\n      EntityManager().executeQuery(getMax).then((successMax) => {\r\n        var getMax = 1;\r\n\r\n        if (successMax.results.length > 0)\r\n          getMax = successMax.results[0].BDGT_TMPL_DTL_ID + 1;\r\n\r\n        var varIndex = 1;\r\n        \r\n\r\n        var getAllDtl = EntityQuery().from('BDGT_TMPL_DTL').where(\"BDGT_TMPL_ID\", '==', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n        EntityManager().executeQuery(getAllDtl).then((foundDtl) => {\r\n\r\n          this._Personnel.forEach((item) => {\r\n            if (item.BDGT_TMPL_DTL_ID === undefined) {\r\n              item.BDGT_TMPL_DTL_ID_TMP = getMax;\r\n              ++getMax;\r\n            }\r\n          });\r\n\r\n          this._Personnel.forEach((item) => {\r\n            if (item.TALENT_MANAGER !== undefined) {\r\n\r\n              if (item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP == undefined) {\r\n                item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP = getMax;\r\n                item.BDGT_TMPL_DTL_ID_LINK = getMax;\r\n                item.TALENT_MANAGER.IsNewTalent = true;\r\n                ++getMax;\r\n              }\r\n\r\n\r\n            }\r\n\r\n          });\r\n\r\n\r\n\r\n          this._Personnel.forEach((item) => {\r\n           \r\n\r\n            if (item.BDGT_TMPL_DTL_ID === undefined && item.GROUP_ORDER !== -1) {\r\n              \r\n              var varInsert = EntityManager().createEntity('BDGT_TMPL_DTL', {\r\n                BDGT_TMPL_DTL_ID: item.BDGT_TMPL_DTL_ID_TMP,\r\n                BDGT_TMPL_ID: this._cache_budget.HEADER.BDGT_TMPL_ID,\r\n                JOB_ID: item.JOB_ID,\r\n                GLOBAL_ID: item.GLOBAL_ID,\r\n                CONTRACT_AMT: item.CONTRACT_AMT_TMP.replace(/,/g, ''),\r\n                CATEGORY_ID: item.CATEGORY_ID,\r\n                STAFF_WORK: (item.STAFF_WORK_TMP === undefined ? 0 : (item.STAFF_WORK_TMP == true ? 1 : 0)),\r\n                PYMNT_TERM_CD: item.PYMNT_TERM_CD,\r\n                PAY_TO_PERSON_FL: 'T',\r\n                PAY_RATE_FACTOR: item.PAY_RATE_FACTOR_TMP.replace(/,/g, ''),\r\n                BUDGET_AMT: item.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                TAPING_DAY_CNT: this._cache_budget.HEADER.TAPING_DAYS,\r\n                PERSONNEL_CLASS_CD: (this.toPersonModel.USE != \"STAFF\" ? \"Mainstay\" : \"Staff\"),\r\n                REMARKS: item.REMARKS,\r\n                PERSONNEL_INFO_SRC: item.PERSONNEL_INFO_SRC,\r\n                PERSONNEL_NAME: (item.BLANK_PERSONNEL_NAME !== undefined ? item.BLANK_PERSONNEL_NAME : item.PERSONNEL_NAME),\r\n                CREATED_BY: this._cache_obj.USER.USER_ID,\r\n                CREATED_DT: new Date(),\r\n                INPUT_AMT: item.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                EPISODES: this._cache_budget.HEADER.EPISODES,\r\n                CONFIDENTIAL: (item.CONFIDENTIAL_TMP === undefined ? 0 : (item.CONFIDENTIAL_TMP == true ? 1 : 0)),\r\n                PER_TAPING_DAY_RATE: 0,\r\n                PERSONNEL_CLASS_TYPE: this.getPersonnelClassType(),\r\n                POOL_RECORD: (item.POOL_RECORD_TMP==null || item.POOL_RECORD_TMP==undefined?0:(item.POOL_RECORD_TMP == true ? 1 : 0)),\r\n                GROUP_ORDER: varIndex,\r\n                GLOBAL_ID_LINK: (item.TALENT_MANAGER !== undefined && item.TALENT_MANAGER !== null ? item.TALENT_MANAGER.GLOBAL_INDIV_ID : \"NONE\"),\r\n                BDGT_TMPL_DTL_ID_LINK: (item.BDGT_TMPL_DTL_ID_LINK !== undefined && item.BDGT_TMPL_DTL_ID_LINK !== null? item.BDGT_TMPL_DTL_ID_LINK : 0),\r\n                WITH_TALENT_MANAGER: (item.TALENT_MANAGER !== undefined && item.TALENT_MANAGER !== null ? '1' : '0')\r\n              });\r\n              \r\n\r\n              EntityManager().addEntity(varInsert);\r\n\r\n            //has talent manager\r\n            if (item.TALENT_MANAGER !== undefined) {\r\n              \r\n              var varInsertTM = EntityManager().createEntity('BDGT_TMPL_DTL', {\r\n                BDGT_TMPL_DTL_ID: item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP,\r\n                BDGT_TMPL_ID: this._cache_budget.HEADER.BDGT_TMPL_ID,\r\n                JOB_ID: item.TALENT_MANAGER.JOB_ID,\r\n                GLOBAL_ID: item.TALENT_MANAGER.GLOBAL_INDIV_ID,\r\n                CONTRACT_AMT: item.TALENT_MANAGER.CONTRACT_AMT_TMP.replace(/,/g, ''),\r\n                CATEGORY_ID: item.TALENT_MANAGER.CATEGORY_ID,\r\n                STAFF_WORK: 0,\r\n                PYMNT_TERM_CD: item.PYMNT_TERM_CD,\r\n                PAY_TO_PERSON_FL: 'T',\r\n                PAY_RATE_FACTOR: item.TALENT_MANAGER.PAY_RATE_FACTOR_TMP.replace(/,/g, ''),\r\n                BUDGET_AMT: item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                TAPING_DAY_CNT: this._cache_budget.HEADER.TAPING_DAYS,\r\n                PERSONNEL_CLASS_CD: (this.toPersonModel.USE != \"STAFF\" ? \"Mainstay\" : \"Staff\"),\r\n                REMARKS: item.TALENT_MANAGER.REMARKS,\r\n                PERSONNEL_INFO_SRC: item.PERSONNEL_INFO_SRC,\r\n                PERSONNEL_NAME: item.TALENT_MANAGER.PERSONNEL_NAME,\r\n                CREATED_BY: this._cache_obj.USER.USER_ID,\r\n                CREATED_DT: new Date(),\r\n                INPUT_AMT: item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                EPISODES: this._cache_budget.HEADER.EPISODES,\r\n                CONFIDENTIAL: 0,\r\n                PER_TAPING_DAY_RATE: 0,\r\n                PERSONNEL_CLASS_TYPE: this.getPersonnelClassType(),\r\n                POOL_RECORD: 0,\r\n                GROUP_ORDER: -1,\r\n                WITH_TALENT_MANAGER: '0',\r\n                GLOBAL_ID_LINK: 'NONE',\r\n                BDGT_TMPL_DTL_ID_LINK:0\r\n              });\r\n\r\n              EntityManager().addEntity(varInsertTM);\r\n            }\r\n\r\n          } else if (item.REMOVE == true) {\r\n            \r\n            if (item.TALENT_MANAGER !== undefined) {\r\n              var varTalentMngrToDelete = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n              console.log(varTalentMngrToDelete);\r\n              varTalentMngrToDelete.entityAspect.setDeleted();\r\n            }\r\n\r\n            var varTalentToDelete = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID);\r\n            //console.log(varTalentToDelete);\r\n            varTalentToDelete.entityAspect.setDeleted();\r\n            // item.entityAspect.setDeleted();      \r\n\r\n          } else {\r\n           \r\n            var varTalentToEdit = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID);\r\n\r\n            varTalentToEdit.JOB_ID = item.JOB_ID;\r\n            \r\n            varTalentToEdit.GLOBAL_ID = item.GLOBAL_ID;\r\n            varTalentToEdit.CONTRACT_AMT = item.CONTRACT_AMT_TMP.replace(/,/g, '');\r\n            varTalentToEdit.CATEGORY_ID = item.CATEGORY_ID;\r\n            varTalentToEdit.STAFF_WORK = (item.STAFF_WORK_TMP === undefined ? 0 : (item.STAFF_WORK_TMP == true ? 1 : 0));\r\n            varTalentToEdit.PYMNT_TERM_CD = item.PYMNT_TERM_CD;\r\n            varTalentToEdit.PAY_RATE_FACTOR = item.PAY_RATE_FACTOR_TMP.replace(/,/g, '');\r\n            varTalentToEdit.BUDGET_AMT = item.INPUT_AMT_TMP.replace(/,/g, '');\r\n            varTalentToEdit.TAPING_DAY_CNT = this._cache_budget.HEADER.TAPING_DAYS;\r\n            varTalentToEdit.REMARKS = item.REMARKS;\r\n            varTalentToEdit.PERSONNEL_INFO_SRC = item.PERSONNEL_INFO_SRC;\r\n            varTalentToEdit.PERSONNEL_NAME = (item.BLANK_PERSONNEL_NAME !== undefined ? item.BLANK_PERSONNEL_NAME : item.PERSONNEL_NAME);\r\n            varTalentToEdit.LAST_UPDATED_BY = this._cache_obj.USER.USER_ID;\r\n            varTalentToEdit.LAST_UPDATED_DT = new Date();\r\n            varTalentToEdit.INPUT_AMT = item.INPUT_AMT_TMP.replace(/,/g, '');\r\n            varTalentToEdit.EPISODES = this._cache_budget.HEADER.EPISODES;\r\n            varTalentToEdit.CONFIDENTIAL = (item.CONFIDENTIAL_TMP === undefined ? 0 : (item.CONFIDENTIAL_TMP == true ? 1 : 0));\r\n            varTalentToEdit.POOL_RECORD = (item.POOL_RECORD_TMP==null || item.POOL_RECORD_TMP==undefined?0:(item.POOL_RECORD_TMP == true ? 1 : 0));\r\n\r\n            if (varTalentToEdit.GROUP_ORDER !== -1)\r\n              varTalentToEdit.GROUP_ORDER = varIndex;\r\n\r\n            varTalentToEdit.GLOBAL_ID_LINK = (item.TALENT_MANAGER !== undefined && item.TALENT_MANAGER !== null ? item.TALENT_MANAGER.GLOBAL_INDIV_ID : \"NONE\");\r\n            varTalentToEdit.BDGT_TMPL_DTL_ID_LINK = (item.BDGT_TMPL_DTL_ID_LINK !== undefined && item.BDGT_TMPL_DTL_ID_LINK !== null ? item.BDGT_TMPL_DTL_ID_LINK : 0);\r\n            varTalentToEdit.WITH_TALENT_MANAGER = (item.TALENT_MANAGER !== undefined && item.TALENT_MANAGER!==null ? '1' : '0');\r\n\r\n\r\n            if (item.TALENT_MANAGER !== undefined) {\r\n\r\n             \r\n\r\n              if (item.BDGT_TMPL_DTL_ID_LINK_TMP !== undefined) {\r\n                //check existing linked talent manager before saving check if not match\r\n                var varCheckTalent = this._PersonnelTM.find((allTalent) => allTalent.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n                \r\n                if (varCheckTalent !== undefined) {\r\n\r\n                  if (varCheckTalent.BDGT_TMPL_DTL_ID !== item.BDGT_TMPL_DTL_ID_LINK) {\r\n\r\n                    var varTalentMngrToEdit = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n                    \r\n                    varTalentMngrToEdit.entityAspect.setDeleted();\r\n                    // //varCheckTalent.entityAspect.setDeleted();\r\n                    //   var varRemoveTalent = this._Personnel.find((allTalent) => allTalent.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n                    //   if (varRemoveTalent !== undefined) {\r\n                    //     var getForDelete = EntityQuery().from('BDGT_TMPL_DTL').where(\"BDGT_TMPL_DTL_ID\", '==', varRemoveTalent.BDGT_TMPL_DTL_ID);\r\n                    //     EntityManager().executeQuery(getForDelete).then((found) => {\r\n                    //       found.results[0].setDeleted();\r\n                    //     });\r\n\r\n                    //     // varRemoveTalent.entityAspect.setDeleted();      \r\n                    //   }\r\n                  } else {\r\n                    var varTalentMngrToEdit = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n                    varTalentMngrToEdit.CONTRACT_AMT = item.TALENT_MANAGER.CONTRACT_AMT_TMP.replace(/,/g, '');\r\n                    varTalentMngrToEdit.PAY_RATE_FACTOR = item.TALENT_MANAGER.PAY_RATE_FACTOR_TMP.replace(/,/g, '');\r\n                    varTalentMngrToEdit.INPUT_AMT = item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, '');\r\n                    varTalentMngrToEdit.BUDGET_AMT = item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, '');\r\n                    varTalentMngrToEdit.REMARKS = item.TALENT_MANAGER.REMARKS;\r\n\r\n                  }\r\n\r\n                }\r\n              }\r\n\r\n              if (item.TALENT_MANAGER.IsNewTalent) {\r\n                //add new Talent Manager, existing Talent Manager should be remove before adding new\r\n                var varInsertTM = EntityManager().createEntity('BDGT_TMPL_DTL', {\r\n                  BDGT_TMPL_DTL_ID: item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP,\r\n                  BDGT_TMPL_ID: this._cache_budget.HEADER.BDGT_TMPL_ID,\r\n                  JOB_ID: item.TALENT_MANAGER.JOB_ID,\r\n                  GLOBAL_ID: item.TALENT_MANAGER.GLOBAL_INDIV_ID,\r\n                  CONTRACT_AMT: item.TALENT_MANAGER.CONTRACT_AMT_TMP.replace(/,/g, ''),\r\n                  CATEGORY_ID: item.TALENT_MANAGER.CATEGORY_ID,\r\n                  STAFF_WORK: 0,\r\n                  PYMNT_TERM_CD: item.PYMNT_TERM_CD,\r\n                  PAY_TO_PERSON_FL: 'T',\r\n                  PAY_RATE_FACTOR: item.TALENT_MANAGER.PAY_RATE_FACTOR_TMP.replace(/,/g, ''),\r\n                  BUDGET_AMT: item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                  TAPING_DAY_CNT: this._cache_budget.HEADER.TAPING_DAYS,\r\n                  PERSONNEL_CLASS_CD: (this.toPersonModel.USE != \"STAFF\" ? \"Mainstay\" : \"Staff\"),\r\n                  REMARKS: item.TALENT_MANAGER.REMARKS,\r\n                  PERSONNEL_INFO_SRC: item.PERSONNEL_INFO_SRC,\r\n                  PERSONNEL_NAME: item.TALENT_MANAGER.PERSONNEL_NAME,\r\n                  CREATED_BY: this._cache_obj.USER.USER_ID,\r\n                  CREATED_DT: new Date(),\r\n                  INPUT_AMT: item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                  EPISODES: this._cache_budget.HEADER.EPISODES,\r\n                  CONFIDENTIAL: 0,\r\n                  PER_TAPING_DAY_RATE: 0,\r\n                  PERSONNEL_CLASS_TYPE: this.getPersonnelClassType(),\r\n                  POOL_RECORD: 0,\r\n                  GROUP_ORDER: -1,\r\n                  WITH_TALENT_MANAGER:'0',\r\n                  GLOBAL_ID_LINK: 'NONE',\r\n                  BDGT_TMPL_DTL_ID_LINK:0,\r\n                });\r\n                EntityManager().addEntity(varInsertTM);\r\n              }\r\n\r\n            } else if (item.TALENT_MANAGER === undefined && item.BDGT_TMPL_DTL_ID_LINK_TMP !== undefined) {\r\n\r\n              var varTalentMngrToDelete = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n\r\n              if (varTalentMngrToDelete !== undefined)\r\n              {\r\n                var varTalentToEdit = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID);\r\n                varTalentMngrToDelete.entityAspect.setDeleted();\r\n\r\n                varTalentToEdit.GLOBAL_ID_LINK = 'NONE';\r\n                varTalentToEdit.BDGT_TMPL_DTL_ID_LINK = 0;\r\n                varTalentToEdit.WITH_TALENT_MANAGER = '0';\r\n\r\n              }\r\n              \r\n            }\r\n\r\n          }\r\n\r\n          ++varIndex;\r\n\r\n        });\r\n\r\nEntityManager().saveChanges().then((success) => {\r\n  this.fnCheckBudget(this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n  toastr.success(\"Succesfully Saved\", this.toPersonModel.USE);\r\n\r\n  if(tag==1)\r\n    this.fnSequenceDispatch();\r\n\r\n}, (fail) => {\r\n\r\n  EntityManager().getEntities().forEach(function(entity) {\r\n    var errors = entity.entityAspect.getValidationErrors();\r\n    if (errors.length > 0)\r\n      console.log(errors);\r\n  });\r\n  console.log(fail);\r\n  toastr.error(\"Error Occured\",\r\n    fail);\r\n\r\n  if(tag==1)\r\n    this.fnSequenceDispatch();\r\n  \r\n\r\n});\r\n\r\n\r\n      }); //foundDtl\r\n\r\n\r\n\r\n\r\n\r\n\r\n    });//max dtl\r\n\r\n}\r\n\r\nfnSequenceDispatch()\r\n{\r\n\r\n  if (this.toPersonModel.USE == \"REGULAR\")\r\n  {\r\n\r\n    this._cache_budget.OBSERVERS.copy_template.forEach((all)=>{\r\n      all('SEMI_REGULAR');\r\n    });\r\n\r\n  }\r\n  else if (this.toPersonModel.USE == \"SEMI_REGULAR\")\r\n  {\r\n\r\n    this._cache_budget.OBSERVERS.copy_template.forEach((all)=>{\r\n      all('STAFF');\r\n    });\r\n\r\n  }\r\n  else if (this.toPersonModel.USE == \"STAFF\")\r\n  {\r\n\r\n    this._cache_budget.OBSERVERS.copy_template_guest.forEach((all)=>{\r\n     all();\r\n   }); \r\n\r\n  }\r\n\r\n\r\n  \r\n}\r\n\r\ngetPersonnelClassType()\r\n{\r\n  if(this.toPersonModel.USE=='REGULAR')\r\n  {\r\n    return 'Regular';\r\n  }\r\n  else if(this.toPersonModel.USE=='SEMI_REGULAR')\r\n  {\r\n    return 'Semi-Regular';\r\n  }\r\n  else\r\n    return 'Staff'; \r\n}\r\n\r\nfnRegularBlurEvt(item, property, index, BDGT_TMPL_DTL_ID)\r\n{\r\n\r\n\r\n if (property == \"TERM\") {\r\n  if($(\"input[tableTermIndex*='\" + index + \"']\").val()===undefined) return;\r\n  this._Personnel[index].PAYMENT_TERM = $(\"input[tableTermIndex*='\" + index + \"']\").val().toUpperCase();\r\n\r\n  var varPaymentTerm=this._Personnel[index].PAYMENT_TERM.trim();\r\n  var varFound = this._PYMNTTERM.find((all) => {\r\n    return varPaymentTerm == all.REF_DESC.trim();\r\n  });\r\n\r\n\r\n  if (varFound !== undefined) {\r\n    this._Personnel[index].PYMNT_TERM_CD = varFound.REF_CD;\r\n  } else\r\n  this._Personnel[index].PYMNT_TERM_CD = \"\";\r\n\r\n\r\n}\r\n\r\n}\r\n\r\nfnBlankPersonnelRegular()\r\n{\r\n  \r\n  this.getDefaultPymntTerm();\r\n\r\n  this._Personnel.push({visible:true,PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n    CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n    INPUT_AMT_TMP: numeral(0).format('0,0.00'),\r\n    PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n    PAYMENT_TERM: this.varPymnt.REF_DESC\r\n  });\r\n\r\n  var varBudgetLast = this._Personnel[this._Personnel.length - 1];\r\n  varBudgetLast.ce_value = \"+\";\r\n  varBudgetLast.styleString = this.styleStringHidden;\r\n\r\n    // setTimeout(()=>{this.fnReloadTypeahead();},500);\r\n    \r\n    this._signal = generateID();\r\n\r\n    this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>{\r\n      all();\r\n    });\r\n\r\n    //this._cache_budget.CALLER.ACTION='reset.summary';\r\n\r\n    //this._dispatcher.dispatch('reset.summary');\r\n  }\r\n\r\n  chkRemove(item)\r\n  {\r\n    if(item.REMOVE)\r\n    {\r\n      item.REMOVE=false;\r\n    }\r\n    else\r\n    {\r\n      item.REMOVE=true;\r\n    }\r\n  }\r\n\r\n  removeRegular(index) \r\n  {\r\n   \r\n    var varRemoved = this._Personnel.splice(index, 1);\r\n    this._signal = generateID();\r\n    //this._cache_budget.CALLER.ACTION='reset.summary';\r\n    this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>{\r\n      all();\r\n    });\r\n    //this._dispatcher.dispatch('reset.summary');\r\n  }\r\n\r\n  fnIndivMstrTalents(){\r\n    this.dialogService.open({\r\n      viewModel: globalindivmstr\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        \r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n  fnIndivMstr()\r\n  {\r\n    this.dialogService.open({\r\n      viewModel: indivmstr\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        this.PassedIndiv(response.output);\r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n  fnModalJob()\r\n  {\r\n    this.dialogService.open({\r\n      viewModel: job\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        this.passJob(response.output);\r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  fnModalPaymentTerm()\r\n  {\r\n    this.dialogService.open({\r\n      viewModel: paymentterm\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        this.passTerm(response.output);\r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  passTerm(term) \r\n  {\r\n\r\n    var index = this._Index;\r\n    \r\n    this._Personnel[index].PYMNT_TERM_CD = term.REF_CD;\r\n    this._Personnel[index].PAYMENT_TERM = term.REF_DESC;\r\n    \r\n  }\r\n\r\n  fnIndivMstrManager()\r\n  {\r\n   this.dialogService.open({\r\n    viewModel: globalindivmstr\r\n   }).whenClosed(response => {\r\n    \r\n    if (!response.wasCancelled) {\r\n      this.fnPassedPersonnels(response.output);\r\n    } else {\r\n      \r\n    }\r\n  });\r\n}\r\n}","import {bindable,inject} from 'aurelia-framework';\r\nimport { cache_obj } from 'cache_obj';\nimport { cache_budget } from 'ppfcs/cache_budget';\nimport {EntityManager,EntityQuery} from 'entity-manager-factory';\r\nimport {generateID} from 'entity-manager-factory';\r\n//import {handle, Dispatcher} from 'aurelia-flux';  \r\nimport {getLookups} from 'masterfiles';\r\nimport {  substringMatcher } from 'helpers';\r\nimport typeahead from 'typeahead';\r\nimport settings from 'settings';\r\nimport _ from 'underscore';\r\nimport numeral from 'numeral';\r\nimport toastr from \"toastr\";\r\nimport {  MultiObserver }from 'multi-observer';\r\n\r\n@inject(cache_obj,MultiObserver)\r\nexport class SummaryCustomElement {\r\n\r\n  @bindable to;\r\n  _cache_obj = null;\r\n  //_dispatcher;\r\n  _enableAdd=false;\r\n  _enableRemove=false;\r\n  _signal;\r\n  _PYMNTTERM;\r\n  _multiObserver;\r\n  _INPUT_AMT_MAINSTAY=0;\r\n  _INPUT_AMT_STAFF=0;\r\n  _INPUT_AMT_GUEST=0;\r\n  _INPUT_AMT_TOTAL=0;\r\n  varObserveSubscriptions=[];\r\n  _cache_budget = null;\r\n  constructor(cache_obj, cache_budget, multiObserver) {\r\n    this._cache_obj = cache_obj;\r\n    this._cache_budget = cache_budget;\r\n    this._multiObserver=multiObserver;\r\n\r\n    this._cache_budget.OBSERVERS.budget_dialog.push((val) => {\r\n      this.fnCheckSummary(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.reset_summary.push(() => {\r\n      this.fnResetSummarySubscription();\r\n    });\r\n\r\n  }\r\n\r\n  fnCheckAll(){\r\n\r\n    this._INPUT_AMT_MAINSTAY=0;\r\n    this._INPUT_AMT_TOTAL=0;\r\n    this._cache_budget._INPUT_AMT_REGULAR=0;\r\n    this._cache_budget._INPUT_AMT_SEMI_REGULAR=0;\r\n\r\n    this._cache_budget.REGULAR.forEach((all)=>{\r\n\r\n      if (this._cache_obj.ALLOW_PASS_CONFIDENTIAL || !all.CONFIDENTIAL_TMP) {\r\n        if (all.GROUP_ORDER !== -1)\r\n          if (all.INPUT_AMT_TMP != \"\" && all.INPUT_AMT_TMP != null && all.INPUT_AMT_TMP != undefined) {\r\n            this._INPUT_AMT_MAINSTAY += parseFloat(all.INPUT_AMT_TMP.replace(/,/g, ''));\r\n            \r\n          }\r\n\r\n          if (all.TALENT_MANAGER) {\r\n            if (all.TALENT_MANAGER.INPUT_AMT_TMP != \"\" && all.TALENT_MANAGER.INPUT_AMT_TMP != null && all.TALENT_MANAGER.INPUT_AMT_TMP != undefined) {\r\n              this._INPUT_AMT_MAINSTAY += parseFloat(all.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''));\r\n\r\n            }            \r\n          }\r\n        }\r\n      });\r\n\r\n    this._cache_budget._INPUT_AMT_REGULAR = numeral(this._INPUT_AMT_MAINSTAY).format('0,0.00');\r\n\r\n    this._cache_budget.SEMI_REGULAR.forEach((all)=>{\r\n\r\n      if (all.INPUT_AMT_TMP != \"\" && all.INPUT_AMT_TMP != null && all.INPUT_AMT_TMP != undefined) {\r\n        if (all.GROUP_ORDER !== -1) {\r\n          if (this._cache_obj.ALLOW_PASS_CONFIDENTIAL || !all.CONFIDENTIAL_TMP)\r\n            this._INPUT_AMT_MAINSTAY += parseFloat(all.INPUT_AMT_TMP.replace(/,/g, ''));\r\n          this._cache_budget._INPUT_AMT_SEMI_REGULAR+=parseFloat(all.INPUT_AMT_TMP.replace(/,/g, ''));\r\n        }\r\n\r\n        if (all.TALENT_MANAGER) {\r\n          if (all.TALENT_MANAGER.INPUT_AMT_TMP != \"\" && all.TALENT_MANAGER.INPUT_AMT_TMP != null && all.TALENT_MANAGER.INPUT_AMT_TMP != undefined) {\r\n            this._INPUT_AMT_MAINSTAY += parseFloat(all.TALENT_MANAGER.INPUT_AMT_TMP .replace(/,/g, ''));\r\n            this._cache_budget._INPUT_AMT_SEMI_REGULAR+=parseFloat(all.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''));\r\n          }            \r\n        }\r\n\r\n      }\r\n\r\n    });\r\n    \r\n    this._INPUT_AMT_TOTAL=this._INPUT_AMT_MAINSTAY;\r\n    this._INPUT_AMT_MAINSTAY=numeral(this._INPUT_AMT_MAINSTAY).format('0,0.00');\r\n\r\n    this._cache_budget._INPUT_AMT_SEMI_REGULAR=numeral(this._cache_budget._INPUT_AMT_SEMI_REGULAR).format('0,0.00');\r\n\r\n    this._INPUT_AMT_STAFF=0;\r\n    this._cache_budget._INPUT_AMT_STAFF=0; \r\n\r\n    this._cache_budget.STAFF.forEach((all)=>{\r\n\r\n      if (all.INPUT_AMT_TMP != \"\" && all.INPUT_AMT_TMP != null && all.INPUT_AMT_TMP != undefined)\r\n      {\r\n\r\n        if (all.GROUP_ORDER !== -1)\r\n        {\r\n\r\n          if (this._cache_obj.ALLOW_PASS_CONFIDENTIAL || !all.CONFIDENTIAL_TMP)\r\n            this._INPUT_AMT_STAFF += parseFloat(all.INPUT_AMT_TMP.replace(/,/g, ''));\r\n        }\r\n\r\n        if (all.TALENT_MANAGER) \r\n        {\r\n\r\n          if (all.TALENT_MANAGER.INPUT_AMT_TMP != \"\" && all.TALENT_MANAGER.INPUT_AMT_TMP != null && all.TALENT_MANAGER.INPUT_AMT_TMP != undefined) {\r\n            this._INPUT_AMT_STAFF += parseFloat(all.TALENT_MANAGER.INPUT_AMT_TMP .replace(/,/g, ''));\r\n          }          \r\n\r\n        }\r\n\r\n      }\r\n\r\n    });\r\n\r\n    \r\n\r\n    this._INPUT_AMT_TOTAL+=this._INPUT_AMT_STAFF;\r\n    this._INPUT_AMT_STAFF=numeral(this._INPUT_AMT_STAFF).format('0,0.00');\r\n    this._cache_budget._INPUT_AMT_STAFF=this._INPUT_AMT_STAFF;\r\n\r\n    this._INPUT_AMT_GUEST=0;\r\n    this._cache_budget.GUEST.forEach((all) => \r\n    {\r\n\r\n      if(all.GROUP_ORDER!==-1)    \r\n        if(all.INPUT_AMT_TMP!=\"\" && all.INPUT_AMT_TMP!=null && all.INPUT_AMT_TMP!=undefined)\r\n       // if(this._cache_budget.ALLOW_PASS_CONFIDENTIAL)\r\n     this._INPUT_AMT_GUEST += parseFloat(all.INPUT_AMT_TMP.replace(/,/g, '')) * all.PAY_RATE_FACTOR;\r\n\r\n   });\r\n\r\n    \r\n\r\n    this._INPUT_AMT_TOTAL+=this._INPUT_AMT_GUEST;\r\n    this._INPUT_AMT_GUEST=numeral(this._INPUT_AMT_GUEST).format('0,0.00');\r\n    this._cache_budget._INPUT_AMT_GUEST=numeral(this._INPUT_AMT_GUEST).format('0,0.00');\r\n\r\n    this._INPUT_AMT_TOTAL=numeral(this._INPUT_AMT_TOTAL).format('0,0.00');    \r\n\r\n    this._cache_budget.TOTAL = this._INPUT_AMT_TOTAL;\r\n\r\n    if(this._cache_budget._LOADING_BUDGET==1 && this._cache_budget.TOTAL!=0)\r\n    {\r\n      this._cache_budget_LOADING_BUDGET=0;\r\n      this._cache_budget.OBSERVERS.budget_loaded.forEach((all)=>{\r\n        all();\r\n      });\r\n    }\r\n    \r\n  }\r\n\r\n  //@handle('budget.dialog')\r\n  fnCheckSummary(value) {\r\n\r\n    setTimeout(() => \r\n    {\r\n\r\n                      //REGULAR\r\n                      for (var name in this._cache_budget.REGULAR) \r\n                      {\r\n\r\n                       var varSubscription = this._multiObserver.observe(\r\n                        [\r\n                        [this._cache_budget.REGULAR[name], 'INPUT_AMT_TMP']\r\n                            // [this._cache_budget.REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                            // [this._cache_budget.REGULAR[name], 'CONTRACT_AMT_TMP']\r\n                            ], (newValue, oldValue) => {\r\n\r\n                              this.fnCheckAll();\r\n\r\n                            });\r\n\r\n                       this.varObserveSubscriptions.push(varSubscription);\r\n\r\n                       if(this._cache_budget.REGULAR[name].TALENT_MANAGER!==undefined)\r\n                       {\r\n                            //[this._cache_budget.REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n\r\n                            var varSubscriptionTM = this._multiObserver.observe(\r\n                              [\r\n                              [this._cache_budget.REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                                    // [this._cache_budget.REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                                    // [this._cache_budget.REGULAR[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                                    ], (newValue, oldValue) => {\r\n\r\n                                      this.fnCheckAll();\r\n\r\n                                    });\r\n\r\n                            this.varObserveSubscriptions.push(varSubscriptionTM);\r\n\r\n                          }\r\n\r\n                        }\r\n\r\n\r\n                      //SEMI-REGULAR\r\n                      for (var name in this._cache_budget.SEMI_REGULAR)\r\n                      {\r\n\r\n                        var varSubscription = this._multiObserver.observe(\r\n                          [\r\n                          [this._cache_budget.SEMI_REGULAR[name], 'INPUT_AMT_TMP'],\r\n                            //[this._cache_budget.SEMI_REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                            // [this._cache_budget.SEMI_REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                            // [this._cache_budget.SEMI_REGULAR[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                            ], (newValue, oldValue) =>\r\n                            {\r\n\r\n                              this.fnCheckAll();\r\n\r\n                            });\r\n\r\n                        this.varObserveSubscriptions.push(varSubscription);\r\n\r\n                        if(this._cache_budget.SEMI_REGULAR[name].TALENT_MANAGER!==undefined)\r\n                        {\r\n                              //[this._cache_budget.REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n\r\n                              var varSubscriptionTM = this._multiObserver.observe(\r\n                                [\r\n                                [this._cache_budget.SEMI_REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                                      // [this._cache_budget.REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                                      // [this._cache_budget.REGULAR[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                                      ], (newValue, oldValue) => {\r\n\r\n                                        this.fnCheckAll();\r\n\r\n                                      });\r\n\r\n                              this.varObserveSubscriptions.push(varSubscriptionTM);\r\n\r\n                            }\r\n                          }\r\n\r\n\r\n                    //STAFF\r\n                    for (var name in this._cache_budget.STAFF) \r\n                    {\r\n\r\n                      var varSubscription = this._multiObserver.observe(\r\n                        [\r\n                        [this._cache_budget.STAFF[name], 'INPUT_AMT_TMP'],\r\n                          //[this._cache_budget.STAFF[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                          // [this._cache_budget.STAFF[name], 'PAY_RATE_FACTOR_TMP'],\r\n                          // [this._cache_budget.STAFF[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                          ], (newValue, oldValue) => {\r\n\r\n\r\n\r\n                            this.fnCheckAll();\r\n\r\n                          });\r\n\r\n                      this.varObserveSubscriptions.push(varSubscription);\r\n\r\n                      if (this._cache_budget.STAFF[name].TALENT_MANAGER!==undefined) \r\n                      {\r\n                        //[this._cache_budget.REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n\r\n                        var varSubscriptionTM = this._multiObserver.observe(\r\n                          [\r\n                          [this._cache_budget.STAFF[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                            // [this._cache_budget.REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                            // [this._cache_budget.REGULAR[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                            ], (newValue, oldValue) => {\r\n\r\n\r\n\r\n                              this.fnCheckAll();\r\n\r\n                            });\r\n\r\n                        this.varObserveSubscriptions.push(varSubscriptionTM);\r\n\r\n                      }\r\n\r\n                    }\r\n\r\n\r\n                  //GUEST\r\n                  for (var name in this._cache_budget.GUEST)\r\n                  {\r\n\r\n                    var varSubscription = this._multiObserver.observe(\r\n                      [\r\n                      [this._cache_budget.GUEST[name], 'INPUT_AMT_TMP']\r\n                        // [this._cache_budget.GUEST[name], 'PAY_RATE_FACTOR_TMP']\r\n\r\n                        ], (newValue, oldValue) => {\r\n\r\n\r\n                          this.fnCheckAll();\r\n\r\n                        });\r\n\r\n                    this.varObserveSubscriptions.push(varSubscription);\r\n\r\n                  }\r\n\r\n                  this.fnCheckAll();\r\n\r\n                }\r\n\r\n                , 6000);\r\n\r\n}\r\n\r\n  //@handle('reset.summary')\r\n  fnResetSummarySubscription()\r\n  {\r\n\r\n    this.varObserveSubscriptions.forEach((toDispose) => {\r\n      toDispose();\r\n    });\r\n\r\n    while (this.varObserveSubscriptions.length > 0) {\r\n     this.varObserveSubscriptions.pop();\r\n   }\r\n\r\n   this.fnCheckSummary();\r\n }\r\n \r\n}"],"sourceRoot":"../.."}