{"version":3,"sources":["src/app.js","src/blankpage.js","src/blur-image.js","src/cache_obj.js","src/child-router.js","src/entity-manager-factory.js","src/environment.js","src/group_individual.js","src/helpers.js","src/main.js","src/mainpage.js","src/masterfiles.js","src/multi-observer.js","src/nav-bar.js","src/service.js","src/settings.js","src/users.js","src/welcome.js","src/converters/datepattern.js","src/converters/filtercustom.js","src/converters/number-format.js","src/converters/signals.js","src/converters/sort.js","src/converters/sorttext.js","src/converters/take.js","src/ppfcs/buh.js","src/ppfcs/cache_budget.js","src/modals/budget.js","src/modals/buh-program-dialog.js","src/modals/buh-search.js","src/modals/change_password.js","src/modals/confirm_dialog.js","src/modals/edit-person.js","src/modals/globalindivmstr.js","src/modals/indivmstr.js","src/modals/job.js","src/modals/login.js","src/modals/modal-wizard.js","src/modals/modalcontainer.js","src/modals/paymentterm.js","src/modals/program.js","src/modals/talentmanagergroups.js","src/ppid/obj_personnel.js","src/ppid/ppid.js","src/ppid/ppid_group.js","src/tools/gridpaging.js","src/ppfcs/actual_cost/actual_cost.js","src/ppfcs/budget/guest.js","src/ppfcs/budget/main-header.js","src/ppfcs/budget/mainview.js","src/ppfcs/budget/personnel.js","src/ppfcs/budget/summary.js","src/ppid/contract/cache_contract.js","src/ppid/contract/contract_form.js","src/ppid/contract/contract_search.js","src/ppid/modals/add_member.js","src/ppid/modals/DialogBox.js","src/ppid/modals/group_search.js","src/ppid/modals/photo_list.js","src/ppid/modals/ppid_search.js","src/ppid/talent_search/cache_talent.js","src/ppid/talent_search/obj_personnel.js","src/ppid/talent_search/ppid.js","src/ppid/talent_search/talent_search.js","src/ppid/forms/awards.js","src/ppid/forms/awards_training.js","src/ppid/forms/company_info.js","src/ppid/forms/company_info_character_ref.js","src/ppid/forms/company_info_main.js","src/ppid/forms/company_info_medical_rec.js","src/ppid/forms/company_info_work_exp.js","src/ppid/forms/gov_info.js","src/ppid/forms/gov_info_criminal_rec.js","src/ppid/forms/gov_info_exam_passed.js","src/ppid/forms/gov_info_group.js","src/ppid/forms/gov_info_group_main.js","src/ppid/forms/gov_info_main.js","src/ppid/forms/group.js","src/ppid/forms/group_main.js","src/ppid/forms/main.js","src/ppid/forms/main_contact.js","src/ppid/forms/main_educational.js","src/ppid/forms/main_language.js","src/ppid/forms/main_skills.js","src/ppid/forms/miscellaneous.js","src/ppid/forms/relative.js","src/ppid/forms/relative_children.js","src/ppid/forms/relative_emergency.js","src/ppid/forms/relative_parent.js","src/ppid/forms/relative_siblings.js","src/ppid/forms/relative_spouse.js","src/ppid/talent_search/modals/DialogBox.js","src/ppid/talent_search/modals/photo_list.js","src/ppid/talent_search/modals/ppid_search.js","src/ppid/talent_search/forms/awards_training.js","src/ppid/talent_search/forms/company_info.js","src/ppid/talent_search/forms/company_info_character_ref.js","src/ppid/talent_search/forms/company_info_main.js","src/ppid/talent_search/forms/company_info_medical_rec.js","src/ppid/talent_search/forms/company_info_work_exp.js","src/ppid/talent_search/forms/gov_info.js","src/ppid/talent_search/forms/gov_info_criminal_rec.js","src/ppid/talent_search/forms/gov_info_exam_passed.js","src/ppid/talent_search/forms/gov_info_main.js","src/ppid/talent_search/forms/main.js","src/ppid/talent_search/forms/main_contact.js","src/ppid/talent_search/forms/main_educational.js","src/ppid/talent_search/forms/miscellaneous.js","src/ppid/talent_search/forms/relative.js","src/ppid/talent_search/forms/relative_children.js","src/ppid/talent_search/forms/relative_emergency.js","src/ppid/talent_search/forms/relative_parent.js","src/ppid/talent_search/forms/relative_siblings.js","src/ppid/talent_search/forms/relative_spouse.js"],"names":["App","configureRouter","config","router","title","map","route","name","moduleId","nav","options","blankpage","BlurImageCustomAttribute","Element","element","valueChanged","newImage","complete","drawBlur","onload","mul_table","shg_table","BLUR_RADIUS","stackBlurCanvasRGBA","canvas","top_x","top_y","width","height","radius","isNaN","context","getContext","imageData","getImageData","e","Error","pixels","data","x","y","i","p","yp","yi","yw","r_sum","g_sum","b_sum","a_sum","r_out_sum","g_out_sum","b_out_sum","a_out_sum","r_in_sum","g_in_sum","b_in_sum","a_in_sum","pr","pg","pb","pa","rbs","div","w4","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","BlurStack","stack","next","stackEnd","stackIn","stackOut","mul_sum","shg_sum","r","g","b","a","putImageData","image","w","h","canvasContext","drawImage","cache_obj","ALLOW_PASS_CONFIDENTIAL","PROGRAM_USER","_ACCESS","CALLER","ACTION","ACTION_CALLER","VALUE1","VALUE2","VALUE3","VALUE4","OBSERVERS","init_modal","close_modal","open_modal","enable_modal_button","open_modal_message","clear_indiv_modal","clear_program_modal","clear_log","clear_login_modal","clear_talentmanager_modal","pass_value","login_passed","loggedout","confirm_dialog","clear_job_modal","budget_loaded","logoutPage","loginPage","clear_budget_modal","budget_dialog","pass_program","contract_dialog","version","ChildRouter","heading","initializeBreeze","EntityManager","EntityQuery","generateID","entityManager","dataService","initializeAdapterInstance","serviceName","saveOptions","SaveOptions","allowConcurrentSaves","fetchMetadata","console","log","Promise","resolve","core","getUuid","copyEntityManager","copy","createEmptyCopy","entityChanged","subscribe","logChanges","message","entity","entityType","entityAspect","getKey","toString","entityAction","getName","EntityAction","PropertyChange","pcArgs","args","propertyName","oldValue","newValue","EntityStateChange","entityState","debug","testing","group_individual","multiObserver","dialogService","masterFilesLoaded","grpMembers","_signal","_GLOBAL_GRP_ID","_GROUP_NAME","isDisableSave","showingLogout","_user","disabledfindTalent","disabledfindTM","controllers","length","close","findTalent","open","viewModel","whenClosed","response","wasCancelled","tmpgrpMembers","varExists","output","forEach","val","indiv","GLOBAL_INDIV_ID","STATUS_CD","push","GLOBAL_GRP_ID","PERSONNEL_NAME","all","undefined","findTalentManager","GROUP_NAME","getGlobalIndivsFromGrpIndiv","LoginReady","user","USER_ID","COMPANY_ID","Is_HR","Is_Branch","clear","success","fnInitMasterfiles","initType","isNavigating","_toastr","info","timeOut","loginDisabled","then","fnPassUserObject","fnLogin","varCookie","varSplitCookie","split","logoutDisabled","LoginPassed","logout","tmpIndivs","_query","from","where","executeQuery","results","GLOBAL_INDIV_WITH_ALIAS","item","GRP_INDIV_ID","PassedGroup","value","saveGroupIndiv","getQueryEntities","successEnties","getMax","orderByDesc","take","successMax","varInsert","createEntity","CREATED_BY","CREATED_DT","Date","now","addEntity","existingIndiv","LAST_UPDATED_DT","LAST_UPDATED_BY","saveChanges","setTimeout","fail","error","addIndividual","deleteItem","isFound","find","_item","OrderByDate","isDigit","input_mask","fnSerializeCode","substringMatcher","getFilter","checkCookie","setCookie","removeCookie","getCookie","date","event","charCode","keyCode","id","mask","myMask","myCaja","document","getElementById","myText","myNumbers","myOutPut","theLastPos","charAt","j","shift","setSelectionRange","btoa","strs","findMatches","q","cb","matches","substrRegex","RegExp","$","each","str","test","varFilterArray","propertyText","filter","indexOf","toUpperCase","cname","cvalue","mins","d","setTime","getTime","expires","toUTCString","cookie","expireAt","setMonth","getMonth","crumbs","crumbName","toGMTString","ca","c","substring","Datepicker","format","DPGlobal","parseFormat","picker","template","appendTo","on","click","proxy","isInput","is","component","focus","show","keyup","update","minViewMode","viewMode","startViewMode","weekStart","weekEnd","onRender","fillDow","fillMonths","showMode","prototype","constructor","outerHeight","place","window","stopPropagation","preventDefault","that","ev","target","closest","hide","trigger","type","off","set","formated","formatDate","prop","setValue","newDate","parseDate","viewDate","getFullYear","fill","offset","css","top","left","dowCnt","html","dates","daysMin","append","monthsShort","year","month","currentDate","valueOf","text","months","prevMonth","day","getDaysInMonth","setDate","getDay","nextMonth","getDate","clsName","prevY","prevM","empty","join","currentYear","end","removeClass","eq","addClass","parseInt","yearCont","nodeName","toLowerCase","className","modes","navFnc","call","navStep","parent","index","setFullYear","Math","min","mousedown","dir","max","fn","datepicker","option","$this","extend","defaults","Constructor","days","daysShort","isLeapYear","separator","match","parts","setHours","setMinutes","setSeconds","setMilliseconds","cnt","m","yy","yyyy","dd","mm","headTemplate","contTemplate","jQuery","configure","aurelia","use","standardConfiguration","developmentLogging","plugin","useDefaults","settings","lock","centerHorizontalOnly","startingZIndex","start","setRoot","mainpage","toastr","Router","budgetAccess","actualAccess","talentgroupAccess","buhAccess","headerVisible","_application","_application_desc","order_no","ref","desc","_remove","_ppfcs_modules","_ppi_modules","_roles","_application_on","_ppi_off","_cache_obj","USER","ROLE_CD","includes","isEmpty","post","serviceNameBase","HASH","done","APPLICATION","APPLICATION_DESC","ORDER_NO","doesExist","some","sort","fnCheckAccess","applicationClick","ROLES","APPLICATION_ID","navigateToRoute","APPLICATION_URL","replace","rolesClick","group","applicationOn","filterMenu","varFound","navigateTo","loadMasterfiles","fnLoadIndiv","loadLookups","getJobByGlobalCompany","getJobByName","getLookups","getPaymentTerm","getGLOBALINDIVandALIAS","getJOB_GRP_CATEGORY","getProgramGenre","getTelecastMode","getEpisodeMode","getEpisodeType","getTalentSupplierComp","getTalentSupplierIndiv","getGlobalGrp","getGrpIndiv","getBdgtHdr","getIOCC","getGlobalIndiv","getAliasTrx","getGlobalCompany","getCompany","getCategory","getDivision","getReference","getJobGroup","getJob","getLocation","getUsers","getUserTrx","globalIndiv","talentSuppComp","talentSuppIndiv","globalAlias","globalCompany","globalGrp","jobMstr","jobGrp","category","lookups","reference","entityNames","IO_CC_MSTR","GLOBAL_INDIV_MSTR","GLOBAL_ALIAS_TRX","GLOBAL_COMPANY_MSTR","COMPANY_MSTR","DIVISION_MSTR","JOB_GRP_MSTR","JOB_MSTR","LOCATION_MSTR","CATEGORY_MSTR","REFERENCE_CD_MSTR","USER_PROFILE_MSTR","USER_ROLE_TRX","BDGT_TMPL_HDR","GRP_INDIV_MSTR","GLOBAL_GRP_MSTR","TALENT_SUPPLIER_COMP_MSTR","TALENT_SUPPLIER_INDIV_MSTR","PROGRAM_GENRE_MSTR","TELECAST_MODE_MSTR","EPISODE_MODE_MSTR","EPISODE_TYPE_MSTR","MODULE_ACCESS_TRX","reject","JOB_GRP_CATEGORY","getLocal","PAYMENT_TERM","unchanged","EntityState","Unchanged","initialValues","varCheck","GLOBAL_ID","varJob","JOB_ID","JOB_DESC","varJOB_p","varGrpCategory","JOB_GRP_ID","CATEGORY_ID","CATEGORY_DESC","paymentterm","REF_GRP_CD","varTmpObject","varGlobalAlias","varGlobalIndiv","varTalentComp","varTalentSuppIndiv","varGlobalGrp","varAliases","varAlias","ALIAS","varFoundAlias","alias","ALIAS_NAME","LAST_NAME","GIVEN_NAME","MIDDLE_NAME","trim","PERSONNEL_INFO_SRC","ALIASES","SUPPLIER_INDIV_GLOBAL_ID","COMPANY_NAME","SUPPLIER_COMP_GLOBAL_ID","p_jobMstr","p_jobGrp","p_category","varFindGrp","allGrp","JOB_GRP_CD","JOB_GRP_DESC","CATEGORY_CD","varFindCategory","allCategory","using","execute","queryFailed","select","processLookups","query","getLocalSelect","resource","ordering","includeNullos","orderBy","executeQueryLocally","objName","blankValue","createNullos","manager","createNullo","entityName","values","jqXHR","textStatus","msg","MultiObserver","inject","observerLocator","observe","properties","callback","subscriptions","object","getObserver","pop","NavBar","DialogService","oldClient","OData","defaultHttpClient","myClient","request","headers","Authorization","varCheckUser","EMPLOYEE_ID","EMAIL_ADDRESS","LEVEL_NO","currentInstruction","home","keyboard","overlayDismiss","changePassword","service","serviceBase","serviceBaseUpdate","getSvcUrl","method","getSvcUrlUpdate","GetJson","jsonIn","ajax","url","dataType","json","PostJson","contentType","PostUpdateJson","pageSize","STATIONS","actualCostWebUrl","actualCostServiceBase","Users","http","users","useStandardConfiguration","withBaseUrl","activate","fetch","Welcome","firstName","lastName","previousValue","fullName","submit","PROGRAMS","alert","canDeactivate","confirm","UpperValueConverter","toView","DatepatternValueConverter","isValid","FiltercustomValueConverter","array","signal","varResult","allFilter","NumberFormatValueConverter","SignalsValueConverter","SortValueConverter","direction","factor","slice","SorttextValueConverter","TakeValueConverter","count","buh","_objBUH","_disableCells","_disableAdd","_disableDelete","_disableSave","_disableSearch","_disableGrid","_status","_programs","addBUH","fnCRUD","BUH_PERSONNEL_ID","OPTIONAL_GLOBAL_ID","FIRST_NAME","searchExistingBuh","varDelete","found","PROGRAM_CD","getBUHForEdit","setDeleted","getEntities","errors","getValidationErrors","saveBUH","deleteSelected","splice","searchBUH","foundItems","searchPrograms","PROGRAM_TITLE","cache_budget","HEADER","REGULAR","SEMI_REGULAR","STAFF","GUEST","TOTAL","STATUS","IS_COPYING","_INPUT_AMT_REGULAR","_INPUT_AMT_SEMI_REGULAR","_INPUT_AMT_STAFF","_INPUT_AMT_GUEST","_INPUT_AMT_TOTAL","_LOADING_BUDGET","pass_group","pass_indiv","enable_approved","copy_template_guest","copy_template","budget_refresh","reset_all","refreshPersonnelTab","reset_summary","disable_search_personnel","pass_job","verify_copied_budget","tmp_bdgt_copied","budget","controller","items","pageindex","varFilterArrayLength","currPredicate","lstPredicates","onSpeculateProp","ClearSearch","fnManualFilter","tmpVar","_rBUDGET_TITLE","querySelectorAll","varOb","getAttribute","getValue","Predicate","create","FilterQueryOp","Contains","varValuesHasChanged","tmpVarNew","sortBy","reverse","and","expand","APPR_STAT_CD","findProgramUser","allP","PROGRAM_ID","PROGRAM_MSTR","BDGT_TMPL_ID","PROGRAM_IO","failed","selectedBudget","ok","fnKeyup","evt","_bBDGT_TMPL_ID","_bPROGRAM_TITLE","_bPROGRAM_IO","_bAPPR_STAT_CD","buhProgramDialog","ModalWizard","varFilterArraySelected","_ModalWizard","attached","selectedTalent","_rGROUP_TITLE","SelectingDone","_bPROGRAM_CD","buhSearch","_rBUH_SEARCH","selectedBUH","_bOPTIONAL_GLOBAL_ID","_bFIRST_NAME","change_password","keyPressed","$event","which","savePassword","_NEW_PASSWORD","showing","_buttonTitle","_isDisableElement","_width","_message","CloseModal","val1","val2","val3","OpenModal","InitializeModal","_id","ids","_setTitle","showDialog","_setContent","to","content","cleardispatch","continue","closeModal","enableButton","isEnabled","EditPerson","person","globalindivmstr","varActiveFromCompanyMstr","model","allPersonnel","result_p","all_p","_bGLOBAL_INDIV_ID","_bPERSONNEL_NAME","indivmstr","selectedIndiv","job","intTest","hasFocus","_rJOB_TITLE","varJobs","JOB_GRP","selectedJob","_bJOB_GRP","_bJOB_DESC","refJobDesc","login","_user_content","_content","_companies","_users","_USER_PROFILE_MSTR","user_expired","disableLogButton","varGetUserRole","all2","ClearLogin","tryLogin","_PASSWORD","_USER","_COMPANY","fnCheckUser","loginSuccess","varUserAtt","checkRole","MODULE_MSTR","MODULE_NAME","ACCESS_FL","resetPassword","isUndefined","isNull","location","reload","_USERChanged","EXPIRE_DT","varDateCompare","modalcontainer","buttonTitle","display","btnRef","selectedTerm","program","selectedProgram","talentmanagergroups","_bGLOBAL_GRP_ID","_bGROUP_NAME","obj_personnel","global_indiv_id","editing_status","citizenship","GROUP_INFO","members","CONTACT","status","modelAddress","statusContact","modelContact","modelInternet","address","contact","email","website","EDUCATIONAL_ACHIEVEMENT","list","CHARACTERISTIC","SKILLS","LANGUAGE_DIALECT","MEDICAL_RECORD","RELATIVE","parents","mother","father","siblings","spouse","emergency_contact","WORK_EXPERIENCE","AWARD","SEMINARS","GOVERNMENT_INFO","modelTaxAffidavit","modelPermit","tax_affidavit","permits","GOVERNMENT_EXAM","CRIMINAL_RECORD","civil","administrative","COMPANY_SPECIFIC","personnel_bank","ENDORSEMENT","IMAGE_BRANDING","QUESTION_ANSWER","CHARACTER_REF","ppid_dialog","group_dialog","tab_changed","clear_ppid","maintab_contact_clicked","maintab_education_clicked","maintab_skills_clicked","maintab_language_clicked","company_tab_changed","govinfo_tab_changed","relative_tab_changed","award_training_tab_changed","CIVIL_STATUS","CITIZENSHIP","RELIGION","COUNTRY","REGION","GROUP","LOCATIONS","CONTACT_TYPE","LEVEL","YEAR","SCHOOLS","LANGUAGE","POSITION","AWARD_HEAD","AWARD_BODY","TRAINING","TAX_EXEMPT","INPUT_TAX","PERMIT","VAT_STAT","EXAM","CASE_STAT","VIOLATION","PROFESSIONAL_TYPE","CESSATION","TARGET_MARKET","COMPANY","DIVISION","LOCATIONS_RNG","CATEGORY","JOB_GROUP","JOB","PAYROLL_GROUP","BANK","PROVINCE","RELATIONSHIP","INACTIVE_REASON","SKILL_TALENT","RATING","LANGUAGE_RATING","ppid","LoadDropdown","maxYear","leastYear","tmpYear","REF_CD","REF_DESC","COMPANY_CD","OrderByText","tmp","_","result","COUNTRY_CD","COUNTRY_NAME","REGION_CD","REGION_DESC","school_cd","SCHOOL_CD","school_name","SCHOOL_NAME","school_addr","SCHOOL_ADDR","LOCATION_CD","LOCATION_NAME","PAYROLL_GRP_ID","PAYROLL_GRP_CD","PAYROLL_GRP_DESC","BANK_ID","short_nm","BANK_SHORT_NAME","bank_cd","BANK_CD","long_nm","BANK_LONG_NAME","PROVINCE_DESC","PROVINCE_CD","s","res","relationship","RELATIVE_CD","RELATIVE_DESC","RELATIONSHIP_CD","award_body","AWARD_BODY_CD","SPONSOR_NAME","skill_talent","SKILL_TALENT_CD","SKILL_TALENT_DESC","SKILL_TALENT_TYPE_CD","rating_mstr","RATING_CD","RATING_DESC","changeTab","tabNumber","FindUsers","AddUsers","ppid_group","gridpaging","_Pages","_PagesShow","_currentIndex","subscription","onChange","intByTmp","intDivTmp","ceil","divby","endClick","endValue","selectedClick","actual_cost","GuestCustomElement","_cache_budget","_enableAdd","_enableRemove","fnCheckBudget","fnCallCopyGuest","resetView","_PYMNTTERM","fnModalPaymentTerm","passTerm","term","PYMNT_TERM_CD","varRefCd","PAY_RATE_FACTOR_TMP","PAY_RATE_FACTOR","INPUT_AMT_TMP","INPUT_AMT","visible","saveGuest","fnAddGuest","fnRemoveGuest","tag","BDGT_TMPL_GUEST_DTL_ID","BDGT_AMT","parseFloat","REMARKS","fnVerifyCopyOfBudget","fnRegularBlurEvt","fnRegularFocus","AmountBlur","property","varConverted","MainHeaderCustomElement","_PROGRAM_GENRE_MSTR","_TELECAST_MODE_MSTR","_EPISODE_TYPE_MSTR","_STATIONS","_disableCreateBudget","_disableCancelBudget","_disableRefreshBudget","_disableSaveBudget","_disableBudgetId","_disablePrintBudget","_disableCopyBudget","programDisabled","budgetDisabled","CloseBudgetDialog","PassedProgram","fnBudgetRefreshHandle","fnBudget","fnClearHeader","BDGT_FROM","BDGT_TO","varToday","p1","p2","pred","checkExpired","checkDate","parse","validate","inputChanged","_COMPANY_ID","fnClearBudget","LoggedOut","CHARGE_CD","PROGRAM_GENRE_CD","TELECAST_MODE_CD","EPISODE_TYPE_CD","EPISODES","TAPING_DAYS","STATION_ID","unshift","_STATUS","fnDialogProgram","fnSaveBudget","varUseReport","popup","moveTo","varGetHeader","fnBudgetValidation_1","varSubMin","varAddMin","p3","p4","strException","varFromMax","varToMax","countError","fnBudgetValidation_2","c1","pred2","_queryCheckActual","varPromises","newPromise","resolve_2","reject_2","varTmpFrom","ACTUAL_FROM","varTmpTo","ACTUAL_TO","ACTUAL_COST_ID","_queryCheckVtr","foundVtr","varDataFromCompare","varDataToCompare","varMaxDate","allDate","varVtr","VTR_LIVE_DT","new_date","add","passed","fnValidation_Approved","c2","passed_status","strValidation","fnExecuteSaveBudgetHeader","subtract","varFrom","varTo","BDGT_VIEW_FCTR","PARENT_PROGRAM_ID","BDGT_VIEW_CD","CHARGE_TYPE_CD","BDGT_TOTAL","BDGT_STAT_CD","BDGT_FOR_CD","PROGRAM_NAME","STATION_SENT_DATE","STATION_SENT","entities","getEntityQuery","fnDialogBudget","mainview","clickTab","PersonnelCustomElement","styleStringHidden","styleStringVisible","_JOBS","_Personnel","_PersonnelTM","_Index","varPymnt","isIndivMstrTalentsDisabled","isIndivMstrManagerDisabled","isJobDisabled","isIndivMstrDisabled","_ce_head","ButtonStatus","fnCallCopy","PassedIndiv","refreshOnSelect","passJob","_personnelSearch","collapse_expand_head","ce_value","styleString","collapse_expand","fnCheckExistingTalents","TALENTS","REMOVE","myFunction","usr","TALENT_MANAGER","BDGT_TMPL_DTL_ID_TMP","BDGT_TMPL_DTL_ID","BDGT_TMPL_DTL_ID_LINK","BDGT_TMPL_DTL_ID_LINK_TMP","toPersonModel","USE","savePersonnel","scrollDiv","varPsClType","varJobLength","varCategoryLength","CONTRACT_AMT","STAFF_WORK","PAY_TO_PERSON_FL","BUDGET_AMT","TAPING_DAY_CNT","PERSONNEL_CLASS_CD","CONFIDENTIAL","POOL_RECORD","GROUP_ORDER","GLOBAL_ID_LINK","setPersonnelValues","obj","varTM","CONTRACT_AMT_TMP","BLANK_PERSONNEL_NAME","CONFIDENTIAL_TMP","STAFF_WORK_TMP","POOL_RECORD_TMP","varToDelete","removeTalent","varToSplice","fnModalJob","tblHeader","divRegular","scrollTop","tblData","position","varCol","clientWidth","showTalents","_selectedItem","showTalentMngr","fnIndivMstr","removeTalentMngr","varJobTManager","getDefaultPymntTerm","fnPassedPersonnels","varIndiv","allIndiv","varTalent","modalIndivMstrTalents","allReg","personnel","moveTrigger","varCopy","focusTrigger","varErrorDuplicate","varErrorJobTerms","varErrorCheckTalentManager","varDuplicateValidation","varI","varJ","varIndex","getAllDtl","foundDtl","IsNewTalent","PER_TAPING_DAY_RATE","PERSONNEL_CLASS_TYPE","getPersonnelClassType","WITH_TALENT_MANAGER","varInsertTM","varTalentMngrToDelete","allTm","varTalentToDelete","varTalentToEdit","varCheckTalent","allTalent","save","varTalentMngrToEdit","consoole","fnSequenceDispatch","varPaymentTerm","fnBlankPersonnelRegular","varBudgetLast","chkRemove","removeRegular","varRemoved","fnIndivMstrTalents","fnIndivMstrManager","SummaryCustomElement","_INPUT_AMT_MAINSTAY","varObserveSubscriptions","_multiObserver","fnCheckSummary","fnResetSummarySubscription","fnCheckAll","_cache_budget_LOADING_BUDGET","varSubscription","varSubscriptionTM","toDispose","cache_contract","ISNEWCONTRACT","ISSAVE","CONTRACT_HDR_ID","contract_form","_disableCreateContract","_disableEditContract","_disableCancelContract","_disableRefreshContract","_disableSaveContract","_disablePrintContract","MSTR_LIST","NAME_ARRAY","ALIAS_ARRAY","JOB_GRP_ARRAY","CONTRACT_STATUS","menuNameShow","menuAliasShow","_cache_contract","COMPANY1","LEVEL_NO1","fnCheckContract","COMPANY_NAME1","COMPANY_CD1","newPersonnel","DIVISION_ID","DIVISION_NAME","CONTRACT_START_DT1","CONTRACT_END_DT1","DURATION_MONTHS1","monthDiff","pad","EMPLOYEE_NAMEChanged","EMPLOYEE_NAME","division_change","DIVISION1","DIVISION_CD1","DIVISION_CD","job_change","JOB1","found1","JOB_GRP_NAME1","name_change","GLOBAL_ID1","MSTR_LIST1","EMPLOYEE_ALIAS","alias_change","onfocusName","lostfocusName","onfocusAlias","lostfocusAlias","onchangeName","onchangeAlias","d1","d2","date1","date2","round","keyStroke","fnContract","eventName","initializeEntry","saveEntry","ALIAS_NAME1","CONTRACT_HDR_ID1","CONTRACT_NO1","COMPENTENCY_LEVEL1","JOB_ID1","CONTRACT_FEE1","CONTRACT_TYPE1","MONTHLY_FEE1","CONTRACT_STATUS1","MAIN_CONTRACT_NO1","TERMINATE_REASON1","TERMINATE_DT1","CREATED_BY1","LAST_UPDATED_BY1","CREATED_DT1","LAST_UPDATED_DT1","BATCH1","ALIAS1","getContractForEdit","CONTRACT_START_DT","CONTRACT_END_DT","DURATION_MONTHS","fail2","searchContract","success_div","DIVISION_NAME1","success_job","success_job_grp","JOB_NAME1","nameofemployee","sucess_alias","all_alias","success_alias","CONTRACT_NO","COMPENTENCY_LEVEL","CONTRACT_FEE","CONTRACT_TYPE","MONTHLY_FEE","MAIN_CONTRACT_NO","TERMINATE_REASON","TERMINATE_DT","BATCH","contract_search","varGlobaIndivWithNps","getContractList","contract","_rCONTRACT_TITLE","selectedContract","add_member","varToBeAdded","varMembers","_rppid_queries","alreadyExist","NICK_NAME","selectedPersonnel","removePersonnel","btnAdd","DialogBox","group_search","selectedGroup","photo_list","ppid_search","cache_talent","_CITIZENSHIP_POP","_RELIGION_POP","_CIVIL_STATUS_POP","_GENDER_POP","_COUNTRY_POP","_LOCATION_POP","_INTEREST_POP","_SKILL_TALENT_POP","_NAME_AND_OR","_AGE_AND_OR","_CITIZENSHIP_AND_OR","_RELIGION_AND_OR","_CIVIL_STATUS_AND_OR","_GENDER_AND_OR","_COUNTRY_AND_OR","_LOCATION_AND_OR","_TALENT_SUPPLIER_AND_OR","_TALENT_HANDLER_AND_OR","_INTEREST_AND_OR","_SKILL_TALENT_AND_OR","_HEIGHT_AND_OR","_WEIGHT_AND_OR","_BUILT_AND_OR","_EYE_COLOR_AND_OR","_HAIR_COLOR_AND_OR","_SKINTONE_AND_OR","_VITAL_STATISTICS_AND_OR","_SPECIFIC_CHAR_AND_OR","_TALENT_TYPE_AND_OR","_NAME_RADIO_BUTTON","_AGE_RADIO_BUTTON","_CITIZENSHIP_RADIO_BUTTON","_RELIGION_RADIO_BUTTON","_CIVIL_STATUS_RADIO_BUTTON","_GENDER_RADIO_BUTTON","_COUNTRY_RADIO_BUTTON","_LOCATION_RADIO_BUTTON","_TALENT_SUPPLIER_RADIO_BUTTON","_TALENT_HANDLER_RADIO_BUTTON","_INTEREST_RADIO_BUTTON","_SKILL_TALENT_RADIO_BUTTON","_HEIGHT_RADIO_BUTTON","_WEIGHT_RADIO_BUTTON","_BUILT_RADIO_BUTTON","_EYE_COLOR_RADIO_BUTTON","_HAIR_COLOR_RADIO_BUTTON","_SKINTONE_RADIO_BUTTON","_VITAL_STATISTICS_RADIO_BUTTON","_SPECIFIC_CHAR_RADIO_BUTTON","_TALENT_TYPE_RADIO_BUTTON","_HAS_FIRED","_CITIZENSHIP_ARR","_RELIGION_ARR","_CIVIL_STATUS_ARR","_GENDER_ARR","_COUNTRY_ARR","_LOCATION_ARR","_INTEREST_ARR","_SKILL_TALENT_ARR","QUERY_VAL","ALL_MSTR","AWARDS","talent_search","_CACHE_TALENT","initialize","LOCATION_DESC","INTEREST_CD","INTEREST_DESC","getParttimeMstr","getCountry","getCitizenship","getAlias","getIndividual","getGroup","getInterest","getSkillTalent","getCharacteristics","PARTTIME_MSTR","COUNTRY_MSTR","CITIZESHIP_MSTR","ALIAS_MSTR","INDIVIDUAL_MSTR","GROUP_MSTR","INTEREST_MSTR","SKILL_TALENT_MSTR","CHARACTERISTICS_MSTR","consolidate","imageName","country","country_cd","location_cd","resultAddress","out","PARTTIME_ID","PT_INDIV_ID","COUNTRY_BASE_CD","LOCATION_BASE_CD","countrName","aliasName","aliasItem","BIRTH_DT","RELIGION_CD","GENDER","SOURCE","LOCATION","PIC","VIDEO","PT_GRP_ID","ESTABLISH_DT","search_on","arrayVal","_NAME","_AGE","y1","y2","z","mon","bdStart","bdEnd","_CITIZENSHIP","isArray","arrayVal2","CITIZENSHIP_CD","_RELIGION","religion","_CIVIL_STATUS","civil_status","_GENDER","gender","_COUNTRY","_LOCATION","_INTEREST","_SKILL_TALENT","_HEIGHT","CHARACTERISTIC_CD","ACTUAL_VALUE","_WEIGHT","_BUILT","_EYE_COLOR","_HAIR_COLOR","_SKINTONE","_VITAL_STATISTICS","_SPECIFIC_CHAR","_TALENT_TYPE","talent_select","source","onClick","variable","awards","lblCreatedBy","lblUpdatedBy","_disableBtnAdd","_disableBtnSave","_disableForm","_disableTable","formStatus","tab_num","loadAward","clearField","global_id","s1","tmpLog","receive_dt","RECEIVE_DT","utc","award_id","AWARD_ID","award_cd","AWARD_CD","award_body_cd","project_name","PROJECT_NAME","remarks","lastIndex","e1","btnEdit","btnRemove","saveSuccess","saveAward","updateAward","dateToday","maxId","award","s2","e2","awards_training","_404_img","clickTab_AwardsTraining","delegate","company_info","clickTab_Company","company_info_character_ref","loadCharacterRef","job_name","char_ref_id","CHAR_REF_ID","full_name","FULL_NAME","company_name","phone_no","PHONE_NO","job_id","job_other","JOB_OTHER","updateCharacterRef","saveCharacterRef","char_ref","IsDigit","company_info_main","_disableLocations","_disableIDNo","_disableStatus","_disableTabsInput","_hideSuspendField","_hideInactiveField","_hideCessationDate","_hideInactiveReason","ddCompany","alreadyLoaded","accreditation_status","accreditation_joblist","loadCompany","loadGlobalCompany","global_company_id","GLOBAL_COMPANY_ID","id_no","ID_NO","company_id","start_dt","START_DT","end_dt","END_DT","kapamilya_dt","KAPAMILYA_DT","membership_dt","MEMBERSHIP_DT","exclusive_fl","EXCLUSIVE_FL","status_cd","cessation_reason_cd","CESSATION_REASON_CD","division_id","category_id","payroll_grp_id","professional_type_cd","PROFESSIONAL_TYPE_CD","cessation_end_dt","CESSATION_END_DATE","inactive_reason_cd","INACTIVE_REASON_CD","dd_companyChanged","loadAccreditation","accreditation","job_group","division","_eff_start_dt","EFF_START_DT","_eff_end_dt","EFF_END_DT","accreditation_id","ACCREDITATION_ID","eff_start_dt","eff_end_dt","division_text","job_grp_id","job_grp_text","job_text","competency","COMPETENCY","home_fl","HOME_FL","entry_fl","ENTRY_FL","accreditation_memo","ACCREDITATION_MEMO","accreditation_list","loadSuspend","pred1","pred3","finalPred","suspend","suspend_id","SUSPEND_ID","suspended_start_dt","suspended_end_dt","loadPersonnelBank","personnel_bank_id","PERSONNEL_BANK_ID","bank_id","acct_name","ACCT_NAME","account_no","ACCOUNT_NO","dd_bankChanged","loadLog","tmpList","user_id","company","loadJobDropdown","jc","global_company","gc","level","DIVISION_LEVEL","startDt","endDt","cessation_dt","a_job_grp_id","dd_jobGroupChange","dd_divisionChanged","dd_statusChanged","stat","dd_cessationStatusChanged","cess_cd","sus_start","sus_end","today","selectedBank","cid","gcid","saveCompany","updateCompany","convertToGMT8","tempDt","lstart_dt","lend_dt","lkapmilya_dt","lmembership_dt","lcessation_end_dt","LastID","COMPANY_INDEX","lastYear","maxID","global_company_mstr","s3","updateCompanyIndex","e3","lkapamilya_dt","lsuspend_start_dt","lsuspend_end_dt","saveSuspend","updateSuspend","pbi","account_name","savePersonnelBank","updatePersonnelBank","suspend_trx","SUSPEND_LEVEL","s4","s5","e5","e4","q1","personnel_bank_trx","bank","bank_nm","last_name","given_name","middle_name","company_index","btnAdd_accreditation","btnEdit_accreditation","a_id","a_job_id","a_start_dt","a_end_dt","a_competency","btnRemove_accreditation","clearAccreditationField","Digit","validateAccreditation","_competency","_start_dt","_end_dt","saveAccreditation","updateAccreditation","accreditation_trx","selectedJobGrp","company_info_medical_rec","loadMedicalRecord","medical_exam_id","MEDICAL_EXAM_ID","endorsed_by","ENDORSED_BY","fit_to_work_fl","FIT_TO_WORK_FL","medical_exam_dt","MEDICAL_EXAM_DT","result_remarks","RESULT_REMARKS","updateMedicalRecord","saveMedicalRecord","medical_record","company_info_work_exp","_disableBtnEdit","_disableBtnRemove","_formStatus","loadWorkExperience","POSITION_CD","work_experience_id","WORK_EXPERIENCE_ID","employer","EMPLOYER","present_fl","PRESENT_FL","salary","SALARY","position_cd","freelance_fl","FREELANCE_FL","reason_for_leaving","REASON_FOR_LEAVING","LastIndex","boolValidStart","boolValidEnd","saveWorkExp","updateWorkExp","MaxId","work_exp_trx","work_exp_id","gov_info","_activeTab","clickTab_GovInfo","gov_info_criminal_rec","lblCreatedByCivil","lblUpdatedByCivil","formStatusCivil","_disableBtnAddCivil","_disableBtnSaveCivil","_disableFormCivil","_disableTableCivil","lblCreatedByAdministrative","lblUpdatedByAdministrative","formStatusAdministrative","_disableBtnAddAdministrative","_disableBtnSaveAdministrative","_disableFormAdministrative","_disableTableAdministrative","loadCivilCase","loadAdministrativeCase","court_case_id","COURT_CASE_ID","case_no","CASE_NO","case_stat_cd","CASE_STAT_CD","case_desc","CASE_DESC","criminal_fl","CRIMINAL_FL","company_ids","global_company_ids","company_nm","admin_case_id","ADMIN_CASE_ID","violation_cd","VIOLATION_CD","erorr","btnAddCivil","btnEditCivil","btnRemoveCivil","clearFieldCivil","validateCivil","saveCivilRecord","updateCivilRecord","civil_rec","btnAddAdministrative","btnEditAdministrative","btmRemoveAdministrative","clearFieldAdministrative","validateAdministrative","saveAdministrativeRecord","updateAdministrativeRecord","admin_case","gov_info_exam_passed","loadExamRecord","exam_cd","EXAM_CD","exam_id","EXAM_ID","exam_nm","rating_grade","RATING_GRADE","exam_dt","EXAM_DT","DigitOnly","saveExamInfo","updateExamInfo","exam_trx","gov_info_group","gov_info_group_main","_disableOtherGovernmentInfo","load_TaxInformation","load_TaxAffidavit","load_Permit","clearTaxAffidavitField","strDate","dt","validate_input","input","pagibig","sss","philhealth","tax_exempt_cd","querySuccess","input_tax_cd","INPUT_TAX_CD","tin","TIN","vat_reg_dt","VAT_REG_DT","vat_stat_cd","VAT_STAT_CD","errorQuery","tax_affidavit_id","TAX_AFFIDAVIT_ID","affidavit_no","AFFIDAVIT_NO","affidavit_dt","AFFIDAVIT_DT","successQuery","PLACE_OF_ISSUE","permit","PERMIT_CD","permit_no","PERMIT_NO","expiry_dt","EXPIRY_DT","permit_cd","agency_cd","AGENCY_CD","permit_id","PERMIT_ID","grant_dt","GRANT_DT","place_of_issue","poi","permit_name","btnAdd_TaxAffidavit","insertTaxAffidavit","btnRemove_TaxAffidavit","Max","RELEASE_DT","RETURN_DT","errorSave","clearPermitField","btnAdd_Permit","insertPermit","btnUpdate_Permit","btnRemove_Permit","pagibig_no","philhealth_no","sss_no","querySuccess2","save2","error2","gov_info_main","TAX_EXEMPT_CD","SSS_NO","PAGIBIG_NO","PHILHEALTH_NO","national_id","NATIONAL_ID","voters_id","VOTERS_ID","_date","querySuccess1","save1","error1","queryError1","clickTab_group","group_main","_disableCreate","_disableClear","_disableAddMember","_lblBtnSave","loadGroupDetails","loadMembers","global_grp_id","group_name","establish_dt","country_base_cd","location_base_cd","_pred1","_pred2","_finalPred","suspension_start","suspension_end","tempIds","gid","r2","fullname","fnGroup","action","search_group","TinRegex","TinRegex2","set_1","set_2","set_3","set_4","saveGroupInfo","updateGroupInfo","global_mstr","PARK_FL","ACTIVE_FL","INDIV_FL","global_grp_mstr","entity2","entity3","suspend_start","suspend_end","s6","e6","btnAddNewMember","fnAddNewMembers","grp_indiv","btnAddNewPersonnel","generate","btnRemoveMember","main","_disableSearchPersonnel","_disableCreatePersonnel","_disableSavePersonnel","_disableClearData","_disableResetData","_isActiveTab","selectedGender","selected_citizenship","selected_group","primary_img","loadData","getAge","dateString","birthDate","age","religion_cd","birthdt","birth_dt","mother_maiden_name","MOTHER_MAIDEN_NAME","birth_place","BIRTH_PLACE","acr_no","ACR_NO","created_by","created_dt","last_updated_by","last_updated_dt","tmpArr","btnAdd_Citizenship","checkIfExist","removeCitizenship","removeAllCitizenship","btnAdd_Group","removeGroup","removeAllGroup","fnPersonnel","clearData","validateHeader","bdt","mother_maiden_nm","alias_nick","first_nm","middle_nm","last_nm","saveHeader","updateHeader","bdate","varInsert_2","EMERGENCY_RELATION_CD","INDIV_ID","success_2","CITIZENSHIP_ID","tempCiti","success_3","failed_3","failedMax","tempGroup","success_suspend","suspend_saved","suspend_error","failed_2","getEntity","item_2","getCitizenshipList","getMaxSuccess","newCount","citi","tempEnt","queryGroup","queryMax","findIndex","o","success_710","error_712","getSuspend","success_getSuspend","save_success","save_error","error_getSuspend","btnUpload","clickTab_main","main_contact","_disableAddressTable","_disableContactTable","loadMain_Address","loadMain_Contact","loadMain_EmailWeb","clearAddressData","clearContactData","loadLog_V2","clearEmailWebData","tmpFullAddress","strFullAddress","UNIT_NO","HOUSE_NO","BLOCK_LOT","BLDG_NAME","STREET_NAME","SUB_VILLAGE","BARANGAY","DISTRICT","CITY_TOWN","STATE_PROVINCE","l","ZIPCODE","addr_id","ADDR_ID","region","state_province","city_town","district","barangay","sub_village","phase","PHASE","permanent_fl","PERMANENT_FL","block_lot","street_name","house_no","bldg_name","unit_no","zipcode","residential_type","RESIDENTIAL_TYPE","house_ownership","HOUSE_OWNERSHIP","mailing_fl","MAILING_FL","postal_box","POSTAL_BOX","sketch_path","SKETCH_PATH","full_address","PHONE_TYPE","contact_no_id","CONTACT_NO_ID","phone_type_text","phone_type","area_cd","AREA_CD","local_no","LOCAL_NO","tmpEmail","tmpWeb","EMAIL_FL","internet_id","INTERNET_ID","web_addr","WEB_ADDR","REC_STAT_FL","web","queryError","createdBy","dtCreated","updatedBy","dtUpdated","tmpDt","query2","ss1","ss2","ss3","r3","isNumberKey","dd_provinceChanged","prov","selectedProv","dd_regionChanged","reg","selectedRegion","btnAdd_Address","btnEdit_Address","btnRemoveAddress","validateAddress","insertAddress","updateAddress","_address","btnEdit_Contact","btnRemove_Contact","removeSuccess","removeError","validateContact","insertContact","updateContact","Success","Contact","validateEmail","re","validateWeb","URL","regEx","btnAdd_EmailWeb","isEmail","email_addr","insertEmailWeb","btnRemove_EmailWeb","btnRemove_AllEmailWeb","internet_trx","main_educational","loadMain_Educational","school","EDUCATION_LEVEL","education","start_yr","START_YR","course","COURSE","education_id","EDUCATION_ID","education_level","end_yr","END_YR","honor_awards","HONOR_AWARDS","completed_fl","COMPLETED_FL","level_name","insert","education_trx","YR_GRADUATED","saveError","updateSuccess","updateError","educ","main_language","loadLangDialect","lang_dialect_id","LANG_DIALECT_ID","lang_dialect_cd","LANG_DIALECT_CD","read_rating_cd","READ_RATING_CD","speak_rating_cd","SPEAK_RATING_CD","write_rating_cd","WRITE_RATING_CD","lang_dialect","saveLangDialect","updateLangDialect","lang_dialect_trx","main_skills","loadSkillTalent","skill_talent_cd","rating_cd","skill_talent_id","SKILL_TALENT_ID","skill_talent_nm","rating_nm","saveSkillTalent","updateSkillTalent","miscellaneous","CloseSearch","relative","_tab0_loaded","clickTab_relative","relative_children","_disableDeceasedDt","loadChildren","orPred","relation","_orPred","or","deceased_dt","DECEASED_DT","DEPENDENT_FL","relative_id","RELATIVE_ID","computeAge","occupation","OCCUPATION","dependent_fl","relative_cd","children","checkChange","bit","isChecked_dependent","isChecked_deceased","relative_trx","relative_emergency","loadEmergencyContacts","emergency","relative_addr_id","RELATIVE_ADDR_ID","strAddress","tmpAddress","updateInfo","saveInfo","IN_CASE_OF_EMERGENCY_FL","saveAddress","address_trx","relative_parent","selectedStatus","loadParent","pred4","birthDt","deceasedDt","in_case_of_emergency_fl","loadParentAddress","isMother","updateRelative","saveRelative","birthdate","MaxAddrId","addr_trx","relative_siblings","loadSiblings","btnAdd_Siblings","btnEdit_Siblings","btnRemove_Siblings","relative_spouse","loadSpouse","loadSpouseAddress","relative_addr_trx"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import 'bootstrap';\r\nimport {inject} from 'aurelia-framework';\r\n//import 'bootstrap/css/bootstrap.css!';\r\nimport toastr from \"toastr\";\r\n@inject(toastr)\r\nexport class App {\r\n  configureRouter(config, router){\r\n    config.title = 'PPMS';\r\n    config.map([\r\n      { route: ['', 'blankpage'], name: 'blankpage', moduleId: 'blankpage', nav: true, title: 'PPMS' },\r\n      { route: 'mainpage', name: 'mainpage', moduleId: 'mainpage', nav: true, title: 'Main Page' },\r\n      { route: 'mainview', name: 'mainview', moduleId: 'ppfcs/budget/mainview', nav: true, title: 'Budget Template' },\r\n      { route: 'group_individual', name: 'group_individual', moduleId: 'group_individual', nav: true, title:'Talent Groups' },\r\n      { route: 'actual_cost', name: 'actual_cost', moduleId: 'ppfcs/actual_cost/actual_cost', nav: true, title:'Actual Cost' },\r\n      { route: 'buh', name: 'buh', moduleId: 'buh', nav: true, title:'BUH' },\r\n      { route: 'ppid', name: 'ppid', moduleId: 'ppid/ppid', nav: true, title: 'Program Personnel Information' },\r\n      { route: 'contract_form', name: 'contract_form', moduleId: 'ppid/contract/contract_form', nav: true, title:'Utilization' },\r\n      { route: 'talent_search', name: 'talent_search', moduleId: 'ppid/talent_search/talent_search', nav: true, title:'Talent Search' },\r\n      { route: 'ppid_group', name: 'ppid_group', moduleId: 'ppid/ppid_group', nav: true, title: 'PPID GROUP'}\r\n    ]);\r\n\r\n    this.router = router;\r\n\r\n    toastr.options = {\r\n      \"closeButton\": true,\r\n      \"debug\": false,\r\n      \"positionClass\": \"toast-bottom-right\",\r\n      \"onclick\": null,\r\n      \"showDuration\": \"300\",\r\n      \"hideDuration\": \"1000\",\r\n      \"timeOut\": \"5000\",\r\n      //\"timeOut\": \"300000\",\r\n      //\"extendedTimeOut\": \"1000\",\r\n      \"showEasing\": \"swing\",\r\n      \"hideEasing\": \"linear\",\r\n      \"showMethod\": \"fadeIn\",\r\n      \"hideMethod\": \"fadeOut\"\r\n    };\r\n  }\r\n}\r\n","\r\nexport class blankpage {\r\n    \r\n}","import {inject} from 'aurelia-framework';\r\n\r\n@inject(Element)\r\nexport class BlurImageCustomAttribute {\r\n  constructor(element){\r\n    this.element = element;\r\n  }\r\n\r\n  valueChanged(newImage){\r\n    if(newImage.complete){\r\n      drawBlur(this.element, newImage);\r\n    } else{\r\n      newImage.onload = () => drawBlur(this.element, newImage);\r\n    }\r\n  }\r\n}\r\n\r\n/*\r\nThis Snippet is using a modified Stack Blur js lib for blurring the header images.\r\n*/\r\n\r\n/*\r\n\r\nStackBlur - a fast almost Gaussian Blur For Canvas\r\n\r\nVersion:     0.5\r\nAuthor:\t\tMario Klingemann\r\nContact: \tmario@quasimondo.com\r\nWebsite:\thttp://www.quasimondo.com/StackBlurForCanvas\r\nTwitter:\t@quasimondo\r\n\r\nIn case you find this class useful - especially in commercial projects -\r\nI am not totally unhappy for a small donation to my PayPal account\r\nmario@quasimondo.de\r\n\r\nOr support me on flattr:\r\nhttps://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript\r\n\r\nCopyright (c) 2010 Mario Klingemann\r\n\r\nPermission is hereby granted, free of charge, to any person\r\nobtaining a copy of this software and associated documentation\r\nfiles (the \"Software\"), to deal in the Software without\r\nrestriction, including without limitation the rights to use,\r\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the\r\nSoftware is furnished to do so, subject to the following\r\nconditions:\r\n\r\nThe above copyright notice and this permission notice shall be\r\nincluded in all copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\r\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\r\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\r\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\r\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\r\nOTHER DEALINGS IN THE SOFTWARE.\r\n*/\r\n\r\nvar mul_table = [\r\n        512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,\r\n        454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,\r\n        482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,\r\n        437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,\r\n        497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,\r\n        320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,\r\n        446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,\r\n        329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,\r\n        505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,\r\n        399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,\r\n        324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,\r\n        268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,\r\n        451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,\r\n        385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,\r\n        332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,\r\n        289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];\r\n\r\n\r\nvar shg_table = [\r\n\t     9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17,\r\n\t\t17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19,\r\n\t\t19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20,\r\n\t\t20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21,\r\n\t\t21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21,\r\n\t\t21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22,\r\n\t\t22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22,\r\n\t\t22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23,\r\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\r\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\r\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\r\n\t\t23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\r\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\r\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\r\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\r\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24 ];\r\n\r\nvar BLUR_RADIUS = 40;\r\n\r\nfunction stackBlurCanvasRGBA( canvas, top_x, top_y, width, height, radius )\r\n{\r\n\tif ( isNaN(radius) || radius < 1 ) return;\r\n\tradius |= 0;\r\n\r\n\tvar context = canvas.getContext(\"2d\");\r\n\tvar imageData;\r\n\r\n\ttry {\r\n\t  imageData = context.getImageData( top_x, top_y, width, height );\r\n\t} catch(e) {\r\n\t  throw new Error(\"unable to access image data: \" + e);\r\n\t}\r\n\r\n\tvar pixels = imageData.data;\r\n\r\n\tvar x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum,\r\n\tr_out_sum, g_out_sum, b_out_sum, a_out_sum,\r\n\tr_in_sum, g_in_sum, b_in_sum, a_in_sum,\r\n\tpr, pg, pb, pa, rbs;\r\n\r\n\tvar div = radius + radius + 1;\r\n\tvar w4 = width << 2;\r\n\tvar widthMinus1  = width - 1;\r\n\tvar heightMinus1 = height - 1;\r\n\tvar radiusPlus1  = radius + 1;\r\n\tvar sumFactor = radiusPlus1 * ( radiusPlus1 + 1 ) / 2;\r\n\r\n\tvar stackStart = new BlurStack();\r\n\tvar stack = stackStart;\r\n\tfor ( i = 1; i < div; i++ )\r\n\t{\r\n\t\tstack = stack.next = new BlurStack();\r\n\t\tif ( i == radiusPlus1 ) var stackEnd = stack;\r\n\t}\r\n\tstack.next = stackStart;\r\n\tvar stackIn = null;\r\n\tvar stackOut = null;\r\n\r\n\tyw = yi = 0;\r\n\r\n\tvar mul_sum = mul_table[radius];\r\n\tvar shg_sum = shg_table[radius];\r\n\r\n\tfor ( y = 0; y < height; y++ )\r\n\t{\r\n\t\tr_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;\r\n\r\n\t\tr_out_sum = radiusPlus1 * ( pr = pixels[yi] );\r\n\t\tg_out_sum = radiusPlus1 * ( pg = pixels[yi+1] );\r\n\t\tb_out_sum = radiusPlus1 * ( pb = pixels[yi+2] );\r\n\t\ta_out_sum = radiusPlus1 * ( pa = pixels[yi+3] );\r\n\r\n\t\tr_sum += sumFactor * pr;\r\n\t\tg_sum += sumFactor * pg;\r\n\t\tb_sum += sumFactor * pb;\r\n\t\ta_sum += sumFactor * pa;\r\n\r\n\t\tstack = stackStart;\r\n\r\n\t\tfor( i = 0; i < radiusPlus1; i++ )\r\n\t\t{\r\n\t\t\tstack.r = pr;\r\n\t\t\tstack.g = pg;\r\n\t\t\tstack.b = pb;\r\n\t\t\tstack.a = pa;\r\n\t\t\tstack = stack.next;\r\n\t\t}\r\n\r\n\t\tfor( i = 1; i < radiusPlus1; i++ )\r\n\t\t{\r\n\t\t\tp = yi + (( widthMinus1 < i ? widthMinus1 : i ) << 2 );\r\n\t\t\tr_sum += ( stack.r = ( pr = pixels[p])) * ( rbs = radiusPlus1 - i );\r\n\t\t\tg_sum += ( stack.g = ( pg = pixels[p+1])) * rbs;\r\n\t\t\tb_sum += ( stack.b = ( pb = pixels[p+2])) * rbs;\r\n\t\t\ta_sum += ( stack.a = ( pa = pixels[p+3])) * rbs;\r\n\r\n\t\t\tr_in_sum += pr;\r\n\t\t\tg_in_sum += pg;\r\n\t\t\tb_in_sum += pb;\r\n\t\t\ta_in_sum += pa;\r\n\r\n\t\t\tstack = stack.next;\r\n\t\t}\r\n\r\n\r\n\t\tstackIn = stackStart;\r\n\t\tstackOut = stackEnd;\r\n\t\tfor ( x = 0; x < width; x++ )\r\n\t\t{\r\n\t\t\tpixels[yi+3] = pa = (a_sum * mul_sum) >> shg_sum;\r\n\t\t\tif ( pa != 0 )\r\n\t\t\t{\r\n\t\t\t\tpa = 255 / pa;\r\n\t\t\t\tpixels[yi]   = ((r_sum * mul_sum) >> shg_sum) * pa;\r\n\t\t\t\tpixels[yi+1] = ((g_sum * mul_sum) >> shg_sum) * pa;\r\n\t\t\t\tpixels[yi+2] = ((b_sum * mul_sum) >> shg_sum) * pa;\r\n\t\t\t} else {\r\n\t\t\t\tpixels[yi] = pixels[yi+1] = pixels[yi+2] = 0;\r\n\t\t\t}\r\n\r\n\t\t\tr_sum -= r_out_sum;\r\n\t\t\tg_sum -= g_out_sum;\r\n\t\t\tb_sum -= b_out_sum;\r\n\t\t\ta_sum -= a_out_sum;\r\n\r\n\t\t\tr_out_sum -= stackIn.r;\r\n\t\t\tg_out_sum -= stackIn.g;\r\n\t\t\tb_out_sum -= stackIn.b;\r\n\t\t\ta_out_sum -= stackIn.a;\r\n\r\n\t\t\tp =  ( yw + ( ( p = x + radius + 1 ) < widthMinus1 ? p : widthMinus1 ) ) << 2;\r\n\r\n\t\t\tr_in_sum += ( stackIn.r = pixels[p]);\r\n\t\t\tg_in_sum += ( stackIn.g = pixels[p+1]);\r\n\t\t\tb_in_sum += ( stackIn.b = pixels[p+2]);\r\n\t\t\ta_in_sum += ( stackIn.a = pixels[p+3]);\r\n\r\n\t\t\tr_sum += r_in_sum;\r\n\t\t\tg_sum += g_in_sum;\r\n\t\t\tb_sum += b_in_sum;\r\n\t\t\ta_sum += a_in_sum;\r\n\r\n\t\t\tstackIn = stackIn.next;\r\n\r\n\t\t\tr_out_sum += ( pr = stackOut.r );\r\n\t\t\tg_out_sum += ( pg = stackOut.g );\r\n\t\t\tb_out_sum += ( pb = stackOut.b );\r\n\t\t\ta_out_sum += ( pa = stackOut.a );\r\n\r\n\t\t\tr_in_sum -= pr;\r\n\t\t\tg_in_sum -= pg;\r\n\t\t\tb_in_sum -= pb;\r\n\t\t\ta_in_sum -= pa;\r\n\r\n\t\t\tstackOut = stackOut.next;\r\n\r\n\t\t\tyi += 4;\r\n\t\t}\r\n\t\tyw += width;\r\n\t}\r\n\r\n\r\n\tfor ( x = 0; x < width; x++ )\r\n\t{\r\n\t\tg_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;\r\n\r\n\t\tyi = x << 2;\r\n\t\tr_out_sum = radiusPlus1 * ( pr = pixels[yi]);\r\n\t\tg_out_sum = radiusPlus1 * ( pg = pixels[yi+1]);\r\n\t\tb_out_sum = radiusPlus1 * ( pb = pixels[yi+2]);\r\n\t\ta_out_sum = radiusPlus1 * ( pa = pixels[yi+3]);\r\n\r\n\t\tr_sum += sumFactor * pr;\r\n\t\tg_sum += sumFactor * pg;\r\n\t\tb_sum += sumFactor * pb;\r\n\t\ta_sum += sumFactor * pa;\r\n\r\n\t\tstack = stackStart;\r\n\r\n\t\tfor( i = 0; i < radiusPlus1; i++ )\r\n\t\t{\r\n\t\t\tstack.r = pr;\r\n\t\t\tstack.g = pg;\r\n\t\t\tstack.b = pb;\r\n\t\t\tstack.a = pa;\r\n\t\t\tstack = stack.next;\r\n\t\t}\r\n\r\n\t\typ = width;\r\n\r\n\t\tfor( i = 1; i <= radius; i++ )\r\n\t\t{\r\n\t\t\tyi = ( yp + x ) << 2;\r\n\r\n\t\t\tr_sum += ( stack.r = ( pr = pixels[yi])) * ( rbs = radiusPlus1 - i );\r\n\t\t\tg_sum += ( stack.g = ( pg = pixels[yi+1])) * rbs;\r\n\t\t\tb_sum += ( stack.b = ( pb = pixels[yi+2])) * rbs;\r\n\t\t\ta_sum += ( stack.a = ( pa = pixels[yi+3])) * rbs;\r\n\r\n\t\t\tr_in_sum += pr;\r\n\t\t\tg_in_sum += pg;\r\n\t\t\tb_in_sum += pb;\r\n\t\t\ta_in_sum += pa;\r\n\r\n\t\t\tstack = stack.next;\r\n\r\n\t\t\tif( i < heightMinus1 )\r\n\t\t\t{\r\n\t\t\t\typ += width;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tyi = x;\r\n\t\tstackIn = stackStart;\r\n\t\tstackOut = stackEnd;\r\n\t\tfor ( y = 0; y < height; y++ )\r\n\t\t{\r\n\t\t\tp = yi << 2;\r\n\t\t\tpixels[p+3] = pa = (a_sum * mul_sum) >> shg_sum;\r\n\t\t\tif ( pa > 0 )\r\n\t\t\t{\r\n\t\t\t\tpa = 255 / pa;\r\n\t\t\t\tpixels[p]   = ((r_sum * mul_sum) >> shg_sum ) * pa;\r\n\t\t\t\tpixels[p+1] = ((g_sum * mul_sum) >> shg_sum ) * pa;\r\n\t\t\t\tpixels[p+2] = ((b_sum * mul_sum) >> shg_sum ) * pa;\r\n\t\t\t} else {\r\n\t\t\t\tpixels[p] = pixels[p+1] = pixels[p+2] = 0;\r\n\t\t\t}\r\n\r\n\t\t\tr_sum -= r_out_sum;\r\n\t\t\tg_sum -= g_out_sum;\r\n\t\t\tb_sum -= b_out_sum;\r\n\t\t\ta_sum -= a_out_sum;\r\n\r\n\t\t\tr_out_sum -= stackIn.r;\r\n\t\t\tg_out_sum -= stackIn.g;\r\n\t\t\tb_out_sum -= stackIn.b;\r\n\t\t\ta_out_sum -= stackIn.a;\r\n\r\n\t\t\tp = ( x + (( ( p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1 ) * width )) << 2;\r\n\r\n\t\t\tr_sum += ( r_in_sum += ( stackIn.r = pixels[p]));\r\n\t\t\tg_sum += ( g_in_sum += ( stackIn.g = pixels[p+1]));\r\n\t\t\tb_sum += ( b_in_sum += ( stackIn.b = pixels[p+2]));\r\n\t\t\ta_sum += ( a_in_sum += ( stackIn.a = pixels[p+3]));\r\n\r\n\t\t\tstackIn = stackIn.next;\r\n\r\n\t\t\tr_out_sum += ( pr = stackOut.r );\r\n\t\t\tg_out_sum += ( pg = stackOut.g );\r\n\t\t\tb_out_sum += ( pb = stackOut.b );\r\n\t\t\ta_out_sum += ( pa = stackOut.a );\r\n\r\n\t\t\tr_in_sum -= pr;\r\n\t\t\tg_in_sum -= pg;\r\n\t\t\tb_in_sum -= pb;\r\n\t\t\ta_in_sum -= pa;\r\n\r\n\t\t\tstackOut = stackOut.next;\r\n\r\n\t\t\tyi += width;\r\n\t\t}\r\n\t}\r\n\r\n\tcontext.putImageData( imageData, top_x, top_y );\r\n\r\n}\r\n\r\nfunction BlurStack()\r\n{\r\n\tthis.r = 0;\r\n\tthis.g = 0;\r\n\tthis.b = 0;\r\n\tthis.a = 0;\r\n\tthis.next = null;\r\n}\r\n\r\nfunction drawBlur(canvas, image) {\r\n  var w = canvas.width;\r\n  var h = canvas.height;\r\n  var canvasContext = canvas.getContext('2d');\r\n  canvasContext.drawImage(image, 0, 0, w, h);\r\n  stackBlurCanvasRGBA(canvas, 0, 0, w, h, BLUR_RADIUS);\r\n};\r\n","export class cache_obj{\r\n\r\n    ALLOW_PASS_CONFIDENTIAL=false;\r\n\r\n    PROGRAM_USER=[];\r\n    _ACCESS = {};\r\n    CALLER={ACTION:null,ACTION_CALLER:null,VALUE1:null,VALUE2:null,VALUE3:null,VALUE4:null};\r\n    OBSERVERS = {\r\n        init_modal:[],\r\n        close_modal: [],\r\n        open_modal:[],\r\n        enable_modal_button: [],\r\n        open_modal_message:[],\r\n        clear_indiv_modal: [],\r\n        clear_program_modal: [],\r\n        clear_log:[],\r\n        clear_login_modal:[],\r\n        clear_talentmanager_modal: [],\r\n        pass_value:[],\r\n        login_passed:[],\r\n        loggedout:[],\r\n        confirm_dialog:[],\r\n        clear_job_modal:[],\r\n        budget_loaded: [],\r\n        logoutPage: [],\r\n        loginPage: [],\r\n        clear_budget_modal: [],\r\n        budget_dialog: [],\r\n        pass_program: [],\r\n        contract_dialog: []\r\n\r\n    };\r\n    version=\"1.0\";\r\n    \r\n}\r\n","export class ChildRouter{\r\n  heading = 'Child Router';\r\n\r\n  configureRouter(config, router){\r\n    config.map([\r\n      { route: ['','welcome'],  name: 'welcome',       moduleId: 'welcome',       nav: true, title:'Welcome' },\r\n      { route: 'users',         name: 'users',         moduleId: 'users',         nav: true, title:'Github Users' },\r\n      { route: 'child-router',  name: 'child-router',  moduleId: 'child-router',  nav: true, title:'Child Router' }\r\n    ]);\r\n\r\n    this.router = router;\r\n  }\r\n}\r\n","import settings from './settings';\r\nimport breeze from 'breeze-client';\r\n\r\n\r\nvar entityManager;\r\n//var EntityQuery = breeze.EntityQuery;\r\n\r\n\r\nexport function initializeBreeze() {\r\n  try {\r\n\r\n     \r\n    var dataService = breeze.config.initializeAdapterInstance('dataService', 'webApiOData', true);\r\n    //  dataService.defaultHttpClient = {\r\n    //  headers: { \r\n    //     \"Authorization\": \"foo2\" \r\n    //  },\r\n    // };\r\n    //console.log(dataService.defaultHttpClient);\r\n  \r\n\r\n\r\n\r\n    entityManager = new breeze.EntityManager(settings.serviceName);\r\n    \r\n    //saveOptions: new breeze.SaveOptions({allowConcurrentSaves: true})\r\n    entityManager.saveOptions = new breeze.SaveOptions({ allowConcurrentSaves: true });\r\n    \r\n    return entityManager.fetchMetadata();\r\n\r\n\r\n  } catch (e) {\r\n    console.log(e);\r\n    return Promise.resolve(false);\r\n  }\r\n\r\n}\r\n/**\r\n * Creates Breeze EntityManager instances.\r\n */\r\nexport function EntityManager() {\r\n  return entityManager;\r\n  //copy\r\n  /*entityManager = new breeze.EntityManager(settings.serviceName);\r\n  return entityManager.fetchMetadata()\r\n    .then(() => copyEntityManager());*/\r\n}\r\n\r\nexport function EntityQuery() {\r\n  return breeze.EntityQuery;\r\n}\r\n\r\n\r\nexport function generateID(){\r\n  return breeze.core.getUuid();\r\n}\r\n\r\n\r\nfunction copyEntityManager() {\r\n  var copy = entityManager.createEmptyCopy();\r\n  copy.entityChanged.subscribe(logChanges);\r\n  return copy;\r\n}\r\n\r\n// log entity changes to the console for debugging purposes.\r\nfunction logChanges(data) {\r\n  var message = 'Entity Changed.  Entity: ' + (data.entity ? data.entity.entityType.name + '/' + data.entity.entityAspect.getKey().toString() : '?') + ';  EntityAction: ' + data.entityAction.getName() + '; ';\r\n  if (data.entityAction === breeze.EntityAction.PropertyChange) {\r\n    var pcArgs = data.args;\r\n    message += 'PropertyName: ' + (pcArgs.propertyName || 'null') + '; Old Value: ' + (pcArgs.oldValue ? pcArgs.oldValue.toString() : 'null') + '; New Value: ' + (pcArgs.newValue ? pcArgs.newValue.toString() : 'null') + ';';\r\n  }\r\n  if (data.entityAction === breeze.EntityAction.EntityStateChange) {\r\n    message += 'New State: ' + data.entity.entityAspect.entityState.getName() + ';';\r\n  }\r\n}\r\n","export default {\r\n  debug: true,\r\n  testing: true\r\n};\r\n","import {checkCookie,setCookie,removeCookie} from './helpers';\r\nimport {initializeBreeze,generateID} from './entity-manager-factory';\r\nimport {loadMasterfiles, loadTables, loadLookups, getLookups} from './masterfiles';\r\nimport toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {substringMatcher} from 'helpers';\r\nimport typeahead from 'typeahead';\r\nimport _ from 'underscore';\r\nimport {EntityManager, EntityQuery} from './entity-manager-factory';\r\n//import {handle, Dispatcher} from 'aurelia-flux';  \r\nimport { MultiObserver }from 'multi-observer';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {login} from 'modals/login';\r\nimport {globalindivmstr} from 'modals/globalindivmstr';\r\nimport {talentmanagergroups} from 'modals/talentmanagergroups';\r\nimport settings from './settings';\r\n\r\n@inject(MultiObserver,DialogService)\r\nexport class group_individual {\r\n\tmasterFilesLoaded=false;\r\n\tmodalTalentManager;\r\n\tmodalIndivMstr;\r\n\tgrpMembers = [];\r\n\t//_dispatcher;\r\n\t_signal = null;\r\n\t_GLOBAL_GRP_ID = \"\";\r\n\t_GROUP_NAME = \"\";\r\n\tisDisableSave = true;\r\n\tshowingLogout=\"hidden\";\r\n\t_user=\"\";\r\n\r\n\tdisabledfindTalent=true;\r\n\tdisabledfindTM=false;\r\n\tconstructor(multiObserver,dialogService) {\r\n\r\n\t\tthis.dialogService=dialogService;\r\n\t\tif(this.dialogService.controllers.length>0)\r\n\t\t{\r\n\t\t\tfor (var i = this.dialogService.controllers.length - 1; i >= 0; i--) {\r\n\t\t\t\tthis.dialogService.controllers[i].close();\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t//initializeBreeze().then(() => {\r\n\t\t//      //have to set timeout because of IE, other templates are not loading\r\n\t\t//      // quickly and loading at same time with functions\r\n\t\t//      setTimeout(() => {\r\n\r\n\t\t//      \tif (checkCookie(\"PPMS_USER\") == \"\" || checkCookie(\"PPMS_USER\")==undefined || checkCookie(\"PPMS_USER\").indexOf('undefined')>=0)\r\n\t\t//      \t{\r\n\t\t//      \t\tthis.fnLogin();\r\n\t\t//      \t\tthis.loginDisabled=false;\r\n\t\t//      \t\tthis.logoutDisabled=true;\r\n\t\t//      \t\treturn;\r\n\t\t//      \t}\r\n\r\n\t\t//      \tthis.fnInitMasterfiles(0,\"\");\r\n\r\n\r\n\t\t//      }, 2000);\r\n\t\t//  });\r\n\r\n\t\t// toastr.options = {\r\n\t\t// \t\"closeButton\": true,\r\n\t\t// \t\"debug\": false,\r\n\t\t// \t\"positionClass\": \"toast-bottom-right\",\r\n\t\t// \t\"onclick\": null,\r\n\t\t// \t\"showDuration\": \"300\",\r\n\t\t// \t\"hideDuration\": \"1000\",\r\n\t\t// \t//\"timeOut\": \"300000\",\r\n\t\t// \t//\"extendedTimeOut\": \"1000\",\r\n\t\t// \t\"showEasing\": \"swing\",\r\n\t\t// \t\"hideEasing\": \"linear\",\r\n\t\t// \t\"showMethod\": \"fadeIn\",\r\n\t\t// \t\"hideMethod\": \"fadeOut\"\r\n\t\t// };\r\n\r\n\t\r\n\t}\r\n\r\n\r\n\t\t//this._dispatcher = Dispatcher;\r\n\t\t// this.modalTalentManager = {\r\n\t\t// \ttitle: 'Talent Managers',\r\n\t\t// \tcontent: 'modals/talentmanagergroups',\r\n\t\t// \tvalue: \"\",\r\n\t\t// \tid: generateID(),\r\n\t\t// \tbuttonTitle: \"Find Talent Manager\",\r\n\t\t// \tcleardispatch: \"clear_talentmanager_modal\"\r\n\t\t\t\r\n\t\t// };\r\n\r\n\r\n\t\t// this.modalIndivMstr = {\r\n\t\t// \ttitle: 'Talent Managers',\r\n\t\t// \tcontent: 'modals/globalindivmstr',\r\n\t\t// \tvalue: \"\",\r\n\t\t// \tid: generateID(),\r\n\t\t// \tbuttonTitle: \"Search Talent\",\r\n\t\t// \tcleardispatch: \"clear_indiv_modal\"\r\n\t\t// };\r\n\r\n\t\t// this.modalLogin = {\r\n\t\t// \ttitle: 'LOG-IN',\r\n\t\t// \tcontent: 'modals/login',\r\n\t\t// \tvalue: \"\",\r\n\t\t// \tid: generateID(),\r\n\t\t// \tbuttonTitle: \"Log In\",\r\n\t\t// \tcleardispatch: \"clear_login_modal\",\r\n\t\t// \twidth:500\r\n\t\t// };\r\n\tfindTalent()\r\n\t{\r\n\t\tthis.dialogService.open({\r\n        viewModel: globalindivmstr\r\n        }).whenClosed(response => {\r\n        \r\n        if (!response.wasCancelled) {\r\n           \r\n\t\t\t\tvar tmpgrpMembers=this.grpMembers;\r\n\t\t\t\tvar varExists = false;\r\n\t\t\t\tresponse.output\r\n\t\t\t\t.forEach((val) => {\r\n\r\n\t\t\t\t\tvarExists = false;\r\n\r\n\t\t\t\t\ttmpgrpMembers.forEach((indiv) => {\r\n\t\t\t\t\t\tif (val.GLOBAL_INDIV_ID == indiv.GLOBAL_INDIV_ID) {\r\n\t\t\t\t\t\t\tindiv.STATUS_CD = \"ACTV\";\r\n\t\t\t\t\t\t\tvarExists = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\r\n\t\t\t\t\tif (!varExists) {\r\n\t\t\t\t\t\ttmpgrpMembers.push({\r\n\t\t\t\t\t\t\tGLOBAL_INDIV_ID: val.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\t\tGLOBAL_GRP_ID: this._GLOBAL_GRP_ID,\r\n\t\t\t\t\t\t\tPERSONNEL_NAME: val.PERSONNEL_NAME,\r\n\t\t\t\t\t\t\tSTATUS_CD: \"ACTV\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\ttmpgrpMembers.forEach((all) => {\r\n\t\t\t\t\tif (all.STATUS_CD == \"\" || all.STATUS_CD === undefined)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tall.STATUS_CD = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.grpMembers=tmpgrpMembers;\r\n\r\n\t\t\t\tthis._signal = generateID();\r\n\r\n\r\n\t\t\t\r\n\r\n        } else {\r\n          \r\n        }\r\n      });\r\n\t}\r\n\r\n\tfindTalentManager()\r\n\t{\r\n\t\tthis.dialogService.open({\r\n        viewModel: talentmanagergroups\r\n        }).whenClosed(response => {\r\n        \r\n        if (!response.wasCancelled) {\r\n           \r\n\t\t\t\tthis._GLOBAL_GRP_ID = response.output.GLOBAL_GRP_ID;\r\n\t\t\t\tthis._GROUP_NAME = response.output.GROUP_NAME;\r\n\r\n\t\t\t\tthis.getGlobalIndivsFromGrpIndiv();\r\n\r\n\r\n\t\t\t\tthis.disabledfindTalent=false;\t\r\n\t\t\t\tthis.isDisableSave=false;\r\n\r\n        } else {\r\n          \r\n        }\r\n      });\r\n\t}\r\n\r\n\r\n\t//@handle('login.passed')\r\n\tLoginReady(user) {\r\n\t\t\tthis._user=user;\r\n\t\t\tsetCookie(\"PPMS_USER\", user.USER_ID+\"^\"+user.COMPANY_ID+\"^\"+user.Is_HR+\"^\"+user.Is_Branch, 30);\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"Let's Start...\", \"Success\");\r\n\t\t\tthis.disabledfindTM=false;\r\n\r\n\t\t\tthis.showingLogout=\"visible\";\r\n\t}\r\n\r\n\r\n\r\n\t\tfnInitMasterfiles(initType,output){\r\n\r\n\t\t\tif(this.masterFilesLoaded==false)\r\n            {\r\n                settings.isNavigating = true;\r\n\t\t\t\tthis._toastr = toastr;\r\n\t\t\t\ttoastr.info(\"Masterfiles...\", \"Loading please wait..\", { timeOut: 15000 });\r\n\t\t\t\tthis.loginDisabled = true;\r\n\t\t\t\tloadMasterfiles().then(() => {\r\n\t\t\t\t\tloadLookups().then(() => {\r\n\r\n\t\t\t\t\t\tthis.masterFilesLoaded = true;\r\n\r\n\t\t\t\t\t\tthis.fnPassUserObject(initType,output);\r\n                        settings.isNavigating = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.fnPassUserObject(initType,output);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfnLogin(){\r\n\t\t\tthis.dialogService.open({\r\n\t\t\t\tviewModel: login\r\n            }).whenClosed(response => {\r\n\r\n\t\t\t\tif (!response.wasCancelled) {\r\n\t\t\t\t\tthis.fnInitMasterfiles(1, response.output);\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfnPassUserObject(initType,output){\r\n\r\n\t\t\tif (initType == 1) {\r\n\r\n\r\n\t\t\t} else {\r\n\t\t\t\tvar varCookie = checkCookie(\"PPMS_USER\");\r\n\t\t\t\tvar varSplitCookie = varCookie.split('^');\r\n\t\t\t\tthis._user = {\r\n\t\t\t\t\tUSER_ID: varSplitCookie[0],\r\n\t\t\t\t\tCOMPANY_ID: varSplitCookie[1],\r\n\t\t\t\t\tIs_HR: varSplitCookie[2],\r\n\t\t\t\t\tIs_Branch: varSplitCookie[0]\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.loginDisabled = true;\r\n\t\t\t\tthis.logoutDisabled = false;\r\n\t\t\t\tthis.showingLogout = \"visible\";\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"Let's Start...\", \"Success\");\r\n\t\t\t\tthis.disabledfindTM=false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.LoginPassed(output);\r\n\r\n\t\t}\r\n\r\nLoginPassed(user) {\r\n\r\n\t\t\tthis._user = user; \r\n\r\n      setCookie(\"PPMS_USER\", user.USER_ID+\"^\"+user.COMPANY_ID+\"^\"+user.Is_HR+\"^\"+user.Is_Branch, 30);\r\n      toastr.clear();\r\n      toastr.success(\"Let's Start...\", \"Success\");\r\n\r\n      this.logoutDisabled = false;\r\n      this.loginDisabled=true;\r\n\r\n      this.showingLogout = \"visible\";\r\n\r\n      this.disabledfindTM=false;\r\n  }\r\n\r\n\r\n\r\n  logout() {\r\n  \tthis.disabledfindTM=true;\r\n  \tthis.isDisableSave=true;\r\n\tthis.clear();\r\n  \tthis.loginDisabled=false;\r\n  \tthis.logoutDisabled=true;\r\n  \tthis._user ={};\r\n  \tremoveCookie();\r\n  \tthis.showingLogout = \"hidden\";\r\n  \tthis.fnLogin();\r\n\r\n  }\r\n\t\r\n\r\n\tgetGlobalIndivsFromGrpIndiv(){\r\n\t\tthis.grpMembers=[];\r\n\t\tvar tmpIndivs = [];\r\n\t\tvar _query = EntityQuery().from('GRP_INDIV_MSTR').where(\"GLOBAL_GRP_ID\", \"==\", this._GLOBAL_GRP_ID);\r\n\t\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\tsuccess.results.forEach((all) => {\r\n\t\t\t\t\r\n\t\t\t\tgetLookups().GLOBAL_INDIV_WITH_ALIAS.forEach((item)=>{\r\n\r\n\t\t\t\t\tif(item.GLOBAL_INDIV_ID==all.GLOBAL_INDIV_ID)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttmpIndivs.push({\r\n\t\t\t\t\t\t\tGLOBAL_INDIV_ID: all.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\t\tGLOBAL_GRP_ID: all.GLOBAL_GRP_ID,\r\n\t\t\t\t\t\t\tPERSONNEL_NAME: item.PERSONNEL_NAME,\r\n\t\t\t\t\t\t\tGRP_INDIV_ID: all.GRP_INDIV_ID,\r\n\t\t\t\t\t\t\tSTATUS_CD: all.STATUS_CD\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// console.log(success.results);\r\n\t\t\t\t// \t\tconsole.log(tmpIndivs);\r\n\r\n\t\t\t\tif(success.results.length==tmpIndivs.length)\t\t\t\t\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.grpMembers=tmpIndivs;\r\n\t\t\t\t\tthis._signal = generateID();\r\n\t\t\t\t\ttoastr.success(\"Refreshed..\", \"Data Reloaded..\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// var _getIndiv = EntityQuery().from('GLOBAL_INDIV_MSTR').where(\"GLOBAL_INDIV_ID\", \"==\", all.GLOBAL_INDIV_ID);\r\n\t\t\t\t// EntityManager().executeQuery(_getIndiv).then((successIndiv) => {\r\n\r\n\t\t\t\t// \t_.each(successIndiv.results, (singleIndiv) => {\r\n\r\n\t\t\t\t// \t\ttmpIndivs.push({\r\n\t\t\t\t// \t\t\tGLOBAL_INDIV_ID: all.GLOBAL_INDIV_ID,\r\n\t\t\t\t// \t\t\tGLOBAL_GRP_ID: all.GLOBAL_GRP_ID,\r\n\t\t\t\t// \t\t\tPERSONNEL_NAME: singleIndiv.LAST_NAME + ', ' + singleIndiv.GIVEN_NAME + ' ' + singleIndiv.MIDDLE_NAME,\r\n\t\t\t\t// \t\t\tGRP_INDIV_ID: all.GRP_INDIV_ID,\r\n\t\t\t\t// \t\t\tSTATUS_CD: all.STATUS_CD\r\n\t\t\t\t// \t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t// \t\tif(success.results.length==tmpIndivs.length)\t\t\t\t\r\n\t\t\t\t// \t\t{\r\n\t\t\t\t// \t\t\tthis.grpMembers=tmpIndivs;\r\n\t\t\t\t// \t\t\tthis._signal = generateID();\r\n\t\t\t\t// \t\t\ttoastr.success(\"Refreshed..\", \"Data Reloaded..\");\r\n\t\t\t\t// \t\t}\r\n\r\n\t\t\t\t// \t});\r\n\t\t\t\t// });\r\n\t\t\r\n\t\t\t});\r\n\r\n\t\t\t\r\n\t\t});\r\n\r\n\t}\r\n\t//passed grp indiv mstr\r\n\t//@handle('pass.group')\r\n\tPassedGroup(value) {\r\n\r\n\r\n\t\t//this._dispatcher.dispatch('close.modal', this.modalIndivMstr.id);\r\n\t}\r\n\r\n\tsaveGroupIndiv() {\r\n\r\n\t\t//get existing entites\r\n\t\tvar getQueryEntities = EntityQuery().from('GRP_INDIV_MSTR').where(\"GLOBAL_GRP_ID\", \"==\", this._GLOBAL_GRP_ID);\r\n\t\tEntityManager().executeQuery(getQueryEntities).then((successEnties)=> {\r\n\r\n\t\t\t//get max grp indiv id\r\n\t\t\tvar getMax = EntityQuery().from('GRP_INDIV_MSTR').orderByDesc('GRP_INDIV_ID').take(1);\r\n\t\t\tEntityManager().executeQuery(getMax).then((successMax) => {\r\n\t\t\t\tvar getMax = 1;\r\n\r\n\t\t\t\tif (successMax.results.length > 0)\r\n\t\t\t\t\tgetMax = successMax.results[0].GRP_INDIV_ID + 1;\r\n\r\n\t\t\t\tthis.grpMembers.forEach((indiv) => {\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (indiv.GRP_INDIV_ID === undefined) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar varInsert = EntityManager().createEntity('GRP_INDIV_MSTR', {\r\n\t\t\t\t\t\t\tGLOBAL_INDIV_ID: indiv.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\t\tGLOBAL_GRP_ID: indiv.GLOBAL_GRP_ID,\r\n\t\t\t\t\t\t\tCREATED_BY: this._user.USER_ID, \r\n\t\t\t\t\t\t\tSTATUS_CD: \"ACTV\",\r\n\t\t\t\t\t\t\tCREATED_DT: new Date(Date.now()),\r\n\t\t\t\t\t\t\tGRP_INDIV_ID: getMax\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t++getMax;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tEntityManager().addEntity(varInsert);\r\n\t\t\t\t\t} \r\n\t\t\t\t\telse \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsuccessEnties.results.forEach((existingIndiv) => {\r\n\t\t\t\t\t\t\tif(existingIndiv.GLOBAL_INDIV_ID==indiv.GLOBAL_INDIV_ID)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif (indiv.STATUS_CD == \"INACTV\" && existingIndiv.STATUS_CD != \"INACTV\") {\r\n\t\t\t\t\t\t\t\t\texistingIndiv.STATUS_CD = \"INACTV\";\r\n\t\t\t\t\t\t\t\t\texistingIndiv.LAST_UPDATED_DT = Date.now();\r\n\t\t\t\t\t\t\t\t\texistingIndiv.LAST_UPDATED_BY = this._user.USER_ID;\r\n\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t} else if (indiv.STATUS_CD != existingIndiv.STATUS_CD) {\r\n\t\t\t\t\t\t\t\t\texistingIndiv.STATUS_CD = indiv.STATUS_CD;\r\n\t\t\t\t\t\t\t\t\texistingIndiv.LAST_UPDATED_DT = Date.now();\r\n\t\t\t\t\t\t\t\t\texistingIndiv.LAST_UPDATED_BY = this._user.USER_ID;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tEntityManager().saveChanges().then((success) => {\r\n\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"Talent Manager Group\");\r\n\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.getGlobalIndivsFromGrpIndiv();\r\n\t\t\t\t\t}, 1000);\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t}, (fail) => {\r\n\t\t\t\t\tconsole.log(fail);\r\n\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t});\r\n\r\n\r\n\t\t});\r\n\r\n\t\t\r\n\t}\r\n\r\n\taddIndividual() {\r\n\t\tthis.grpMembers.push({});\r\n\t}\r\n\r\n\tdeleteItem(item) { //item\r\n\t\tvar isFound = this.grpMembers.find((_item) => {\r\n\t\t\tif (_item.GLOBAL_INDIV_ID == item.GLOBAL_INDIV_ID) {\r\n\t\t\t\titem.STATUS_CD = \"INACTV\";\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis._signal = generateID();\r\n\t}\r\n\r\n\tclear(){\r\n\t\tthis.grpMembers=[];\t\t\r\n\t\tthis._GLOBAL_GRP_ID = \"\";\r\n\t\tthis._GROUP_NAME = \"\";\r\n\r\n\t\tthis.isDisableSave=true;\r\n\t\tthis.disabledfindTalent=true;\r\n\r\n\r\n\t}\r\n}","export function OrderByDate(a, b){  \r\n    if(a.date > b.date)\r\n      return 1;\r\n    if(a.date < b.date)\r\n      return -1;\r\n    return 0; \r\n}\r\n\r\n//source: https://stackoverflow.com/questions/12578507/how-to-implement-an-input-with-a-mask\r\n  export function isDigit(event){\r\n    if ((event.charCode >= 48 && event.charCode <= 57) || event.keyCode == 9 || event.keyCode == 10 || event.keyCode == 13 || event.keyCode == 8 || event.keyCode == 116 || event.keyCode == 46 || (event.keyCode <= 40 && event.keyCode >= 37)) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }     \r\n  }\r\n\r\n  //source: https://stackoverflow.com/questions/12578507/how-to-implement-an-input-with-a-mask\r\nexport function input_mask(id, mask){\r\n    var myMask = mask;\r\n      var myCaja = document.getElementById(id);\r\n      var myText = \"\";\r\n      var myNumbers = [];\r\n      var myOutPut = \"\"\r\n      var theLastPos = 1;\r\n      myText = myCaja.value;\r\n      //get numbers\r\n      for (var i = 0; i < myText.length; i++) {\r\n        if (!isNaN(myText.charAt(i)) && myText.charAt(i) != \" \") {\r\n            myNumbers.push(myText.charAt(i));\r\n        }\r\n      }\r\n  //write over mask\r\n      for (var j = 0; j < myMask.length; j++) {\r\n        if (myMask.charAt(j) == \"_\") { //replace \"_\" by a number \r\n            if (myNumbers.length == 0)\r\n              myOutPut = myOutPut + myMask.charAt(j);\r\n            else {\r\n              myOutPut = myOutPut + myNumbers.shift();\r\n              theLastPos = j + 1; //set caret position\r\n            }\r\n        } else {\r\n            myOutPut = myOutPut + myMask.charAt(j);\r\n        }\r\n      }\r\n\r\n      document.getElementById(id).value = myOutPut;\r\n      document.getElementById(id).setSelectionRange(theLastPos, theLastPos);\r\n  }\r\n\r\n// export function formatDate(strDate){\r\n//     if(strDate == null || strDate.length == 0)\r\n//       return \"\";\r\n//     var dt = new Date(strDate);\r\n//     var month = dt.getMonth()+1;\r\n//     var day = dt.getDate();\r\n//     var year = dt.getFullYear();\r\n//     return ('0'+month).slice(-2)+'/'+('0'+day).slice(-2)+'/'+(\"000\"+year).slice(-4);\r\n// }\r\n\r\n\r\nexport function fnSerializeCode(value)\r\n{\r\n    return btoa(value);\r\n}\r\n\r\nexport function substringMatcher (strs) {\r\n\t\r\n  return function findMatches(q, cb) {\r\n    var matches;\r\n\r\n    // an array that will be populated with substring matches\r\n    matches = [];\r\n\r\n    // regex used to determine if a string contains the substring `q`\r\n    var substrRegex = new RegExp(q, 'i');\r\n\r\n    // iterate through the pool of strings and for any string that\r\n    // contains the substring `q`, add it to the `matches` array\r\n    $.each(strs, function(i, str) {\r\n      if (substrRegex.test(str)) {\r\n        matches.push(str);\r\n      }\r\n    });\r\n\r\n    cb(matches);\r\n  };\r\n}\r\n\r\n\r\nexport function getFilter(varFilterArray, propertyName: object, propertyText: string)\r\n{\r\n    if (varFilterArray === undefined || varFilterArray === null || propertyName === undefined || propertyName === null || propertyName === '') {\r\n        return varFilterArray;\r\n    }\r\n    \r\n    return varFilterArray.filter(x => \r\n      (x[propertyText]===undefined?\"\":x[propertyText].toString()).indexOf(\r\n      (propertyName===undefined?\"\":propertyName).toUpperCase()) !== -1\r\n\r\n      )\r\n}\r\n\r\nexport function checkCookie(value) {\r\n  var user = getCookie(value);\r\n  if (user != \"\") {\r\n    //alert(\"Welcome again \" + user);\r\n    return user;\r\n  } else {\r\n    return \"\";\r\n    // user = prompt(\"Please enter your name:\", \"\");\r\n    // if (user != \"\" && user != null) {\r\n    //   setCookie(\"username\", user, 30);\r\n    // }\r\n  }\r\n}\r\n\r\nexport function setCookie(cname, cvalue, mins) {\r\n  var d = new Date();\r\n  //d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n  d.setTime(d.getTime() +  (60 * 60 * mins * 200));\r\n  var expires = \"expires=\" + d.toUTCString();\r\n  document.cookie = cname + \"=\" + cvalue + \"; \" + expires;\r\n}\r\n\r\nexport function removeCookie() {\r\n\r\n  //document.cookie = undefined;\r\n\r\n  var  expireAt = new Date;\r\n  expireAt.setMonth(expireAt.getMonth() - 1);\r\n\r\n  if (document.cookie != \"\") {\r\n    var crumbs = document.cookie.split(\";\");\r\n    for (var i = 0; i < crumbs.length; i++) {\r\n      var crumbName = crumbs[i].split(\"=\")[0];\r\n      document.cookie = crumbName + \"=;expires=\" + expireAt.toGMTString();\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\nexport function getCookie(cname) {\r\n   var name = cname + \"=\";\r\n   var ca = document.cookie.split(';');\r\n   for (var i = 0; i < ca.length; i++) {\r\n     var c = ca[i];\r\n     while (c.charAt(0) == ' ') c = c.substring(1);\r\n     if (c.indexOf(name) == 0) return c.substring(name.length, c.length);\r\n   }\r\n   return \"\";\r\n }\r\n\r\n\r\n\r\n//you paste this script instead to execute inside <script src=\"../bootstrap-datepicker.js\"></script>.\r\n//because jquery is not being loaded quickly before <script src=\"../bootstrap-datepicker.js\"></script> on the index file. \r\n//so error occurs bec. jquery must be initialized first\r\n//bootstrap-datepicker.js copy\r\n!function( $ ) {\r\n  \r\n  // Picker object\r\n  \r\n  var Datepicker = function(element, options){\r\n    this.element = $(element);\r\n    this.format = DPGlobal.parseFormat(options.format||this.element.data('date-format')||'mm/dd/yyyy');\r\n    this.picker = $(DPGlobal.template)\r\n              .appendTo('body')\r\n              .on({\r\n                click: $.proxy(this.click, this)//,\r\n                //mousedown: $.proxy(this.mousedown, this)\r\n              });\r\n    this.isInput = this.element.is('input');\r\n    this.component = this.element.is('.date') ? this.element.find('.add-on') : false;\r\n    \r\n    if (this.isInput) {\r\n      this.element.on({\r\n        focus: $.proxy(this.show, this),\r\n        //blur: $.proxy(this.hide, this),\r\n        keyup: $.proxy(this.update, this)\r\n      });\r\n    } else {\r\n      if (this.component){\r\n        this.component.on('click', $.proxy(this.show, this));\r\n      } else {\r\n        this.element.on('click', $.proxy(this.show, this));\r\n      }\r\n    }\r\n  \r\n    this.minViewMode = options.minViewMode||this.element.data('date-minviewmode')||0;\r\n    if (typeof this.minViewMode === 'string') {\r\n      switch (this.minViewMode) {\r\n        case 'months':\r\n          this.minViewMode = 1;\r\n          break;\r\n        case 'years':\r\n          this.minViewMode = 2;\r\n          break;\r\n        default:\r\n          this.minViewMode = 0;\r\n          break;\r\n      }\r\n    }\r\n    this.viewMode = options.viewMode||this.element.data('date-viewmode')||0;\r\n    if (typeof this.viewMode === 'string') {\r\n      switch (this.viewMode) {\r\n        case 'months':\r\n          this.viewMode = 1;\r\n          break;\r\n        case 'years':\r\n          this.viewMode = 2;\r\n          break;\r\n        default:\r\n          this.viewMode = 0;\r\n          break;\r\n      }\r\n    }\r\n    this.startViewMode = this.viewMode;\r\n    this.weekStart = options.weekStart||this.element.data('date-weekstart')||0;\r\n    this.weekEnd = this.weekStart === 0 ? 6 : this.weekStart - 1;\r\n    this.onRender = options.onRender;\r\n    this.fillDow();\r\n    this.fillMonths();\r\n    this.update();\r\n    this.showMode();\r\n  };\r\n  \r\n  Datepicker.prototype = {\r\n    constructor: Datepicker,  \r\n    \r\n    show: function(e) {\r\n      this.picker.show();\r\n      this.height = this.component ? this.component.outerHeight() : this.element.outerHeight();\r\n      this.place();\r\n      $(window).on('resize', $.proxy(this.place, this));\r\n      if (e ) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n      }\r\n      if (!this.isInput) {\r\n      }\r\n      var that = this;\r\n      $(document).on('mousedown', function(ev){\r\n        if ($(ev.target).closest('.datepicker').length == 0) {\r\n          that.hide();\r\n        }\r\n      });\r\n      this.element.trigger({\r\n        type: 'show',\r\n        date: this.date\r\n      });\r\n    },\r\n    \r\n    hide: function(){\r\n      this.picker.hide();\r\n      $(window).off('resize', this.place);\r\n      this.viewMode = this.startViewMode;\r\n      this.showMode();\r\n      if (!this.isInput) {\r\n        $(document).off('mousedown', this.hide);\r\n      }\r\n      //this.set();\r\n      this.element.trigger({\r\n        type: 'hide',\r\n        date: this.date\r\n      });\r\n    },\r\n    \r\n    set: function() {\r\n      var formated = DPGlobal.formatDate(this.date, this.format);\r\n      if (!this.isInput) {\r\n        if (this.component){\r\n          this.element.find('input').prop('value', formated);\r\n        }\r\n        this.element.data('date', formated);\r\n      } else {\r\n        this.element.prop('value', formated);\r\n      }\r\n    },\r\n    \r\n    setValue: function(newDate) {\r\n      if (typeof newDate === 'string') {\r\n        this.date = DPGlobal.parseDate(newDate, this.format);\r\n      } else {\r\n        this.date = new Date(newDate);\r\n      }\r\n      this.set();\r\n      this.viewDate = new Date(this.date.getFullYear(), this.date.getMonth(), 1, 0, 0, 0, 0);\r\n      this.fill();\r\n    },\r\n    \r\n    place: function(){\r\n      var offset = this.component ? this.component.offset() : this.element.offset();\r\n      this.picker.css({\r\n        top: offset.top + this.height,\r\n        left: offset.left\r\n      });\r\n    },\r\n    \r\n    update: function(newDate){\r\n      this.date = DPGlobal.parseDate(\r\n        typeof newDate === 'string' ? newDate : (this.isInput ? this.element.prop('value') : this.element.data('date')),\r\n        this.format\r\n      );\r\n      this.viewDate = new Date(this.date.getFullYear(), this.date.getMonth(), 1, 0, 0, 0, 0);\r\n      this.fill();\r\n    },\r\n    \r\n    fillDow: function(){\r\n      var dowCnt = this.weekStart;\r\n      var html = '<tr>';\r\n      while (dowCnt < this.weekStart + 7) {\r\n        html += '<th class=\"dow\">'+DPGlobal.dates.daysMin[(dowCnt++)%7]+'</th>';\r\n      }\r\n      html += '</tr>';\r\n      this.picker.find('.datepicker-days thead').append(html);\r\n    },\r\n    \r\n    fillMonths: function(){\r\n      var html = '';\r\n      var i = 0\r\n      while (i < 12) {\r\n        html += '<span class=\"month\">'+DPGlobal.dates.monthsShort[i++]+'</span>';\r\n      }\r\n      this.picker.find('.datepicker-months td').append(html);\r\n    },\r\n    \r\n    fill: function() {\r\n      var d = new Date(this.viewDate),\r\n        year = d.getFullYear(),\r\n        month = d.getMonth(),\r\n        currentDate = this.date.valueOf();\r\n      this.picker.find('.datepicker-days th:eq(1)')\r\n            .text(DPGlobal.dates.months[month]+' '+year);\r\n      var prevMonth = new Date(year, month-1, 28,0,0,0,0),\r\n        day = DPGlobal.getDaysInMonth(prevMonth.getFullYear(), prevMonth.getMonth());\r\n      prevMonth.setDate(day);\r\n      prevMonth.setDate(day - (prevMonth.getDay() - this.weekStart + 7)%7);\r\n      var nextMonth = new Date(prevMonth);\r\n      nextMonth.setDate(nextMonth.getDate() + 42);\r\n      nextMonth = nextMonth.valueOf();\r\n      var html = [];\r\n      var clsName,\r\n        prevY,\r\n        prevM;\r\n      while(prevMonth.valueOf() < nextMonth) {\r\n        if (prevMonth.getDay() === this.weekStart) {\r\n          html.push('<tr>');\r\n        }\r\n        clsName = this.onRender(prevMonth);\r\n        prevY = prevMonth.getFullYear();\r\n        prevM = prevMonth.getMonth();\r\n        if ((prevM < month &&  prevY === year) ||  prevY < year) {\r\n          clsName += ' old';\r\n        } else if ((prevM > month && prevY === year) || prevY > year) {\r\n          clsName += ' new';\r\n        }\r\n        if (prevMonth.valueOf() === currentDate) {\r\n          clsName += ' active';\r\n        }\r\n        html.push('<td class=\"day '+clsName+'\">'+prevMonth.getDate() + '</td>');\r\n        if (prevMonth.getDay() === this.weekEnd) {\r\n          html.push('</tr>');\r\n        }\r\n        prevMonth.setDate(prevMonth.getDate()+1);\r\n      }\r\n      this.picker.find('.datepicker-days tbody').empty().append(html.join(''));\r\n      var currentYear = this.date.getFullYear();\r\n      \r\n      var months = this.picker.find('.datepicker-months')\r\n            .find('th:eq(1)')\r\n              .text(year)\r\n              .end()\r\n            .find('span').removeClass('active');\r\n      if (currentYear === year) {\r\n        months.eq(this.date.getMonth()).addClass('active');\r\n      }\r\n      \r\n      html = '';\r\n      year = parseInt(year/10, 10) * 10;\r\n      var yearCont = this.picker.find('.datepicker-years')\r\n                .find('th:eq(1)')\r\n                  .text(year + '-' + (year + 9))\r\n                  .end()\r\n                .find('td');\r\n      year -= 1;\r\n      for (var i = -1; i < 11; i++) {\r\n        html += '<span class=\"year'+(i === -1 || i === 10 ? ' old' : '')+(currentYear === year ? ' active' : '')+'\">'+year+'</span>';\r\n        year += 1;\r\n      }\r\n      yearCont.html(html);\r\n    },\r\n    \r\n    click: function(e) {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n      var target = $(e.target).closest('span, td, th');\r\n      if (target.length === 1) {\r\n        switch(target[0].nodeName.toLowerCase()) {\r\n          case 'th':\r\n            switch(target[0].className) {\r\n              case 'switch':\r\n                this.showMode(1);\r\n                break;\r\n              case 'prev':\r\n              case 'next':\r\n                this.viewDate['set'+DPGlobal.modes[this.viewMode].navFnc].call(\r\n                  this.viewDate,\r\n                  this.viewDate['get'+DPGlobal.modes[this.viewMode].navFnc].call(this.viewDate) + \r\n                  DPGlobal.modes[this.viewMode].navStep * (target[0].className === 'prev' ? -1 : 1)\r\n                );\r\n                this.fill();\r\n                this.set();\r\n                break;\r\n            }\r\n            break;\r\n          case 'span':\r\n            if (target.is('.month')) {\r\n              var month = target.parent().find('span').index(target);\r\n              this.viewDate.setMonth(month);\r\n            } else {\r\n              var year = parseInt(target.text(), 10)||0;\r\n              this.viewDate.setFullYear(year);\r\n            }\r\n            if (this.viewMode !== 0) {\r\n              this.date = new Date(this.viewDate);\r\n              this.element.trigger({\r\n                type: 'changeDate',\r\n                date: this.date,\r\n                viewMode: DPGlobal.modes[this.viewMode].clsName\r\n              });\r\n            }\r\n            this.showMode(-1);\r\n            this.fill();\r\n            this.set();\r\n            break;\r\n          case 'td':\r\n            if (target.is('.day') && !target.is('.disabled')){\r\n              var day = parseInt(target.text(), 10)||1;\r\n              var month = this.viewDate.getMonth();\r\n              if (target.is('.old')) {\r\n                month -= 1;\r\n              } else if (target.is('.new')) {\r\n                month += 1;\r\n              }\r\n              var year = this.viewDate.getFullYear();\r\n              this.date = new Date(year, month, day,0,0,0,0);\r\n              this.viewDate = new Date(year, month, Math.min(28, day),0,0,0,0);\r\n              this.fill();\r\n              this.set();\r\n              this.element.trigger({\r\n                type: 'changeDate',\r\n                date: this.date,\r\n                viewMode: DPGlobal.modes[this.viewMode].clsName\r\n              });\r\n            }\r\n            break;\r\n        }\r\n      }\r\n    },\r\n    \r\n    mousedown: function(e){\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    },\r\n    \r\n    showMode: function(dir) {\r\n      if (dir) {\r\n        this.viewMode = Math.max(this.minViewMode, Math.min(2, this.viewMode + dir));\r\n      }\r\n      this.picker.find('>div').hide().filter('.datepicker-'+DPGlobal.modes[this.viewMode].clsName).show();\r\n    }\r\n  };\r\n  \r\n  $.fn.datepicker = function ( option, val ) {\r\n    return this.each(function () {\r\n      var $this = $(this),\r\n        data = $this.data('datepicker'),\r\n        options = typeof option === 'object' && option;\r\n      if (!data) {\r\n        $this.data('datepicker', (data = new Datepicker(this, $.extend({}, $.fn.datepicker.defaults,options))));\r\n      }\r\n      if (typeof option === 'string') data[option](val);\r\n    });\r\n  };\r\n\r\n  $.fn.datepicker.defaults = {\r\n    onRender: function(date) {\r\n      return '';\r\n    }\r\n  };\r\n  $.fn.datepicker.Constructor = Datepicker;\r\n  \r\n  var DPGlobal = {\r\n    modes: [\r\n      {\r\n        clsName: 'days',\r\n        navFnc: 'Month',\r\n        navStep: 1\r\n      },\r\n      {\r\n        clsName: 'months',\r\n        navFnc: 'FullYear',\r\n        navStep: 1\r\n      },\r\n      {\r\n        clsName: 'years',\r\n        navFnc: 'FullYear',\r\n        navStep: 10\r\n    }],\r\n    dates:{\r\n      days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"],\r\n      daysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\r\n      daysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"],\r\n      months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n      monthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\r\n    },\r\n    isLeapYear: function (year) {\r\n      return (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0))\r\n    },\r\n    getDaysInMonth: function (year, month) {\r\n      return [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month]\r\n    },\r\n    parseFormat: function(format){\r\n      var separator = format.match(/[.\\/\\-\\s].*?/),\r\n        parts = format.split(/\\W+/);\r\n      if (!separator || !parts || parts.length === 0){\r\n        throw new Error(\"Invalid date format.\");\r\n      }\r\n      return {separator: separator, parts: parts};\r\n    },\r\n    parseDate: function(date, format) {\r\n      var parts = date.split(format.separator),\r\n        date = new Date(),\r\n        val;\r\n      date.setHours(0);\r\n      date.setMinutes(0);\r\n      date.setSeconds(0);\r\n      date.setMilliseconds(0);\r\n      if (parts.length === format.parts.length) {\r\n        var year = date.getFullYear(), day = date.getDate(), month = date.getMonth();\r\n        for (var i=0, cnt = format.parts.length; i < cnt; i++) {\r\n          val = parseInt(parts[i], 10)||1;\r\n          switch(format.parts[i]) {\r\n            case 'dd':\r\n            case 'd':\r\n              day = val;\r\n              date.setDate(val);\r\n              break;\r\n            case 'mm':\r\n            case 'm':\r\n              month = val - 1;\r\n              date.setMonth(val - 1);\r\n              break;\r\n            case 'yy':\r\n              year = 2000 + val;\r\n              date.setFullYear(2000 + val);\r\n              break;\r\n            case 'yyyy':\r\n              year = val;\r\n              date.setFullYear(val);\r\n              break;\r\n          }\r\n        }\r\n        date = new Date(year, month, day, 0 ,0 ,0);\r\n      }\r\n      return date;\r\n    },\r\n    formatDate: function(date, format){\r\n      var val = {\r\n        d: date.getDate(),\r\n        m: date.getMonth() + 1,\r\n        yy: date.getFullYear().toString().substring(2),\r\n        yyyy: date.getFullYear()\r\n      };\r\n      val.dd = (val.d < 10 ? '0' : '') + val.d;\r\n      val.mm = (val.m < 10 ? '0' : '') + val.m;\r\n      var date = [];\r\n      for (var i=0, cnt = format.parts.length; i < cnt; i++) {\r\n        date.push(val[format.parts[i]]);\r\n      }\r\n      return date.join(format.separator);\r\n    },\r\n    headTemplate: '<thead>'+\r\n              '<tr>'+\r\n                '<th class=\"prev\">&lsaquo;</th>'+\r\n                '<th colspan=\"5\" class=\"switch\"></th>'+\r\n                '<th class=\"next\">&rsaquo;</th>'+\r\n              '</tr>'+\r\n            '</thead>',\r\n    contTemplate: '<tbody><tr><td colspan=\"7\"></td></tr></tbody>'\r\n  };\r\n  DPGlobal.template = '<div class=\"datepicker dropdown-menu\">'+\r\n              '<div class=\"datepicker-days\">'+\r\n                '<table class=\" table-condensed\">'+\r\n                  DPGlobal.headTemplate+\r\n                  '<tbody></tbody>'+\r\n                '</table>'+\r\n              '</div>'+\r\n              '<div class=\"datepicker-months\">'+\r\n                '<table class=\"table-condensed\">'+\r\n                  DPGlobal.headTemplate+\r\n                  DPGlobal.contTemplate+\r\n                '</table>'+\r\n              '</div>'+\r\n              '<div class=\"datepicker-years\">'+\r\n                '<table class=\"table-condensed\">'+\r\n                  DPGlobal.headTemplate+\r\n                  DPGlobal.contTemplate+\r\n                '</table>'+\r\n              '</div>'+\r\n            '</div>';\r\n\r\n}( window.jQuery );","export function configure(aurelia) {\r\n  aurelia.use\r\n    .standardConfiguration()\r\n    .developmentLogging()\r\n    .plugin('aurelia-animator-css')\r\n\t.plugin('aurelia-breeze')\r\n  .plugin('aurelia-dialog', config => {\r\n      config.useDefaults();\r\n      config.settings.lock = false;\r\n      config.settings.centerHorizontalOnly = false;\r\n      config.settings.startingZIndex = 500;\r\n    });\r\n\r\n\r\n\t//.plugin('aurelia-bs-modal')\r\n\t;\r\n  aurelia.start().then(a => a.setRoot());\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { computedFrom, customElement } from 'aurelia-framework';\r\nimport { cache_obj } from 'cache_obj';\r\nimport { initializeBreeze } from './entity-manager-factory';\r\nimport { loadMasterfiles, loadTables, loadLookups, getLookups } from './masterfiles';\r\nimport toastr from \"toastr\";\r\nimport { DialogService } from 'aurelia-dialog';\r\n// import  jquery from \"jquery\";\r\nimport { generateID } from './entity-manager-factory';\r\n//import {handle, Dispatcher} from 'aurelia-flux';\r\nimport { checkCookie, setCookie, removeCookie, getCookie, OrderByNo} from './helpers';\r\n//import { MultiObserver } from 'multi-observer';\r\nimport settings from './settings';\r\nimport { Router } from 'aurelia-router';\r\nimport _ from 'underscore';\r\n@inject(toastr, cache_obj, DialogService, Router) //MultiObserver\r\nexport class mainpage {\r\n\r\n\r\n    _toastr = null;\r\n    _cache_obj;\r\n\r\n    router;\r\n    budgetAccess=false;\r\n    actualAccess = false;\r\n    talentgroupAccess = false;\r\n    buhAccess = false;\r\n    headerVisible = false;\r\n    _application = [];\r\n    _application_desc = [\r\n        { order_no: 1, ref: \"PPI MAINTENANCE\", desc: \"PROGRAM PERSONNEL INFORMATION\"},                \r\n        { order_no: 2, ref: 'TDB', desc: 'PART-TIMER INFORMATION DATABASE' },\r\n        { order_no: 3, ref: 'PPCD', desc: 'PROGRAM PERSONNEL CONTRACT DATABASE' },\r\n        { order_no: 4, ref: 'PPFCS MAINTENANCE', desc: 'PROGRAM PERSONNEL FREE CAPTURE SYSTEM' },\r\n        { order_no: 5, ref: 'TSDB', desc: 'TALENT SUPPLIER INFORMATION DATABASE' },\r\n        { order_no: 6, ref: 'UTILIZATION', desc: 'UTILIZATION'},\r\n        // { ref: 'PPID', desc: 'PROGRAM PERSONNEL INFORMATION DATABASE' },\r\n        // { ref: \"PPID_GROUP\", desc: 'PROGRAM PERSONNEL INFORMATION DATABASE GROUP'}\r\n        \r\n    ];\r\n    _remove = ['PROGRAM BUDGET TEMPLATE', 'ACTUALS COST PROCESSING', \"PROGRAM PERSONNEL INFORMATION DATABASE\", \"PROGRAM PERSONNEL INFORMATION GROUP\"];    \r\n    _ppfcs_modules = [];\r\n    _ppi_modules=[];\r\n\r\n    //    { APPLICATION_DESC: 'SPECIAL PROVISION MASTERLIST' },\r\n    //{ APPLICATION_DESC: 'MAINTAINED FEE ADJUSTMENT' },\r\n    //{ APPLICATION_DESC: 'BUDGET TEMPLATE PER JOB' },\r\n    //{ APPLICATION_DESC: 'ADDTL FEE MAINTENANCE' },\r\n    //{ APPLICATION_DESC: 'ALLOWED TAPING DAYS' },\r\n    //{ APPLICATION_DESC: 'DOWNLOAD IPS FILE' }\r\n\r\n    _roles = [];\r\n    _application_on = true;\r\n    _ppi_off = true;\r\n    constructor(toastr, cache_obj, dialogService, Router) { //multiObserver\r\n\r\n        this._cache_obj = cache_obj;\r\n        this.router = Router;\r\n\r\n        setTimeout(() => {\r\n             //console.log(this._cache_obj._ACCESS);\r\n\r\n            if (this._cache_obj.USER !== undefined)\r\n            if (this._cache_obj.USER.ROLE_CD !== undefined)\r\n            {\r\n                //console.log(this._cache_obj.USER.ROLE_CD);\r\n                if (this._cache_obj.USER.ROLE_CD.includes('ACCESSALL')) {\r\n                    this.budgetAccess = true;\r\n                    this.talentgroupAccess = true;\r\n                    this.buhAccess = true;\r\n                    this.actualAccess = true;\r\n                    this.headerVisible = true;\r\n                }\r\n\r\n                if (_.isEmpty(this._cache_obj._ACCESS))\r\n                {\r\n                    $.post(settings.serviceNameBase + \"/UserAccess/User_Access\", {\r\n                        \"USER_ID\": this._cache_obj.USER.USER_ID,\r\n                        \"HASH\": this._cache_obj.USER.HASH\r\n                    }).done((response) => {\r\n\r\n                        // console.log(response);\r\n                        this._cache_obj._ACCESS = response;                      \r\n\r\n                        this._application = this._cache_obj._ACCESS.APPLICATION;\r\n                        for (var i = 0; i < this._application.length; i++) {\r\n                            for (var j = 0; j < this._application_desc.length; j++) {\r\n                                if (this._application_desc[j].ref == this._application[i].APPLICATION_DESC) {\r\n                                    this._application[i].APPLICATION_DESC = this._application_desc[j].desc;\r\n                                    this._application[i].ORDER_NO = this._application_desc[j].order_no;\r\n                                }else{\r\n                                    var doesExist = this._application_desc.some((x)=>x.desc == this._application[i].APPLICATION_DESC);\r\n                                    if(!doesExist){\r\n                                        this._application[i].ORDER_NO = 7;  \r\n                                    }\r\n                                }\r\n                            }\r\n                            if (this._remove.includes(this._application[i].APPLICATION_DESC))\r\n                            { \r\n                                switch(this._application[i].APPLICATION_DESC){\r\n                                    case \"PROGRAM BUDGET TEMPLATE\":\r\n                                    case \"ACTUALS COST PROCESSING\":\r\n                                        this._ppfcs_modules.push(this._application[i]);\r\n                                        break;\r\n                                    case \"PROGRAM PERSONNEL INFORMATION DATABASE\":\r\n                                    case \"PROGRAM PERSONNEL INFORMATION GROUP\":\r\n                                        this._ppi_modules.push(this._application[i]);\r\n                                        break;\r\n                                }\r\n                               // this._ppfcs_modules.push(this._application[i]);\r\n                            }\r\n                        }\r\n                        \r\n\r\n\r\n                        console.log(this._application);\r\n                        this._application.sort(OrderByNo);\r\n                        this.fnCheckAccess();\r\n                    });\r\n                }\r\n                else\r\n                {\r\n                    this._application = this._cache_obj._ACCESS.APPLICATION;\r\n\r\n                    for (var i = 0; i < this._application.length; i++) {\r\n                        for (var j = 0; j < this._application_desc.length; j++) {\r\n                            if (this._application_desc[j].ref == this._application[i].APPLICATION_DESC) {\r\n                                this._application[i].APPLICATION_DESC = this._application_desc[j].desc;\r\n                                this._application[i].ORDER_NO = this._application_desc[j].order_no;\r\n                            }else{\r\n                                var doesExist = this._application_desc.some((x)=>x.desc == this._application[i].APPLICATION_DESC);\r\n                                if(!doesExist){\r\n                                    this._application[i].ORDER_NO = 7;  \r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        if (this._remove.includes(this._application[i].APPLICATION_DESC)) {\r\n                            // this._ppfcs_modules.push(this._application[i]);\r\n                            switch(this._application[i].APPLICATION_DESC){\r\n                                    case \"PROGRAM BUDGET TEMPLATE\":\r\n                                    case \"ACTUALS COST PROCESSING\":\r\n                                        this._ppfcs_modules.push(this._application[i]);\r\n                                        break;\r\n                                    case \"PROGRAM PERSONNEL INFORMATION DATABASE\":\r\n                                    case \"PROGRAM PERSONNEL INFORMATION GROUP\":\r\n                                        this._ppi_modules.push(this._application[i]);\r\n                                        break;\r\n                                }\r\n                        }\r\n                    }\r\n\r\n\r\n                    console.log(this._application);\r\n                    this._application.sort(OrderByNo);\r\n\r\n                    this.fnCheckAccess();\r\n                }\r\n\r\n                //else if (this._cache_obj.USER.ROLE_CD.includes('HR'))\r\n                //{\r\n                //    //this.budgetAccess = true;\r\n                //    this.router.navigateToRoute('mainview');\r\n                //}\r\n                //else if (this._cache_obj.USER.ROLE_CD.includes('PPFCS')) {\r\n                //    this.router.navigateToRoute('actual_cost'); return;\r\n                //    //this.actualAccess = true;\r\n                //    this.headerVisible = true;\r\n                //}\r\n\r\n            }\r\n\r\n        }, 1000);\r\n\r\n\r\n        //if (this._cache_obj.OBSERVERS.loggedout.length==0)\r\n        //this._cache_obj.OBSERVERS.loggedout.push(() => {\r\n        //    this.logout();\r\n        //});\r\n\r\n        //if (this._cache_obj.OBSERVERS.loginPage.length == 0)\r\n        //    this._cache_obj.OBSERVERS.loginPage.push(() => {\r\n        //    //    alert(1);\r\n        //    this.fnLogin();\r\n        //});\r\n\r\n\r\n\r\n        //initializeBreeze().then(() => {\r\n        //    //have to set timeout because of IE, other templates are not loading\r\n        //    // quickly and loading at same time with functions\r\n        //    setTimeout(() => {\r\n\r\n        //        var varCheckUser = checkCookie(\"PPMS_USER\");\r\n        //      //  console.log(varCheckUser);\r\n        //        if (varCheckUser == \"\" || varCheckUser == undefined || varCheckUser.indexOf('undefined') >= 0 || varCheckUser.split('^')[0] == \"\") {\r\n        //           // alert(0);\r\n        //            this.fnLogin();\r\n        //            this.loginDisabled = false;\r\n        //            this.logoutDisabled = true;\r\n        //            return;\r\n        //        }\r\n\r\n        //        this.fnInitMasterfiles(0, \"\");\r\n\r\n\r\n        //    }, 2000);\r\n        //});\r\n\r\n\r\n\r\n\r\n        //this._cache_obj.OBSERVERS.logoutPage.push(() => {\r\n        //    this.logout();\r\n        //});\r\n\r\n\r\n    }\r\n\r\n    applicationClick(item)\r\n    {\r\n        // alert(item);\r\n        if (item.APPLICATION_DESC == 'PROGRAM PERSONNEL FREE CAPTURE SYSTEM')\r\n        {\r\n            this._roles= this._cache_obj._ACCESS.ROLES.filter((all) => all.APPLICATION_ID == item.APPLICATION_ID);\r\n            this._application_on = false;\r\n        }\r\n        else if(item.APPLICATION_DESC == \"PROGRAM PERSONNEL INFORMATION\"){\r\n            this._roles = this._cache_obj._ACCESS.ROLES.filter((all)=> all.APPLICATION_ID == item.APPLICATION_ID);\r\n            this._ppi_off = false;\r\n        }\r\n        else\r\n        {\r\n            // console.log(item.APPLICATION_URL.replace('.ASPX', ''));\r\n            this.router.navigateToRoute(item.APPLICATION_URL.replace('.ASPX','').toLowerCase());\r\n        }\r\n\r\n\r\n    }\r\n\r\n    rolesClick(item, group) {\r\n        //console.log(item.APPLICATION_URL);\r\n        if(group == \"PPFCS\"){\r\n            if (item.APPLICATION_URL == \"PROGRAMBUDGETTEMPLATE.ASPX\")\r\n            {\r\n                this.router.navigateToRoute('mainview');\r\n            }\r\n            else if (item.APPLICATION_URL == \"ACTUALSCOSTPROCESSING.ASPX\") {\r\n                this.router.navigateToRoute('actual_cost');\r\n            }\r\n        }else if(group == \"PPI\"){\r\n            if(item.APPLICATION_URL == \"PPID.ASPX\"){\r\n                this.router.navigateToRoute(\"ppid\");\r\n            }else if(item.APPLICATION_URL == \"PPID_GROUP.ASPX\"){\r\n                this.router.navigateToRoute(\"ppid_group\");\r\n            }\r\n        }\r\n    }\r\n\r\n    applicationOn()\r\n    {\r\n        this._application_on = true;\r\n        this._ppi_off = true;\r\n    }\r\n\r\n    fnCheckAccess()\r\n    {\r\n         \r\n        if (this._cache_obj._ACCESS.APPLICATION === undefined) return;\r\n        \r\n        var filterMenu = ['PROGRAM BUDGET TEMPLATE', 'ACTUALS COST PROCESSING', 'PROGRAM PERSONNEL INFORMATION'];\r\n\r\n        var varFound = this._cache_obj._ACCESS.APPLICATION.filter(all => filterMenu.includes(all.APPLICATION_DESC));\r\n        if (varFound.length == 1)\r\n        {\r\n            if (varFound[0].APPLICATION_DESC == 'PROGRAM BUDGET TEMPLATE')\r\n                this.router.navigateToRoute('mainview');\r\n            else if (varFound[0].APPLICATION_DESC == 'PROGRAM PERSONNEL INFORMATION')\r\n                this.router.navigateToRoute('mainpage');\r\n            else\r\n                this.router.navigateToRoute('actual_cost');\r\n        }\r\n        else\r\n        {\r\n            this.budgetAccess = true;\r\n            this.talentgroupAccess = true;\r\n            this.buhAccess = true;\r\n            this.actualAccess = true;\r\n            this.headerVisible = true;\r\n        }\r\n    }\r\n\r\n    navigateTo(title)\r\n    {\r\n        //console.log(title);\r\n        this.router.navigateToRoute(title);\r\n    }\r\n\r\n    //fnInitMasterfiles(initType, output) {\r\n\r\n    //    if (this.masterFilesLoaded == false) {\r\n\r\n    //        this._toastr = toastr;\r\n    //        toastr.clear();\r\n    //        toastr.info(\"Masterfiles...\", \"Loading please wait..\", { timeOut: 15000 });\r\n    //        this.loginDisabled = true;\r\n    //        loadMasterfiles().then(() => {\r\n    //            loadLookups().then(() => {\r\n\r\n    //                this._cache_obj.OBSERVERS.init_modal.forEach((all) => {\r\n    //                    all();\r\n    //                });\r\n\r\n\r\n\r\n    //                this.masterFilesLoaded = true;\r\n\r\n    //                this.fnPassUserObject(initType, output);\r\n\r\n    //            });\r\n    //        });\r\n    //    }\r\n    //    else {\r\n    //        this.fnPassUserObject(initType, output);\r\n    //    }\r\n\r\n    //}\r\n\r\n    //fnPassUserObject(initType, output) {\r\n    //  //  console.log(initType);\r\n    //    if (initType == 1) {\r\n\r\n\r\n    //    } else {\r\n    //        var varCookie = checkCookie(\"PPMS_USER\");\r\n    //       // console.log(varCookie)\r\n    //        var varSplitCookie = varCookie.split('^');\r\n    //        this._user = {\r\n    //            USER_ID: varSplitCookie[0],\r\n    //            COMPANY_ID: varSplitCookie[1],\r\n    //            Is_HR: varSplitCookie[2],\r\n    //            Is_Branch: varSplitCookie[3],\r\n    //            EMPLOYEE_ID: varSplitCookie[4],\r\n    //            HASH: varSplitCookie[5],\r\n    //            EMAIL_ADDRESS: varSplitCookie[6],\r\n    //        };\r\n\r\n    //        this._cache_obj.USER = this._user;\r\n    //        console.log(this._cache_obj.USER);\r\n    //        this._cache_obj.OBSERVERS.login_passed.forEach((all) => {\r\n    //            all(this._user);\r\n    //        });\r\n\r\n    //        this.loginDisabled = true;\r\n    //        this.logoutDisabled = false;\r\n    //        this.showingLogout = \"visible\";\r\n    //        toastr.clear();\r\n    //        toastr.success(\"Let's Start...\", \"Success\");\r\n    //        this.showMenus = true;\r\n    //        return;\r\n    //    }\r\n\r\n    //    this.LoginPassed(output);\r\n    //    this._cache_obj.OBSERVERS.login_passed.forEach((all) => {\r\n    //        all(output);\r\n    //    });\r\n    //}\r\n\r\n\r\n    //// @handle('login.passed')\r\n    //LoginPassed(user) {\r\n\r\n    //    this._user = user;\r\n    //   // console.log(user);\r\n    //    // total 6 hours\r\n    //    //setCookie(\"PPMS_USER\", user.USER_ID + \"^\" + user.COMPANY_ID + \"^\" + user.Is_HR + \"^\" + user.Is_Branch, 30);\r\n    //    setCookie(\"PPMS_USER\", user.USER_ID + \"^\" + user.COMPANY_ID + \"^\" + user.Is_HR + \"^\"\r\n    //        + user.Is_Branch + \"^\" + user.EMPLOYEE_ID + \"^\" + user.HASH + \"^\" + user.EMAIL_ADDRESS, 30);\r\n\r\n\r\n    //    toastr.clear();\r\n    //    toastr.success(\"Let's Start...\", \"Success\");\r\n\r\n    //    this.showMenus = true;\r\n    //    // this._cache_obj.OBSERVERS.close_modal.forEach((all) => {\r\n    //    //   all(this.modalLogin.id);\r\n    //    // });\r\n\r\n    //    this.loginDisabled = true;\r\n    //    this.logoutDisabled = false;\r\n    //    // this._cache_obj.OBSERVERS.enable_modal_button.forEach((all) => {\r\n    //    //   all(this.modalLogin.id, false);\r\n    //    // });\r\n\r\n\r\n    //    this.showingLogout = \"visible\";\r\n\r\n    //}\r\n\r\n    //logout() {\r\n    //    this.showMenus = false;\r\n\r\n    //    // this._cache_obj.OBSERVERS.open_modal.forEach((all) => {\r\n    //    //   all(this.modalLogin.id, true);\r\n    //    // });\r\n\r\n    //    this.fnLogin();\r\n    //    // this._cache_obj.OBSERVERS.enable_modal_button.forEach((all) => {\r\n    //    //   all(this.modalLogin.id, true);\r\n    //    // });\r\n\r\n    //    //this._cache_obj.OBSERVERS.loggedout.forEach((all) => {\r\n    //    //    all();\r\n    //    //});\r\n\r\n    //    this._cache_obj.OBSERVERS.clear_log.forEach((all) => {\r\n    //        all();\r\n    //    });\r\n\r\n    //    this._cache_obj.USER = {};\r\n    //    removeCookie();\r\n    //    this.showingLogout = \"hidden\";\r\n\r\n    //}\r\n\r\n\r\n    //fnLogin() {\r\n    //    this.showMenus = false;\r\n    //    this.dialogService.open({\r\n    //        viewModel: login\r\n    //    }).whenClosed(response => {\r\n    //        //response.closeResult((result) => {\r\n    //        //    console.log(result);\r\n    //        //});\r\n\r\n    //        if (!response.wasCancelled) {\r\n    //            this.fnInitMasterfiles(1, response.output);\r\n    //        } else {\r\n\r\n    //        }\r\n    //    });\r\n    //}\r\n}\r\n","import {\r\n  EntityManager,EntityQuery\r\n}\r\nfrom './entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport breeze from 'breeze-client';\r\n\r\nvar globalIndiv = null;\r\nvar talentSuppComp = null;\r\nvar talentSuppIndiv = null;\r\nvar globalAlias = null;\r\nvar globalCompany=[];\r\nvar globalGrp = null;\r\nvar jobMstr;\r\nvar jobGrp;\r\nvar category;\r\nvar lookups = null;\r\nvar reference;\r\nvar entityNames = {\r\n  //PROGRAM_MSTR: \"PROGRAM_MSTR\",\r\n  IO_CC_MSTR: \"IO_CC_MSTR\",\r\n  GLOBAL_INDIV_MSTR: \"GLOBAL_INDIV_MSTR\",\r\n  //GLOBAL_MSTR: \"GLOBAL_MSTR\",\r\n  GLOBAL_ALIAS_TRX: \"GLOBAL_ALIAS_TRX\",\r\n  GLOBAL_COMPANY_MSTR: \"GLOBAL_COMPANY_MSTR\",\r\n  COMPANY_MSTR: \"COMPANY_MSTR\",\r\n  DIVISION_MSTR: \"DIVISION_MSTR\",\r\n  JOB_GRP_MSTR: \"JOB_GRP_MSTR\",\r\n  JOB_MSTR: \"JOB_MSTR\",\r\n  LOCATION_MSTR: \"LOCATION_MSTR\",\r\n  CATEGORY_MSTR: \"CATEGORY_MSTR\",\r\n  REFERENCE_CD_MSTR: \"REFERENCE_CD_MSTR\",\r\n  USER_PROFILE_MSTR: \"USER_PROFILE_MSTR\",\r\n  USER_ROLE_TRX: \"USER_ROLE_TRX\",\r\n  BDGT_TMPL_HDR: \"BDGT_TMPL_HDR\",\r\n  GRP_INDIV_MSTR: \"GRP_INDIV_MSTR\",\r\n  GLOBAL_GRP_MSTR: \"GLOBAL_GRP_MSTR\",\r\n  TALENT_SUPPLIER_COMP_MSTR: \"TALENT_SUPPLIER_COMP_MSTR\",\r\n  TALENT_SUPPLIER_INDIV_MSTR: \"TALENT_SUPPLIER_INDIV_MSTR\",\r\n  PROGRAM_GENRE_MSTR: \"PROGRAM_GENRE_MSTR\",\r\n  TELECAST_MODE_MSTR: \"TELECAST_MODE_MSTR\",\r\n  EPISODE_MODE_MSTR: \"EPISODE_MODE_MSTR\",\r\n  EPISODE_TYPE_MSTR: \"EPISODE_TYPE_MSTR\",\r\n  MODULE_ACCESS_TRX: \"MODULE_ACCESS_TRX\"\r\n  // ,\r\n  // PROGRAM_USER_TRX: \"PROGRAM_USER_TRX\"\r\n};\r\n\r\nexport function loadMasterfiles() {\r\n  try {\r\n    // getAliasTrx().then((a)=>{\r\n    //   console.log(a);\r\n\r\n    // });\r\n   if(lookups!=null) {\r\n      return new Promise((resolve)=>{ return resolve(true); });\r\n   }\r\n\r\n\r\n    return Promise.all([\r\n//      getPrograms(),\r\n      getGlobalIndiv(),\r\n      getTalentSupplierComp(),\r\n      getTalentSupplierIndiv(),\r\n      getAliasTrx(),\r\n      getGlobalGrp(),\r\n\r\n      //getIOCC(),\r\n      //getGlobalMstr(),\r\n      getGlobalCompany(),\r\n      getCompany(),\r\n      getCategory(),\r\n      getDivision(),\r\n      getReference(),\r\n      getJobGroup(),\r\n      getJob(),\r\n      getLocation(),\r\n      getUsers(),\r\n      getUserTrx(),\r\n      getBdgtHdr(),\r\n      getGrpIndiv(),\r\n\r\n      getProgramGenre(),\r\n      getTelecastMode(),\r\n      getEpisodeMode(),\r\n      getEpisodeType()\r\n      //getProgramUser()\r\n      //getModuleAccess()\r\n      ]);\r\n  } catch (e) {\r\n    Promise.resolve(false);\r\n  }\r\n}\r\n\r\nexport function fnLoadIndiv(){\r\n    //globalIndiv = getLocalSelect('GLOBAL_INDIV_MSTR', 'LAST_NAME', 'GLOBAL_INDIV_ID, LAST_NAME, GIVEN_NAME, MIDDLE_NAME', true);\r\n    //talentSuppComp =  getLocalSelect('TALENT_SUPPLIER_COMP_MSTR', 'COMPANY_NAME', 'SUPPLIER_COMP_GLOBAL_ID, COMPANY_NAME', true);\r\n    //talentSuppIndiv = getLocalSelect('TALENT_SUPPLIER_INDIV_MSTR', 'LAST_NAME', 'TALENT_SUPPLIER_INDIV_ID, LAST_NAME, GIVEN_NAME, MIDDLE_NAME', true);\r\n    //globalAlias = getLocalSelect('GLOBAL_ALIAS_TRX', 'ALIAS_NAME','GLOBAL_ALIAS_ID, GLOBAL_ID, ALIAS_NAME', true);\r\n    //globalGrp = getLocalSelect('GLOBAL_GRP_MSTR','GROUP_NAME', 'GLOBAL_GRP_ID, GROUP_NAME', true);\r\n    //jobMstr = getLocalSelect('JOB_MSTR', 'JOB_ID','JOB_ID, JOB_GRP_ID, JOB_DESC', true);\r\n    //jobGrp = getLocalSelect('JOB_GRP_MSTR', 'JOB_GRP_ID','JOB_GRP_ID, JOB_GRP_CD, JOB_GRP_DESC, COMPANY_ID', true);\r\n    //category = getLocalSelect('CATEGORY_MSTR', 'CATEGORY_ID','CATEGORY_ID, CATEGORY_CD, CATEGORY_DESC, COMPANY_ID', true);\r\n    //reference = getLocal('REFERENCE_CD_MSTR', 'REF_DESC', true);\r\n}\r\n\r\nexport function loadLookups() {\r\n\r\n   if(lookups!=null) {\r\n      return new Promise((resolve)=>{ return resolve(true); });\r\n   }\r\n\r\n\r\n  fnLoadIndiv();\r\n\r\n  return new Promise((resolve, reject) => {\r\n\r\n\r\n    lookups = {\r\n      //PROGRAM_MSTR: getLocal('PROGRAM_MSTR', 'PROGRAM_TITLE', true),\r\n      //IO_CC_MSTR: getLocal('IO_CC_MSTR', 'IO_DESC', true),\r\n      GLOBAL_INDIV_MSTR: globalIndiv,\r\n      TALENT_SUPPLIER_COMP_MSTR: talentSuppComp,\r\n      TALENT_SUPPLIER_INDIV_MSTR: talentSuppIndiv,\r\n      //GLOBAL_MSTR: getLocal('GLOBAL_MSTR', 'GLOBAL_ID', true),\r\n      GLOBAL_ALIAS_TRX: globalAlias,\r\n      GLOBAL_INDIV_WITH_ALIAS: getGLOBALINDIVandALIAS(),\r\n      JOB_GRP_CATEGORY: getJOB_GRP_CATEGORY(),\r\n      GLOBAL_COMPANY_MSTR: globalCompany,\r\n      COMPANY_MSTR: getLocal('COMPANY_MSTR', 'COMPANY_ID', true),\r\n      DIVISION_MSTR: getLocal('DIVISION_MSTR', 'DIVISION_NAME', true),\r\n      JOB_GRP_MSTR: jobGrp,\r\n      JOB_MSTR: jobMstr,\r\n      LOCATION_MSTR: getLocal('LOCATION_MSTR', 'LOCATION_DESC', true),\r\n      CATEGORY_MSTR: category,\r\n      REFERENCE_CD_MSTR: reference,\r\n      USER_PROFILE_MSTR: getLocal('USER_PROFILE_MSTR', 'USER_ID', true),\r\n      USER_ROLE_TRX: getLocal('USER_ROLE_TRX', 'USER_ID', true),\r\n      BDGT_TMPL_HDR: getLocal('BDGT_TMPL_HDR', 'BDGT_TMPL_ID', true),\r\n      GRP_INDIV_MSTR: getLocal('GRP_INDIV_MSTR', 'GRP_INDIV_ID', true),\r\n      GLOBAL_GRP_MSTR: globalGrp,//getLocal('GLOBAL_GRP_MSTR', 'GROUP_NAME', true),\r\n      PROGRAM_GENRE_MSTR: getLocal('PROGRAM_GENRE_MSTR', 'PROGRAM_GENRE_CD', true),\r\n      TELECAST_MODE_MSTR: getLocal('TELECAST_MODE_MSTR', 'TELECAST_MODE_CD', true),\r\n      EPISODE_MODE_MSTR: getLocal('EPISODE_MODE_MSTR', 'EPISODE_MODE_CD', true),\r\n      EPISODE_TYPE_MSTR: getLocal('EPISODE_TYPE_MSTR', 'EPISODE_TYPE_CD', true),\r\n      //PROGRAM_USER_TRX: getLocal('PROGRAM_USER_TRX', 'USER_ID', true),\r\n      PAYMENT_TERM: getPaymentTerm(),\r\n\r\n      //MODULE_ACCESS_TRX: getLocal('MODULE_ACCESS_TRX', 'MODULE_ACCESS_ID',true)\r\n\r\n    };\r\n\r\n    //Insert dummy Budget Header\r\n    var unchanged = breeze.EntityState.Unchanged;\r\n    var initialValues = {\r\n        'BDGT_TMPL_ID': 0,\r\n      };\r\n    EntityManager().createEntity(\"BDGT_TMPL_HDR\", initialValues, unchanged);\r\n\r\n    resolve(true);\r\n\r\n  });\r\n\r\n}\r\n\r\nexport function getJobByGlobalCompany(val)\r\n{\r\n\r\n        var varCheck = globalCompany.find((all) => all.GLOBAL_ID == val);\r\n        var varJob = {\r\n          JOB_ID: \"\",\r\n          JOB_DESC: \"\"\r\n        };\r\n\r\n        if (varCheck !== undefined) {\r\n\r\n          varJob.JOB_ID = varCheck.JOB_ID;\r\n\r\n          var varJOB_p = jobMstr.find((all) => all.JOB_ID == varJob.JOB_ID);\r\n\r\n          varJob.JOB_DESC = varJOB_p.JOB_DESC;\r\n\r\n          var varGrpCategory = getJOB_GRP_CATEGORY().find((all) => all.JOB_GRP_ID == varJOB_p.JOB_GRP_ID);\r\n          varJob.CATEGORY_ID = varGrpCategory.CATEGORY_ID;\r\n          varJob.CATEGORY_DESC = varGrpCategory.CATEGORY_DESC;\r\n          varJob.COMPANY_ID = varGrpCategory.COMPANY_ID;\r\n\r\n        }\r\n\r\n        return varJob;\r\n\r\n}\r\n\r\nexport function getJobByName(val)\r\n{\r\n\r\n        var varJOB_p = jobMstr.find((all) => all.JOB_DESC == val);\r\n\r\n        var varJob = {\r\n          JOB_ID: \"\",\r\n          JOB_DESC: \"\"\r\n        };\r\n\r\n        if (varJOB_p !== undefined) {\r\n\r\n          varJob.JOB_ID = varJOB_p.JOB_ID;\r\n\r\n          varJob.JOB_DESC = varJOB_p.JOB_DESC;\r\n\r\n          var varGrpCategory = getJOB_GRP_CATEGORY().find((all) => all.JOB_GRP_ID == varJOB_p.JOB_GRP_ID);\r\n          varJob.CATEGORY_ID = varGrpCategory.CATEGORY_ID;\r\n          varJob.CATEGORY_DESC = varGrpCategory.CATEGORY_DESC;\r\n          varJob.COMPANY_ID = varGrpCategory.COMPANY_ID;\r\n\r\n        }\r\n\r\n        return varJob;\r\n\r\n}\r\n\r\nexport function getLookups() {\r\n  return lookups;\r\n}\r\n\r\n// export function getPrograms() {\r\n//   var query = EntityQuery().from('PROGRAM_MSTR')\r\n//   return EntityManager().executeQuery(query).then(function() {\r\n//     processLookups(entityNames.PROGRAM_MSTR, {\r\n//       'PROGRAM_ID': 0, //breeze.core.getUuid()\r\n//       'PROGRAM_TITLE': ' [SELECT A VALUE]'\r\n//     });\r\n//   }, queryFailed);\r\n\r\n\r\n//   /*return EntityQuery().from('PROGRAM_MSTR')\r\n//     .using(EntityManager()).execute()\r\n//     .then(\r\n//       function() {\r\n//         processLookups(entityNames.PROGRAM_MSTR, {\r\n//           'PROGRAM_ID': 0, //breeze.core.getUuid()\r\n//           'PROGRAM_TITLE': '[SELECT A VALUE]'\r\n//         });\r\n//       }, queryFailed);*/\r\n// }\r\n\r\nexport function getPaymentTerm(){\r\n  var paymentterm=[];\r\n  reference.forEach((ref) => {\r\n          if (ref.REF_GRP_CD == 'PYMNT_TERM_CD') {\r\n            paymentterm.push(ref);\r\n          }\r\n        });\r\n  return paymentterm;\r\n}\r\n\r\n\r\nexport function getGLOBALINDIVandALIAS(){\r\n\r\n  var varTmpObject=[];\r\n  var varGlobalAlias = globalAlias;\r\n  var varGlobalIndiv = globalIndiv ;\r\n  var varTalentComp = talentSuppComp;\r\n  var varTalentSuppIndiv = talentSuppIndiv;\r\n  var varGlobalGrp = globalGrp;\r\n\r\n\r\n  varGlobalIndiv.forEach((all) => {\r\n\r\n    var varAliases=[];\r\n    var varAlias = \"\";\r\n\r\n    if (all.ALIAS != \"\" && all.ALIAS != null) {\r\n      varAlias = \" (\" + all.ALIAS;\r\n      varAliases.push(all.ALIAS.toUpperCase());\r\n    }\r\n\r\n    var varFoundAlias=varGlobalAlias.filter(item=>item.GLOBAL_ID==all.GLOBAL_INDIV_ID);\r\n\r\n    if(varFoundAlias.length>0)\r\n        varFoundAlias.forEach((alias)=>{\r\n\r\n        if (varAlias == \"\")\r\n        varAlias = \" (\" + alias.ALIAS_NAME;\r\n        else if (varAlias == \"(\")\r\n          varAlias = alias.ALIAS_NAME;\r\n        else\r\n          varAlias += \",\" + alias.ALIAS_NAME;\r\n\r\n          varAliases.push(alias.ALIAS_NAME.toUpperCase());\r\n\r\n        });\r\n\r\n        if (varAlias != \"\") {\r\n          varAlias += \")\";\r\n        }\r\n\r\n    varTmpObject.push({\r\n      PERSONNEL_NAME: ((all.LAST_NAME + ', ' + all.GIVEN_NAME + ' ' + all.MIDDLE_NAME).trim().toUpperCase()), // + varAlias).toUpperCase(),\r\n      GLOBAL_INDIV_ID: all.GLOBAL_INDIV_ID,\r\n      PERSONNEL_INFO_SRC: 'INDIV',\r\n      ALIASES: varAliases,\r\n      LAST_NAME: all.LAST_NAME,\r\n      GIVEN_NAME: all.GIVEN_NAME,\r\n      MIDDLE_NAME: all.MIDDLE_NAME\r\n    });\r\n\r\n  });\r\n\r\n\r\n  varTalentSuppIndiv.forEach((all) => {\r\n\r\n    var varAlias = \"\";\r\n    var varAliases=[];\r\n    if (all.ALIAS != \"\" && all.ALIAS != null) {\r\n      varAlias = \" (\" + all.ALIAS;\r\n      varAliases.push(all.ALIAS.toUpperCase());\r\n    }\r\n\r\n   var varFoundAlias=varGlobalAlias.filter(item=>item.GLOBAL_ID==all.SUPPLIER_INDIV_GLOBAL_ID);\r\n\r\n    if(varFoundAlias.length>0)\r\n        varFoundAlias.forEach((alias)=>{\r\n        if (varAlias == \"\")\r\n        varAlias = \" (\" + alias.ALIAS_NAME;\r\n        else if (varAlias == \"(\")\r\n          varAlias = alias.ALIAS_NAME;\r\n        else\r\n          varAlias += \",\" + alias.ALIAS_NAME;\r\n\r\n         varAliases.push(alias.ALIAS_NAME.toUpperCase());\r\n    });\r\n\r\n        if (varAlias != \"\") {\r\n          varAlias += \")\";\r\n        }\r\n\r\n\r\n    varTmpObject.push({\r\n      PERSONNEL_NAME: ((all.LAST_NAME + ', ' + all.GIVEN_NAME + ' ' + all.MIDDLE_NAME).trim().toUpperCase()), // + varAlias).toUpperCase(),\r\n      GLOBAL_INDIV_ID: all.SUPPLIER_INDIV_GLOBAL_ID,\r\n      PERSONNEL_INFO_SRC: 'TSUPPLIER',\r\n      ALIASES: varAliases,\r\n      LAST_NAME: all.LAST_NAME,\r\n      GIVEN_NAME: all.GIVEN_NAME,\r\n      MIDDLE_NAME: all.GIVEN_NAME\r\n    });\r\n\r\n  });\r\n\r\n\r\n  varTalentComp.forEach((all) => {\r\n    varTmpObject.push({\r\n      PERSONNEL_NAME: all.COMPANY_NAME.toUpperCase(),\r\n      GLOBAL_INDIV_ID: all.SUPPLIER_COMP_GLOBAL_ID,\r\n      PERSONNEL_INFO_SRC: 'TCOMP',\r\n      ALIASES:[],\r\n      LAST_NAME: '',\r\n      GIVEN_NAME: '',\r\n      MIDDLE_NAME: ''\r\n    });\r\n\r\n  });\r\n\r\n\r\n varGlobalGrp.forEach((all) => {\r\n    varTmpObject.push({\r\n      PERSONNEL_NAME: all.GROUP_NAME.toUpperCase(),\r\n      GLOBAL_INDIV_ID: all.GLOBAL_GRP_ID,\r\n      PERSONNEL_INFO_SRC: 'GLGRP',\r\n      ALIASES:[],\r\n      LAST_NAME: '',\r\n      GIVEN_NAME: '',\r\n      MIDDLE_NAME: ''\r\n    });\r\n\r\n  });\r\n\r\n\r\n\r\n      return varTmpObject;\r\n\r\n}\r\n\r\n\r\n\r\nexport function getJOB_GRP_CATEGORY(){\r\n\r\n  var varTmpObject=[];\r\n  var p_jobMstr = jobMstr;\r\n  var p_jobGrp = jobGrp;\r\n  var p_category = category;\r\n\r\n  // console.log(p_jobMstr);\r\n  // console.log(p_jobGrp);\r\n\r\n  p_jobMstr.forEach((all) => {\r\n    //console.log(all);\r\n    var varFindGrp = p_jobGrp.find((allGrp)=>allGrp.JOB_GRP_ID==all.JOB_GRP_ID);\r\n    // console.log(varFindGrp);\r\n    varTmpObject.push({\r\n      JOB_ID: all.JOB_ID,\r\n      JOB_GRP_ID: varFindGrp.JOB_GRP_ID,\r\n      JOB_GRP_CD: varFindGrp.JOB_GRP_CD,\r\n      JOB_GRP_DESC: (varFindGrp!==undefined?varFindGrp.JOB_GRP_DESC:\"\"),\r\n      CATEGORY_ID: \"\",\r\n      CATEGORY_CD: \"\",\r\n      CATEGORY_DESC: \"\",\r\n      COMPANY_ID: varFindGrp.COMPANY_ID,\r\n      JOB_DESC: all.JOB_DESC\r\n    });\r\n\r\n  });\r\n\r\n\r\n  varTmpObject.forEach((all) => {\r\n\r\n      var varFindCategory = p_category.find((allCategory) => allCategory.CATEGORY_CD == all.JOB_GRP_CD && allCategory.COMPANY_ID == all.COMPANY_ID);\r\n      //console.log(varFindCategory);\r\n    if (varFindCategory !== undefined) {\r\n      all.CATEGORY_CD = varFindCategory.CATEGORY_CD;\r\n      all.CATEGORY_ID = varFindCategory.CATEGORY_ID;\r\n      all.CATEGORY_DESC = varFindCategory.CATEGORY_DESC;\r\n    }\r\n\r\n  });\r\n\r\n      return varTmpObject;\r\n\r\n}\r\n\r\n// export function getModuleAccess() {\r\n//   return EntityQuery().from('MODULE_ACCESS_TRX').expand(\"MODULE_MSTR\")\r\n//     .using(EntityManager()).execute()\r\n//     .then(\r\n//       ()=>{\r\n\r\n//       }, queryFailed);\r\n// }\r\n\r\n\r\nexport function getProgramGenre() {\r\n  return EntityQuery().from('PROGRAM_GENRE_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      ()=>{}, queryFailed);\r\n}\r\n\r\nexport function getTelecastMode() {\r\n  return EntityQuery().from('TELECAST_MODE_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      ()=>{}, queryFailed);\r\n}\r\n\r\nexport function getEpisodeMode() {\r\n  return EntityQuery().from('EPISODE_MODE_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      ()=>{}, queryFailed);\r\n}\r\n\r\nexport function getEpisodeType() {\r\n  return EntityQuery().from('EPISODE_TYPE_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      ()=>{}, queryFailed);\r\n}\r\n\r\n\r\n// export function getProgramUser() {\r\n//   return EntityQuery().from('PROGRAM_USER_TRX')\r\n//     .using(EntityManager()).execute()\r\n//     .then(\r\n//       ()=>{}, queryFailed);\r\n// }\r\n\r\n\r\n\r\nexport function getTalentSupplierComp() {\r\n  // return EntityQuery().from('TALENT_SUPPLIER_COMP_MSTR').select('TALENT_SUPPLIER_COMP_MSTR', 'COMPANY_NAME', 'SUPPLIER_COMP_GLOBAL_ID, COMPANY_NAME')\r\n  //   .using(EntityManager()).execute()\r\n  //   .then(\r\n  //     ()=>{}, queryFailed);\r\n\r\n    // var _query = EntityQuery().from('TALENT_SUPPLIER_COMP_MSTR').select('TALENT_SUPPLIER_COMP_MSTR', 'COMPANY_NAME', 'SUPPLIER_COMP_GLOBAL_ID, COMPANY_NAME');\r\n    //   EntityManager().executeQuery(_query).then((success) => {\r\n    //       console.log(success);\r\n    //   });\r\n\r\n     return new Promise((resolve)=>{\r\n      EntityQuery().from('TALENT_SUPPLIER_COMP_MSTR').select('COMPANY_NAME, SUPPLIER_COMP_GLOBAL_ID, COMPANY_NAME')\r\n     .using(EntityManager()).execute()\r\n     .then((success)=>{\r\n      talentSuppComp = success.results;\r\n      resolve(true);\r\n    });\r\n\r\n   });\r\n\r\n}\r\n\r\n\r\nexport function getTalentSupplierIndiv() {\r\n  // return EntityQuery().from('TALENT_SUPPLIER_INDIV_MSTR')\r\n  //   .using(EntityManager()).execute()\r\n  //   .then(\r\n  //     ()=>{}, queryFailed);\r\n  //\r\n\r\n\r\n    return new Promise((resolve)=>{\r\n      EntityQuery().from('TALENT_SUPPLIER_INDIV_MSTR').select('LAST_NAME, TALENT_SUPPLIER_INDIV_ID, LAST_NAME, GIVEN_NAME, MIDDLE_NAME')\r\n     .using(EntityManager()).execute()\r\n     .then((success)=>{\r\n      talentSuppIndiv = success.results;\r\n      resolve(true);\r\n    });\r\n\r\n   });\r\n\r\n}\r\n\r\n\r\n\r\nexport function getGlobalGrp() {\r\n\r\n  // return EntityQuery().from('GLOBAL_GRP_MSTR').select('GLOBAL_GRP_ID, GROUP_NAME')\r\n  //   .using(EntityManager()).execute()\r\n  //   .then(\r\n  //     ()=>{}, queryFailed);\r\n   return new Promise((resolve)=>{\r\n      EntityQuery().from('GLOBAL_GRP_MSTR').select('GLOBAL_GRP_ID, GROUP_NAME')\r\n     .using(EntityManager()).execute()\r\n     .then((success)=>{\r\n      globalGrp = success.results;\r\n      resolve(true);\r\n    });\r\n\r\n   });\r\n}\r\n\r\n\r\nexport function getGrpIndiv() {\r\n  return EntityQuery().from('GRP_INDIV_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      ()=>{}, queryFailed);\r\n}\r\n\r\n\r\nexport function getBdgtHdr() {\r\n  return EntityQuery().from('BDGT_TMPL_HDR').take(1)\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      ()=>{}, queryFailed);\r\n}\r\n\r\nexport function getIOCC() {\r\n  return EntityQuery().from('IO_CC_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      function() {\r\n        processLookups(entityNames.IO_CC_MSTR, {\r\n          'CHARGE_CD': breeze.core.getUuid(),\r\n          'IO_DESC': '[SELECT A VALUE]'\r\n        });\r\n\r\n      }, queryFailed);\r\n}\r\n\r\nexport function getGlobalIndiv() {\r\n return new Promise((resolve)=>{\r\n   EntityQuery().from('GLOBAL_INDIV_MSTR').select('GLOBAL_INDIV_ID,GIVEN_NAME,MIDDLE_NAME,LAST_NAME')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    globalIndiv = success.results;\r\n    resolve(true);\r\n  });\r\n\r\n });\r\n\r\n}\r\n\r\n// export function getGlobalMstr() {\r\n//   return EntityQuery().from('GLOBAL_MSTR')\r\n//     .using(EntityManager()).execute();\r\n// }\r\nexport function getAliasTrx() {\r\n  // return EntityQuery().from('GLOBAL_ALIAS_TRX')\r\n  //   .using(EntityManager()).execute();\r\n\r\n  //globalAlias\r\n//'GLOBAL_GRP_MSTR','GROUP_NAME', 'GLOBAL_GRP_ID, GROUP_NAME'\r\n\r\nreturn new Promise((resolve)=>{\r\n   EntityQuery().from('GLOBAL_ALIAS_TRX').select('GLOBAL_ALIAS_ID,ALIAS_NAME,GLOBAL_ID')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    globalAlias = success.results;\r\n    resolve(true);\r\n  });\r\n\r\n });\r\n\r\n}\r\nexport function getGlobalCompany() {\r\n\r\nreturn new Promise((resolve)=>{\r\n   EntityQuery().from('GLOBAL_COMPANY_MSTR').select('GLOBAL_COMPANY_ID, GLOBAL_ID, JOB_ID, COMPANY_ID, STATUS_CD')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    globalCompany = success.results;\r\n    resolve(true);\r\n  });\r\n\r\n });\r\n\r\n  // return EntityQuery().from('GLOBAL_COMPANY_MSTR').select('GLOBAL_COMPANY_ID, GLOBAL_ID, JOB_ID, COMPANY_ID')\r\n  //   .using(EntityManager()).execute();\r\n}\r\nexport function getCompany() {\r\n  var query = EntityQuery().from('COMPANY_MSTR')\r\n  return EntityManager().executeQuery(query).then(function() {\r\n    processLookups(entityNames.COMPANY_MSTR, {\r\n      'COMPANY_ID': 0, //breeze.core.getUuid()\r\n      'COMPANY_NAME': ' [SELECT A VALUE]'\r\n    });\r\n  }, queryFailed);\r\n\r\n\r\n  /*return EntityQuery().from('PROGRAM_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      function() {\r\n        processLookups(entityNames.PROGRAM_MSTR, {\r\n          'PROGRAM_ID': 0, //breeze.core.getUuid()\r\n          'PROGRAM_TITLE': '[SELECT A VALUE]'\r\n        });\r\n      }, queryFailed);*/\r\n}\r\nexport function getCategory() {\r\n\r\n  // var query = EntityQuery().from('CATEGORY_MSTR')\r\n  // return EntityManager().executeQuery(query).then(function() {\r\n  //   processLookups(entityNames.CATEGORY_MSTR, {\r\n  //     'CATEGORY_ID': 0, //breeze.core.getUuid()\r\n  //     'CATEGORY_DESC': ' [SELECT A VALUE]'\r\n  //   });\r\n  // }, queryFailed);\r\n\r\n\r\nreturn new Promise((resolve)=>{\r\n   EntityQuery().from('CATEGORY_MSTR')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    category = success.results;\r\n    category.push({ 'CATEGORY_ID': 0,\r\n    'CATEGORY_DESC': ' [SELECT A VALUE]'});\r\n    resolve(true);\r\n  });\r\n\r\n });\r\n\r\n}\r\nexport function getDivision() {\r\n  var query = EntityQuery().from('DIVISION_MSTR');//.select('DIVISION_ID,DIVISION_CD,DIVISION_NAME')\r\n  return EntityManager().executeQuery(query).then(function() {\r\n    processLookups(entityNames.DIVISION_MSTR, {\r\n      'DIVISION_ID': 0, //breeze.core.getUuid()\r\n      'DIVISION_NAME': ' [SELECT A VALUE]'\r\n    });\r\n  }, queryFailed);\r\n}\r\nexport function getReference() {\r\n\r\n  // var query = EntityQuery().from('REFERENCE_CD_MSTR');//.select('REF_CD,REF_GRP_CD,REF_DESC')\r\n  // return EntityManager().executeQuery(query).then(function() {\r\n  //   processLookups(entityNames.REFERENCE_CD_MSTR, {\r\n  //     'REF_CD': breeze.core.getUuid(),\r\n  //     'REF_DESC': ' [SELECT A VALUE]',\r\n  //     'REF_GRP_CD': breeze.core.getUuid()\r\n  //   });\r\n  // }, queryFailed);\r\n\r\n\r\n\r\n    return new Promise((resolve)=>{\r\n   EntityQuery().from('REFERENCE_CD_MSTR').select('REF_CD,REF_GRP_CD,REF_DESC')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    reference = success.results;\r\n   // jobGrp.push({ 'REF_CD': breeze.core.getUuid(), 'REF_DESC':' [SELECT A VALUE]','REF_GRP_CD':breeze.core.getUuid()});\r\n    resolve(true);\r\n  });\r\n});\r\n\r\n\r\n}\r\nexport function getJobGroup() {\r\n  // var query = EntityQuery().from('JOB_GRP_MSTR');//.select('JOB_GRP_ID, JOB_GRP_CD, JOB_GRP_DESC');\r\n  // return EntityManager().executeQuery(query).then(function() {\r\n  //   processLookups(entityNames.JOB_GRP_MSTR, {\r\n  //     'JOB_GRP_ID': 0, //breeze.core.getUuid()\r\n  //     'JOB_GRP_DESC': ' [SELECT A VALUE]'\r\n  //   });\r\n  // }, queryFailed);\r\n\r\n    return new Promise((resolve)=>{\r\n   EntityQuery().from('JOB_GRP_MSTR').select('JOB_GRP_ID, JOB_GRP_CD, JOB_GRP_DESC, COMPANY_ID')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    jobGrp = success.results;\r\n    //jobGrp.push({ 'JOB_GRP_ID': 0, 'JOB_GRP_DESC':' [SELECT A VALUE]'});\r\n    resolve(true);\r\n  });\r\n});\r\n}\r\n\r\nexport function getJob() {\r\n\r\n  return new Promise((resolve)=>{\r\n   EntityQuery().from('JOB_MSTR').select('JOB_ID, JOB_GRP_ID, JOB_DESC')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    jobMstr = success.results;\r\n    //jobMstr.push({ 'JOB_ID': 0, 'JOB_DESC':' [SELECT A VALUE]'});\r\n    resolve(true);\r\n  });\r\n\r\n });\r\n\r\n  // var query = EntityQuery().from('JOB_MSTR');//.select('JOB_ID, JOB_GRP_ID, JOB_DESC');\r\n  // return EntityManager().executeQuery(query).then(function(success) {\r\n\r\n  //     //EntityManager().createEntity(entityNames.JOB_MSTR, {},null);\r\n  //  // console.log(success);\r\n  //   // processLookups(entityNames.JOB_MSTR, {\r\n  //   //   'JOB_ID': 0, //breeze.core.getUuid()\r\n  //   //   'JOB_DESC': ' [SELECT A VALUE]'\r\n  //   // });\r\n  // }, queryFailed);\r\n\r\n\r\n}\r\nexport function getLocation() {\r\n  var query = EntityQuery().from('LOCATION_MSTR')\r\n  return EntityManager().executeQuery(query).then(function() {\r\n    processLookups(entityNames.LOCATION_MSTR, {\r\n      'LOCATION_CD': breeze.core.getUuid(),\r\n      'LOCATION_DESC': ' [SELECT A VALUE]'\r\n    });\r\n  }, queryFailed);\r\n}\r\n\r\nexport function getUsers() {\r\n  var query = EntityQuery().from('USER_PROFILE_MSTR');//.select('USER_ID,COMPANY_ID,EMPLOYEE_ID')\r\n  return EntityManager().executeQuery(query).then(function() {\r\n    processLookups(entityNames.USER_PROFILE_MSTR, {\r\n      'USER_ID': '[SELECT A USER]'\r\n    });\r\n  }, queryFailed);\r\n}\r\n\r\n\r\nexport function getUserTrx() {\r\n  var query = EntityQuery().from('USER_ROLE_TRX')\r\n  return EntityManager().executeQuery(query).then(function() {\r\n    processLookups(entityNames.USER_ROLE_TRX, {\r\n      'USER_ID': ''\r\n    });\r\n  }, queryFailed);\r\n}\r\n\r\nfunction getLocalSelect(resource, ordering, select, includeNullos) {\r\n\r\n  var query = EntityQuery().from(resource).select(select).orderBy(ordering); //.using(breeze.FetchStrategy.FromLocalCache);\r\n\r\n  return EntityManager().executeQueryLocally(query);\r\n}\r\n\r\n\r\nfunction getLocal(resource, ordering, includeNullos) {\r\n\r\n  var query = EntityQuery().from(resource).orderBy(ordering); //.using(breeze.FetchStrategy.FromLocalCache);\r\n\r\n  return EntityManager().executeQueryLocally(query);\r\n}\r\n\r\nfunction processLookups(objName, blankValue) {\r\n  //you commented it to remove inserting initial value on index 0\r\n  createNullos(EntityManager(), objName, blankValue);\r\n}\r\n\r\nfunction createNullos(manager, objName, blankValue) {\r\n\r\n  var unchanged = breeze.EntityState.Unchanged;\r\n\r\n  createNullo(manager, objName, blankValue, unchanged);\r\n\r\n}\r\n\r\nfunction createNullo(manager, entityName, values, unchanged) {\r\n  var initialValues = values || {}; //nAME: ' [ SELECT A VALUE]'\r\n  return manager.createEntity(entityName, initialValues, unchanged);\r\n\r\n}\r\n\r\nfunction queryFailed(jqXHR, textStatus) {\r\n  var msg = 'Error retrieving data ' + textStatus;\r\n  toastr.error(msg, \"Exception occured..\")\r\n\r\n  // loggerToastProvider.logError(msg, jqXHR, system.getModuleId, datacontext);\r\n}\r\n","import {ObserverLocator} from 'aurelia-framework'; // or 'aurelia-binding'\r\n\r\nexport class MultiObserver {  \r\n    static inject() { return [ObserverLocator]; }\r\n    constructor(observerLocator) {\r\n        this.observerLocator = observerLocator;\r\n    }\r\n\r\n    observe(properties, callback) {\r\n        var subscriptions = [],\r\n            i = properties.length,\r\n            object, propertyName;\r\n\r\n        while (i--) {\r\n            object = properties[i][0];\r\n            propertyName = properties[i][1];\r\n\r\n            subscriptions.push(this.observerLocator.getObserver(object, propertyName).subscribe(callback));\r\n        }\r\n\r\n        // return dispose function\r\n        return () => {\r\n            while (subscriptions.length) {\r\n                subscriptions.pop();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}","import {bindable} from 'aurelia-framework';\r\nimport { cache_obj } from 'cache_obj';\r\nimport { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\nimport { checkCookie, setCookie, removeCookie, getCookie } from './helpers';\r\nimport { initializeBreeze } from './entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport { login } from 'modals/login';\r\nimport { change_password } from 'modals/change_password';\r\nimport { DialogService } from 'aurelia-dialog';\r\nimport { loadMasterfiles, loadTables, loadLookups, getLookups } from './masterfiles';\r\nimport settings from './settings';\r\nimport breeze from 'breeze-client';\r\n\r\n@inject(cache_obj, Router, DialogService)\r\nexport class NavBar {\r\n    @bindable router = null;\r\n    _cache_obj;\r\n    router;\r\n    masterFilesLoaded = false;\r\n    constructor(cache_obj, Router, DialogService)\r\n    {\r\n        this.router = Router;\r\n        this._cache_obj = cache_obj;\r\n\r\n        this.dialogService = DialogService;\r\n        this.settings = settings;\r\n\r\n        //initializeBreeze().then(() => {\r\n        //    //have to set timeout because of IE, other templates are not loading\r\n        //    // quickly and loading at same time with functions\r\n        //    setTimeout(() => {\r\n\r\n        //        var varCheckUser = checkCookie(\"PPMS_USER\");\r\n\r\n        //        if (this.router.currentInstruction.config.name != \"mainpage\" && (varCheckUser == \"\" || varCheckUser == undefined || varCheckUser.indexOf('undefined') >= 0 || varCheckUser.split('^')[0] == \"\")) {\r\n        //            this.router.navigateToRoute('mainpage');\r\n        //        }\r\n        //        else {\r\n        //            var varCookie = checkCookie(\"PPMS_USER\");\r\n        //            var varSplitCookie = varCookie.split('^');\r\n        //            var _user = {\r\n        //                USER_ID: varSplitCookie[0],\r\n        //                COMPANY_ID: varSplitCookie[1],\r\n        //                Is_HR: varSplitCookie[2],\r\n        //                Is_Branch: varSplitCookie[3],\r\n        //                EMPLOYEE_ID: varSplitCookie[4],\r\n        //                HASH: varSplitCookie[5],\r\n        //                EMAIL_ADDRESS: varSplitCookie[6],\r\n        //            };\r\n\r\n        //            this._cache_obj.USER = _user;\r\n        //        }\r\n\r\n        //    }, 2000);\r\n        //});\r\n\r\n\r\n  var oldClient = OData.defaultHttpClient;\r\n\r\n    var myClient = {\r\n         request:  (request, success, error)=> {\r\n\r\n             if(this._cache_obj!=undefined)\r\n             if(this._cache_obj.USER!=undefined)\r\n             request.headers.Authorization = \"Basic \"+btoa(this._cache_obj.USER.USER_ID+':'+this._cache_obj.USER.HASH);\r\n             return oldClient.request(request, success, error);\r\n         }\r\n    };\r\n\r\n    OData.defaultHttpClient = myClient;\r\n\r\n       initializeBreeze().then(() => {\r\n            //have to set timeout because of IE, other templates are not loading\r\n            // quickly and loading at same time with functions\r\n            setTimeout(() => {\r\n                this.router.navigateToRoute('blankpage');\r\n                var varCheckUser = checkCookie(\"PPMS_USER\");\r\n                //console.log(varCheckUser);\r\n                //this.router.currentInstruction.config.name != \"blankpage\" &&\r\n                if ((varCheckUser == \"\" || varCheckUser == undefined || varCheckUser.indexOf('undefined') >= 0 || varCheckUser.split('^')[0] == \"\")) {\r\n                    this.fnLogin();\r\n                    return;\r\n                }\r\n                else {\r\n                    var varCookie = checkCookie(\"PPMS_USER\");\r\n                    var varSplitCookie = varCookie.split('^');\r\n                    var _user = {\r\n                        USER_ID: varSplitCookie[0],\r\n                        COMPANY_ID: varSplitCookie[1],\r\n                        Is_HR: varSplitCookie[2],\r\n                        Is_Branch: varSplitCookie[3],\r\n                        EMPLOYEE_ID: varSplitCookie[4],\r\n                        HASH: varSplitCookie[5],\r\n                        EMAIL_ADDRESS: varSplitCookie[6],\r\n                        LEVEL_NO: varSplitCookie[7]\r\n                    };\r\n\r\n                    this._cache_obj.USER = _user;\r\n\r\n\r\n                    // var oldClient = OData.defaultHttpClient;\r\n\r\n\r\n                    // var newClient = {\r\n                    //      request: function (request, success, error) {\r\n                    //          request.headers.Authorization = \"Basic \"+btoa(varSplitCookie[0]+':'+varSplitCookie[5]);\r\n                    //          return oldClient.request(request, success, error);\r\n                    //      }\r\n                    // };\r\n\r\n                    // OData.defaultHttpClient = newClient;\r\n\r\n                }\r\n\r\n                this.fnInitMasterfiles(0, \"\");\r\n\r\n\r\n            }, 2000);\r\n        });\r\n\r\n    }\r\n\r\n    fnInitMasterfiles(initType, output) {\r\n\r\n        if (this.masterFilesLoaded == false) {\r\n            settings.isNavigating = true;\r\n            this._toastr = toastr;\r\n            toastr.clear();\r\n            toastr.info(\"Masterfiles...\", \"Loading please wait..\", { timeOut: 15000 });\r\n\r\n            loadMasterfiles().then(() => {\r\n                loadLookups().then(() => {\r\n\r\n                    //this._cache_obj.OBSERVERS.init_modal.forEach((all) => {\r\n                    //    all();\r\n                    //});\r\n\r\n\r\n\r\n                    this.masterFilesLoaded = true;\r\n\r\n                    this.fnPassUserObject(initType, output);\r\n\r\n                });\r\n            });\r\n        }\r\n        else {\r\n            this.fnPassUserObject(initType, output);\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    fnPassUserObject(initType, output) {\r\n\r\n        if (initType == 1) {\r\n\r\n\r\n        } else {\r\n            var varCookie = checkCookie(\"PPMS_USER\");\r\n\r\n\r\n\r\n            var varSplitCookie = varCookie.split('^');\r\n            this._user = {\r\n                USER_ID: varSplitCookie[0],\r\n                COMPANY_ID: varSplitCookie[1],\r\n                Is_HR: varSplitCookie[2],\r\n                Is_Branch: varSplitCookie[3],\r\n                EMPLOYEE_ID: varSplitCookie[4],\r\n                HASH: varSplitCookie[5],\r\n                EMAIL_ADDRESS: varSplitCookie[6],\r\n                ROLE_CD: varSplitCookie[7],\r\n                LEVEL_NO: varSplitCookie[8]\r\n            };\r\n\r\n            this._cache_obj.USER = this._user;\r\n\r\n            toastr.clear();\r\n            toastr.success(\"Let's Start...\", \"Success\");\r\n            settings.isNavigating = false;\r\n            if (this.router.currentInstruction.config.name == \"blankpage\")\r\n            {\r\n                this.router.navigateToRoute('mainpage');\r\n            }\r\n\r\n\r\n\r\n            return;\r\n        }\r\n\r\n        this.LoginPassed(output);\r\n\r\n    }\r\n\r\n\r\n    // @handle('login.passed')\r\n    LoginPassed(user) {\r\n\r\n        this._user = user;\r\n        //console.log(user);\r\n        setCookie(\"PPMS_USER\", user.USER_ID + \"^\" + user.COMPANY_ID + \"^\" + user.Is_HR + \"^\"\r\n            + user.Is_Branch + \"^\" + user.EMPLOYEE_ID + \"^\" + user.HASH + \"^\" + user.EMAIL_ADDRESS + \"^\" + user.ROLE_CD+ \"^\" + user.LEVEL_NO, 30);\r\n\r\n        settings.isNavigating = false;\r\n\r\n\r\n\r\n      //  console.log(checkCookie(\"PPMS_USER\"));\r\n        toastr.clear();\r\n        toastr.success(\"Let's Start...\", \"Success\");\r\n\r\n        if (this.router.currentInstruction.config.name == \"blankpage\") {\r\n            this.router.navigateToRoute('mainpage');\r\n        }\r\n    }\r\n\r\n    logout() {\r\n\r\n        if (this.router.currentInstruction.config.name != \"blankpage\")\r\n            this.router.navigateToRoute('blankpage');\r\n        else\r\n            this._cache_obj.OBSERVERS.loggedout.forEach((all) => {\r\n                all();\r\n            });\r\n\r\n        this._cache_obj.OBSERVERS.clear_log.forEach((all) => {\r\n            all();\r\n        });\r\n\r\n        this._cache_obj.USER = {};\r\n        this._cache_obj._ACCESS = {};\r\n\r\n\r\n        removeCookie();\r\n\r\n        this.fnLogin();\r\n\r\n\r\n    }\r\n\r\n\r\n    home()\r\n    {\r\n        this.router.navigateToRoute('mainpage');\r\n    }\r\n\r\n\r\n\r\n    fnLogin() {\r\n       // console.log(this.dialogService);\r\n        if (this.dialogService.controllers.length > 0) {\r\n            for (var i = this.dialogService.controllers.length - 1; i >= 0; i--) {\r\n                this.dialogService.controllers[i].close();\r\n            }\r\n        }\r\n\r\n\r\n        this.dialogService.open({\r\n            viewModel: login, keyboard: false, overlayDismiss: false, lock:true\r\n        }).whenClosed(response => {\r\n\r\n            if (!response.wasCancelled) {\r\n                this.fnInitMasterfiles(1, response.output);\r\n            } else {\r\n                toastr.clear();\r\n                toastr.info(\"Please Login...\", \"You cannot continue ..\", { timeOut: 15000 });\r\n                this.fnLogin();\r\n            }\r\n        });\r\n    }\r\n\r\n    changePassword()\r\n    {\r\n        this.dialogService.open({\r\n            viewModel: change_password\r\n        }).whenClosed(response => {\r\n\r\n            if (!response.wasCancelled) {\r\n\r\n            } else {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n","import settings from './settings';\r\nexport class service{\r\n    serviceBase = settings.serviceBase+ '/WcfDataService.svc/';\r\n    getSvcUrl(method) {\r\n\t\t\treturn serviceBase + method;\r\n\t\t};\r\n\tserviceBaseUpdate = 'home/';\r\n\tgetSvcUrlUpdate(method) {\r\n\t\t\treturn serviceBaseUpdate + method;\r\n\t\t};\r\n\r\n\tGetJson(method, jsonIn, callback) {\r\n\t\t$.ajax({\r\n\t\t\turl: getSvcUrl(method),\r\n\t\t\ttype: \"GET\",\r\n            dataType: \"jsonp\",\r\n\t\t\tsuccess: function(json) {\r\n\t\t\t\tcallback(json);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tPostJson(method, jsonIn, callback) {\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: getSvcUrl(method),\r\n\t\t\ttype: \"POST\",\r\n\t\t\tdata: jsonIn, //ko.toJSON(jsonIn)\r\n            dataType: \"jsonp\",\r\n\t\t\tcontentType: \"application/json\",\r\n\t\t\tsuccess: function(json) {\r\n\t\t\t\tcallback(json);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tPostUpdateJson(method, jsonIn, callback) {\r\n\t\t$.ajax({\r\n\t\t\turl: getSvcUrlUpdate(method),\r\n\t\t\ttype: \"POST\",\r\n\t\t\tdata: jsonIn,\r\n            dataType: \"jsonp\",\r\n\t\t\tcontentType: \"application/json\",\r\n\t\t\tsuccess: function(json) {\r\n\t\t\t\tcallback(json);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}","/**\r\n* Global settings/constants\r\n*/\r\n// http://localhost:30313/\r\n// http://absppms2:8094/odata\r\n//http://absppms01:8085/odata\r\n//http://absppms2:8072/odata\r\n//ctrl + alt + f (default) formatting indention\r\n//serviceName: \"http://localhost:30313/odata\",\r\n//serviceNameBase: \"http://localhost:30313\", \r\n//serviceName: \"http://absppms2:8094/odata\",\r\n//serviceName: \"http://absppms01:8085/odata\"\r\n\r\nexport default {\r\n    \r\n    // serviceName: \"http://localhost:30313/odata\", //odata url\r\n    // serviceNameBase: \"http://localhost:30313\", //base api url\r\n\r\n    // serviceName: \"http://absppms01.corp.abscbn.com:8085/odata\",\r\n    // serviceNameBase: \"http://absppms01.corp.abscbn.com:8085/\",\r\n\r\n    // serviceName: \"http://10.0.50.48:8088/odata\",\r\n    // serviceNameBase: \"http://10.0.50.48:8088:8085/\", \r\n\r\n    serviceName: \"http://absppms2.corp.abscbn.com:8094/odata\",\r\n    serviceNameBase: \"http://absppms2.corp.abscbn.com:8094\",\r\n\r\n    // serviceName: \"http://absppms01:8085/odata\",\r\n    // serviceNameBase: \"http://absppms01:8085\",\r\n\r\n  pageSize: 100,\r\n  STATIONS: [\"\", \"CEBU\", \"DAVAO\"],\r\n  //actualCostWebUrl: \"http://localhost:15253\",\r\n  actualCostWebUrl: \"http://absppms2.corp.abscbn.com:8084\", //actual cost url\r\n  actualCostServiceBase: \"http://absppms2.corp.abscbn.com:8083\", //actual cost service\r\n  \r\n  // actualCostServiceBase: \"http://absppms01:8083\", //actual cost service\r\n\r\n//  actualCostWebUrl: \"http://absppms2:8084\", //actual cost url\r\n  //actualCostServiceBase: \"http://absppms2:8083\", //actual cost service\r\n\r\n  isNavigating: false,\r\n };\r\n","import {inject} from 'aurelia-framework';\r\nimport {HttpClient} from 'aurelia-fetch-client';\r\n//import 'fetch';\r\n\r\n@inject(HttpClient)\r\nexport class Users{\r\n  heading = 'Github Users';\r\n  users = [];\r\n\r\n  constructor(http){\r\n    http.configure(config => {\r\n      config\r\n        .useStandardConfiguration()\r\n        .withBaseUrl('https://api.github.com/');\r\n    });\r\n\r\n    this.http = http;\r\n  }\r\n\r\n  activate(){\r\n    return this.http.fetch('users')\r\n      .then(response => response.json())\r\n      .then(users => this.users = users);\r\n  }\r\n}\r\n","import {inject,computedFrom} from 'aurelia-framework';\r\nimport {initializeBreeze} from './entity-manager-factory';\r\nimport {loadMasterfiles, loadTables, loadLookups, getLookups} from './masterfiles';\r\nimport toastr from \"toastr\";\r\n\r\n@inject(toastr)\r\nexport class Welcome {\r\n  heading = 'Welcome to the Aurelia Navigation App!';\r\n  firstName = 'John';\r\n  lastName = 'Doe';\r\n  previousValue = this.fullName;\r\n  _toastr = null;\r\n  constructor(toastr) {\r\n    toastr.options = {\r\n      \"closeButton\": true,\r\n      \"debug\": false,\r\n      \"positionClass\": \"toast-bottom-right\",\r\n      \"onclick\": null,\r\n      \"showDuration\": \"300\",\r\n      \"hideDuration\": \"1000\",\r\n      //\"timeOut\": \"300000\",\r\n      //\"extendedTimeOut\": \"1000\",\r\n      \"showEasing\": \"swing\",\r\n      \"hideEasing\": \"linear\",\r\n      \"showMethod\": \"fadeIn\",\r\n      \"hideMethod\": \"fadeOut\"\r\n    };\r\n\r\n   \r\n\r\n  }\r\n\r\n  //Getters can't be observed with Object.observe, so they must be dirty checked.\r\n  //However, if you tell Aurelia the dependencies, it no longer needs to dirty check the property.\r\n  //To optimize by declaring the properties that this getter is computed from, uncomment the line below.\r\n  //@computedFrom('firstName', 'lastName')\r\n  get fullName() {\r\n    return `${this.firstName} ${this.lastName}`;\r\n  }\r\n\r\n  submit() {\r\n    console.log(getLookups().PROGRAMS);\r\n\r\n    this.previousValue = this.fullName;\r\n    alert(`Welcome, ${this.fullName}!`);\r\n  }\r\n\r\n  canDeactivate() {\r\n    if (this.fullName !== this.previousValue) {\r\n      return confirm('Are you sure you want to leave?');\r\n    }\r\n  }\r\n}\r\n\r\nexport class UpperValueConverter {\r\n  toView(value) {\r\n    return value && value.toUpperCase();\r\n  }\r\n}","import moment from 'moment';\r\n\r\nexport class DatepatternValueConverter {\r\n    toView(value) {\r\n    \tif(value===undefined || value==null)\r\n    \t\treturn moment(new Date(),'MM-DD-YYYY').format('MM-DD-YYYY');\r\n    \telse\r\n    \t{\r\n    \t\tif(moment(value,'MM-DD-YYYY',true).isValid())\r\n    \t\t{\r\n    \t\t\treturn moment(value,'MM-DD-YYYY').format('MM-DD-YYYY');\r\n    \t\t}\r\n    \t\telse\r\n    \t\t\treturn moment(new Date(),'MM-DD-YYYY').format('MM-DD-YYYY');\r\n    \t}\r\n\t    \t\r\n        //return new Date(value).toLocaleDateString();\r\n    }\r\n}","export class FiltercustomValueConverter {\r\n    toView(array, propertyName, value, signal) {\r\n            \r\n            //this filter is reverse in condition\r\n\t\t\tvar varResult = [];\r\n    \t\tarray.forEach((all)=>{\r\n\r\n                        if(propertyName.indexOf(',')>0)\r\n                        {\r\n                            var varCheck = propertyName.split(',').find((allFilter)=>all[allFilter]!=value\r\n                            );\r\n                        \r\n                            if(varCheck==undefined)\r\n                            {\r\n                                varResult.push(all);    \r\n                            }\r\n                        }\r\n                        else\r\n    \t\t\t\t\tif(all[propertyName]==value)\t\t\t\t\t\t\r\n    \t\t\t\t\t\t varResult.push(all);\t\r\n\t\t\t\t\t });\r\n\r\n\r\n    \t\t// for (var i = array.length - 1; i >= 0; i--) {\r\n    \t\t// \tconsole.log(propertyName);\r\n    \t\t// \tconsole.log((array[i])[propertyName]);\r\n    \t\t// \tconsole.log(value);\r\n    \t\t// \tif(array[propertyName]==value)\r\n    \t\t// \t{\r\n    \t\t// \t\tarray.splice(i,1);\r\n    \t\t// \t}\r\n    \t\t// };\r\n\r\n    \t\tarray = varResult;\r\n\t\treturn array;\r\n    }\r\n}","import numeral from 'numeral';\r\n\r\nexport class NumberFormatValueConverter {\r\n  toView(value, format) {\r\n    return numeral(value).format(format);\r\n  }\r\n}","export class SignalsValueConverter {\r\n    toView(value, signal) {\r\n\t\treturn value;\r\n    }\r\n}","export class SortValueConverter {\r\n    toView(array, propertyName, direction) {\r\n        var factor = direction === 'ascending' ? 1 : -1;\r\n        return array\r\n          .slice(0)\r\n          .sort((a, b) => {\r\n              return (a[propertyName] - b[propertyName]) * factor\r\n          });\r\n    }\r\n}","export class SorttextValueConverter {\r\n    toView(array, propertyName, direction) {\r\n   //      array.forEach((a)=>{\r\n\t\t\t// \t\tconsole.log(a[propertyName]);\r\n\r\n\t\t\t// });\r\n        if(direction==\"ascending\")\r\n\t\t{\t\r\n\r\n\t\t\treturn array.sort(function(a, b) {\r\n\t\t\t\t//console.log(a[propertyName]);\r\n\t\t\t\tif (a[propertyName] > b[propertyName]) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\tif (a[propertyName] < b[propertyName]) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\t\t\t\t// a must be equal to b\r\n\t\t\t\treturn 0;\r\n\t\t\t});\r\n        }\r\n        else\r\n        {\r\n        \treturn array.sort(function(a, b) {\r\n\t\t\t\tif (a[propertyName] > b[propertyName]) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\t\t\t\tif (a[propertyName] < b[propertyName]) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\t// a must be equal to b\r\n\t\t\t\treturn 0;\r\n\t\t\t});\t\r\n        }\r\n\r\n    }\r\n}","export class TakeValueConverter {\r\n    toView(array, count, index) {\r\n        return array.slice(index*count, (index*count)+count);\r\n    }\r\n}","import { EntityManager, EntityQuery, initializeBreeze, generateID} from '../entity-manager-factory';\r\nimport { checkCookie, setCookie, removeCookie, substringMatcher} from '../helpers';\r\nimport {loadMasterfiles, loadTables, loadLookups, getLookups} from '../masterfiles';\r\nimport toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport typeahead from 'typeahead';\r\nimport _ from 'underscore';\r\nimport {buhProgramDialog} from '../modals/buh-program-dialog';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport { login } from '../modals/login';\r\nimport { buhSearch } from '../modals/buh-search';\r\n@inject(DialogService)\r\nexport class buh {\r\n\t_objBUH={PROGRAMS:[]};\r\n\r\n\tdialogService=null;\r\n\tloginDisabled=true;\r\n\tlogoutDisabled=false;\r\n\t//_BUH_PERSONNEL_ID=0;\r\n\tmasterFilesLoaded=false;\r\n\t_disableCells=true;\r\n\t_disableAdd=false;\r\n\t_disableDelete=true;\r\n\t_disableSave=true;\r\n\t_disableSearch=false;\r\n\t_disableGrid=true;\r\n\t_status=\"\";\r\n\t_user={};\r\n\t_programs=[];\r\n\tconstructor(DialogService)\r\n\t{\r\n\r\n\t\tthis.dialogService=DialogService;\r\n\t\r\n\r\n\t\tif(this.dialogService.controllers.length>0)\r\n\t\t{\r\n\t\t\tfor (var i = this.dialogService.controllers.length - 1; i >= 0; i--) {\r\n\t\t\t\tthis.dialogService.controllers[i].close();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t\t\t//toastr.success(\"Loading Programs\", \"Loading\");\r\n\r\n\t\t\t\t//initializeBreeze().then(() => {\t\r\n\r\n\r\n\t\t\t\t//\tvar _query = EntityQuery().from('PROGRAM_MSTR').where(breeze.Predicate.and(this.currPredicate)).select('PROGRAM_CD,PROGRAM_TITLE,PROGRAM_ID,BUH_PERSONNEL_ID');\r\n\t\t\t\t//\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\t\t//\t\tthis._programs= success.results;\r\n\t\t\t\t//\t});\t\r\n\t\t\t\t//      //have to set timeout because of IE, other templates are not loading\r\n\t\t\t\t//      // quickly and loading at same time with functions\r\n\t\t\t\t//      setTimeout(() => {\r\n\r\n\t\t\t\t//      \tif (checkCookie(\"PPMS_USER\") == \"\" || checkCookie(\"PPMS_USER\")==undefined || checkCookie(\"PPMS_USER\").indexOf('undefined')>=0)\r\n\t\t\t\t//      \t{\r\n\t\t\t\t//      \t\tthis.fnLogin();\r\n\t\t\t\t//      \t\tthis.loginDisabled=false;\r\n\t\t\t\t//      \t\tthis.logoutDisabled=true;\r\n\t\t\t\t//      \t\treturn;\r\n\t\t\t\t//      \t}\r\n\r\n\t\t\t\t//      \tthis.fnInitMasterfiles(0,\"\");\r\n\r\n\r\n\t\t\t\t//      }, 2000);\r\n\t\t\t\t//  });\r\n\r\n\r\n    // toastr.options = {\r\n    //   \"closeButton\": true,\r\n    //   \"debug\": false,\r\n    //   \"positionClass\": \"toast-bottom-right\",\r\n    //   \"onclick\": null,\r\n    //   \"showDuration\": \"300\",\r\n    //   \"hideDuration\": \"1000\",\r\n    //   //\"timeOut\": \"300000\",\r\n    //   //\"extendedTimeOut\": \"1000\",\r\n    //   \"showEasing\": \"swing\",\r\n    //   \"hideEasing\": \"linear\",\r\n    //   \"showMethod\": \"fadeIn\",\r\n    //   \"hideMethod\": \"fadeOut\"\r\n    // };\r\n\r\n\t}\r\n\r\n\taddBUH(){\r\n\t\tthis.fnCRUD(\"add\");\r\n\t}\r\n\r\n\tfnCRUD(value)\r\n\t{\r\n\t\tthis._disableCells=true;\r\n\t\tthis._disableSave=true;\r\n\t\tthis._disableDelete=true;\r\n\t\tthis._disableAdd=true;\r\n\t\tthis._disableGrid=true;\r\n\t\tthis._disableSearch=true;\r\n\t\tswitch(value){\r\n\t\t\tcase \"cancel\":\r\n\t\t\t{\r\n\t\t\t\tthis._disableSearch=false;\t\r\n\t\t\t\tthis._disableAdd=false;\r\n\t\t\t\tthis._objBUH={\r\n\t\t\t\t\tBUH_PERSONNEL_ID: 0,\r\n\t\t\t\t\tOPTIONAL_GLOBAL_ID: \"\",\r\n\t\t\t\t\tFIRST_NAME: \"\",\r\n\t\t\t\t\tMIDDLE_NAME: \"\",\r\n\t\t\t\t\tLAST_NAME: \"\",\r\n\t\t\t\t\tEMAIL_ADDRESS: \"\",PROGRAMS:[]};\r\n\t\t\t\tthis._status=\"\";\t\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"search\":\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.searchExistingBuh();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"add\":\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._status=\"add\";\r\n\t\t\t\t\tthis._disableCells=false;\r\n\t\t\t\t\tthis._disableSave=false;\r\n\t\t\t\t\tthis._objBUH={\r\n\t\t\t\t\t\tBUH_PERSONNEL_ID: \"\",\r\n\t\t\t\t\t\tOPTIONAL_GLOBAL_ID: \"\",\r\n\t\t\t\t\t\tFIRST_NAME: \"\",\r\n\t\t\t\t\t\tMIDDLE_NAME: \"\",\r\n\t\t\t\t\t\tLAST_NAME: \"\",\r\n\t\t\t\t\t\tEMAIL_ADDRESS: \"\",PROGRAMS:[]};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"delete\":\r\n\t\t\t\t\t{\r\n\r\n\t\t\t\t\t\tvar varDelete =confirm(\"Delete BUH?\");\r\n\r\n\r\n\t\t\t\t\t\tif(varDelete)\r\n\t\t\t\t\t\t{\r\n\r\n\r\n\t\t\t\t\t\t\tfor (var i = this._objBUH.PROGRAMS.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\t\t\tvar found = this._programs.find((all)=>all.PROGRAM_CD==this._objBUH.PROGRAMS[i].PROGRAM_CD);\r\n\t\t\t\t\t\t\t\tfound.BUH_PERSONNEL_ID=0;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar getBUHForEdit = EntityQuery().from('BUH_PERSONNEL').where(\"BUH_PERSONNEL_ID\",\"==\",this._objBUH.BUH_PERSONNEL_ID);\r\n\t\t\t\t\t\t\tEntityManager().executeQuery(getBUHForEdit).then((success) => {\r\n\t\t\t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\t\t\t\t\t\t\t\tEntityManager().saveChanges().then((success) => {\r\n\r\n\t\t\t\t\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"Program\");\r\n\r\n\t\t\t\t\t\t\t\t}, (fail) => {\r\n\r\n\t\t\t\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\tthis.fnCRUD(\"cancel\");\r\n\r\n\r\n\t\t\t\t\t\t\t});\r\n\r\n\r\n\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis._disableCells=false;\r\n\t\t\t\t\t\tthis._disableSave=false;\r\n\t\t\t\t\t\tthis._disableDelete=false;\r\n\t\t\t\t\t\tthis._disableAdd=false;\r\n\t\t\t\t\t\tthis._disableGrid=false;\r\n\t\t\t\t\t\tthis._disableSearch=false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"save\":\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.saveBUH();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tsaveBUH()\r\n\t\t\t{\r\n\t\t\t\tif(this._status==\"view\")\r\n\t\t\t\t{\r\n\t\t\t\t\tvar getBUHForEdit = EntityQuery().from('BUH_PERSONNEL').where(\"BUH_PERSONNEL_ID\",\"==\",this._objBUH.BUH_PERSONNEL_ID);\r\n\t\t\t\t\tEntityManager().executeQuery(getBUHForEdit).then((success) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsuccess.results[0].OPTIONAL_GLOBAL_ID=this._objBUH.OPTIONAL_GLOBAL_ID.toUpperCase();\r\n\t\t\t\t\t\tsuccess.results[0].FIRST_NAME=this._objBUH.FIRST_NAME.toUpperCase();\r\n\t\t\t\t\t\tsuccess.results[0].MIDDLE_NAME=this._objBUH.MIDDLE_NAME.toUpperCase();\r\n\t\t\t\t\t\tsuccess.results[0].LAST_NAME=this._objBUH.LAST_NAME.toUpperCase();\r\n\t\t\t\t\t\tsuccess.results[0].EMAIL_ADDRESS=this._objBUH.EMAIL_ADDRESS.toUpperCase();\r\n\r\n\t\t\t\t\t\tEntityManager().saveChanges().then((success) => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"New Business Unit Head\");\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis._disableDelete=false;\r\n\t\t\t\t\t\t\tthis._disableGrid=false;\r\n\t\t\t\t\t\t\tthis._disableAdd=false;\r\n\t\t\t\t\t\t\tthis._disableSearch=false;\r\n\t\t\t\t\t\t\tthis._disableCells=false;\r\n\t\t\t\t\t\t\tthis._disableSave=false;\r\n\r\n\t\t\t\t\t\t}, (fail) => {\r\n\r\n\t\t\t\t\t\t\tif(varInsert!=null)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvarInsert.entityAspect.setDeleted();  \r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tconsole.log(fail);\r\n\t\t\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\r\n\t\t\t\t\t\t});\r\n\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t///INSERTING\r\n\t\t\tvar getMax = EntityQuery().from('BUH_PERSONNEL').orderByDesc('BUH_PERSONNEL_ID').take(1);\r\n\t\t\tEntityManager().executeQuery(getMax).then((successMax) => {\r\n\t\t\t\tvar getMax = 1;\r\n\r\n\t\t\t\tif (successMax.results.length > 0)\r\n\t\t\t\t\tgetMax = successMax.results[0].BUH_PERSONNEL_ID + 1;\r\n\r\n\r\n\t\t\t\tvar varInsert = EntityManager().createEntity('BUH_PERSONNEL', {\r\n\t\t\t\t\tBUH_PERSONNEL_ID: getMax,\r\n\t\t\t\t\tOPTIONAL_GLOBAL_ID: this._objBUH.OPTIONAL_GLOBAL_ID.toUpperCase(),\r\n\t\t\t\t\tFIRST_NAME: this._objBUH.FIRST_NAME.toUpperCase(),\r\n\t\t\t\t\tMIDDLE_NAME: this._objBUH.MIDDLE_NAME.toUpperCase(),\r\n\t\t\t\t\tLAST_NAME: this._objBUH.LAST_NAME.toUpperCase(),\r\n\t\t\t\t\tEMAIL_ADDRESS: this._objBUH.EMAIL_ADDRESS.toUpperCase(),\r\n\t\t\t\t\tCREATED_BY: \"PAULV\",\r\n\t\t\t\t\tCREATED_DT: new Date(Date.now()),\r\n\t\t\t\t});\r\n\r\n\t\t\t\tEntityManager().addEntity(varInsert);\r\n\r\n\t\t\t\tEntityManager().saveChanges().then((success) => {\r\n\r\n\t\t\t\t\tthis._objBUH.BUH_PERSONNEL_ID=getMax;\r\n\r\n\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"New Business Unit Head\");\r\n\r\n\t\t\t\t\tthis._disableDelete=false;\r\n\t\t\t\t\tthis._disableGrid=false;\r\n\t\t\t\t\tthis._disableAdd=false;\r\n\t\t\t\t\tthis._disableSearch=false;\r\n\t\t\t\t\tthis._disableDelete=false;\r\n\t\t\t\t\tthis._disableCells=false;\r\n\t\t\t\t\tthis._disableSave=false;\r\n\t\t\t\t\tthis._status=\"view\";\r\n\r\n\t\t\t\t}, (fail) => {\r\n\r\n\t\t\t\t\tif(varInsert!=null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvarInsert.entityAspect.setDeleted();  \r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconsole.log(fail);\r\n\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\r\n\r\n\r\n\t\t}\r\n\r\n\r\n\t\tdeleteSelected(index)\r\n\t\t{\r\n\t\t\tvar varDelete =confirm(\"Delete record?\");\r\n\t\t\tif(varDelete)\r\n\t\t\t{\r\n\r\n\t\t\t\tvar found = this._programs.find((all)=>all.PROGRAM_CD==this._objBUH.PROGRAMS[index].PROGRAM_CD);\r\n\t\t\t\tfound.BUH_PERSONNEL_ID=0;\r\n\r\n\r\n\t\t\t\tEntityManager().saveChanges().then((success) => {\r\n\r\n\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"Program\");\r\n\r\n\t\t\t\t}, (fail) => {\r\n\r\n\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tthis._objBUH.PROGRAMS.splice(index,1);\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\r\n\t\tsearchExistingBuh(){\r\n\t\t\t\r\n\t\t\tthis.dialogService.open({\r\n\t\t\t\tviewModel: buhSearch\r\n            }).whenClosed(response => {\r\n\r\n\t\t\t\tif (!response.wasCancelled) {\r\n\t\t\t\t\tthis.searchBUH(response.output);\r\n\t\t\t\t\tthis._disableGrid=false;\r\n\t\t\t\t\tthis._disableDelete=false;\r\n\t\t\t\t\tthis._disableSave=false;\r\n\t\t\t\t\tthis._disableCells=false;\r\n\t\t\t\t} \r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._disableSearch=false;\r\n\t\t\t\t\tthis._disableAdd=false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tsearchBUH(item)\r\n\t\t{\r\n\t\t\tthis._status=\"view\";\r\n\r\n\t\t\tthis._objBUH.BUH_PERSONNEL_ID=item.BUH_PERSONNEL_ID;\r\n\t\t\tthis._objBUH.OPTIONAL_GLOBAL_ID=item.OPTIONAL_GLOBAL_ID;\r\n\t\t\tthis._objBUH.FIRST_NAME=item.FIRST_NAME;\r\n\t\t\tthis._objBUH.MIDDLE_NAME=item.MIDDLE_NAME;\r\n\t\t\tthis._objBUH.LAST_NAME=item.LAST_NAME;\r\n\t\t\tthis._objBUH.EMAIL_ADDRESS=item.EMAIL_ADDRESS;\r\n\r\n\t\t\tthis._disableAdd=false;\r\n\t\t\tthis._disableSearch=false;\r\n\r\n\t\t\tthis._objBUH.PROGRAMS=[];\r\n\r\n\t\t\tvar found = this._programs.filter((all)=>all.BUH_PERSONNEL_ID==item.BUH_PERSONNEL_ID);\r\n\t\t\t\r\n\t\t\tif(found!==undefined)\r\n\t\t\t\tfound.forEach((foundItems)=>\r\n\t\t\t\t{\t\r\n\t\t\t\t\tthis._objBUH.PROGRAMS.push(foundItems);\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\r\n\r\n\t\tsearchPrograms(){\t\r\n\t\t\tthis.dialogService.open({\r\n\t\t\t\tviewModel: buhProgramDialog\r\n            }).whenClosed(response => {\r\n\r\n\t\t\t\tif (!response.wasCancelled) {\r\n\r\n\t\t\t\t\tfor (var a = response.output.length - 1; a >= 0; --a) {\r\n\t\t\t\t\t\tvar found = this._programs.find((all)=>all.PROGRAM_CD==response.output[a].PROGRAM_CD);\r\n\t\t\t\t\t\tconsole.log(found.BUH_PERSONNEL_ID);\r\n\t\t\t\t\t\tif(found.BUH_PERSONNEL_ID==0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis._objBUH.PROGRAMS.push(response.output[a]);\r\n\t\t\t\t\t\t\tfound.BUH_PERSONNEL_ID=this._objBUH.BUH_PERSONNEL_ID;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttoastr.error(\"<strong>\"+found.PROGRAM_TITLE+\"</strong> cannot be added, it is assigned to other BUH Personnel.\", \"Problem occured\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tEntityManager().saveChanges().then((success) => {\r\n\r\n\t\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"Program\");\r\n\r\n\t\t\t\t\t}, (fail) => {\r\n\r\n\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\r\n\t\t\t\t\t});\r\n\r\n\r\n\r\n\r\n\t\t\t        \t//this._objBUH.PROGRAMS=response.output;\r\n\t\t\t        } \r\n\t\t\t    });\r\n\t\t}\r\n\r\n\t\tfnInitMasterfiles(initType,output){\r\n\r\n\t\t\tif(this.masterFilesLoaded==false)\r\n\t\t\t{\r\n\t\t\t\tthis._toastr = toastr;\r\n\t\t\t\ttoastr.info(\"Masterfiles...\", \"Loading please wait..\", { timeOut: 15000 });\r\n\t\t\t\tthis.loginDisabled = true;\r\n\t\t\t\tloadMasterfiles().then(() => {\r\n\t\t\t\t\tloadLookups().then(() => {\r\n                        \r\n\t\t\t\t\t\tthis.masterFilesLoaded = true;\r\n\r\n\t\t\t\t\t\tthis.fnPassUserObject(initType,output);\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.fnPassUserObject(initType,output);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfnLogin(){\r\n\t\t\tthis.dialogService.open({\r\n\t\t\t\tviewModel: login\r\n            }).whenClosed(response => {\r\n\r\n\t\t\t\tif (!response.wasCancelled) {\r\n\t\t\t\t\tthis.fnInitMasterfiles(1, response.output);\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfnPassUserObject(initType,output){\r\n\r\n\t\t\tif (initType == 1) {\r\n\r\n\r\n\t\t\t} else {\r\n\t\t\t\tvar varCookie = checkCookie(\"PPMS_USER\");\r\n\t\t\t\tvar varSplitCookie = varCookie.split('^');\r\n\t\t\t\tthis._user = {\r\n\t\t\t\t\tUSER_ID: varSplitCookie[0],\r\n\t\t\t\t\tCOMPANY_ID: varSplitCookie[1],\r\n\t\t\t\t\tIs_HR: varSplitCookie[2],\r\n\t\t\t\t\tIs_Branch: varSplitCookie[0]\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.loginDisabled = true;\r\n\t\t\t\tthis.logoutDisabled = false;\r\n\t\t\t\tthis.showingLogout = \"visible\";\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"Let's Start...\", \"Success\");\r\n\t\t\t\tthis._disableAdd=false;\r\n\t\t\t\tthis._disableSearch=false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.LoginPassed(output);\r\n\r\n\t\t}\r\n\r\n\t\tLoginPassed(user) {\r\n\r\n\t\t\tthis._user = user; \r\n\r\n      //console.log(user.USER_ID+\"^\"+user.COMPANY_ID+\"^\"+user.Is_HR+\"^\"+user.Is_Branch);\r\n\r\n      setCookie(\"PPMS_USER\", user.USER_ID+\"^\"+user.COMPANY_ID+\"^\"+user.Is_HR+\"^\"+user.Is_Branch, 30);\r\n      toastr.clear();\r\n      toastr.success(\"Let's Start...\", \"Success\");\r\n\r\n      this.logoutDisabled = false;\r\n      this.loginDisabled=true;\r\n\r\n      this.showingLogout = \"visible\";\r\n      this._disableAdd=false;\r\n\t  this._disableSearch=false;\r\n  }\r\n\r\n\r\n\r\n  logout() {\r\n  \tthis.fnCRUD(\"cancel\");\r\n  \tthis._disableAdd=true;\r\n\tthis._disableSearch=true;\r\n  \tthis.loginDisabled=false;\r\n  \tthis.logoutDisabled=true;\r\n\r\n  \tthis._user ={};\r\n  \tremoveCookie();\r\n  \tthis.showingLogout = \"hidden\";\r\n  \tthis.fnLogin();\r\n\r\n  }\r\n}","export class cache_budget{\r\n    HEADER = {};\r\n    REGULAR = [];\r\n    SEMI_REGULAR = [];\r\n    STAFF = [];\r\n    GUEST=[];\r\n    USER={};\r\n    TOTAL=0;\r\n    STATUS = \"NONE\";\r\n    IS_COPYING=false;\r\n    _INPUT_AMT_REGULAR=0;\r\n    _INPUT_AMT_SEMI_REGULAR=0;\r\n    _INPUT_AMT_STAFF=0;\r\n    _INPUT_AMT_GUEST=0;\r\n    _INPUT_AMT_TOTAL=0;\r\n    IS_COPYING = false;\r\n    _LOADING_BUDGET = 0;\r\n   \r\n    CALLER={ACTION:null,ACTION_CALLER:null,VALUE1:null,VALUE2:null,VALUE3:null,VALUE4:null};\r\n    OBSERVERS = {\r\n        pass_group: [], \r\n        pass_indiv: [], \r\n        enable_approved: [], \r\n        copy_template_guest:[],\r\n        copy_template:[],\r\n        budget_refresh:[], //0\r\n        reset_all:[],\r\n        refreshPersonnelTab:[], //1\r\n        reset_summary:[],//0\r\n        budget_loaded: [],\r\n        disable_search_personnel: [],\r\n        pass_job: [],\r\n        verify_copied_budget:[]\r\n    };\r\n\r\n    tmp_bdgt_copied=\"\";\r\n}","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';  \r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {cache_obj} from 'cache_obj';\r\nimport { DialogController } from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n@inject(MultiObserver,ObserverLocator,Element,cache_obj,DialogController)\r\nexport class budget {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArrayLength=0;\r\n\tvarFilterArray = [];\r\n\tcurrPredicate=null;\r\n\t_cache_obj;\r\n\tlstPredicates=[];\r\n\tcontroller=null;\r\n\tconstructor(multiObserver,observerLocator,Element,cache_obj,controller) {\r\n\t\tthis.controller=controller;\r\n\t\t//this._dispatcher=Dispatcher;\r\n\t\tthis._cache_obj=cache_obj;\r\n\t\tthis.observerLocator=observerLocator;\r\n\t\t\r\n\t\tthis.items=getLookups().BDGT_TMPL_HDR;\r\n\r\n\t\t// var _query = EntityQuery().from('BDGT_TMPL_HDR').where(\"BDGT_TMPL_ID\", \"==\", this._GLOBAL_GRP_ID);\r\n\t\t// EntityManager().executeQuery(_query).then((success) => {});\r\n\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t[this, '_bBDGT_TMPL_ID'],\r\n\t\t\t[this, '_bPROGRAM_TITLE'],\r\n\t\t\t[this, '_bPROGRAM_IO'],\r\n\t\t\t[this, '_bAPPR_STAT_CD']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_budget_modal.push(()=>{\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n\tfnManualFilter(tmpVar)\r\n\t{\r\n\t\t\r\n\t\tthis.lstPredicates=[];\r\n\r\n\t\t_.each(this._rBUDGET_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\t\t\t\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\")\r\n\t\t\t\tif(varOb.propertyName.indexOf(\"BDGT_TMPL_ID\")>-1)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.lstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), \"==\", varOb.getValue()));\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.lstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', '').replace('PROGRAM_TITLE','PROGRAM_MSTR.PROGRAM_TITLE').replace('PROGRAM_IO','PROGRAM_MSTR.PROGRAM_IO'), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(tmpVar.length>0)\r\n\t\t\t\t{\r\n\t\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t});\r\n\r\n\t\treturn tmpVar;\r\n\t}\r\n\r\n\tonSpeculateProp(newValue, oldValue) {\r\n\t\t\r\n\t\tvar varValuesHasChanged=false;\r\n\t\t//check if inputs has value else return;\r\n\t\t_.each(this._rBUDGET_TITLE.querySelectorAll('input'), all => {\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n\t\t\t{\t\r\n\t\t\t\tvarValuesHasChanged=true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(!varValuesHasChanged) return;\r\n\r\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\r\n\t\t//if has existing results, use it, else, query to server\r\n\t\tif(tmpVar.length>0) \r\n\t\t{\r\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'BDGT_TMPL_ID').reverse();\r\n\t\t\tthis.varFilterArray = tmpVarNew;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.currPredicate=this.lstPredicates;\r\n\t\tif(this._cache_obj.PROGRAM_USER.length==0)\r\n\t\t{\r\n\r\n\t\t\tvar _query = EntityQuery().from('PROGRAM_USER_TRX').where(\"USER_ID\", \"==\", this._cache_obj.USER.USER_ID);\r\n\t\t\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\t\tsuccess.results.forEach((all)=>{\r\n\t\t\t\t\tif(all.USER_ID==this._cache_obj.USER.USER_ID)\r\n\t\t\t\t\t\tthis._cache_obj.PROGRAM_USER.push(all);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\r\n\t\t}//\r\n\t\t//delay to get minimize bloated multiple/simultaneous searching\r\n\t\tsetTimeout((a) => {\r\n\r\n\t\t\tif (a !== this.currPredicate)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis.varFilterArray = [];\r\n\r\n\t\t\tvar _query = EntityQuery().from('BDGT_TMPL_HDR').where(breeze.Predicate.and(this.currPredicate)).expand('PROGRAM_MSTR').orderBy(\"BDGT_TMPL_ID desc\").select('BDGT_TMPL_ID,PROGRAM_MSTR.PROGRAM_TITLE,PROGRAM_MSTR.PROGRAM_IO,PROGRAM_MSTR.PROGRAM_ID, APPR_STAT_CD');\r\n            EntityManager().executeQuery(_query).then((success) => {\r\n                \r\n\t\t\t\ttmpVar = [];\r\n\t\t\t\t_.each(success.results, (all) => {\r\n\t\t\t\t\tif(all.APPR_STAT_CD!=null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar findProgramUser=this._cache_obj.PROGRAM_USER.find((allP)=>allP.PROGRAM_ID==all.PROGRAM_MSTR.PROGRAM_ID);\r\n\t\t\t\t\t\tif(findProgramUser!== undefined)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttmpVar.push({\r\n\t\t\t\t\t\t\tPROGRAM_TITLE: all.PROGRAM_MSTR.PROGRAM_TITLE,\r\n\t\t\t\t\t\t\tBDGT_TMPL_ID: parseInt(all.BDGT_TMPL_ID),\r\n\t\t\t\t\t\t\tPROGRAM_IO: all.PROGRAM_MSTR.PROGRAM_IO,\r\n\t\t\t\t\t\t\tAPPR_STAT_CD: all.APPR_STAT_CD.replace('APP-','')\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\r\n\t\t\t}, (failed) => {\r\n\t\t\t\ttoastr.error(failed, \"Failed loading PROGRAM Names\");\r\n\t\t\t});\r\n\r\n\t\t}, 500, this.currPredicate);\r\n\r\n\t}\r\n\r\n\tselectedBudget(item){\r\n\t\t\r\n\t\tthis._cache_obj.OBSERVERS.budget_dialog.forEach((all)=>{\r\n\t\t\tall(item.BDGT_TMPL_ID);\r\n\t\t});\r\n\r\n\t\tthis.controller.ok();\r\n\r\n\t}\r\n\r\n\tfnKeyup(evt,item){\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis.selectedBudget(this.varFilterArray[0]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tClearSearch(){\r\n\t\tthis._bBDGT_TMPL_ID=\"\";\r\n\t\tthis._bPROGRAM_TITLE=\"\";\r\n\t\tthis._bPROGRAM_IO=\"\";\r\n\t\tthis._bAPPR_STAT_CD=\"\";\r\n\t\t\r\n\t\tthis.varFilterArray=[];\r\n\t\tthis.varFilterArrayLength = 0;\r\n\t}\r\n}\r\n","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n\r\n@inject(MultiObserver, ObserverLocator, Element, ModalWizard, cache_obj, DialogController)\r\nexport class buhProgramDialog {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArray = [];\r\n\tvarFilterArraySelected=[];\r\n\tvarFilterArrayLength=0;\r\n\t\r\n\t_ModalWizard;\r\n\t_cache_obj;\r\n\tcontroller=null;\r\n\t_programs=[];\r\n\tconstructor(multiObserver, observerLocator, Element, ModalWizard, cache_obj,controller) {\r\n\t\tthis.controller=controller;\r\n\r\n\t\tthis._ModalWizard=ModalWizard;\r\n\t\tthis._cache_obj=cache_obj;\r\n\t\t\r\n\t\ttoastr.info(\"Program Data...\", \"Loading..\");\r\n\t\t\r\n\t\ttoastr.success(\"Start Search...\", \"Loading Finish..\");\r\n\r\n\t\tthis.observerLocator = observerLocator;\r\n\t\t\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t\t[this, '_bPROGRAM_CD'],\r\n\t\t\t\t[this, '_bPROGRAM_TITLE']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\t\t\r\n\t\tvar _query = EntityQuery().from('PROGRAM_MSTR').where(breeze.Predicate.and(this.currPredicate)).select('PROGRAM_CD,PROGRAM_TITLE,PROGRAM_ID,BUH_PERSONNEL_ID');\r\n\t\t\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\t\tthis._programs=success.results;\r\n\r\n\t\t\t}, (failed) => {\r\n\t\t\t\ttoastr.error(failed, \"Failed loading Programs\");\r\n\t\t\t});\r\n\r\n\t}\r\n\r\n\tattached(){\r\n    \t\t//console.log($(this));\r\n  \t}\r\n\r\n\tselectedTalent(item) {\r\n\t\tvar isFound=this.varFilterArraySelected.find((_item)=>{\r\n\t\t\tif(_item.PROGRAM_CD==item.PROGRAM_CD)\r\n\t\t\t{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif( isFound===undefined){\r\n\t\t\tthis.varFilterArraySelected.push(item);\r\n\t\t}\r\n\t\r\n\t}\r\n\r\n\tfnKeyup(evt,item){\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis.varFilterArraySelected.push(this.varFilterArray[0]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfnManualFilter(tmpVar)\r\n\t{\r\n\t\tvar lstPredicates=[];\r\n\t\t_.each(this._rGROUP_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\"){\r\n\t\t\t\t\r\n\t\t\t\tif(varOb.propertyName.indexOf(\"PROGRAM_TITLE\")>-1)\r\n\t\t\t\t{\r\n\t\t\t\t\tlstPredicates.push(breeze.Predicate.create(\"PROGRAM_TITLE\", breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tlstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\r\n\t\t});\r\n\r\n\r\n\t\treturn tmpVar;\r\n\t}\r\n\r\n\r\n\tonSpeculateProp(newValue, oldValue) {\r\n\t\t\r\n\t\tif(this._rGROUP_TITLE===undefined || this._rGROUP_TITLE===null || this._rGROUP_TITLE==='') return;\r\n\t\t\r\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\t\t\r\n\t\tif(tmpVar.length>0) \r\n\t\t{\r\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'PROGRAM_TITLE').reverse();\r\n \t\t\tthis.varFilterArray = tmpVarNew;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\ttmpVar=this.fnManualFilter(this._programs.filter((all)=>all.PROGRAM_TITLE.indexOf('[')<=0)); \r\n\t\t}\r\n\t\t\r\n\t\tthis.varFilterArray = tmpVar;\r\n\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\r\n\t}\r\n\r\n\tdeleteSelected(index){\r\n\t\tthis.varFilterArraySelected.splice(index,1);\r\n\t}\r\n\r\n\tSelectingDone(){\r\n\r\n\t\tthis.controller.ok(this.varFilterArraySelected);\r\n\t\t\r\n\t}\r\n\r\n\t//@handle('clear.indiv.modal')\r\n\tClearSearch(){\r\n\t\tthis.varFilterArraySelected=[];\r\n\t\tthis._bPROGRAM_CD=\"\";\r\n\t\tthis._bPROGRAM_TITLE=\"\";\r\n\t\tthis.varFilterArray = [];\r\n\t\tthis.varFilterArrayLength = 0;\r\n\r\n\t}\r\n\r\n}","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';  \r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n\r\n@inject(MultiObserver,ObserverLocator,Element, cache_obj,DialogController)\r\nexport class buhSearch {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArrayLength=0;\r\n\tvarFilterArray = [];\r\n\tcurrPredicate=null;\r\n\tcontroller=null;\r\n\tconstructor(multiObserver,observerLocator,Element, cache_obj, controller) {\r\n\t\tthis.controller=controller;\r\n\r\n\t\tthis.observerLocator=observerLocator;\r\n\t\t\r\n\t\tthis._cache_obj=cache_obj;\r\n\t\t\r\n\t\tvar _query = EntityQuery().from('BUH_PERSONNEL').orderByDesc(\"BUH_PERSONNEL_ID\");\r\n\t\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\tthis.items=success.results;\r\n\r\n\t\t}, (failed) => {\r\n\t\t\ttoastr.error(failed, \"Failed loading PROGRAM Names\");\r\n\t\t});\r\n\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t[this, '_bOPTIONAL_GLOBAL_ID'],\r\n\t\t\t[this, '_bFIRST_NAME'],\r\n\t\t\t[this, '_bLAST_NAME'],\r\n\t\t\t[this, '_bMIDDLE_NAME'],\r\n\t\t\t[this, '_bEMAIL_ADDRESS'],\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\t\t\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_program_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tselectedTalent(item){\r\n\t\r\n\t\tthis._cache_obj.OBSERVERS.pass_value.forEach((all) => {\r\n\t\t\tall(item);\r\n\t\t});\r\n\t}\r\n\r\n\tonSpeculateProp(newValue, oldValue) {\r\n\t\t\r\n\t\t\r\n\t\tvar varValuesHasChanged=false;\r\n\t\t//check if inputs has value else return;\r\n\t\t_.each(this._rBUH_SEARCH.querySelectorAll('input'), all => {\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n\t\t\t{\t\r\n\t\t\t\tvarValuesHasChanged=true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\r\n\t\tif(!varValuesHasChanged) return;\r\n\t\t//++this.intTest;\r\n\t\tvar tmpVar = [];\r\n\t\tif(this.varFilterArray.length>0)\r\n\t\t\ttmpVar=this.varFilterArray;\r\n\r\n\r\n\t\tvar lstPredicates=[];\r\n\t\t_.each(this._rBUH_SEARCH.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\t\t\t\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\")\r\n\t\t\t// if(varOb.propertyName.indexOf(\"OPTIONAL_GLOBAL_ID\")>-1)\r\n\t\t\t// {\r\n\t\t\t// \tlstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), \"==\", varOb.getValue().toUpperCase()));\r\n\t\t\t// }\r\n\t\t\t// else\r\n\t\t\t// {\r\n\t\t\t\tlstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t//}\r\n\r\n\t\t\tif(tmpVar.length>0)\r\n\t\t\t{\r\n\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\t\t\t}\r\n\r\n\r\n\t\t});\r\n\r\n\t\t//console.log(lstPredicates);\r\n\t\tthis.currPredicate=lstPredicates;\r\n\r\n\r\n\t\t//if has existing results, use it, else, query to server\r\n\t\tif(tmpVar.length>0) \r\n\t\t{\r\n\t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//delay to get minimize bloated multiple/simultaneous searching\r\n\t\tsetTimeout((a) => {\r\n\r\n\t\t\tif (a !== this.currPredicate)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis.varFilterArray = [];\r\n\r\n\t\t\tvar _query = EntityQuery().from('BUH_PERSONNEL').where(breeze.Predicate.and(this.currPredicate)).select('BUH_PERSONNEL_ID,OPTIONAL_GLOBAL_ID,FIRST_NAME,MIDDLE_NAME,LAST_NAME, EMAIL_ADDRESS');\r\n\t\t\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\t\ttmpVar = [];\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t_.each(success.results, (all) => {\r\n\t\t\t\t\ttmpVar.push(all);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t\r\n\t\t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\r\n\r\n\t\t\t}, (failed) => {\r\n\t\t\t\ttoastr.error(failed, \"Failed loading BUH Names\");\r\n\t\t\t});\r\n\r\n\t\t}, 500, this.currPredicate);\r\n\r\n\t}\r\n\r\n\tselectedBUH(item){\r\n\t\tthis.controller.ok(item);\r\n\t\t\r\n\t}\r\n\r\n\t//@handle('clear.program.modal')\r\n\tClearSearch(){\r\n\t\tthis._bOPTIONAL_GLOBAL_ID=\"\";\r\n\t\tthis._bFIRST_NAME=\"\";\r\n\t\tthis.varFilterArray = [];\r\n\t\tthis.varFilterArrayLength = 0;\r\n\t}\r\n}\r\n","\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n\r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\n//import {HttpClient} from 'aurelia-http-client';\r\nimport {cache_obj} from 'cache_obj';\r\nimport { DialogController } from 'aurelia-dialog';\r\nimport settings from '../settings';\r\n\r\n@inject(MultiObserver, ObserverLocator, Element, cache_obj,DialogController)\r\nexport class change_password {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\r\n\t//_HttpClient;\r\n\r\n\t_USER;\r\n\t_COMPANY;\r\n\t_PASSWORD;\r\n\r\n    _cache_obj;\r\n    _NEW_PASSWORD;\r\n\r\n\tconstructor(multiObserver, observerLocator, Element, cache_obj,controller) \r\n\t{\r\n\t\tthis.controller=controller;\r\n\t\tthis._cache_obj=cache_obj;\r\n\t}\r\n\r\n    keyPressed($event) {\r\n        if ($event.which === 13) {\r\n            this.savePassword();\r\n        }\r\n    }\r\n\r\n\r\n    savePassword() \r\n    {\r\n        \r\n        if (this._NEW_PASSWORD === undefined || _.isEmpty(this._NEW_PASSWORD) || this._NEW_PASSWORD.length!=8) {\r\n            toastr.error(\"Invalid Password, must be 8 characters long.\", \"Change Password\");\r\n            return;\r\n        }\r\n        settings.isNavigating = true;\r\n        toastr.info(\"Please wait..\", \"Saving Password\");\r\n        \r\n        $.post(settings.serviceNameBase +\"/useraccess/Set_Password\", {\r\n            \"USER_ID\": this._cache_obj.USER.USER_ID,\r\n            \"COMPANY_ID\": this._cache_obj.USER.COMPANY_ID,\r\n            \"Password\": this._NEW_PASSWORD,\r\n            \"HASH\": this._cache_obj.USER.HASH\r\n        }).done((response) => {\r\n            settings.isNavigating = false;\r\n            toastr.clear();\r\n            if (response == \"\" || response == \"false\") {\r\n                toastr.error(\"Problem Occured\", \"Change Password\");\r\n            }\r\n            else if (response == \"duplicate\") {\r\n                toastr.error(\"Password cannot be same as your current.\", \"Change Password\");\r\n            } \r\n            else {\r\n                toastr.success(\"Password successfully saved and e-mailed to you.\", \"Change Password\");\r\n                this.controller.ok(\"\");\r\n            }\r\n        });\r\n\t}\r\n\r\n\r\n}\r\n","import {bindable, inject} from 'aurelia-framework';\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport { MultiObserver }from 'multi-observer';\r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\n\r\n@inject(MultiObserver,ModalWizard,cache_obj,DialogController)\r\nexport class confirm_dialog{\r\n\t@bindable _setContent;\r\n\t@bindable _setTitle;\r\n\t@bindable to;\r\n\t@bindable _id;\r\n\tshowing=false;\r\n\t_buttonTitle = 'Search'\r\n\t_isDisableElement=true;\r\n\t_ModalWizard;\r\n\t_width=\"500\";\r\n\t_message=\"\";\r\n\t_cache_obj;\r\n\tcontroller=null;\r\n\tconstructor(multiObserver,ModalWizard,cache_obj,controller){\r\n\t\t\r\n\t\tthis.controller=controller;\r\n\t\t\r\n\t\tthis._ModalWizard=ModalWizard;\r\n\t\tthis._cache_obj=cache_obj;\r\n\r\n\r\n\t\t//this._cache_obj.OBSERVERS.init_modal.push(() => {\r\n\t\t//\tthis.InitializeModal();\r\n\t\t//});\r\n\r\n\t\tthis._cache_obj.OBSERVERS.close_modal.push((val) => {\r\n\t\t\tthis.CloseModal(val);\r\n\t\t});\r\n\r\n\t\tthis._cache_obj.OBSERVERS.open_modal_message.push((val1,val2,val3) => {\r\n\t\t\tthis.OpenModal(val1,val2,val3);\r\n\t\t});\r\n\r\n\t\tthis._cache_obj.OBSERVERS.enable_modal_button.push((val1,val2) => {\r\n\t\t\tthis.OpenModal(val1,val2);\r\n\t\t});\r\n\t\t\r\n\t}\r\n\r\n\r\n  activate(message)\r\n  {\r\n    this._message=message;\r\n  }\r\n\r\n  /////cannot use this\r\n\t//@handle('init.modal')\r\n    InitializeModal() {\r\n\t\t\t//this._setTitle = this.to.title;\r\n\t\t\t//this._id = this.to.id;\r\n\t\t\t//this._width= this.to.width;\r\n\r\n\t\t\t//if(this.to.display==\"none\")\r\n\t\t\t//{\r\n\t\t\t//\t$(this.btnRef).css(\"visibility\",\"hidden\");\r\n\t\t\t//\tthis._buttonTitle = \"\";\r\n\t\t\t//}\r\n    }\r\n\r\n\r\n\t//@handle('close.modal')\r\n    CloseModal(id) {\r\n    \tif(this._id==id)\r\n    \t\tthis.showing=false;\r\n\r\n    \tthis._ModalWizard.ids.pop();\r\n        //this.messages.push(message);\r\n        //this.dispatcher.dispatch('message.sent', message);\r\n    }\r\n\r\n    //@handle('open.modal.message')\r\n    OpenModal(id, title, message) {\r\n    \tif(this._id==id)\r\n    \t{\t\r\n    \t\tthis._setTitle=title;\r\n    \t\tthis._message=message;\r\n    \t\tthis.showDialog();\r\n    \t\tthis._ModalWizard.ids.push(this._id);\r\n    \t}\r\n    }\r\n\r\n    confirm(){\r\n\r\n  //   \tthis._cache_obj.OBSERVERS.confirm_dialog.forEach((all)=>{\r\n\t\t// \tall(this._message);\r\n\t\t// });\r\n\t\tthis.controller.ok();\r\n\t\t//this._dispatcher.dispatch('confirm.dialog',this._message);\r\n\t}\r\n\r\n\r\n\tshowDialog() {\r\n\t\tthis._setContent = this.to.content;\r\n\t\t//have to do this because theres a problem clicking the modal outside.\r\n\t\t//no sure why this have to be the soltn.\r\n\t\tthis.showing = false;\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.showing = true;\r\n\t\t\tthis._ModalWizard.ids.push(this._id);\r\n\r\n\t\t\tif(this.to.cleardispatch!==undefined)\r\n\t\t\tthis._cache_obj.OBSERVERS[this.to.cleardispatch].forEach((all) => {\r\n\t\t\t\tall();\r\n\t\t\t});\r\n\r\n\t\t\t//this._dispatcher.dispatch(this.to.cleardispatch);\r\n\r\n\t\t}, 10);\r\n\r\n\t}\r\n\r\n\tcontinue(){\r\n\r\n\t}\r\n\r\n\tcloseModal(){\r\n\t\tthis.showing=false;\r\n\t}\r\n\t\r\n\t//@handle('enable.modal.button')\r\n\tenableButton(id ,isEnabled){\r\n\t\tif(this._id==id)\r\n\t\tthis._isDisableElement=!isEnabled;\r\n\t}\r\n}","import {DialogController} from 'aurelia-dialog';\r\n\r\nexport class EditPerson {\r\n  static inject = [DialogController];\r\n  person = { firstName: '' };\r\n  constructor(controller){\r\n    this.controller = controller;\r\n  }\r\n  activate(person){\r\n    this.person = person;\r\n  }\r\n}","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer';\r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';\r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n\r\n@inject(MultiObserver, ObserverLocator, Element, ModalWizard, cache_obj, DialogController)\r\nexport class globalindivmstr {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArray = [];\r\n\tvarFilterArraySelected=[];\r\n\tvarFilterArrayLength=0;\r\n\t_ModalWizard;\r\n\t_cache_obj;\r\n\tcontroller=null;\r\n\tvarActiveFromCompanyMstr=[];\r\n\tconstructor(multiObserver, observerLocator, Element, ModalWizard, cache_obj,controller) {\r\n\t\tthis.controller=controller;\r\n\r\n\t\tthis._ModalWizard=ModalWizard;\r\n\t\tthis._cache_obj=cache_obj;\r\n\r\n\t\ttoastr.info(\"Personnel Data...\", \"Loading..\");\r\n\t\tthis.varActiveFromCompanyMstr = _.filter(getLookups().GLOBAL_COMPANY_MSTR,(all)=>all.STATUS_CD=='ACTV' && all.COMPANY_ID == this._cache_obj.USER.COMPANY_ID).map((val)=>{return val.GLOBAL_ID});\r\n\r\n\t\ttoastr.success(\"Start Search...\", \"Loading Finish..\");\r\n\t\tthis.observerLocator = observerLocator;\r\n\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t\t[this, '_bGLOBAL_INDIV_ID'],\r\n\t\t\t\t[this, '_bPERSONNEL_NAME']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_indiv_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tactivate(model){\r\n\t    if(model.allPersonnel)\r\n\t    \tthis.varActiveFromCompanyMstr = _.filter(getLookups().GLOBAL_COMPANY_MSTR,(all)=>all.STATUS_CD=='ACTV').map((val)=>{return val.GLOBAL_ID});\r\n\t    else\r\n\t    \tthis.varActiveFromCompanyMstr = _.filter(getLookups().GLOBAL_COMPANY_MSTR,(all)=>all.STATUS_CD=='ACTV' && all.COMPANY_ID == this._cache_obj.USER.COMPANY_ID).map((val)=>{return val.GLOBAL_ID});\r\n\t}\r\n\r\n\tattached(){\r\n    \t\t//console.log($(this));\r\n  \t}\r\n\r\n\tselectedTalent(item)\r\n\t{\r\n\r\n\t\tvar isFound=this.varFilterArraySelected.find((_item)=>{\r\n\t\t\tif(_item.GLOBAL_INDIV_ID==item.GLOBAL_INDIV_ID)\r\n\t\t\t{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif( isFound===undefined){\r\n\t\t\tthis.varFilterArraySelected.push(item);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfnKeyup(evt,item)\r\n\t{\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis.varFilterArraySelected.push(this.varFilterArray[0]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfnManualFilter(tmpVar)\r\n\t{\r\n\t\tvar lstPredicates=[];\r\n\t\t_.each(this._rGROUP_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\"){\r\n\r\n\t\t\t\tif(varOb.propertyName.indexOf(\"PERSONNEL_NAME\")>-1)\r\n\t\t\t\t{\r\n\t\t\t\t\t//varOb.propertyName=\"concat(concat(concat(LAST_NAME,', '), GIVEN_NAME)), MIDDLE_NAME)\";\r\n\t\t\t\t\tlstPredicates.push(breeze.Predicate.create(\"concat(concat(concat(LAST_NAME,', '), GIVEN_NAME), MIDDLE_NAME)\", breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tlstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\r\n\t\t});\r\n\r\n\t\treturn tmpVar;\r\n\t}\r\n\r\n\r\n\tonSpeculateProp(newValue, oldValue) {\r\n\r\n\t\tif(this._rGROUP_TITLE===undefined || this._rGROUP_TITLE===null || this._rGROUP_TITLE==='') return;\r\n\r\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\r\n\t\tif(tmpVar.length>0)\r\n\t\t{\r\n\r\n\r\n\r\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'PERSONNEL_NAME').reverse();\r\n \t\t\tthis.varFilterArray = tmpVarNew;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\ttmpVar=this.fnManualFilter(getLookups().GLOBAL_INDIV_WITH_ALIAS);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//check if is inactive then return none;\r\n\t\t\tvar varFound=_.filter(tmpVar,(all)=>{\r\n\r\n\t\t\t\tvar result_p=_.find(this.varActiveFromCompanyMstr,(all_p)=>{\r\n \t\t\t\t\treturn all_p==all.GLOBAL_INDIV_ID;\r\n \t\t\t\t});\r\n             \r\n             //if undefined means not found as inactive\r\n\t\t\t return result_p!=undefined;\r\n\r\n\t\t\t});\r\n\r\n\r\n\r\n\t\t\ttmpVar=varFound;\r\n\t\t\t//console.log(varFound);\r\n\t\t}\r\n\r\n\t\tthis.varFilterArray = tmpVar;\r\n\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\r\n\t}\r\n\r\n\tdeleteSelected(index){\r\n\t\tthis.varFilterArraySelected.splice(index,1);\r\n\t}\r\n\r\n\tSelectingDone(){\r\n\r\n\t\tthis.controller.ok(this.varFilterArraySelected);\r\n\r\n\t}\r\n\r\n\tClearSearch(){\r\n\r\n\t\tthis.varFilterArraySelected=[];\r\n\t\tthis._bGLOBAL_INDIV_ID=\"\";\r\n\t\tthis._bPERSONNEL_NAME=\"\";\r\n\t\tthis.varFilterArray = [];\r\n\t\tthis.varFilterArrayLength = 0;\r\n\r\n\t}\r\n\r\n}\r\n","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n\r\n@inject(MultiObserver, ObserverLocator, Element, ModalWizard, cache_obj, DialogController)\r\nexport class indivmstr {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArray = [];\r\n\tvarFilterArrayLength=0;\r\n\t_ModalWizard;\r\n\t_cache_obj;\r\n\tcontroller=null;\r\n\tvarActiveFromCompanyMstr=[];\r\n\tconstructor(multiObserver, observerLocator, Element, ModalWizard,cache_obj,controller) \r\n\t{\r\n\r\n\t\tthis.controller=controller;\r\n\t\tthis._cache_obj=cache_obj;\r\n\t\tthis._ModalWizard=ModalWizard;\r\n\t\ttoastr.info(\"Personnel Data...\", \"Loading..\");\r\n\r\n\t\ttoastr.success(\"Start Search...\", \"Loading Finish..\");\r\n\r\n\r\n\t\tthis.observerLocator = observerLocator;\r\n\t\t\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t[this, '_bGLOBAL_INDIV_ID'],\r\n\t\t\t[this, '_bPERSONNEL_NAME']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_indiv_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tactivate(model){\r\n\t    if(model.allPersonnel)\r\n\t    \tthis.varActiveFromCompanyMstr = _.filter(getLookups().GLOBAL_COMPANY_MSTR,(all)=>all.STATUS_CD=='ACTV').map((val)=>{return val.GLOBAL_ID});\r\n\t    else\r\n\t    \tthis.varActiveFromCompanyMstr = _.filter(getLookups().GLOBAL_COMPANY_MSTR,(all)=>all.STATUS_CD=='ACTV' && all.COMPANY_ID == this._cache_obj.USER.COMPANY_ID).map((val)=>{return val.GLOBAL_ID});\r\n\t}\r\n\r\n\tselectedIndiv(item) \r\n\t{\r\n\t\t\r\n\t\tthis.controller.ok(item);\r\n\t\r\n\t}\r\n\r\n\tfnManualFilter(tmpVar)\r\n\t{\r\n\r\n\t\tvar lstPredicates=[];\r\n\r\n\t\t_.each(this._rGROUP_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\t\t\t\r\n\t\t\tif(varOb.getValue()!=undefined && \r\n\t\t\t\tvarOb.getValue()!=null && \r\n\t\t\t\tvarOb.getValue()!=\"\" && \r\n\t\t\t\tvarOb.getValue()!=\"undefined\"){\r\n\t\t\t\t\r\n\t\t\t\tif(varOb.propertyName.indexOf(\"PERSONNEL_NAME\")>-1)\r\n\t\t\t\t{\r\n\t\t\t\t\t//varOb.propertyName=\"concat(concat(concat(LAST_NAME,', '), GIVEN_NAME)), MIDDLE_NAME)\";\r\n\t\t\t\t\tlstPredicates.push(breeze.Predicate.create(\"concat(concat(concat(LAST_NAME,', '), GIVEN_NAME), MIDDLE_NAME)\", breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tlstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\r\n\t\t});\r\n\r\n\r\n\t\treturn tmpVar;\r\n\t}\r\n\r\n\tonSpeculateProp(newValue, oldValue) {\r\n\t\t\r\n\t\tif(this._rGROUP_TITLE===undefined || this._rGROUP_TITLE===null) return;\r\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\t\t\r\n\t\tif(tmpVar.length>0) \r\n\t\t{\r\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'PERSONNEL_NAME').reverse();\r\n\t\t\tthis.varFilterArray = tmpVarNew;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\ttmpVar=this.fnManualFilter(getLookups().GLOBAL_INDIV_WITH_ALIAS); \r\n\r\n\t\t\t//check if is inactive then return none;\r\n\t\t\tvar varFound=_.filter(tmpVar,(all)=>{\r\n\r\n\t\t\t\tvar result_p=_.find(this.varActiveFromCompanyMstr,(all_p)=>{\r\n \t\t\t\t\treturn all_p==all.GLOBAL_INDIV_ID;\r\n \t\t\t\t});\r\n             \r\n             //if undefined means not found as inactive\r\n\t\t\t return result_p!=undefined;\r\n\r\n\t\t\t});\r\n\r\n\r\n\r\n\t\t\ttmpVar=varFound;\r\n\t\t}\r\n\t\t\r\n\t\tthis.varFilterArray = tmpVar;\r\n\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\r\n\r\n\t}\r\n\r\n\tfnKeyup(evt,item){\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis.selectedIndiv(this.varFilterArray[0])\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t//@handle('clear.indiv.modal')\r\n\tClearSearch(){\r\n\t\tthis._bGLOBAL_INDIV_ID=\"\";\r\n\t\tthis._bPERSONNEL_NAME=\"\";\r\n\t\tthis.varFilterArray = [];\r\n\t\tthis.varFilterArrayLength = 0;\r\n\t}\r\n\r\n}","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';  \r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n@inject(MultiObserver,ObserverLocator,Element, cache_obj, DialogController)\r\nexport class job {\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArrayLength=0;\r\n\tvarFilterArray = [];\r\n\tcurrPredicate=null;\r\n\tintTest=0;\r\n\thasFocus=true;\r\n\tcontroller=null;\r\n\tconstructor(multiObserver,observerLocator,Element, cache_obj, controller) {\r\n\r\n\t\tthis.controller=controller;\r\n\r\n\t\tthis.observerLocator=observerLocator;\r\n\t\t\r\n\t\tthis._cache_obj=cache_obj;\r\n\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t[this, '_bJOB_GRP'],\r\n\t\t\t[this, '_bJOB_DESC']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_job_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t}\r\n\r\n\tselectedTalent(item)\r\n\t{\r\n\r\n\t\tthis._cache_obj.OBSERVERS.pass_job.forEach((all)=>{\r\n\t\t\tall(item);\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tfnManualFilter(tmpVar)\r\n\t{\r\n\t\tthis.currPredicate = [];\r\n\t\t_.each(this._rJOB_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif (varOb.getValue() != undefined && varOb.getValue() != null && varOb.getValue() != \"\" && varOb.getValue() != \"undefined\")\r\n\t\t\t\tthis.currPredicate.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\r\n\t\t\tif (tmpVar.length > 0)\r\n\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\r\n\t\t});\r\n\r\n\t\treturn tmpVar;\r\n\t}\r\n\r\n\tonSpeculateProp(newValue, oldValue) \r\n\t{\r\n\t\t\r\n\r\n\t\tvar varValuesHasChanged=false;\r\n\r\n\t\t//check if inputs has value else return;\r\n\t\t_.each(this._rJOB_TITLE.querySelectorAll('input'), all => \r\n\t\t{\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n\t\t\t{\t\r\n\t\t\t\tvarValuesHasChanged=true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\tif(!varValuesHasChanged) return;\r\n\r\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\r\n\t\t//if has existing results, use it, else, query to server\r\n\t\tif(tmpVar.length>0) \r\n\t\t{\r\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'JOB_DESC').reverse();\r\n\t\t\tthis.varFilterArray = tmpVarNew;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//delay to get minimize bloated multiple/simultaneous searching\r\n\t\tsetTimeout((a) => \r\n\t\t{\r\n\r\n\t\t\tif (a !== this.currPredicate)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar varJobs = getLookups().JOB_GRP_CATEGORY.filter\r\n\t\t\t((all)=>all.COMPANY_ID==this._cache_obj.USER.COMPANY_ID);\r\n\r\n\t\t\tthis.varFilterArray = [];\r\n\r\n\t\t\t_.each(varJobs, (all) => {\r\n\t\t\t\tif(all.JOB_DESC.indexOf(\"[SELECT\")==-1)\r\n\t\t\t\t\ttmpVar.push({\r\n\t\t\t\t\t\tJOB_DESC: all.JOB_DESC,\r\n\t\t\t\t\t\tJOB_GRP: all.CATEGORY_DESC,\r\n\t\t\t\t\t\tJOB_ID: all.JOB_ID\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\ttmpVar=this.fnManualFilter(tmpVar); \r\n\r\n\t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\r\n\t\t}, \r\n\r\n\t\t500, this.currPredicate);\r\n\r\n\t}\r\n\r\n\tselectedJob(item)\r\n\t{\r\n\r\n\t\tthis.controller.ok(item);\r\n\r\n\t}\r\n\r\n\tClearSearch()\r\n\t{\r\n\t\tthis._bJOB_GRP=\"\";\r\n\t\tthis._bJOB_DESC=\"\";\r\n\t\tthis.varFilterArray = [];\r\n\t\tthis.varFilterArrayLength = 0;\r\n\t\t\r\n\t\tsetTimeout(() => {\r\n\t\t\t$(this.refJobDesc).focus();\r\n\t\t}, 500);\r\n\t}\r\n\r\n\r\n\tfnKeyup(evt,item){\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\r\n\t\t\t\tthis._cache_obj.OBSERVERS.pass_job.forEach((all)=>{\r\n\t\t\t\t\tall(this.varFilterArray[0]);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';  \r\nimport { EntityManager, EntityQuery } from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\n//import {HttpClient} from 'aurelia-http-client';\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport {cache_obj} from 'cache_obj';\r\nimport { DialogController, DialogService} from 'aurelia-dialog';\r\nimport settings from '../settings';\r\nimport moment from 'moment';\r\nimport { confirm_dialog } from 'modals/confirm_dialog';\r\nimport { setCookie } from '../helpers';\r\n\r\n@inject(MultiObserver, ObserverLocator, Element, ModalWizard, cache_obj, DialogController, DialogService)\r\nexport class login {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\r\n\tvarFilterArray = [];\r\n\tvarFilterArraySelected = [];\r\n\r\n\t//_HttpClient;\r\n\t_user_content = [];\r\n\t_content = [];\r\n\t@bindable _USER;\r\n\t_COMPANY;\r\n\t_PASSWORD;\r\n\t_ModalWizard;\r\n    _cache_obj;\r\n    _companies=[];\r\n    _users = [];\r\n    _USER_PROFILE_MSTR = [];\r\n    user_expired = false;\r\n    disableLogButton = false;\r\n    dialogService;\r\n    constructor(multiObserver, observerLocator, Element, ModalWizard, cache_obj, controller, DialogService) \r\n    {\r\n        \r\n     \r\n        this.dialogService = DialogService;\r\n        this.controller = controller;\r\n        //controller.settings.lock = true;\r\n\t\tthis._ModalWizard=ModalWizard;\r\n\r\n\t\tthis._cache_obj=cache_obj;\r\n\t\t//httpClient.configure(config => {\r\n\t\t//\tconfig\r\n  //              .withBaseUrl(settings.actualCostWebUrl+'/search/')\r\n\t\t//\t\t//.withHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept')\r\n\t\t//});\r\n\r\n\t\t//this._HttpClient = httpClient;\r\n\r\n\t\t////this._HttpClient.post(\"get_users\").then(response => {\r\n\t\t////\tthis._content = JSON.parse(response.content);\r\n  ////      });\r\n\r\n\t\t\r\n        var varGetUserRole = EntityQuery().from('USER_ROLE_TRX').orderBy(\"USER_ID\");\r\n\r\n        EntityManager().executeQuery(varGetUserRole).then((found) => {\r\n        \tthis._user_content.push({});\r\n\r\n            found.results.forEach((all) => {\r\n            //this._user_content.push(all);\r\n              \r\n\t\t\t// if(all.ROLE_CD==null || all.ROLE_CD==undefined)\r\n\t\t\t// {\r\n\t\t\t// \tthis._user_content.push(all);\r\n\t\t\t// }\r\n\t\t\t//if(all.ROLE_CD==null || all.ROLE_CD==undefined)\r\n\t\t\t//{\r\n               var found = this._user_content.find((all2=>all2.USER_ID==all.USER_ID));\r\n               if(found==undefined)\r\n\t\t\t\tthis._user_content.push(all);\r\n\t\t\t//}\r\n   //          else if (all.ROLE_CD.includes('ACCESSALL') || all.ROLE_CD.includes('PPFCS'))\r\n\t\t\t// {\r\n\t\t\t// \tthis._user_content.push(all);\r\n\t\t\t// }\r\n\r\n\t\t});\r\n        });\r\n\r\n\r\n\r\n        EntityManager().executeQuery(EntityQuery().from('COMPANY_MSTR').orderBy(\"COMPANY_NAME\")).then((found) => {\r\n            this._companies.push({ COMPANY_ID: 0, COMPANY_NAME: \"\" });\r\n            found.results.forEach((all) => {\r\n                this._companies.push({ COMPANY_ID: all.COMPANY_ID, COMPANY_NAME: all.COMPANY_NAME });\r\n            });\r\n        });\r\n\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_log.push(() => {\r\n\t\t\tthis.ClearLogin();\r\n\t\t});\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_login_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n        EntityManager().executeQuery(EntityQuery().from('USER_PROFILE_MSTR')).then((found) => {\r\n            this._USER_PROFILE_MSTR=found.results;\r\n        });\r\n\r\n        //$.ajax({\r\n        //    type: 'get',\r\n        //    url: settings.serviceNameBase + \"/UserAccess/Check_User\",\r\n        //    data: {\r\n        //        \"USER_ID\": \"KARRENA\",\r\n        //        \"COMPANY_ID\": 1,\r\n        //        \"PASSWORD\": \"12345678\",\r\n        //        \"UPDATE_EXPIRED\": false\r\n        //    },\r\n        //    xhrFields: {\r\n        //        withCredentials: true\r\n        //    },\r\n        //         success: function () { alert(\"Success\"); },\r\n        //    error: function () { alert('Failed!'); }\r\n        //});\r\n\r\n        //$.post(settings.serviceNameBase + \"/UserAccess/Check_User\", {\r\n        //    \"USER_ID\": \"KARRENA\",\r\n        //    \"COMPANY_ID\": 1,\r\n        //    \"PASSWORD\": \"12345678\",\r\n        //    \"UPDATE_EXPIRED\": false\r\n        //}).done((response) => {\r\n        //    console.log(response);\r\n        //    this.loginSuccess(response)//,this._dispatcher\r\n        //    this._ModalWizard.ids.pop();\r\n        //});\r\n\r\n        //$.ajax({\r\n\r\n        //    url: settings.serviceNameBase + \"/UserAccess/Check_User\",\r\n        //    data: {\r\n        //    \"USER_ID\": \"KARRENA\",\r\n        //    \"COMPANY_ID\": 1,\r\n        //    \"PASSWORD\": \"12345678\",\r\n        //    \"UPDATE_EXPIRED\": false},\r\n        //    type: 'GET',\r\n        //    crossDomain: true,\r\n        //    dataType: 'jsonp',\r\n        //    success: function () { alert(\"Success\"); },\r\n        //    error: function () { alert('Failed!'); }\r\n        //    //beforeSend: xhr.setRequestHeader('Authorization', token)\r\n        //});\r\n\r\n       /* $.ajax({\r\n            type: \"GET\",\r\n            dataType: 'jsonp',\r\n            headers: {\r\n                'Access-Control-Allow-Origin': '*'\r\n            },\r\n            data: {\r\n            \"USER_ID\": \"KARRENA\",\r\n            \"COMPANY_ID\": 1,\r\n            \"PASSWORD\": \"12345678\",\r\n            \"UPDATE_EXPIRED\": false},\r\n            url: settings.serviceNameBase + \"/UserAccess/Check_User\",\r\n            success: function (data) {\r\n                alert(9);\r\n            }\r\n        });*/\r\n\t}\r\n\r\n\tkeyPressed($event)\r\n\t{\r\n\t\tif ($event.which === 13) {\r\n\t\t\tthis.tryLogin();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\ttryLogin() \r\n    {\r\n\r\n        //$.ajax({\r\n        //    type: \"POST\",\r\n        //    url: \"http://localhost:30313/home/Check_User\",\r\n        //    jsonp: \"callback\",\r\n        //    success: (response) => {\r\n        //    this.loginSuccess(response)//,this._dispatcher\r\n        //    this._ModalWizard.ids.pop();\r\n        //    },\r\n        //    dataType: \"jsonp\"\r\n        //});\r\n\r\n      //  window.open(\"http://localhost:30313/home/Utilization_Type_A\", \"1\");\r\n        \r\n        this.disableLogButton = true;\r\n\r\n        if (this._PASSWORD === undefined || _.isEmpty(this._PASSWORD) || this._USER.USER_ID === undefined || _.isEmpty(this._USER.USER_ID)) \r\n        {\r\n            toastr.error(\"USER ID/PASSWORD cannot be empty.\", \"Change Password\");\r\n            this.disableLogButton = false;\r\n            return;\r\n        }\r\n        else if (this._PASSWORD.length != 8)\r\n        {\r\n            toastr.error(\"Invalid Password, must be 8 characters long.\", \"Change Password\");\r\n            this.disableLogButton = false;\r\n            return;\r\n        }\r\n\r\n        //_NEW_PASSWORD\r\n        if (this.user_expired)\r\n        {\r\n            if (this._PASSWORD == this._NEW_PASSWORD)\r\n            {\r\n                toastr.error(\"New password cannot be similar with current.\", \"Password\");\r\n                this.disableLogButton = false;\r\n                return;\r\n            }\r\n            else if (this._NEW_PASSWORD === undefined || _.isEmpty(this._NEW_PASSWORD) || this._NEW_PASSWORD.length != 8) \r\n            {\r\n                toastr.error(\"Invalid Password, must be 8 characters long.\", \"Change Password\");\r\n                this.disableLogButton = false;\r\n                return;\r\n            }\r\n               \r\n        }\r\n\r\n        settings.isNavigating = true;\r\n        toastr.info(\"Please wait..\", \"Authentication\", { timeOut: 30000});\r\n       \r\n        if (this.user_expired) {\r\n            $.post(settings.serviceNameBase + \"/useraccess/Set_Password\", {\r\n                \"USER_ID\": this._USER.USER_ID,\r\n                \"COMPANY_ID\": this._COMPANY.COMPANY_ID,\r\n                \"PASSWORD\": this._PASSWORD,\r\n                \"NEWPASSWORD\": this._NEW_PASSWORD,\r\n                \"HASH\": \"\"\r\n            }).done((response) => {\r\n                toastr.clear();\r\n                if (response == \"\" || response == \"false\") {\r\n                    toastr.error(\"Problem Occured\", \"Change Password\");\r\n                    this.disableLogButton = false;\r\n                }\r\n                else if (response == \"duplicate\") {\r\n                    toastr.error(\"Password cannot be same as your current.\", \"Change Password\");\r\n                    this.disableLogButton = false;\r\n                }\r\n                else {\r\n                  \r\n                    toastr.success(\"Password successfully saved and e-mailed to you.\", \"Change Password\");\r\n                    this._PASSWORD = this._NEW_PASSWORD;\r\n                    this.fnCheckUser();\r\n                }\r\n                settings.isNavigating = false;\r\n            });\r\n        }\r\n        else\r\n        {\r\n         \r\n            this.fnCheckUser();\r\n        }\r\n            \r\n      \r\n       \r\n    }\r\n\r\n    fnCheckUser()\r\n    {\r\n\r\n        settings.isNavigating = false;\r\n        toastr.clear();\r\n        //$.ajax({\r\n        //    dataType: \"json\",\r\n        //    type: \"GET\",\r\n        //    url: settings.serviceNameBase + \"/UserAccess/Check_User\",\r\n        //    success: function (result) {\r\n        //        console.log(result);\r\n        //    }\r\n        //});\r\n\r\n        $.post(settings.serviceNameBase + \"/UserAccess/Check_User\", {\r\n            \"USER_ID\": this._USER.USER_ID,\r\n            \"COMPANY_ID\": this._COMPANY.COMPANY_ID,\r\n            \"PASSWORD\": this._PASSWORD,\r\n            \"UPDATE_EXPIRED\": false\r\n        }).done((response) => {\r\n            //console.log(response);\r\n            this.loginSuccess(response)//,this._dispatcher\r\n            this._ModalWizard.ids.pop();\r\n        });\r\n    }\r\n\r\n\tloginSuccess(response, CALLER)\r\n\t{\r\n        //console.log(response);\r\n\t\tif (response == \"\") {\r\n            toastr.error(\"USER ID Not found\", \"Searching USER..\");\r\n            this.disableLogButton = false;\r\n            return;\r\n\t\t} else {\r\n            toastr.success(\"Welcome.. \" + response.USER_ID, \"User Found\");\r\n          \r\n            var varUserAtt = response;//JSON.parse(response);\r\n            varUserAtt.ROLE_CD = this._USER.ROLE_CD;\r\n            \r\n            this.controller.ok(varUserAtt);\r\n\r\n            this._cache_obj.USER = varUserAtt;\r\n\r\n\t\t\tthis._cache_obj.ALLOW_PASS_CONFIDENTIAL = false;\r\n          \r\n\t\t\tvar checkRole = EntityQuery().from('MODULE_ACCESS_TRX').where(\"ROLE_CD\", \"==\", this._USER.ROLE_CD)\r\n\t\t\t\t.select('ROLE_CD,MODULE_MSTR.MODULE_NAME,ACCESS_FL')\r\n\t\t\t\t.expand('MODULE_MSTR');\r\n            \r\n\t\t\tEntityManager().executeQuery(checkRole).then((success) => \r\n\t\t\t{\r\n\t\t\t\tsuccess.results.forEach((all) => {\r\n\t\t\t\t\tif (all.ROLE_CD == this._USER.ROLE_CD) {\r\n\r\n\t\t\t\t\t\tif (all.MODULE_MSTR.MODULE_NAME.includes(\"CONCEAL\") && all.ACCESS_FL == \"1\") {\r\n\t\t\t\t\t\t\tthis._cache_obj.ALLOW_PASS_CONFIDENTIAL = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n            });\r\n\r\n         \r\n            $.post(settings.serviceNameBase + \"/UserAccess/User_Access\", {\r\n                \"USER_ID\": this._USER.USER_ID,\r\n                \"HASH\": this._USER.HASH\r\n            }).done((response) => {\r\n                this._cache_obj._ACCESS = response;\r\n                });\r\n\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tClearLogin()\r\n\t{\r\n\t\tthis._USER=\"\";\r\n\t\tthis._COMPANY=\"\";\r\n\t\tthis._PASSWORD=\"\";\r\n\r\n        this._cache_obj.USER = {};\r\n        this._cache_obj._ACCESS = {};\r\n\t}\t\t\r\n\r\n\t//@handle('clear.login.modal')\r\n\tClearSearch()\r\n\t{\r\n\t\tthis._USER=\"\";\r\n\t\tthis._COMPANY=null;\r\n\t\tthis._PASSWORD=\"\";\r\n    }\r\n\r\n    resetPassword() {\r\n     \r\n        if (_.isUndefined(this._USER.USER_ID) || _.isNull(this._USER.USER_ID) || this._USER.USER_ID.trim().length === 0\r\n            || _.isUndefined(this._COMPANY.COMPANY_ID) || _.isNull(this._COMPANY.COMPANY_ID)) {\r\n            toastr.error(\"Invalid USER/COMPANY\", \"Reset Password\");\r\n            return;\r\n        }\r\n\r\n        this.dialogService.open({ viewModel: confirm_dialog, model: 'Reset Password?' }).whenClosed(response => {\r\n            if (!response.wasCancelled) {\r\n\r\n                toastr.info(\"Please wait..\", \"Resetting Password\");\r\n                settings.isNavigating = true;\r\n                $.post(settings.serviceNameBase + \"/UserAccess/Reset_Password\", {\r\n                    \"USER_ID\": this._USER.USER_ID,\r\n                    \"COMPANY_ID\": this._COMPANY.COMPANY_ID\r\n                }).done((response) => {\r\n                    settings.isNavigating = false;\r\n                    if (response == \"false\") {\r\n                        toastr.error(\"Error saving new password.\", \"Reset Password\");\r\n                    } else {\r\n                        toastr.success(\"Password has been reset and emailed to you.\", \"Reset Password\");\r\n\r\n                        if (this.user_expired)\r\n                            setTimeout(() => { location.reload(); }, 3000);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n       \r\n    }\r\n\r\n    _USERChanged()\r\n    {\r\n        if ((_.isUndefined(this._USER.USER_ID) || _.isNull(this._USER.USER_ID) || this._USER.USER_ID.trim().length === 0))\r\n        { }\r\n        else\r\n        {\r\n            var varFound = this._USER_PROFILE_MSTR.find((all) => all.USER_ID == this._USER.USER_ID);\r\n            if (!_.isUndefined(varFound.EXPIRE_DT) && !_.isNull(varFound.EXPIRE_DT))\r\n            {\r\n                //console.clear();\r\n                \r\n                var varDateCompare = new Date(moment(new Date(varFound.EXPIRE_DT)));\r\n                if (varDateCompare < new Date())\r\n                {\r\n                    if (!this.user_expired)\r\n                        this.user_expired = true;\r\n                }\r\n                else\r\n                    this.user_expired = false;\r\n            }\r\n            else\r\n            {\r\n                toastr.error(\"Please call administrator.\", \"ACCOUNT EXPIRY PROBLEM.\");\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n    // validateDate(){\r\n    //     var StartDt = new Date($(\"#startDt\").val());\r\n    //     var EndDt = new Date($(\"#EndDt\").val());\r\n    //     var dateToday = new Date();\r\n    //     if(StartDt < dateToday ){\r\n    //         toastr.clear();\r\n    //         toastr.error(\"Start date cannot be less than date today.\");\r\n    //     }\r\n\r\n    //     if(StartDt>EndDt){\r\n    //         toastr.clear();\r\n    //         toastr.error(\"End date cannot be greater than date today\");\r\n    //     }\r\n\r\n    // }\r\n\r\n}\r\n","export class ModalWizard{\r\n   ids = [];\r\n}","import {bindable, inject} from 'aurelia-framework';\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport {MultiObserver}from 'multi-observer';\r\nimport {  cache_obj } from 'cache_obj';\r\n\r\n@inject(ModalWizard,MultiObserver,cache_obj)\r\nexport class modalcontainer{\r\n\t@bindable _setContent;\r\n\t@bindable _setTitle;\r\n\t@bindable to;\r\n\t@bindable _id;\r\n\tshowing=false;\r\n\t_buttonTitle = 'Search'\r\n\t_isDisableElement=true;\r\n\t_ModalWizard;\r\n\t_width=\"900\";\r\n\tmultiObserver;\r\n\t_cache_obj = null;\r\n\tconstructor(ModalWizard,multiObserver,cache_obj){\r\n\t\tthis._cache_obj=cache_obj;\r\n\r\n\t\tthis._ModalWizard=ModalWizard;\r\n\t\tthis.multiObserver=multiObserver;\r\n\r\n\t\t\r\n\t\tthis._cache_obj.OBSERVERS.init_modal.push(() => {\r\n\t\t\tthis.InitializeModal();\r\n\t\t});\r\n\r\n\t\tthis._cache_obj.OBSERVERS.close_modal.push((val) => {\r\n\t\t\tthis.CloseModal(val);\r\n\t\t});\r\n    \t\r\n    \tthis._cache_obj.OBSERVERS.open_modal.push((val) => {\r\n\t\t\tthis.OpenModal(val);\r\n\t\t});\r\n\r\n\t\tthis._cache_obj.OBSERVERS.enable_modal_button.push((val1,val2) => {\r\n\t\t\tthis.enableButton(val1,val2);\r\n\t\t});\r\n\t}\r\n\r\n\r\n\r\n\t//@handle('init.modal')\r\n    InitializeModal() {\r\n\r\n    \t\t//console.log(this.to);\r\n    \t\tthis._buttonTitle = this.to.buttonTitle;\r\n\t\t\tthis._setTitle = this.to.title;\r\n\t\t\tthis._id = this.to.id;\r\n\t\t\tthis._width= this.to.width;\r\n\r\n\t\t\tif(this.to.display==\"none\")\r\n\t\t\t{\r\n\t\t\t\t$(this.btnRef).css(\"visibility\",\"hidden\");\r\n\t\t\t\tthis._buttonTitle = \"\";\r\n\t\t\t}\r\n    }\r\n\r\n\r\n\t//@handle('close.modal')\r\n    CloseModal(id) {\r\n    \tif(this._id==id)\r\n    \t\tthis.showing=false;\r\n\r\n    \tthis._ModalWizard.ids.pop();\r\n        //this.messages.push(message);\r\n        //this.dispatcher.dispatch('message.sent', message);\r\n    }\r\n\r\n    //@handle('open.modal')\r\n    OpenModal(id) {\r\n\r\n    \t// console.log(this._id);\r\n    \t// \tconsole.log(id);\r\n    \tif(this._id==id)\r\n    \t{\r\n    \t\t//console.log(id);\r\n    \t\tthis.showDialog();\r\n    \t\tthis._ModalWizard.ids.push(this._id);\r\n    \t}\r\n    }\r\n\r\n\tshowDialog() {\r\n\r\n\t\t //console.log(this.multiObserver);\r\n    // this.multiObserver.observe(\r\n    //   [\r\n    //     [this._cache_obj, 'TEST1']\r\n    //   ], (newValue, oldValue) => {\r\n\r\n    //   \tconsole.log(2);\r\n    //  \tthis.showing=false;\r\n    // \tthis._ModalWizard.ids.pop();\r\n\r\n    //   });\r\n\r\n\t\tthis._setContent = this.to.content;\r\n\t\t//have to do this because theres a problem clicking the modal outside.\r\n\t\t//no sure why this have to be the soltn.\r\n\t\tthis.showing = false;\r\n\r\n\t\t// window.setTimeout(() => {\r\n\t\t// \tconsole.log(\"Passed dialog3\");\r\n\t\t// \tthis.showing = true;\r\n\t\t// \tthis._ModalWizard.ids.push(this._id);\r\n\t\t// \tthis._dispatcher.dispatch(this.to.cleardispatch);\r\n\t\t// }, 1000);\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.showing = true;\r\n\t\t\tthis._ModalWizard.ids.push(this._id);\r\n\r\n\t\t\t//this._cache_obj.CALLER.ACTION=this.to.cleardispatch;\r\n\r\n\t\t\tif(this.to.cleardispatch!==undefined)\r\n\t\t\tthis._cache_obj.OBSERVERS[this.to.cleardispatch].forEach((all) => {\r\n\t\t\t\tall();\r\n\t\t\t});\r\n\r\n\r\n\t\t\t//this._dispatcher.dispatch(this.to.cleardispatch);\r\n\t\t}, 500);\r\n\r\n\t}\r\n\r\n\tcloseModal(){\r\n\t\tthis.showing=false;\r\n\t}\r\n\t\r\n\t//@handle('enable.modal.button')\r\n\tenableButton(id ,isEnabled){\r\n\t\tif(this._id==id)\r\n\t\tthis._isDisableElement=!isEnabled;\r\n\t}\r\n}","import {getLookups} from '../masterfiles';\r\nimport {inject, bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';  \r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {DialogController} from 'aurelia-dialog';\r\n\r\n@inject(Element, DialogController)\r\nexport class paymentterm {\r\n\r\n\tvarFilterArray = [];\r\n\tcontroller=null;\r\n\tconstructor(Element, controller) {\r\n\r\n\t\tthis.controller=controller;\r\n\t\t\r\n\t\tthis.varFilterArray=getLookups().PAYMENT_TERM;\r\n\r\n\t}\r\n\r\n\tselectedTerm(item){\r\n\t\t\r\n\t\tthis.controller.ok(item);\r\n\r\n\t}\r\n\r\n\tfnKeyup(evt,item){\r\n\t\tconsole.log(evt.keyCode);\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis.selectedIndiv(this.varFilterArray[0])\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';  \r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n@inject(MultiObserver,ObserverLocator,Element, cache_obj,DialogController)\r\nexport class program {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArrayLength=0;\r\n\tvarFilterArray = [];\r\n\tcurrPredicate=null;\r\n\tcontroller=null;\r\n\tconstructor(multiObserver,observerLocator,Element, cache_obj, controller) {\r\n\t\tthis.controller=controller;\r\n\t\r\n\t\t\r\n\t\tthis.observerLocator=observerLocator;\r\n\t\t\r\n\t\tthis.items=getLookups().BDGT_TMPL_HDR;\r\n\r\n\t\tthis._cache_obj=cache_obj;\r\n\t\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t\t[this, '_bPROGRAM_CD'],\r\n\t\t\t\t[this, '_bPROGRAM_TITLE']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_program_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tselectedTalent(item){\r\n\r\n\t\tthis._cache_obj.OBSERVERS.pass_value.forEach((all) => {\r\n\t\t\tall(item);\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tonSpeculateProp(newValue, oldValue) {\r\n\t\t\r\n\t\t\r\n\t\tvar varValuesHasChanged=false;\r\n\t\t//check if inputs has value else return;\r\n\t\t_.each(this._rBUDGET_TITLE.querySelectorAll('input'), all => {\r\n\t\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n\t\t\t\t{\t\r\n\t\t\t\t\tvarValuesHasChanged=true;\r\n\t\t\t\t}\r\n\t\t});\r\n\t\t\r\n\r\n\t\tif(!varValuesHasChanged) return;\r\n\t\t//++this.intTest;\r\n\t\tvar tmpVar = [];\r\n\t\tif(this.varFilterArray.length>0)\r\n\t\t\ttmpVar=this.varFilterArray;\r\n\r\n\t\tvar lstPredicates=[];\r\n\t\t_.each(this._rBUDGET_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\t\t\t\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\")\r\n\t\t\t\r\n\t\t\t\tlstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\r\n\t\t\tif(tmpVar.length>0)\r\n\t\t\t{\r\n\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t});\r\n\r\n\t\tthis.currPredicate=lstPredicates;\r\n\r\n\r\n\t\t//if has existing results, use it, else, query to server\r\n\t\tif(tmpVar.length>0) \r\n\t\t{\r\n \t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t//console.log(this._cache_obj.PROGRAM_USER);\r\n\t\tif(this._cache_obj.PROGRAM_USER.length==0)\r\n\t\t{\r\n\r\n\t\t\tvar _query = EntityQuery().from('PROGRAM_USER_TRX').where(\"USER_ID\", \"==\", this._cache_obj.USER.USER_ID);\r\n\t\t\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\t//\tconsole.log(success.results);\r\n\t\t\t\tsuccess.results.forEach((all)=>{\r\n\t\t\t\t\t//console.log(all.PROGRAM_ID +\"TEST\"+all.USER_ID);\r\n\t\t\t\t\tif(all.USER_ID==this._cache_obj.USER.USER_ID)\r\n\t\t\t\t\t\tthis._cache_obj.PROGRAM_USER.push(all);\r\n\t\t\t\t});\r\n\t\t\t\t\t//var findProgramUser=this._cache_obj.PROGRAM_USER.find((allP)=>allP.PROGRAM_ID==\"9233\");\r\n\t\t\t\t\t//console.log(findProgramUser);\r\n\t\t\t});\r\n\t\t\r\n\t\t}//\r\n\r\n\t\t//delay to get minimize bloated multiple/simultaneous searching\r\n\t\tsetTimeout((a) => {\r\n\t\t\t\r\n\t\t\tif (a !== this.currPredicate)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis.varFilterArray = [];\r\n\r\n\t\t\tvar _query = EntityQuery().from('PROGRAM_MSTR').where(breeze.Predicate.and(this.currPredicate)).select('PROGRAM_CD,PROGRAM_TITLE,PROGRAM_ID,BUH_PERSONNEL_ID');\r\n\t\t\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\t\ttmpVar = [];\r\n\r\n\t\t\t\t_.each(success.results, (all) => {\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar findProgramUser=this._cache_obj.PROGRAM_USER.find((allP)=>allP.PROGRAM_ID==all.PROGRAM_ID);\r\n\t\t\t\t\tif(findProgramUser!== undefined)\r\n\t\t\t\t\t{\r\n\r\n\t\t\t\t\t\ttmpVar.push({\r\n\t\t\t\t\t\tPROGRAM_TITLE: all.PROGRAM_TITLE,\r\n\t\t\t\t\t\tPROGRAM_CD: all.PROGRAM_CD,\r\n\t\t\t\t\t\tPROGRAM_ID: all.PROGRAM_ID,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//if (tmpVar.length < this.varFilterArray.length || this.varFilterArray.length == 0) { //console.log(tmpVar);\r\n\t\t\t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\t\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\t\t\t\t//}\r\n\r\n\t\t\t}, (failed) => {\r\n\t\t\t\ttoastr.error(failed, \"Failed loading PROGRAM Names\");\r\n\t\t\t});\r\n\r\n\t\t}, 500, this.currPredicate);\r\n\r\n\t}\r\n\r\n\tselectedProgram(item){\r\n\r\n\t\t// this._cache_obj.CALLER.VALUE1 = item;\r\n\t\t// this._cache_obj.CALLER.ACTION=\"pass.program\";\r\n\r\n\t\tthis._cache_obj.OBSERVERS.pass_program.forEach((all) => {\r\n\t\t\tall(item);\r\n\t\t});\r\n\r\n\t\tthis.controller.ok();\r\n\t\t//this._dispatcher.dispatch('pass.program', item);\r\n\t}\r\n\r\n\t//@handle('clear.program.modal')\r\n\tClearSearch(){\r\n\t\tthis._bPROGRAM_CD=\"\";\r\n\t\tthis._bPROGRAM_TITLE=\"\";\r\n\t\tthis.varFilterArray = [];\r\n\t\tthis.varFilterArrayLength = 0;\r\n\t}\r\n}\r\n","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';  \r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\n\r\n@inject(MultiObserver,ObserverLocator,Element,cache_obj,DialogController)\r\nexport class talentmanagergroups {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\r\n\tvarFilterArray = [];\r\n\t//_dispatcher;\r\n\tvarFilterArrayLength=0;\r\n\tpageindex=0;\r\n\t_cache_obj;\r\n\tcontroller=null;\r\n\r\n\tconstructor(multiObserver,observerLocator,Element,cache_obj,controller) {\r\n\t\tthis.controller=controller;\r\n\t\t//this._dispatcher=Dispatcher;\r\n\t\tthis._cache_obj = cache_obj;\r\n\t\tthis.observerLocator=observerLocator;\r\n\t\t\r\n\t\tthis.items=getLookups().GLOBAL_GRP_MSTR;\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t[this, '_bGLOBAL_GRP_ID'],\r\n\t\t\t[this, '_bGROUP_NAME']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_talentmanager_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tselectedTalent(item)\r\n\t{\r\n\t\t\r\n\t\tthis.controller.ok(item);\r\n\r\n\t}\r\n\r\n\tfnKeyup(evt,item)\r\n\t{\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis._cache_obj.OBSERVERS.pass_value.forEach((all) => {\r\n\t\t\t\t\tall(this.varFilterArray[0]);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSpeculateProp(newValue, oldValue) \r\n\t{\r\n\r\n\r\n\t\tvar varValuesHasChanged=false;\r\n\t\t//check if inputs has value else return;\r\n\t\t_.each(this._rGROUP_TITLE.querySelectorAll('input'), all => {\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n\t\t\t{\t\r\n\t\t\t\tvarValuesHasChanged=true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\r\n\r\n\t\tif(!varValuesHasChanged) return;\r\n\r\n\t\tvar tmpVar = this.items;\r\n\t\t_.each(this._rGROUP_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\t\t\t\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\")\r\n\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue().toUpperCase() , all.getAttribute('searchable').replace('_s', ''));\r\n\r\n\t\t});\r\n\r\n\t\tthis.varFilterArray = tmpVar;\r\n\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t}\r\n\r\n\t//@handle('clear.talentmanager.modal')\r\n\tClearSearch()\r\n\t{\r\n\t\tthis.varFilterArray=[];\r\n\t\tthis.varFilterArrayLength=0;\r\n\t\tthis._bGLOBAL_GRP_ID=\"\";\r\n\t\tthis._bGROUP_NAME=\"\";\r\n\t\tthis.varFilterArray = [];\r\n\t\tthis.varFilterArrayLength=0;\r\n\t}\r\n}","export class obj_personnel\r\n{\r\n\tglobal_indiv_id=\"\";\t\r\n\tediting_status=\"\";\r\n    HEADER = {\r\n    \tcitizenship:[],\r\n    \tgroup:[]\r\n    };\r\n    GROUP_INFO = {\r\n    \tmodel:{},\r\n    \tmembers:[]\r\n    };\r\n\tCONTACT={\r\n\t\tstatus:\"\",\r\n\t\tmodelAddress:{},\r\n\t\tstatusContact:\"Add\",\r\n\t\tmodelContact:{},\r\n\t\tmodelInternet:{},\r\n\t\taddress:[],\r\n\t\tcontact:[],\r\n\t\temail:[],\r\n\t\twebsite:[]\r\n\t};\r\n\tEDUCATIONAL_ACHIEVEMENT={\r\n\t\tstatus:\"\",\r\n\t\tmodel:{},\r\n\t\tlist:[]\r\n\t};\r\n\tCHARACTERISTIC=[];\r\n\tSKILLS={\r\n\t\tmodel:{},\r\n\t\tlist:[]\r\n\t};\r\n\tLANGUAGE_DIALECT={\r\n\t\tmodel:{},\r\n\t\tlist:[]\r\n\t};\r\n\tMEDICAL_RECORD={\r\n\t\tmodel:{},\r\n\t\tlist:[]\r\n\t};\r\n\tRELATIVE={\r\n\t\tparents:{\r\n\t\t\tmother:{},\r\n\t\t\tfather:{}\r\n\t\t},\r\n\t\tsiblings:{\r\n\t\t\tmodel:{},\r\n\t\t\tlist:[]\r\n\t\t},\r\n\t\tspouse:{},\r\n\t\temergency_contact:{\r\n\t\t\tmodel:{},\r\n\t\t\tlist:[]\r\n\t\t}\r\n\t};\r\n\tWORK_EXPERIENCE={\r\n\t\tmodel:{},\r\n\t\tlist:[]\r\n\t};\r\n\tAWARD={\r\n\t\tmodel:{},\r\n\t\tlist:[]\r\n\t};\r\n\tSEMINARS=[];\r\n\tGOVERNMENT_INFO={\r\n\t\tmodelTaxAffidavit:{},\r\n\t\tmodelPermit:{},\r\n\t\ttax_affidavit:[],\r\n\t\tpermits:[]\r\n\t};\r\n\tGOVERNMENT_EXAM={\r\n\t\tmodel:{},\r\n\t\tlist:[]\r\n\t};\r\n\tCRIMINAL_RECORD={\r\n\t\tcivil:{\r\n\t\t\tmodel:{},\r\n\t\t\tlist:[]\r\n\t\t},\r\n\t\tadministrative:{\r\n\t\t\tmodel:{},\r\n\t\t\tlist:[]\r\n\t\t}\r\n\t};\r\n\tCOMPANY_SPECIFIC={\r\n\t\tmodel:{\r\n\t\t\tpersonnel_bank:{}\r\n\t\t},\r\n\t\tlist:[]\r\n\t};\r\n\tENDORSEMENT=[];\r\n\tIMAGE_BRANDING=[];\r\n\tQUESTION_ANSWER=[];\r\n\tCHARACTER_REF={\r\n\t\tmodel:{},\r\n\t\tlist:[]\r\n\t};\r\n    USER={};\r\n\tOBSERVERS={\r\n\t\tppid_dialog:[],\r\n\t\tgroup_dialog:[],\r\n\t\ttab_changed:[],\r\n\t\tclear_ppid:[],\r\n\t\tclear_log:[],\r\n\t\tclear_login_modal:[],\r\n\t\tmaintab_contact_clicked:[],\r\n\t\tmaintab_education_clicked:[],\r\n\t\tmaintab_skills_clicked:[],\t\r\n\t\tmaintab_language_clicked:[],\r\n\t\tcompany_tab_changed:[],\r\n\t\tgovinfo_tab_changed:[],\r\n\t\trelative_tab_changed:[],\r\n\t\taward_training_tab_changed:[]\r\n\r\n\t};\r\n\r\n\t//Dropdown\r\n\tSTATUS=[];\r\n\tCIVIL_STATUS=[];\r\n\tCITIZENSHIP=[];\r\n\tRELIGION=[];\r\n\tCOUNTRY=[];\r\n\tREGION=[];\r\n\tGROUP=[];\r\n\tLOCATIONS=[];\r\n\tCONTACT_TYPE=[];\r\n\tLEVEL=[];\r\n\tYEAR=[];\r\n\tSCHOOLS=[];\r\n\tLANGUAGE=[];\r\n\tPOSITION=[];\r\n\tAWARD_HEAD=[];\r\n\tAWARD_BODY=[];\r\n\tTRAINING=[];\r\n\tTAX_EXEMPT=[];\r\n\tINPUT_TAX=[];\r\n\tPERMIT=[];\r\n\tVAT_STAT=[];\r\n\tEXAM=[];\r\n\tCASE_STAT=[];\r\n\tVIOLATION=[];\r\n\tPROFESSIONAL_TYPE=[];\r\n\tCESSATION=[];\r\n\tTARGET_MARKET=[];\r\n\tCOMPANY=[];\r\n\tDIVISION=[];\r\n\tLOCATIONS_RNG=[];\r\n\tCATEGORY=[];\r\n\tJOB_GROUP=[];\r\n\tJOB=[];\r\n\tPAYROLL_GROUP=[];\r\n\tBANK=[];\r\n\tPROVINCE=[];\r\n\tRELATIONSHIP =[];\r\n\tINACTIVE_REASON = [];\r\n\tSKILL_TALENT=[];\r\n\tRATING=[];\r\n\tLANGUAGE_RATING=[];\r\n\r\n\r\n\t\r\n\tconstructor(){\r\n\t\r\n\t}\r\n}","import {checkCookie,setCookie,removeCookie} from 'helpers';\r\nimport toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from './obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {ppid_search} from \"./modals/ppid_search\";\r\nimport {EntityManager,EntityQuery} from 'entity-manager-factory'; \r\nimport {getLookups} from 'masterfiles';\r\nimport settings from 'settings';\r\n\r\n@inject(DialogService, obj_personnel)\r\nexport class ppid\r\n{\r\n\tobj_personnel = null;\r\n\tglobal_indiv_id=\"\";\r\n\t\r\n\t\r\n\tconstructor(dialogService, obj_personnel){\r\n\t\tthis.dialogService=dialogService;\r\n\t\tthis.obj_personnel = obj_personnel;\t\t\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.ppid_dialog.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_contact_clicked.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_education_clicked.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_skills_clicked.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_language_clicked.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.govinfo_tab_changed.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.company_tab_changed.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.award_training_tab_changed.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.length=0;\r\n\t\tthis.obj_personnel.global_indiv_id = \"\";\r\n\t\tthis.obj_personnel.HEADER = {\r\n    \t\tcitizenship:[],\r\n    \t\tgroup:[]\r\n    \t};\r\n\t\tthis.LoadDropdown();\r\n\r\n\t\tthis.LoginPassed(this.obj_personnel.USER);\r\n\t}\r\n\r\n\tLoadDropdown()\r\n\t{\r\n\r\n        settings.isNavigating = true;\r\n\t\t// var _query = EntityQuery().from('GLOBAL_GRP_MSTR')\r\n\t\t// \t\t.orderBy('GROUP_NAME')\r\n\t\t// \t\t.select('GLOBAL_GRP_ID, GROUP_NAME');\r\n\t\t// EntityManager().executeQuery(_query).then((success)=>{\r\n\t\t// \tvar tmp=[];\r\n\t\t// \t_.each(success.results, (result)=>{\r\n\t\t// \t\ttmp.push({\r\n\t\t// \t\t\tvalue:result.GLOBAL_GRP_ID ,\r\n\t\t// \t\t\ttext:result.GROUP_NAME\r\n\t\t// \t\t});\r\n\t\t// \t});\r\n\t\t// \tthis.obj_personnel.GROUP = tmp;\r\n\t\t// },\r\n\t\t// (failed)=>{\r\n\t\t// \ttoastr.error(failed,'Error in loading group dropdown.');\r\n\t\t// });\r\n\t\tvar maxYear= new Date().getFullYear();\r\n\t\tvar leastYear = 1960;\r\n\t\tvar tmpYear=[];\r\n\t\tdo{\r\n\t\t\ttmpYear.push({\r\n\t\t\t\tvalue: leastYear,\r\n\t\t\t\ttext: leastYear\r\n\t\t\t});\r\n\t\t\tleastYear++;\r\n\t\t}while(leastYear<=maxYear);\r\n\t\tthis.obj_personnel.YEAR = tmpYear;\r\n\r\n\t\tif(getLookups() != null){\r\n\t\t\tthis.obj_personnel.LOCATIONS = getLookups().LOCATION_MSTR;\r\n\t\t\tthis.obj_personnel.LOCATIONS.shift(); //Remove \"[SELECT A VALUE]\" value\t\r\n\r\n\t\t\tthis.obj_personnel.CIVIL_STATUS.length=0;\r\n\t\t\tthis.obj_personnel.RELIGION.length=0;\r\n\t\t\tthis.obj_personnel.CITIZENSHIP.length=0;\r\n\t\t\tthis.obj_personnel.CONTACT_TYPE.length=0;\r\n\t\t\tthis.obj_personnel.LEVEL.length=0;\r\n\t\t\tthis.obj_personnel.LANGUAGE.length=0;\r\n\t\t\tthis.obj_personnel.STATUS.length=0;\r\n\t\t\tthis.obj_personnel.POSITION.length=0;\r\n\t\t\tthis.obj_personnel.AWARD_HEAD.length=0;\r\n\t\t\tthis.obj_personnel.TRAINING.length=0;\r\n\t\t\tthis.obj_personnel.TAX_EXEMPT.length=0;\r\n\t\t\tthis.obj_personnel.INPUT_TAX.length=0;\r\n\t\t\tthis.obj_personnel.PERMIT.length=0;\r\n\t\t\tthis.obj_personnel.VAT_STAT.length=0;\r\n\t\t\tthis.obj_personnel.EXAM.length=0;\r\n\t\t\tthis.obj_personnel.CASE_STAT.length=0;\r\n\t\t\tthis.obj_personnel.VIOLATION.length=0;\r\n\t\t\tthis.obj_personnel.PROFESSIONAL_TYPE.length=0;\r\n\t\t\tthis.obj_personnel.CESSATION.length=0;\r\n\t\t\tthis.obj_personnel.TARGET_MARKET.length=0;\r\n\t\t\tthis.obj_personnel.INACTIVE_REASON.length=0;\r\n\t\t\tthis.obj_personnel.RATING.length=0;\r\n\r\n\t\t\tgetLookups().REFERENCE_CD_MSTR.forEach((item)=>{\r\n\t\t\t\tswitch(item.REF_GRP_CD){\r\n\t\t\t\t\tcase \"CIVIL_STATUS\": \tthis.obj_personnel.CIVIL_STATUS.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"RELIGION_CD\": \tthis.obj_personnel.RELIGION.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"CITIZENSHIP_CD\": \tthis.obj_personnel.CITIZENSHIP.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"CONTACT_TYPE_CD\": this.obj_personnel.CONTACT_TYPE.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"LEVEL_CD\": \tthis.obj_personnel.LEVEL.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"LANG_DIALECT_CD\":\tthis.obj_personnel.LANGUAGE.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"STATUS_CD\": \tthis.obj_personnel.STATUS.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"POSITION_CD\": this.obj_personnel.POSITION.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"AWARD_CD\": \tthis.obj_personnel.AWARD_HEAD.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"TRNG_CD\": \tthis.obj_personnel.TRAINING.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"TAX_EXEMPT_CD\":\tthis.obj_personnel.TAX_EXEMPT.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"INPUT_TAX_CD\": \tthis.obj_personnel.INPUT_TAX.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"PERMIT_CD\": \tthis.obj_personnel.PERMIT.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"VAT_STAT_CD\": this.obj_personnel.VAT_STAT.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"EXAM_CD\": this.obj_personnel.EXAM.push({\r\n\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"CASE_STAT_CD\": \tthis.obj_personnel.CASE_STAT.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"VIOLATION_CD\": \tthis.obj_personnel.VIOLATION.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"PROFESSIONAL_TYPE_CD\": \tthis.obj_personnel.PROFESSIONAL_TYPE.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"CESSATION_CODE\": \tthis.obj_personnel.CESSATION.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"TARGET_MARKET_CD\": \tthis.obj_personnel.TARGET_MARKET.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"INACTIVE_REASON\": \tthis.obj_personnel.INACTIVE_REASON.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"RATING_CD\": \tthis.obj_personnel.RATING.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.GROUP.length=0;\r\n\t\t\tgetLookups().GLOBAL_GRP_MSTR.forEach((item)=>{\r\n\t\t\t\tthis.obj_personnel.GROUP.push({\r\n\t\t\t\t\tvalue: item.GLOBAL_GRP_ID,\r\n\t\t\t\t\ttext: item.GROUP_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.COMPANY.length=0;\r\n\t\t\tgetLookups().COMPANY_MSTR.forEach((item)=>{\r\n\t\t\t\tthis.obj_personnel.COMPANY.push({\r\n\t\t\t\t\tid: item.COMPANY_ID,\r\n\t\t\t\t\tvalue: item.COMPANY_CD,\r\n\t\t\t\t\ttext: item.COMPANY_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.COMPANY.shift();\r\n\r\n\t\t\t// this.obj_personnel.DIVISION.length=0;\r\n\t\t\t// getLookups().DIVISION_MSTR.forEach((item)=>{\r\n\t\t\t// \tthis.obj_personnel.DIVISION.push({\r\n\t\t\t// \t\tgroup: item.COMPANY_ID,\r\n\t\t\t// \t\tvalue: item.DIVISION_CD,\r\n\t\t\t// \t\ttext: item.DIVISION_NAME\r\n\t\t\t// \t});\r\n\t\t\t// });\r\n\r\n\t\t\t// order all\r\n\t\t\tthis.obj_personnel.GROUP.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.CIVIL_STATUS.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.RELIGION.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.CITIZENSHIP.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.CONTACT_TYPE.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.LEVEL.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.LANGUAGE.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.STATUS.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.POSITION.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.AWARD_HEAD.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.TRAINING.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.PERMIT.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.TAX_EXEMPT.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.INPUT_TAX.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.EXAM.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.VIOLATION.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.PROFESSIONAL_TYPE.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.CESSATION.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.TARGET_MARKET.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.COMPANY.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.INACTIVE_REASON.sort(this.OrderByText);\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t}\r\n\r\n\t\tvar _query = EntityQuery().from('COUNTRY_MSTR')\r\n\t\t\t\t.orderBy('COUNTRY_NAME')\r\n\t\t\t\t.select('COUNTRY_CD, COUNTRY_NAME');\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tvalue:result.COUNTRY_CD ,\r\n\t\t\t\t\ttext:result.COUNTRY_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.COUNTRY = tmp;\r\n\t\t},\r\n\t\t(failed)=>{\r\n\t\t\ttoastr.error(failed,'Error in loading country dropdown.');\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from('REGION_MSTR')\r\n\t\t\t\t .orderBy('REGION_DESC')\r\n\t\t\t\t .select('REGION_CD, REGION_DESC, COUNTRY_CD');\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tvalue: result.REGION_CD,\r\n\t\t\t\t\ttext: result.REGION_DESC,\r\n\t\t\t\t\tgroup: result.COUNTRY_CD\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.REGION = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed, 'Error in loading region dropdown.');\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"SCHOOL_MSTR\")\r\n\t\t\t\t.orderBy(\"SCHOOL_NAME\")\r\n\t\t\t\t.select(\"SCHOOL_CD, SCHOOL_NAME, SCHOOL_ADDR\");\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp = [];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tschool_cd: result.SCHOOL_CD,\r\n\t\t\t\t\tschool_name: result.SCHOOL_NAME,\r\n\t\t\t\t\tschool_addr: result.SCHOOL_ADDR\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.SCHOOLS = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed, \"Error in loading schools dropdown.\");\r\n\t\t\tconsole.log(failed);\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"RNG_LOCATION_MSTR\")\r\n\t\t\t\t .orderBy(\"LOCATION_NAME\");\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp = [];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tvalue: result.LOCATION_CD,\r\n\t\t\t\t\ttext: result.LOCATION_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.LOCATIONS_RNG = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed, \"Error in loading RNG Locations dropdown\");\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"PAYROLL_GRP_MSTR\")\r\n\t\t\t\t .orderBy(\"PAYROLL_GRP_DESC\");\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp = [];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tid: result.PAYROLL_GRP_ID,\t\t\t\t\t\r\n\t\t\t\t\tvalue: result.PAYROLL_GRP_CD,\r\n\t\t\t\t\ttext: result.PAYROLL_GRP_DESC\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.PAYROLL_GROUP = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed, \"Error in loading Payroll Group dropdown.\");\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"BANK_MSTR\")\r\n\t\t\t\t .orderBy(\"BANK_SHORT_NAME\");\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tid: result.BANK_ID,\r\n\t\t\t\t\tshort_nm: result.BANK_SHORT_NAME,\r\n\t\t\t\t\tbank_cd: result.BANK_CD,\r\n\t\t\t\t\tlong_nm: result.BANK_LONG_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.BANK = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed,\"Error in loading Bank dropdown\");\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"PROVINCE_MSTR\")\r\n\t\t\t\t.orderBy(\"PROVINCE_DESC\");\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(success.results, (r)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\ttext: r.PROVINCE_DESC,\r\n\t\t\t\t\tvalue: r.PROVINCE_CD,\r\n\t\t\t\t\tgroup: r.REGION_CD\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.PROVINCE = tmp;\r\n\t\t}, (error)=>{\r\n\t\t\ttoastr.error(error, \"Error in loading Province dropdown.\");\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"RELATIVE_MSTR\")\r\n\t\t\t\t.orderBy(\"RELATIVE_DESC\");\r\n\t\tEntityManager().executeQuery(_query).then((s)=>{\r\n\t\t\tvar tmp = [];\r\n\r\n\t\t\t_.each(s.results, (res)=>{\r\n\r\n\t\t\t\tvar relationship = {\r\n\t\t\t\t\tvalue: res.RELATIVE_CD,\r\n\t\t\t\t\ttext: res.RELATIVE_DESC,\r\n\t\t\t\t\tgroup: res.RELATIONSHIP_CD\r\n\t\t\t\t};\r\n\t\t\t\ttmp.push(relationship);\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.RELATIONSHIP = tmp;\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"AWARD_BODY_MSTR\")\r\n\t\t\t\t .orderBy(\"SPONSOR_NAME\");\r\n\t\tEntityManager().executeQuery(_query).then((s)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(s.results, (res)=>{\r\n\t\t\t\tvar award_body = {\r\n\t\t\t\t\tvalue: res.AWARD_BODY_CD,\r\n\t\t\t\t\ttext: res.SPONSOR_NAME\r\n\t\t\t\t};\r\n\t\t\t\ttmp.push(award_body);\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.AWARD_BODY = tmp;\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"SKILL_TALENT_MSTR\")\r\n\t\t\t\t .orderBy(\"SKILL_TALENT_DESC\");\r\n\t\tEntityManager().executeQuery(_query).then((s)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(s.results, (res)=>{\r\n\t\t\t\tvar skill_talent = {\r\n\t\t\t\t\tvalue: res.SKILL_TALENT_CD,\r\n\t\t\t\t\ttext: res.SKILL_TALENT_DESC,\r\n\t\t\t\t\tgroup: res.SKILL_TALENT_TYPE_CD\r\n\t\t\t\t};\r\n\t\t\t\ttmp.push(skill_talent);\r\n\t\t\t});\t\r\n\t\t\tthis.obj_personnel.SKILL_TALENT = tmp;\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"RATING_MSTR\")\r\n\t\t\t\t .orderBy(\"RATING_DESC\");\r\n\t\tEntityManager().executeQuery(_query).then((s)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(s.results, (res)=>{\r\n\t\t\t\tvar rating_mstr = {\r\n\t\t\t\t\tvalue: res.RATING_CD,\r\n\t\t\t\t\ttext: res.RATING_DESC\r\n\t\t\t\t};\r\n\t\t\t\ttmp.push(rating_mstr);\r\n\t\t\t});\t\r\n\t\t\tthis.obj_personnel.LANGUAGE_RATING = tmp;\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tOrderByText(a, b){\r\n\t\tif(a.text.toUpperCase() < b.text.toUpperCase())\r\n\t\t\treturn -1;\r\n\t\tif(a.text.toUpperCase() > b.text.toUpperCase())\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\t\r\n\tchangeTab(tabNumber)\r\n\t{\r\n\t\tif(this.obj_personnel.global_indiv_id == undefined || this.obj_personnel.global_indiv_id == null || this.obj_personnel.global_indiv_id.length==0)\r\n\t\t\treturn;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.forEach((all)=>{\r\n\t\t\tall(tabNumber, this.obj_personnel.global_indiv_id);\r\n\t\t});\r\n\t}\t\r\n\t\r\n\tFindUsers()\r\n\t{\t\r\n\t\tthis.dialogService.open({\r\n\t\t\tviewModel: ppid_search\r\n\t\t}).whenClosed(response=>{\r\n\t\t\tif(!response.wasCancelled)\r\n\t\t\t{\r\n\t\t\t\t// console.log(response.output);\r\n\t\t\t\t//var arr = response.output.split('|');\r\n\t\t\t\t//var global_id = arr[0];\r\n\t\t\t\t//var tin = arr[1];\r\n\t\t\t\t//var group = arr[2];\r\n\t\t\t\t//var last_name = arr[3];\r\n\t\t\t\t//var first_name = arr[4];\r\n\t\t\t\t//var nick_name = arr[5];\r\n\t\t\t\t//var project_name = arr[6];\r\n\t\t\t\t//var country = arr[7];\r\n\t\t\t\t//alert(\"Global_id:\"+global_id+\"\\nTin:\"+tin+\"\\nGroup:\"+group+\"\\nLast Name:\"+last_name+\"\\nFirst Name:\"+first_name+\"\\nNick Name:\"+nick_name+\"\\nProject Name:\"+project_name+\"\\nCountry:\"+country);\r\n\t\t\t}else\r\n\t\t\t{\r\n\t\t\t\t// console.log('reponse was cancelled.');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tAddUsers()\r\n\t{\r\n\t\talert('AddUsers function under maintenance.');\r\n\t}\r\n\r\n\tLoginPassed(user){\r\n\t\t// console.log(user);\r\n\t\t// this.obj_personnel.USER = user;\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from './obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {ppid_search} from \"./modals/ppid_search\";\r\nimport {DialogBox} from \"./modals/DialogBox\";\r\nimport {EntityManager,EntityQuery} from '../entity-manager-factory'; \r\nimport {getLookups} from '../masterfiles';\r\nimport settings from 'settings';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class ppid_group{\r\n\t\r\n\tobj_personnel = null;\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.ppid_dialog.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.group_dialog.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_contact_clicked.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_education_clicked.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_skills_clicked.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_language_clicked.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.govinfo_tab_changed.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.company_tab_changed.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.award_training_tab_changed.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.length=0;\r\n\t\tthis.obj_personnel.global_indiv_id = \"\";\r\n\t\tthis.obj_personnel.HEADER = {\r\n    \t\tcitizenship:[],\r\n    \t\tgroup:[]\r\n    \t};\r\n    \tthis.obj_personnel.GROUP_INFO = {\r\n    \t\tmodel:{},\r\n    \t\tmembers:[]\r\n    \t};\r\n\r\n\t\tthis.LoadDropdown();\r\n\t}\r\n\r\n\t\r\n\tLoadDropdown()\r\n\t{\r\n\r\n        settings.isNavigating = true;\r\n\t\t// var _query = EntityQuery().from('GLOBAL_GRP_MSTR')\r\n\t\t// \t\t.orderBy('GROUP_NAME')\r\n\t\t// \t\t.select('GLOBAL_GRP_ID, GROUP_NAME');\r\n\t\t// EntityManager().executeQuery(_query).then((success)=>{\r\n\t\t// \tvar tmp=[];\r\n\t\t// \t_.each(success.results, (result)=>{\r\n\t\t// \t\ttmp.push({\r\n\t\t// \t\t\tvalue:result.GLOBAL_GRP_ID ,\r\n\t\t// \t\t\ttext:result.GROUP_NAME\r\n\t\t// \t\t});\r\n\t\t// \t});\r\n\t\t// \tthis.obj_personnel.GROUP = tmp;\r\n\t\t// },\r\n\t\t// (failed)=>{\r\n\t\t// \ttoastr.error(failed,'Error in loading group dropdown.');\r\n\t\t// });\r\n\t\tvar maxYear= new Date().getFullYear();\r\n\t\tvar leastYear = 1960;\r\n\t\tvar tmpYear=[];\r\n\t\tdo{\r\n\t\t\ttmpYear.push({\r\n\t\t\t\tvalue: leastYear,\r\n\t\t\t\ttext: leastYear\r\n\t\t\t});\r\n\t\t\tleastYear++;\r\n\t\t}while(leastYear<=maxYear);\r\n\t\tthis.obj_personnel.YEAR = tmpYear;\r\n\r\n\t\tif(getLookups() != null){\r\n\t\t\tthis.obj_personnel.LOCATIONS = getLookups().LOCATION_MSTR;\r\n\t\t\tthis.obj_personnel.LOCATIONS.shift(); //Remove \"[SELECT A VALUE]\" value\t\r\n\r\n\t\t\tthis.obj_personnel.CIVIL_STATUS.length=0;\r\n\t\t\tthis.obj_personnel.RELIGION.length=0;\r\n\t\t\tthis.obj_personnel.CITIZENSHIP.length=0;\r\n\t\t\tthis.obj_personnel.CONTACT_TYPE.length=0;\r\n\t\t\tthis.obj_personnel.LEVEL.length=0;\r\n\t\t\tthis.obj_personnel.LANGUAGE.length=0;\r\n\t\t\tthis.obj_personnel.STATUS.length=0;\r\n\t\t\tthis.obj_personnel.POSITION.length=0;\r\n\t\t\tthis.obj_personnel.AWARD_HEAD.length=0;\r\n\t\t\tthis.obj_personnel.TRAINING.length=0;\r\n\t\t\tthis.obj_personnel.TAX_EXEMPT.length=0;\r\n\t\t\tthis.obj_personnel.INPUT_TAX.length=0;\r\n\t\t\tthis.obj_personnel.PERMIT.length=0;\r\n\t\t\tthis.obj_personnel.VAT_STAT.length=0;\r\n\t\t\tthis.obj_personnel.EXAM.length=0;\r\n\t\t\tthis.obj_personnel.CASE_STAT.length=0;\r\n\t\t\tthis.obj_personnel.VIOLATION.length=0;\r\n\t\t\tthis.obj_personnel.PROFESSIONAL_TYPE.length=0;\r\n\t\t\tthis.obj_personnel.CESSATION.length=0;\r\n\t\t\tthis.obj_personnel.TARGET_MARKET.length=0;\r\n\t\t\tthis.obj_personnel.INACTIVE_REASON.length=0;\r\n\t\t\tthis.obj_personnel.RATING.length=0;\r\n\r\n\t\t\tgetLookups().REFERENCE_CD_MSTR.forEach((item)=>{\r\n\t\t\t\tswitch(item.REF_GRP_CD){\r\n\t\t\t\t\tcase \"CIVIL_STATUS\": \tthis.obj_personnel.CIVIL_STATUS.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"RELIGION_CD\": \tthis.obj_personnel.RELIGION.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"CITIZENSHIP_CD\": \tthis.obj_personnel.CITIZENSHIP.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"CONTACT_TYPE_CD\": this.obj_personnel.CONTACT_TYPE.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"LEVEL_CD\": \tthis.obj_personnel.LEVEL.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"LANG_DIALECT_CD\":\tthis.obj_personnel.LANGUAGE.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"STATUS_CD\": \tthis.obj_personnel.STATUS.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"POSITION_CD\": this.obj_personnel.POSITION.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"AWARD_CD\": \tthis.obj_personnel.AWARD_HEAD.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"TRNG_CD\": \tthis.obj_personnel.TRAINING.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"TAX_EXEMPT_CD\":\tthis.obj_personnel.TAX_EXEMPT.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"INPUT_TAX_CD\": \tthis.obj_personnel.INPUT_TAX.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"PERMIT_CD\": \tthis.obj_personnel.PERMIT.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"VAT_STAT_CD\": this.obj_personnel.VAT_STAT.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"EXAM_CD\": this.obj_personnel.EXAM.push({\r\n\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"CASE_STAT_CD\": \tthis.obj_personnel.CASE_STAT.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"VIOLATION_CD\": \tthis.obj_personnel.VIOLATION.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"PROFESSIONAL_TYPE_CD\": \tthis.obj_personnel.PROFESSIONAL_TYPE.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"CESSATION_CODE\": \tthis.obj_personnel.CESSATION.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"TARGET_MARKET_CD\": \tthis.obj_personnel.TARGET_MARKET.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"INACTIVE_REASON\": \tthis.obj_personnel.INACTIVE_REASON.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"RATING_CD\": \tthis.obj_personnel.RATING.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.GROUP.length=0;\r\n\t\t\tgetLookups().GLOBAL_GRP_MSTR.forEach((item)=>{\r\n\t\t\t\tthis.obj_personnel.GROUP.push({\r\n\t\t\t\t\tvalue: item.GLOBAL_GRP_ID,\r\n\t\t\t\t\ttext: item.GROUP_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.COMPANY.length=0;\r\n\t\t\tgetLookups().COMPANY_MSTR.forEach((item)=>{\r\n\t\t\t\tthis.obj_personnel.COMPANY.push({\r\n\t\t\t\t\tid: item.COMPANY_ID,\r\n\t\t\t\t\tvalue: item.COMPANY_CD,\r\n\t\t\t\t\ttext: item.COMPANY_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.COMPANY.shift();\r\n\r\n\t\t\t// this.obj_personnel.DIVISION.length=0;\r\n\t\t\t// getLookups().DIVISION_MSTR.forEach((item)=>{\r\n\t\t\t// \tthis.obj_personnel.DIVISION.push({\r\n\t\t\t// \t\tgroup: item.COMPANY_ID,\r\n\t\t\t// \t\tvalue: item.DIVISION_CD,\r\n\t\t\t// \t\ttext: item.DIVISION_NAME\r\n\t\t\t// \t});\r\n\t\t\t// });\r\n\r\n\t\t\t// order all\r\n\t\t\tthis.obj_personnel.GROUP.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.CIVIL_STATUS.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.RELIGION.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.CITIZENSHIP.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.CONTACT_TYPE.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.LEVEL.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.LANGUAGE.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.STATUS.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.POSITION.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.AWARD_HEAD.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.TRAINING.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.PERMIT.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.TAX_EXEMPT.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.INPUT_TAX.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.EXAM.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.VIOLATION.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.PROFESSIONAL_TYPE.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.CESSATION.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.TARGET_MARKET.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.COMPANY.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.INACTIVE_REASON.sort(this.OrderByText);\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t}\r\n\r\n\t\tvar _query = EntityQuery().from('COUNTRY_MSTR')\r\n\t\t\t\t.orderBy('COUNTRY_NAME')\r\n\t\t\t\t.select('COUNTRY_CD, COUNTRY_NAME');\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tvalue:result.COUNTRY_CD ,\r\n\t\t\t\t\ttext:result.COUNTRY_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.COUNTRY = tmp;\r\n\t\t},\r\n\t\t(failed)=>{\r\n\t\t\ttoastr.error(failed,'Error in loading country dropdown.');\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from('REGION_MSTR')\r\n\t\t\t\t .orderBy('REGION_DESC')\r\n\t\t\t\t .select('REGION_CD, REGION_DESC, COUNTRY_CD');\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tvalue: result.REGION_CD,\r\n\t\t\t\t\ttext: result.REGION_DESC,\r\n\t\t\t\t\tgroup: result.COUNTRY_CD\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.REGION = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed, 'Error in loading region dropdown.');\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"SCHOOL_MSTR\")\r\n\t\t\t\t.orderBy(\"SCHOOL_NAME\")\r\n\t\t\t\t.select(\"SCHOOL_CD, SCHOOL_NAME, SCHOOL_ADDR\");\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp = [];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tschool_cd: result.SCHOOL_CD,\r\n\t\t\t\t\tschool_name: result.SCHOOL_NAME,\r\n\t\t\t\t\tschool_addr: result.SCHOOL_ADDR\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.SCHOOLS = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed, \"Error in loading schools dropdown.\");\r\n\t\t\tconsole.log(failed);\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"RNG_LOCATION_MSTR\")\r\n\t\t\t\t .orderBy(\"LOCATION_NAME\");\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp = [];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tvalue: result.LOCATION_CD,\r\n\t\t\t\t\ttext: result.LOCATION_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.LOCATIONS_RNG = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed, \"Error in loading RNG Locations dropdown\");\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"PAYROLL_GRP_MSTR\")\r\n\t\t\t\t .orderBy(\"PAYROLL_GRP_DESC\");\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp = [];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tid: result.PAYROLL_GRP_ID,\t\t\t\t\t\r\n\t\t\t\t\tvalue: result.PAYROLL_GRP_CD,\r\n\t\t\t\t\ttext: result.PAYROLL_GRP_DESC\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.PAYROLL_GROUP = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed, \"Error in loading Payroll Group dropdown.\");\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"BANK_MSTR\")\r\n\t\t\t\t .orderBy(\"BANK_SHORT_NAME\");\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tid: result.BANK_ID,\r\n\t\t\t\t\tshort_nm: result.BANK_SHORT_NAME,\r\n\t\t\t\t\tbank_cd: result.BANK_CD,\r\n\t\t\t\t\tlong_nm: result.BANK_LONG_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.BANK = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed,\"Error in loading Bank dropdown\");\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"PROVINCE_MSTR\")\r\n\t\t\t\t.orderBy(\"PROVINCE_DESC\");\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(success.results, (r)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\ttext: r.PROVINCE_DESC,\r\n\t\t\t\t\tvalue: r.PROVINCE_CD,\r\n\t\t\t\t\tgroup: r.REGION_CD\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.PROVINCE = tmp;\r\n\t\t}, (error)=>{\r\n\t\t\ttoastr.error(error, \"Error in loading Province dropdown.\");\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"RELATIVE_MSTR\")\r\n\t\t\t\t.orderBy(\"RELATIVE_DESC\");\r\n\t\tEntityManager().executeQuery(_query).then((s)=>{\r\n\t\t\tvar tmp = [];\r\n\r\n\t\t\t_.each(s.results, (res)=>{\r\n\r\n\t\t\t\tvar relationship = {\r\n\t\t\t\t\tvalue: res.RELATIVE_CD,\r\n\t\t\t\t\ttext: res.RELATIVE_DESC,\r\n\t\t\t\t\tgroup: res.RELATIONSHIP_CD\r\n\t\t\t\t};\r\n\t\t\t\ttmp.push(relationship);\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.RELATIONSHIP = tmp;\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"AWARD_BODY_MSTR\")\r\n\t\t\t\t .orderBy(\"SPONSOR_NAME\");\r\n\t\tEntityManager().executeQuery(_query).then((s)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(s.results, (res)=>{\r\n\t\t\t\tvar award_body = {\r\n\t\t\t\t\tvalue: res.AWARD_BODY_CD,\r\n\t\t\t\t\ttext: res.SPONSOR_NAME\r\n\t\t\t\t};\r\n\t\t\t\ttmp.push(award_body);\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.AWARD_BODY = tmp;\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"SKILL_TALENT_MSTR\")\r\n\t\t\t\t .orderBy(\"SKILL_TALENT_DESC\");\r\n\t\tEntityManager().executeQuery(_query).then((s)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(s.results, (res)=>{\r\n\t\t\t\tvar skill_talent = {\r\n\t\t\t\t\tvalue: res.SKILL_TALENT_CD,\r\n\t\t\t\t\ttext: res.SKILL_TALENT_DESC,\r\n\t\t\t\t\tgroup: res.SKILL_TALENT_TYPE_CD\r\n\t\t\t\t};\r\n\t\t\t\ttmp.push(skill_talent);\r\n\t\t\t});\t\r\n\t\t\tthis.obj_personnel.SKILL_TALENT = tmp;\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"RATING_MSTR\")\r\n\t\t\t\t .orderBy(\"RATING_DESC\");\r\n\t\tEntityManager().executeQuery(_query).then((s)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(s.results, (res)=>{\r\n\t\t\t\tvar rating_mstr = {\r\n\t\t\t\t\tvalue: res.RATING_CD,\r\n\t\t\t\t\ttext: res.RATING_DESC\r\n\t\t\t\t};\r\n\t\t\t\ttmp.push(rating_mstr);\r\n\t\t\t});\t\r\n\t\t\tthis.obj_personnel.LANGUAGE_RATING = tmp;\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tOrderByText(a, b){\r\n\t\tif(a.text.toUpperCase() < b.text.toUpperCase())\r\n\t\t\treturn -1;\r\n\t\tif(a.text.toUpperCase() > b.text.toUpperCase())\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tchangeTab(tabNumber){\r\n\t\tif(this.obj_personnel.global_indiv_id == undefined || this.obj_personnel.global_indiv_id == null || this.obj_personnel.global_indiv_id.length==0)\r\n\t\t\treturn;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.forEach((all)=>{\r\n\t\t\tall(tabNumber, this.obj_personnel.global_indiv_id);\r\n\t\t});\r\n\t}\r\n}","import {bindable, inject} from 'aurelia-framework';\r\nimport {ObserverLocator} from 'aurelia-binding';\r\nimport {  cache_obj } from 'cache_obj';\r\n\r\n@inject(ObserverLocator,cache_obj)\r\nexport class gridpaging{\r\n\t\r\n\t@bindable to;\r\n\t@bindable pageindex;\r\n\t@bindable divby;\r\n\tshowing=false;\r\n\t_buttonTitle = 'Search';\r\n\t_isDisableElement=true;\r\n\t_Pages = [[]];\r\n\t_PagesShow = [];\r\n\t_currentIndex=0;\r\n\t_cache_obj;\r\n\tconstructor(observerLocator,cache_obj){\r\n\t\tthis._cache_obj=cache_obj;\r\n\r\n\t\t var subscription = observerLocator\r\n      .getObserver(this, 'to')\r\n      .subscribe(()=>{ this.onChange(); });\r\n\r\n      \tthis._cache_obj.OBSERVERS.enable_modal_button.push((id, val) => {\r\n\t\t\tthis.enableButton(id,val);\r\n\t\t});\r\n\r\n\t}\r\n\r\n  onChange() \r\n  {\r\n\t\ttry \r\n\t\t{\r\n\t\t\tthis._Pages = [];\r\n\t\t\tthis._PagesShow = [];\r\n\t\t\tif (this.to != undefined && this.to != null) {\r\n\t\t\t\t\r\n\t\t\t\tvar intByTmp = 0;\r\n\t\t\t\tvar intDivTmp = 0;\r\n\t\t\t\tthis._Pages.push([]);\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i <= Math.ceil(this.to / this.divby) - 1; ++i) {\r\n\r\n\t\t\t\t\tif (intDivTmp >= 10) {\r\n\r\n\t\t\t\t\t\tthis._Pages.push([]);\r\n\t\t\t\t\t\t++intByTmp;\r\n\t\t\t\t\t\tintDivTmp = 1;\r\n\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t\t++intDivTmp;\r\n\r\n\t\t\t\t\tthis._Pages[intByTmp].push(i + 1);\r\n\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis._PagesShow=this._Pages[0];\r\n\t\t\t\tthis._currentIndex=0;\r\n\t\t\t\tthis.pageindex=0;\r\n\t\t\t\t// console.log(this._Pages.length);\r\n\t\t\t\t// console.log(this.to);\r\n\t\t\t}\r\n\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n  }\r\n\r\n\tendClick(endValue) {\r\n\r\n\t\tif (endValue == 0 && this._currentIndex > 0) {\r\n\t\t\t--this._currentIndex;\r\n\t\t} else if (endValue == 1 && this._currentIndex < this._Pages.length-1) {\r\n\t\t\t++this._currentIndex;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._PagesShow = this._Pages[this._currentIndex];\r\n\r\n\r\n\t\tthis.pageindex = this._Pages[this._currentIndex][0] - 1\r\n\r\n\t}\r\n  selectedClick(endValue){\r\n  \tthis.pageindex=this._Pages[this._currentIndex][endValue]-1;\r\n  }\r\n  \r\n\r\n\t//@handle('init.modal')\r\n    InitializeModal() {\r\n\r\n   //  \t\tthis._buttonTitle = this.to.buttonTitle;\r\n\t\t\t// this._setTitle = this.to.title;\r\n\t\t\t// this._id = this.to.id;\r\n    }\r\n\r\n\r\n\t//@handle('enable.modal.button')\r\n\tenableButton(id ,isEnabled){\r\n\t\tif(this._id==id)\r\n\t\tthis._isDisableElement=!isEnabled;\r\n\t}\r\n}","\r\nimport { inject } from 'aurelia-framework';\r\nimport { cache_obj } from 'cache_obj';\r\nimport settings from 'settings';\r\n@inject(cache_obj)\r\nexport class actual_cost{\r\n    _cache_obj;\r\n    constructor(cache_obj) {\r\n        this._cache_obj = cache_obj;\r\n        //console.log(this._cache_obj.USER);\r\n    //  window.location.href=\"http://absppms2:8084/\";\r\n      //window.location.href=\"http://localhost:15253/\";\r\n  }\r\n\r\n}\r\n","import {bindable,inject} from 'aurelia-framework';\r\nimport { cache_budget } from 'ppfcs/cache_budget';\r\nimport { EntityManager, EntityQuery, generateID } from 'entity-manager-factory';\r\n//import {handle, Dispatcher} from 'aurelia-flux';  \r\nimport { getLookups } from 'masterfiles';\r\nimport {  substringMatcher } from 'helpers';\r\nimport typeahead from 'typeahead';\r\nimport settings from 'settings';\r\nimport _ from 'underscore';\r\nimport numeral from 'numeral';\r\nimport toastr from \"toastr\";\r\nimport { MultiObserver }from 'multi-observer';\r\nimport { paymentterm } from '../../modals/paymentterm';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport { cache_obj } from 'cache_obj';\r\n\r\n@inject(cache_obj,cache_budget,MultiObserver,DialogService)\r\nexport class GuestCustomElement {\r\n\r\n  @bindable to;\r\n  _cache_budget = null;\r\n  //_dispatcher;\r\n  _enableAdd=false;\r\n  _enableRemove=false;\r\n  _signal;\r\n  _PYMNTTERM;\r\n  dialogService = null;\r\n  _cache_obj = null;\r\n  constructor(cache_obj, cache_budget, multiObserver, dialogService) {\r\n      if (EntityManager() === undefined) {\r\n          return;\r\n      }\r\n\r\n    this._cache_budget = cache_budget;\r\n    this.dialogService=dialogService;\r\n    this._cache_obj = cache_obj;\r\n    \r\n    this._cache_obj.OBSERVERS.budget_dialog.push((val) => {\r\n      this.fnCheckBudget(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.copy_template_guest.push(() => {\r\n      this.fnCallCopyGuest();\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.reset_all.push(() => {\r\n      this.resetView();\r\n    });\r\n\r\n    this._PYMNTTERM = getLookups().PAYMENT_TERM;\r\n\r\n  }\r\n  \r\n\r\n  fnModalPaymentTerm(){\r\n    this.dialogService.open({\r\n      viewModel: paymentterm\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        this.passTerm(response.output);\r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  passTerm(term) {\r\n      this._cache_budget.GUEST[0].PAYMENT_TERM=term.REF_DESC\r\n      this._cache_budget.GUEST[0].PYMNT_TERM_CD = term.REF_CD;\r\n  }\r\n\r\n  \r\n  //LoginPassed() {\r\n  //  this._PYMNTTERM = getLookups().PAYMENT_TERM;\r\n  //}\r\n\r\n  //@handle('budget.dialog')\r\n  fnCheckBudget(value) {\r\n\r\n    var _query = EntityQuery().from('BDGT_TMPL_GUEST_DTL').where('BDGT_TMPL_ID', '==', value);\r\n    EntityManager().executeQuery(_query).then((found) => {\r\n      \r\n        this._cache_budget.GUEST = found.results;\r\n      \r\n      var varRefCd = [];\r\n\r\n      _.each(this._cache_budget.GUEST, (item) => {\r\n\r\n        for (var i = 0; i <= this._PYMNTTERM.length - 1; ++i) {\r\n          if (this._PYMNTTERM[i].REF_CD == item.PYMNT_TERM_CD) {\r\n            item.PAYMENT_TERM = this._PYMNTTERM[i].REF_DESC;\r\n            break;\r\n          }\r\n        };\r\n\r\n        \r\n        item.PAY_RATE_FACTOR_TMP=numeral(item.PAY_RATE_FACTOR).format('0,0.00');\r\n        item.INPUT_AMT_TMP=numeral(item.INPUT_AMT).format('0,0.00');\r\n        item.visible=true;\r\n      });\r\n\r\n      this._enableAdd=false;\r\n      this._enableRemove=false;\r\n\r\n      if (this._cache_budget.GUEST.length==0)\r\n        this._enableAdd=true;\r\n      else\r\n        this._enableRemove=true;        \r\n\r\n\r\n      // this.fnReloadTypeahead();\r\n\r\n      //this._cache_budget.CALLER.ACTION='reset.summary';\r\n\r\n      this._cache_budget.OBSERVERS.reset_summary.forEach((all) => {\r\n        all();\r\n      });\r\n\r\n      if (this._cache_budget.GUEST.length>0)\r\n        toastr.success(\"GUEST PERSONNEL\", \"Loading Successful.\");\r\n      //this._dispatcher.dispatch('reset.summary');\r\n\r\n    });\r\n\r\n  }\r\n\r\n //@handle('copy.template')\r\n fnCallCopyGuest()\r\n {\r\n   // console.log('passed');\r\n  //if (use==\"GUEST\") {\r\n    this.saveGuest(1);\r\n  //}\r\n}\r\n\r\n\r\n\r\n  // //CREATE typeahead on focus instead...........!!!!!!!!!!!!\r\n  // fnReloadTypeahead() {\r\n\r\n  //   $('.pymnttrmclass').typeahead('destroy');\r\n\r\n  //   var varCnt = 0;\r\n\r\n  //   _.each($(this.tblData).find(\".pymnttrmclass\"), (all) => {\r\n\r\n  //     $(all).attr(\"tableTermIndex\", varCnt);\r\n  //     ++varCnt;\r\n  //   });\r\n\r\n\r\n  //   $(\"input[tableTermIndex*='\" + 0 + \"']\")\r\n  //     .typeahead({\r\n  //       hint: false,\r\n  //       highlight: true,\r\n  //       minLength: 1,\r\n  //       limit: 10\r\n  //     }, {\r\n  //       source: substringMatcher(this._PYMNTTERM.map((item) => {\r\n  //         return item.REF_DESC\r\n  //       }))\r\n\r\n\r\n  //     });\r\n\r\n  // }\r\n\r\n  fnAddGuest(){\r\n      if (this._cache_budget.GUEST.length>0)\r\n    {\r\n          this._cache_budget.GUEST[0].visible=true;  \r\n    }\r\n    else\r\n          this._cache_budget.GUEST.push({INPUT_AMT_TMP:numeral(0).format('0,0.00'),PAY_RATE_FACTOR_TMP:numeral(1).format('0,0.00'),\r\n        INPUT_AMT:0,PAY_RATE_FACTOR:1,visible:true});\r\n\r\n      //delayed bec breeze is still processing\r\n      // setTimeout(()=>{\r\n      //   this.fnReloadTypeahead();\r\n      // },200);\r\n      \r\n\r\n      this._enableAdd=false;\r\n      this._enableRemove=true;\r\n      this._signal = generateID();\r\n    }\r\n\r\n    \r\n  //@handle('reset.all')\r\n  resetView() {\r\n    this._signal = generateID();\r\n  }\r\n  \r\n  fnRemoveGuest() {\r\n      if (this._cache_budget.GUEST.length > 0) {\r\n          this._cache_budget.GUEST[0].visible = false;\r\n    }\r\n\r\n    this._enableAdd = true;\r\n    this._enableRemove = false;\r\n    this._signal = generateID();\r\n  }\r\n\r\n  saveGuest(tag){\r\n\r\n\r\n    if (this._cache_budget.GUEST.length > 0) {\r\n          if (this._cache_budget.GUEST[0].PYMNT_TERM_CD == \"\" || this._cache_budget.GUEST[0] == undefined || this._cache_budget.GUEST[0] == null) {\r\n        toastr.error(\"<strong>Payment Term not defined</strong><br /><br />Saving cancelled.\", \"Problem occured\");\r\n        return;\r\n      }\r\n    }\r\n\r\n\r\n    var getMax = EntityQuery().from('BDGT_TMPL_GUEST_DTL').orderByDesc('BDGT_TMPL_GUEST_DTL_ID').take(1);\r\n    EntityManager().executeQuery(getMax).then((successMax) => {\r\n      var getMax = 1;\r\n\r\n      if (successMax.results.length > 0)\r\n        getMax = successMax.results[0].BDGT_TMPL_GUEST_DTL_ID + 1;\r\n\r\n\r\n      var _query = EntityQuery().from('BDGT_TMPL_GUEST_DTL').where('BDGT_TMPL_ID', '==', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n      EntityManager().executeQuery(_query).then((found) => {\r\n\r\n        \r\n          if (this._cache_budget.GUEST.length>0)\r\n              if (this._cache_budget.GUEST[0].visible) {\r\n\r\n            if (found.results.length > 0) {\r\n\r\n                found.results[0].BDGT_AMT = parseFloat(this._cache_budget.GUEST[0].INPUT_AMT_TMP.replace(/,/g,''));\r\n                found.results[0].PYMNT_TERM_CD = this._cache_budget.GUEST[0].PYMNT_TERM_CD;\r\n                found.results[0].INPUT_AMT = parseFloat(this._cache_budget.GUEST[0].INPUT_AMT_TMP.replace(/,/g,''));\r\n                found.results[0].PAY_RATE_FACTOR = parseFloat(this._cache_budget.GUEST[0].PAY_RATE_FACTOR_TMP.replace(/,/g,''));\r\n                found.results[0].REMARKS = this._cache_budget.GUEST[0].REMARKS;\r\n                \r\n                found.results[0].LAST_UPDATED_BY = this._cache_obj.USER.USER_ID;\r\n                found.results[0].LAST_UPDATED_DT =  new Date();\r\n\r\n              \r\n            } else {\r\n\r\n              var varInsert = EntityManager().createEntity('BDGT_TMPL_GUEST_DTL', {\r\n                BDGT_TMPL_GUEST_DTL_ID: getMax,\r\n                PYMNT_TERM_CD: this._cache_budget.GUEST[0].PYMNT_TERM_CD,\r\n                INPUT_AMT: parseFloat(this._cache_budget.GUEST[0].INPUT_AMT_TMP.replace(/,/g,'')),\r\n                BDGT_AMT: parseFloat(this._cache_budget.GUEST[0].INPUT_AMT_TMP.replace(/,/g,'')),\r\n                PAY_RATE_FACTOR: parseFloat(this._cache_budget.GUEST[0].PAY_RATE_FACTOR_TMP.replace(/,/g,'')),\r\n                REMARKS: this._cache_budget.GUEST[0].REMARKS,\r\n                BDGT_TMPL_ID: this._cache_budget.HEADER.BDGT_TMPL_ID,\r\n                CREATED_BY: this._cache_obj.USER.USER_ID,\r\n                CREATED_DT: new Date(),\r\n                LAST_UPDATED_BY: this._cache_obj.USER.USER_ID,\r\n                LAST_UPDATED_DT: new Date()\r\n              });\r\n              \r\n              EntityManager().addEntity(varInsert);\r\n\r\n            }\r\n          }\r\n          else\r\n          {\r\n            if (found.results.length > 0)\r\n              found.results[0].entityAspect.setDeleted();\r\n\r\n          }\r\n\r\n\r\n          EntityManager().saveChanges().then((success) => {\r\n            this.fnCheckBudget(this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n            toastr.success(\"Succesfully Saved\", \"GUEST\");\r\n            \r\n            if(tag==1) { this.fnVerifyCopyOfBudget(); }\r\n\r\n          }, (fail) => {\r\n\r\n            EntityManager().getEntities().forEach(function(entity) {\r\n              var errors = entity.entityAspect.getValidationErrors();\r\n              if (errors.length > 0)\r\n                console.log(errors);\r\n            });\r\n            \r\n            toastr.error(\"Error Occured\",\r\n              fail);\r\n\r\n              if(tag==1) { this.fnVerifyCopyOfBudget(); }\r\n\r\n          });\r\n\r\n        });\r\n\r\n\r\n    });\r\n\r\n  }\r\n\r\n  fnVerifyCopyOfBudget()\r\n  {\r\n       this._cache_budget.OBSERVERS.verify_copied_budget.forEach((all)=>{\r\n                 all();\r\n       });  \r\n  }\r\n\r\n  fnRegularBlurEvt(item, index) {\r\n\r\n    // if($(\"input[tableTermIndex*='\" + index + \"']\").val()===undefined) return;\r\n\r\n\r\n    // this._cache_budget.GUEST[index].PAYMENT_TERM = $(\"input[tableTermIndex*='\" + index + \"']\").val().toUpperCase();\r\n\r\n    //   var varFound = this._PYMNTTERM.find((all) => {\r\n    //     return this._cache_budget.GUEST[index].PAYMENT_TERM.trim() == all.REF_DESC.trim();\r\n    //   });\r\n\r\n    //   if (varFound !== undefined) {\r\n    //     this._cache_budget.GUEST[index].PYMNT_TERM_CD = varFound.REF_CD;\r\n    //   } else\r\n    //     this._cache_budget.GUEST[index].PYMNT_TERM_CD = \"\";\r\n\r\n  }\r\n\r\n  fnRegularFocus(index, prop) {\r\n\r\n    this.fnModalPaymentTerm();\r\n    \r\n  }\r\n\r\n\r\n  // fnRegularFocus(index) {\r\n\r\n  //   // if ($(\"input[tableTermIndex*='\" + index + \"']\").attr(\"hasTypeahead\") !== undefined) {\r\n  //   //   return;\r\n  //   // }\r\n\r\n  //   // $(\"input[tableTermIndex*='\" + index + \"']\").attr(\"hasTypeahead\", \"true\");\r\n\r\n  //   $(\"input[tableTermIndex*='\" + index + \"']\").focus();\r\n\r\n  // }\r\n\r\n  AmountBlur(item, property) {\r\n    var varConverted = numeral(item[property]).format('0,0.00');\r\n    item[property] = varConverted;\r\n  }\r\n\r\n}","import {bindable,inject} from 'aurelia-framework';\r\nimport { cache_obj } from 'cache_obj';\r\nimport { cache_budget } from 'ppfcs/cache_budget';\r\nimport { EntityManager, EntityQuery, generateID} from 'entity-manager-factory';\r\n//import {handle, Dispatcher} from 'aurelia-flux';  \r\nimport { getLookups } from 'masterfiles';\r\nimport settings from 'settings';\r\n// import $ from 'jquery';\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport toastr from \"toastr\";\r\nimport moment from 'moment';\r\nimport _ from 'underscore';\r\nimport { MultiObserver }from 'multi-observer';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport { program } from '../../modals/program';\r\nimport { budget } from '../../modals/budget';\r\nimport { confirm_dialog } from '../../modals/confirm_dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n//import  datepicker  from 'bootstrap-datepicker';\r\n\r\n/*\r\n  NOTES\r\n  breeze.debug.js function getUriKey(aspect) is updated\r\n  fmtProperty(kps[0], aspect) is replaced by\r\n  fmtProperty(kps[0], aspect).replace(\"M\",\"\") because odata\r\n  is not accepting decimal with 'M' - decimal identity\r\n\r\n  example id 123M is being passed, accepted is 123\r\n  existing primary cannot be replaced to int from decimal bec. ppp is using it.\r\n  if breeze is updated, implement this again\r\n\r\n*/\r\n\r\n\r\n@inject(cache_obj,cache_budget,ModalWizard,toastr,MultiObserver,DialogService)\r\nexport class MainHeaderCustomElement {\r\n  \r\n  @bindable to;\r\n  _cache_obj = null;\r\n  _user;\r\n  //_dispatcher;\r\n  _PROGRAM_GENRE_MSTR=[];\r\n  _TELECAST_MODE_MSTR=[];\r\n  _EPISODE_TYPE_MSTR=[];\r\n  _STATIONS=[];\r\n  _STATUS;//=[\"DRAFT\",\"APPROVED\",\"CLOSED\",\"EXPIRED\"];\r\n  //@bindable modalBudget;\r\n  _COMPANY_ID;\r\n  _ModalWizard;\r\n  \r\n\r\n  _disableCreateBudget = false;\r\n  _disableCancelBudget=true;\r\n  _disableRefreshBudget=true;\r\n  _disableSaveBudget=true;\r\n  _disableBudgetId=false;\r\n  _disablePrintBudget=true;\r\n  _disableCopyBudget=true;\r\n  dialogService=null;\r\n  programDisabled=true;\r\n  budgetDisabled=false;\r\n\r\n  \r\n\r\n  constructor(cache_obj,cache_budget,ModalWizard,toastr,multiObserver,DialogService) {\r\n      if (EntityManager() === undefined) {\r\n         \r\n          return;\r\n      }\r\n\r\n    this.dialogService=DialogService;\r\n    this._cache_obj = cache_obj;\r\n    this._cache_budget = cache_budget;\r\n    \r\n\r\n    this.LoginPassed(this._cache_obj.USER);\r\n    \r\n    this._cache_obj.OBSERVERS.budget_dialog.push((val) => {\r\n      this.CloseBudgetDialog(val);\r\n    });\r\n\r\n    this._cache_obj.OBSERVERS.pass_program.push((val) => {\r\n      this.PassedProgram(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.budget_refresh.push(() => {\r\n      this.fnBudgetRefreshHandle();\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.budget_loaded.push(() => {\r\n       if(this._disableSaveBudget==true)\r\n       {\r\n          this._disableSaveBudget = false;\r\n          this._disableCopyBudget = false;\r\n          settings.isNavigating = false;\r\n          toastr.success(\"Budget has been successfully loaded.\", \"Budget Template\");\r\n       }\r\n    });\r\n\r\n\r\n    this._cache_budget.OBSERVERS.verify_copied_budget.push(() => {\r\n        toastr.info(\"Verifying copied template..\", \"Budget Template\");\r\n\r\n        $.post(settings.serviceNameBase + \"/Home/Compare_Copied_Template\", {\r\n            \"BDGT_TMPL_COPIED\": this._cache_budget.tmp_bdgt_copied,\r\n            \"BDGT_TMPL_NEW\": this._cache_budget.HEADER.BDGT_TMPL_ID\r\n        }).done((response) => {\r\n           \r\n           if(response!=\"True\")\r\n           {\r\n              alert(\"There is a problem on copying the template. Please check after loading..\")\r\n           }\r\n           else\r\n           {\r\n              //toastr.clear();\r\n              // toastr.success(\"Copy template successful.\", \"Budget Template\");\r\n               alert(\"Copy template successful. Please check..\")\r\n           }\r\n\r\n           this.fnBudget('refresh');\r\n        });\r\n\r\n    });\r\n    \r\n\r\n\r\n    this._toastr = toastr;\r\n    \r\n    \r\n   // this._dispatcher=Dispatcher;\r\n    this.fnClearHeader();\r\n\r\n\r\n    this._disableCreateBudget = false;\r\n    this._disableCancelBudget=true;\r\n    this._disableRefreshBudget=true;\r\n    this._disableSaveBudget=true;\r\n    this._disableBudgetId=false;\r\n    this._disablePrintBudget=true;\r\n    this._disableCopyBudget=true;\r\n    this._ModalWizard = ModalWizard;\r\n\r\n    \r\n    //this.fnExecuteDatePicker();\r\n    setTimeout(() => {\r\n      \r\n       $('.datepicker').datepicker();\r\n         \r\n      $('#refFrom').datepicker({\r\n          format: \"mm/dd/yyyy\"\r\n        })\r\n        .on(\"changeDate\", () => {\r\n\r\n          if (new Date($('#refFrom').val()) > new Date($('#refTo').val())) {\r\n            toastr.error(\"Invalid date range.\", \"Date Change..\");\r\n            $('#refTo').datepicker(\"setValue\", new Date($('#refFrom').val()));\r\n            return;\r\n          }\r\n\r\n          this._cache_budget.HEADER.BDGT_FROM = $('#refFrom').val();\r\n          if(this._cache_budget.HEADER.BDGT_TO==\"\")\r\n          {\r\n              this._cache_budget.HEADER.BDGT_TO=this._cache_budget.HEADER.BDGT_FROM;\r\n          }\r\n\r\n          $('#refFrom').datepicker('hide');\r\n        });\r\n\r\n\r\n      $('#refTo').datepicker({\r\n          format: \"mm/dd/yyyy\"\r\n        })\r\n        .on(\"changeDate\", () => {\r\n\r\n          if (new Date($('#refTo').val()) < new Date($('#refFrom').val())) {\r\n            toastr.error(\"Invalid date range.\", \"Date Change..\");\r\n            $('#refFrom').datepicker(\"setValue\", new Date($('#refTo').val()));\r\n            return;\r\n          }\r\n\r\n          this._cache_budget.HEADER.BDGT_TO = $('#refTo').val();\r\n          $('#refTo').datepicker('hide');\r\n        });\r\n    }, 1000);\r\n    \r\n\r\n    //UPDATE EXPIRED BUDGET    \r\n    var varToday = new Date(Date.now());\r\n    var p1 = breeze.Predicate.create('BDGT_TO', '<=', new Date(varToday.getFullYear(), varToday.getMonth(), varToday.getDate()));\r\n    var p2 = breeze.Predicate.create('APPR_STAT_CD', '==', \"APP-APPROVED\");\r\n    var pred = breeze.Predicate.and([p1, p2]);\r\n\r\n\r\n    var checkExpired = EntityQuery().from('BDGT_TMPL_HDR').where(pred);\r\n    \r\n    \r\n    EntityManager().executeQuery(checkExpired).then((success) => {\r\n      success.results.forEach((all) => {\r\n        //console.log(all);\r\n        all.APPR_STAT_CD=\"APP-EXPIRED\";\r\n        all.LAST_UPDATED_BY=\"ADMIN\";\r\n        all.LAST_UPDATED_DT= new Date(Date.now());\r\n      });\r\n\r\n      EntityManager().saveChanges().then((success) => {\r\n      //  console.log(success);\r\n      }, (fail) => {\r\n        console.log(fail);\r\n      });\r\n    });\r\n\r\n  }\r\n\r\n  /////cannot use this bec first value is undefined before correct data will be placed by datepicker\r\n  checkDate(id){\r\n\r\n     setTimeout(() => {\r\n     // console.log($(\"#\"+id).val());\r\n     // console.log(Date.parse($(\"#\"+id).val()));\r\n      if(!Date.parse($(\"#\"+id).val()))\r\n      {\r\n        toastr.error(\"Invalid starting date \", \"Date Change..\");  \r\n      }\r\n      else\r\n      {\r\n        $(\"#\"+id).datepicker(\"setValue\", new Date($(\"#\"+id).val()));\r\n      }\r\n\r\n     },1000);\r\n    \r\n    // if(!moment($('#refFrom').val(),'MM-DD-YYYY',true).isValid()){\r\n    //     item\r\n    // }\r\n    // console.log(moment($('#refFrom').val(),'MM-DD-YYYY')._i);\r\n    //   this._cache_budget.HEADER.BDGT_FROM=moment($('#refFrom').val(),'MM-DD-YYYY');\r\n  }\r\n\r\n\r\n  validate() {\r\n\r\n    // var _query = EntityQuery().from('BDGT_TMPL_HDR').where('BDGT_TMPL_ID', '==', '0');\r\n    // this._cache_budget = EntityManager().executeQueryLocally(_query)[0]; //if has offline;\r\n    // //console.log(EntityManager().executeQueryLocally(_query));\r\n    // EntityManager().executeQuery(_query).then((found) => {\r\n    \r\n    // });\r\n  }\r\n\r\n\r\n  inputChanged(evt, value) {\r\n    if (evt.keyCode == 13) {\r\n\r\n    // this._cache_budget.CALLER.VALUE1=this._cache_budget.HEADER.BDGT_TMPL_ID; \r\n    // this._cache_budget.CALLER.ACTION='budget.dialog';\r\n\r\n\r\n    this._cache_obj.OBSERVERS.budget_dialog.forEach((all)=>{\r\n      all(this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n    });\r\n\r\n      // this._dispatcher.dispatch('budget.dialog', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n    }\r\n  }\r\n    \r\n  //@handle('login.passed')\r\n  LoginPassed(user) {\r\n\r\n    if(user.USER_ID==undefined) return;\r\n    this._user = user.USER_ID;\r\n    this._COMPANY_ID = user.COMPANY_ID;\r\n\r\n   \r\n\r\n    this.budgetDisabled=false;\r\n\r\n    // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n    //   all(this.modalBudget.id, true);\r\n    // });\r\n    \r\n    this.programDisabled=true;\r\n    // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n    //   all(this.modalProgram.id, false);\r\n    // });\r\n\r\n   \r\n    this.fnClearBudget();\r\n\r\n    this._disableCreateBudget=false;\r\n    this._disableCancelBudget=true;\r\n    this._disableRefreshBudget=true;\r\n    this._disableSaveBudget=true;\r\n    this._disablePrintBudget=true;\r\n    this._disableCopyBudget=true;\r\n  }\r\n\r\n  //@handle('loggedout')\r\n  LoggedOut()\r\n  {\r\n    \r\n    this._disableCreateBudget = true;\r\n    this._disableCancelBudget = true;\r\n    this._disableRefreshBudget = true;\r\n    this._disableSaveBudget = true;\r\n    this._disablePrintBudget = true;\r\n    this._disableCopyBudget=true;\r\n\r\n    this.budgetDisabled=false;\r\n    // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n    //   all(this.modalBudget.id, false);\r\n    // });\r\n\r\n    this.programDisabled=true;\r\n    // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n    //   all(this.modalProgram.id, false);\r\n    // });\r\n\r\n    //this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n    //this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, false);\r\n\r\n    this.fnClearHeader();\r\n  }\r\n\r\n  fnClearHeader(){\r\n     //var PROGRAM_MSTR={PROGRAM_TITLE:\"\"}  ;\r\n     this._cache_budget.HEADER = {\r\n      BDGT_TMPL_ID:\"\",\r\n      //PROGRAM_MSTR.PROGRAM_TITLE:\"\",\r\n      CHARGE_CD:\"\",\r\n      PROGRAM_GENRE_CD:\"\",\r\n      TELECAST_MODE_CD:\"\",\r\n      EPISODE_TYPE_CD:\"\",\r\n      EPISODES:\"\",\r\n      TAPING_DAYS:\"\",\r\n      BDGT_FROM:\"\",\r\n      BDGT_TO:\"\",\r\n      STATION_ID:\"\",\r\n      APPR_STAT_CD:\"\",\r\n      REMARKS:\"\"\r\n   };\r\n\r\n    while (this._cache_budget.REGULAR.length > 0) {\r\n      this._cache_budget.REGULAR.pop();\r\n    }\r\n    this._cache_budget.REGULAR=[];\r\n\r\n    while (this._cache_budget.SEMI_REGULAR.length > 0) {\r\n      this._cache_budget.SEMI_REGULAR.pop();\r\n    }\r\n    this._cache_budget.SEMI_REGULAR = [];\r\n   \r\n    while (this._cache_budget.STAFF.length > 0) {\r\n      this._cache_budget.STAFF.pop();\r\n    }\r\n    this._cache_budget.STAFF = [];\r\n\r\n    while (this._cache_budget.GUEST.length > 0) {\r\n      this._cache_budget.GUEST.pop();\r\n    }\r\n\r\n    this._cache_budget.GUEST = [];\r\n\r\n    this._cache_budget.OBSERVERS.reset_summary.forEach((all) => {\r\n      all();\r\n    });\r\n\r\n      \r\n    this._disableBudgetId=false;\r\n\r\n     this._cache_budget.OBSERVERS.reset_all.forEach((all) => {\r\n      all();\r\n    });\r\n\r\n    \r\n  }\r\n\r\n  fnClearBudget(){\r\n    this.fnClearHeader();\r\n\r\n    this._PROGRAM_GENRE_MSTR=getLookups().PROGRAM_GENRE_MSTR;\r\n    this._PROGRAM_GENRE_MSTR.unshift({});\r\n    this._TELECAST_MODE_MSTR=getLookups().TELECAST_MODE_MSTR;\r\n    this._TELECAST_MODE_MSTR.unshift({});\r\n    this._EPISODE_TYPE_MSTR=getLookups().EPISODE_TYPE_MSTR;\r\n    this._EPISODE_TYPE_MSTR.unshift({});\r\n    this._STATIONS=settings.STATIONS;\r\n\r\n    this._STATUS=[{}];\r\n    // getLookups().REFERENCE_CD_MSTR.forEach((item)=>{\r\n    //   if(item.REF_GRP_CD=='APPR_STAT_CD')\r\n    //   {\r\n    //       this._STATUS.push(item);\r\n    //       console.log(item);\r\n    //   }\r\n    // });\r\n  }\r\n\r\n  //@handle('budget.dialog')\r\n  CloseBudgetDialog(value) {\r\n      \r\n    var _query = EntityQuery().from('BDGT_TMPL_HDR').where('BDGT_TMPL_ID', '==', value).expand('PROGRAM_MSTR').select('BDGT_TMPL_ID, PROGRAM_MSTR, CHARGE_CD, PROGRAM_GENRE_CD,  TELECAST_MODE_CD,  EPISODE_TYPE_CD,   EPISODES,  TAPING_DAYS, BDGT_FROM, BDGT_TO, STATION_ID, APPR_STAT_CD, REMARKS, CREATED_BY, LAST_UPDATED_BY ');\r\n\r\n    EntityManager().executeQuery(_query).then((found) => {\r\n \r\n        this._STATUS=[{REF_CD:\"APP-DRAFT\",REF_DESC:\"APP-DRAFT\"},{REF_CD:\"APP-APPROVED\",REF_DESC:\"APP-APPROVED\"}];       \r\n        \r\n        if(found.results.length==0) return;\r\n\r\n        this._cache_budget.HEADER = found.results[0];\r\n\r\n        this._cache_budget.HEADER.BDGT_FROM=moment(new Date(this._cache_budget.HEADER.BDGT_FROM)).format('MM-DD-YYYY');\r\n        this._cache_budget.HEADER.BDGT_TO=moment(new Date(this._cache_budget.HEADER.BDGT_TO)).format('MM-DD-YYYY');\r\n        \r\n        this._disableBudgetId=true;\r\n        //update buttons\r\n        this._disableCreateBudget=true;\r\n        this._disableCancelBudget=false;\r\n        this._disableRefreshBudget=false;\r\n\r\n        this._cache_budget._LOADING_BUDGET=1;\r\n        this._disableSaveBudget=true;\r\n        \r\n        this._disablePrintBudget = false;\r\n        this._disableCopyBudget=true;\r\n\r\n        this.budgetDisabled=true;        \r\n        // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n        //   all(this.modalBudget.id, false);\r\n        // });\r\n\r\n        //this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n\r\n        if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-CLOSED\")\r\n        {\r\n          this._STATUS=[{REF_CD:\"APP-CLOSED\",REF_DESC:\"APP-CLOSED\"}];\r\n          this._disableSaveBudget = true;\r\n          //this._disablePrintBudget = true;\r\n        }\r\n        else if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-EXPIRED\")\r\n        {\r\n          this._STATUS=[{REF_CD:\"APP-EXPIRED\",REF_DESC:\"APP-EXPIRED\"}];\r\n          this._disableSaveBudget = true;\r\n          this._disablePrintBudget = true;\r\n          //this._disableCopyBudget=false;\r\n        }\r\n        else if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-DRAFT\")\r\n        {\r\n          \r\n          this.programDisabled=false;\r\n          // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n          //   all( this.modalProgram.id, true);\r\n          // });\r\n\r\n          //this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n\r\n\r\n\r\n          this._cache_budget.OBSERVERS.enable_approved.forEach((all) => {\r\n            all(true);\r\n          });\r\n\r\n          //this._dispatcher.dispatch('enable.approved',true);\r\n        }\r\n        else\r\n        {\r\n\r\n            this._cache_budget.OBSERVERS.enable_approved.forEach((all) => {\r\n              all(false);\r\n            });\r\n\r\n            //this._dispatcher.dispatch('enable.approved', false);\r\n        }\r\n\r\n         if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-APPROVED\")\r\n         {\r\n\r\n            this._cache_budget.STATUS=\"APPROVED\";\r\n            this._disableSaveBudget=true;\r\n\r\n            this.programDisabled=true;\r\n            // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n            //   all(this.modalProgram.id, false);\r\n            // });\r\n\r\n            //this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, false);\r\n         }\r\n         // else if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-APPROVED\")\r\n         // {\r\n         //    this._cache_budget.STATUS=\"EXPIRED\";\r\n         // }\r\n         else\r\n            this._cache_budget.STATUS=\"VIEW\";\r\n\r\n         \r\n        this._cache_budget.OBSERVERS.disable_search_personnel.forEach((all) => {\r\n            all(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-DRAFT\");\r\n        });         \r\n\r\n    },(fail)=>{\r\n      console.log(fail);\r\n\r\n    });\r\n\r\n  }\r\n\r\n  \r\n\r\n\r\n  //@handle('pass.program')\r\n  PassedProgram(value) {\r\n    this._cache_budget.HEADER.PROGRAM_MSTR=value;\r\n    this._cache_budget.HEADER.CHARGE_CD=value.PROGRAM_CD;\r\n\r\n\r\n    // if (this.modalProgram.id == this._ModalWizard.ids[this._ModalWizard.ids.length-1]) {\r\n    //   this._ModalWizard.ids.pop();\r\n\r\n    //   this._cache_budget.OBSERVERS.close_modal.forEach((all)=>{\r\n    //     all(this.modalProgram.id);\r\n    //   });\r\n\r\n    // }\r\n  }\r\n\r\n\r\n  //@handle('budget.refresh')\r\n  fnBudgetRefreshHandle()\r\n  {\r\n      this.fnBudget(\"refresh\");\r\n  }\r\n\r\n  \r\n  fnBudget(call){\r\n\r\n    switch(call)\r\n    {\r\n      case \"create\":\r\n      {\r\n        this._disableCreateBudget=true;\r\n        this._disableCancelBudget=false;\r\n        this._disableRefreshBudget=true;\r\n        this._disableSaveBudget=false;\r\n        this._disableBudgetId=true;\r\n        this._disablePrintBudget = true;\r\n\r\n\r\n        this.budgetDisabled=true;\r\n        this.programDisabled=false;\r\n        // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n        //   all(this.modalBudget.id, false);\r\n        //   all(this.modalProgram.id, true);\r\n        // });\r\n\r\n    \r\n        this._cache_budget.STATUS=\"CREATE\";\r\n        this._STATUS=[{REF_CD:\"APP-DRAFT\",REF_DESC:\"APP-DRAFT\"}];\r\n\r\n        this.fnDialogProgram();\r\n\r\n        break;\r\n      }\r\n      case \"cancel\":\r\n      {\r\n        this.fnClearHeader();\r\n        this._disableCreateBudget=false;\r\n        this._disableCancelBudget=false;\r\n        this._disableRefreshBudget=true;\r\n        this._disableSaveBudget=true;\r\n        this._disablePrintBudget = true;\r\n\r\n        this.budgetDisabled=false;\r\n        this.programDisabled=true;\r\n        // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n        //   all(this.modalBudget.id, true);\r\n        //   all(this.modalProgram.id, false);\r\n        // });\r\n\r\n        // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, false);\r\n        // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, true);\r\n        this._cache_budget.STATUS=\"NONE\";\r\n        break;\r\n      }\r\n      case \"refresh\":\r\n      {\r\n\r\n        this._disableCreateBudget=true;\r\n        this._disableSaveBudget=false;\r\n        this._disableCancelBudget=false;\r\n        this._disableRefreshBudget=false;\r\n        this._disablePrintBudget = true;\r\n    \r\n        this._cache_obj.OBSERVERS.budget_dialog.forEach((all) => {\r\n          all(this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n        });\r\n\r\n        this.budgetDisabled=true;\r\n        this.programDisabled=false;\r\n        // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n        //   all(this.modalBudget.id, false);\r\n        //   all(this.modalProgram.id, true);\r\n        // });\r\n\r\n        // this._dispatcher.dispatch('budget.dialog', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n        // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n        // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n\r\n        break;\r\n      }\r\n      case \"save\":\r\n      {\r\n       \r\n        this.fnSaveBudget(\"\");\r\n\r\n        break;\r\n      }\r\n      case \"print\":\r\n      {\r\n\r\n        var varUseReport=\"\";\r\n        if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-DRAFT\")\r\n        {\r\n            varUseReport=\"Draft\";\r\n        }\r\n        if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-APPROVED\")\r\n        {\r\n            varUseReport=\"Approved\";\r\n        }\r\n\r\n\r\n        if(varUseReport!=\"\")\r\n        {\r\n           // var popup = window.open(\"http://absppms:8080/ReportServer/Pages/ReportViewer.aspx?%2fPPID+Reports%2fBudget_Print&rs:Command=Render&Actual_Cost_id=\"+this._cache_budget.HEADER.BDGT_TMPL_ID+\"&isConfidential=\"+this._cache_obj.ALLOW_PASS_CONFIDENTIAL+\"\", \"popupWindow\", \"width=1280px,height=1024px,scrollbars=yes,directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,addressbar=0,fullscreen=false\");\r\n            var popup = window.open(settings.actualCostWebUrl+\"/report/Budget_\"+varUseReport+\"_Report.aspx?BDID=\"+this._cache_budget.HEADER.BDGT_TMPL_ID+\"&ConcealConfidentialBudgetAmt=\"+this._cache_obj.ALLOW_PASS_CONFIDENTIAL+\"&USER_ACCOUNT=\"+this._user+\"&COMPANY_ID=\"+this._COMPANY_ID, \"popupWindow\", \"width=1280px,height=1024px,scrollbars=yes,directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,addressbar=0,fullscreen=false\");\r\n           popup.moveTo(0, 0);\r\n        }\r\n        \r\n        \r\n         break;\r\n      }\r\n      case \"copy\":\r\n      {\r\n        \r\n\r\n          this.dialogService.open({ viewModel: confirm_dialog, model: 'Copy Template?' }).whenClosed(response => {\r\n          if (!response.wasCancelled) {\r\n             //console.log(response.output);\r\n\r\n              this._cache_budget.tmp_bdgt_copied  = this._cache_budget.HEADER.BDGT_TMPL_ID;\r\n\r\n              var varGetHeader = EntityQuery().from('BDGT_TMPL_HDR').where('BDGT_TMPL_ID', '==', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n\r\n              EntityManager().executeQuery(varGetHeader).then((found) => {\r\n                found.results[0].APPR_STAT_CD = \"APP-CLOSED\";\r\n                EntityManager().saveChanges().then((success) => {\r\n\r\n                  this._cache_budget.HEADER.BDGT_TMPL_ID = \"\";\r\n                  this._cache_budget.HEADER.APPR_STAT_CD = \"APP-DRAFT\";\r\n                  this._cache_budget.STATUS = \"DRAFT\";\r\n                  this._cache_budget.IS_COPYING = true;\r\n                  \r\n                  this.fnSaveBudget(\"\");\r\n\r\n                });\r\n              });\r\n\r\n            \r\n\r\n\r\n          } else {\r\n            \r\n          }\r\n         \r\n        });\r\n\r\n      }\r\n      break;\r\n      case \"close\":{\r\n\r\n            this.dialogService.open({ viewModel: confirm_dialog, model: 'Close Template?' }).whenClosed(response => {\r\n          if (!response.wasCancelled) {\r\n            \r\n                //this._cache_budget.HEADER.APPR_STAT_CD='APP-CLOSED';\r\n                this.fnSaveBudget('APP-CLOSED');\r\n           \r\n            \r\n          } else {\r\n            \r\n          }\r\n         \r\n        });\r\n\r\n      }\r\n      break;\r\n\r\n\r\n    }\r\n  }\r\n\r\n\r\n  fnBudgetValidation_1(){\r\n   \r\n      return new Promise((resolve,reject)=>{ \r\n\r\n    var varSubMin = new Date(this._cache_budget.HEADER.BDGT_FROM);\r\n      var varAddMin = new Date(this._cache_budget.HEADER.BDGT_TO);\r\n      \r\n      console.log(new Date(varSubMin.getFullYear(), varSubMin.getMonth(), varSubMin.getDate() - 1));\r\n      console.log(new Date(varAddMin.getFullYear(), varAddMin.getMonth(), varAddMin.getDate() + 1));\r\n\r\n      var p1 = breeze.Predicate.create('BDGT_FROM', '>=', new Date(varSubMin.getFullYear(), varSubMin.getMonth(), varSubMin.getDate() - 1));\r\n      var p2 = breeze.Predicate.create('BDGT_TO', '<=', new Date(varAddMin.getFullYear(), varAddMin.getMonth(), varAddMin.getDate() + 1));\r\n      var p3 = breeze.Predicate.create('BDGT_TMPL_ID', '!=', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n      var p4 = breeze.Predicate.create('EPISODE_TYPE_CD', '==', this._cache_budget.HEADER.EPISODE_TYPE_CD);\r\n      var pred = breeze.Predicate.and([p1, p2, p3, p4]);\r\n      \r\n      var strException=\"\";\r\n      var varFromMax = null;\r\n      var varToMax = null;\r\n      var _query = EntityQuery().from('BDGT_TMPL_HDR').where(pred);\r\n      EntityManager().executeQuery(_query).then((found) => {\r\n        if (found.results !== undefined) {\r\n          var countError=0;\r\n          found.results.forEach((all) => {\r\n            if(all.APPR_STAT_CD!=null)\r\n            if (all.APPR_STAT_CD.includes('EXPIRE') || all.APPR_STAT_CD.includes('CLOSE')) {\r\n              console.log(all);\r\n              \r\n              if(varFromMax==null || varFromMax>all.BDGT_FROM)\r\n              {\r\n                varFromMax=all.BDGT_FROM;\r\n              }\r\n\r\n              if(varToMax==null || varToMax<all.BDGT_TO)\r\n              {\r\n                varToMax=all.BDGT_TO;\r\n              }\r\n\r\n\r\n              ++countError; \r\n            }\r\n          });\r\n\r\n          if(countError>0)\r\n          {\r\n            toastr.error(\"Budget can only be acceptable if date will be out of range of the last CLOSED/EXPIRED TEMPLATE\");\r\n            toastr.error(\"Not in between \"  +  varFromMax.getMonth() + \"-\" + varFromMax.getDate() +  \"-\" + varFromMax.getFullYear() + \" and \"  + varToMax.getMonth() + \"-\" + varToMax.getDate() +  \"-\" + varToMax.getFullYear() );\r\n            reject(false); \r\n          }\r\n          else\r\n            resolve(true);\r\n\r\n        }\r\n        else\r\n          resolve(true);\r\n      });\r\n\r\n          \r\n\r\n      });\r\n\r\n  }\r\n\r\n  fnBudgetValidation_2(){\r\n\r\n     return new Promise((resolve,reject)=>{ \r\n\r\n      var varAddMin = new Date(this._cache_budget.HEADER.BDGT_TO);\r\n      var varSubMin = new Date(this._cache_budget.HEADER.BDGT_FROM);\r\n\r\n      var p3 = breeze.Predicate.create('BDGT_TMPL_ID', '!=', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n      var c1 = breeze.Predicate.create('BDGT_TMPL_HDR.PROGRAM_ID', '==', this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_ID)\r\n\r\n      var pred2 = breeze.Predicate.and([c1, p3]);\r\n      var _queryCheckActual = EntityQuery().from('ACTUAL_COST_HDR').where(pred2).expand(\"BDGT_TMPL_HDR\");\r\n      EntityManager().executeQuery(_queryCheckActual).then((found) => {\r\n\r\n        if (found.results !== undefined) {\r\n\r\n              var varPromises = [];\r\n              found.results.forEach((all) => {\r\n\r\n\r\n                var newPromise = new Promise((resolve_2, reject_2) => {\r\n\r\n                  var varTmpFrom = new Date(all.ACTUAL_FROM.getFullYear(), all.ACTUAL_FROM.getMonth(), all.ACTUAL_FROM.getDate());\r\n                  var varTmpTo = new Date(all.ACTUAL_TO.getFullYear(), all.ACTUAL_TO.getMonth(), all.ACTUAL_TO.getDate());\r\n\r\n                if ((varTmpFrom <= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n                      (varTmpTo <= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpTo >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n                      (varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n                      (varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpTo <= new Date(this._cache_budget.HEADER.BDGT_TO))\r\n                    ) {\r\n                      toastr.error(\"Please enter range beyond the created budget (AC:\" + all.ACTUAL_COST_ID + \")\");\r\n                      reject_2(false); \r\n                    }\r\n\r\n\r\n\r\n                  var _queryCheckVtr = EntityQuery().from('VTR_LIVE_DT_DTL').where('ACTUAL_COST_ID', '==', all.ACTUAL_COST_ID);\r\n                  EntityManager().executeQuery(_queryCheckVtr).then((foundVtr) => {\r\n\r\n                    if (foundVtr.results === undefined) {\r\n                      resolve_2(true);\r\n                    }\r\n\r\n                    var varDataFromCompare = new Date(this._cache_budget.HEADER.BDGT_FROM);\r\n                    var varDataToCompare = new Date(this._cache_budget.HEADER.BDGT_FROM);\r\n\r\n                    var varMaxDate = null;\r\n                    foundVtr.results.forEach((allDate) => {\r\n\r\n                      //var varVtr = new Date(all.VTR_LIVE_DT.getFullYear(), all.VTR_LIVE_DT.getMonth(), all.VTR_LIVE_DT.getDate());\r\n                        var varVtr = moment(new Date(allDate.VTR_LIVE_DT)).format('MM-DD-YYYY');\r\n                        var varDateCompare = new Date(varVtr);\r\n\r\n                        if (varDataFromCompare <= varDateCompare && varDateCompare <= varDataToCompare) {\r\n                        if (varMaxDate == null)\r\n                          varMaxDate = varVtr;\r\n                        else if (varMaxDate < varVtr)\r\n                          varMaxDate = varVtr;\r\n\r\n                        //toastr.error(\"Please enter range beyond the created budget (AC:\" + all.ACTUAL_COST_ID + \")\");\r\n                      }\r\n                    });\r\n\r\n                    if (varMaxDate == null) {\r\n                      resolve_2(true);\r\n                    } else {\r\n                      var new_date = moment(varMaxDate, \"MM-DD-YYYY\");\r\n                      new_date.add(1, 'days');\r\n                      new_date = moment(new Date(new_date)).format('MM-DD-YYYY');\r\n                      toastr.error(\"An existing ActualCost with Id (\" + all.ACTUAL_COST_ID + \") is using this budget template. <br>BudgetId (\" + all.BDGT_TMPL_ID + \") with status (\" + all.BDGT_TMPL_HDR.APPR_STAT_CD.replace(\"APP-\", \"\") + \").\" +\r\n                        \" Either open the existing Budget Template and create a Copy, or start the validity on \" + new_date);\r\n\r\n                      reject_2(false);\r\n                    }\r\n\r\n             \r\n                  });\r\n\r\n\r\n                });\r\n\r\n                varPromises.push(newPromise);\r\n\r\n\r\n\r\n              });\r\n\r\n              Promise.all(varPromises).then((passed) => {\r\n                resolve(true);\r\n              }, (fail) => {\r\n                reject(false);\r\n                //reject(fail);\r\n              });\r\n\r\n\r\n          // found.results.forEach((all) => {\r\n\r\n\r\n          //   var varTmpFrom = new Date(all.ACTUAL_FROM.getFullYear(), all.ACTUAL_FROM.getMonth(), all.ACTUAL_FROM.getDate());\r\n          //   var varTmpTo = new Date(all.ACTUAL_TO.getFullYear(), all.ACTUAL_TO.getMonth(), all.ACTUAL_TO.getDate());\r\n\r\n          //   if ((varTmpFrom <= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n          //     (varTmpTo <= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpTo >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n          //     (varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n          //     (varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpTo <= new Date(this._cache_budget.HEADER.BDGT_TO))\r\n          //   ) {\r\n          //     toastr.error(\"Please enter range beyond the created budget (AC:\" + all.ACTUAL_COST_ID + \")\");\r\n          //     reject(false); \r\n          //   }\r\n\r\n\r\n\r\n          //   var _queryCheckVtr = EntityQuery().from('VTR_LIVE_DT_DTL').where('ACTUAL_COST_ID', '==', all.ACTUAL_COST_ID);\r\n          //   EntityManager().executeQuery(_queryCheckVtr).then((foundVtr) => {\r\n\r\n          //     var varMaxDate = null;\r\n          //     foundVtr.results.forEach((allDate) => {\r\n\r\n          //       //var varVtr = new Date(all.VTR_LIVE_DT.getFullYear(), all.VTR_LIVE_DT.getMonth(), all.VTR_LIVE_DT.getDate());\r\n          //       var varVtr = moment(new Date(allDate.VTR_LIVE_DT)).format('MM-DD-YYYY');\r\n          //       if (this._cache_budget.HEADER.BDGT_FROM >= varVtr && varVtr <= this._cache_budget.HEADER.BDGT_TO) {\r\n          //         if (varMaxDate == null)\r\n          //           varMaxDate = varVtr;\r\n          //         else if (varMaxDate < varVtr)\r\n          //           varMaxDate = varVtr;\r\n\r\n          //       }\r\n          //     });\r\n\r\n          //     if (varMaxDate !== null && (all.BDGT_TMPL_HDR.APPR_STAT_CD == \"APP-EXPIRED\" || all.BDGT_TMPL_HDR.APPR_STAT_CD == \"APP-CLOSED\" || all.BDGT_TMPL_HDR.APPR_STAT_CD == \"APP-APPROVED\")) {\r\n          //       var new_date = moment(varMaxDate, \"DD-MM-YYYY\").add(1, 'days');\r\n          //       new_date = moment(new Date(new_date)).format('MM-DD-YYYY');\r\n          //       toastr.error(\"An existing ActualCost with Id (\" + all.ACTUAL_COST_ID + \") is using this budget template. <br>BudgetId (\" + all.BDGT_TMPL_ID + \") with status (\" + all.BDGT_TMPL_HDR.APPR_STAT_CD.replace(\"APP-\", \"\") + \").\" +\r\n          //         \" Either open the existing Budget Template and create a Copy, or start the validity on \" + new_date);\r\n\r\n          //        reject(false); \r\n          //     }\r\n\r\n          //   });\r\n\r\n          // });\r\n\r\n\r\n\r\n        }\r\n        else\r\n            resolve(true); \r\n\r\n      });\r\n\r\n\r\n\r\n\r\n       \r\n\r\n      });\r\n\r\n\r\n\r\n  }\r\n\r\n  fnValidation_Approved(){\r\n\r\n    return new Promise((resolve,reject) => \r\n    {\r\n      var p3 = breeze.Predicate.create('BDGT_TMPL_ID', '!=', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n      var c1 = breeze.Predicate.create('BDGT_TMPL_HDR.PROGRAM_ID', '==', this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_ID);\r\n      var c2 = breeze.Predicate.create('APPR_STAT_CD', '==', \"APP-APPROVED\");\r\n      var pred2 = breeze.Predicate.and([c1, c2, p3]);\r\n      var _queryCheckActual = EntityQuery().from('ACTUAL_COST_HDR').where(pred2).expand(\"BDGT_TMPL_HDR\");\r\n      EntityManager().executeQuery(_queryCheckActual).then((found) => {\r\n\r\n        if (found.results !== undefined) {\r\n\r\n          var varPromises=[];\r\n          found.results.forEach((all) => {\r\n\r\n\r\n             var newPromise =  new Promise((resolve_2, reject_2) => {\r\n\r\n              var varTmpFrom = new Date(all.ACTUAL_FROM.getFullYear(), all.ACTUAL_FROM.getMonth(), all.ACTUAL_FROM.getDate());\r\n              var varTmpTo = new Date(all.ACTUAL_TO.getFullYear(), all.ACTUAL_TO.getMonth(), all.ACTUAL_TO.getDate());\r\n\r\n\r\n\r\n              var _queryCheckVtr = EntityQuery().from('VTR_LIVE_DT_DTL').where('ACTUAL_COST_ID', '==', all.ACTUAL_COST_ID);\r\n              EntityManager().executeQuery(_queryCheckVtr).then((foundVtr) => {\r\n\r\n                if (foundVtr.results === undefined) {\r\n                   resolve_2(true);\r\n                }\r\n\r\n                var varMaxDate = null;\r\n\t        var varDataFromCompare = new Date(this._cache_budget.HEADER.BDGT_FROM);\r\n                var varDataToCompare = new Date(this._cache_budget.HEADER.BDGT_FROM);\r\n\t\r\n                foundVtr.results.forEach((allDate) => {\r\n\t\t\r\n                  //var varVtr = new Date(all.VTR_LIVE_DT.getFullYear(), all.VTR_LIVE_DT.getMonth(), all.VTR_LIVE_DT.getDate());\r\n                  var varVtr = moment(new Date(allDate.VTR_LIVE_DT)).format('MM-DD-YYYY');\r\n\r\n                  if ((varTmpFrom <= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n                      (varTmpTo <= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpTo >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n                      (varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n                      (varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpTo <= new Date(this._cache_budget.HEADER.BDGT_TO))\r\n                  ) {\r\n                  //if (this._cache_budget.HEADER.BDGT_FROM <= varVtr && varVtr <= this._cache_budget.HEADER.BDGT_TO) {\r\n\r\n                      var varVtr = moment(new Date(allDate.VTR_LIVE_DT)).format('MM-DD-YYYY');\r\n                      var varDateCompare = new Date(varVtr);\r\n     \r\n                      if (varDataFromCompare <= varDateCompare && varDateCompare <= varDataToCompare) {\r\n                          if (varMaxDate == null)\r\n                              varMaxDate = varVtr;\r\n                          else if (varMaxDate < varVtr)\r\n                              varMaxDate = varVtr;\r\n                      }\r\n                    //  if (varMaxDate == null)\r\n                    //  varMaxDate = varVtr;\r\n                    //else if (varMaxDate < varVtr)\r\n                    //  varMaxDate = varVtr;\r\n\r\n                    //toastr.error(\"Please enter range beyond the created budget (AC:\" + all.ACTUAL_COST_ID + \")\");\r\n                  }\r\n                });\r\n\r\n                if(varMaxDate==null)\r\n                {\r\n                    resolve_2(true);\r\n                } \r\n                else\r\n                {\r\n                  //console.log(varMaxDate);\r\n                  var new_date = moment(varMaxDate, \"MM-DD-YYYY\");\r\n                  //console.log(new_date);\r\n                  new_date.add(1, 'days');\r\n                  new_date = moment(new Date(new_date)).format('MM-DD-YYYY');\r\n                  toastr.error(\"An existing ActualCost with Id (\" + all.ACTUAL_COST_ID + \") is using this budget template. <br>BudgetId (\" + all.BDGT_TMPL_ID + \") with status (\" + all.BDGT_TMPL_HDR.APPR_STAT_CD.replace(\"APP-\", \"\") + \").\" +\r\n                    \" Either open the existing Budget Template and create a Copy, or start the validity on \" + new_date);\r\n\r\n                  reject_2(false);\r\n                }\r\n\r\n             \r\n              });\r\n\r\n\r\n             });\r\n\r\n            varPromises.push(newPromise);\r\n\r\n          });\r\n\r\n         Promise.all(varPromises).then((passed) => {\r\n             resolve(true);\r\n          }, (fail) => {\r\n             reject(false);\r\n             //reject(fail);\r\n          });\r\n\r\n        }\r\n        else\r\n           resolve(true);\r\n        \r\n\r\n      });\r\n\r\n      \r\n\r\n    });\r\n    \r\n  }\r\n\r\n\r\n  fnSaveBudget(passed_status) \r\n  {\r\n\r\n     var strValidation=\"\";\r\n\r\n     if(this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_TITLE==\"\")\r\n     {\r\n        strValidation+=\"No Program specified. <br>\";\r\n     }\r\n     \r\n     if(!moment(this._cache_budget.HEADER.BDGT_FROM).isValid() || !moment(this._cache_budget.HEADER.BDGT_TO).isValid())\r\n     {\r\n        strValidation+=\"Invalid Template Start/End Date validity. <br>\";\r\n     }\r\n\r\n     if(this._cache_budget.HEADER.PROGRAM_GENRE_CD==\"\")\r\n     {\r\n        strValidation+=\"No Program Genre. <br>\";\r\n     }\r\n     \r\n     if(this._cache_budget.HEADER.EPISODE_TYPE_CD==\"\")\r\n     {\r\n        strValidation+=\"No Episode Type. <br>\";\r\n     }\r\n\r\n     if(this._cache_budget.HEADER.TELECAST_MODE_CD==\"\")\r\n     {\r\n        strValidation+=\"No Telecast Mode. <br>\";\r\n     }\r\n\r\n     if(!parseInt(this._cache_budget.HEADER.TAPING_DAYS)>0)\r\n     {\r\n        strValidation+=\"Invalid Taping Day(s).<br>\";\r\n     }\r\n\r\n     if(!parseInt(this._cache_budget.HEADER.EPISODES)>0)\r\n     {\r\n        strValidation+=\"Invalid Episode(s).<br>\";\r\n     }\r\n\r\n     if(strValidation!=\"\")\r\n     {\r\n        toastr.error(\"Exception occured. <br/><br/>\"+strValidation, \"Budget Template\");\r\n        return;\r\n     }\r\n     \r\n     if(this._cache_budget.TOTAL<=0 && this._cache_budget.HEADER.APPR_STAT_CD.includes('APPROVED'))\r\n     {\r\n        toastr.error(\"Cannot have Zero Total Budget.\", \"Budget Template\");\r\n        return;\r\n     }\r\n\r\n     //have to add +8 hrs or browser minus 8 hrs when passed to server\r\n    // if (this._cache_budget.HEADER.BDGT_FROM !== undefined)\r\n    //   this._cache_budget.HEADER.BDGT_FROM = moment(new Date(this._cache_budget.HEADER.BDGT_FROM)).add(8, 'hours');\r\n\r\n    // if (this._cache_budget.HEADER.BDGT_TO !== undefined)\r\n    //   this._cache_budget.HEADER.BDGT_TO = moment(new Date(this._cache_budget.HEADER.BDGT_TO)).add(8, 'hours');\r\n     //this._cache_budget.HEADER.APPR_STAT_CD\r\n    if (passed_status.includes('EXPIRE') || passed_status.includes('CLOSE')) {\r\n      Promise.all([this.fnBudgetValidation_2()]).then((passed) => { //removed this.fnBudgetValidation_1(), 8/29/2017 -- PAULV and KARRENA\r\n       if(passed_status!='')\r\n         this._cache_budget.HEADER.APPR_STAT_CD=passed_status;\r\n         this.fnExecuteSaveBudgetHeader();\r\n      }, (fail) => {\r\n        toastr.error(\"Saving Cancelled.\", \"Saving..\");\r\n\r\n      });\r\n    }\r\n    else if (this._cache_budget.HEADER.APPR_STAT_CD.includes('APPROVED')) {\r\n\r\n      this.fnValidation_Approved().then((passed) => {\r\n\r\n        var varToday = new Date(Date.now());\r\n\r\n        if (new Date(varToday.getFullYear(), varToday.getMonth(), varToday.getDate()) >= new Date(moment(this._cache_budget.HEADER.BDGT_TO).subtract(8, 'hours').format('MM-DD-YYYY'))) {\r\n          this._cache_budget.HEADER.APPR_STAT_CD = \"APP-EXPIRED\";\r\n        }\r\n\r\n        this.fnExecuteSaveBudgetHeader();\r\n\r\n      }, (fail) => {\r\n        toastr.error(\"Saving Cancelled.\", \"Saving..\");\r\n      });\r\n      \r\n    }\r\n    else\r\n    {\r\n      this.fnExecuteSaveBudgetHeader();\r\n    }\r\n\r\n\r\n    return;\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  fnExecuteSaveBudgetHeader()\r\n  {\r\n\r\n      var varInsert=null;\r\n\r\n    // if (this._cache_budget.HEADER.BDGT_FROM !== undefined)\r\n    //   this._cache_budget.HEADER.BDGT_FROM = moment(new Date(this._cache_budget.HEADER.BDGT_FROM)).add(8, 'hours');\r\n\r\n    // if (this._cache_budget.HEADER.BDGT_TO !== undefined)\r\n    //   this._cache_budget.HEADER.BDGT_TO = moment(new Date(this._cache_budget.HEADER.BDGT_TO)).add(8, 'hours');\r\n\r\n\r\n    // console.log(this._cache_budget.HEADER.BDGT_FROM);\r\n    // console.log(this._cache_budget.HEADER.BDGT_TO);\r\n\r\n      var varFrom = moment(new Date(this._cache_budget.HEADER.BDGT_FROM)).add(8, 'hours');\r\n      varFrom = new Date(varFrom);\r\n\r\n      var varTo = moment(new Date(this._cache_budget.HEADER.BDGT_TO)).add(8, 'hours');\r\n      varTo = new Date(varTo);\r\n\r\n      //var varTo = new Date(this._cache_budget.HEADER.BDGT_TO);\r\n\r\n      // console.log(varFrom);\r\n      // console.log(varTo);\r\n\r\n      if (this._cache_budget.HEADER.REMARKS === undefined || this._cache_budget.HEADER.REMARKS === null) {\r\n        this._cache_budget.HEADER.REMARKS=\"NONE\";\r\n      }\r\n      else if (this._cache_budget.HEADER.REMARKS.trim()==\"\")\r\n      {\r\n        this._cache_budget.HEADER.REMARKS=\"NONE\";\r\n      }\r\n\r\n\r\n      if (this._cache_budget.HEADER.BDGT_TMPL_ID == \"\") {\r\n      var getMax = EntityQuery().from('BDGT_TMPL_HDR').orderByDesc('BDGT_TMPL_ID').take(1);\r\n\r\n      //CHANGED 6-17-2016, changed bec before if only 1 value available will auto bind to APPR_STAT_CD, now have to set it first\r\n      if(this._cache_budget.HEADER.APPR_STAT_CD==null || this._cache_budget.HEADER.APPR_STAT_CD==undefined || this._cache_budget.HEADER.APPR_STAT_CD=='undefined')\r\n      {\r\n        this._cache_budget.HEADER.APPR_STAT_CD=this._STATUS[0].REF_CD;\r\n      }\r\n\r\n      //console.log(this._cache_budget.HEADER.APPR_STAT_CD);\r\n\r\n      EntityManager().executeQuery(getMax).then((successMax) => {\r\n        var getMax = 1;\r\n\r\n        if (successMax.results.length > 0)\r\n          getMax = successMax.results[0].BDGT_TMPL_ID + 1;\r\n\r\n          varInsert = EntityManager().createEntity('BDGT_TMPL_HDR', {\r\n          BDGT_TMPL_ID: getMax,\r\n          COMPANY_ID: this._COMPANY_ID,\r\n          BDGT_FROM: varFrom,\r\n          BDGT_TO: varTo,\r\n          //PROGRAM_TYPE_CD: indiv.GLOBAL_GRP_ID,\r\n          //EPISODE_MODE_CD: indiv.GLOBAL_GRP_ID,\r\n          EPISODE_TYPE_CD: this._cache_budget.HEADER.EPISODE_TYPE_CD,\r\n          BDGT_VIEW_FCTR: 1,\r\n          TAPING_DAYS: this._cache_budget.HEADER.TAPING_DAYS,\r\n          PROGRAM_ID: this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_ID,\r\n          CHARGE_CD: this._cache_budget.HEADER.CHARGE_CD,\r\n          PROGRAM_GENRE_CD: this._cache_budget.HEADER.PROGRAM_GENRE_CD,\r\n          PARENT_PROGRAM_ID: this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_ID,\r\n          BDGT_VIEW_CD: 'EPISODIC',\r\n          APPR_STAT_CD: this._cache_budget.HEADER.APPR_STAT_CD,\r\n          CHARGE_TYPE_CD: '',\r\n          BDGT_TOTAL: 0,\r\n          REMARKS: this._cache_budget.HEADER.REMARKS,\r\n          CREATED_BY: this._user,\r\n          CREATED_DT: new Date(Date.now()),\r\n          LAST_UPDATED_BY: this._user,\r\n          LAST_UPDATED_DT: new Date(Date.now()),\r\n          TELECAST_MODE_CD: this._cache_budget.HEADER.TELECAST_MODE_CD,\r\n          BDGT_STAT_CD: getMax,\r\n          //BDGT_TMPL_TYPE_CD: indiv.GLOBAL_GRP_ID,\r\n          BDGT_FOR_CD: 'BDGT-EPISODIC',\r\n          PROGRAM_NAME: this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_TITLE,\r\n          EPISODES: this._cache_budget.HEADER.EPISODES,\r\n          STATION_ID: this._cache_budget.HEADER.STATION_ID,\r\n          STATION_SENT_DATE: new Date(),\r\n          STATION_SENT: 0\r\n        });\r\n\r\n        EntityManager().addEntity(varInsert);\r\n\r\n        EntityManager().saveChanges().then((success) => {\r\n\r\n          this._cache_budget.HEADER.BDGT_TMPL_ID = success.entities[0].BDGT_TMPL_ID;\r\n\r\n          this._disableCreateBudget=true;\r\n          this._disableCancelBudget=false;\r\n          this._disableRefreshBudget=false;\r\n          this._disableSaveBudget=false;\r\n\r\n\r\n          if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-APPROVED\")\r\n          {\r\n            this._cache_budget.STATUS=\"APPROVED\";\r\n            this._disableSaveBudget=true;\r\n\r\n            this.budgetDisabled=true;\r\n            this.programDisabled=true;\r\n\r\n            // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n            //   all(this.modalBudget.id, false);\r\n            //   all(this.modalProgram.id, false);\r\n            // });\r\n\r\n            // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n            // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, false);\r\n          }\r\n          else\r\n          {\r\n          \r\n            this.budgetDisabled=true;\r\n            this.programDisabled=false;\r\n\r\n            // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n            //   all(this.modalBudget.id, false);\r\n            //   all(this.modalProgram.id, true);\r\n            // });\r\n\r\n            // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n            // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n          }\r\n\r\n          toastr.success(\"Succesfully Saved\", \"Budget Template\");\r\n\r\n\r\n          if(this._cache_budget.IS_COPYING)\r\n          {\r\n\r\n            this._cache_budget.OBSERVERS.copy_template.forEach((all) => {\r\n              \r\n              all('REGULAR');\r\n              //all('GUEST');\r\n            });\r\n\r\n\r\n            // this._dispatcher.dispatch('copy.template','REGULAR');\r\n            // this._dispatcher.dispatch('copy.template','GUEST');\r\n\r\n\r\n            this._cache_budget.IS_COPYING=false;\r\n\r\n            //  setTimeout(()=>{\r\n\r\n            \r\n            //   this.fnBudget(\"refresh\");\r\n            // },5000);\r\n            \r\n            //this._IS_COPYING=\"\";\r\n          }\r\n          else\r\n          {\r\n            this.fnBudget(\"refresh\"); \r\n          }\r\n\r\n          this._disableCreateBudget=true;\r\n          this._disableSaveBudget=false;\r\n          this._disableCancelBudget=false;\r\n          this._disableRefreshBudget=false;\r\n          this._disablePrintBudget = true;\r\n\r\n          this.budgetDisabled=false;\r\n          this.programDisabled=false;\r\n\r\n          // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n          //   all(this.modalBudget.id, true);\r\n          //   all(this.modalProgram.id, true);\r\n          // });\r\n\r\n          // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, true);\r\n          // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n\r\n\r\n        }, (fail) => {\r\n\r\n          if(varInsert!=null)\r\n          {\r\n            varInsert.entityAspect.setDeleted();  \r\n          }\r\n          \r\n          EntityManager().getEntities().forEach(function(entity) {\r\n            var errors = entity.entityAspect.getValidationErrors();\r\n            if (errors.length > 0)\r\n              console.log(errors);\r\n          });\r\n          console.log(fail);\r\n          toastr.error(\"Error Occured\", fail);\r\n        });\r\n\r\n      });\r\n\r\n    } else {\r\n      \r\n      var getEntityQuery = EntityQuery().from('BDGT_TMPL_HDR').where(\"BDGT_TMPL_ID\", \"==\", this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n      EntityManager().executeQuery(getEntityQuery).then((item) => {\r\n\r\n        item.results[0].BDGT_FROM = varFrom;\r\n        item.results[0].BDGT_TO = varTo;\r\n        item.results[0].EPISODE_TYPE_CD = this._cache_budget.HEADER.EPISODE_TYPE_CD;\r\n        item.results[0].TAPING_DAYS = this._cache_budget.HEADER.TAPING_DAYS;\r\n        item.results[0].PROGRAM_ID = this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_ID;\r\n        item.results[0].CHARGE_CD = this._cache_budget.HEADER.CHARGE_CD;\r\n        item.results[0].PROGRAM_GENRE_CD = this._cache_budget.HEADER.PROGRAM_GENRE_CD;\r\n        item.results[0].PARENT_PROGRAM_ID = this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_ID;\r\n        item.results[0].APPR_STAT_CD = this._cache_budget.HEADER.APPR_STAT_CD;\r\n        item.results[0].REMARKS = this._cache_budget.HEADER.REMARKS;\r\n        item.results[0].LAST_UPDATED_BY = this._user;\r\n        item.results[0].LAST_UPDATED_DT = new Date(Date.now());\r\n        item.results[0].TELECAST_MODE_CD = this._cache_budget.HEADER.TELECAST_MODE_CD;\r\n        item.results[0].PROGRAM_NAME = this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_TITLE;\r\n        item.results[0].EPISODES = this._cache_budget.HEADER.EPISODES;\r\n        item.results[0].STATION_ID =  this._cache_budget.HEADER.STATION_ID;\r\n\r\n        EntityManager().saveChanges().then((success) => {\r\n          \r\n          this._disableCreateBudget = true;\r\n          this._disableCancelBudget = false;\r\n          this._disableRefreshBudget = false;\r\n          this._disableSaveBudget = false;\r\n\r\n\r\n          this.budgetDisabled=true;\r\n          this.programDisabled=false;\r\n          // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n          //   all(this.modalBudget.id, false);\r\n          //   all(this.modalProgram.id, true);\r\n          // });\r\n\r\n          // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n          // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n\r\n          toastr.success(\"Succesfully Saved\", \"Budget Template\");\r\n          this.fnBudget(\"refresh\"); \r\n        }, (fail) => {\r\n\r\n          EntityManager().getEntities().forEach(function(entity) {\r\n            var errors = entity.entityAspect.getValidationErrors();\r\n            if (errors.length > 0)\r\n              console.log(errors);\r\n          });\r\n          console.log(fail);\r\n          toastr.error(\"Error Occured\", fail);\r\n        });\r\n\r\n\r\n      });\r\n     \r\n\r\n        \r\n      this._disableBudgetId=true;\r\n\r\n      // this._cache_budget.CALLER.VALUE1 = this.modalBudget.id;\r\n      // this._cache_budget.CALLER.VALUE2 = false;\r\n      // this._cache_budget.CALLER.ACTION = 'enable.modal.button';\r\n\r\n      this.budgetDisabled=true;\r\n      // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n      //   all(this.modalBudget.id, false);\r\n      // });\r\n\r\n      //this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n      this._disablePrintBudget = false;\r\n    }\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n    fnDialogProgram(){\r\n      this.dialogService.open({\r\n        viewModel: program\r\n      }).whenClosed(response => {\r\n        \r\n        if (!response.wasCancelled) {\r\n          \r\n        } else {\r\n          \r\n        }\r\n      });\r\n    }\r\n\r\n\r\n\r\n    fnDialogBudget(){\r\n      this.dialogService.open({\r\n        viewModel: budget\r\n      }).whenClosed(response => {\r\n         \r\n        if (!response.wasCancelled) {\r\n            settings.isNavigating = true;\r\n        } else {\r\n          \r\n        }\r\n      });\r\n    }\r\n\r\n\r\n}","import {inject} from 'aurelia-framework';\r\nimport {computedFrom,customElement} from 'aurelia-framework';\r\nimport { cache_budget } from 'ppfcs/cache_budget';\r\nimport { initializeBreeze, generateID } from 'entity-manager-factory';\r\nimport { loadMasterfiles, loadTables, loadLookups, getLookups } from 'masterfiles';\r\nimport toastr from \"toastr\";\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport { checkCookie, setCookie, removeCookie } from '../../helpers';\r\nimport { MultiObserver }from 'multi-observer';\r\nimport { login } from 'modals/login';\r\nimport { Router } from 'aurelia-router';\r\nimport { EntityManager, EntityQuery } from 'entity-manager-factory';\r\n\r\n//@customElement('main-header')\r\n@inject(toastr, cache_budget, MultiObserver, DialogService, Router)\r\nexport class mainview {\r\n\r\n\r\n  router;\r\n  _toastr = null;\r\n  //_dispatcher;\r\n  showingLogout=\"hidden\";\r\n  _cache_budget;\r\n  dialogService=null;\r\n  loginDisabled=true;\r\n  logoutDisabled=false;\r\n  masterFilesLoaded=false;\r\n  constructor(toastr, cache_budget, multiObserver, dialogService, Router) {\r\n    //this.fnExecuteDatePicker();\r\n    //console.log(elem);\r\n    this._cache_budget=cache_budget;\r\n    this.router = Router;\r\n\r\n    if (EntityManager() === undefined) {\r\n        this.router.navigateToRoute('mainpage');\r\n        return;\r\n    }\r\n\r\n    this.dialogService=dialogService;\r\n    \r\n      if(this.dialogService.controllers.length>0)\r\n      {\r\n        for (var i = this.dialogService.controllers.length - 1; i >= 0; i--) {\r\n          this.dialogService.controllers[i].close();\r\n        }\r\n      }\r\n\r\n  }\r\n    \r\n  clickTab(index){\r\n      if(index==0){\r\n\r\n      }\r\n      else if(index==1){\r\n\r\n          this._cache_budget.OBSERVERS.refreshPersonnelTab.forEach((all) => {\r\n            all('REGULAR');\r\n          });\r\n          \r\n      }\r\n      else if(index==2){\r\n\r\n         this._cache_budget.OBSERVERS.refreshPersonnelTab.forEach((all) => {\r\n            all('SEMI_REGULAR');\r\n          });\r\n          \r\n      }\r\n      else if(index==3){\r\n\r\n          this._cache_budget.OBSERVERS.refreshPersonnelTab.forEach((all) => {\r\n            all('STAFF');\r\n          });\r\n          \r\n      }\r\n  }\r\n\r\n   \r\n}","import {  bindable, inject } from 'aurelia-framework';\r\nimport { cache_budget } from 'ppfcs/cache_budget';\r\nimport { cache_obj } from 'cache_obj';\r\nimport { EntityManager, EntityQuery, generateID } from 'entity-manager-factory';\r\nimport {  getLookups,getJobByGlobalCompany,getJobByName } from 'masterfiles';\r\nimport {  substringMatcher } from 'helpers';\r\nimport typeahead from 'typeahead';\r\nimport settings from 'settings';\r\nimport _ from 'underscore';\r\nimport {  ModalWizard } from 'modals/modal-wizard';\r\nimport numeral from 'numeral';\r\nimport { MultiObserver } from 'multi-observer';\r\nimport toastr from \"toastr\";\r\n\r\nimport { globalindivmstr } from '../../modals/globalindivmstr';\r\nimport { indivmstr } from '../../modals/indivmstr';\r\nimport { job } from '../../modals/job';\r\nimport { paymentterm } from '../../modals/paymentterm';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n@inject(cache_obj, cache_budget, ModalWizard, MultiObserver, DialogService)\r\nexport class PersonnelCustomElement\r\n{\r\n\r\n  @bindable toPerson;\r\n  @bindable toPersonModel;\r\n\r\n  _cache_obj = null;\r\n  _cache_budget = null;\r\n\r\n  styleStringHidden = 'visibility: hidden;display:none;';\r\n  styleStringVisible = 'visibility: visible;';\r\n  _ModalWizard;\r\n  _selectedItem;\r\n  _JOBS = null;\r\n  _PYMNTTERM = [];\r\n  _currentIndex;\r\n  _ce_head;\r\n  _personnelSearch;\r\n  _signal;\r\n  _Personnel=[];\r\n  _PersonnelTM=[];\r\n  _Index=0;\r\n  varPymnt=null;\r\n  isIndivMstrTalentsDisabled=false;\r\n  isIndivMstrManagerDisabled=false;\r\n  isJobDisabled=false;\r\n  isIndivMstrDisabled=false;\r\n  dialogService=null;\r\n  _cache_budget;\r\n\r\n  constructor(cache_obj, cache_budget, ModalWizard, multiObserver,dialogService) \r\n  {\r\n\r\n    if (EntityManager() === undefined) {\r\n        return;\r\n    }\r\n\r\n    this.cache_budget = cache_budget;\r\n    this.dialogService=dialogService;\r\n\r\n    this._cache_obj = cache_obj;\r\n    this._cache_budget = cache_budget;\r\n      \r\n    this._ModalWizard = ModalWizard;\r\n    this._ce_head = \"+\";\r\n\r\n    multiObserver.observe(\r\n      [\r\n      [this, '_personnelSearch']\r\n      ], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n    \r\n    \r\n    this._cache_budget.OBSERVERS.disable_search_personnel.push((val) => {\r\n      this.ButtonStatus(val);\r\n    });\r\n\r\n    //this._cache_budget.OBSERVERS.login_passed.push(() => {\r\n    //  this.LoginPassed();\r\n    //});\r\n\r\n    this._cache_budget.OBSERVERS.reset_all.push(() => {\r\n      this.resetView();\r\n    });\r\n\r\n    this._cache_obj.OBSERVERS.budget_dialog.push((val) => {\r\n      this.CloseBudgetDialog(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.enable_approved.push((val) => {\r\n      this.ButtonStatus(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.copy_template.push((val) => {\r\n      this.fnCallCopy(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.pass_indiv.push((val) => {\r\n      this.PassedIndiv(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.pass_group.push((val) => {\r\n      this.PassedGroup(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.refreshPersonnelTab.push((val) => {\r\n      this.refreshOnSelect(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.pass_job.push((val) => {\r\n      this.passJob(val);\r\n    });\r\n\r\n    this._PYMNTTERM = getLookups().PAYMENT_TERM;\r\n    //GET BACK HERE!!!. these part is being saved 3 times, regular, semi and staff\r\n    this._JOBS = getLookups().JOB_GRP_CATEGORY.filter\r\n        ((all) => all.COMPANY_ID == this._cache_obj.USER.COMPANY_ID);\r\n\r\n    //console.log(this._PYMNTTERM);\r\n  }\r\n\r\n\r\n  \r\n  //LoginPassed() \r\n  //{\r\n\r\n  //  //GET BACK HERE!!!. these part is being saved 3 times, regular, semi and staff\r\n  //  this._PYMNTTERM = getLookups().PAYMENT_TERM;\r\n  //  //GET BACK HERE!!!. these part is being saved 3 times, regular, semi and staff\r\n  //  this._JOBS = getLookups().JOB_GRP_CATEGORY.filter\r\n  //  ((all)=>all.COMPANY_ID==this._cache_obj.USER.COMPANY_ID);\r\n\r\n  //}\r\n\r\n\r\n  passJob(job)\r\n  {\r\n    var index = this._Index;\r\n    \r\n    this._Personnel[index].JOB_ID = job.JOB_ID;\r\n    this._Personnel[index].JOB_DESC = job.JOB_DESC;\r\n    var varGrpCategory = getLookups().JOB_GRP_CATEGORY.find((all) => all.JOB_ID == this._Personnel[index].JOB_ID && all.COMPANY_ID ==\r\n      this._cache_obj.USER.COMPANY_ID);\r\n\r\n    if (varGrpCategory !== undefined) {\r\n      this._Personnel[index].CATEGORY_ID = varGrpCategory.CATEGORY_ID;\r\n      this._Personnel[index].CATEGORY_DESC = varGrpCategory.CATEGORY_DESC;\r\n    }\r\n    \r\n  }\r\n\r\n  onSpeculateProp(newValue, oldValue)\r\n  {\r\n\r\n    var varResult = [];\r\n\r\n    this._Personnel.forEach((all) =>\r\n    {\r\n      all.visible = true;\r\n\r\n      if (this._personnelSearch.toUpperCase() !== \"\") \r\n      {\r\n        if (all['PERSONNEL_NAME'] !== undefined && all['PERSONNEL_NAME']!=null)\r\n          if (!all['PERSONNEL_NAME'].toUpperCase().includes(this._personnelSearch.toUpperCase())) \r\n          {\r\n            all.visible = false;\r\n          }\r\n\r\n          if (all['BLANK_PERSONNEL_NAME'] !== undefined && all['PERSONNEL_NAME']!=null)\r\n            if (!all['BLANK_PERSONNEL_NAME'].toUpperCase().includes(this._personnelSearch.toUpperCase())) \r\n            {\r\n              all.visible = false;\r\n            }\r\n\r\n          }\r\n          \r\n        });\r\n\r\n    this._signal = generateID();\r\n\r\n  }\r\n\r\n\r\n  \r\n  //@handle('reset.all')\r\n  resetView() \r\n  {\r\n\r\n    this._signal = generateID();\r\n\r\n  }\r\n\r\n  collapse_expand_head()\r\n  {\r\n    if (this._ce_head == \"+\") \r\n    {\r\n      this._ce_head = \"-\";\r\n      this._Personnel.forEach((item) => \r\n      {\r\n        item.ce_value = \"-\";\r\n        item.styleString = this.styleStringVisible;\r\n      });\r\n\r\n    } \r\n    else \r\n    {\r\n      this._ce_head = \"+\";\r\n      this._Personnel.forEach((item) => \r\n      {\r\n        item.ce_value = \"+\";\r\n        item.styleString = this.styleStringHidden;\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  collapse_expand(item) \r\n  {\r\n\r\n    if (item.ce_value == \"+\") \r\n    {\r\n\r\n      item.ce_value = \"-\";\r\n      item.styleString = this.styleStringVisible;\r\n\r\n    } \r\n    else \r\n    {\r\n\r\n      item.ce_value = \"+\";\r\n      item.styleString = this.styleStringHidden;\r\n\r\n    }\r\n  }\r\n\r\n\r\n  //@handle('budget.dialog')\r\n  CloseBudgetDialog(value) \r\n  {\r\n\r\n    this.fnCheckBudget(value);\r\n\r\n  }\r\n\r\n\r\n  fnCheckExistingTalents(TALENTS,item)\r\n  {\r\n\r\n    if(TALENTS==undefined || TALENTS==null || TALENTS==\"\")\r\n    {\r\n     \r\n      return true;\r\n    }\r\n    else if(TALENTS.length>0)\r\n    {\r\n      if(item)\r\n        item.REMOVE=false;\r\n\r\n      return false;\r\n    }\r\n    \r\n    return true;\r\n\r\n  } \r\n\r\n  myFunction() \r\n  {\r\n\r\n    alert('loaded');\r\n\r\n  }\r\n\r\n  //@handle('enable.approved')\r\n  ButtonStatus(value) \r\n  {\r\n\r\n      this._cache_obj.OBSERVERS.enable_modal_button.forEach((all)=>\r\n    {\r\n      this.isIndivMstrDisabled=!value;\r\n      this.isIndivMstrTalentsDisabled=!value;\r\n      \r\n    });\r\n\r\n  }\r\n\r\n\r\n //@handle('copy.template')\r\n fnCallCopy(usr)\r\n {\r\n   \r\n  this._Personnel.forEach((item) => \r\n  {\r\n    if (item.TALENT_MANAGER !== undefined) \r\n    {\r\n      item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP = undefined;\r\n      item.TALENT_MANAGER.BDGT_TMPL_DTL_ID = undefined;\r\n    };\r\n    item.BDGT_TMPL_DTL_ID=undefined;\r\n    \r\n    item.BDGT_TMPL_DTL_ID_LINK = undefined;\r\n    item.BDGT_TMPL_DTL_ID_LINK_TMP = undefined;\r\n\r\n  });\r\n  \r\n  if (this.toPersonModel.USE == usr)\r\n   this.savePersonnel(1);\r\n\r\n \r\n}\r\n\r\n\r\n\r\nfnCheckBudget(BDGT_TMPL_ID) \r\n{\r\n\r\n\r\n  this._cache_obj.OBSERVERS.enable_modal_button.forEach((all)=>\r\n  {\r\n    this.isIndivMstrDisabled=false;\r\n    this.isIndivMstrTalentsDisabled=false;\r\n  });\r\n\r\n  \r\n  setTimeout(() => \r\n  {\r\n\r\n    this.scrollDiv();\r\n\r\n  }, 5000);\r\n\r\n  var varPsClType=\"\";\r\n  if (this.toPersonModel.USE == \"REGULAR\") \r\n  {\r\n\r\n    varPsClType = \"Regular\";\r\n    this._cache_budget.REGULAR = [];\r\n\r\n  } \r\n  else if (this.toPersonModel.USE == \"SEMI_REGULAR\") \r\n  {\r\n\r\n    varPsClType = \"Semi-Regular\";\r\n    this._cache_budget.SEMI_REGULAR = [];\r\n\r\n  } \r\n  else if (this.toPersonModel.USE == \"STAFF\") \r\n  {\r\n\r\n    varPsClType = \"Staff\";\r\n    this._cache_budget.STAFF = [];\r\n\r\n  }\r\n  \r\n\r\n  var p1 = breeze.Predicate.create('BDGT_TMPL_ID', '==', BDGT_TMPL_ID);\r\n  var p2 = breeze.Predicate.create('PERSONNEL_CLASS_TYPE', '==', varPsClType);\r\n  var pred = breeze.Predicate.and([p1, p2]);\r\n  \r\n\r\n  var _query = EntityQuery().from('BDGT_TMPL_DTL').where(pred).orderBy(\"GROUP_ORDER\");\r\n  EntityManager().executeQuery(_query).then((found) => {\r\n\r\n      //this._cache_budget.REGULAR = found.results.filter(all => all.PERSONNEL_CLASS_TYPE.toUpperCase() == \"REGULAR\");\r\n\r\n      var varJobLength = getLookups().JOB_MSTR.length - 1;\r\n      var varCategoryLength = getLookups().CATEGORY_MSTR.length - 1;\r\n      \r\n      this._Personnel.splice(0,this._Personnel.length);\r\n      this._PersonnelTM.splice(0,this._PersonnelTM.length);\r\n      \r\n\r\n      found.results.forEach((item)=>\r\n      {\r\n\r\n        this._Personnel.push(\r\n        {\r\n          BDGT_TMPL_DTL_ID: item.BDGT_TMPL_DTL_ID,\r\n          BDGT_TMPL_ID: this._cache_budget.HEADER.BDGT_TMPL_ID,\r\n          JOB_ID: item.JOB_ID,\r\n          GLOBAL_ID: item.GLOBAL_ID,\r\n          CONTRACT_AMT: item.CONTRACT_AMT,\r\n          CATEGORY_ID: item.CATEGORY_ID,\r\n          STAFF_WORK: item.STAFF_WORK,\r\n          PYMNT_TERM_CD: item.PYMNT_TERM_CD,\r\n          PAY_TO_PERSON_FL: 'T',\r\n          PAY_RATE_FACTOR: item.PAY_RATE_FACTOR,\r\n          BUDGET_AMT: item.INPUT_AMT,\r\n          TAPING_DAY_CNT: this._cache_budget.HEADER.TAPING_DAYS,\r\n          PERSONNEL_CLASS_CD: item.PERSONNEL_CLASS_CD,\r\n          REMARKS: item.REMARKS,\r\n          PERSONNEL_INFO_SRC: item.PERSONNEL_INFO_SRC,\r\n          PERSONNEL_NAME: item.PERSONNEL_NAME,\r\n          INPUT_AMT: item.INPUT_AMT,\r\n          CONFIDENTIAL: item.CONFIDENTIAL,\r\n          POOL_RECORD: item.POOL_RECORD,\r\n          GROUP_ORDER: item.GROUP_ORDER,\r\n          GLOBAL_ID_LINK: item.GLOBAL_ID_LINK,\r\n          BDGT_TMPL_DTL_ID_LINK: item.BDGT_TMPL_DTL_ID_LINK\r\n        });\r\n\r\n      });\r\n      \r\n\r\n\r\n      if (this.toPersonModel.USE == \"REGULAR\") \r\n      {\r\n\r\n        this._cache_budget.REGULAR = this._Personnel;\r\n\r\n        if(this._cache_budget.REGULAR.length>0)\r\n          toastr.success(\"REGULAR PERSONNEL\", \"Loading Successful.\");\r\n        //this._Personnel = this._cache_budget.REGULAR;\r\n        this.setPersonnelValues(this._cache_budget.REGULAR, varJobLength, varCategoryLength);\r\n\r\n      }\r\n      else if (this.toPersonModel.USE == \"SEMI_REGULAR\") \r\n      {\r\n\r\n        varPsClType = \"Semi-Regular\";\r\n\r\n        this._cache_budget.SEMI_REGULAR = this._Personnel;\r\n        \r\n        if(this._cache_budget.SEMI_REGULAR.length>0)\r\n          toastr.success(\"SEMI-REGULAR PERSONNEL\", \"Loading Successful.\");\r\n\r\n        //this._Personnel = this._cache_budget.SEMI_REGULAR;\r\n        this.setPersonnelValues(this._cache_budget.SEMI_REGULAR, varJobLength, varCategoryLength);\r\n\r\n      }\r\n      else if (this.toPersonModel.USE == \"STAFF\")\r\n      {\r\n\r\n        varPsClType = \"Staff\";\r\n\r\n        this._cache_budget.STAFF = this._Personnel;\r\n\r\n        if(this._cache_budget.STAFF.length>0)\r\n          toastr.success(\"STAFF PERSONNEL\", \"Loading Successful.\");\r\n        \r\n        //this._Personnel = this._cache_budget.STAFF;\r\n        this.setPersonnelValues(this._cache_budget.STAFF, varJobLength, varCategoryLength);\r\n\r\n      }\r\n\r\n      this._signal = generateID();\r\n      \r\n\r\n      this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>\r\n      {\r\n\r\n        all();\r\n\r\n      });\r\n\r\n    });\r\n  \r\n}\r\n\r\nsetPersonnelValues(obj,varJobLength,varCategoryLength) \r\n{\r\n \r\n     //move this undefined setting in able not to conflict while adding new talents on the second looop\r\n     _.each(obj, (item) => {\r\n      item.TALENTS = undefined; \r\n    });\r\n     \r\n     _.each(obj, (item) => {\r\n\r\n       \r\n      for (var i = 0; i <= varJobLength; ++i) {\r\n        if (getLookups().JOB_MSTR[i].JOB_ID == item.JOB_ID) {\r\n          item.JOB_DESC = getLookups().JOB_MSTR[i].JOB_DESC;\r\n          break;\r\n        }\r\n      };\r\n\r\n      for (var i = 0; i <= varCategoryLength; ++i) {\r\n        if (getLookups().CATEGORY_MSTR[i].CATEGORY_ID == item.CATEGORY_ID) {\r\n          item.CATEGORY_DESC = getLookups().CATEGORY_MSTR[i].CATEGORY_DESC;\r\n          break;\r\n        }\r\n      };\r\n\r\n\r\n      for (var i = 0; i <= this._PYMNTTERM.length - 1; ++i) {\r\n        if (this._PYMNTTERM[i].REF_CD == item.PYMNT_TERM_CD) {\r\n          item.PAYMENT_TERM = this._PYMNTTERM[i].REF_DESC;\r\n          break;\r\n        }\r\n      };\r\n\r\n\r\n      if (item.BDGT_TMPL_DTL_ID_LINK !== 0) {\r\n\r\n        //var varTalent = getLookups().GLOBAL_INDIV_WITH_ALIAS.find((allIndiv) => allIndiv.GLOBAL_INDIV_ID == item.GLOBAL_ID_LINK);\r\n       //console.log(item.BDGT_TMPL_DTL_ID_LINK);\r\n       var varTM = obj.find((all)=>all.BDGT_TMPL_DTL_ID==item.BDGT_TMPL_DTL_ID_LINK);\r\n       item.TALENT_MANAGER = {\r\n        BDGT_TMPL_DTL_ID_TMP: varTM.BDGT_TMPL_DTL_ID,\r\n        GLOBAL_INDIV_ID: varTM.GLOBAL_ID,\r\n        PERSONNEL_NAME: varTM.PERSONNEL_NAME,\r\n        CONTRACT_AMT_TMP:numeral(varTM.CONTRACT_AMT).format('0,0.00'),\r\n        INPUT_AMT_TMP:numeral(varTM.INPUT_AMT).format('0,0.00'),\r\n        PAY_RATE_FACTOR_TMP:numeral(varTM.PAY_RATE_FACTOR).format('0,0.00'),\r\n        REMARKS: varTM.REMARKS,\r\n        JOB_ID: varTM.JOB_ID,\r\n        CATEGORY_ID: varTM.CATEGORY_ID,\r\n        GROUP_ORDER:-1\r\n      };\r\n\r\n      this._PersonnelTM.push({\r\n        BDGT_TMPL_DTL_ID: varTM.BDGT_TMPL_DTL_ID,\r\n        BDGT_TMPL_DTL_ID_TMP: varTM.BDGT_TMPL_DTL_ID,\r\n        GLOBAL_INDIV_ID: varTM.GLOBAL_ID,\r\n        PERSONNEL_NAME: varTM.PERSONNEL_NAME,\r\n        CONTRACT_AMT_TMP:numeral(varTM.CONTRACT_AMT).format('0,0.00'),\r\n        INPUT_AMT_TMP:numeral(varTM.INPUT_AMT).format('0,0.00'),\r\n        PAY_RATE_FACTOR_TMP:numeral(varTM.PAY_RATE_FACTOR).format('0,0.00'),\r\n        REMARKS: varTM.REMARKS,\r\n        JOB_ID: varTM.JOB_ID,\r\n        CATEGORY_ID: varTM.CATEGORY_ID,\r\n        GROUP_ORDER:-1\r\n      });\r\n\r\n      \r\n\r\n    }\r\n\r\n\r\n\r\n    item.BLANK_PERSONNEL_NAME = item.PERSONNEL_NAME;\r\n    item.CONTRACT_AMT_TMP = numeral(item.CONTRACT_AMT).format('0,0.00');\r\n    item.INPUT_AMT_TMP = numeral(item.INPUT_AMT).format('0,0.00');\r\n    item.PAY_RATE_FACTOR_TMP = numeral(item.PAY_RATE_FACTOR).format('0,0.00');\r\n    item.CONFIDENTIAL_TMP = (item.CONFIDENTIAL == 1 ? true : false);\r\n    item.STAFF_WORK_TMP = (item.STAFF_WORK == 1 ? true : false);\r\n    item.POOL_RECORD_TMP = (item.POOL_RECORD == 1 ? true : false);\r\n\r\n    item.BDGT_TMPL_DTL_ID_LINK_TMP = item.BDGT_TMPL_DTL_ID_LINK;\r\n    \r\n    item.styleString = this.styleStringHidden;\r\n    item.ce_value = \"+\";\r\n    item.visible = true;\r\n    \r\n\r\n  });\r\n     \r\n     \r\n     for (var i = obj.length - 1; i >= 0; i--) {\r\n      var varToDelete = this._PersonnelTM.find((all)=>all.BDGT_TMPL_DTL_ID_TMP==obj[i].BDGT_TMPL_DTL_ID);\r\n\r\n      if(varToDelete!==undefined)\r\n      { \r\n        obj.splice(i,1);\r\n      }\r\n    }\r\n    \r\n  }\r\n\r\n\r\n  removeTalent(parent,item,index)\r\n  {\r\n    this._Personnel.forEach((all)=>{\r\n      if(all.GLOBAL_ID==item.GLOBAL_INDIV_ID)\r\n      {\r\n        //remove this on the list of talents of talent manager\r\n        var varToSplice = parent.item.TALENTS.splice(index,1);\r\n\r\n        delete item.TALENT_MANAGER.CONTRACT_AMT_TMP;\r\n        delete item.TALENT_MANAGER.INPUT_AMT_TMP;\r\n        delete item.TALENT_MANAGER.PAY_RATE_FACTOR_TMP;\r\n        delete item.TALENT_MANAGER.REMARKS;\r\n        delete item.TALENT_MANAGER;\r\n\r\n        this._signal = generateID();\r\n      }\r\n    });\r\n  }\r\n\r\n  fnRegularFocus(index, prop) \r\n  {\r\n\r\n    this._Index = index;\r\n    if (prop == \"JOB\")\r\n    { \r\n\r\n      this.fnModalJob();\r\n\r\n      return;\r\n    }\r\n\r\n\r\n    this.fnModalPaymentTerm();\r\n    \r\n\r\n    \r\n  }\r\n\r\n  //CREATE typeahead on focus instead...........!!!!!!!!!!!!\r\n  // fnReloadTypeahead() {\r\n\r\n  //   //$('.jobclass').typeahead('destroy');\r\n\r\n  //   var varCnt = 0;\r\n\r\n  //   _.each($(this.tblData).find(\".jobclass\"), (all) => {\r\n\r\n  //     $(all).attr(\"tableJobIndex\", varCnt);\r\n  //     //$(\"input[tableJobIndex*='\" + varCnt + \"']\").removeAttr(\"hasTypeahead\");\r\n  //     ++varCnt;\r\n\r\n\r\n  //   });\r\n\r\n\r\n  //   $(\".pymnttrmclass\").typeahead('destroy');\r\n  //   $(\".pymnttrmclass\")\r\n  //     .typeahead({\r\n  //       hint: false,\r\n  //       highlight: true,\r\n  //       minLength: 1,\r\n  //       limit: 10\r\n  //     }, {\r\n  //       source: substringMatcher(this._PYMNTTERM.map((item) => {\r\n  //         return item.REF_DESC\r\n  //       }))\r\n\r\n\r\n  //     });\r\n\r\n  //   varCnt = 0;\r\n  //   _.each($(this.tblData).find(\".pymnttrmclass\"), (all) => {\r\n  //     $(all).attr(\"tableTermIndex\", varCnt);\r\n\r\n  //     ++varCnt;\r\n\r\n\r\n  //   });\r\n  // }\r\n\r\n  scrollDiv() \r\n  {\r\n\r\n\r\n    $(this.tblHeader).css(\"visibility\",\"visible\");\r\n    // console.log($(this.tblData).position().top);\r\n    // console.log($(this.tblHeader).height());\r\n    // console.log($(this.divRegular).scrollTop());\r\n    $(this.tblHeader).css(\"top\", $(this.divRegular).scrollTop() + $(this.tblData).position().top);\r\n\r\n    var varCol = 0;\r\n    _.each($(this.tblData).find('td'), (item) => {\r\n\r\n      //last two is not really td element\r\n      if (varCol > $(this.tblHeader).find('td').length - 2)\r\n        return;\r\n\r\n      $($(this.tblHeader).find('td')[varCol]).css(\"width\", $(this.tblData).find('td')[varCol].clientWidth + 1);\r\n      ++varCol;\r\n    });\r\n\r\n\r\n  }\r\n\r\n  AmountBlur(item, property) \r\n  {\r\n\r\n    var varConverted = numeral(item[property]).format('0,0.00');\r\n    item[property] = varConverted;\r\n\r\n  }\r\n\r\n  showTalents(item)\r\n  {\r\n\r\n    this._selectedItem = item;\r\n\r\n    this._cache_budget.OBSERVERS.open_modal.forEach((all)=>{\r\n      //all(this.modalIndivMstrTalents.id, true);\r\n      this.isIndivMstrTalentsDisabled=false;\r\n    });\r\n\r\n    //this._dispatcher.dispatch('open.modal', this.modalIndivMstrTalents.id, true);\r\n  }\r\n\r\n\r\n  showTalentMngr(item) \r\n  {\r\n\r\n    this._selectedItem = item;\r\n\r\n    this.fnIndivMstr();\r\n    \r\n  }\r\n\r\n  removeTalentMngr(item)\r\n  {\r\n    item.TALENT_MANAGER = undefined;\r\n\r\n    \r\n     // AURELIA now is not supporting removing of property, changed it to undefined instead\r\n     // delete all.TALENT_MANAGER.CONTRACT_AMT_TMP;\r\n     // delete all.TALENT_MANAGER.INPUT_AMT_TMP;\r\n     // delete all.TALENT_MANAGER.PAY_RATE_FACTOR_TMP;\r\n     // delete all.TALENT_MANAGER.REMARKS;\r\n     //delete all.TALENT_MANAGER;\r\n     \r\n\r\n     this._signal = generateID();\r\n\r\n     this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>{\r\n       all();\r\n     });\r\n\r\n   }\r\n\r\n  //@handle('pass.indiv')\r\n  PassedIndiv(value) \r\n  {\r\n   // if (this.modalIndivMstrManager.id == this._ModalWizard.ids[this._ModalWizard.ids.length - 1]) {\r\n  //    this._ModalWizard.ids.pop();\r\n\r\n\r\n    // this._cache_budget.OBSERVERS.close_modal.forEach((all)=>{\r\n    //   all(this.modalIndivMstrManager.id);\r\n    // });\r\n\r\n      //this._dispatcher.dispatch('close.modal', this.modalIndivMstrManager.id);\r\n      if(this._selectedItem!==undefined)\r\n        if(value.GLOBAL_INDIV_ID==this._selectedItem.GLOBAL_ID)\r\n        {\r\n          toastr.error(\"<strong>Talent Manager cannot be same Personnel</strong>.\", \"Problem occured\");\r\n          return;\r\n        }\r\n\r\n      // this._selectedItem.TALENT_MANAGER = value;\r\n      // this._selectedItem.TALENT_MANAGER.CONTRACT_AMT_TMP = numeral(0).format('0,0.00');\r\n      // this._selectedItem.TALENT_MANAGER.INPUT_AMT_TMP = numeral(0).format('0,0.00');\r\n      // this._selectedItem.TALENT_MANAGER.PAY_RATE_FACTOR_TMP = numeral(0).format('0,0.00');\r\n\r\n\r\n      var varJobTManager = getJobByName(\"TALENT MANAGER\");\r\n      if(parseInt(varJobTManager.COMPANY_ID)!=parseInt(this._cache_obj.USER.COMPANY_ID))\r\n      {\r\n        toastr.error(varJobTManager.JOB_DESC+\" Job is not included on jobs from users company.\", \"Problem occured\");\r\n        varJobTManager.JOB_ID=\"\";\r\n        varJobTManager.JOB_DESC=\"\";\r\n      }\r\n\r\n\r\n      this.getDefaultPymntTerm();\r\n\r\n      this._selectedItem.TALENT_MANAGER = { GLOBAL_INDIV_ID: value.GLOBAL_INDIV_ID, PERSONNEL_NAME: value.PERSONNEL_NAME,\r\n        PERSONNEL_INFO_SRC: value.PERSONNEL_INFO_SRC,\r\n        JOB_ID: varJobTManager.JOB_ID,\r\n        JOB_DESC: varJobTManager.JOB_DESC,\r\n        PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n        PAYMENT_TERM: this.varPymnt.REF_DESC,\r\n        CATEGORY_ID: varJobTManager.CATEGORY_ID,\r\n        CATEGORY_DESC: varJobTManager.CATEGORY_DESC,\r\n        PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n        CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n        INPUT_AMT_TMP: numeral(0).format('0,0.00')\r\n      };  \r\n\r\n      \r\n      this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>\r\n      {\r\n        all();\r\n      });\r\n\r\n      \r\n\r\n    //}\r\n  }\r\n\r\n  getDefaultPymntTerm()\r\n  {\r\n\r\n    if(this.varPymnt==null)\r\n      this.varPymnt=this._PYMNTTERM.find(all => all.REF_GRP_CD == 'PYMNT_TERM_CD' && all.REF_CD == 'DAILY');\r\n\r\n  }\r\n\r\n  fnPassedPersonnels(value)\r\n  {\r\n    //  console.log(value);\r\n    this.getDefaultPymntTerm();\r\n\r\n    value.forEach((val) => {\r\n\r\n      var varJob =  getJobByGlobalCompany(val.GLOBAL_INDIV_ID);\r\n\r\n      if (parseInt(varJob.COMPANY_ID) !== parseInt(this._cache_obj.USER.COMPANY_ID)) {\r\n        toastr.error(varJob.JOB_DESC +\" Job is not included on jobs from users company.\", \"Problem occured\");\r\n        varJob.JOB_ID = \"\";\r\n        varJob.JOB_DESC = \"\";\r\n      }\r\n\r\n      this._Personnel.push({\r\n        GLOBAL_ID: val.GLOBAL_INDIV_ID,\r\n        PERSONNEL_NAME: val.PERSONNEL_NAME,\r\n        PERSONNEL_INFO_SRC: val.PERSONNEL_INFO_SRC,\r\n        JOB_ID: varJob.JOB_ID,\r\n        JOB_DESC: varJob.JOB_DESC,\r\n        PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n        PAYMENT_TERM: this.varPymnt.REF_DESC,\r\n        CATEGORY_ID: varJob.CATEGORY_ID,\r\n        CATEGORY_DESC: varJob.CATEGORY_DESC,\r\n        PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n        CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n        INPUT_AMT_TMP: numeral(0).format('0,0.00'),\r\n        STAFF_WORK_TMP: false,\r\n        CONFIDENTIAL_TMP: false,\r\n        visible: true\r\n          //t_talent_manager:true\r\n        });\r\n\r\n      \r\n    });\r\n\r\n\r\n    this._Personnel.forEach((all) => {\r\n      if (all.STATUS_CD == \"\" || all.STATUS_CD === undefined) {\r\n        all.STATUS_CD = \"\";\r\n      }\r\n      all.ce_value = \"+\";\r\n      all.styleString = this.styleStringHidden;\r\n    });\r\n\r\n\r\n      //this.setPersonnel(tmpgrpMembers) ;\r\n      \r\n      \r\n      this._Personnel.forEach((all)=>{\r\n        var varIndiv = getLookups().GRP_INDIV_MSTR.find((allIndiv)=>allIndiv.GLOBAL_INDIV_ID==all.GLOBAL_ID);\r\n        \r\n        if(varIndiv!==undefined)\r\n        {\r\n         var varJobTManager = getJobByName(\"TALENT MANAGER\");\r\n\r\n         if (parseInt(varJobTManager.COMPANY_ID) != parseInt(this._cache_obj.USER.COMPANY_ID)) {\r\n          toastr.error(varJobTManager.JOB_DESC + \"Job is not included on jobs from users company.\", \"Problem occured\");\r\n          varJobTManager.JOB_ID = \"\";\r\n          varJobTManager.JOB_DESC = \"\";\r\n        }\r\n\r\n        var varTalent = getLookups().GLOBAL_GRP_MSTR.find((allIndiv)=>allIndiv.GLOBAL_GRP_ID==varIndiv.GLOBAL_GRP_ID);\r\n        all.TALENT_MANAGER = { GLOBAL_INDIV_ID: varTalent.GLOBAL_GRP_ID, PERSONNEL_NAME: varTalent.GROUP_NAME,\r\n          PERSONNEL_INFO_SRC: varJobTManager.PERSONNEL_INFO_SRC,\r\n          JOB_ID: varJobTManager.JOB_ID,\r\n          JOB_DESC: varJobTManager.JOB_DESC,\r\n          PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n          PAYMENT_TERM: this.varPymnt.REF_DESC,\r\n          CATEGORY_ID: varJobTManager.CATEGORY_ID,\r\n          CATEGORY_DESC: varJobTManager.CATEGORY_DESC,\r\n          PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n          CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n          INPUT_AMT_TMP: numeral(0).format('0,0.00'),\r\n          STAFF_WORK_TMP: false,\r\n          CONFIDENTIAL_TMP: false\r\n        };  \r\n\r\n        \r\n      }\r\n\r\n    });\r\n      \r\n\r\n      this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>{\r\n        all();\r\n      });\r\n\r\n\r\n    }\r\n\r\n  //@handle('pass.group')\r\n  PassedGroup(value) \r\n  {\r\n\r\n    // if (this.modalIndivMstr.id == this._ModalWizard.ids[this._ModalWizard.ids.length - 1]) {\r\n\r\n\r\n    //   this._ModalWizard.ids.pop();\r\n\r\n\r\n    //   this._cache_obj.OBSERVERS.close_modal.forEach((all)=>{\r\n    //     all(this.modalIndivMstr.id);\r\n    //   });\r\n\r\n\r\n\r\n    // } else \r\n\r\n    if (this.modalIndivMstrTalents.id == this._ModalWizard.ids[this._ModalWizard.ids.length - 1]) {\r\n\r\n      \r\n      //var tmpgrpMembers = this._Personnel;\r\n      \r\n      this.getDefaultPymntTerm();\r\n\r\n      this._selectedItem.TALENTS = value;\r\n\r\n      this._selectedItem.TALENTS.forEach((all)=>{\r\n        if (this._Personnel.find((allReg) => allReg.GLOBAL_ID == all.GLOBAL_INDIV_ID) === undefined) {\r\n          \r\n          var varJob = getJobByGlobalCompany(all.GLOBAL_INDIV_ID);\r\n\r\n          if (parseInt(varJob.COMPANY_ID) != parseInt(this._cache_obj.USER.COMPANY_ID)) {\r\n            toastr.error(varJob.JOB_DESC+\" Job is not included on jobs from users company.\", \"Problem occured\");\r\n            varJob.JOB_ID = \"\";\r\n            varJob.JOB_DESC = \"\";\r\n          }\r\n\r\n          var varTalent = getLookups().GLOBAL_INDIV_WITH_ALIAS.find((allIndiv)=>allIndiv.GLOBAL_INDIV_ID==all.GLOBAL_INDIV_ID);\r\n\r\n          this._Personnel.push({\r\n            GLOBAL_ID: all.GLOBAL_INDIV_ID,\r\n            PERSONNEL_NAME: all.PERSONNEL_NAME,\r\n            PERSONNEL_INFO_SRC: varTalent.PERSONNEL_INFO_SRC,\r\n            JOB_ID: varJob.JOB_ID,\r\n            JOB_DESC: varJob.JOB_DESC,\r\n            PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n            PAYMENT_TERM: this.varPymnt.REF_DESC,\r\n            CATEGORY_ID: varJob.CATEGORY_ID,\r\n            CATEGORY_DESC: varJob.CATEGORY_DESC,\r\n            PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n            CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n            INPUT_AMT_TMP: numeral(0).format('0,0.00'),\r\n            STAFF_WORK_TMP: false,\r\n            CONFIDENTIAL_TMP: false,\r\n            GLOBAL_ID_LINK: this._selectedItem.GLOBAL_ID,\r\n            TALENT_MANAGER: {\r\n              GLOBAL_INDIV_ID: this._selectedItem.GLOBAL_ID,\r\n              PERSONNEL_NAME: this._selectedItem.PERSONNEL_NAME\r\n            }\r\n          });\r\n        }\r\n      });\r\n      \r\n\r\n      this._ModalWizard.ids.pop();\r\n\r\n\r\n\r\n      // this._cache_budget.OBSERVERS.close_modal.forEach((all)=>{\r\n      //   all(this.modalIndivMstrTalents.id);\r\n      // });\r\n\r\n\r\n      this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>{\r\n        all();\r\n      });\r\n\r\n    }\r\n\r\n    this._signal = generateID();\r\n\r\n    // setTimeout(() => {\r\n    //   this.fnReloadTypeahead();\r\n    //  }, 5000);\r\n  }\r\n\r\n  //@handle('refreshPersonnelTab')\r\n  refreshOnSelect(personnel) \r\n  {\r\n    $(this.tblHeader).css(\"visibility\",\"hidden\");\r\n  }\r\n\r\n  moveTrigger(value) \r\n  {\r\n\r\n    if (value == \"up\") \r\n    {\r\n      if (this._currentIndex > 0) \r\n      {\r\n\r\n        this._Personnel.splice(this._currentIndex-1, 0, this._Personnel[this._currentIndex]);\r\n        var varCopy = this._Personnel.splice(this._currentIndex + 1, 1);\r\n        this._currentIndex = this._currentIndex-1;\r\n\r\n      }\r\n\r\n    } \r\n    else \r\n    {\r\n\r\n      if (this._currentIndex < this._Personnel.length - 1) {\r\n\r\n       // var varIndex=this._currentIndex + 1;\r\n       //  var varFinish=false;\r\n       //  while (!varFinish) {\r\n       //    if (this._Personnel[varIndex].GROUP_ORDER == -1) {\r\n       //        ++varIndex;\r\n       //        console.log(varIndex);\r\n       //    }\r\n       //    else\r\n       //    {\r\n       //        varFinish=true;\r\n       //    }\r\n\r\n\r\n       //    if(varIndex<0)\r\n       //    {\r\n       //      varFinish=true;\r\n       //      varIndex=this._Personnel.length - 1;\r\n       //    }\r\n       //  }\r\n\r\n       //  this._Personnel.splice(this._currentIndex + 2, 0, this._Personnel[this._currentIndex]);\r\n       //  var varCopy = this._Personnel.splice(this._currentIndex, 1);\r\n       //  this._currentIndex = this._currentIndex + 1;\r\n\r\n       this._Personnel.splice(this._currentIndex + 2, 0, this._Personnel[this._currentIndex]);\r\n       var varCopy = this._Personnel.splice(this._currentIndex, 1);\r\n       this._currentIndex = this._currentIndex + 1;\r\n     }\r\n   }\r\n\r\n    //have to do bec refreshing on filter arrangement will not be refreshed.\r\n    this._signal = generateID();\r\n  }\r\n\r\n  focusTrigger(index)\r\n  {\r\n\r\n    this._currentIndex = index;\r\n    \r\n  }\r\n\r\n  savePersonnel(tag) \r\n  {\r\n    \r\n    var varErrorDuplicate = \"\";\r\n    var varErrorJobTerms = \"\";\r\n    var varErrorCheckTalentManager = \"\";\r\n\r\n    var varDuplicateValidation = [];\r\n\r\n    var varI=0;//eliminate talent manager\r\n    var varJ=0;//eliminate talent manager\r\n\r\n    for (var i = 0; i <= this._Personnel.length - 1; ++i) {\r\n      \r\n      \r\n      for (var j = 0; j <= this._Personnel.length - 1; ++j) {\r\n\r\n        if(this._Personnel[j].GROUP_ORDER!==-1 && this._Personnel[i].GROUP_ORDER!==-1)\r\n        {\r\n          if (this._Personnel[j].PERSONNEL_NAME == this._Personnel[i].PERSONNEL_NAME &&\r\n            this._Personnel[j].JOB_ID == this._Personnel[i].JOB_ID && i != j && varDuplicateValidation.find((all) => all == this._Personnel[j].PERSONNEL_NAME) == undefined && (this._Personnel[i].PERSONNEL_NAME == null ? \"\" : this._Personnel[i].PERSONNEL_NAME.trim()) != \"\") {\r\n\r\n            varErrorDuplicate += \"<br /><br />\" + this._Personnel[j].PERSONNEL_NAME + \"-\" + this._Personnel[j].JOB_DESC + \" Row(\" + (varJ + 1) + \").\";\r\n\r\n          varDuplicateValidation.push(this._Personnel[j].PERSONNEL_NAME);\r\n        }\r\n        \r\n      }\r\n\r\n      if(this._Personnel[j].GROUP_ORDER!==-1)\r\n      {\r\n        ++varJ;\r\n      }\r\n      \r\n    }\r\n\r\n    if (this._Personnel[i].GROUP_ORDER !== -1) {\r\n      ++varI;\r\n    }\r\n  }\r\n\r\n    varI=0;//eliminate talent manager\r\n    varJ=0;//eliminate talent manager\r\n\r\n    for (var j = 0; j <= this._Personnel.length - 1; ++j) {\r\n\r\n      if(this._Personnel[j].GROUP_ORDER!==-1)\r\n        if (this._Personnel[j].JOB_ID === undefined || this._Personnel[j].JOB_ID == \"\" || this._Personnel[j].PYMNT_TERM_CD == \"\" || this._Personnel[j].PYMNT_TERM_CD === undefined || this._Personnel[j].JOB_ID === null || this._Personnel[j].PYMNT_TERM_CD === null)\r\n        { \r\n          varErrorJobTerms += \"<br /><br />\" + \"Row (\" + (varJ + 1) + \").\";\r\n        }\r\n\r\n\r\n        if(this._Personnel[j].GROUP_ORDER!==-1)\r\n        {\r\n          ++varJ;\r\n        }\r\n        \r\n      }\r\n\r\n\r\n      if (varErrorDuplicate != \"\") {\r\n        toastr.error(\"<strong>Duplicate Personnel and Job</strong>\" + varErrorDuplicate + \"<br /><br />Saving cancelled.\", \"Problem occured\");\r\n      }\r\n\r\n      if (varErrorJobTerms != \"\") {\r\n        toastr.error(\"<strong>JOB/PAYMENT TERM not set</strong>\" + varErrorJobTerms + \"<br /><br />Saving cancelled.\", \"Problem occured\");\r\n      }\r\n\r\n\r\n      if (varErrorDuplicate != \"\" || varErrorJobTerms!=\"\" || varErrorCheckTalentManager!=\"\") {\r\n        return;\r\n      }\r\n\r\n      \r\n\r\n      var getMax = EntityQuery().from('BDGT_TMPL_DTL').orderByDesc('BDGT_TMPL_DTL_ID').take(1);\r\n      EntityManager().executeQuery(getMax).then((successMax) => {\r\n        var getMax = 1;\r\n        \r\n        if (successMax.results.length > 0)\r\n          getMax = successMax.results[0].BDGT_TMPL_DTL_ID + 1;\r\n\r\n        var varIndex = 1;\r\n        \r\n\r\n        var getAllDtl = EntityQuery().from('BDGT_TMPL_DTL').where(\"BDGT_TMPL_ID\", '==', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n        EntityManager().executeQuery(getAllDtl).then((foundDtl) => {\r\n\r\n          this._Personnel.forEach((item) => {\r\n            if (item.BDGT_TMPL_DTL_ID === undefined) {\r\n              item.BDGT_TMPL_DTL_ID_TMP = getMax;\r\n              ++getMax;\r\n            }\r\n          });\r\n\r\n          this._Personnel.forEach((item) => {\r\n              if (item.TALENT_MANAGER !== undefined && item.BDGT_TMPL_DTL_ID_LINK_TMP !== undefined && item.BDGT_TMPL_DTL_ID_LINK_TMP !== 0) {\r\n\r\n              if (item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP == undefined) {\r\n                item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP = getMax;\r\n                item.BDGT_TMPL_DTL_ID_LINK = getMax;\r\n                item.TALENT_MANAGER.IsNewTalent = true;\r\n                ++getMax;\r\n              }\r\n\r\n\r\n            }\r\n\r\n          });\r\n\r\n\r\n\r\n          this._Personnel.forEach((item) => {\r\n           \r\n\r\n            if (item.BDGT_TMPL_DTL_ID === undefined && item.GROUP_ORDER !== -1) {\r\n              \r\n              var varInsert = EntityManager().createEntity('BDGT_TMPL_DTL', {\r\n                BDGT_TMPL_DTL_ID: item.BDGT_TMPL_DTL_ID_TMP,\r\n                BDGT_TMPL_ID: this._cache_budget.HEADER.BDGT_TMPL_ID,\r\n                JOB_ID: item.JOB_ID,\r\n                GLOBAL_ID: item.GLOBAL_ID,\r\n                CONTRACT_AMT: item.CONTRACT_AMT_TMP.replace(/,/g, ''),\r\n                CATEGORY_ID: item.CATEGORY_ID,\r\n                STAFF_WORK: (item.STAFF_WORK_TMP === undefined ? 0 : (item.STAFF_WORK_TMP == true ? 1 : 0)),\r\n                PYMNT_TERM_CD: item.PYMNT_TERM_CD,\r\n                PAY_TO_PERSON_FL: 'T',\r\n                PAY_RATE_FACTOR: item.PAY_RATE_FACTOR_TMP.replace(/,/g, ''),\r\n                BUDGET_AMT: item.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                TAPING_DAY_CNT: this._cache_budget.HEADER.TAPING_DAYS,\r\n                PERSONNEL_CLASS_CD: (this.toPersonModel.USE != \"STAFF\" ? \"Mainstay\" : \"Staff\"),\r\n                REMARKS: item.REMARKS,\r\n                PERSONNEL_INFO_SRC: item.PERSONNEL_INFO_SRC,\r\n                PERSONNEL_NAME: (item.BLANK_PERSONNEL_NAME !== undefined ? item.BLANK_PERSONNEL_NAME : item.PERSONNEL_NAME),\r\n                CREATED_BY: this._cache_obj.USER.USER_ID,\r\n                CREATED_DT: new Date(),\r\n                LAST_UPDATED_BY: this._cache_obj.USER.USER_ID,\r\n                LAST_UPDATED_DT: new Date(),\r\n                INPUT_AMT: item.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                EPISODES: this._cache_budget.HEADER.EPISODES,\r\n                CONFIDENTIAL: (item.CONFIDENTIAL_TMP === undefined ? 0 : (item.CONFIDENTIAL_TMP == true ? 1 : 0)),\r\n                PER_TAPING_DAY_RATE: 0,\r\n                PERSONNEL_CLASS_TYPE: this.getPersonnelClassType(),\r\n                POOL_RECORD: (item.POOL_RECORD_TMP==null || item.POOL_RECORD_TMP==undefined?0:(item.POOL_RECORD_TMP == true ? 1 : 0)),\r\n                GROUP_ORDER: varIndex,\r\n                GLOBAL_ID_LINK: (item.TALENT_MANAGER !== undefined && item.TALENT_MANAGER !== null ? item.TALENT_MANAGER.GLOBAL_INDIV_ID : \"NONE\"),\r\n                BDGT_TMPL_DTL_ID_LINK: (item.BDGT_TMPL_DTL_ID_LINK !== undefined && item.BDGT_TMPL_DTL_ID_LINK !== null? item.BDGT_TMPL_DTL_ID_LINK : 0),\r\n                WITH_TALENT_MANAGER: (item.TALENT_MANAGER !== undefined && item.TALENT_MANAGER !== null ? '1' : '0')\r\n              });\r\n              \r\n\r\n              EntityManager().addEntity(varInsert);\r\n\r\n            //has talent manager\r\n            if (item.TALENT_MANAGER !== undefined) {\r\n              \r\n              var varInsertTM = EntityManager().createEntity('BDGT_TMPL_DTL', {\r\n                BDGT_TMPL_DTL_ID: item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP,\r\n                BDGT_TMPL_ID: this._cache_budget.HEADER.BDGT_TMPL_ID,\r\n                JOB_ID: item.TALENT_MANAGER.JOB_ID,\r\n                GLOBAL_ID: item.TALENT_MANAGER.GLOBAL_INDIV_ID,\r\n                CONTRACT_AMT: item.TALENT_MANAGER.CONTRACT_AMT_TMP.replace(/,/g, ''),\r\n                CATEGORY_ID: item.TALENT_MANAGER.CATEGORY_ID,\r\n                STAFF_WORK: 0,\r\n                PYMNT_TERM_CD: item.PYMNT_TERM_CD,\r\n                PAY_TO_PERSON_FL: 'T',\r\n                PAY_RATE_FACTOR: item.TALENT_MANAGER.PAY_RATE_FACTOR_TMP.replace(/,/g, ''),\r\n                BUDGET_AMT: item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                TAPING_DAY_CNT: this._cache_budget.HEADER.TAPING_DAYS,\r\n                PERSONNEL_CLASS_CD: (this.toPersonModel.USE != \"STAFF\" ? \"Mainstay\" : \"Staff\"),\r\n                REMARKS: item.TALENT_MANAGER.REMARKS,\r\n                PERSONNEL_INFO_SRC: item.PERSONNEL_INFO_SRC,\r\n                PERSONNEL_NAME: item.TALENT_MANAGER.PERSONNEL_NAME,\r\n                CREATED_BY: this._cache_obj.USER.USER_ID,\r\n                CREATED_DT: new Date(),\r\n                LAST_UPDATED_BY: this._cache_obj.USER.USER_ID,\r\n                LAST_UPDATED_DT: new Date(),\r\n                INPUT_AMT: item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                EPISODES: this._cache_budget.HEADER.EPISODES,\r\n                CONFIDENTIAL: 0,\r\n                PER_TAPING_DAY_RATE: 0,\r\n                PERSONNEL_CLASS_TYPE: this.getPersonnelClassType(),\r\n                POOL_RECORD: 0,\r\n                GROUP_ORDER: -1,\r\n                WITH_TALENT_MANAGER: '0',\r\n                GLOBAL_ID_LINK: 'NONE',\r\n                BDGT_TMPL_DTL_ID_LINK:0\r\n              });\r\n\r\n              EntityManager().addEntity(varInsertTM);\r\n            }\r\n\r\n          } else if (item.REMOVE == true) {\r\n            \r\n            if (item.TALENT_MANAGER !== undefined) {\r\n              var varTalentMngrToDelete = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n              \r\n              varTalentMngrToDelete.entityAspect.setDeleted();\r\n            }\r\n            \r\n            var varTalentToDelete = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID);\r\n\r\n            \r\n            varTalentToDelete.entityAspect.setDeleted();\r\n            // item.entityAspect.setDeleted();     \r\n            \r\n\r\n          } else {\r\n           \r\n            var varTalentToEdit = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID);\r\n\r\n            varTalentToEdit.JOB_ID = item.JOB_ID;\r\n            \r\n            varTalentToEdit.GLOBAL_ID = item.GLOBAL_ID;\r\n            varTalentToEdit.CONTRACT_AMT = item.CONTRACT_AMT_TMP.replace(/,/g, '');\r\n            varTalentToEdit.CATEGORY_ID = item.CATEGORY_ID;\r\n            varTalentToEdit.STAFF_WORK = (item.STAFF_WORK_TMP === undefined ? 0 : (item.STAFF_WORK_TMP == true ? 1 : 0));\r\n            varTalentToEdit.PYMNT_TERM_CD = item.PYMNT_TERM_CD;\r\n            varTalentToEdit.PAY_RATE_FACTOR = item.PAY_RATE_FACTOR_TMP.replace(/,/g, '');\r\n            varTalentToEdit.BUDGET_AMT = item.INPUT_AMT_TMP.replace(/,/g, '');\r\n            varTalentToEdit.TAPING_DAY_CNT = this._cache_budget.HEADER.TAPING_DAYS;\r\n            varTalentToEdit.REMARKS = item.REMARKS;\r\n            varTalentToEdit.PERSONNEL_INFO_SRC = item.PERSONNEL_INFO_SRC;\r\n            varTalentToEdit.PERSONNEL_NAME = (item.BLANK_PERSONNEL_NAME !== undefined ? item.BLANK_PERSONNEL_NAME : item.PERSONNEL_NAME);\r\n            varTalentToEdit.LAST_UPDATED_BY = this._cache_obj.USER.USER_ID;\r\n            varTalentToEdit.LAST_UPDATED_DT = new Date();\r\n            varTalentToEdit.INPUT_AMT = item.INPUT_AMT_TMP.replace(/,/g, '');\r\n            varTalentToEdit.EPISODES = this._cache_budget.HEADER.EPISODES;\r\n            varTalentToEdit.CONFIDENTIAL = (item.CONFIDENTIAL_TMP === undefined ? 0 : (item.CONFIDENTIAL_TMP == true ? 1 : 0));\r\n            varTalentToEdit.POOL_RECORD = (item.POOL_RECORD_TMP==null || item.POOL_RECORD_TMP==undefined?0:(item.POOL_RECORD_TMP == true ? 1 : 0));\r\n\r\n            if (varTalentToEdit.GROUP_ORDER !== -1)\r\n              varTalentToEdit.GROUP_ORDER = varIndex;\r\n\r\n            varTalentToEdit.GLOBAL_ID_LINK = (item.TALENT_MANAGER !== undefined && item.TALENT_MANAGER !== null ? item.TALENT_MANAGER.GLOBAL_INDIV_ID : \"NONE\");\r\n            varTalentToEdit.BDGT_TMPL_DTL_ID_LINK = (item.BDGT_TMPL_DTL_ID_LINK !== undefined && item.BDGT_TMPL_DTL_ID_LINK !== null ? item.BDGT_TMPL_DTL_ID_LINK : 0);\r\n            varTalentToEdit.WITH_TALENT_MANAGER = (item.TALENT_MANAGER !== undefined && item.TALENT_MANAGER!==null ? '1' : '0');\r\n\r\n\r\n            if (item.TALENT_MANAGER !== undefined) {\r\n\r\n             \r\n\r\n                if (item.BDGT_TMPL_DTL_ID_LINK_TMP !== undefined && item.BDGT_TMPL_DTL_ID_LINK_TMP !== 0) {\r\n                //check existing linked talent manager before saving check if not match\r\n                var varCheckTalent = this._PersonnelTM.find((allTalent) => allTalent.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n                save\r\n                if (varCheckTalent !== undefined) {\r\n\r\n                    if (varCheckTalent.BDGT_TMPL_DTL_ID !== item.BDGT_TMPL_DTL_ID_LINK && item.BDGT_TMPL_DTL_ID_LINK != 0) {\r\n                        \r\n                    var varTalentMngrToEdit = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n                    \r\n                    varTalentMngrToEdit.entityAspect.setDeleted();\r\n                    // //varCheckTalent.entityAspect.setDeleted();\r\n                    //   var varRemoveTalent = this._Personnel.find((allTalent) => allTalent.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n                    //   if (varRemoveTalent !== undefined) {\r\n                    //     var getForDelete = EntityQuery().from('BDGT_TMPL_DTL').where(\"BDGT_TMPL_DTL_ID\", '==', varRemoveTalent.BDGT_TMPL_DTL_ID);\r\n                    //     EntityManager().executeQuery(getForDelete).then((found) => {\r\n                    //       found.results[0].setDeleted();\r\n                    //     });\r\n\r\n                    //     // varRemoveTalent.entityAspect.setDeleted();      \r\n                    //   }\r\n                  } else {\r\n                    var varTalentMngrToEdit = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n                    varTalentMngrToEdit.CONTRACT_AMT = item.TALENT_MANAGER.CONTRACT_AMT_TMP.replace(/,/g, '');\r\n                    varTalentMngrToEdit.PAY_RATE_FACTOR = item.TALENT_MANAGER.PAY_RATE_FACTOR_TMP.replace(/,/g, '');\r\n                    varTalentMngrToEdit.INPUT_AMT = item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, '');\r\n                    varTalentMngrToEdit.BUDGET_AMT = item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, '');\r\n                    varTalentMngrToEdit.REMARKS = item.TALENT_MANAGER.REMARKS;\r\n\r\n                  }\r\n\r\n                }\r\n              }\r\n\r\n              if (item.TALENT_MANAGER.IsNewTalent) {\r\n                //add new Talent Manager, existing Talent Manager should be remove before adding new\r\n                var varInsertTM = EntityManager().createEntity('BDGT_TMPL_DTL', {\r\n                  BDGT_TMPL_DTL_ID: item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP,\r\n                  BDGT_TMPL_ID: this._cache_budget.HEADER.BDGT_TMPL_ID,\r\n                  JOB_ID: item.TALENT_MANAGER.JOB_ID,\r\n                  GLOBAL_ID: item.TALENT_MANAGER.GLOBAL_INDIV_ID,\r\n                  CONTRACT_AMT: item.TALENT_MANAGER.CONTRACT_AMT_TMP.replace(/,/g, ''),\r\n                  CATEGORY_ID: item.TALENT_MANAGER.CATEGORY_ID,\r\n                  STAFF_WORK: 0,\r\n                  PYMNT_TERM_CD: item.PYMNT_TERM_CD,\r\n                  PAY_TO_PERSON_FL: 'T',\r\n                  PAY_RATE_FACTOR: item.TALENT_MANAGER.PAY_RATE_FACTOR_TMP.replace(/,/g, ''),\r\n                  BUDGET_AMT: item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                  TAPING_DAY_CNT: this._cache_budget.HEADER.TAPING_DAYS,\r\n                  PERSONNEL_CLASS_CD: (this.toPersonModel.USE != \"STAFF\" ? \"Mainstay\" : \"Staff\"),\r\n                  REMARKS: item.TALENT_MANAGER.REMARKS,\r\n                  PERSONNEL_INFO_SRC: item.PERSONNEL_INFO_SRC,\r\n                  PERSONNEL_NAME: item.TALENT_MANAGER.PERSONNEL_NAME,\r\n                  CREATED_BY: this._cache_obj.USER.USER_ID,\r\n                  CREATED_DT: new Date(),\r\n                  LAST_UPDATED_BY: this._cache_obj.USER.USER_ID,\r\n                  LAST_UPDATED_DT: new Date(),\r\n                  INPUT_AMT: item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                  EPISODES: this._cache_budget.HEADER.EPISODES,\r\n                  CONFIDENTIAL: 0,\r\n                  PER_TAPING_DAY_RATE: 0,\r\n                  PERSONNEL_CLASS_TYPE: this.getPersonnelClassType(),\r\n                  POOL_RECORD: 0,\r\n                  GROUP_ORDER: -1,\r\n                  WITH_TALENT_MANAGER:'0',\r\n                  GLOBAL_ID_LINK: 'NONE',\r\n                  BDGT_TMPL_DTL_ID_LINK:0,\r\n                });\r\n                EntityManager().addEntity(varInsertTM);\r\n              }\r\n\r\n            } else if (item.TALENT_MANAGER === undefined && item.BDGT_TMPL_DTL_ID_LINK_TMP !== undefined  && item.BDGT_TMPL_DTL_ID_LINK_TMP !== 0) {\r\n\r\n              var varTalentMngrToDelete = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n\r\n              if (varTalentMngrToDelete !== undefined)\r\n              {\r\n                  consoole.log(item.BDGT_TMPL_DTL_ID);\r\n                var varTalentToEdit = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID);\r\n                varTalentMngrToDelete.entityAspect.setDeleted();\r\n\r\n                varTalentToEdit.GLOBAL_ID_LINK = 'NONE';\r\n                varTalentToEdit.BDGT_TMPL_DTL_ID_LINK = 0;\r\n                varTalentToEdit.WITH_TALENT_MANAGER = '0';\r\n\r\n              }\r\n              \r\n            }\r\n\r\n          }\r\n\r\n          ++varIndex;\r\n\r\n        });\r\n\r\nEntityManager().saveChanges().then((success) => {\r\n  this.fnCheckBudget(this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n  toastr.success(\"Succesfully Saved\", this.toPersonModel.USE);\r\n  \r\n  if(tag==1)\r\n    this.fnSequenceDispatch();\r\n\r\n}, (fail) => {\r\n\r\n  EntityManager().getEntities().forEach(function(entity) {\r\n    var errors = entity.entityAspect.getValidationErrors();\r\n    if (errors.length > 0)\r\n      console.log(errors);\r\n  });\r\n  \r\n  //console.log(fail);\r\n  toastr.error(\"Error Occured\",\r\n    fail);\r\n\r\n  if(tag==1)\r\n    this.fnSequenceDispatch();\r\n  \r\n\r\n});\r\n\r\n\r\n      }); //foundDtl\r\n\r\n\r\n\r\n\r\n\r\n\r\n    });//max dtl\r\n\r\n}\r\n\r\nfnSequenceDispatch()\r\n{\r\n\r\n  if (this.toPersonModel.USE == \"REGULAR\")\r\n  {\r\n\r\n    this._cache_budget.OBSERVERS.copy_template.forEach((all)=>{\r\n      all('SEMI_REGULAR');\r\n    });\r\n\r\n  }\r\n  else if (this.toPersonModel.USE == \"SEMI_REGULAR\")\r\n  {\r\n\r\n    this._cache_budget.OBSERVERS.copy_template.forEach((all)=>{\r\n      all('STAFF');\r\n    });\r\n\r\n  }\r\n  else if (this.toPersonModel.USE == \"STAFF\")\r\n  {\r\n    this._cache_budget.OBSERVERS.copy_template_guest.forEach((all)=>{\r\n     all();\r\n   }); \r\n\r\n  }\r\n\r\n\r\n  \r\n}\r\n\r\ngetPersonnelClassType()\r\n{\r\n  if(this.toPersonModel.USE=='REGULAR')\r\n  {\r\n    return 'Regular';\r\n  }\r\n  else if(this.toPersonModel.USE=='SEMI_REGULAR')\r\n  {\r\n    return 'Semi-Regular';\r\n  }\r\n  else\r\n    return 'Staff'; \r\n}\r\n\r\nfnRegularBlurEvt(item, property, index, BDGT_TMPL_DTL_ID)\r\n{\r\n\r\n\r\n if (property == \"TERM\") {\r\n  if($(\"input[tableTermIndex*='\" + index + \"']\").val()===undefined) return;\r\n  this._Personnel[index].PAYMENT_TERM = $(\"input[tableTermIndex*='\" + index + \"']\").val().toUpperCase();\r\n\r\n  var varPaymentTerm=this._Personnel[index].PAYMENT_TERM.trim();\r\n  var varFound = this._PYMNTTERM.find((all) => {\r\n    return varPaymentTerm == all.REF_DESC.trim();\r\n  });\r\n\r\n\r\n  if (varFound !== undefined) {\r\n    this._Personnel[index].PYMNT_TERM_CD = varFound.REF_CD;\r\n  } else\r\n  this._Personnel[index].PYMNT_TERM_CD = \"\";\r\n\r\n\r\n}\r\n\r\n}\r\n\r\nfnBlankPersonnelRegular()\r\n{\r\n  \r\n  this.getDefaultPymntTerm();\r\n\r\n  this._Personnel.push({visible:true,PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n    CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n    INPUT_AMT_TMP: numeral(0).format('0,0.00'),\r\n    PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n    PAYMENT_TERM: this.varPymnt.REF_DESC\r\n  });\r\n\r\n  var varBudgetLast = this._Personnel[this._Personnel.length - 1];\r\n  varBudgetLast.ce_value = \"+\";\r\n  varBudgetLast.styleString = this.styleStringHidden;\r\n\r\n    // setTimeout(()=>{this.fnReloadTypeahead();},500);\r\n    \r\n    this._signal = generateID();\r\n\r\n    this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>{\r\n      all();\r\n    });\r\n\r\n    //this._cache_budget.CALLER.ACTION='reset.summary';\r\n\r\n    //this._dispatcher.dispatch('reset.summary');\r\n  }\r\n\r\n  chkRemove(item)\r\n  {\r\n    if(item.REMOVE)\r\n    {\r\n      item.REMOVE=false;\r\n    }\r\n    else\r\n    {\r\n      item.REMOVE=true;\r\n    }\r\n  }\r\n\r\n  removeRegular(index) \r\n  {\r\n   \r\n    var varRemoved = this._Personnel.splice(index, 1);\r\n    this._signal = generateID();\r\n    //this._cache_budget.CALLER.ACTION='reset.summary';\r\n    this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>{\r\n      all();\r\n    });\r\n    //this._dispatcher.dispatch('reset.summary');\r\n  }\r\n\r\n  fnIndivMstrTalents(){\r\n    this.dialogService.open({\r\n      viewModel: globalindivmstr, model: {allPersonnel:false}\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        \r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n  fnIndivMstr()\r\n  {\r\n    this.dialogService.open({\r\n      viewModel: indivmstr, model: {allPersonnel:false}\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        this.PassedIndiv(response.output);\r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n  fnModalJob()\r\n  {\r\n    this.dialogService.open({\r\n      viewModel: job\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        this.passJob(response.output);\r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  fnModalPaymentTerm()\r\n  {\r\n    this.dialogService.open({\r\n      viewModel: paymentterm\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        this.passTerm(response.output);\r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  passTerm(term) \r\n  {\r\n\r\n    var index = this._Index;\r\n    \r\n    this._Personnel[index].PYMNT_TERM_CD = term.REF_CD;\r\n    this._Personnel[index].PAYMENT_TERM = term.REF_DESC;\r\n    \r\n  }\r\n\r\n  fnIndivMstrManager()\r\n  {\r\n   this.dialogService.open({\r\n    viewModel: globalindivmstr, model: {allPersonnel:false}\r\n   }).whenClosed(response => {\r\n    \r\n    if (!response.wasCancelled) {\r\n      this.fnPassedPersonnels(response.output);\r\n    } else {\r\n      \r\n    }\r\n  });\r\n}\r\n}","import {bindable,inject} from 'aurelia-framework';\r\nimport { cache_obj } from 'cache_obj';\r\nimport { cache_budget } from 'ppfcs/cache_budget';\r\nimport {EntityManager,EntityQuery} from 'entity-manager-factory';\r\nimport {generateID} from 'entity-manager-factory';\r\n//import {handle, Dispatcher} from 'aurelia-flux';  \r\nimport {getLookups} from 'masterfiles';\r\nimport {  substringMatcher } from 'helpers';\r\nimport typeahead from 'typeahead';\r\nimport settings from 'settings';\r\nimport _ from 'underscore';\r\nimport numeral from 'numeral';\r\nimport toastr from \"toastr\";\r\nimport {  MultiObserver }from 'multi-observer';\r\n\r\n@inject(cache_obj,cache_budget,MultiObserver)\r\nexport class SummaryCustomElement {\r\n\r\n  @bindable to;\r\n  _cache_obj = null;\r\n  //_dispatcher;\r\n  _enableAdd=false;\r\n  _enableRemove=false;\r\n  _signal;\r\n  _PYMNTTERM;\r\n  _multiObserver;\r\n  _INPUT_AMT_MAINSTAY=0;\r\n  _INPUT_AMT_STAFF=0;\r\n  _INPUT_AMT_GUEST=0;\r\n  _INPUT_AMT_TOTAL=0;\r\n  varObserveSubscriptions=[];\r\n  _cache_budget = null;\r\n  constructor(cache_obj, cache_budget, multiObserver) {\r\n    this._cache_obj = cache_obj;\r\n    this._cache_budget = cache_budget;\r\n    this._multiObserver=multiObserver;\r\n\r\n    this._cache_obj.OBSERVERS.budget_dialog.push((val) => {\r\n      this.fnCheckSummary(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.reset_summary.push(() => {\r\n      this.fnResetSummarySubscription();\r\n    });\r\n\r\n  }\r\n\r\n  fnCheckAll(){\r\n\r\n    this._INPUT_AMT_MAINSTAY=0;\r\n    this._INPUT_AMT_TOTAL=0;\r\n    this._cache_budget._INPUT_AMT_REGULAR=0;\r\n    this._cache_budget._INPUT_AMT_SEMI_REGULAR=0;\r\n\r\n    this._cache_budget.REGULAR.forEach((all)=>{\r\n\r\n      if (this._cache_obj.ALLOW_PASS_CONFIDENTIAL || !all.CONFIDENTIAL_TMP) {\r\n        if (all.GROUP_ORDER !== -1)\r\n          if (all.INPUT_AMT_TMP != \"\" && all.INPUT_AMT_TMP != null && all.INPUT_AMT_TMP != undefined) {\r\n            this._INPUT_AMT_MAINSTAY += parseFloat(all.INPUT_AMT_TMP.replace(/,/g, ''));\r\n            \r\n          }\r\n\r\n          if (all.TALENT_MANAGER) {\r\n            if (all.TALENT_MANAGER.INPUT_AMT_TMP != \"\" && all.TALENT_MANAGER.INPUT_AMT_TMP != null && all.TALENT_MANAGER.INPUT_AMT_TMP != undefined) {\r\n              this._INPUT_AMT_MAINSTAY += parseFloat(all.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''));\r\n\r\n            }            \r\n          }\r\n        }\r\n      });\r\n\r\n    this._cache_budget._INPUT_AMT_REGULAR = numeral(this._INPUT_AMT_MAINSTAY).format('0,0.00');\r\n\r\n    this._cache_budget.SEMI_REGULAR.forEach((all)=>{\r\n\r\n      if (all.INPUT_AMT_TMP != \"\" && all.INPUT_AMT_TMP != null && all.INPUT_AMT_TMP != undefined) {\r\n        if (all.GROUP_ORDER !== -1) {\r\n          if (this._cache_obj.ALLOW_PASS_CONFIDENTIAL || !all.CONFIDENTIAL_TMP)\r\n            this._INPUT_AMT_MAINSTAY += parseFloat(all.INPUT_AMT_TMP.replace(/,/g, ''));\r\n          this._cache_budget._INPUT_AMT_SEMI_REGULAR+=parseFloat(all.INPUT_AMT_TMP.replace(/,/g, ''));\r\n        }\r\n\r\n        if (all.TALENT_MANAGER) {\r\n          if (all.TALENT_MANAGER.INPUT_AMT_TMP != \"\" && all.TALENT_MANAGER.INPUT_AMT_TMP != null && all.TALENT_MANAGER.INPUT_AMT_TMP != undefined) {\r\n            this._INPUT_AMT_MAINSTAY += parseFloat(all.TALENT_MANAGER.INPUT_AMT_TMP .replace(/,/g, ''));\r\n            this._cache_budget._INPUT_AMT_SEMI_REGULAR+=parseFloat(all.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''));\r\n          }            \r\n        }\r\n\r\n      }\r\n\r\n    });\r\n    \r\n    this._INPUT_AMT_TOTAL=this._INPUT_AMT_MAINSTAY;\r\n    this._INPUT_AMT_MAINSTAY=numeral(this._INPUT_AMT_MAINSTAY).format('0,0.00');\r\n\r\n    this._cache_budget._INPUT_AMT_SEMI_REGULAR=numeral(this._cache_budget._INPUT_AMT_SEMI_REGULAR).format('0,0.00');\r\n\r\n    this._INPUT_AMT_STAFF=0;\r\n    this._cache_budget._INPUT_AMT_STAFF=0; \r\n\r\n    this._cache_budget.STAFF.forEach((all)=>{\r\n\r\n      if (all.INPUT_AMT_TMP != \"\" && all.INPUT_AMT_TMP != null && all.INPUT_AMT_TMP != undefined)\r\n      {\r\n\r\n        if (all.GROUP_ORDER !== -1)\r\n        {\r\n\r\n          if (this._cache_obj.ALLOW_PASS_CONFIDENTIAL || !all.CONFIDENTIAL_TMP)\r\n            this._INPUT_AMT_STAFF += parseFloat(all.INPUT_AMT_TMP.replace(/,/g, ''));\r\n        }\r\n\r\n        if (all.TALENT_MANAGER) \r\n        {\r\n\r\n          if (all.TALENT_MANAGER.INPUT_AMT_TMP != \"\" && all.TALENT_MANAGER.INPUT_AMT_TMP != null && all.TALENT_MANAGER.INPUT_AMT_TMP != undefined) {\r\n            this._INPUT_AMT_STAFF += parseFloat(all.TALENT_MANAGER.INPUT_AMT_TMP .replace(/,/g, ''));\r\n          }          \r\n\r\n        }\r\n\r\n      }\r\n\r\n    });\r\n\r\n    \r\n\r\n    this._INPUT_AMT_TOTAL+=this._INPUT_AMT_STAFF;\r\n    this._INPUT_AMT_STAFF=numeral(this._INPUT_AMT_STAFF).format('0,0.00');\r\n    this._cache_budget._INPUT_AMT_STAFF=this._INPUT_AMT_STAFF;\r\n\r\n    this._INPUT_AMT_GUEST=0;\r\n    this._cache_budget.GUEST.forEach((all) => \r\n    {\r\n\r\n      if(all.GROUP_ORDER!==-1)    \r\n        if(all.INPUT_AMT_TMP!=\"\" && all.INPUT_AMT_TMP!=null && all.INPUT_AMT_TMP!=undefined)\r\n       // if(this._cache_budget.ALLOW_PASS_CONFIDENTIAL)\r\n     this._INPUT_AMT_GUEST += parseFloat(all.INPUT_AMT_TMP.replace(/,/g, '')) * all.PAY_RATE_FACTOR;\r\n\r\n   });\r\n\r\n    \r\n\r\n    this._INPUT_AMT_TOTAL+=this._INPUT_AMT_GUEST;\r\n    this._INPUT_AMT_GUEST=numeral(this._INPUT_AMT_GUEST).format('0,0.00');\r\n    this._cache_budget._INPUT_AMT_GUEST=numeral(this._INPUT_AMT_GUEST).format('0,0.00');\r\n\r\n    this._INPUT_AMT_TOTAL=numeral(this._INPUT_AMT_TOTAL).format('0,0.00');    \r\n\r\n    this._cache_budget.TOTAL = this._INPUT_AMT_TOTAL;\r\n\r\n    if(this._cache_budget._LOADING_BUDGET==1 && this._cache_budget.TOTAL!=0)\r\n    {\r\n      this._cache_budget_LOADING_BUDGET=0;\r\n      this._cache_budget.OBSERVERS.budget_loaded.forEach((all)=>{\r\n        all();\r\n      });\r\n    }\r\n    \r\n  }\r\n\r\n  //@handle('budget.dialog')\r\n  fnCheckSummary(value) {\r\n\r\n    setTimeout(() => \r\n    {\r\n\r\n                      //REGULAR\r\n                      for (var name in this._cache_budget.REGULAR) \r\n                      {\r\n\r\n                       var varSubscription = this._multiObserver.observe(\r\n                        [\r\n                        [this._cache_budget.REGULAR[name], 'INPUT_AMT_TMP']\r\n                            // [this._cache_budget.REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                            // [this._cache_budget.REGULAR[name], 'CONTRACT_AMT_TMP']\r\n                            ], (newValue, oldValue) => {\r\n\r\n                              this.fnCheckAll();\r\n\r\n                            });\r\n\r\n                       this.varObserveSubscriptions.push(varSubscription);\r\n\r\n                       if(this._cache_budget.REGULAR[name].TALENT_MANAGER!==undefined)\r\n                       {\r\n                            //[this._cache_budget.REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n\r\n                            var varSubscriptionTM = this._multiObserver.observe(\r\n                              [\r\n                              [this._cache_budget.REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                                    // [this._cache_budget.REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                                    // [this._cache_budget.REGULAR[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                                    ], (newValue, oldValue) => {\r\n\r\n                                      this.fnCheckAll();\r\n\r\n                                    });\r\n\r\n                            this.varObserveSubscriptions.push(varSubscriptionTM);\r\n\r\n                          }\r\n\r\n                        }\r\n\r\n\r\n                      //SEMI-REGULAR\r\n                      for (var name in this._cache_budget.SEMI_REGULAR)\r\n                      {\r\n\r\n                        var varSubscription = this._multiObserver.observe(\r\n                          [\r\n                          [this._cache_budget.SEMI_REGULAR[name], 'INPUT_AMT_TMP'],\r\n                            //[this._cache_budget.SEMI_REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                            // [this._cache_budget.SEMI_REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                            // [this._cache_budget.SEMI_REGULAR[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                            ], (newValue, oldValue) =>\r\n                            {\r\n\r\n                              this.fnCheckAll();\r\n\r\n                            });\r\n\r\n                        this.varObserveSubscriptions.push(varSubscription);\r\n\r\n                        if(this._cache_budget.SEMI_REGULAR[name].TALENT_MANAGER!==undefined)\r\n                        {\r\n                              //[this._cache_budget.REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n\r\n                              var varSubscriptionTM = this._multiObserver.observe(\r\n                                [\r\n                                [this._cache_budget.SEMI_REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                                      // [this._cache_budget.REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                                      // [this._cache_budget.REGULAR[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                                      ], (newValue, oldValue) => {\r\n\r\n                                        this.fnCheckAll();\r\n\r\n                                      });\r\n\r\n                              this.varObserveSubscriptions.push(varSubscriptionTM);\r\n\r\n                            }\r\n                          }\r\n\r\n\r\n                    //STAFF\r\n                    for (var name in this._cache_budget.STAFF) \r\n                    {\r\n\r\n                      var varSubscription = this._multiObserver.observe(\r\n                        [\r\n                        [this._cache_budget.STAFF[name], 'INPUT_AMT_TMP'],\r\n                          //[this._cache_budget.STAFF[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                          // [this._cache_budget.STAFF[name], 'PAY_RATE_FACTOR_TMP'],\r\n                          // [this._cache_budget.STAFF[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                          ], (newValue, oldValue) => {\r\n\r\n\r\n\r\n                            this.fnCheckAll();\r\n\r\n                          });\r\n\r\n                      this.varObserveSubscriptions.push(varSubscription);\r\n\r\n                      if (this._cache_budget.STAFF[name].TALENT_MANAGER!==undefined) \r\n                      {\r\n                        //[this._cache_budget.REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n\r\n                        var varSubscriptionTM = this._multiObserver.observe(\r\n                          [\r\n                          [this._cache_budget.STAFF[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                            // [this._cache_budget.REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                            // [this._cache_budget.REGULAR[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                            ], (newValue, oldValue) => {\r\n\r\n\r\n\r\n                              this.fnCheckAll();\r\n\r\n                            });\r\n\r\n                        this.varObserveSubscriptions.push(varSubscriptionTM);\r\n\r\n                      }\r\n\r\n                    }\r\n\r\n\r\n                  //GUEST\r\n                  for (var name in this._cache_budget.GUEST)\r\n                  {\r\n\r\n                    var varSubscription = this._multiObserver.observe(\r\n                      [\r\n                      [this._cache_budget.GUEST[name], 'INPUT_AMT_TMP']\r\n                        // [this._cache_budget.GUEST[name], 'PAY_RATE_FACTOR_TMP']\r\n\r\n                        ], (newValue, oldValue) => {\r\n\r\n\r\n                          this.fnCheckAll();\r\n\r\n                        });\r\n\r\n                    this.varObserveSubscriptions.push(varSubscription);\r\n\r\n                  }\r\n\r\n                  this.fnCheckAll();\r\n\r\n                }\r\n\r\n                , 6000);\r\n\r\n}\r\n\r\n  //@handle('reset.summary')\r\n  fnResetSummarySubscription()\r\n  {\r\n\r\n    this.varObserveSubscriptions.forEach((toDispose) => {\r\n      toDispose();\r\n    });\r\n\r\n    while (this.varObserveSubscriptions.length > 0) {\r\n     this.varObserveSubscriptions.pop();\r\n   }\r\n\r\n   this.fnCheckSummary();\r\n }\r\n \r\n}","export class cache_contract{\r\n  CONTRACT_STATUS;\r\n  LAST_UPDATED_BY;\r\n  LAST_UPDATED_DT=new Date(Date.now());\r\n  CREATED_BY;\r\n  CREATED_DT=new Date(Date.now());\r\n  ISNEWCONTRACT=true;\r\n  ISSAVE= true;\r\n  CONTRACT_HDR_ID='';\r\n}\r\n","//import {autocomplete} from '{aurelia-autocomplete}';\r\nimport {bindable,inject} from 'aurelia-framework';\r\nimport { cache_obj } from 'cache_obj';\r\nimport { cache_contract } from 'ppid/contract/cache_contract';\r\nimport { EntityManager, EntityQuery, generateID} from 'entity-manager-factory';\r\nimport { getLookups } from 'masterfiles';\r\nimport settings from 'settings';\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport toastr from \"toastr\";\r\nimport moment from 'moment';\r\nimport _ from 'underscore';\r\nimport { MultiObserver }from 'multi-observer';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\r\nimport { contract_search } from 'ppid/contract/contract_search';\r\n\r\n\r\n@inject(cache_obj, cache_contract, ModalWizard, toastr, MultiObserver, DialogService)\r\n\r\nexport class contract_form {\r\n\r\n@bindable EMPLOYEE_NAME;\r\n//@bindable EMPLOYEE_ALIAS;\r\n\r\n_cache_obj;\r\n_cache_contract;\r\n\r\n_disableCreateContract = false;\r\n_disableEditContract = true;\r\n_disableCancelContract=true;\r\n_disableRefreshContract=true;\r\n_disableSaveContract=true;\r\n_disablePrintContract=true;\r\n\r\n\r\n\r\nMSTR_LIST=[];\r\nNAME_ARRAY=[];\r\nALIAS_ARRAY=[];\r\nCOMPANY=[{ref:'', desc:''}];\r\nDIVISION=[];\r\nJOB_GRP_ARRAY=[];\r\nJOB=[];\r\nALIAS=[];\r\nCONTRACT_STATUS=[];\r\n\r\n\r\n\r\nMSTR_LIST1;\r\nCOMPANY1;\r\nDIVISION1;\r\nJOB_GRP1;\r\nJOB1;\r\nALIAS_NAME1;\r\n\r\nCONTRACT_HDR_ID1;\r\nGLOBAL_ID1;\r\nCOMPANY_CD1;\r\nDIVISION_CD1;\r\nCONTRACT_NO1;\r\nJOB_ID1;\r\nCOMPENTENCY_LEVEL1;\r\nCONTRACT_START_DT1;\r\nCONTRACT_END_DT1;\r\nDURATION_MONTHS1;\r\nCONTRACT_FEE1;\r\nMONTHLY_FEE1;\r\nCONTRACT_TYPE1;\r\nCONTRACT_STATUS1;\r\nMAIN_CONTRACT_NO1;\r\nTERMINATE_REASON1;\r\nTERMINATE_DT1;\r\nCREATED_BY1;\r\nCREATED_DT1;\r\nLAST_UPDATED_BY1;\r\nLAST_UPDATED_DT1;\r\nLEVEL_NO1;\r\nBATCH1;\r\nALIAS1;\r\n\r\nCOMPANY_NAME1;\r\nDIVISION_NAME1;\r\nJOB_NAME1;\r\nJOB_GRP_NAME1;\r\nmenuNameShow = false;\r\nmenuAliasShow=false;\r\n\r\ndialogService=null;\r\n\r\n  constructor(cache_obj,cache_contract,ModalWizard,toastr,multiObserver,DialogService) {\r\n      if (EntityManager() === undefined) {\r\n        return;\r\n      }\r\n\r\n      this.dialogService = DialogService;\r\n      this._cache_obj= cache_obj;\r\n      this._cache_contract= cache_contract;\r\n      this.COMPANY1 = this._cache_obj.USER.COMPANY_ID;\r\n\r\n      //to follow the real one\r\n      //this._cache_obj.USER.LEVEL_NO=1;\r\n\r\n      this.LEVEL_NO1 = this._cache_obj.USER.LEVEL_NO;\r\n      console.log(this._cache_obj.USER);\r\n\r\n      this._cache_obj.OBSERVERS.contract_dialog.push((val) => {\r\n        this.fnCheckContract(val);\r\n      });\r\n\r\n\r\n      EntityManager().executeQuery(EntityQuery().from('COMPANY_MSTR').where('COMPANY_ID','==', this.COMPANY1)).then((found) => {\r\n        this.COMPANY_NAME1 = found.results[0].COMPANY_NAME;\r\n        this.COMPANY_CD1 = found.results[0].COMPANY_CD;\r\n      });\r\n\r\n      if (this.LEVEL_NO1==3)\r\n      {\r\n         var personnel = getLookups().GLOBAL_INDIV_WITH_ALIAS;\r\n         var newPersonnel = _.sortBy(personnel, 'PERSONNEL_NAME');\r\n         newPersonnel.forEach((item) =>\r\n         {\r\n           if (item.PERSONNEL_INFO_SRC=='INDIV')\r\n             this.MSTR_LIST.push({ref:item.GLOBAL_INDIV_ID, desc:item.PERSONNEL_NAME});\r\n         });\r\n      }\r\n      else\r\n      {\r\n        var personnel = getLookups().GLOBAL_INDIV_MSTR;\r\n        var newPersonnel = _.sortBy(personnel, 'LAST_NAME', 'GIVEN_NAME', 'MIDDLE_NAME');\r\n        //console.log(newPersonnel);\r\n        newPersonnel.forEach((item) =>\r\n        {\r\n            this.MSTR_LIST.push({ref:item.GLOBAL_INDIV_ID, desc:item.LAST_NAME+', '+item.GIVEN_NAME+' '+item.MIDDLE_NAME});\r\n        });\r\n      }\r\n\r\n      this.CONTRACT_STATUS.push({ref:'ACTIVE', desc:'ACTIVE'});\r\n      this.CONTRACT_STATUS.push({ref:'EXPIRED', desc:'EXPIRED'});\r\n\r\n      this.DIVISION=[{ref:'', desc:''}];\r\n      EntityManager().executeQuery(EntityQuery().from('DIVISION_MSTR').where('COMPANY_ID','==',this.COMPANY1).orderBy('DIVISION_NAME')).then((found) => {\r\n        found.results.forEach((all)=>{\r\n          this.DIVISION.push({ref:all.DIVISION_ID, desc:all.DIVISION_NAME});\r\n        });\r\n      });\r\n\r\n      EntityManager().executeQuery(EntityQuery().from('JOB_GRP_MSTR').where('COMPANY_ID','==',this.COMPANY1).orderBy('JOB_GRP_DESC')).then((found) => {\r\n        found.results.forEach((all)=>{\r\n          this.JOB_GRP_ARRAY.push(all.JOB_GRP_ID);\r\n        });\r\n      });\r\n\r\n\r\n\r\n      this.JOB=[{ref:'', desc:''}];\r\n      EntityManager().executeQuery(EntityQuery().from('JOB_MSTR').orderBy('JOB_DESC')).then((found) => {\r\n        found.results.forEach((all)=>{\r\n          if (this.JOB_GRP_ARRAY.indexOf(all.JOB_GRP_ID) > -1) {\r\n            this.JOB.push({ref:all.JOB_ID, desc:all.JOB_DESC});\r\n          }\r\n        });\r\n      });\r\n\r\n      setTimeout(() => {\r\n        $('#dtPicker1').datepicker({\r\n            format: \"mm/dd/yyyy\"\r\n          })\r\n          .on(\"changeDate\", () => {\r\n            //console.log($('#dtPicker1').val());\r\n            this.CONTRACT_START_DT1 = moment(new Date($('#dtPicker1').val())).format('MM/DD/YYYY');\r\n            if (new Date($('#dtPicker1').val()) > new Date($('#dtPicker2').val())) {\r\n              toastr.error(\"Invalid date range.\", \"Date Change..\");\r\n              //$('#CONTRACT_END_DT1').datepicker(\"setValue\", new Date($('#CONTRACT_START_DT1').val()));\r\n              return;\r\n            }\r\n            if (!Date(this.CONTRACT_START_DT1) || !Date(this.CONTRACT_END_DT1) || this.CONTRACT_START_DT1==undefined || this.CONTRACT_END_DT1==undefined || this.CONTRACT_START_DT1=='' || this.CONTRACT_END_DT1=='')\r\n            {\r\n              this.DURATION_MONTHS1 = 0;\r\n            }\r\n            else\r\n            {\r\n              this.DURATION_MONTHS1 = this.monthDiff(this.CONTRACT_START_DT1, this.CONTRACT_END_DT1);\r\n            }\r\n            $('#dtPicker1').datepicker('hide');\r\n          });\r\n\r\n\r\n        $('#dtPicker2').datepicker({\r\n            format: \"mm/dd/yyyy\"\r\n          })\r\n          .on(\"changeDate\", () => {\r\n            //console.log($('#dtPicker2').val());\r\n            this.CONTRACT_END_DT1 = moment(new Date($('#dtPicker2').val())).format('MM/DD/YYYY');\r\n            if (new Date($('#dtPicker2').val()) < new Date($('#dtPicker1').val())) {\r\n              toastr.error(\"Invalid date range.\", \"Date Change..\");\r\n              //$('#CONTRACT_START_DT1').datepicker(\"setValue\", new Date($('#CONTRACT_END_DT1').val()));\r\n              return;\r\n            }\r\n            if (!Date(this.CONTRACT_START_DT1) || !Date(this.CONTRACT_END_DT1) || this.CONTRACT_START_DT1==undefined || this.CONTRACT_END_DT1==undefined || this.CONTRACT_START_DT1=='' || this.CONTRACT_END_DT1=='')\r\n            {\r\n              this.DURATION_MONTHS1 = 0;\r\n            }\r\n            else\r\n            {\r\n              this.DURATION_MONTHS1 = this.monthDiff(this.CONTRACT_START_DT1, this.CONTRACT_END_DT1);\r\n            }\r\n            $('#dtPicker2').datepicker('hide');\r\n          });\r\n      }, 1000);\r\n  }\r\n\r\n  pad(str, max) {\r\n    str = str.toString();\r\n    return str.length < max ? this.pad(\"0\" + str, max) : str;\r\n  }\r\n\r\n  EMPLOYEE_NAMEChanged() {\r\n    this.NAME_ARRAY=this.MSTR_LIST.filter((all)=>all.desc.substring(0,this.EMPLOYEE_NAME.length)==this.EMPLOYEE_NAME.toUpperCase());\r\n  }\r\n\r\n  //EMPLOYEE_ALIASChanged()\r\n  //{\r\n  //  this.ALIAS_ARRAY = this.ALIAS; //.filter((all)=>all.substring(0, this.EMPLOYEE_ALIAS.length)==this.EMPLOYEE_ALIAS.toUpperCase());\r\n  //}\r\n\r\n  division_change(){\r\n    EntityManager().executeQuery(EntityQuery().from('DIVISION_MSTR').where(\"DIVISION_ID\",\"==\",this.DIVISION1)).then((success) => {\r\n      this.DIVISION_CD1 = success.results[0].DIVISION_CD;\r\n      this._cache_contract.ISSAVE = false;\r\n    }, (fail) =>{\r\n      toastr.error(\"Error Division\", \"Division CD not found\");\r\n      return;\r\n    });\r\n\r\n  }\r\n\r\n  job_change() {\r\n    EntityManager().executeQuery(EntityQuery().from('JOB_MSTR').where('JOB_ID','==',this.JOB1)).then((found) => {\r\n      EntityManager().executeQuery(EntityQuery().from('JOB_GRP_MSTR').where('JOB_GRP_ID','==',found.results[0].JOB_GRP_ID)).then((found1) => {\r\n        this.JOB_GRP_NAME1 = found1.results[0].JOB_GRP_DESC;\r\n        this._cache_contract.ISSAVE = false;\r\n        });\r\n      });\r\n    }\r\n\r\n  name_change() {\r\n    this.ALIAS=[];\r\n\r\n    this.GLOBAL_ID1 = this.MSTR_LIST1;\r\n    if (this.LEVEL_NO1==3)\r\n    {\r\n      var personnel = getLookups().GLOBAL_INDIV_WITH_ALIAS.find((found) => found.GLOBAL_INDIV_ID == this.MSTR_LIST1);\r\n      personnel.ALIASES.forEach((all)=>\r\n      {\r\n        this.ALIAS.push(all);\r\n      });\r\n      this.ALIAS.push(personnel.PERSONNEL_NAME);\r\n    }\r\n    else {\r\n      var personnel = getLookups().GLOBAL_INDIV_MSTR.find((found) => found.GLOBAL_INDIV_ID == this.MSTR_LIST1);\r\n      this.ALIAS.push(personnel.LAST_NAME+', '+personnel.GIVEN_NAME+' '+personnel.MIDDLE_NAME);\r\n    }\r\n    this._cache_contract.ISSAVE = false;\r\n  }\r\n\r\n  name_change(item, name){\r\n    this.ALIAS=[];\r\n    this.EMPLOYEE_NAME = name;\r\n    this.EMPLOYEE_ALIAS = '';\r\n    this.MSTR_LIST1 = item;\r\n    this.GLOBAL_ID1 = this.MSTR_LIST1;\r\n    if (this.LEVEL_NO1==3)\r\n    {\r\n      var personnel = getLookups().GLOBAL_INDIV_WITH_ALIAS.find((found) => found.GLOBAL_INDIV_ID == this.MSTR_LIST1);\r\n\r\n      personnel.ALIASES.forEach((all)=>\r\n      {\r\n        this.ALIAS.push(all);\r\n      });\r\n      this.ALIAS.push(personnel.PERSONNEL_NAME);\r\n    }\r\n    else {\r\n      var personnel = getLookups().GLOBAL_INDIV_MSTR.find((found) => found.GLOBAL_INDIV_ID == this.MSTR_LIST1);\r\n      this.ALIAS.push(personnel.LAST_NAME+', '+personnel.GIVEN_NAME+' '+personnel.MIDDLE_NAME);\r\n    }\r\n    this.ALIAS_ARRAY = this.ALIAS;\r\n    this._cache_contract.ISSAVE = false;\r\n  }\r\n\r\n  alias_change(item){\r\n    this.EMPLOYEE_ALIAS= item;\r\n    this._cache_contract.ISSAVE = false;\r\n  }\r\n\r\n  onfocusName(){\r\n    if (!(this._disableEditContract || !this._cache_contract.ISNEWCONTRACT))\r\n      this.menuNameShow =true;\r\n  }\r\n\r\n  lostfocusName(){\r\n    setTimeout(() => {\r\n      this.menuNameShow =false;\r\n    }, 200);\r\n  }\r\n\r\n  onfocusAlias(){\r\n    if (!this._disableEditContract)\r\n      this.menuAliasShow = true;\r\n  }\r\n\r\n  lostfocusAlias(){\r\n    setTimeout(() => {\r\n      this.menuAliasShow = false;\r\n    }, 200);\r\n  }\r\n\r\n  onchangeName(){\r\n    this._cache_contract.ISSAVE= false;\r\n  }\r\n\r\n  onchangeAlias()\r\n  {\r\n    this._cache_contract.ISSAVE= false;\r\n  }\r\n\r\n  checkDate() {\r\n    setTimeout(() => {\r\n      if (!Date(this.CONTRACT_START_DT1) || !Date(this.CONTRACT_END_DT1) || this.CONTRACT_START_DT1==undefined || this.CONTRACT_END_DT1==undefined || this.CONTRACT_START_DT1=='' || this.CONTRACT_END_DT1=='')\r\n      {\r\n        this.DURATION_MONTHS1 = 0;\r\n      }\r\n      else\r\n      {\r\n        this.DURATION_MONTHS1 = this.monthDiff(this.CONTRACT_START_DT1, this.CONTRACT_END_DT1);\r\n      }\r\n    }, 1000);\r\n    this._cache_contract.ISSAVE = false;\r\n  }\r\n\r\n\r\n\r\n\r\n  monthDiff(d1, d2) {\r\n    var date1= new Date(d1);\r\n    var date2 = new Date(d2);\r\n\r\n    var months =  (date2.getDate() - date1.getDate()) / 30 +\r\n    date2.getMonth() - date1.getMonth() +\r\n    (12 * (date2.getFullYear() - date1.getFullYear()));\r\n    return Math.round(months);\r\n  }\r\n\r\n  keyStroke(evt) {\r\n    return true;\r\n    if (evt.keyCode==8 || evt.keyCode>=48 && evt.keyCode<=57 || evt.keyCode==190 || evt.keyCode==9){\r\n    }\r\n    return false;\r\n  }\r\n\r\n  fnContract(eventName){\r\n    switch (eventName) {\r\n      case 'create':\r\n        this._disableCreateContract = true;\r\n        this._disableEditContract = false;\r\n        this._disableCancelContract=false;\r\n        this._disableRefreshContract=false;\r\n        this._disableSaveContract=false;\r\n        this._disablePrintContract=false;\r\n        this.initializeEntry();\r\n        break;\r\n\r\n      case 'save':\r\n        this.saveEntry();\r\n        //toastr.success('Save successfully', 'Success');\r\n        break;\r\n\r\n      case 'cancel':\r\n        //ask if want to save changes\r\n        if (!this._cache_contract.ISSAVE)\r\n        {\r\n          if (!confirm('You made changes. Are you sure you want to cancel it?'))\r\n            return;\r\n\r\n\r\n\r\n        }\r\n        this._disableCreateContract = false;\r\n        this._disableEditContract = true;\r\n        this._disableCancelContract = true;\r\n        this._disableRefreshContract = true;\r\n        this._disableSaveContract = true;\r\n        this._disablePrintContract = true;\r\n        this._cache_contract.ISSAVE = true;\r\n\r\n        this.initializeEntry();\r\n\r\n\r\n        this.menuNameShow=false;\r\n        this.menuAliasShow=false;\r\n\r\n      default:\r\n\r\n    }\r\n  }\r\n\r\n  initializeEntry() {\r\n    this.LEVEL_NO1 = this._cache_obj.USER.LEVEL_NO;\r\n    this.MSTR_LIST1='';\r\n    this.DIVISION1='';\r\n    this.JOB1='';\r\n    this.ALIAS_NAME1='';\r\n\r\n    this.CONTRACT_HDR_ID1='';\r\n    this.GLOBAL_ID1='';\r\n    this.CONTRACT_NO1='';\r\n    this.COMPENTENCY_LEVEL1='';\r\n    this.JOB_ID1='';\r\n    this.JOB_GRP_NAME1 ='';\r\n    this.CONTRACT_END_DT1='';\r\n    this.CONTRACT_START_DT1='';\r\n    this.DURATION_MONTHS1='';\r\n    this.CONTRACT_FEE1=0.00;\r\n    this.CONTRACT_TYPE1='';\r\n    this.MONTHLY_FEE1=0.00;\r\n    this.CONTRACT_STATUS1='ACTIVE';\r\n    this.MAIN_CONTRACT_NO1='';\r\n    this.TERMINATE_REASON1='';\r\n    this.TERMINATE_DT1='';\r\n    this.CREATED_BY1='';\r\n    this.LAST_UPDATED_BY1='';\r\n    this.CREATED_DT1='';\r\n    this.LAST_UPDATED_DT1='';\r\n    this.BATCH1='';\r\n    this.ALIAS1='';\r\n    //this.LEVEL_NO1 = 1 //_cache_obj.USER.LEVEL_NO;\r\n\r\n    this.EMPLOYEE_NAME='';\r\n    this.EMPLOYEE_ALIAS='';\r\n\r\n    $('#dtPicker1').val('');\r\n    $('#dtPicker2').val('');\r\n\r\n\r\n    this._cache_contract ={\r\n        ISNEWCONTRACT : true,\r\n        CONTRACT_STATUS : 'ACTIVE',\r\n        ISSAVE : false,\r\n    };\r\n  }\r\n\r\n  saveEntry(){\r\n\r\n    if (this.MSTR_LIST1==null || this.MSTR_LIST1=='') {\r\n      toastr.error(\"Error Saving\", \"Empty MASTER LIST\");\r\n      return;\r\n    }\r\n\r\n    if (this.DIVISION1==null || this.DIVISION1==''){\r\n      toastr.error(\"Error Saving\", \"Empty DIVISION NAME\");\r\n      return;\r\n    }\r\n\r\n    if (this.JOB1==null || this.JOB1==''){\r\n      toastr.error(\"Error Saving\", \"Empty JOB NAME\");\r\n      return;\r\n    }\r\n\r\n    if (this.CONTRACT_START_DT1==null || this.CONTRACT_START_DT1==''){\r\n      toastr.error(\"Error Saving\", \"Empty Contract Start\");\r\n      return;\r\n    }\r\n\r\n    if (this.CONTRACT_STATUS1==null || this.CONTRACT_STATUS1==''){\r\n      toastr.error(\"Error Saving\", \"Empty Contract Stutus\");\r\n      return;\r\n    }\r\n\r\n    this.CONTRACT_START_DT1 = moment(new Date(this.CONTRACT_START_DT1)).format('MM/DD/YYYY');\r\n    this.CONTRACT_END_DT1 = moment(new Date(this.CONTRACT_END_DT1)).format('MM/DD/YYYY');\r\n\r\n    if (this.CONTRACT_START_DT1 > this.CONTRACT_END_DT1){\r\n      toastr.error(\"Error Saving\", \"Contract range is invalid\");\r\n      return;\r\n    }\r\n\r\n    this.DURATION_MONTHS1 = this.monthDiff(this.CONTRACT_START_DT1, this.CONTRACT_END_DT1);\r\n\r\n\r\n\r\n    this.JOB_ID1 = this.JOB1;\r\n    this.ALIAS1 = this.EMPLOYEE_ALIAS.toUpperCase();\r\n    this.GLOBAL_ID1 = this.MSTR_LIST1;\r\n\r\n\r\n\r\n\r\n    if(!this._cache_contract.ISNEWCONTRACT) {\r\n\r\n      if (this._cache_contract.CONTRACT_STATUS=='EXPIRED')\r\n      {\r\n        toastr.error(\"Unsuccesfully Saved\", \"NPS Contract Transaction\");\r\n        return;\r\n      }\r\n\r\n      var getContractForEdit = EntityQuery().from('NPS_CONTRACT_HDR_TRX').where(\"CONTRACT_HDR_ID\",\"==\",this.CONTRACT_HDR_ID1);\r\n      EntityManager().executeQuery(getContractForEdit).then((success) => {\r\n        this.LAST_UPDATED_BY1 = this._cache_obj.USER.USER_ID;\r\n        //success.results[0].COMPANY_CD=this.COMPANY_CD1;\r\n        success.results[0].DIVISION_CD=this.DIVISION_CD1;\r\n        //success.results[0].CONTRACT_NO=this.CONTRACT_NO1;\r\n        success.results[0].JOB_ID=this.JOB_ID1;\r\n        //success.results[0].COMPENTENCY_LEVEL=this.COMPENTENCY_LEVEL1;\r\n        success.results[0].CONTRACT_START_DT=this.CONTRACT_START_DT1;\r\n        success.results[0].CONTRACT_END_DT= this.CONTRACT_END_DT1;\r\n        success.results[0].DURATION_MONTHS=this.DURATION_MONTHS1;\r\n        //success.results[0].CONTRACT_FEE=this.CONTRACT_FEE1;\r\n        //success.results[0].MONTHLY_FEE=this.MONTHLY_FEE1;\r\n        //success.results[0].CONTRACT_TYPE=this.CONTRACT_TYPE1;\r\n        success.results[0].CONTRACT_STATUS=this.CONTRACT_STATUS1;\r\n        //success.results[0].MAIN_CONTRACT_NO=this.MAIN_CONTRACT_NO1;\r\n        //success.results[0].TERMINATE_REASON=this.TERMINATE_REASON1;\r\n        //success.results[0].TERMINATE_DT=new Date(this.TERMINATE_DT1);\r\n        success.results[0].LAST_UPDATED_BY=this.LAST_UPDATED_BY1;\r\n        success.results[0].LAST_UPDATED_DT=new Date(Date.now());\r\n        //success.results[0].LEVEL_NO=this.LEVEL_NO1;\r\n        //success.results[0].BATCH=this.BATCH1;\r\n        success.results[0].ALIAS=this.ALIAS1;\r\n\r\n        EntityManager().saveChanges().then((success) => {\r\n          console.log(success);\r\n          toastr.success(\"Succesfully Saved\", \"NPS Contract Transaction\");\r\n        }, (fail) => {\r\n            toastr.error(\"Error Occured\", fail);\r\n          });\r\n        });\r\n\r\n        this._cache_contract ={\r\n            ISNEWCONTRACT : false,\r\n            ISSAVE : true,\r\n            CONTRACT_STATUS: this.CONTRACT_STATUS1,\r\n        };\r\n        return;\r\n      }\r\n      ///INSERTING\r\n      this.CREATED_BY1 = this._cache_obj.USER.USER_ID;\r\n\r\n      var getMax = EntityQuery().from('NPS_CONTRACT_HDR_TRX').orderByDesc('CONTRACT_HDR_ID').take(1);\r\n      EntityManager().executeQuery(getMax).then((successMax) => {\r\n\r\n        var getMax = 1;\r\n\r\n\t\t\t\tif (successMax.results.length > 0)\r\n\t\t\t\t\tgetMax = parseInt(successMax.results[0].CONTRACT_HDR_ID) + 1;\r\n\r\n\r\n        var varInsert = EntityManager().createEntity('NPS_CONTRACT_HDR_TRX', {\r\n          CONTRACT_HDR_ID : this.pad(getMax, 20),\r\n          GLOBAL_ID : this.GLOBAL_ID1,\r\n          COMPANY_CD : this.COMPANY_CD1,\r\n          DIVISION_CD : this.DIVISION_CD1,\r\n          //CONTRACT_NO : this.CONTRACT_NO1,\r\n          JOB_ID : this.JOB_ID1,\r\n          //COMPENTENCY_LEVEL :  this.COMPENTENCY_LEVEL1,\r\n          CONTRACT_START_DT : this.CONTRACT_START_DT1,\r\n          CONTRACT_END_DT : this.CONTRACT_END_DT1,\r\n          DURATION_MONTHS : this.DURATION_MONTHS1,\r\n          //CONTRACT_FEE : this.CONTRACT_FEE1,\r\n          //MONTHLY_FEE : this.MONTHLY_FEE1,\r\n          //CONTRACT_TYPE : this.CONTRACT_TYPE1,\r\n          CONTRACT_STATUS : this.CONTRACT_STATUS1,\r\n          //MAIN_CONTRACT_NO : this.MAIN_CONTRACT_NO1,\r\n          //TERMINATE_REASON : this.TERMINATE_REASON1,\r\n          //TERMINATE_DT : new Date(this.TERMINATE_DT1),\r\n          CREATED_BY : this.CREATED_BY1,\r\n          CREATED_DT : new Date(Date.now()),\r\n          LEVEL_NO : this.LEVEL_NO1,\r\n          //BATCH : this.BATCH1,\r\n          ALIAS : this.ALIAS1,\r\n        });\r\n\r\n      //  console.log(varInsert);\r\n        EntityManager().addEntity(varInsert);\r\n\r\n        EntityManager().saveChanges().then((success) => {\r\n          console.log(success);\r\n          toastr.success(\"Succesfully Saved\", \"NPS Contract Transaction\");\r\n\r\n          this.CONTRACT_HDR_ID1 = varInsert.CONTRACT_HDR_ID;\r\n          this._cache_contract ={\r\n              ISNEWCONTRACT : false,\r\n              CONTRACT_STATUS : this.CONTRACT_STATUS1,\r\n              ISSAVE : true,\r\n          };\r\n        }, (fail) => {\r\n            console.log(fail);\r\n            toastr.error(\"Error Occured\", fail);\r\n          });\r\n        }, (fail2) =>{\r\n            console.log(fail2);\r\n            toastr.error(\"Error Occured\", fail2);\r\n        });\r\n  }\r\n\r\n  searchContract(){\r\n    this.dialogService.open({\r\n      viewModel: contract_search\r\n    }).whenClosed(response => {\r\n      if (!response.wasCancelled) {\r\n      } else {\r\n      }\r\n    });\r\n  }\r\n\r\n  fnCheckContract(val){\r\n    this._cache_contract.CONTRACT_HDR_ID = val;\r\n\r\n    EntityManager().executeQuery(EntityQuery().from('NPS_CONTRACT_HDR_TRX').where('CONTRACT_HDR_ID','==', this._cache_contract.CONTRACT_HDR_ID)).then((success) =>\r\n    {\r\n\r\n\r\n      var result = success.results[0];\r\n\r\n      this.MSTR_LIST1=result.GLOBAL_ID;\r\n\r\n      this.DIVISION_CD1 = result.DIVISION_CD;\r\n      EntityManager().executeQuery(EntityQuery().from('DIVISION_MSTR').where(\"DIVISION_CD\",\"==\",result.DIVISION_CD)).then((success_div) => {\r\n        this.DIVISION1 = success_div.results[0].DIVISION_ID.toString();\r\n        this.DIVISION_NAME1 = success_div.results[0].DIVISION_NAME;\r\n      });\r\n\r\n      this.JOB1=result.JOB_ID.toString();\r\n\r\n      EntityManager().executeQuery(EntityQuery().from('JOB_MSTR').where('JOB_ID','==',this.JOB1)).then((success_job) => {\r\n        EntityManager().executeQuery(EntityQuery().from('JOB_GRP_MSTR').where('JOB_GRP_ID','==',success_job.results[0].JOB_GRP_ID)).then((success_job_grp) => {\r\n          this.JOB_GRP_NAME1 = success_job_grp.results[0].JOB_GRP_DESC;\r\n          this.JOB_NAME1 = success_job.results[0].JOB_DESC;\r\n        });\r\n      });\r\n\r\n\r\n      var nameofemployee = this.MSTR_LIST.find((all)=>all.ref==this.MSTR_LIST1);\r\n\r\n      //console.log(nameofemployee);\r\n\r\n      this.EMPLOYEE_NAME = nameofemployee.desc;\r\n\r\n      this.ALIAS=[];\r\n\r\n      if (this.LEVEL_NO1==3)\r\n      {\r\n\r\n        var personnel = getLookups().GLOBAL_INDIV_WITH_ALIAS.find((sucess_alias) => sucess_alias.GLOBAL_INDIV_ID == this.MSTR_LIST1);\r\n        personnel.ALIASES.forEach((all_alias)=>\r\n        {\r\n          this.ALIAS.push(all_alias);\r\n        });\r\n        this.ALIAS.push(personnel.PERSONNEL_NAME);\r\n      }\r\n      else {\r\n        var personnel = getLookups().GLOBAL_INDIV_MSTR.find((success_alias) => success_alias.GLOBAL_INDIV_ID == this.MSTR_LIST1);\r\n        this.ALIAS.push(personnel.LAST_NAME+', '+personnel.GIVEN_NAME+' '+personnel.MIDDLE_NAME);\r\n      }\r\n\r\n\r\n      if (result.ALIAS!=null && result.ALIAS!='' && this.ALIAS.filter((all)=>all==result.ALIAS).length==0)\r\n      {\r\n        this.ALIAS.push(result.ALIAS);\r\n      }\r\n\r\n      this.ALIAS_ARRAY = this.ALIAS;\r\n      this.ALIAS_NAME1=result.ALIAS;\r\n      this.EMPLOYEE_ALIAS = result.ALIAS;\r\n\r\n      this.CONTRACT_HDR_ID1=result.CONTRACT_HDR_ID;\r\n      this.GLOBAL_ID1=result.GLOBAL_ID;\r\n      this.CONTRACT_NO1=result.CONTRACT_NO;\r\n      this.COMPENTENCY_LEVEL1=result.COMPENTENCY_LEVEL;\r\n      this.JOB_ID1=result.JOB_ID;\r\n      this.CONTRACT_END_DT1=moment(new Date(result.CONTRACT_END_DT)).format('MM/DD/YYYY');\r\n      this.CONTRACT_START_DT1=moment(new Date(result.CONTRACT_START_DT)).format('MM/DD/YYYY') ;\r\n      this.DURATION_MONTHS1=result.DURATION_MONTHS;\r\n      this.CONTRACT_FEE1=result.CONTRACT_FEE;\r\n      this.CONTRACT_TYPE1=result.CONTRACT_TYPE;\r\n      this.MONTHLY_FEE1=result.MONTHLY_FEE;\r\n      this.CONTRACT_STATUS1=result.CONTRACT_STATUS;\r\n      this.MAIN_CONTRACT_NO1=result.MAIN_CONTRACT_NO;\r\n      this.TERMINATE_REASON1=result.TERMINATE_REASON;\r\n      this.TERMINATE_DT1=result.TERMINATE_DT;\r\n      this.CREATED_BY1=result.CREATED_BY;\r\n      this.LAST_UPDATED_BY1=result.LAST_UPDATED_BY;\r\n      this.CREATED_DT1=result.CREATED_DT;\r\n      this.LAST_UPDATED_DT1=result.LAST_UPDATED_DT;\r\n      this.BATCH1=result.BATCH;\r\n      this.ALIAS1=result.ALIAS;\r\n      this.LEVEL_NO1 = result.LEVEL_NO;\r\n\r\n      this._cache_contract ={\r\n          ISNEWCONTRACT : false,\r\n          CONTRACT_STATUS : result.CONTRACT_STATUS,\r\n          ISSAVE : true,\r\n      };\r\n\r\n      $('#dtPicker1').val(this.CONTRACT_START_DT1);\r\n      $('#dtPicker2').val(this.CONTRACT_END_DT1);\r\n\r\n      this._disableCreateContract = false;\r\n      this._disableEditContract = this.CONTRACT_STATUS1!=\"ACTIVE\";\r\n      this._disableCancelContract=false;\r\n      this._disableRefreshContract=false;\r\n      this._disableSaveContract=false;\r\n      this._disablePrintContract=false;\r\n      this.menuNameShow =false;\r\n      this.menuAliasShow=false;\r\n    });\r\n  }\r\n}\r\n","import {getLookups} from 'masterfiles';\r\nimport {MultiObserver} from 'multi-observer';\r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from 'helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';\r\nimport {EntityManager, EntityQuery} from 'entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {cache_obj} from 'cache_obj';\r\nimport { DialogController } from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\r\nimport { cache_contract } from 'ppid/contract/cache_contract';\r\n\r\n@inject(cache_contract, MultiObserver,ObserverLocator,Element,cache_obj,DialogController)\r\n\r\nexport class contract_search {\r\n  //items = [];\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArrayLength=0;\r\n\tvarFilterArray = [];\r\n\tcurrPredicate=null;\r\n\t_cache_obj;\r\n\t_cache_contract;\r\n\tlstPredicates=[];\r\n\tcontroller=null;\r\n  varGlobaIndivWithNps=[];\r\n\r\n  constructor(cache_contract, multiObserver,observerLocator,Element,cache_obj,controller) {\r\n    this.controller=controller;\r\n\t\t//this._dispatcher=Dispatcher;\r\n\t\tthis._cache_obj=cache_obj;\r\n\t\tthis.observerLocator=observerLocator;\r\n\t\tthis._cache_contract= cache_contract;\r\n\r\n\t\tvar personnel;\r\n\r\n\t\tif (this._cache_obj.USER.LEVEL_NO==3)\r\n\t\t{\r\n\t\t\tpersonnel = getLookups().GLOBAL_INDIV_WITH_ALIAS;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tpersonnel = getLookups().GLOBAL_INDIV_MSTR;\r\n\t\t}\r\n\r\n    var getContractList = EntityQuery().from('NPS_CONTRACT_HDR_TRX').where('LEVEL_NO','==', this._cache_obj.USER.LEVEL_NO);\r\n    EntityManager().executeQuery(getContractList).then((success) => {\r\n\t\t\tsuccess.results.forEach((result) =>{\r\n\t\t\t\tvar varCheck = personnel.find((all)=>all.GLOBAL_INDIV_ID==result.GLOBAL_ID);\r\n\t\t\t\tif (varCheck !== undefined)\r\n\t      {\r\n\t\t\t\t\tvar contract = result;\r\n\t\t\t\t\tthis.varGlobaIndivWithNps.push({\r\n\t\t\t\t\t\tCONTRACT_HDR_ID: contract.CONTRACT_HDR_ID,\r\n\t\t\t\t\t\tGLOBAL_ID: contract.GLOBAL_ID,\r\n\t\t\t\t\t\tLAST_NAME: varCheck.LAST_NAME,\r\n\t\t\t\t\t\tGIVEN_NAME: varCheck.GIVEN_NAME,\r\n\t\t\t\t\t\tMIDDLE_NAME: varCheck.MIDDLE_NAME,\r\n\t\t\t\t\t\tCONTRACT_STATUS: contract.CONTRACT_STATUS\r\n\t\t\t\t\t});\r\n\t      }\r\n\t\t\t});\r\n    });\r\n\r\n    multiObserver.observe(\r\n\t\t\t[\r\n\t\t\t[this, '_bGLOBAL_ID'],\r\n\t\t\t[this, '_bLAST_NAME'],\r\n\t\t\t[this, '_bGIVEN_NAME'],\r\n\t\t\t[this, '_bMIDDLE_NAME'],\r\n      [this, '_bCONTRACT_STATUS']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n  }\r\n\r\n  fnManualFilter(tmpVar)\r\n  {\r\n    this.lstPredicates=[];\r\n\r\n    _.each(this._rCONTRACT_TITLE.querySelectorAll('input'), all => {\r\n      var varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\r\n      if(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\")\r\n        if(tmpVar.length>0)\r\n        {\r\n          tmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n        }\r\n      });\r\n\r\n    return tmpVar;\r\n  }\r\n\r\n\r\n  onSpeculateProp(newValue, oldValue) {\r\n\r\n    var varValuesHasChanged=false;\r\n    //check if inputs has value else return;\r\n    _.each(this._rCONTRACT_TITLE.querySelectorAll('input'), all => {\r\n      var varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n      if(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n      {\r\n        varValuesHasChanged=true;\r\n      }\r\n    });\r\n\r\n    if(!varValuesHasChanged) return;\r\n\r\n    if(this.varFilterArray.length==0)\r\n    {\r\n\t   \t_.each(this.varGlobaIndivWithNps, (all) => {\r\n      \tthis.varFilterArray.push({\r\n\t\t\t\t\tCONTRACT_HDR_ID: all.CONTRACT_HDR_ID,\r\n          GLOBAL_ID: all.GLOBAL_ID,\r\n          LAST_NAME: all.LAST_NAME,\r\n          GIVEN_NAME: all.GIVEN_NAME,\r\n          MIDDLE_NAME: all.MIDDLE_NAME,\r\n          CONTRACT_STATUS: all.CONTRACT_STATUS\r\n        });\r\n      });\r\n    }\r\n    var tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\r\n\r\n    //if has existing results, use it, else, query to server\r\n    if(tmpVar.length>0)\r\n    {\r\n      var tmpVarNew=_.sortBy(tmpVar, 'LAST_NAME','GIVEN_NAME', 'MIDDLE_NAME'); //.reverse();\r\n      this.varFilterArray = tmpVarNew;\r\n      this.varFilterArrayLength=this.varFilterArray.length;\r\n      return;\r\n    }\r\n    else {\r\n        this.varFilterArray=[];\r\n    }\r\n  }\r\n\r\n  selectedContract(item) {\r\n\t\tthis._cache_obj.OBSERVERS.contract_dialog.forEach((all)=>{\r\n\t\t\tall(item.CONTRACT_HDR_ID);\r\n\t\t});\r\n\r\n    this.controller.ok();\r\n  }\r\n\r\n  fnKeyup(evt,item){\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis.selectedContract(this.varFilterArray[0]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import {inject,ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {getLookups} from '../.././masterfiles';\r\nimport breeze from 'breeze-client';\r\nimport {EntityManager, EntityQuery} from '../../entity-manager-factory';\r\nimport {getFilter} from '../../helpers';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport toastr from \"toastr\";\r\n\r\n@inject(MultiObserver,DialogController,ObserverLocator, obj_personnel, toastr)\r\nexport class add_member{\r\n\r\n\tobj_personnel=null;\r\n\tvarFilterArrayLength=0;\r\n\tvarFilterArray=[];\r\n\tvarToBeAdded=[];\r\n\tvarMembers=[];\r\n\tlstPredicates=[];\r\n\tcurrPredicate=null;\r\n\tobserverLocator=null;\r\n\tconstructor(multiObserver,controller, observerLocator, obj_personnel, toastr){\r\n\t\tthis.controller = controller;\r\n\t\tthis.observerLocator = observerLocator;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\t\r\n\t\tmultiObserver.observe([\r\n\t\t\t[this, \"_bglobal_indiv_id\"],\r\n\t\t\t//[this, \"_btin\"],\r\n\t\t\t//[this, \"_bgroup\"],\r\n\t\t\t[this, \"_blast_name\"],\r\n\t\t\t[this, \"_bfirst_name\"],\r\n\t\t\t[this, \"_bnickname\"]\r\n\t\t\t//[this, \"_bproject_name\"],\r\n\t\t\t//[this, \"_bcountry\"]\r\n\t\t], (newValue, oldValue)=> this.onSpeculateProp(newValue, oldValue));\r\n\t}\r\n\r\n\tactivate(members){\r\n\t\tthis.varMembers = members;\r\n\t\t// console.log(\"displaying members:\"); \r\n\t\t// console.log(members);\r\n\t}\r\n\r\n\tfnManualFilter(tmpVar)\r\n\t{\t\t\r\n\t\tthis.lstPredicates = [];\r\n\t\t//_rppid_queries\r\n\t\t_.each(this._rppid_queries.querySelectorAll('input'), all=> {\t\t\t\t\t\t\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\")\r\n\t\t\t{\r\n\t\t\t\tif((varOb.propertyName.indexOf('global_indiv_id')>-1) /*|| (varOb.propertyName.indexOf('tin')>-1 && varOb.getValue().length>=15)*/)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(varOb.getValue().length>=17)\r\n\t\t\t\t\t\tthis.lstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b','').toUpperCase(), \"==\", varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t\telse if(!(varOb.propertyName.indexOf('global_indiv_id')>-1))\r\n\t\t\t\t{\t\t\t\t\t\r\n\t\t\t\t\tthis.lstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b','').toUpperCase().replace('FIRST_NAME','GIVEN_NAME').replace('NICKNAME','ALIAS'), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t} \r\n\t\t\t\t\r\n\t\t\t\tif(tmpVar.length>0)\r\n\t\t\t\t{\r\n\t\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn tmpVar;\r\n\t}\r\n\t\r\n\tonSpeculateProp(newValue, oldValue)\r\n\t{\r\n\t\tvar varValuesHasChanged=false;\r\n\t\t//check if inputs has value else return;\r\n\t\t_.each(this._rppid_queries.querySelectorAll('input'), all => {\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n\t\t\t{\t\r\n\t\t\t\tvarValuesHasChanged=true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tif(!varValuesHasChanged) return;\t\t\r\n\t\t\r\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\t\t\r\n\t\tif(tmpVar.length>0){\t\t\t\r\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'GLOBAL_INDIV_ID').reverse();\r\n\t\t\tthis.varFilterArray = tmpVarNew;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(this.lstPredicates.length==0)\r\n\t\t\treturn;\r\n\r\n\t\tthis.currPredicate=this.lstPredicates;\t\t\r\n\t\tsetTimeout((a)=>{\r\n\t\t\tif(a!==this.currPredicate)\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\tvar _query = EntityQuery().from('GLOBAL_INDIV_MSTR').where(breeze.Predicate.and(this.currPredicate))\r\n\t\t\t//.expand('GLOBAL_GRP_MSTR')\r\n\t\t\t.orderBy('GIVEN_NAME')\r\n\t\t\t.select('GLOBAL_INDIV_ID,GIVEN_NAME,LAST_NAME,ALIAS');\r\n\t\t\tEntityManager().executeQuery(_query).then(\r\n\t\t\t(success)=>{\r\n\t\t\t\ttmpVar=[];\r\n\t\t\t\t_.each(success.results, (all)=>{\r\n\t\t\t\t\t//console.log(all.GLOBAL_INDIV_ID);\r\n\r\n\t\t\t\t\tvar alreadyExist = this.varMembers.some((x)=>x.global_indiv_id == all.GLOBAL_INDIV_ID);\r\n\t\t\t\t\tif(alreadyExist)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\talreadyExist = this.varToBeAdded.some((x)=>x.GLOBAL_INDIV_ID == all.GLOBAL_INDIV_ID);\r\n\t\t\t\t\tif(alreadyExist)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\ttmpVar.push({\r\n\t\t\t\t\t\tGLOBAL_INDIV_ID: all.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\t//TIN: all.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\t// GROUP: \"Test group\", \r\n\t\t\t\t\t\tLAST_NAME: all.LAST_NAME,\r\n\t\t\t\t\t\tFIRST_NAME: all.GIVEN_NAME,\r\n\t\t\t\t\t\tNICK_NAME: all.ALIAS,\r\n\t\t\t\t\t\t//PROJECT_NAME: \"Coming soon.\",\r\n\t\t\t\t\t\t//COUNTRY: \"PHILIPPINES\"\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\t\t\t\t// console.log(this.varFilterArrayLength);\r\n\t\t\t}, \r\n\t\t\t(failed)=>{\r\n\t\t\t\t//console.log(failed);\r\n\t\t\t\ttoastr.error(failed, \"Failed loading Personnel Info\");\t\t\t\t\r\n\t\t\t})\r\n\t\t\t\r\n\t\t}, 500, this.currPredicate);\r\n\t}\r\n\t\r\n\tselectedPersonnel(item)\r\n\t{\r\n\t\t// console.log(item);\r\n\t\tthis.varToBeAdded.push(item);\r\n\t\tthis.varFilterArray = this.varFilterArray.filter(function(element){\r\n\t\t\treturn element.GLOBAL_INDIV_ID !== item.GLOBAL_INDIV_ID;\r\n\t\t});\r\n\t\t// console.log(this.controller);\r\n\t}\r\n\r\n\tremovePersonnel(item){\r\n\t\tthis.varToBeAdded = this.varToBeAdded.filter(function(element){\r\n\t\t\treturn element.GLOBAL_INDIV_ID !== item.GLOBAL_INDIV_ID;\r\n\t\t});\r\n\t}\r\n\t\r\n\tfnKeyup(evt,item){\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis.selectedPersonnel(this.varFilterArray[0]);\r\n\t\t\t\t//this.selectedBudget(this.varFilterArray[0]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tbtnAdd(){\r\n\t\tthis.controller.ok(this.varToBeAdded);\r\n\t}\r\n}","import {inject,ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {DialogController} from 'aurelia-dialog';\r\n\r\n@inject(DialogController)\r\nexport class DialogBox\r\n{\r\n\tmessage=\"Sample Message\";\r\n\ttitle=\"Sample Title\";\r\n\tconstructor(controller){\r\n\t\tthis.controller = controller;\t\r\n\t}\r\n\r\n\tactivate(info){\r\n\t\tthis.message = info.message;\r\n\t\tthis.title = info.title;\t\t\r\n\t}\r\n}","import {inject,ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {getLookups} from '../.././masterfiles';\r\nimport breeze from 'breeze-client';\r\nimport {EntityManager, EntityQuery} from '../../entity-manager-factory';\r\nimport {getFilter} from '../../helpers';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport toastr from \"toastr\";\r\nimport settings from 'settings';\r\n// import {DialogService} from 'aurelia-dialog'\r\n// import {DialogBox} from \"./DialogBox\";\r\n\r\n@inject(MultiObserver,DialogController,ObserverLocator, obj_personnel, toastr)\r\nexport class group_search{\r\n\t\r\n\tobj_personnel=null;\r\n\tvarFilterArrayLength=0;\r\n\tvarFilterArray=[];\r\n\tlstPredicates=[];\r\n\tcurrPredicate=null;\r\n\tobserverLocator=null;\r\n\tconstructor(multiObserver,controller, observerLocator, obj_personnel, toastr){\r\n\t\tthis.controller = controller;\r\n\t\tthis.observerLocator = observerLocator;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\t// this.DialogService = DialogService;\r\n\r\n\t\tmultiObserver.observe([\r\n\t\t\t[this, \"_bglobal_indiv_id\"],\r\n\t\t\t[this, \"_bgroup_name\"],\r\n\t\t\t[this, \"_bstatus_cd\"]\r\n\t\t], (newValue, oldValue)=> this.onSpeculateProp(newValue, oldValue));\r\n\t}\r\n\r\n\tfnManualFilter(tmpVar)\r\n\t{\t\t\r\n\t\tthis.lstPredicates = [];\r\n\t\t_.each(this._rppid_queries.querySelectorAll('input'), all=> {\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\")\r\n\t\t\t{\r\n\t\t\t\tif((varOb.propertyName.indexOf('global_grp_id')>-1) /*|| (varOb.propertyName.indexOf('tin')>-1 && varOb.getValue().length>=15)*/)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(varOb.getValue().length==17)\r\n\t\t\t\t\t\tthis.lstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b','').toUpperCase(), \"==\", varOb.getValue().toUpperCase()));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace(\"_b\",'').toUpperCase(), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(tmpVar.length>0)\r\n\t\t\t\t{\r\n\t\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn tmpVar;\r\n\t}\r\n\r\n\tonSpeculateProp(newValue, oldValue)\r\n\t{\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar varValuesHasChanged=false;\r\n\t\t//check if inputs has value else return;\r\n\t\t_.each(this._rppid_queries.querySelectorAll('input'), all => {\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n\t\t\t{\t\r\n\t\t\t\tvarValuesHasChanged=true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tif(!varValuesHasChanged) return;\r\n\r\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\r\n\t\tif(tmpVar.length>0){\t\t\t\r\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'GLOBAL_INDIV_ID').reverse();\r\n\t\t\tthis.varFilterArray = tmpVarNew;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(this.lstPredicates.length==0)\r\n\t\t\treturn;\r\n\r\n\t\tthis.currPredicate=this.lstPredicates;\t\t\r\n\t\tsetTimeout((a)=>{\r\n\t\t\tif(a!==this.currPredicate)\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\tvar _query = EntityQuery().from('GLOBAL_GRP_MSTR').where(breeze.Predicate.and(this.currPredicate))\r\n\t\t\t// .expand('GLOBAL_GRP_MSTR')\r\n\t\t\t.orderBy('GROUP_NAME')\r\n\t\t\t.select('GLOBAL_GRP_ID,GROUP_NAME');\r\n\t\t\t;\r\n\t\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\t\t// console.log(success.results);\t\r\n\t\t\t\ttmpVar=[];\r\n\r\n\t\t\t\t_.each(success.results, (all)=>{\r\n\t\t\t\t\ttmpVar.push({\r\n\t\t\t\t\t\tGLOBAL_GRP_ID: all.GLOBAL_GRP_ID,\r\n\t\t\t\t\t\tGROUP_NAME: all.GROUP_NAME\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\r\n\t\t\t\t\r\n\t\t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\t\t// console.log(this.varFilterArray);\r\n\t\t\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t}, \r\n\t\t\t(failed)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t//console.log(failed);\r\n\t\t\t\ttoastr.error(failed, \"Failed loading Personnel Info\");\t\t\t\t\r\n\t\t\t})\r\n\t\t\t\r\n\t\t}, 500, this.currPredicate);\r\n\r\n\t}\r\n\r\n\tselectedGroup(item)\r\n\t{\r\n\t\tthis.obj_personnel.OBSERVERS.group_dialog.forEach((all)=>{\r\n\t\t\tall(item.GLOBAL_GRP_ID);\r\n\t\t});\r\n\t\tthis.controller.ok(item.GLOBAL_GRP_ID);\r\n\t}\r\n\r\n\tfnKeyup(evt,item){\t\t\r\n\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis.selectedGroup(this.varFilterArray[0]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\t\r\n\r\n}","export class photo_list{\r\n\tconstructor(){\r\n\t\r\n\t}\r\n}","import {inject,ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {getLookups} from '../.././masterfiles';\r\nimport breeze from 'breeze-client';\r\nimport {EntityManager, EntityQuery} from '../../entity-manager-factory';\r\nimport {getFilter} from '../../helpers';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport toastr from \"toastr\";\r\n\r\n@inject(MultiObserver,DialogController,ObserverLocator, obj_personnel, toastr)\r\nexport class ppid_search\r\n{\r\n\tobj_personnel=null;\r\n\tvarFilterArrayLength=0;\r\n\tvarFilterArray=[];\r\n\tlstPredicates=[];\r\n\tcurrPredicate=null;\r\n\tobserverLocator=null;\r\n\tconstructor(multiObserver,controller, observerLocator, obj_personnel, toastr){\r\n\t\tthis.controller = controller;\r\n\t\tthis.observerLocator = observerLocator;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\t\r\n\t\tmultiObserver.observe([\r\n\t\t\t[this, \"_bglobal_indiv_id\"],\r\n\t\t\t//[this, \"_btin\"],\r\n\t\t\t//[this, \"_bgroup\"],\r\n\t\t\t[this, \"_blast_name\"],\r\n\t\t\t[this, \"_bfirst_name\"],\r\n\t\t\t[this, \"_bnickname\"]\r\n\t\t\t//[this, \"_bproject_name\"],\r\n\t\t\t//[this, \"_bcountry\"]\r\n\t\t], (newValue, oldValue)=> this.onSpeculateProp(newValue, oldValue));\r\n\t\t\r\n\t}\r\n\t\r\n\tfnManualFilter(tmpVar)\r\n\t{\t\t\r\n\t\tthis.lstPredicates = [];\r\n\t\t//_rppid_queries\r\n\t\t_.each(this._rppid_queries.querySelectorAll('input'), all=> {\t\t\t\t\t\t\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\")\r\n\t\t\t{\r\n\t\t\t\tif((varOb.propertyName.indexOf('global_indiv_id')>-1) /*|| (varOb.propertyName.indexOf('tin')>-1 && varOb.getValue().length>=15)*/)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(varOb.getValue().length>=17)\r\n\t\t\t\t\t\tthis.lstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b','').toUpperCase(), \"==\", varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t\telse if(!(varOb.propertyName.indexOf('global_indiv_id')>-1))\r\n\t\t\t\t{\t\t\t\t\t\r\n\t\t\t\t\tthis.lstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b','').toUpperCase().replace('FIRST_NAME','GIVEN_NAME').replace('NICKNAME','ALIAS'), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t} \r\n\t\t\t\t\r\n\t\t\t\tif(tmpVar.length>0)\r\n\t\t\t\t{\r\n\t\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn tmpVar;\r\n\t}\r\n\t\r\n\tonSpeculateProp(newValue, oldValue)\r\n\t{\r\n\t\tvar varValuesHasChanged=false;\r\n\t\t//check if inputs has value else return;\r\n\t\t_.each(this._rppid_queries.querySelectorAll('input'), all => {\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n\t\t\t{\t\r\n\t\t\t\tvarValuesHasChanged=true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tif(!varValuesHasChanged) return;\t\t\r\n\t\t\r\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\t\t\r\n\t\tif(tmpVar.length>0){\t\t\t\r\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'GLOBAL_INDIV_ID').reverse();\r\n\t\t\tthis.varFilterArray = tmpVarNew;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(this.lstPredicates.length==0)\r\n\t\t\treturn;\r\n\r\n\t\tthis.currPredicate=this.lstPredicates;\t\t\r\n\t\tsetTimeout((a)=>{\r\n\t\t\tif(a!==this.currPredicate)\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\tvar _query = EntityQuery().from('GLOBAL_INDIV_MSTR').where(breeze.Predicate.and(this.currPredicate))\r\n\t\t\t//.expand('GLOBAL_GRP_MSTR')\r\n\t\t\t.orderBy('GIVEN_NAME')\r\n\t\t\t.select('GLOBAL_INDIV_ID,GIVEN_NAME,LAST_NAME,ALIAS');\r\n\t\t\tEntityManager().executeQuery(_query).then(\r\n\t\t\t(success)=>{\r\n\t\t\t\ttmpVar=[];\r\n\t\t\t\t_.each(success.results, (all)=>{\r\n\t\t\t\t\t//console.log(all.GLOBAL_INDIV_ID);\r\n\t\t\t\t\ttmpVar.push({\r\n\t\t\t\t\t\tGLOBAL_INDIV_ID: all.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\t//TIN: all.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\t// GROUP: \"Test group\", \r\n\t\t\t\t\t\tLAST_NAME: all.LAST_NAME,\r\n\t\t\t\t\t\tFIRST_NAME: all.GIVEN_NAME,\r\n\t\t\t\t\t\tNICK_NAME: all.ALIAS,\r\n\t\t\t\t\t\t//PROJECT_NAME: \"Coming soon.\",\r\n\t\t\t\t\t\t//COUNTRY: \"PHILIPPINES\"\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\t\t\t}, \r\n\t\t\t(failed)=>{\r\n\t\t\t\t//console.log(failed);\r\n\t\t\t\ttoastr.error(failed, \"Failed loading Personnel Info\");\t\t\t\t\r\n\t\t\t})\r\n\t\t\t\r\n\t\t}, 500, this.currPredicate);\r\n\t}\r\n\t\r\n\tselectedPersonnel(item)\r\n\t{\r\n\t\tthis.obj_personnel.OBSERVERS.ppid_dialog.forEach((all)=>{\r\n\t\t\tall(item.GLOBAL_INDIV_ID);\r\n\t\t});\r\n\t\tthis.controller.ok();\r\n\t}\r\n\t\r\n\tfnKeyup(evt,item){\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis.selectedPersonnel(this.varFilterArray[0]);\r\n\t\t\t\t//this.selectedBudget(this.varFilterArray[0]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\t\r\n\t\r\n\t\r\n}","export class cache_talent{\r\n  //General Info\r\n  _NAME;\r\n  _AGE;\r\n  _CITIZENSHIP;\r\n  _RELIGION;\r\n  _CIVIL_STATUS;\r\n  _GENDER;\r\n  _COUNTRY;\r\n  _LOCATION;\r\n  _TALENT_SUPPLIER;\r\n  _TALENT_HANDLER;\r\n  _INTEREST;\r\n  _SKILL_TALENT;\r\n\r\n  //Characteristics\r\n  _HEIGHT;\r\n  _WEIGHT;\r\n  _BUILT;\r\n  _EYE_COLOR;\r\n  _HAIR_COLOR;\r\n  _SKINTONE;\r\n  _VITAL_STATISTICS;\r\n  _SPECIFIC_CHAR;\r\n  _TALENT_TYPE;\r\n\r\n  //For select options\r\n  _CITIZENSHIP_POP=false;\r\n  _RELIGION_POP=false;\r\n  _CIVIL_STATUS_POP=false;\r\n  _GENDER_POP=false;\r\n  _COUNTRY_POP=false;\r\n  _LOCATION_POP=false;\r\n  _INTEREST_POP=false;\r\n  _SKILL_TALENT_POP=false;\r\n\r\n\r\n  //General Info OR/Like any of/And\r\n  _NAME_AND_OR=2;\r\n  _AGE_AND_OR=0;\r\n  _CITIZENSHIP_AND_OR=2;\r\n  _RELIGION_AND_OR=2;\r\n  _CIVIL_STATUS_AND_OR=2;\r\n  _GENDER_AND_OR=2;\r\n  _COUNTRY_AND_OR=2;\r\n  _LOCATION_AND_OR=2;\r\n  _TALENT_SUPPLIER_AND_OR=2;\r\n  _TALENT_HANDLER_AND_OR=2;\r\n  _INTEREST_AND_OR=2;\r\n  _SKILL_TALENT_AND_OR=2;\r\n\r\n  //Characteristics Info OR/Like any of/And\r\n  _HEIGHT_AND_OR=2;\r\n  _WEIGHT_AND_OR=2;\r\n  _BUILT_AND_OR=2;\r\n  _EYE_COLOR_AND_OR=2;\r\n  _HAIR_COLOR_AND_OR=2;\r\n  _SKINTONE_AND_OR=2;\r\n  _VITAL_STATISTICS_AND_OR=2;\r\n  _SPECIFIC_CHAR_AND_OR=2;\r\n  _TALENT_TYPE_AND_OR=2;\r\n\r\n  //General Info radio button\r\n  _NAME_RADIO_BUTTON=1;\r\n  _AGE_RADIO_BUTTON=1;\r\n  _CITIZENSHIP_RADIO_BUTTON=1;\r\n  _RELIGION_RADIO_BUTTON=1;\r\n  _CIVIL_STATUS_RADIO_BUTTON=1;\r\n  _GENDER_RADIO_BUTTON=1;\r\n  _COUNTRY_RADIO_BUTTON=1;\r\n  _LOCATION_RADIO_BUTTON=1;\r\n  _TALENT_SUPPLIER_RADIO_BUTTON=1;\r\n  _TALENT_HANDLER_RADIO_BUTTON=1;\r\n  _INTEREST_RADIO_BUTTON=1;\r\n  _SKILL_TALENT_RADIO_BUTTON=1;\r\n\r\n  //Characteristics Info radio button\r\n  _HEIGHT_RADIO_BUTTON=1;\r\n  _WEIGHT_RADIO_BUTTON=1;\r\n  _BUILT_RADIO_BUTTON=1;\r\n  _EYE_COLOR_RADIO_BUTTON=1;\r\n  _HAIR_COLOR_RADIO_BUTTON=1;\r\n  _SKINTONE_RADIO_BUTTON=1;\r\n  _VITAL_STATISTICS_RADIO_BUTTON=1;\r\n  _SPECIFIC_CHAR_RADIO_BUTTON=1;\r\n  _TALENT_TYPE_RADIO_BUTTON=1;\r\n\r\n\r\n\r\n  _HAS_FIRED = false;\r\n\r\n  //Array\r\n  _CITIZENSHIP_ARR = [];\r\n  _RELIGION_ARR = [];\r\n  _CIVIL_STATUS_ARR = [];\r\n  _GENDER_ARR = [{ref: 'M', desc: 'MALE'}, {ref:'F', desc:'FEMALE'}];\r\n  _COUNTRY_ARR = [];\r\n  _LOCATION_ARR = [];\r\n  _INTEREST_ARR = [];\r\n  _SKILL_TALENT_ARR = [];\r\n\r\n\r\n  QUERY_VAL = [];\r\n\r\n  PARTTIME_MSTR;\r\n  CITIZESHIP_MSTR;\r\n  ALIAS_MSTR;\r\n  INDIVIDUAL_MSTR;\r\n  GROUP_MSTR;\r\n  COUNTRY_MSTR;\r\n  INTEREST_MSTR;\r\n  SKILL_TALENT_MSTR;\r\n  CHARACTERISTICS_MSTR;\r\n  ALL_MSTR=[];\r\n}\r\n","export class obj_personnel\r\n{\r\n\tglobal_indiv_id=\"\";\t\r\n\tediting_status=\"\";\r\n    HEADER = {\r\n    \tcitizenship:[],\r\n    \tgroup:[]\r\n    };\r\n\tCONTACT={\r\n\t\tstatus:\"\",\r\n\t\tmodelAddress:{},\r\n\t\tstatusContact:\"Add\",\r\n\t\tmodelContact:{},\r\n\t\tmodelInternet:{},\r\n\t\taddress:[],\r\n\t\tcontact:[],\r\n\t\temail:[],\r\n\t\twebsite:[]\r\n\t};\r\n\tEDUCATIONAL_ACHIEVEMENT={\r\n\t\tstatus:\"\",\r\n\t\tmodel:{},\r\n\t\tlist:[]\r\n\t};\r\n\tCHARACTERISTIC=[];\r\n\tSKILLS=[];\r\n\tLANGUAGE_DIALECT=[];\r\n\tMEDICAL_RECORD={\r\n\t\tmodel:{},\r\n\t\tlist:[]\r\n\t};\r\n\tRELATIVE={\r\n\t\tparents:{\r\n\t\t\tmother:{},\r\n\t\t\tfather:{}\r\n\t\t},\r\n\t\tsiblings:{\r\n\t\t\tmodel:{},\r\n\t\t\tlist:[]\r\n\t\t},\r\n\t\tspouse:{},\r\n\t\temergency_contact:{\r\n\t\t\tmodel:{},\r\n\t\t\tlist:[]\r\n\t\t}\r\n\t};\r\n\tWORK_EXPERIENCE={\r\n\t\tmodel:{},\r\n\t\tlist:[]\r\n\t};\r\n\tAWARDS=[];\r\n\tSEMINARS=[];\r\n\tGOVERNMENT_INFO={\r\n\t\tmodelTaxAffidavit:{},\r\n\t\tmodelPermit:{},\r\n\t\ttax_affidavit:[],\r\n\t\tpermits:[]\r\n\t};\r\n\tGOVERNMENT_EXAM={\r\n\t\tmodel:{},\r\n\t\tlist:[]\r\n\t};\r\n\tCRIMINAL_RECORD={\r\n\t\tcivil:{\r\n\t\t\tmodel:{},\r\n\t\t\tlist:[]\r\n\t\t},\r\n\t\tadministrative:{\r\n\t\t\tmodel:{},\r\n\t\t\tlist:[]\r\n\t\t}\r\n\t};\r\n\tCOMPANY_SPECIFIC={\r\n\t\tmodel:{\r\n\t\t\tpersonnel_bank:{}\r\n\t\t},\r\n\t\tlist:[]\r\n\t};\r\n\tENDORSEMENT=[];\r\n\tIMAGE_BRANDING=[];\r\n\tQUESTION_ANSWER=[];\r\n\tCHARACTER_REF={\r\n\t\tmodel:{},\r\n\t\tlist:[]\r\n\t};\r\n    USER={};\r\n\tOBSERVERS={\r\n\t\tppid_dialog:[],\r\n\t\ttab_changed:[],\r\n\t\tclear_ppid:[],\r\n\t\tclear_log:[],\r\n\t\tclear_login_modal:[],\r\n\t\tmaintab_contact_clicked:[],\r\n\t\tmaintab_education_clicked:[],\t\t\r\n\t\tcompany_tab_changed:[],\r\n\t\tgovinfo_tab_changed:[],\r\n\t\trelative_tab_changed:[],\r\n\r\n\t};\r\n\r\n\t//Dropdown\r\n\tSTATUS=[];\r\n\tCIVIL_STATUS=[];\r\n\tCITIZENSHIP=[];\r\n\tRELIGION=[];\r\n\tCOUNTRY=[];\r\n\tREGION=[];\r\n\tGROUP=[];\r\n\tLOCATIONS=[];\r\n\tCONTACT_TYPE=[];\r\n\tLEVEL=[];\r\n\tYEAR=[];\r\n\tSCHOOLS=[];\r\n\tLANGUAGE=[];\r\n\tPOSITION=[];\r\n\tAWARD=[];\r\n\tTRAINING=[];\r\n\tTAX_EXEMPT=[];\r\n\tINPUT_TAX=[];\r\n\tPERMIT=[];\r\n\tVAT_STAT=[];\r\n\tEXAM=[];\r\n\tCASE_STAT=[];\r\n\tVIOLATION=[];\r\n\tPROFESSIONAL_TYPE=[];\r\n\tCESSATION=[];\r\n\tTARGET_MARKET=[];\r\n\tCOMPANY=[];\r\n\tDIVISION=[];\r\n\tLOCATIONS_RNG=[];\r\n\tCATEGORY=[];\r\n\tJOB_GROUP=[];\r\n\tJOB=[];\r\n\tPAYROLL_GROUP=[];\r\n\tBANK=[];\r\n\tPROVINCE=[];\r\n\tRELATIONSHIP =[];\r\n\tINACTIVE_REASON = [];\r\n\r\n\r\n\t\r\n\tconstructor(){\r\n\t\r\n\t}\r\n}","import {checkCookie,setCookie,removeCookie} from '.././helpers';\r\nimport toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from './obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {ppid_search} from \"./modals/ppid_search\";\r\nimport {EntityManager,EntityQuery} from '../entity-manager-factory'; \r\nimport {getLookups} from '../masterfiles';\r\nimport settings from 'settings';\r\n\r\n@inject(DialogService, obj_personnel)\r\nexport class ppid\r\n{\r\n\tobj_personnel = null;\r\n\tglobal_indiv_id=\"\";\r\n\t\r\n\t\r\n\tconstructor(dialogService, obj_personnel){\r\n\t\tthis.dialogService=dialogService;\r\n\t\tthis.obj_personnel = obj_personnel;\t\t\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.ppid_dialog.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_contact_clicked.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_education_clicked.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.govinfo_tab_changed.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.company_tab_changed.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.length=0;\r\n\t\tthis.obj_personnel.global_indiv_id = \"\";\r\n\t\tthis.obj_personnel.HEADER = {\r\n    \t\tcitizenship:[],\r\n    \t\tgroup:[]\r\n    \t};\r\n\t\tthis.LoadDropdown();\r\n\r\n\t\tthis.LoginPassed(this.obj_personnel.USER);\r\n\t}\r\n\r\n\tLoadDropdown()\r\n\t{\r\n\r\n        settings.isNavigating = true;\r\n\t\t// var _query = EntityQuery().from('GLOBAL_GRP_MSTR')\r\n\t\t// \t\t.orderBy('GROUP_NAME')\r\n\t\t// \t\t.select('GLOBAL_GRP_ID, GROUP_NAME');\r\n\t\t// EntityManager().executeQuery(_query).then((success)=>{\r\n\t\t// \tvar tmp=[];\r\n\t\t// \t_.each(success.results, (result)=>{\r\n\t\t// \t\ttmp.push({\r\n\t\t// \t\t\tvalue:result.GLOBAL_GRP_ID ,\r\n\t\t// \t\t\ttext:result.GROUP_NAME\r\n\t\t// \t\t});\r\n\t\t// \t});\r\n\t\t// \tthis.obj_personnel.GROUP = tmp;\r\n\t\t// },\r\n\t\t// (failed)=>{\r\n\t\t// \ttoastr.error(failed,'Error in loading group dropdown.');\r\n\t\t// });\r\n\t\tvar maxYear= new Date().getFullYear();\r\n\t\tvar leastYear = 1960;\r\n\t\tvar tmpYear=[];\r\n\t\tdo{\r\n\t\t\ttmpYear.push({\r\n\t\t\t\tvalue: leastYear,\r\n\t\t\t\ttext: leastYear\r\n\t\t\t});\r\n\t\t\tleastYear++;\r\n\t\t}while(leastYear<=maxYear);\r\n\t\tthis.obj_personnel.YEAR = tmpYear;\r\n\r\n\t\tif(getLookups() != null){\r\n\t\t\tthis.obj_personnel.LOCATIONS = getLookups().LOCATION_MSTR;\r\n\t\t\tthis.obj_personnel.LOCATIONS.shift(); //Remove \"[SELECT A VALUE]\" value\t\r\n\r\n\t\t\tthis.obj_personnel.CIVIL_STATUS.length=0;\r\n\t\t\tthis.obj_personnel.RELIGION.length=0;\r\n\t\t\tthis.obj_personnel.CITIZENSHIP.length=0;\r\n\t\t\tthis.obj_personnel.CONTACT_TYPE.length=0;\r\n\t\t\tthis.obj_personnel.LEVEL.length=0;\r\n\t\t\tthis.obj_personnel.LANGUAGE.length=0;\r\n\t\t\tthis.obj_personnel.STATUS.length=0;\r\n\t\t\tthis.obj_personnel.POSITION.length=0;\r\n\t\t\tthis.obj_personnel.AWARD.length=0;\r\n\t\t\tthis.obj_personnel.TRAINING.length=0;\r\n\t\t\tthis.obj_personnel.TAX_EXEMPT.length=0;\r\n\t\t\tthis.obj_personnel.INPUT_TAX.length=0;\r\n\t\t\tthis.obj_personnel.PERMIT.length=0;\r\n\t\t\tthis.obj_personnel.VAT_STAT.length=0;\r\n\t\t\tthis.obj_personnel.EXAM.length=0;\r\n\t\t\tthis.obj_personnel.CASE_STAT.length=0;\r\n\t\t\tthis.obj_personnel.VIOLATION.length=0;\r\n\t\t\tthis.obj_personnel.PROFESSIONAL_TYPE.length=0;\r\n\t\t\tthis.obj_personnel.CESSATION.length=0;\r\n\t\t\tthis.obj_personnel.TARGET_MARKET.length=0;\r\n\t\t\tthis.obj_personnel.INACTIVE_REASON.length=0;\r\n\r\n\t\t\tgetLookups().REFERENCE_CD_MSTR.forEach((item)=>{\r\n\t\t\t\tswitch(item.REF_GRP_CD){\r\n\t\t\t\t\tcase \"CIVIL_STATUS\": \tthis.obj_personnel.CIVIL_STATUS.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"RELIGION_CD\": \tthis.obj_personnel.RELIGION.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"CITIZENSHIP_CD\": \tthis.obj_personnel.CITIZENSHIP.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"CONTACT_TYPE_CD\": this.obj_personnel.CONTACT_TYPE.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"LEVEL_CD\": \tthis.obj_personnel.LEVEL.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"LANG_DIALECT_CD\":\tthis.obj_personnel.LANGUAGE.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"STATUS_CD\": \tthis.obj_personnel.STATUS.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"POSITION_CD\": this.obj_personnel.POSITION.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"AWARD_CD\": \tthis.obj_personnel.AWARD.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"TRNG_CD\": \tthis.obj_personnel.TRAINING.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"TAX_EXEMPT_CD\":\tthis.obj_personnel.TAX_EXEMPT.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"INPUT_TAX_CD\": \tthis.obj_personnel.INPUT_TAX.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"PERMIT_CD\": \tthis.obj_personnel.PERMIT.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"VAT_STAT_CD\": this.obj_personnel.VAT_STAT.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"EXAM_CD\": this.obj_personnel.EXAM.push({\r\n\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"CASE_STAT_CD\": \tthis.obj_personnel.CASE_STAT.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"VIOLATION_CD\": \tthis.obj_personnel.VIOLATION.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"PROFESSIONAL_TYPE_CD\": \tthis.obj_personnel.PROFESSIONAL_TYPE.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"CESSATION_CODE\": \tthis.obj_personnel.CESSATION.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"TARGET_MARKET_CD\": \tthis.obj_personnel.TARGET_MARKET.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"INACTIVE_REASON\": \tthis.obj_personnel.INACTIVE_REASON.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.GROUP.length=0;\r\n\t\t\tgetLookups().GLOBAL_GRP_MSTR.forEach((item)=>{\r\n\t\t\t\tthis.obj_personnel.GROUP.push({\r\n\t\t\t\t\tvalue: item.GLOBAL_GRP_ID,\r\n\t\t\t\t\ttext: item.GROUP_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.COMPANY.length=0;\r\n\t\t\tgetLookups().COMPANY_MSTR.forEach((item)=>{\r\n\t\t\t\tthis.obj_personnel.COMPANY.push({\r\n\t\t\t\t\tid: item.COMPANY_ID,\r\n\t\t\t\t\tvalue: item.COMPANY_CD,\r\n\t\t\t\t\ttext: item.COMPANY_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.COMPANY.shift();\r\n\r\n\t\t\t// this.obj_personnel.DIVISION.length=0;\r\n\t\t\t// getLookups().DIVISION_MSTR.forEach((item)=>{\r\n\t\t\t// \tthis.obj_personnel.DIVISION.push({\r\n\t\t\t// \t\tgroup: item.COMPANY_ID,\r\n\t\t\t// \t\tvalue: item.DIVISION_CD,\r\n\t\t\t// \t\ttext: item.DIVISION_NAME\r\n\t\t\t// \t});\r\n\t\t\t// });\r\n\r\n\t\t\t// order all\r\n\t\t\tthis.obj_personnel.GROUP.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.CIVIL_STATUS.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.RELIGION.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.CITIZENSHIP.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.CONTACT_TYPE.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.LEVEL.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.LANGUAGE.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.STATUS.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.POSITION.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.AWARD.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.TRAINING.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.PERMIT.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.TAX_EXEMPT.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.INPUT_TAX.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.EXAM.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.VIOLATION.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.PROFESSIONAL_TYPE.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.CESSATION.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.TARGET_MARKET.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.COMPANY.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.INACTIVE_REASON.sort(this.OrderByText);\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tvar _query = EntityQuery().from('COUNTRY_MSTR')\r\n\t\t\t\t.orderBy('COUNTRY_NAME')\r\n\t\t\t\t.select('COUNTRY_CD, COUNTRY_NAME');\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tvalue:result.COUNTRY_CD ,\r\n\t\t\t\t\ttext:result.COUNTRY_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.COUNTRY = tmp;\r\n\t\t},\r\n\t\t(failed)=>{\r\n\t\t\ttoastr.error(failed,'Error in loading country dropdown.');\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from('REGION_MSTR')\r\n\t\t\t\t .orderBy('REGION_DESC')\r\n\t\t\t\t .select('REGION_CD, REGION_DESC, COUNTRY_CD');\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tvalue: result.REGION_CD,\r\n\t\t\t\t\ttext: result.REGION_DESC,\r\n\t\t\t\t\tgroup: result.COUNTRY_CD\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.REGION = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed, 'Error in loading region dropdown.');\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"SCHOOL_MSTR\")\r\n\t\t\t\t.orderBy(\"SCHOOL_NAME\")\r\n\t\t\t\t.select(\"SCHOOL_CD, SCHOOL_NAME, SCHOOL_ADDR\");\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp = [];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tschool_cd: result.SCHOOL_CD,\r\n\t\t\t\t\tschool_name: result.SCHOOL_NAME,\r\n\t\t\t\t\tschool_addr: result.SCHOOL_ADDR\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.SCHOOLS = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed, \"Error in loading schools dropdown.\");\r\n\t\t\tconsole.log(failed);\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"RNG_LOCATION_MSTR\")\r\n\t\t\t\t .orderBy(\"LOCATION_NAME\");\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp = [];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tvalue: result.LOCATION_CD,\r\n\t\t\t\t\ttext: result.LOCATION_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.LOCATIONS_RNG = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed, \"Error in loading RNG Locations dropdown\");\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"PAYROLL_GRP_MSTR\")\r\n\t\t\t\t .orderBy(\"PAYROLL_GRP_DESC\");\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp = [];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tid: result.PAYROLL_GRP_ID,\t\t\t\t\t\r\n\t\t\t\t\tvalue: result.PAYROLL_GRP_CD,\r\n\t\t\t\t\ttext: result.PAYROLL_GRP_DESC\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.PAYROLL_GROUP = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed, \"Error in loading Payroll Group dropdown.\");\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"BANK_MSTR\")\r\n\t\t\t\t .orderBy(\"BANK_SHORT_NAME\");\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tid: result.BANK_ID,\r\n\t\t\t\t\tshort_nm: result.BANK_SHORT_NAME,\r\n\t\t\t\t\tbank_cd: result.BANK_CD,\r\n\t\t\t\t\tlong_nm: result.BANK_LONG_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.BANK = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed,\"Error in loading Bank dropdown\");\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"PROVINCE_MSTR\")\r\n\t\t\t\t.orderBy(\"PROVINCE_DESC\");\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(success.results, (r)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\ttext: r.PROVINCE_DESC,\r\n\t\t\t\t\tvalue: r.PROVINCE_CD,\r\n\t\t\t\t\tgroup: r.REGION_CD\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.PROVINCE = tmp;\r\n\t\t}, (error)=>{\r\n\t\t\ttoastr.error(error, \"Error in loading Province dropdown.\");\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"RELATIVE_MSTR\")\r\n\t\t\t\t.orderBy(\"RELATIVE_DESC\");\r\n\t\tEntityManager().executeQuery(_query).then((s)=>{\r\n\t\t\tvar tmp = [];\r\n\r\n\t\t\t_.each(s.results, (res)=>{\r\n\r\n\t\t\t\tvar relationship = {\r\n\t\t\t\t\tvalue: res.RELATIVE_CD,\r\n\t\t\t\t\ttext: res.RELATIVE_DESC,\r\n\t\t\t\t\tgroup: res.RELATIONSHIP_CD\r\n\t\t\t\t};\r\n\t\t\t\t// console.log(relationship);\r\n\t\t\t\ttmp.push(relationship);\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.RELATIONSHIP = tmp;\r\n\t\t\t// console.log(\"hello world!\");\r\n\t\t\t// console.log(tmp);\r\n\t\t});\r\n\r\n        settings.isNavigating = false;\r\n\r\n\t}\r\n\r\n\tOrderByText(a, b){\r\n\t\tif(a.text.toUpperCase() < b.text.toUpperCase())\r\n\t\t\treturn -1;\r\n\t\tif(a.text.toUpperCase() > b.text.toUpperCase())\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\t\r\n\tchangeTab(tabNumber)\r\n\t{\r\n\t\tif(this.obj_personnel.global_indiv_id == undefined || this.obj_personnel.global_indiv_id == null || this.obj_personnel.global_indiv_id.length==0)\r\n\t\t\treturn;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.forEach((all)=>{\r\n\t\t\tall(tabNumber, this.obj_personnel.global_indiv_id);\r\n\t\t});\r\n\t}\t\r\n\t\r\n\tFindUsers()\r\n\t{\t\r\n\t\tthis.dialogService.open({\r\n\t\t\tviewModel: ppid_search\r\n\t\t}).whenClosed(response=>{\r\n\t\t\tif(!response.wasCancelled)\r\n\t\t\t{\r\n\t\t\t\t// console.log(response.output);\r\n\t\t\t\t//var arr = response.output.split('|');\r\n\t\t\t\t//var global_id = arr[0];\r\n\t\t\t\t//var tin = arr[1];\r\n\t\t\t\t//var group = arr[2];\r\n\t\t\t\t//var last_name = arr[3];\r\n\t\t\t\t//var first_name = arr[4];\r\n\t\t\t\t//var nick_name = arr[5];\r\n\t\t\t\t//var project_name = arr[6];\r\n\t\t\t\t//var country = arr[7];\r\n\t\t\t\t//alert(\"Global_id:\"+global_id+\"\\nTin:\"+tin+\"\\nGroup:\"+group+\"\\nLast Name:\"+last_name+\"\\nFirst Name:\"+first_name+\"\\nNick Name:\"+nick_name+\"\\nProject Name:\"+project_name+\"\\nCountry:\"+country);\r\n\t\t\t}else\r\n\t\t\t{\r\n\t\t\t\t// console.log('reponse was cancelled.');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tAddUsers()\r\n\t{\r\n\t\talert('AddUsers function under maintenance.');\r\n\t}\r\n\r\n\tLoginPassed(user){\r\n\t\t// console.log(user);\r\n\t\t// this.obj_personnel.USER = user;\r\n\t}\r\n}","import {bindable,inject} from 'aurelia-framework';\r\nimport { EntityManager, EntityQuery} from 'entity-manager-factory';\r\nimport settings from 'settings';\r\nimport moment from 'moment';\r\nimport _ from 'underscore';\r\nimport breeze from 'breeze-client';\r\nimport { cache_talent} from 'ppid/talent_search/cache_talent';\r\n\r\n@inject(cache_talent)\r\n\r\nexport class talent_search {\r\n  _CACHE_TALENT;\r\n\r\n  constructor(cache_talent) {\r\n      if (EntityManager() === undefined) {\r\n        return;\r\n      }\r\n\r\n      this._CACHE_TALENT = cache_talent;\r\n\r\n      this.initialize();\r\n  }\r\n\r\n  initialize()\r\n  {\r\n    this._CACHE_TALENT._CITIZENSHIP_ARR = [];\r\n    this._CACHE_TALENT._RELIGION_ARR = [];\r\n    this._CACHE_TALENT._CIVIL_STATUS_ARR = [];\r\n    this._CACHE_TALENT._COUNTRY_ARR = [];\r\n    this._CACHE_TALENT._LOCATION_ARR = [];\r\n    this._CACHE_TALENT._INTEREST_ARR = [];\r\n    this._CACHE_TALENT._SKILL_TALENT_ARR = [];\r\n\r\n\r\n    EntityManager().executeQuery(EntityQuery().from('REFERENCE_CD_MSTR').where('REF_GRP_CD', '==', 'CITIZENSHIP_CD').orderBy('REF_DESC')).then((found) => {\r\n      found.results.forEach((all)=>{\r\n        this._CACHE_TALENT._CITIZENSHIP_ARR.push({ref:all.REF_CD, desc: all.REF_DESC});\r\n      });\r\n    });\r\n\r\n    EntityManager().executeQuery(EntityQuery().from('REFERENCE_CD_MSTR').where('REF_GRP_CD', '==', 'RELIGION_CD').orderBy('REF_DESC')).then((found) => {\r\n      found.results.forEach((all)=>{\r\n        this._CACHE_TALENT._RELIGION_ARR.push({ref:all.REF_CD, desc: all.REF_DESC});\r\n      });\r\n    });\r\n\r\n    EntityManager().executeQuery(EntityQuery().from('REFERENCE_CD_MSTR').where('REF_GRP_CD', '==', 'CIVIL_STATUS').orderBy('REF_DESC')).then((found) => {\r\n      found.results.forEach((all)=>{\r\n        this._CACHE_TALENT._CIVIL_STATUS_ARR.push({ref:all.REF_CD, desc: all.REF_DESC});\r\n      });\r\n    });\r\n\r\n    EntityManager().executeQuery(EntityQuery().from('COUNTRY_MSTR').orderBy('COUNTRY_NAME')).then((found) => {\r\n      found.results.forEach((all)=>{\r\n        this._CACHE_TALENT._COUNTRY_ARR.push({ref:all.COUNTRY_CD, desc: all.COUNTRY_NAME});\r\n      });\r\n    });\r\n\r\n    EntityManager().executeQuery(EntityQuery().from('LOCATION_MSTR').orderBy('LOCATION_DESC')).then((found) => {\r\n      found.results.forEach((all)=>{\r\n        this._CACHE_TALENT._LOCATION_ARR.push({ref:all.LOCATION_CD, desc: all.LOCATION_DESC});\r\n      });\r\n    });\r\n\r\n    EntityManager().executeQuery(EntityQuery().from('INTEREST_MSTR').orderBy('INTEREST_DESC')).then((found) => {\r\n      found.results.forEach((all)=>{\r\n        this._CACHE_TALENT._INTEREST_ARR.push({ref:all.INTEREST_CD, desc: all.INTEREST_DESC});\r\n      });\r\n    });\r\n\r\n    EntityManager().executeQuery(EntityQuery().from('SKILL_TALENT_MSTR').orderBy('SKILL_TALENT_DESC')).then((found) => {\r\n      found.results.forEach((all)=>{\r\n        this._CACHE_TALENT._SKILL_TALENT_ARR.push({ref:all.SKILL_TALENT_CD, desc: all.SKILL_TALENT_DESC});\r\n      });\r\n    });\r\n\r\n    this.getParttimeMstr();\r\n    this.getCountry();\r\n    this.getCitizenship();\r\n    this.getAlias();\r\n    this.getIndividual();\r\n    this.getGroup();\r\n    this.getInterest();\r\n    this.getSkillTalent();\r\n    this.getCharacteristics();\r\n  }\r\n\r\n\r\n\r\n  getParttimeMstr() {\r\n    return new Promise((resolve)=>{\r\n      EntityQuery().from('PARTTIME_MSTR').select('PARTTIME_ID, COUNTRY_BASE_CD, LOCATION_BASE_CD')\r\n      .using(EntityManager()).execute()\r\n      .then((success)=>{\r\n        this._CACHE_TALENT.PARTTIME_MSTR = success.results;\r\n        resolve(true);\r\n      });\r\n    });\r\n  }\r\n\r\n  getCountry(){\r\n    return new Promise((resolve)=>{\r\n      EntityQuery().from('COUNTRY_MSTR').select('COUNTRY_CD, COUNTRY_NAME')\r\n       .using(EntityManager()).execute()\r\n       .then((success)=>{\r\n         this._CACHE_TALENT.COUNTRY_MSTR = success.results;\r\n         resolve(true);\r\n        });\r\n      });\r\n\r\n  }\r\n\r\n  getCitizenship() {\r\n    return new Promise((resolve)=>{\r\n       EntityQuery().from('PT_CITIZENSHIP_TRX').select('PT_INDIV_ID, CITIZENSHIP_CD')\r\n       .using(EntityManager()).execute()\r\n       .then((success)=>{\r\n         this._CACHE_TALENT.CITIZESHIP_MSTR = success.results;\r\n         resolve(true);\r\n        });\r\n      });\r\n  }\r\n\r\n  getAlias() {\r\n    return new Promise((resolve)=>{\r\n       EntityQuery().from('PT_ALIAS_TRX').select('PARTTIME_ID, ALIAS_NAME')\r\n       .using(EntityManager()).execute()\r\n       .then((success)=>{\r\n         this._CACHE_TALENT.ALIAS_MSTR = success.results;\r\n         resolve(true);\r\n        });\r\n      });\r\n\r\n  }\r\n\r\n  getIndividual() {\r\n    return new Promise((resolve)=>{\r\n       EntityQuery().from('PT_INDIV_MSTR').select('PT_INDIV_ID,GIVEN_NAME,MIDDLE_NAME,LAST_NAME,BIRTH_DT,RELIGION_CD,GENDER,CIVIL_STATUS')\r\n       .using(EntityManager()).execute()\r\n       .then((success)=>{\r\n         this._CACHE_TALENT.INDIVIDUAL_MSTR = success.results;\r\n         resolve(true);\r\n        });\r\n      });\r\n  }\r\n\r\n  getGroup() {\r\n    return new Promise((resolve)=>{\r\n       EntityQuery().from('PT_GRP_MSTR').select('PT_GRP_ID,GROUP_NAME,ESTABLISH_DT')\r\n       .using(EntityManager()).execute()\r\n       .then((success)=>{\r\n         this._CACHE_TALENT.GROUP_MSTR = success.results;\r\n         resolve(true);\r\n        });\r\n      });\r\n\r\n  }\r\n\r\n  getInterest(){\r\n    return new Promise((resolve)=>{\r\n       EntityQuery().from('PT_INTEREST_TRX').select('PARTTIME_ID,INTEREST_CD')\r\n       .using(EntityManager()).execute()\r\n       .then((success)=>{\r\n         this._CACHE_TALENT.INTEREST_MSTR = success.results;\r\n         resolve(true);\r\n        });\r\n      });\r\n  }\r\n\r\n  getSkillTalent(){\r\n    return new Promise((resolve)=>{\r\n       EntityQuery().from('PT_SKILL_TALENT_TRX').select('PARTTIME_ID,SKILL_TALENT_CD')\r\n       .using(EntityManager()).execute()\r\n       .then((success)=>{\r\n         this._CACHE_TALENT.SKILL_TALENT_MSTR = success.results;\r\n         resolve(true);\r\n        });\r\n      });\r\n\r\n  }\r\n\r\n  getCharacteristics(){\r\n    return new Promise((resolve)=>{\r\n       EntityQuery().from('PT_CHARACTERISTIC_TRX').select('PARTTIME_ID,CHARACTERISTIC_CD, ACTUAL_VALUE')\r\n       .using(EntityManager()).execute()\r\n       .then((success)=>{\r\n         this._CACHE_TALENT.CHARACTERISTICS_MSTR = success.results;\r\n         resolve(true);\r\n        });\r\n      });\r\n  }\r\n  consolidate(){\r\n    var imageName =  \"/styles/images/abslogo_BIG.png\";\r\n    this._CACHE_TALENT.INDIVIDUAL_MSTR.forEach(all=>{\r\n      var country='', location='', country_cd='', location_cd='';\r\n      var alias='';\r\n\r\n      var resultAddress = this._CACHE_TALENT.PARTTIME_MSTR.find((out)=>out.PARTTIME_ID==all.PT_INDIV_ID);\r\n\r\n      if (resultAddress!=undefined) {\r\n          country = resultAddress.COUNTRY_BASE_CD;\r\n          location = resultAddress.LOCATION_BASE_CD;\r\n\r\n          var countrName = this._CACHE_TALENT.COUNTRY_MSTR.find((out)=>out.COUNTRY_CD==country);\r\n          if (countrName!=undefined){\r\n            country_cd = countrName.COUNTRY_NAME;\r\n          }\r\n        }\r\n\r\n      var aliasName = this._CACHE_TALENT.ALIAS_MSTR.filter((out)=>out.PARTTIME_ID==all.PT_INDIV_ID);\r\n\r\n      if (aliasName.length > 0)\r\n      {\r\n        aliasName.forEach((aliasItem)=>{\r\n          if (alias==\"\"){\r\n            alias = aliasItem.ALIAS_NAME;\r\n          }\r\n          else {\r\n            alias += \"\\n\"+aliasItem.ALIAS_NAME\r\n          }\r\n        });\r\n      }\r\n\r\n      this._CACHE_TALENT.ALL_MSTR.push({\r\n        PT_INDIV_ID:all.PT_INDIV_ID,\r\n        GROUP_NAME:'',\r\n        GIVEN_NAME:all.GIVEN_NAME,\r\n        MIDDLE_NAME:all.MIDDLE_NAME,\r\n        LAST_NAME:all.LAST_NAME,\r\n        BIRTH_DT: all.BIRTH_DT,\r\n        RELIGION_CD: all.RELIGION_CD,\r\n        GENDER: all.GENDER,\r\n        SOURCE:'PT_INDIV_MSTR',\r\n        //CITIZENSHIP:'',\r\n        //RELIGION:'',\r\n        CIVIL_STATUS:all.CIVIL_STATUS,\r\n        COUNTRY:country_cd,\r\n        COUNTRY_CD:country,\r\n        LOCATION:location,\r\n        //LOCATION_CD: location_cd,\r\n        PIC:imageName,\r\n        VIDEO:'',\r\n        ALIAS:alias.replace(/\\n/g,\"<br />\"),\r\n      });\r\n    });\r\n\r\n    this._CACHE_TALENT.GROUP_MSTR.forEach( all=>{\r\n      var country='', location='', country_cd='', location_cd='';\r\n      var alias='';\r\n\r\n      var resultAddress = this._CACHE_TALENT.PARTTIME_MSTR.find((out)=>out.PARTTIME_ID==all.PT_GRP_ID);\r\n\r\n      if (resultAddress!=undefined) {\r\n          country = resultAddress.COUNTRY_BASE_CD;\r\n          location = resultAddress.LOCATION_BASE_CD;\r\n\r\n          var countrName = this._CACHE_TALENT.COUNTRY_MSTR.find((out)=>out.COUNTRY_CD==country);\r\n          if (countrName!=undefined){\r\n            country_cd = countrName.COUNTRY_NAME;\r\n          }\r\n        }\r\n\r\n      var aliasName = this._CACHE_TALENT.ALIAS_MSTR.filter((out)=>out.PARTTIME_ID==all.PT_GRP_ID);\r\n\r\n      if (aliasName.length > 0)\r\n      {\r\n        aliasName.forEach((aliasItem)=>{\r\n          if (alias==\"\"){\r\n            alias = aliasItem.ALIAS_NAME;\r\n          }\r\n          else {\r\n            alias += \"\\n\"+aliasItem.ALIAS_NAME\r\n          }\r\n        });\r\n      }\r\n\r\n      this._CACHE_TALENT.ALL_MSTR.push({\r\n        PT_INDIV_ID:all.PT_GRP_ID,\r\n        GROUP_NAME:all.GROUP_NAME,\r\n        GIVEN_NAME:'',\r\n        MIDDLE_NAME:'',\r\n        LAST_NAME:'',\r\n        BIRTH_DT: all.ESTABLISH_DT,\r\n        RELIGION_CD: '',\r\n        GENDER: '',\r\n        SOURCE:'PT_GRP_MSTR',\r\n        //CITIZENSHIP:'',\r\n        //RELIGION:'',\r\n        CIVIL_STATUS:'',\r\n        COUNTRY:country_cd,\r\n        COUNTRY_CD:country,\r\n        LOCATION:location,\r\n        //LOCATION_CD:'',\r\n        PIC:imageName,\r\n        VIDEO:'',\r\n        ALIAS:alias.replace(/\\n/g,\"<br />\"),\r\n      });\r\n    });\r\n  }\r\n\r\n  search_on() {\r\n    this._CACHE_TALENT.QUERY_VAL = [];\r\n    this._CACHE_TALENT.ALL_MSTR = [];\r\n    var arrayVal = [];\r\n\r\n    var p1 = new Promise((resolve)=>{\r\n      this.consolidate();\r\n      arrayVal = this._CACHE_TALENT.ALL_MSTR;\r\n\r\n\r\n      if (this._CACHE_TALENT._NAME!==undefined && this._CACHE_TALENT._NAME!=''){\r\n        var name = this._CACHE_TALENT._NAME.toUpperCase();\r\n        arrayVal = arrayVal.filter(out=>out.GIVEN_NAME.toUpperCase().indexOf(name)!=-1 || out.LAST_NAME.toUpperCase().indexOf(name)!=-1 || out.MIDDLE_NAME.toUpperCase().indexOf(name)!=-1 || out.GROUP_NAME.toUpperCase().indexOf(name)!=-1);\r\n      }\r\n\r\n      if (this._CACHE_TALENT._AGE!=undefined && this._CACHE_TALENT._AGE!=''){\r\n        var date = new Date();\r\n        var x = date.getFullYear()  - parseInt(this._CACHE_TALENT._AGE) - 1;\r\n        var y1 = date.getDate() + 1;\r\n        var y2 = date.getDate() - 1;\r\n        var z = date.getFullYear() - parseInt(this._CACHE_TALENT._AGE);\r\n        var mon = date.getMonth();\r\n        var bdStart =   new Date(x, mon, y1);\r\n        var bdEnd =  new Date(z, mon, y2);\r\n        arrayVal = arrayVal.filter(out=>out.BIRTH_DT>=bdStart && out.BIRTH_DT<=bdEnd);\r\n      }\r\n\r\n      if (this._CACHE_TALENT._CITIZENSHIP!==undefined && this._CACHE_TALENT._CITIZENSHIP!='' && this._CACHE_TALENT._CITIZENSHIP_POP){\r\n        if ($.isArray(this._CACHE_TALENT._CITIZENSHIP)){\r\n          console.log(\"ARRAY\");\r\n        }\r\n        else {\r\n          console.log(\"TEXT\");\r\n        }\r\n        console.log(this._CACHE_TALENT._CITIZENSHIP.length, this._CACHE_TALENT._CITIZENSHIP);\r\n        var arrayVal2=[];\r\n        this._CACHE_TALENT.CITIZESHIP_MSTR.filter(out=>out.CITIZENSHIP_CD==this._CACHE_TALENT._CITIZENSHIP).forEach(out=>{\r\n          arrayVal2.push(out.PT_INDIV_ID);\r\n        });\r\n        arrayVal = arrayVal.filter((out)=>arrayVal2.indexOf(out.PT_INDIV_ID)>-1);\r\n      }\r\n\r\n      if (this._CACHE_TALENT._RELIGION!==undefined && this._CACHE_TALENT._RELIGION!='' &&  this._CACHE_TALENT._RELIGION_POP){\r\n        var religion = this._CACHE_TALENT._RELIGION;\r\n        arrayVal = arrayVal.filter(out=>out.RELIGION_CD==religion);\r\n      }\r\n\r\n      if (this._CACHE_TALENT._CIVIL_STATUS!==undefined && this._CACHE_TALENT._CIVIL_STATUS!='' && this._CACHE_TALENT._CIVIL_STATUS_POP){\r\n        var civil_status = this._CACHE_TALENT._CIVIL_STATUS;\r\n        arrayVal = arrayVal.filter(out=>out.CIVIL_STATUS==civil_status);\r\n      }\r\n\r\n      if (this._CACHE_TALENT._GENDER!==undefined && this._CACHE_TALENT._GENDER!='' && this._CACHE_TALENT._GENDER_POP){\r\n        var gender = this._CACHE_TALENT._GENDER;\r\n        arrayVal = arrayVal.filter(out=>out.GENDER==gender);\r\n      }\r\n\r\n      if (this._CACHE_TALENT._COUNTRY!==undefined && this._CACHE_TALENT._COUNTRY!='' && this._CACHE_TALENT._COUNTRY_POP){\r\n        var country = this._CACHE_TALENT._COUNTRY;\r\n        arrayVal = arrayVal.filter(out=>out.COUNTRY_CD==country);\r\n      }\r\n\r\n\r\n      if (this._CACHE_TALENT._LOCATION!==undefined && this._CACHE_TALENT._LOCATION!='' && this._CACHE_TALENT._LOCATION_POP){\r\n        var location = this._CACHE_TALENT._LOCATION;\r\n        arrayVal = arrayVal.filter(out=>out.LOCATION==location);\r\n      }\r\n\r\n      if (this._CACHE_TALENT._INTEREST!==undefined && this._CACHE_TALENT._INTEREST!='' && this._CACHE_TALENT._INTEREST_POP){\r\n        var arrayVal2=[];\r\n        this._CACHE_TALENT.INTEREST_MSTR.filter(out=>out.INTEREST_CD==this._CACHE_TALENT._INTEREST).forEach(out=>{\r\n          arrayVal2.push(out.PARTTIME_ID);\r\n        });\r\n        arrayVal = arrayVal.filter((out)=>arrayVal2.indexOf(out.PT_INDIV_ID)>-1);\r\n      }\r\n\r\n      if (this._CACHE_TALENT._SKILL_TALENT!==undefined && this._CACHE_TALENT._SKILL_TALENT!='' && this._CACHE_TALENT._SKILL_TALENT_POP){\r\n        var arrayVal2=[];\r\n        this._CACHE_TALENT.SKILL_TALENT_MSTR.filter(out=>out.SKILL_TALENT_CD==this._CACHE_TALENT._SKILL_TALENT).forEach(out=>{\r\n          arrayVal2.push(out.PARTTIME_ID);\r\n        });\r\n        arrayVal = arrayVal.filter((out)=>arrayVal2.indexOf(out.PT_INDIV_ID)>-1);\r\n      }\r\n\r\n      if (this._CACHE_TALENT._HEIGHT!==undefined && this._CACHE_TALENT._HEIGHT!=''){\r\n        var arrayVal2=[];\r\n        this._CACHE_TALENT.CHARACTERISTICS_MSTR.filter(out=>out.CHARACTERISTIC_CD==\"HEIGHT\" && out.ACTUAL_VALUE.toUpperCase().indexOf(this._CACHE_TALENT._HEIGHT.toUpperCase())>-1).forEach(out=>{\r\n          arrayVal2.push(out.PARTTIME_ID);\r\n        });\r\n        arrayVal = arrayVal.filter((out)=>arrayVal2.indexOf(out.PT_INDIV_ID)>-1);\r\n      }\r\n\r\n      if (this._CACHE_TALENT._WEIGHT!==undefined && this._CACHE_TALENT._WEIGHT!=''){\r\n        var arrayVal2=[];\r\n        this._CACHE_TALENT.CHARACTERISTICS_MSTR.filter(out=>out.CHARACTERISTIC_CD==\"WEIGHT\" && out.ACTUAL_VALUE.toUpperCase().indexOf(this._CACHE_TALENT._WEIGHT.toUpperCase())>-1).forEach(out=>{\r\n          arrayVal2.push(out.PARTTIME_ID);\r\n        });\r\n        arrayVal = arrayVal.filter((out)=>arrayVal2.indexOf(out.PT_INDIV_ID)>-1);\r\n      }\r\n\r\n      if (this._CACHE_TALENT._BUILT!==undefined && this._CACHE_TALENT._BUILT!=''){\r\n        var arrayVal2=[];\r\n        this._CACHE_TALENT.CHARACTERISTICS_MSTR.filter(out=>out.CHARACTERISTIC_CD==\"BUILT\" && out.ACTUAL_VALUE.toUpperCase().indexOf(this._CACHE_TALENT._BUILT.toUpperCase())>-1).forEach(out=>{\r\n          arrayVal2.push(out.PARTTIME_ID);\r\n        });\r\n        arrayVal = arrayVal.filter((out)=>arrayVal2.indexOf(out.PT_INDIV_ID)>-1);\r\n      }\r\n\r\n      if (this._CACHE_TALENT._EYE_COLOR!==undefined && this._CACHE_TALENT._EYE_COLOR!=''){\r\n        var arrayVal2=[];\r\n        this._CACHE_TALENT.CHARACTERISTICS_MSTR.filter(out=>out.CHARACTERISTIC_CD==\"EYE_COLOR\" && out.ACTUAL_VALUE.toUpperCase().indexOf(this._CACHE_TALENT._EYE_COLOR.toUpperCase())>-1).forEach(out=>{\r\n          arrayVal2.push(out.PARTTIME_ID);\r\n        });\r\n        arrayVal = arrayVal.filter((out)=>arrayVal2.indexOf(out.PT_INDIV_ID)>-1);\r\n      }\r\n\r\n      if (this._CACHE_TALENT._HAIR_COLOR!==undefined && this._CACHE_TALENT._HAIR_COLOR!=''){\r\n        var arrayVal2=[];\r\n        this._CACHE_TALENT.CHARACTERISTICS_MSTR.filter(out=>out.CHARACTERISTIC_CD==\"HAIR_COLOR\" && out.ACTUAL_VALUE.toUpperCase().indexOf(this._CACHE_TALENT._HAIR_COLOR.toUpperCase())>-1).forEach(out=>{\r\n          arrayVal2.push(out.PARTTIME_ID);\r\n        });\r\n        arrayVal = arrayVal.filter((out)=>arrayVal2.indexOf(out.PT_INDIV_ID)>-1);\r\n      }\r\n\r\n      if (this._CACHE_TALENT._SKINTONE!==undefined && this._CACHE_TALENT._SKINTONE!=''){\r\n        var arrayVal2=[];\r\n        this._CACHE_TALENT.CHARACTERISTICS_MSTR.filter(out=>out.CHARACTERISTIC_CD==\"SKINTONE\" && out.ACTUAL_VALUE.toUpperCase().indexOf(this._CACHE_TALENT._SKINTONE.toUpperCase())>-1).forEach(out=>{\r\n          arrayVal2.push(out.PARTTIME_ID);\r\n        });\r\n        arrayVal = arrayVal.filter((out)=>arrayVal2.indexOf(out.PT_INDIV_ID)>-1);\r\n      }\r\n\r\n      if (this._CACHE_TALENT._VITAL_STATISTICS!==undefined && this._CACHE_TALENT._VITAL_STATISTICS!=''){\r\n        var arrayVal2=[];\r\n        this._CACHE_TALENT.CHARACTERISTICS_MSTR.filter(out=>out.CHARACTERISTIC_CD==\"VITAL_STATS\" && out.ACTUAL_VALUE.toUpperCase().indexOf(this._CACHE_TALENT._VITAL_STATISTICS.toUpperCase())>-1).forEach(out=>{\r\n          arrayVal2.push(out.PARTTIME_ID);\r\n        });\r\n        arrayVal = arrayVal.filter((out)=>arrayVal2.indexOf(out.PT_INDIV_ID)>-1);\r\n      }\r\n\r\n      if (this._CACHE_TALENT._SPECIFIC_CHAR!==undefined && this._CACHE_TALENT._SPECIFIC_CHAR!=''){\r\n        var arrayVal2=[];\r\n        this._CACHE_TALENT.CHARACTERISTICS_MSTR.filter(out=>out.CHARACTERISTIC_CD==\"SPECIFIC_CHAR\" && out.ACTUAL_VALUE.toUpperCase().indexOf(this._CACHE_TALENT._SPECIFIC_CHAR.toUpperCase())>-1).forEach(out=>{\r\n          arrayVal2.push(out.PARTTIME_ID);\r\n        });\r\n        arrayVal = arrayVal.filter((out)=>arrayVal2.indexOf(out.PT_INDIV_ID)>-1);\r\n      }\r\n\r\n      if (this._CACHE_TALENT._TALENT_TYPE!==undefined && this._CACHE_TALENT._TALENT_TYPE!=''){\r\n        var arrayVal2=[];\r\n        this._CACHE_TALENT.CHARACTERISTICS_MSTR.filter(out=>out.CHARACTERISTIC_CD==\"TALENT_TYPE\" && out.ACTUAL_VALUE.toUpperCase().indexOf(this._CACHE_TALENT._TALENT_TYPE.toUpperCase())>-1).forEach(out=>{\r\n          arrayVal2.push(out.PARTTIME_ID);\r\n        });\r\n        arrayVal = arrayVal.filter((out)=>arrayVal2.indexOf(out.PT_INDIV_ID)>-1);\r\n      }\r\n\r\n\r\n\r\n      this._CACHE_TALENT.QUERY_VAL = arrayVal;\r\n      this._CACHE_TALENT._HAS_FIRED = true;\r\n\r\n    }); // Promise end\r\n\r\n    console.log(this._CACHE_TALENT);\r\n  }\r\n\r\n  talent_select(id, source){\r\n    alert(id+\"\\n\"+source);\r\n  }\r\n\r\n  onClick(variable, value){\r\n    switch(variable){\r\n      case 1:\r\n        this._CACHE_TALENT._CITIZENSHIP_POP=value;\r\n        break;\r\n      case 2:\r\n        this._CACHE_TALENT._RELIGION_POP=value;\r\n        break;\r\n      case 3:\r\n        this._CACHE_TALENT._CIVIL_STATUS_POP=value;\r\n        break;\r\n      case 4:\r\n        this._CACHE_TALENT._GENDER_POP=value;\r\n        break;\r\n      case 5:\r\n        this._CACHE_TALENT._COUNTRY_POP=value;\r\n        break;\r\n      case 6:\r\n        this._CACHE_TALENT._LOCATION_POP=value;\r\n        break;\r\n      case 7:\r\n        this._CACHE_TALENT._INTEREST_POP=value;\r\n        break;\r\n      case 8:\r\n        this._CACHE_TALENT._SKILL_TALENT_POP=value;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n}\r\n","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\nimport {OrderByDate} from '../../helpers';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class awards{\r\n\r\n\tobj_personnel = null;\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\t_disableForm=true;\r\n\t_disableTable=false;\t\r\n\tformStatus=\"\";\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num == 2){\t\t\t\t\r\n\t\t\t\t$(\"#award_receive_dt\").datepicker();\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading award info...\");\r\n\t\t\t\tthis.loadAward(global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.award_training_tab_changed.push((tab_num, global_id)=>{\r\n\t\t\tif(tab_num == 0){\r\n\t\t\t\t$(\"#award_receive_dt\").datepicker();\r\n\t\t\t\tthis.loadAward(global_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tloadAward(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"AWARD_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar tmp = [];\r\n\t\t\tvar tmpLog = [];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\t\t\t\tvar receive_dt = null;\r\n\t\t\t\tif(moment(r.RECEIVE_DT).isValid()){\r\n\t\t\t\t\treceive_dt = moment.utc(r.RECEIVE_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\taward_id: r.AWARD_ID,\r\n\t\t\t\t\taward_cd: r.AWARD_CD,\r\n\t\t\t\t\taward_body_cd: r.AWARD_BODY_CD,\r\n\t\t\t\t\tproject_name: r.PROJECT_NAME,\r\n\t\t\t\t\treceive_dt: receive_dt,\r\n\t\t\t\t\tremarks: r.REMARKS\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Awards has been loaded...\");\r\n\t\t\tthis.obj_personnel.AWARD.list = tmp;\r\n\r\n\t\t\tif(tmpLog.length>0){\r\n\r\n\t\t\t\tthis.lblCreatedBy = tmpLog[0].user + \" \" + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tvar lastIndex = tmpLog.length-1;\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpLog[lastIndex].user + \" \" + moment.utc(tmpLog[lastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying awards...\");\t\t\t\r\n\t\t});\r\n\t}\r\n\r\n\r\n\r\n\tbtnAdd(){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"ADD\";\r\n\t}\r\n\r\n\tbtnEdit(item){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"EDIT\";\r\n\t\tthis.obj_personnel.AWARD.model.award_id = item.award_id;\r\n\t\tthis.obj_personnel.AWARD.model.award_cd = item.award_cd;\r\n\t\tthis.obj_personnel.AWARD.model.award_body_cd = item.award_body_cd;\r\n\t\tthis.obj_personnel.AWARD.model.project_name = item.project_name;\r\n\t\tthis.obj_personnel.AWARD.model.receive_dt = item.receive_dt;\r\n\t\tthis.obj_personnel.AWARD.model.remarks = item.remarks;\r\n\t}\r\n\r\n\tbtnRemove(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the record?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\t//alert(\"Confirmed delete.\");\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('AWARD_TRX').where('AWARD_ID', '==', item.award_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The record was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadAward(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.clearField();\r\n  \t\t\t\t\t\t\t\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing award.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t\t});\r\n\t}\r\n\r\n\tclearField(){\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableTable = false;\r\n\t\tthis.formStatus = \"\";\r\n\t\tthis.obj_personnel.AWARD.model.award_id = 0;\r\n\t\tthis.obj_personnel.AWARD.model.award_cd = \"\";\r\n\t\tthis.obj_personnel.AWARD.model.award_body_cd = \"\";\r\n\t\tthis.obj_personnel.AWARD.model.project_name = \"\";\r\n\t\tthis.obj_personnel.AWARD.model.receive_dt = \"\";\r\n\t\tthis.obj_personnel.AWARD.model.remarks = \"\";\r\n\t}\r\n\r\n\tvalidate(){\r\n\r\n\t\tvar strValidation = \"\";\r\n\t\tthis.obj_personnel.AWARD.model.receive_dt = $(\"#award_receive_dt\").val();\r\n\r\n\t\tif(this.obj_personnel.AWARD.model.award_cd == undefined || this.obj_personnel.AWARD.model.award_cd == null || this.obj_personnel.AWARD.model.award_cd.length == 0){\r\n\t\t\tstrValidation+=\"No award specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.AWARD.model.award_body_cd == undefined || this.obj_personnel.AWARD.model.award_body_cd == null || this.obj_personnel.AWARD.model.award_body_cd.length == 0){\r\n\t\t\tstrValidation+=\"No Award body specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.AWARD.model.project_name == undefined || this.obj_personnel.AWARD.model.project_name == null || this.obj_personnel.AWARD.model.project_name.length==0){\r\n\t\t\tstrValidation+=\"No project name specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.AWARD.model.receive_dt == undefined || this.obj_personnel.AWARD.model.receive_dt == null || this.obj_personnel.AWARD.model.receive_dt.length==0){\r\n\t\t\tstrValidation+=\"No date received specified.<br/>\";\r\n\t\t}else{\r\n\t\t\tif(moment(this.obj_personnel.AWARD.model).isValid()){\r\n\t\t\t\tvar d1 = new Date(this.obj_personnel.AWARD.model.receive_dt);\r\n\t\t\t\tvar d2 = new Date();\r\n\t\t\t\tif(d1>d2){\r\n\t\t\t\t\tstrValidation+=\"Date received cannot be greater than date today.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+=\"Invalid date recevied.<br/>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.AWARD.model.remarks == undefined || this.obj_personnel.AWARD.model.remarks == null || this.obj_personnel.AWARD.model.remarks.length==0){\r\n\t\t\tstrValidation+=\"No remarks specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.formStatus == \"ADD\"){\r\n\t\t\t\tthis.saveAward(this.obj_personnel.global_indiv_id);\r\n\t\t\t}else if(this.formStatus == \"EDIT\"){\r\n\t\t\t\tthis.updateAward(this.obj_personnel.AWARD.model.award_id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsaveAward(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar receive_dt = new Date(moment(this.obj_personnel.AWARD.model.receive_dt).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"AWARD_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"AWARD_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar maxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].AWARD_ID+1;\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tvar award = {\r\n\t\t\t\tAWARD_ID: maxId,\r\n\t\t\t\tGLOBAL_ID: global_id,\r\n\t\t\t\tAWARD_CD: this.obj_personnel.AWARD.model.award_cd,\r\n\t\t\t\tAWARD_BODY_CD: this.obj_personnel.AWARD.model.award_body_cd,\r\n\t\t\t\tPROJECT_NAME: this.obj_personnel.AWARD.model.project_name,\r\n\t\t\t\tRECEIVE_DT: receive_dt,\r\n\t\t\t\tREMARKS: this.obj_personnel.AWARD.model.remarks,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"AWARD_TRX\", award);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadAward(global_id);\r\n\t\t\t\tthis.clearField();\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in saving award.\");\t\r\n\t\t\t});\r\n\r\n\t\t}, (e2)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e2, \"Error in querying award id.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tupdateAward(award_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar receive_dt = new Date(moment(this.obj_personnel.AWARD.model.receive_dt).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"AWARD_TRX\")\r\n\t\t\t\t\t.where(\"AWARD_ID\", \"==\", award_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].AWARD_CD = this.obj_personnel.AWARD.model.award_cd;\r\n\t\t\ts1.results[0].AWARD_BODY_CD = this.obj_personnel.AWARD.model.award_body_cd;\r\n\t\t\ts1.results[0].PROJECT_NAME = this.obj_personnel.AWARD.model.project_name;\r\n\t\t\ts1.results[0].RECEIVE_DT = receive_dt;\r\n\t\t\ts1.results[0].REMARKS = this.obj_personnel.AWARD.model.remarks;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\tthis.loadAward(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in updating award.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e2)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e2, \"Error in querying award info.\");\r\n\t\t});\r\n\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\n\r\n@inject(DialogService, obj_personnel, toastr)\r\nexport class awards_training //Experience, awards, seminar, and training.\r\n{\r\n\tobj_personnel = null;\r\n\t_404_img = \"/images/404.png\";\t\r\n\tconstructor(dialogService, obj_personnel, toastr){\r\n\t\tthis.dialogService = dialogService;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num == 2){\r\n\t\t\t\t$(\"#award\").addClass(\"active\");\r\n\t\t\t\t$(\"#training\").removeClass(\"active\");\t\t\t\t\r\n\t\t\t\t$(\"#awards\").addClass(\"active\");\r\n\t\t\t\t$(\"#trainings\").removeClass(\"active\");\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.obj_personnel.OBSERVERS.ppid_dialog.push((all)=>{\t\t\t\t\r\n\t\t// \tthis.CloseSearch(all);\r\n\t\t// });\r\n\t}\r\n\t\r\n\tclickTab_AwardsTraining(tab_num){\r\n\t\tif(this.obj_personnel.global_indiv_id.length==0)\r\n\t\t\treturn;\r\n\t\tswitch(tab_num){\r\n\t\t\tcase 0:\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading award info...\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1: \r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading training info...\");\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.award_training_tab_changed.forEach((delegate)=>{\r\n\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t});\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\n\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class company_info\r\n{\r\n\tobj_personnel=null;\t\r\n\t_404_img = \"/images/404.png\";\r\n\tconstructor(obj_personnel, toastr, DialogService)\r\n\t{\r\n\t\tthis.obj_personnel=obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num == 4){\r\n\t\t\t\t$(\"#company_tab_list\").find(\".active\").removeClass(\"active\");\r\n\t\t\t\t$(\"#company_tab0\").addClass(\"active\");\r\n\t\t\t\t$(\"#company_tabs\").find(\".active\").removeClass(\"active\");\r\n\t\t\t\t$(\"#company_specific\").addClass(\"active\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tclickTab_Company(tab_num){\r\n\t\tif(this.obj_personnel.global_indiv_id.length==0)\r\n\t\t\treturn;\r\n\t\tthis.obj_personnel.OBSERVERS.company_tab_changed.forEach((delegate)=>{\r\n\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t});\r\n\t\t\t\t\t\r\n\t\t// switch(tab_num){\r\n\t\t// \tcase 0: this.obj_personnel.OBSERVERS.company_tab_changed.forEach((delegate)=>{\r\n\t\t// \t\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t// \t\t\t});\r\n\t\t// \t\t\tbreak;\r\n\t\t// \tcase 1: \r\n\t\t// \t\t\tthis.obj_personnel.OBSERVERS.company_tab_changed.forEach((delegate)=>{\r\n\t\t// \t\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t// \t\t\t});\r\n\t\t// \t\t\tbreak;\r\n\t\t// \tcase 2:\r\n\t\t// \t\t\tthis.obj_personnel.OBSERVERS.company_tab_changed.forEach((delegate)=>{\r\n\t\t// \t\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t// \t\t\t});\r\n\t\t// \t\t\tbreak;\r\n\t\t// \tcase 3: \r\n\t\t// \t\t\tthis.obj_personnel.OBSERVERS.company_tab_changed.forEach((delegate)=>{\r\n\t\t// \t\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t// \t\t\t});\r\n\t\t// \t\t\tbreak;\r\n\t\t// } \r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\nimport {OrderByDate, isDigit} from '../../helpers';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class company_info_character_ref {\r\n\r\n\tobj_personnel = null;\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\t_disableForm=true;\r\n\t_disableTable=false;\t\r\n\tformStatus=\"\";\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\t//loadCharacterRef;\r\n\t\tthis.obj_personnel.OBSERVERS.company_tab_changed.push((tab_num, global_id)=>{\r\n\t\t\tif(tab_num==2){\r\n\t\t\t\t$(\"#medical_exam_dt\").datepicker();\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading Character references...\");\r\n\t\t\t\tthis.loadCharacterRef(global_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tloadCharacterRef(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"CHAR_REF_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", global_indiv_id)\r\n\t\t\t\t\t.orderBy(\"CHAR_REF_ID\");\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar tmp=[]; \r\n\t\t\tvar tmpLog=[];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\r\n\t\t\t\tvar job = this.obj_personnel.JOB.find((x)=>{\r\n\t\t\t\t\treturn x.value == r.JOB_ID;\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t\tvar job_name = null;\r\n\t\t\t\tif(job!= null){\r\n\t\t\t\t\tjob_name = job.text;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tchar_ref_id: r.CHAR_REF_ID,\r\n\t\t\t\t\tglobal_indiv_id: r.GLOBAL_INDIV_ID,\r\n\t\t\t\t\tfull_name: r.FULL_NAME,\r\n\t\t\t\t\tcompany_name: r.COMPANY_NAME,\r\n\t\t\t\t\tphone_no: r.PHONE_NO,\r\n\t\t\t\t\tjob_name: job_name,\r\n\t\t\t\t\tjob_id: r.JOB_ID,\r\n\t\t\t\t\tjob_other: r.JOB_OTHER\r\n\t\t\t\t});\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Character references has been loaded.\");\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\tthis.obj_personnel.CHARACTER_REF.list = tmp;\r\n\t\t\ttmpLog.sort(OrderByDate);\r\n\r\n\t\t\tif(tmpLog.length>0){\r\n\r\n\t\t\t\tthis.lblCreatedBy = tmpLog[0].user + \" \" +moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tvar lastIndex = tmpLog.length-1;\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpLog[lastIndex].user + \" \" + moment.utc(tmpLog[lastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy=\"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying character ref.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tbtnAdd(){\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"ADD\";\t\t\r\n\t}\r\n\r\n\tbtnEdit(item){\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"EDIT\";\r\n\t\tif(item.job_id != null){\r\n\t\t\tthis.obj_personnel.CHARACTER_REF.model.job_id = item.job_id.toString();\r\n\t\t}else{\r\n\t\t\tthis.obj_personnel.CHARACTER_REF.model.job_id = null;\r\n\t\t}\r\n\t\tthis.obj_personnel.CHARACTER_REF.model.job_other = item.job_other;\r\n\t\tthis.obj_personnel.CHARACTER_REF.model.char_ref_id = item.char_ref_id;\r\n\t\tthis.obj_personnel.CHARACTER_REF.model.full_name = item.full_name;\r\n\t\tthis.obj_personnel.CHARACTER_REF.model.company_name = item.company_name;\r\n\t\tthis.obj_personnel.CHARACTER_REF.model.phone_no = item.phone_no;\r\n\t}\r\n\r\n\tbtnRemove(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the record?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('CHAR_REF_TRX').where('CHAR_REF_ID', '==', item.char_ref_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\", \"Record was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadCharacterRef(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.clearField();\r\n\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(error, \"Error in removing character reference.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tclearField(){\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableTable = false;\r\n\t\tthis.formStatus = \"\";\r\n\t\t// console.log(this.obj_personnel.CHARACTER_REF.model.job_id);\r\n\t\tthis.obj_personnel.CHARACTER_REF.model = {};\r\n\t\tthis.obj_personnel.CHARACTER_REF.model.job_id = \"\";\r\n\t}\r\n\r\n\tvalidate(){\r\n\r\n\t\tvar strValidation = \"\";\r\n\r\n\t\tif(this.obj_personnel.CHARACTER_REF.model.full_name == undefined || this.obj_personnel.CHARACTER_REF.model.full_name == null || this.obj_personnel.CHARACTER_REF.model.length==0){\r\n\t\t\tstrValidation+=\"No name specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.CHARACTER_REF.model.phone_no == undefined || this.obj_personnel.CHARACTER_REF.model.phone_no == null || this.obj_personnel.CHARACTER_REF.model.phone_no.length==0){\r\n\t\t\tstrValidation+=\"No contact number specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.obj_personnel.CHARACTER_REF.model.char_ref_id != undefined && this.obj_personnel.CHARACTER_REF.model.char_ref_id != null && this.obj_personnel.CHARACTER_REF.model.char_ref_id>0){\r\n\t\t\t\tthis.updateCharacterRef(this.obj_personnel.CHARACTER_REF.model.char_ref_id);\r\n\t\t\t}else{\r\n\t\t\t\tthis.saveCharacterRef(this.obj_personnel.global_indiv_id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsaveCharacterRef(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"CHAR_REF_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"CHAR_REF_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar maxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].CHAR_REF_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar char_ref = {\r\n\t\t\t\tCHAR_REF_ID: maxId,\r\n\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\tFULL_NAME: this.obj_personnel.CHARACTER_REF.model.full_name,\r\n\t\t\t\tCOMPANY_NAME: this.obj_personnel.CHARACTER_REF.model.company_name,\r\n\t\t\t\tPHONE_NO: this.obj_personnel.CHARACTER_REF.model.phone_no,\r\n\t\t\t\tJOB_ID: this.obj_personnel.CHARACTER_REF.model.job_id,\r\n\t\t\t\tJOB_OTHER: this.obj_personnel.CHARACTER_REF.model.job_other,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\t\t\tvar entity = EntityManager().createEntity(\"CHAR_REF_TRX\", char_ref);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadCharacterRef(global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in saving character ref.\");\r\n\t\t\t});\r\n\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying character ref id.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tupdateCharacterRef(char_ref_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"CHAR_REF_TRX\")\r\n\t\t\t\t\t.where(\"CHAR_REF_ID\", \"==\", char_ref_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].FULL_NAME = this.obj_personnel.CHARACTER_REF.model.full_name;\r\n\t\t\ts1.results[0].COMPANY_NAME = this.obj_personnel.CHARACTER_REF.model.company_name;\r\n\t\t\ts1.results[0].PHONE_NO = this.obj_personnel.CHARACTER_REF.model.phone_no;\r\n\t\t\ts1.results[0].JOB_ID = this.obj_personnel.CHARACTER_REF.model.job_id;\r\n\t\t\ts1.results[0].JOB_OTHER = this.obj_personnel.CHARACTER_REF.model.job_other;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record has been updated.\");\r\n\t\t\t\tthis.loadCharacterRef(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in updating character ref.\");\r\n\t\t\t});\r\n\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying character ref.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tIsDigit(event){\r\n\t\treturn isDigit(event);\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport {getLookups} from '../../masterfiles';\r\nimport {isDigit} from \"../../helpers\";\r\nimport settings from 'settings';\r\n\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class company_info_main{\r\n\t\r\n\tobj_personnel = null;\r\n\t_disableLocations = true;\r\n\t_disableIDNo = true;\r\n\t_disableStatus=true;\r\n\t_disableTabsInput = true;\r\n\t_hideSuspendField=true;\r\n\t_hideInactiveField=true;\r\n\t_hideCessationDate=true;\r\n\t_hideInactiveReason=true;\r\n\tddCompany=[];\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\talreadyLoaded = false;\r\n\taccreditation_status=\"\";\r\n\taccreditation_joblist=[];\r\n\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num, global_id)=>{\r\n\t\t\tif(tab_num == 4){\r\n\t\t\t\tif(!this.alreadyLoaded){\r\n\t\t\t\t\tthis.alreadyLoaded=false;\r\n\t\t\t\t\t$(\"#_start_dt\").datepicker();\r\n\t\t\t\t\t$(\"#_end_dt\").datepicker();\r\n\t\t\t\t\t$(\"#kapamilya_dt\").datepicker();\r\n\t\t\t\t\t$(\"#membership_dt\").datepicker();\r\n\t\t\t\t\t$(\"#suspended_start_dt\").datepicker();\r\n\t\t\t\t\t$(\"#suspended_end_dt\").datepicker();\r\n\t\t\t\t\t$(\"#cessation_end_dt\").datepicker();\r\n\t\t\t\t\t$(\"#a_start_dt\").datepicker();\r\n\t\t\t\t\t$(\"#a_end_dt\").datepicker();\r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.info(\"\", \"Loading company info...\");\r\n\t\t\t\t\t// this.dd_companyChanged();\r\n\t\t\t\t\tthis.loadCompany(this.obj_personnel.USER.USER_ID, global_id);\t\t\t\t\t\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.company_tab_changed.push((tab_num, global_id)=>{\r\n\t\t\tif(tab_num==0){\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading company info...\");\r\n\t\t\t\tif(this.ddCompany.length>0){\r\n\t\t\t\t\tthis.loadGlobalCompany(global_id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.info(\"\", \"You don't have any access.\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.push(()=>{\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC = {\r\n\t\t\t\tmodel:{\t\t\t\t\t\r\n\t\t\t\t\tpersonnel_bank:{}\r\n\t\t\t\t},\r\n\t\t\t\tlist:[]\r\n\t\t\t}\r\n\t\t\tthis.alreadyLoaded = false;\r\n\t\t});\r\n\t}\r\n\r\n\tloadGlobalCompany(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_COMPANY_MSTR\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id)\r\n\t\t\t\t\t.orderBy(\"COMPANY_ID\");\r\n\t\tEntityManager().executeQuery(query).then((success)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(success.results, (r)=>{\r\n\t\t\t\t// var suspend = [];\r\n\t\t\t\t// if(r.STATUS_CD == \"SUSPEND\"){\r\n\t\t\t\t// \tsuspend = this.loadSuspend(global_id, r.COMPANY_ID);\r\n\t\t\t\t// }\r\n\t\t\t\t// var accreditation = this.loadAccreditation(r.GLOBAL_COMPANY_ID);\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tglobal_company_id: r.GLOBAL_COMPANY_ID,\r\n\t\t\t\t\tglobal_id: r.GLOBAL_ID,\r\n\t\t\t\t\tid_no: r.ID_NO, \r\n\t\t\t\t\tcompany_id: r.COMPANY_ID,\r\n\t\t\t\t\tstart_dt: r.START_DT,\r\n\t\t\t\t\tend_dt: r.END_DT,\r\n\t\t\t\t\tkapamilya_dt: r.KAPAMILYA_DT,\r\n\t\t\t\t\tmembership_dt: r.MEMBERSHIP_DT,\r\n\t\t\t\t\texclusive_fl: r.EXCLUSIVE_FL,\r\n\t\t\t\t\tstatus_cd: r.STATUS_CD,\r\n\t\t\t\t\tcessation_reason_cd: r.CESSATION_REASON_CD,\r\n\t\t\t\t\tremarks: r.REMARKS,\r\n\t\t\t\t\tdivision_id: r.DIVISION_ID,\r\n\t\t\t\t\tlocation_cd: r.LOCATION_CD,\r\n\t\t\t\t\tcategory_id: r.CATEGORY_ID,\r\n\t\t\t\t\tjob_id: r.JOB_ID,\r\n\t\t\t\t\tpayroll_grp_id: r.PAYROLL_GRP_ID,\r\n\t\t\t\t\tprofessional_type_cd: r.PROFESSIONAL_TYPE_CD,\r\n\t\t\t\t\tcessation_end_dt: r.CESSATION_END_DATE,\r\n\t\t\t\t\tinactive_reason_cd: r.INACTIVE_REASON_CD\r\n\t\t\t\t\t// accreditation: accreditation\r\n\t\t\t\t\t// suspend_id: suspend.length==0?0: suspend[0].suspend_id,\r\n\t\t\t\t\t// suspended_start_dt: suspend.length==0?\"\":suspend[0].start_dt,\r\n\t\t\t\t\t// suspended_end_dt: suspend.length==0?\"\":suspend[0].end_dt\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.list = tmp;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Company info has been loaded...\");\r\n\t\t\tif(this.obj_personnel.COMPANY.length>0){\r\n\t\t\t\t// this.obj_personnel.COMPANY_SPECIFIC.model.company_id = this.obj_personnel.COMPANY[0].id;\r\n\t\t\t\t// console.log(tmp);\r\n\t\t\t\tthis.dd_companyChanged();\r\n\t\t\t}\r\n\t\t\tsettings.isNavigating = false;\r\n\r\n\t\t}, (failed)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(failed, \"error in fetching company specific data.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tloadAccreditation(global_company_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"ACCREDITATION_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_COMPANY_ID\", \"==\", global_company_id);\r\n\t\tvar accreditation = [];\r\n\t\tEntityManager().executeQuery(query).then((success)=>{\r\n\t\t\t_.each(success.results, (r)=>{\r\n\r\n\t\t\t\tvar job_group = this.obj_personnel.JOB_GROUP.find((x)=>{ return x.id==r.JOB_GRP_ID; });\r\n\t\t\t\tvar job = this.obj_personnel.JOB.find((x)=> { return x.value==r.JOB_ID; });\r\n\t\t\t\tvar division = this.obj_personnel.DIVISION.find((x)=>{ return x.id==r.DIVISION_ID; });\r\n\t\t\t\tvar _eff_start_dt = moment.utc(r.EFF_START_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\tvar _eff_end_dt = moment.utc(r.EFF_END_DT).format(\"MM/DD/YYYY\");\r\n\r\n\t\t\t\taccreditation.push({\r\n\t\t\t\t\taccreditation_id: r.ACCREDITATION_ID,\r\n\t\t\t\t\tglobal_company_id: r.GLOBAL_COMPANY_ID,\r\n\t\t\t\t\t// eff_start_dt: r.EFF_START_DT,\r\n\t\t\t\t\t// eff_end_dt: r.EFF_END_DT,\r\n\t\t\t\t\teff_start_dt: _eff_start_dt,\r\n\t\t\t\t\teff_end_dt: _eff_end_dt,\r\n\t\t\t\t\tdivision_id: r.DIVISION_ID,\r\n\t\t\t\t\tdivision_text: division.text,\r\n\t\t\t\t\tcategory_id: r.CATEGORY_ID,\t\t\t\t\t\r\n\t\t\t\t\tjob_grp_id: r.JOB_GRP_ID,\r\n\t\t\t\t\tjob_grp_text: job_group.text,\r\n\t\t\t\t\tjob_id: r.JOB_ID,\r\n\t\t\t\t\tjob_text: job.text,\r\n\t\t\t\t\tcompetency: r.COMPETENCY,\r\n\t\t\t\t\thome_fl: r.HOME_FL,\r\n\t\t\t\t\tentry_fl: r.ENTRY_FL,\r\n\t\t\t\t\taccreditation_memo: r.ACCREDITATION_MEMO\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.accreditation_list = accreditation;\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t}, (failed)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(failed, \"Error in fetching company specific data.\");\r\n\t\t});\r\n\t}\r\n\r\n\tloadSuspend(global_id, company_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar pred1 = breeze.Predicate.create('GLOBAL_ID', '==', global_id);\t\t\r\n\t\tvar pred2 = breeze.Predicate.create('SUSPEND_LEVEL', '==', 2);\r\n\t\tvar pred3 = breeze.Predicate.create(\"COMPANY_ID\", \"==\", company_id);\r\n\t\tvar finalPred = breeze.Predicate.and([pred1, pred2]);\r\n\t\tvar query = EntityQuery().from(\"SUSPEND_TRX\")\r\n\t\t\t\t\t.where(finalPred).orderByDesc(\"SUSPEND_ID\").take(1);\r\n\t\tvar suspend = [];\r\n\t\tEntityManager().executeQuery(query).then((success)=>{\r\n\t\t\t\r\n\t\t\tif(success.results.length>0){\r\n\t\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\t\tsuspend.push({\r\n\t\t\t\t\t\tsuspend_id: result.SUSPEND_ID,\r\n\t\t\t\t\t\tstart_dt: result.START_DT,\r\n\t\t\t\t\t\tend_dt: result.END_DT,\r\n\t\t\t\t\t\tcompany_id: result.COMPANY_ID\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspend_id = suspend[0].suspend_id;\r\n\r\n\t\t\t\tvar suspended_start_dt = moment.utc(suspend[0].start_dt).format(\"MM/DD/YYYY\");\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt = suspended_start_dt;\r\n\t\t\t\tif(suspended_start_dt.length>0)\r\n\t\t\t\t{\r\n\t\t\t\t\t$(\"#suspended_start_dt\").datepicker(\"setValue\", suspended_start_dt);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar suspended_end_dt = moment.utc(suspend[0].end_dt).format(\"MM/DD/YYYY\");\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt = suspended_end_dt;\r\n\t\t\t\tif(suspended_start_dt.length>0)\r\n\t\t\t\t{\t\t\t\t\t\t\r\n\t\t\t\t\t$(\"#suspended_end_dt\").datepicker(\"setValue\", suspended_end_dt);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t}, (error)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(error, \"Error in fetching company specific data.\");\r\n\t\t});\r\n\t\t// return suspend;\r\n\t}\r\n\r\n\tloadPersonnelBank(global_company_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar pred1 = breeze.Predicate.create(\"GLOBAL_COMPANY_ID\", \"==\", global_company_id);\r\n\t\tvar pred2 = breeze.Predicate.create(\"ACCOUNT_NO\", \"!=\", \"CHECK\");\r\n\t\tvar finalPred = breeze.Predicate.and([pred1, pred2]);\r\n\t\tvar query = EntityQuery().from(\"PERSONNEL_BANK_TRX\")\r\n\t\t\t\t\t.where(finalPred).take(1);\r\n\t\t\t\t\t// .where(\"GLOBAL_COMPANY_ID\", \"==\", global_company_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\t// console.log(\"PERSONNEL BANK\");\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.personnel_bank_id = s1.results[0].PERSONNEL_BANK_ID;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.global_company_id = s1.results[0].GLOBAL_COMPANY_ID;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.bank_id = s1.results[0].BANK_ID+\"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.acct_name = s1.results[0].ACCT_NAME;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.account_no = s1.results[0].ACCOUNT_NO;\r\n\t\t\t}else{\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.personnel_bank_id = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.global_company_id = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.bank_id=\"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.acct_name = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.account_no = \"\";\r\n\t\t\t}\r\n\t\t\tthis.dd_bankChanged();\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying personnel bank info.\");\r\n\t\t});\r\n\t}\r\n\r\n\tloadLog(global_company_id){\r\n\t\tvar tmpList = [];\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_COMPANY_MSTR\")\r\n\t\t\t\t\t.where(\"GLOBAL_COMPANY_ID\", \"==\", global_company_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tif(s1.results[0].CREATED_BY != null){\r\n\t\t\t\t\tvar user = s1.results[0].CREATED_BY;\r\n\t\t\t\t\tvar date = new Date(s1.results[0].CREATED_DT);\r\n\t\t\t\t\tthis.lblCreatedBy = user + ' ' + moment.utc(date).format(\"MM/DD/YYYY hh:mm A\");\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(s1.results[0].LAST_UPDATED_BY != null){\r\n\t\t\t\t\tvar user = s1.results[0].LAST_UPDATED_BY;\r\n\t\t\t\t\tvar date = new Date(s1.results[0].LAST_UPDATED_DT);\r\n\t\t\t\t\tthis.lblUpdatedBy = user + ' ' + moment.utc(date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// _.each(s1.results, (r)=>{\r\n\t\t\t// \tif(r.CREATED_BY != null){\r\n\t\t\t// \t\ttmpList.push({\r\n\t\t\t// \t\t\tuser: r.CREATED_BY,\r\n\t\t\t// \t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t// \t\t});\r\n\t\t\t// \t}\r\n\r\n\t\t\t// \tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t// \t\ttmpList.push({\r\n\t\t\t// \t\t\tuseR: r.LAST_UPDATED_BY,\r\n\t\t\t// \t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t// \t\t});\r\n\t\t\t// \t}\r\n\t\t\t// });\r\n\r\n\t\t\t// tmpList.sort(this.OrderByDate);\r\n\t\t\t// var LastIndex = tmpList.length-1;\r\n\t\t\t// if(tmpList.length>0){\r\n\r\n\t\t\t// \tthis.lblCreatedBy = tmpList[0].user + ' ' +moment.utc(tmpList[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t// \tif(tmpList.length>1){\r\n\t\t\t// \t\tthis.lblUpdatedBy = tmpList[LastIndex].user + ' ' + moment.utc(tmpList[LastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t// \t}else{\r\n\t\t\t// \t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t// \t}\r\n\r\n\t\t\t// }else{\r\n\t\t\t// \tthis.lblCreatedBy = \"\";\r\n\t\t\t// \tthis.lblUpdatedBy = \"\";\r\n\t\t\t// }\r\n\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tloadCompany(user_id, global_id){\r\n\t\tvar query = EntityQuery().from(\"COMPANY_USER_TRX\")\r\n\t\t\t\t\t.where(\"USER_ID\", \"==\", user_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\r\n\t\t\t\tvar company = this.obj_personnel.COMPANY.find((x)=>{\r\n\t\t\t\t\treturn x.id == r.COMPANY_ID;\r\n\t\t\t\t});\r\n\r\n\t\t\t\ttmp.push(company);\r\n\t\t\t});\r\n\t\t\tthis.ddCompany = tmp;\r\n\t\t\tif(this.ddCompany.length>0){\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.company_id = this.ddCompany[0].id;\r\n\t\t\t\tthis.loadGlobalCompany(global_id);\r\n\t\t\t}else{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"You don't have any access.\");\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tOrderByDate(a, b){\r\n\t\tif(a.date > b.date)\r\n\t\t\treturn 1;\r\n\t\tif(a.date < b.date)\r\n\t\t\treturn -1;\r\n\t\treturn 0;\t\t\r\n\t}\r\n\r\n\tloadJobDropdown(){\r\n\t\tthis.obj_personnel.JOB=[];\r\n\t\t_.each(this.obj_personnel.JOB_GROUP, (jc)=>{\r\n\t\t\tgetLookups().JOB_MSTR.forEach((j)=>{\r\n\t\t\t\tif(j.JOB_GRP_ID == jc.id){\r\n\t\t\t\t\tthis.obj_personnel.JOB.push({\r\n\t\t\t\t\t\t//id: j.JOB_ID,\r\n\t\t\t\t\t\tvalue: j.JOB_ID,\r\n\t\t\t\t\t\ttext: j.JOB_DESC,\r\n\t\t\t\t\t\tgroup: j.JOB_GRP_ID\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\tthis.obj_personnel.JOB.sort(this.OrderByText);\t\t\r\n\t\r\n\t}\r\n\r\n\tdd_companyChanged(){\r\n\r\n\t\tvar company_id = this.obj_personnel.COMPANY_SPECIFIC.model.company_id;\r\n\r\n\t\tif(company_id == 2 || company_id == 3 || company_id == 4  || company_id==7 || company_id == 8){\r\n\t\t\tthis._disableIDNo = false;\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.id_no = \"\";\r\n\t\t}else{\r\n\t\t\tthis._disableIDNo = true;\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.id_no = \"000000\";\r\n\t\t}\r\n\r\n\t\tvar global_company = this.obj_personnel.COMPANY_SPECIFIC.list.find((gc)=>{\r\n\t\t\treturn gc.company_id == company_id;\r\n\t\t});\r\n\r\n\t\tif(getLookups() != null){\r\n\r\n\t\t\tthis.obj_personnel.DIVISION=[];\r\n\t\t\tthis.obj_personnel.CATEGORY=[];\r\n\t\t\tthis.obj_personnel.JOB_GROUP=[];\r\n\t\t\t// if(selectedCompany.id == 1){\r\n\t\t\t// \tthis.obj_personnel.JOB_CATEGORY.push({\r\n\t\t\t// \t\tid:0,\r\n\t\t\t// \t\tvalue: \"\",\r\n\t\t\t// \t\ttext: \"(OBSOLETE-NO-USE)\"\r\n\t\t\t// \t});\r\n\t\t\t// }\r\n\r\n\t\t\tgetLookups().DIVISION_MSTR.forEach((d)=>{\r\n\t\t\t\tif(d.COMPANY_ID == company_id){\r\n\t\t\t\t\tthis.obj_personnel.DIVISION.push({\r\n\t\t\t\t\t\tid: d.DIVISION_ID,\r\n\t\t\t\t\t\tlevel: d.DIVISION_LEVEL,\r\n\t\t\t\t\t\tvalue: d.DIVISION_CD,\r\n\t\t\t\t\t\ttext: d.DIVISION_NAME\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgetLookups().CATEGORY_MSTR.forEach((c)=>{\r\n\t\t\t\tif(c.COMPANY_ID == company_id){\r\n\t\t\t\t\tthis.obj_personnel.CATEGORY.push({\r\n\t\t\t\t\t\tid: c.CATEGORY_ID,\r\n\t\t\t\t\t\tvalue: c.CATEGORY_CD,\r\n\t\t\t\t\t\ttext: c.CATEGORY_DESC\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgetLookups().JOB_GRP_MSTR.forEach((j)=>{\r\n\t\t\t\tif(j.COMPANY_ID == company_id){\r\n\t\t\t\t\tthis.obj_personnel.JOB_GROUP.push({\r\n\t\t\t\t\t\tid: j.JOB_GRP_ID,\r\n\t\t\t\t\t\tvalue: j.JOB_GRP_CD,\r\n\t\t\t\t\t\ttext: j.JOB_GRP_DESC\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.JOB_GROUP.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.CATEGORY.sort(this.OrderByText);\r\n\r\n\t\t\tif(global_company != null && global_company != undefined){\r\n\t\t\t\tthis._disableStatus = false;\r\n\t\t\t\tthis._disableTabsInput = false;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.global_company_id = global_company.global_company_id;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.id_no = global_company.id_no;\r\n\t\t\t\t// console.log(global_company.start_dt);\r\n\t\t\t\tif(moment(global_company.start_dt).isValid()){\r\n\t\t\t\t\tvar startDt = moment.utc(global_company.start_dt).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\tif(startDt != \"01/01/0001\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.start_dt = startDt;\r\n\t\t\t\t\t\t$(\"#_start_dt\").datepicker(\"setValue\", new Date(startDt));\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.start_dt = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.start_dt = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(moment(global_company.end_dt).isValid()){\r\n\t\t\t\t\tvar endDt = moment.utc(global_company.end_dt).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\tif(endDt != \"01/01/0001\"){\r\n\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.end_dt = endDt;\r\n\t\t\t\t\t\t$(\"#_end_dt\").datepicker(\"setValue\", new Date(endDt));\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.end_dt=\"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.end_dt=\"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(moment(global_company.kapamilya_dt).isValid()){\r\n\t\t\t\t\tvar kapamilya_dt = moment.utc(global_company.kapamilya_dt).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\tif(kapamilya_dt != \"01/01/0001\"){\r\n\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.kapamilya_dt = kapamilya_dt;\r\n\t\t\t\t\t\t$(\"#kapamilya_dt\").datepicker(\"setValue\", new Date(kapamilya_dt));\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.kapamilya_dt = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.kapamilya_dt = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(moment(global_company.membership_dt).isValid()){\r\n\t\t\t\t\tvar membership_dt = moment.utc(global_company.membership_dt).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\tif(membership_dt != \"01/01/0001\"){\r\n\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.membership_dt = membership_dt;\r\n\t\t\t\t\t\t$(\"#membership_dt\").datepicker(\"setValue\", new Date(membership_dt));\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.membership_dt = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.membership_dt = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(moment(global_company.cessation_end_dt).isValid()){\r\n\t\t\t\t\tvar cessation_dt = moment.utc(global_company.cessation_end_dt).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt = cessation_dt;\r\n\t\t\t\t\t$(\"#cessation_end_dt\").datepicker(\"setValue\", new Date(cessation_dt));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_dt = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.exclusive_fl = global_company.exclusive_fl==\"1\"?true:false;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.status_cd = global_company.status_cd;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd = global_company.cessation_reason_cd;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.remarks = global_company.remarks;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.division_id = global_company.division_id+\"\";\r\n\t\t\t\t// this.obj_personnel.COMPANY_SPECIFIC.model.division_cd = this.obj_personnel.DIVISION[0].value;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.location_cd = global_company.location_cd;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.category_id= global_company.category_id+\"\";\t\t\t\t\t\r\n\t\t\t\t// this.obj_personnel.COMPANY_SPECIFIC.model.category_id = this.obj_personnel.CATEGORY[0].value;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.payroll_grp_id = global_company.payroll_grp_id+\"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.professional_type_cd = global_company.professional_type_cd;\r\n\t\t\t\tif(global_company.status_cd == \"SUSPEND\"){\t\t\t\t\t\r\n\t\t\t\t\tthis.loadSuspend(global_company.global_id, global_company.company_id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.accreditation = global_company.accreditation;\r\n\t\t\t\tthis.loadJobDropdown();\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.job_id = global_company.job_id+\"\";\r\n\t\t\t\tthis.loadAccreditation(global_company.global_company_id);\r\n\t\t\t\tthis.loadPersonnelBank(global_company.global_company_id);\r\n\t\t\t\tthis.loadLog(global_company.global_company_id);\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.inactive_reason_cd = global_company.inactive_reason_cd;\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis._disableStatus = true;\r\n\t\t\t\tthis._disableTabsInput = true;\r\n\t\t\t\t// this.obj_personnel.COMPANY_SPECIFIC.model = {};\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.global_company_id = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.status_cd=\"ACTV\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.start_dt = \"\";\t\t\t\t\t\t\t\t\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.end_dt= \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.kapamilya_dt = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.membership_dt = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.remarks = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.exclusive_fl = false;\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\tif(this.obj_personnel.DIVISION.length>0)\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.division_id = this.obj_personnel.DIVISION[0].id;\r\n\t\t\t\tif(this.obj_personnel.CATEGORY.length>0)\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.category_id = this.obj_personnel.CATEGORY[0].id;\t\t\t\r\n\r\n\t\t\t\tthis.loadJobDropdown();\t\t\t\t\r\n\r\n\t\t\t\tif(this.obj_personnel.JOB.length>0)\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.job_id = this.obj_personnel.JOB[0].value;\r\n\r\n\t\t\t\tif(this.obj_personnel.PAYROLL_GROUP.length>0)\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.payroll_grp_id = this.obj_personnel.PAYROLL_GROUP[0].id;\r\n\t\t\t\tif(this.obj_personnel.PROFESSIONAL_TYPE.length>0)\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.professional_type_cd = this.obj_personnel.PROFESSIONAL_TYPE[0].value;\r\n\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspend_id = 0;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.accreditation_list=[];\r\n\t\t\t\t\r\n\t\t\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank != undefined && this.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank != null){\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.personnel_bank_id = \"\";\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.global_company_id = \"\";\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.bank_id=\"\";\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.acct_name = \"\";\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.account_no = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.inactive_reason_cd = \"\";\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.JOB_GROUP.length>0){\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_job_grp_id = this.obj_personnel.JOB_GROUP[0].id;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis.dd_jobGroupChange();\r\n\t\t\tthis.dd_divisionChanged();\r\n\t\t\tthis.dd_statusChanged();\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\tdd_divisionChanged(){\r\n\t\tvar division_id  = this.obj_personnel.COMPANY_SPECIFIC.model.division_id;\r\n\t\tvar division = this.obj_personnel.DIVISION.find((d)=>{\r\n\t\t\treturn d.id == division_id;\r\n\t\t});\r\n\r\n\t\t// console.log(this.obj_personnel.COMPANY_SPECIFIC.model.division_cd);\r\n\t\tif((division != undefined && division != null) && division.text.indexOf(\"REGIONAL DIVISION\")  != -1){\r\n\t\t\tthis._disableLocations = false;\r\n\t\t}else{\r\n\t\t\tthis._disableLocations = true;\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.location_cd = \"--NONE--\";\r\n\t\t}\r\n\t}\r\n\r\n\tdd_statusChanged(){\r\n\t\tvar stat = this.obj_personnel.COMPANY_SPECIFIC.model.status_cd;\r\n\t\tif(stat==\"ACTV\"){\r\n\t\t\tthis._hideInactiveField = true;\r\n\t\t\tthis._hideSuspendField = true;\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd=\"\";\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt=\"\";\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.remarks = \"\";\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt = \"\";\r\n\t\t\t$(\"#suspended_start_dt\").val(\"\");\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt=\"\";\r\n\t\t\t$(\"#suspended_end_dt\").val(\"\");\r\n\t\t\tthis.dd_cessationStatusChanged();\r\n\t\t}else if(stat==\"INACTV\"){\r\n\t\t\tthis._hideInactiveField = false;\r\n\t\t\tthis._hideSuspendField = true;\r\n\t\t\tthis.dd_cessationStatusChanged();\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt = \"\";\r\n\t\t\t$(\"#suspended_start_dt\").val(\"\");\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt=\"\";\r\n\t\t\t$(\"#suspended_end_dt\").val(\"\");\r\n\t\t}else if(stat==\"SUSPEND\"){\t\t\t\r\n\t\t\tthis._hideInactiveField = true;\r\n\t\t\tthis._hideSuspendField = false;\t\t\t\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd=\"\";\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt=\"\";\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.remarks = \"\";\r\n\t\t}\r\n\t}\r\n\r\n\tdd_cessationStatusChanged(){\r\n\t\tvar cess_cd = this.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd;\r\n\t\tswitch(cess_cd){\t\t\t\r\n\t\t\tcase \"DECEASED\":\r\n\t\t\tcase \"RETIRED\":\r\n\t\t\tcase \"RESIGNED\":\r\n\t\t\tcase \"END_CONTRACT\":\r\n\t\t\tcase \"TERMINATION\": this._hideCessationDate = false;\r\n\t\t\t\t\t\t\t\tthis._hideInactiveReason = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"INACTIVE\": this._hideInactiveReason = false;\r\n\t\t\t\t\t\t\t this._hideCessationDate = true;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: this._hideCessationDate = true;\r\n\t\t\t\t\t this._hideInactiveReason = true;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt = \"\";\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(){\r\n\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.start_dt = $(\"#_start_dt\").val();\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt = $(\"#cessation_end_dt\").val();\r\n\t\tvar strValidation = \"\";\r\n\r\n\t\t// if(this.obj_personnel.COMPANY_SPECIFIC.model.start_dt == null || this.obj_personnel.COMPANY_SPECIFIC.model.start_dt.length==0){\r\n\t\t// \tstrValidation+= \"No start date specified. <br/>\";\r\n\t\t// }\r\n\r\n\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.id_no == undefined || this.obj_personnel.COMPANY_SPECIFIC.model.id_no == null || $.trim(this.obj_personnel.COMPANY_SPECIFIC.model.id_no).length==0){\r\n\t\t\tstrValidation+=\"No id number specified. <br/>\";\r\n\t\t}\t\t\r\n\r\n\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.status_cd == \"SUSPEND\"){\r\n\r\n\t\t\tvar sus_start = null;\r\n\t\t\tvar sus_end = null;\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt = $(\"#suspended_start_dt\").val();\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt = $(\"#suspended_end_dt\").val();\r\n\t\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt != undefined && this.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt != null && this.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt.length>0){\r\n\t\t\t\tif(!moment(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid suspension start date.<br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsus_start = new Date(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+= \"No start date of suspension specified.<br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt != undefined && this.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt != null && this.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt.length>0){\t\t\t\r\n\t\t\t\tif(!moment(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid suspension end date.<br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsus_end = new Date(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+= \"No end date of suspension specified.<br/>\";\t\r\n\t\t\t}\r\n\r\n\t\t\tif(sus_start != null && sus_end != null){\r\n\t\t\t\tif(sus_end < sus_start){\r\n\t\t\t\t\tstrValidation+= \"end date of suspension cannot be greater than the start date.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else if(this.obj_personnel.COMPANY_SPECIFIC.model.status_cd == \"INACTV\"){\r\n\t\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd == undefined || this.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd == null || this.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd.length == 0){\r\n\t\t\t\tstrValidation+=\"No Reason of cessation specified.<br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(!this._hideCessationDate){\r\n\t\t\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt != undefined && this.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt != null && this.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt.length>0){\r\n\t\t\t\t\tif(!moment(this.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt).isValid()){\r\n\t\t\t\t\t\tstrValidation += \"Invalid cessation date.<br/>\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar cess_cd = this.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd;\r\n\t\t\t\t\t\tif(cess_cd==\"DECEASED\"){\r\n\t\t\t\t\t\t\tvar cessation_dt = new Date(this.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt);\r\n\t\t\t\t\t\t\tvar today = new Date();\r\n\t\t\t\t\t\t\tif(cessation_dt > today)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tstrValidation+=\"Are you planning to kill the user?<br/>\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tstrValidation+=\"No cessation date specified.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar selectedBank = this.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.bank_id;\r\n\t\tif(selectedBank != undefined && selectedBank.length > 0){\r\n\t\t\tvar account_no = this.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.account_no;\r\n\t\t\tif(account_no == undefined || account_no.length==0){\r\n\t\t\t\tstrValidation+= \"No account number specified.<br/>\";\r\n\t\t\t}else if(account_no.length!=10){\r\n\t\t\t\tstrValidation+=\"Account number must be 10 digit.<br/>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.end_dt = $(\"#_end_dt\").val();\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.kapamilya_dt = $(\"#kapamilya_dt\").val();\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.membership_dt = $(\"#membership_dt\").val();\r\n\t\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.exclusive_fl == undefined)\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.exclusive_fl = false;\r\n\t\t\t// console.log(this.obj_personnel.COMPANY_SPECIFIC.model.company_id);\r\n\t\t\t// console.log(this.obj_personnel.COMPANY_SPECIFIC.model.global_company_id);\r\n\t\t\tvar cid = this.obj_personnel.COMPANY_SPECIFIC.model.company_id;\r\n\t\t\tvar gcid = this.obj_personnel.COMPANY_SPECIFIC.model.global_company_id;\r\n\t\t\tif(gcid.length==0){\r\n\t\t\t\tthis.saveCompany(cid);\r\n\t\t\t}else{\r\n\t\t\t\tthis.updateCompany(gcid);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconvertToGMT8(date){\r\n\t\tif(date==undefined || date == null || date.length==0)\r\n\t\t\treturn \"\";\r\n\t\tvar tempDt = moment(date).add(8, 'hours');\r\n\t\treturn new Date(tempDt);\r\n\t}\r\n\r\n\tsaveCompany(company_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n\r\n  \t\tvar lstart_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.start_dt);\r\n  \t\tvar lend_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.end_dt);\r\n  \t\tvar lkapmilya_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.kapamilya_dt);\r\n  \t\tvar lmembership_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.membership_dt);\r\n  \t\tvar lcessation_end_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt);\r\n\r\n\t\tvar LastID = \"000000\";\r\n\t\tvar currentYear = (new Date()).getFullYear().toString().substring(2,4);\r\n\t\tvar query = EntityQuery().from(\"COMPANY_SPECIFIC_INDEX\")\r\n\t\t\t\t\t.where(\"COMPANY_SPECIFIC_ID\", \"==\", company_id).take(1);\r\n\t\tEntityManager().executeQuery(query).then((s)=>{\r\n\t\t\tLastID = s.results[0].COMPANY_INDEX;\r\n\t\t\tvar lastYear = LastID.toString().substring(0,2);\r\n\t\t\tif(lastYear != currentYear && this.obj_personnel.COMPANY_SPECIFIC.model.id_no == \"000000\"){\r\n\t\t\t\tLastID = currentYear + \"0001\";\t\t\r\n\t\t\t}else{\r\n\t\t\t\tLastID = this.obj_personnel.COMPANY_SPECIFIC.model.id_no;\r\n\t\t\t}\r\n\r\n\t\t\tquery = EntityQuery().from(\"GLOBAL_COMPANY_MSTR\")\r\n\t\t\t\t\t.orderByDesc(\"GLOBAL_COMPANY_ID\").take(1);\r\n\t\t\tEntityManager().executeQuery(query).then((s2)=>{\r\n\t\t\t\tvar maxID = 1;\r\n\t\t\t\tif(s2.results.length>0){\r\n\t\t\t\t\tmaxID = s2.results[0].GLOBAL_COMPANY_ID+1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar global_company_mstr = {\r\n\t\t\t\t\tGLOBAL_ID: this.obj_personnel.global_indiv_id,\r\n\t\t\t\t\tSTART_DT: lstart_dt.length==0?null: lstart_dt,\r\n\t\t\t\t\tEND_DT: lend_dt.length==0?null:lend_dt,\r\n\t\t\t\t\tCOMPANY_ID: company_id,\r\n\t\t\t\t\tGLOBAL_COMPANY_ID: maxID,\r\n\t\t\t\t\tID_NO: LastID,\r\n\t\t\t\t\tCESSATION_REASON_CD: this.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd,\r\n\t\t\t\t\tCATEGORY_ID: this.obj_personnel.COMPANY_SPECIFIC.model.category_id,\r\n\t\t\t\t\tDIVISION_ID: this.obj_personnel.COMPANY_SPECIFIC.model.division_id,\r\n\t\t\t\t\tPAYROLL_GRP_ID: this.obj_personnel.COMPANY_SPECIFIC.model.payroll_grp_id,\r\n\t\t\t\t\tJOB_ID: this.obj_personnel.COMPANY_SPECIFIC.model.job_id,\r\n\t\t\t\t\tPROFESSIONAL_TYPE_CD: this.obj_personnel.COMPANY_SPECIFIC.model.professional_type_cd,\r\n\t\t\t\t\tSTATUS_CD: this.obj_personnel.COMPANY_SPECIFIC.model.status_cd,\r\n\t\t\t\t\tEXCLUSIVE_FL: this.obj_personnel.COMPANY_SPECIFIC.model.exclusive_fl?\"1\":\"0\",\r\n\t\t\t\t\tREMARKS: this.obj_personnel.COMPANY_SPECIFIC.model.remarks,\r\n\t\t\t\t\tKAPAMILYA_DT: lkapmilya_dt.length==0?null: lkapmilya_dt,\r\n\t\t\t\t\tMEMBERSHIP_DT: lmembership_dt.length==0?null: lmembership_dt,\r\n\t\t\t\t\tLOCATION_CD: this.obj_personnel.COMPANY_SPECIFIC.model.location_cd,\r\n\t\t\t\t\tCESSATION_END_DATE: lcessation_end_dt.length==0? null: lcessation_end_dt,\t\t\t\t\t\r\n\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tvar entity = EntityManager().createEntity(\"GLOBAL_COMPANY_MSTR\", global_company_mstr);\r\n\t\t\t\tEntityManager().addEntity(entity);\r\n\t\t\t\tEntityManager().saveChanges().then((s3)=>{\r\n\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\ttoastr.success(\"\", \"Record saved.\");\t\t\t\t\t\r\n\t\t\t\t\tthis.loadGlobalCompany(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t\tif(company_id == 2 || company_id == 3 || company_id == 4  || company_id==7 || company_id == 8){\r\n\t\t\t\t\t\tthis.updateCompanyIndex(company_id, LastID);\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}, (e3)=>{\r\n\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\tif(entity != null){\r\n\t\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// console.log(e3);\r\n\t\t\t\t\ttoastr.error(e3, \"Error in saving global company mstr.\");\r\n\t\t\t\t});\r\n\t\t\t},(e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t// console.log(e2);\r\n\t\t\t\ttoastr.clear(e2, \"Error in getting global company id.\")\r\n\t\t\t});\r\n\t\t\t\r\n\t\t},(e)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\t// console.log(e);\r\n\t\t\ttoastr.error(e, \"Error in generating ID.\");\r\n\t\t});\r\n\t\t\r\n\t}\r\n\r\n\tupdateCompany(global_company_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n\r\n  \t\tvar company_id = this.obj_personnel.COMPANY_SPECIFIC.model.company_id;\r\n\t\tvar lstart_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.start_dt);\r\n  \t\tvar lend_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.end_dt); \r\n  \t\tvar lkapamilya_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.kapamilya_dt);\r\n  \t\tvar lmembership_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.membership_dt);\r\n  \t\tvar lcessation_end_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt);\r\n  \t\tvar lsuspend_start_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt);\r\n  \t\tvar lsuspend_end_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt);\r\n\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_COMPANY_MSTR\")\r\n\t\t\t\t\t.where(\"GLOBAL_COMPANY_ID\", \"==\", global_company_id);\r\n\t\tEntityManager().executeQuery(query).then((s)=>{\r\n\r\n\t\t\tif(company_id == 2 || company_id == 3 || company_id == 4  || company_id==7 || company_id == 8){\r\n\t\t\t\ts.results[0].ID_NO = this.obj_personnel.COMPANY_SPECIFIC.model.id_no;\r\n\t\t\t}\r\n\r\n\t\t\ts.results[0].START_DT = lstart_dt;\r\n\t\t\ts.results[0].END_DT = lend_dt;\r\n\t\t\ts.results[0].KAPAMILYA_DT = lkapamilya_dt;\r\n\t\t\ts.results[0].MEMBERSHIP_DT = lmembership_dt;\r\n\t\t\ts.results[0].EXCLUSIVE_FL = this.obj_personnel.COMPANY_SPECIFIC.model.exclusive_fl?\"1\":\"0\";\r\n\t\t\ts.results[0].DIVISION_ID = this.obj_personnel.COMPANY_SPECIFIC.model.division_id;\r\n\t\t\ts.results[0].LOCATION_CD = this.obj_personnel.COMPANY_SPECIFIC.model.location_cd;\r\n\t\t\ts.results[0].CATEGORY_ID = this.obj_personnel.COMPANY_SPECIFIC.model.category_id;\r\n\t\t\ts.results[0].JOB_ID = this.obj_personnel.COMPANY_SPECIFIC.model.job_id;\r\n\t\t\ts.results[0].PAYROLL_GRP_ID = this.obj_personnel.COMPANY_SPECIFIC.model.payroll_grp_id;\r\n\t\t\ts.results[0].PROFESSIONAL_TYPE_CD = this.obj_personnel.COMPANY_SPECIFIC.model.professional_type_cd;\r\n\t\t\ts.results[0].STATUS_CD = this.obj_personnel.COMPANY_SPECIFIC.model.status_cd;\r\n\t\t\tswitch(this.obj_personnel.COMPANY_SPECIFIC.model.status_cd){\t\t\t\t\r\n\t\t\t\tcase \"INACTV\":\r\n\t\t\t\t\ts.results[0].CESSATION_REASON_CD = this.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd;\r\n\t\t\t\t\ts.results[0].CESSATION_END_DATE = lcessation_end_dt.length==0?null: lcessation_end_dt;\r\n\t\t\t\t\ts.results[0].INACTIVE_REASON_CD = this.obj_personnel.COMPANY_SPECIFIC.model.inactive_reason_cd;\r\n\t\t\t\t\ts.results[0].REMARKS = this.obj_personnel.COMPANY_SPECIFIC.model.remarks;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"SUSPEND\": \r\n\t\t\t\tcase \"ACTV\": \r\n\t\t\t\t\ts.results[0].CESSATION_REASON_CD = null;\r\n\t\t\t\t\ts.results[0].CESSATION_END_DATE = null;\r\n\t\t\t\t\ts.results[0].REMARKS = null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\ts.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s1)=>{\r\n\r\n\t\t\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.status_cd == \"SUSPEND\"){\r\n\t\t\t\t\t// this.obj_personnel.COMPANY_SPECIFIC.model.suspend_id\r\n\t\t\t\t\t// console.log(this.obj_personnel.COMPANY_SPECIFIC.model.suspend_id); \r\n\t\t\t\t\tvar suspend_id = this.obj_personnel.COMPANY_SPECIFIC.model.suspend_id;\r\n\t\t\t\t\tif(suspend_id == undefined || suspend_id == null || suspend_id==0){\r\n\t\t\t\t\t\t//insert\r\n\t\t\t\t\t\tthis.saveSuspend(suspend_id, lsuspend_start_dt, lsuspend_end_dt);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//update\r\n\t\t\t\t\t\tthis.updateSuspend(suspend_id, lsuspend_start_dt, lsuspend_end_dt);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar pbi = this.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.personnel_bank_id; \r\n\t\t\t\tvar bank_id = this.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.bank_id;\r\n\t\t\t\tvar account_name = this.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.acct_name;\r\n\t\t\t\tvar account_no = this.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.account_no;\r\n\t\t\t\tif(pbi == undefined || pbi.toString().length==0){\r\n\t\t\t\t\tif(bank_id != undefined && bank_id.toString().length>0){\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.savePersonnelBank(global_company_id, bank_id, account_name, account_no);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(pbi != undefined && pbi.toString().length>0){\r\n\t\t\t\t\tif(bank_id == undefined || bank_id.toString().length==0){\r\n\t\t\t\t\t\tthis.updatePersonnelBank(pbi, bank_id, account_name, \"CHECK\");\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.updatePersonnelBank(pbi, bank_id, account_name, account_no);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.loadGlobalCompany(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.success(\"\",\"Record saved.\");\r\n\r\n\t\t\t},(e1)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.error(e1, \"Error in updating global company info.\");\r\n\t\t\t});\r\n\t\t},(e)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e, \"Error in updating global company.\");\r\n\t\t});\r\n\t}\r\n\r\n\tsaveSuspend(company_id, start_dt, end_dt){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null\r\n\t\tdateToday = moment(new Date()).add(8, \"hours\");\r\n\t\tdateToday = new Date(dateToday);\r\n\r\n\t\tvar query = EntityQuery().from(\"SUSPEND_TRX\")\r\n\t\t\t\t\t\t\t\t.orderByDesc(\"SUSPEND_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s2)=>{\r\n\t\t\tvar maxID = 1;\r\n\t\t\tif(s2.results.length>0){\r\n\t\t\t\tmaxID = s2.results[0].SUSPEND_ID+1;\r\n\t\t\t}\r\n\t\t\tvar suspend_trx = {\r\n\t\t\t\tSUSPEND_ID: maxID,\r\n\t\t\t\tGLOBAL_ID: this.obj_personnel.global_indiv_id,\r\n\t\t\t\tCOMPANY_ID: company_id,\r\n\t\t\t\tSUSPEND_LEVEL: 2,\r\n\t\t\t\tSTART_DT: start_dt,\r\n\t\t\t\tEND_DT: end_dt,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"SUSPEND_TRX\", suspend_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s3)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t// console.log(\"Suspend record has been saved.\");\r\n\t\t\t}, (e3)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.error(e3, \"Error in saving suspend info.\");\r\n\t\t\t});\r\n\t\t}, (e2)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e2, \"Error in quering suspend id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdateSuspend(suspend_id, start_dt, end_dt){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null\r\n\t\tdateToday = moment(new Date()).add(8, \"hours\");\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"SUSPEND_TRX\")\r\n\t\t\t\t.where(\"SUSPEND_ID\", \"==\", suspend_id);\r\n\t\tEntityManager().executeQuery(query).then((s4)=>{\r\n\t\t\ts4.results[0].START_DT = start_dt;\r\n\t\t\ts4.results[0].END_DT = end_dt;\r\n\t\t\ts4.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts4.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\tEntityManager().saveChanges().then((s5)=>{\r\n\t\t\t\tconsole.log(\"Suspend record has been updated.\");\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t}, (e5)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.error(e5, \"Error in updating suspend info.\");\r\n\t\t\t});\r\n\t\t}, (e4)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e4, \"Error in querying suspend info.\");\r\n\t\t});\r\n\t}\r\n\r\n\tsavePersonnelBank(global_company_id, bank_id, acct_name, account_no ){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null\r\n\t\tdateToday = moment(new Date()).add(8, \"hours\");\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"PERSONNEL_BANK_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"PERSONNEL_BANK_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((q1)=>{\r\n\t\t\tvar maxID = 1;\r\n\t\t\tif(q1.results.length>0)\r\n\t\t\t{\r\n\t\t\t\tmaxID = q1.results[0].PERSONNEL_BANK_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar personnel_bank_trx = {\r\n\t\t\t\tPERSONNEL_BANK_ID: maxID,\r\n\t\t\t\tGLOBAL_COMPANY_ID: global_company_id,\r\n\t\t\t\tBANK_ID: bank_id,\r\n\t\t\t\tACCT_NAME: acct_name,\r\n\t\t\t\tACCOUNT_NO: account_no,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"PERSONNEL_BANK_TRX\", personnel_bank_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\tthis.loadPersonnelBank(global_company_id);\r\n\t\t\t\t// toastr.success(\"\",\"\");\r\n\t\t\t\t// console.log(\"personnel bank save success.\");\r\n\t\t\t},(e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.error(e2, \"Error in saving personnel bank info.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying personnel bank id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdatePersonnelBank(personnel_bank_id, bank_id, acct_name, account_no){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null\r\n\t\tdateToday = moment(new Date()).add(8, \"hours\");\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"PERSONNEL_BANK_TRX\")\r\n\t\t\t\t\t.where(\"PERSONNEL_BANK_ID\", \"==\", personnel_bank_id);\r\n\t\tEntityManager().executeQuery(query).then((q1)=>{\r\n\r\n\t\t\tif(q1.results.length==0){\r\n\t\t\t\ttoastr.error(\"\", \"No personnel bank with an ID of \"+personnel_bank_id+\" found.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(account_no != \"CHECK\"){\r\n\t\t\t\tq1.results[0].BANK_ID = bank_id;\r\n\t\t\t}\r\n\r\n\t\t\tq1.results[0].ACCOUNT_NO = account_no;\r\n\t\t\tq1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\tq1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\t// toastr.success(\"\", \"Bank info\");\r\n\t\t\t\tthis.loadPersonnelBank(this.obj_personnel.COMPANY_SPECIFIC.model.global_company_id);\r\n\t\t\t\tconsole.log(\"\", \"bank info has been updated.\");\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.error(e2, \"Error in updating personnel bank.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(\"\", \"Error in querying personnel bank.\");\r\n\t\t});\r\n\t}\r\n\r\n\tdd_bankChanged(){\r\n\t\tvar bank_id = this.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.bank_id;\r\n\t\tif(bank_id != undefined && bank_id != null && bank_id.length>0){\r\n\t\t\tvar bank = this.obj_personnel.BANK.find((b)=>{\r\n\t\t\t\treturn b.id == bank_id;\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.bank_nm = bank.long_nm;\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.acct_name = this.obj_personnel.HEADER.last_name+\", \"+this.obj_personnel.HEADER.given_name+\" \"+this.obj_personnel.HEADER.middle_name;\r\n\t\t}else{\r\n\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.bank_nm = \"\";\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.acct_name = \"\";\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.account_no = \"\";\r\n\t\t}\r\n\t}\r\n\r\n\tupdateCompanyIndex(company_id, lastIndex){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"COMPANY_SPECIFIC_INDEX\")\r\n\t\t\t\t\t.where(\"COMPANY_SPECIFIC_ID\", \"==\", company_id);\r\n\t\tEntityManager().executeQuery(query).then((s)=>{\r\n\t\t\tif(s.results.length>0){\r\n\t\t\t\tvar company_index = parseInt(s.results[0].COMPANY_INDEX.toString());\r\n\t\t\t\ts.results[0].COMPANY_INDEX = company_index+1;\r\n\t\t\t\tEntityManager().saveChanges().then((s1)=>{\r\n\t\t\t\t\t//Do nothing.\r\n\t\t\t\t\tconsole.log(\"index was updated.\");\r\n\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t},(e1)=>{\r\n\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\ttoastr.error(e1, \"Error in updating company specific index.\");\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}, (e)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e,\"Error in querying company specific index.\");\r\n\t\t});\r\n\t}\r\n\r\n\tbtnAdd_accreditation(){\r\n\t\tthis.accreditation_status = \"ADD\";\r\n\t}\r\n\r\n\tbtnEdit_accreditation(item){\r\n\t\t// console.log(item);\r\n\t\tthis.accreditation_status = \"EDIT\";\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_id = item.accreditation_id;\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_job_grp_id = item.job_grp_id;\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_job_id = item.job_id;\r\n\t\tvar start_dt = moment.utc(item.eff_start_dt).format(\"MM/DD/YYYY\");\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_start_dt = start_dt;\r\n\t\tvar end_dt = moment.utc(item.eff_end_dt).format(\"MM/DD/YYYY\");\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_end_dt = end_dt;\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_competency = item.competency;\r\n\t}\r\n\r\n\tbtnRemove_accreditation(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove this accreditation record?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n  \t\t\t\t\tsettings.isNavigating = true;\r\n\t  \t\t\t\t//alert(\"Confirmed delete.\");\r\n  \t\t\t\t\tvar query = EntityQuery().from('ACCREDITATION_TRX').where('ACCREDITATION_ID', '==', item.accreditation_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The accreditation info was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadAccreditation(this.obj_personnel.COMPANY_SPECIFIC.model.global_company_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing accreditation info.\");\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tclearAccreditationField(){\r\n\t\tthis.accreditation_status=\"\";\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_id=\"\";\r\n\t\tif(this.obj_personnel.JOB_GROUP.length>0){\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_job_grp_id = this.obj_personnel.JOB_GROUP[0].id;\r\n\t\t\tthis.dd_jobGroupChange();\r\n\r\n\t\t\tif(this.obj_personnel.JOB.length>0){\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_job_id = this.obj_personnel.JOB[0].id;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_competency = \"\";\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_start_dt = \"\";\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_end_dt = \"\";\r\n\t\t$(\"#a_start_dt\").val(\"\");\r\n\t\t$(\"#a_end_dt\").val(\"\");\r\n\t}\r\n\r\n\tDigit(event){\r\n\t\treturn isDigit(event);\r\n\t}\r\n\r\n\tvalidateAccreditation(){\r\n\t\tvar strValidation = \"\";\r\n\t\tvar _competency = this.obj_personnel.COMPANY_SPECIFIC.model.a_competency;\r\n\t\tvar _start_dt = $(\"#a_start_dt\").val();\r\n\t\tvar _end_dt = $(\"#a_end_dt\").val();\r\n\t\tif(_competency == undefined || _competency == null || _competency.length==0){\r\n\t\t\tstrValidation+= \"No competency level specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(_start_dt == undefined || _start_dt==null || _start_dt.length==0){\r\n\t\t\tstrValidation+=\"No start date specified. <br/>\";\r\n\t\t}else{\r\n\t\t\tif(_end_dt == undefined || _end_dt==null || _end_dt.length==0){\r\n\t\t\t\tstrValidation+=\"No end date specified. <br/>\";\r\n\t\t\t}else{\r\n\t\t\t\tif(!moment(_start_dt).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid start date. <br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(!moment(_end_dt).isValid()){\r\n\t\t\t\t\t\tstrValidation+=\"Invalid end date. <br/>\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar d1 = new Date(_start_dt);\r\n\t\t\t\t\t\tvar d2 = new Date(_end_dt);\r\n\t\t\t\t\t\tif(d2 < d1){\r\n\t\t\t\t\t\t\tstrValidation+=\"end date cannot be greater than start date. <br/>\";\r\n\t\t\t\t\t\t}else{ \r\n\t\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_start_dt = _start_dt;\r\n\t\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_end_dt = _end_dt;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\t// console.log(\"save accreditation.\");\r\n\t\t\tif(this.accreditation_status == \"ADD\"){\r\n\t\t\t\tthis.saveAccreditation(this.obj_personnel.COMPANY_SPECIFIC.model.global_company_id);\r\n\t\t\t}else if(this.accreditation_status==\"EDIT\"){\r\n\t\t\t\tvar accreditation_id = this.obj_personnel.COMPANY_SPECIFIC.model.a_id;\r\n\t\t\t\tthis.updateAccreditation(accreditation_id);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tsaveAccreditation(global_company_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n\r\n  \t\tvar query = EntityQuery().from(\"ACCREDITATION_TRX\")\r\n  \t\t\t\t\t.orderByDesc(\"ACCREDITATION_ID\").take(1);\r\n  \t\tEntityManager().executeQuery(query).then((s1)=>{\r\n  \t\t\tvar maxID = 1;\r\n  \t\t\tif(s1.results.length>0){\r\n  \t\t\t\tmaxID = s1.results[0].ACCREDITATION_ID+1;\r\n  \t\t\t}\r\n\r\n  \t\t\tvar accreditation_trx = {\r\n  \t\t\t\tACCREDITATION_ID: maxID,\r\n  \t\t\t\tGLOBAL_COMPANY_ID: global_company_id,\r\n  \t\t\t\tEFF_START_DT: this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.a_start_dt),\r\n  \t\t\t\tEFF_END_DT: this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.a_end_dt),\r\n  \t\t\t\tDIVISION_ID: this.obj_personnel.COMPANY_SPECIFIC.model.division_id,\r\n  \t\t\t\tCATEGORY_ID: this.obj_personnel.COMPANY_SPECIFIC.model.category_id,\r\n  \t\t\t\tJOB_GRP_ID: this.obj_personnel.COMPANY_SPECIFIC.model.a_job_grp_id,\r\n  \t\t\t\tJOB_ID: this.obj_personnel.COMPANY_SPECIFIC.model.a_job_id,\r\n  \t\t\t\tCOMPETENCY: this.obj_personnel.COMPANY_SPECIFIC.model.a_competency,\r\n  \t\t\t\tHOME_FL: '0',\r\n  \t\t\t\tENTRY_FL: '0',\r\n  \t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n  \t\t\t\tCREATED_DT: dateToday\r\n  \t\t\t};\r\n  \t\t\tvar entity = EntityManager().createEntity(\"ACCREDITATION_TRX\", accreditation_trx);\r\n  \t\t\tEntityManager().addEntity(entity);\r\n  \t\t\tEntityManager().saveChanges().then((s2)=>{\r\n  \t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n  \t\t\t\tthis.clearAccreditationField();\r\n  \t\t\t\tthis.loadAccreditation(global_company_id);\r\n  \t\t\t}, (e2)=>{\r\n  \t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\tif(entity != null){\r\n  \t\t\t\t\tentity.entityAspect.setDeleted();\r\n  \t\t\t\t}\r\n  \t\t\t\ttoastr.error(e2, \"Error in saving accreditation.\");\r\n  \t\t\t});\r\n\r\n\r\n  \t\t}, (e1)=>{\r\n  \t\t\tsettings.isNavigating = false;\r\n  \t\t\ttoastr.error(e1, \"Error in querying accreditation id.\");\r\n  \t\t});\r\n\t}\r\n\r\n\tupdateAccreditation(accreditation_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null\r\n\t\tdateToday = moment(new Date()).add(8, \"hours\");\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"ACCREDITATION_TRX\")\r\n\t\t\t\t\t.where(\"ACCREDITATION_ID\", \"==\", accreditation_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tif(s1.results.length==0){\r\n\t\t\t\ttoastr.error(\"\", \"Error in querying accreditation info.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\ts1.results[0].JOB_GRP_ID = this.obj_personnel.COMPANY_SPECIFIC.model.a_job_grp_id;\r\n\t\t\ts1.results[0].JOB_ID = this.obj_personnel.COMPANY_SPECIFIC.model.a_job_id;\r\n\t\t\ts1.results[0].COMPETENCY = this.obj_personnel.COMPANY_SPECIFIC.model.a_competency;\r\n\t\t\ts1.results[0].EFF_START_DT = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.a_start_dt);\r\n\t\t\ts1.results[0].EFF_END_DT = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.a_end_dt);\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\ttoastr.success(s2, \"Accreditation has been updated.\");\r\n  \t\t\t\tthis.clearAccreditationField();\r\n\t\t\t\tthis.loadAccreditation(this.obj_personnel.COMPANY_SPECIFIC.model.global_company_id);\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.error(e2, \"Error in updating accreditation info.\");\r\n\t\t\t});\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying accreditation info.\");\r\n\t\t});\r\n\t}\r\n\r\n\tdd_jobGroupChange(){\r\n\t\tvar tmp=[];\r\n\t\tvar selectedJobGrp = this.obj_personnel.COMPANY_SPECIFIC.model.a_job_grp_id;\r\n\t\t_.each(this.obj_personnel.JOB, (j)=>{\r\n\t\t\tif(selectedJobGrp == j.group){\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tvalue: j.value,\r\n\t\t\t\t\ttext: j.text\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.accreditation_joblist = tmp;\r\n\t}\r\n\r\n\tOrderByText(a, b){\r\n\t\tif(a.text.toUpperCase() < b.text.toUpperCase())\r\n\t\t\treturn -1;\r\n\t\tif(a.text.toUpperCase() > b.text.toUpperCase())\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\nimport {OrderByDate} from '../../helpers';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class company_info_medical_rec {\r\n\r\n\tobj_personnel = null;\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\t_disableForm=true;\r\n\t_disableTable=false;\r\n\tformStatus=\"\";\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.company_tab_changed.push((tab_num, global_id)=>{\r\n\t\t\tif(tab_num==3){\r\n\t\t\t\t$(\"#med_exam_dt\").datepicker();\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading medical records...\");\r\n\t\t\t\tthis.loadMedicalRecord(global_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tloadMedicalRecord(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating =true;\r\n\t\tvar query = EntityQuery().from(\"MEDICAL_EXAM_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", global_indiv_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar tmp = [];\r\n\t\t\tvar tmpLog = [];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tmedical_exam_id: r.MEDICAL_EXAM_ID,\r\n\t\t\t\t\tendorsed_by: r.ENDORSED_BY,\r\n\t\t\t\t\tfit_to_work_fl: r.FIT_TO_WORK_FL,\r\n\t\t\t\t\tmedical_exam_dt: moment.utc(r.MEDICAL_EXAM_DT).format(\"MM/DD/YYYY\"),\r\n\t\t\t\t\tresult_remarks: r.RESULT_REMARKS\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\",\"Medical records has been loaded.\");\r\n\t\t\tthis.obj_personnel.MEDICAL_RECORD.list = tmp;\r\n\t\t\tif(tmpLog.length>0){\r\n\r\n\t\t\t\ttmpLog.sort(OrderByDate);\r\n\t\t\t\tvar lastIndex = tmpLog.length-1;\r\n\t\t\t\tthis.lblCreatedBy = tmpLog[0].user + \" \" + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpLog[lastIndex].user+ \" \" + moment.utc(tmpLog[lastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t} \r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying medical records.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tbtnAdd(){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"ADD\";\r\n\t}\r\n\r\n\tbtnEdit(item){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"EDIT\";\r\n\t\tthis.obj_personnel.MEDICAL_RECORD.model.medical_exam_id = item.medical_exam_id;\r\n\t\tthis.obj_personnel.MEDICAL_RECORD.model.endorsed_by = item.endorsed_by;\r\n\t\t$(\"#med_exam_dt\").datepicker(\"setValue\", new Date(item.medical_exam_dt));\r\n\t\tthis.obj_personnel.MEDICAL_RECORD.model.medical_exam_dt = item.medical_exam_dt;\r\n\t\tthis.obj_personnel.MEDICAL_RECORD.model.result_remarks = item.result_remarks;\r\n\t\tswitch(item.fit_to_work_fl){\r\n\t\t\tcase \"1\":\t\t\t\t\r\n\t\t\t\t$(\"#fit_to_work_fl\").prop(\"checked\", true);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"0\":\r\n\t\t\t\t$(\"#fit_to_work_fl\").prop(\"checked\", false);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tbtnRemove(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the record?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('MEDICAL_EXAM_TRX').where('MEDICAL_EXAM_ID', '==', item.medical_exam_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\", \"Record was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadMedicalRecord(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.clearField();\r\n\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(error, \"Error in removing medical record.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tclearField(){\t\t\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableTable = false;\r\n\t\tthis.formStatus = \"\";\r\n\t\tthis.obj_personnel.MEDICAL_RECORD.model = {};\r\n\t\t$(\"#fit_to_work_fl\").prop(\"checked\", false);\r\n\t\tsettings.isNavigating = false;\r\n\t}\r\n\r\n\tvalidate(){\r\n\r\n\t\tvar strValidation = \"\";\r\n\t\tthis.obj_personnel.MEDICAL_RECORD.model.medical_exam_dt = $(\"#med_exam_dt\").val();\r\n\t\tthis.obj_personnel.MEDICAL_RECORD.model.fit_to_work_fl = $(\"#fit_to_work_fl\").is(\":checked\")?1:0;\r\n\r\n\t\tif(this.obj_personnel.MEDICAL_RECORD.model.endorsed_by == undefined || this.obj_personnel.MEDICAL_RECORD.model.endorsed_by == null || this.obj_personnel.MEDICAL_RECORD.model.endorsed_by.length==0){\r\n\t\t\tstrValidation+=\"No endorser specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.MEDICAL_RECORD.model.medical_exam_dt == undefined || this.obj_personnel.MEDICAL_RECORD.model.medical_exam_dt == null || this.obj_personnel.MEDICAL_RECORD.model.medical_exam_dt.length==0){\r\n\t\t\tstrValidation+=\"No medical exam date specified.<br/>\";\r\n\t\t}else{\r\n\t\t\tif(moment(this.obj_personnel.MEDICAL_RECORD.model.medical_exam_dt).isValid()){\r\n\r\n\t\t\t\tvar d1 = new Date(this.obj_personnel.MEDICAL_RECORD.model.medical_exam_dt);\r\n\t\t\t\tvar d2 = new Date();\r\n\r\n\t\t\t\tif(d1>d2){\r\n\t\t\t\t\tstrValidation+=\"Medical exam date cannot be greater than date today.<br/>\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+=\"Invalid medical exam date.<br/>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.obj_personnel.MEDICAL_RECORD.model.medical_exam_id != undefined && this.obj_personnel.MEDICAL_RECORD.model.medical_exam_id != null){\r\n\t\t\t\tthis.updateMedicalRecord(this.obj_personnel.MEDICAL_RECORD.model.medical_exam_id);\r\n\t\t\t}else{\r\n\t\t\t\tthis.saveMedicalRecord(this.obj_personnel.global_indiv_id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsaveMedicalRecord(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"MEDICAL_EXAM_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"MEDICAL_EXAM_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar maxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].MEDICAL_EXAM_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar medical_record = {\r\n\t\t\t\tMEDICAL_EXAM_ID: maxId,\r\n\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\tENDORSED_BY: this.obj_personnel.MEDICAL_RECORD.model.endorsed_by,\r\n\t\t\t\tMEDICAL_EXAM_DT: new Date(moment(this.obj_personnel.MEDICAL_RECORD.model.medical_exam_dt).add(8, \"hours\")),\r\n\t\t\t\tRESULT_REMARKS: this.obj_personnel.MEDICAL_RECORD.model.result_remarks,\r\n\t\t\t\tFIT_TO_WORK_FL: this.obj_personnel.MEDICAL_RECORD.model.fit_to_work_fl,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"MEDICAL_EXAM_TRX\", medical_record);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadMedicalRecord(global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\r\n\t\t\t}, (e2)=>{\r\n\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in saving medical record.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying medical exam id.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tupdateMedicalRecord(medical_exam_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"MEDICAL_EXAM_TRX\")\r\n\t\t\t\t\t.where(\"MEDICAL_EXAM_ID\", \"==\", medical_exam_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].ENDORSED_BY = this.obj_personnel.MEDICAL_RECORD.model.endorsed_by;\r\n\t\t\ts1.results[0].MEDICAL_EXAM_DT = new Date(moment(this.obj_personnel.MEDICAL_RECORD.model.medical_exam_dt).add(8, \"hours\"));\r\n\t\t\ts1.results[0].RESULT_REMARKS = this.obj_personnel.MEDICAL_RECORD.model.result_remarks;\r\n\t\t\ts1.results[0].FIT_TO_WORK_FL = this.obj_personnel.MEDICAL_RECORD.model.fit_to_work_fl;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\tthis.loadMedicalRecord(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\r\n\t\t\t}, (e2)=>{\r\n\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in updating medical record.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying medical record.\");\r\n\t\t});\r\n\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {ppid_search} from \"../modals/ppid_search\";\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport {isDigit} from \"../../helpers\";\r\nimport settings from 'settings';\r\n\r\n@inject(DialogService, obj_personnel, toastr)\r\nexport class company_info_work_exp{\r\n\r\n\t_disableBtnAdd = false;\r\n\t_disableBtnSave= true;\r\n\t_disableBtnEdit = false;\r\n\t_disableBtnRemove = false;\r\n\t_disableForm=true;\r\n\t_formStatus=\"\";\r\n\tobj_personnel = null;\r\n\talreadyLoaded = false;\r\n\tlblCreatedBy = null;\r\n\tlblUpdatedBy = null;\r\n\tconstructor(DialogService, obj_personnel, toastr){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.company_tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num == 1){\r\n\t\t\t\tif(!this.alreadyLoaded){\r\n\t\t\t\t\tthis.alreadyLoaded = false;\r\n\t\t\t\t\t$(\"#startDt\").datepicker();\r\n\t\t\t\t\t$(\"#endDt\").datepicker();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading work experience list...\");\r\n\t\t\t\tthis.loadWorkExperience(global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tloadWorkExperience(global_indiv_id){\r\n\t\tsettings.isNavigating =true;\r\n\t\tvar query = EntityQuery().from(\"WORK_EXPERIENCE_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\",\"==\",global_indiv_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar tmp = [];\r\n\t\t\tvar tmpLog = [];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\t\t\t\tvar from = moment.utc(r.START_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\tvar to = moment.utc(r.END_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\tvar position = this.obj_personnel.POSITION.find((x)=>{\r\n\t\t\t\t\tif(x.value == r.POSITION_CD)\r\n\t\t\t\t\t\t\treturn x;\r\n\t\t\t\t});\r\n\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\twork_experience_id: r.WORK_EXPERIENCE_ID,\r\n\t\t\t\t\temployer: r.EMPLOYER,\r\n\t\t\t\t\tstart_dt: from,\r\n\t\t\t\t\tend_dt: to,\r\n\t\t\t\t\tpresent_fl: r.PRESENT_FL,\r\n\t\t\t\t\tsalary: r.SALARY,\r\n\t\t\t\t\tposition_cd: r.POSITION_CD,\r\n\t\t\t\t\tposition: position.text,\r\n\t\t\t\t\tfreelance_fl: r.FREELANCE_FL,\r\n\t\t\t\t\treason_for_leaving: r.REASON_FOR_LEAVING\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.WORK_EXPERIENCE.list = tmp;\r\n\r\n\t\t\ttmpLog.sort(this.OrderByDate);\r\n\t\t\tvar LastIndex = tmpLog.length-1;\r\n\t\t\tif(tmpLog.length>0){\r\n\r\n\t\t\t\tthis.lblCreatedBy = tmpLog[0].user + ' ' + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpLog[LastIndex].user + ' ' + moment.utc(tmpLog[LastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Work experience list has been loaded...\");\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in loading work experience list.\");\r\n\t\t});\r\n\t}\r\n\r\n\tOrderByDate(a, b){\r\n\t\tif(a.date > b.date)\r\n\t\t\treturn 1;\r\n\t\tif(a.date < b.date)\r\n\t\t\treturn -1;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tclearField(){\r\n\t\ttoastr.clear();\t\t\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model = {};\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._formStatus = \"\";\r\n\t\tthis._disableBtnEdit = false;\r\n\t\tthis._disableBtnRemove = false;\r\n\t}\r\n\r\n\tbtnAdd(){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._formStatus = \"ADD\";\r\n\t\tthis._disableBtnEdit = true;\r\n\t\tthis._disableBtnRemove = true;\r\n\t}\r\n\r\n\tbtnEdit(item){\r\n\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\t\t\r\n\t\tthis._disableBtnEdit = true;\r\n\t\tthis._disableBtnRemove = true;\r\n\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.work_experience_id = item.work_experience_id;\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.employer = item.employer;\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.start_dt = item.start_dt;\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.end_dt = item.end_dt;\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.present_fl = item.present_fl==1?true:false;\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.salary = item.salary;\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.position_cd = item.position_cd;\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.freelance_fl = item.freelance_fl==1?true:false;\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.reason_for_leaving = item.reason_for_leaving;\r\n\t\tthis._formStatus = \"EDIT\";\r\n\t}\r\n\r\n\tbtnRemove(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the work experience?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\t//alert(\"Confirmed delete.\");\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('WORK_EXPERIENCE_TRX').where('WORK_EXPERIENCE_ID', '==', item.work_experience_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The work experience was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadWorkExperience(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing work experience.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tvalidate(){\r\n\r\n\t\tvar strValidation = \"\";\r\n\t\tvar boolValidStart = false;\r\n\t\tvar boolValidEnd = false;\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.start_dt = $(\"#startDt\").val();\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.end_dt = $(\"#endDt\").val();\r\n\r\n\t\tif(this.obj_personnel.WORK_EXPERIENCE.model.employer == undefined || this.obj_personnel.WORK_EXPERIENCE.model.employer == null || this.obj_personnel.WORK_EXPERIENCE.model.employer.length == 0){\r\n\t\t\tstrValidation+=\"No employer specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.WORK_EXPERIENCE.model.start_dt == undefined || this.obj_personnel.WORK_EXPERIENCE.model.start_dt == null || this.obj_personnel.WORK_EXPERIENCE.model.start_dt.length == 0){\r\n\t\t\tstrValidation+=\"No start date specified.<br/>\";\r\n\t\t}else{\r\n\t\t\tif(!moment(new Date(this.obj_personnel.WORK_EXPERIENCE.model.start_dt)).isValid()){\r\n\t\t\t\tstrValidation+=\"Invalid start date.<br/>\";\r\n\t\t\t}else{\r\n\t\t\t\t// this.obj_personnel.WORK_EXPERIENCE.model.start_dt = new Date(moment(this.obj_personnel.WORK_EXPERIENCE.model.start_dt).add(8, \"hours\"));\r\n\t\t\t\tboolValidStart = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.WORK_EXPERIENCE.model.end_dt == undefined || this.obj_personnel.WORK_EXPERIENCE.model.end_dt == null || this.obj_personnel.WORK_EXPERIENCE.model.end_dt.length == 0){\r\n\t\t\tstrValidation+=\"No end date specified.<br/>\";\r\n\t\t}else{\r\n\t\t\tif(!moment(new Date(this.obj_personnel.WORK_EXPERIENCE.model.end_dt)).isValid()){\r\n\t\t\t\tstrValidation+=\"Invalid end date.<br/>\";\r\n\t\t\t}else{\r\n\t\t\t\t// this.obj_personnel.WORK_EXPERIENCE.model.end_dt = new Date(moment(this.obj_personnel.WORK_EXPERIENCE.model.end_dt).add(8, \"hours\"));\r\n\t\t\t\tboolValidEnd = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(boolValidStart && boolValidEnd){\r\n\t\t\tvar d1 = new Date(this.obj_personnel.WORK_EXPERIENCE.model.start_dt);\r\n\t\t\tvar d2 = new Date(this.obj_personnel.WORK_EXPERIENCE.model.end_dt);\r\n\t\t\tif(d1>d2){\r\n\t\t\t\tstrValidation+=\"Start date cannot be greater than end date.<br/>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.WORK_EXPERIENCE.model.position_cd == undefined || this.obj_personnel.WORK_EXPERIENCE.model.position_cd.length==0){\r\n\t\t\tstrValidation+=\"No position specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.WORK_EXPERIENCE.model.reason_for_leaving == undefined || this.obj_personnel.WORK_EXPERIENCE.model.reason_for_leaving == null || this.obj_personnel.WORK_EXPERIENCE.model.reason_for_leaving.length == 0){\r\n\t\t\tstrValidation+=\"No reason for leaving specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this._formStatus == \"ADD\"){\r\n\t\t\t\tthis.saveWorkExp(this.obj_personnel.global_indiv_id);\r\n\t\t\t}else if(this._formStatus==\"EDIT\"){\r\n\t\t\t\tthis.updateWorkExp(this.obj_personnel.WORK_EXPERIENCE.model.work_experience_id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsaveWorkExp(global_indiv_id){\r\n\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = moment(new Date()).add(8, \"hours\");\r\n\t\tdateToday = new Date(dateToday);\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"WORK_EXPERIENCE_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"WORK_EXPERIENCE_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar MaxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tMaxId = s1.results[0].WORK_EXPERIENCE_ID+1;\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tvar work_exp_trx = {\r\n\t\t\t\tWORK_EXPERIENCE_ID: MaxId,\r\n\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\tEMPLOYER: this.obj_personnel.WORK_EXPERIENCE.model.employer,\r\n\t\t\t\tSTART_DT: this.obj_personnel.WORK_EXPERIENCE.model.start_dt,\r\n\t\t\t\tEND_DT: this.obj_personnel.WORK_EXPERIENCE.model.end_dt,\r\n\t\t\t\tSALARY: this.obj_personnel.WORK_EXPERIENCE.model.salary,\r\n\t\t\t\tPOSITION_CD: this.obj_personnel.WORK_EXPERIENCE.model.position_cd,\r\n\t\t\t\tREASON_FOR_LEAVING: this.obj_personnel.WORK_EXPERIENCE.model.reason_for_leaving,\r\n\t\t\t\tPRESENT_FL: this.obj_personnel.WORK_EXPERIENCE.model.present_fl==true?1:0,\r\n\t\t\t\tFREELANCE_FL: this.obj_personnel.WORK_EXPERIENCE.model.freelance_fl==true?1:0,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"WORK_EXPERIENCE_TRX\", work_exp_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.clearField();\r\n\t\t\t\tthis.loadWorkExperience(this.obj_personnel.global_indiv_id);\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t});\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.error(e2, \"Error in saving work experience.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying max id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdateWorkExp(work_exp_id){\r\n\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = moment(new Date()).add(8, \"hours\");\r\n\t\tdateToday = new Date(dateToday);\r\n\r\n\t\tvar query = EntityQuery().from(\"WORK_EXPERIENCE_TRX\")\r\n\t\t\t\t\t.where(\"WORK_EXPERIENCE_ID\", \"==\", work_exp_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].EMPLOYER = this.obj_personnel.WORK_EXPERIENCE.model.employer;\r\n\t\t\ts1.results[0].START_DT = this.obj_personnel.WORK_EXPERIENCE.model.start_dt;\r\n\t\t\ts1.results[0].END_DT = this.obj_personnel.WORK_EXPERIENCE.model.end_dt;\r\n\t\t\ts1.results[0].PRESENT_FL = this.obj_personnel.WORK_EXPERIENCE.model.present_fl?1:0;\r\n\t\t\ts1.results[0].SALARY = this.obj_personnel.WORK_EXPERIENCE.model.salary;\r\n\t\t\ts1.results[0].POSITION_CD = this.obj_personnel.WORK_EXPERIENCE.model.position_cd;\r\n\t\t\ts1.results[0].FREELANCE_FL = this.obj_personnel.WORK_EXPERIENCE.model.freelance_fl?1:0;\r\n\t\t\ts1.results[0].REASON_FOR_LEAVING = this.obj_personnel.WORK_EXPERIENCE.model.reason_for_leaving;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.clearField();\r\n\t\t\t\tthis.loadWorkExperience(this.obj_personnel.global_indiv_id);\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\ttoastr.error(e2, \"Error in updating work experience.\");\t\t\t\t\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\ttoastr.error(e1, \"Error in querying work experience.\");\r\n\t\t});\r\n\t}\r\n\r\n\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\n\r\n@inject(DialogService, obj_personnel, toastr)\r\nexport class gov_info\r\n{\r\n\tobj_personnel = null;\r\n\t_activeTab=0;\r\n\t_404_img = \"/images/404.png\";\r\n\tconstructor(dialogService, obj_personnel, toastr){\r\n\t\tthis.dialogService = dialogService;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num == 3){\r\n\t\t\t\t$(\"#gov_tab0\").addClass(\"active\");\r\n\t\t\t\t$(\"#gov_tab1\").removeClass(\"active\");\r\n\t\t\t\t$(\"#gov_tab2\").removeClass(\"active\");\r\n\t\t\t\t$(\"#gov_info_tabs\").find(\".active\").removeClass(\"active\");\r\n\t\t\t\t$(\"#gov_info_main\").addClass(\"active\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\t\r\n\r\n\tclickTab_GovInfo(tab_num){\r\n\t\tif(this.obj_personnel.global_indiv_id.length===0)\r\n\t\t\treturn;\r\n\t\tswitch(tab_num){\r\n\t\t\tcase 0: \r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.info(\"\", \"Loading government info...\");\t\t\t\t\t\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 1: \r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.info(\"\", \"Loading government exam passed...\");\t\t\t\t\t\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 2: \r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.info(\"\", \"Loading criminal record...\");\r\n\t\t}\r\n\t\tthis.obj_personnel.OBSERVERS.govinfo_tab_changed.forEach((delegate)=>{\r\n\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t});\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\nimport {OrderByDate} from '../../helpers';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class gov_info_criminal_rec{\r\n\r\n\tobj_personnel = null;\r\n\tlblCreatedByCivil=null;\r\n\tlblUpdatedByCivil=null;\r\n\tformStatusCivil=\"\";\r\n\t_disableBtnAddCivil=false;\r\n\t_disableBtnSaveCivil=true;\r\n\t_disableFormCivil=true;\r\n\t_disableTableCivil=false;\r\n\tddCompany = [];\t\r\n\tlblCreatedByAdministrative=null;\r\n\tlblUpdatedByAdministrative=null;\r\n\tformStatusAdministrative=\"\";\r\n\t_disableBtnAddAdministrative=false;\r\n\t_disableBtnSaveAdministrative=true;\r\n\t_disableFormAdministrative=true;\r\n\t_disableTableAdministrative=false;\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.govinfo_tab_changed.push((tab_num, global_id)=>{\r\n\t\t\tif(tab_num == 2){\r\n\t\t\t\t$(\"#civil_start_dt\").datepicker();\r\n\t\t\t\t$(\"#admin_eff_start_dt\").datepicker();\r\n\t\t\t\t$(\"#admin_eff_end_dt\").datepicker();\t\t\r\n\t\t\t\tthis.loadCivilCase(global_id);\r\n\t\t\t\tthis.loadAdministrativeCase(global_id);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tloadCivilCase(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"COURT_CASE_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_indiv_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\tvar tmpLog=[];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\t\t\t\tvar start_dt = null;\r\n\t\t\t\tif(moment(r.START_DT).isValid()){\r\n\t\t\t\t\tstart_dt = moment.utc(r.START_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tcourt_case_id: r.COURT_CASE_ID,\r\n\t\t\t\t\tglobal_id: r.GLOBAL_ID,\r\n\t\t\t\t\tcase_no: r.CASE_NO,\r\n\t\t\t\t\tcase_stat_cd: r.CASE_STAT_CD,\r\n\t\t\t\t\tcase_desc: r.CASE_DESC,\r\n\t\t\t\t\tcriminal_fl: r.CRIMINAL_FL,\r\n\t\t\t\t\tstart_dt: start_dt,\r\n\t\t\t\t\tremarks: r.REMARKS\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.CRIMINAL_RECORD.civil.list = tmp;\r\n\t\t\ttmpLog.sort(OrderByDate);\r\n\t\t\tif(tmpLog.length>0){\r\n\r\n\t\t\t\tthis.lblCreatedByCivil = tmpLog[0].user + \" \" + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tvar lastIndex = tmpLog.length-1;\r\n\t\t\t\t\tthis.lblUpdatedByCivil = tmpLog[lastIndex].user + \" \" + moment.utc(tmpLog[lastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedByCivil = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedByCivil = \"\";\r\n\t\t\t\tthis.lblUpdatedByCivil = \"\";\r\n\t\t\t}\r\n\r\n\t\t\t// toastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Civil cases has been loaded.\");\r\n\t\t\tsettings.isNavigating = false;\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\t// toastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying civil cases.\");\r\n\t\t});\r\n\t}\r\n\r\n\tloadAdministrativeCase(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_COMPANY_MSTR\")\r\n\t\t \t\t\t.where(\"GLOBAL_ID\",\"==\", global_indiv_id)\r\n\t\t \t\t\t.orderBy(\"COMPANY_ID\");\r\n\t\t EntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t \tvar company_ids=[];\r\n\t\t \tvar global_company_ids = [];\r\n\t\t \t_.each(s1.results, (r)=>{\r\n\t\t \t\tglobal_company_ids.push(r.GLOBAL_COMPANY_ID);\r\n\r\n\t\t \t\t// var alreadyExist = company_ids.some((x)=>x == r.COMPANY_ID);\r\n\t\t \t\t// if(!alreadyExist){\r\n\t\t \t\tvar company = this.obj_personnel.COMPANY.find((x)=>{\r\n\t\t \t\t\treturn x.id == r.COMPANY_ID;\r\n\t\t \t\t});\r\n\t\t \t\tif(company != null){\r\n\t\t \t\t\tcompany_ids.push({\r\n\t\t \t\t\t\tvalue: r.GLOBAL_COMPANY_ID,\r\n\t\t \t\t\t\ttext: company.text\r\n\t\t \t\t\t});\r\n\t\t \t\t\t// company_ids.push(company);\r\n\t\t \t\t}\r\n\t\t \t\t// }\r\n\t\t \t});\r\n\t\t \t// console.log(company_ids);\r\n\t\t \tthis.ddCompany = company_ids;\r\n\r\n\t\t \t// var tmp=[];\r\n\t\t \tthis.obj_personnel.CRIMINAL_RECORD.administrative.list=[];\r\n\t\t \tvar tmpLog=[];\r\n\t\t \t_.each(global_company_ids, (c)=>{\r\n\t\t \t\tquery = EntityQuery().from(\"ADMIN_CASE_TRX\")\r\n\t\t \t\t\t\t.where(\"GLOBAL_COMPANY_ID\", \"==\", c);\r\n\t\t \t\tEntityManager().executeQuery(query).then((s2)=>{\r\n\r\n\t\t \t\t\t// console.log(s2.results);\r\n\t\t \t\t\t_.each(s2.results, (r)=>{\r\n\t\t \t\t\t\tvar end_dt = null;\r\n\t\t \t\t\t\tif(moment(r.EFF_END_DT).isValid()){\r\n\t\t \t\t\t\t\tend_dt = moment.utc(r.EFF_END_DT).format(\"MM/DD/YYYY\");\r\n\t\t \t\t\t\t}\r\n\r\n\t\t \t\t\t\tvar company = company_ids.find((x)=>{\r\n\t\t \t\t\t\t\treturn x.value == c;\r\n\t\t \t\t\t\t});\r\n\t\t \t\t\t\tvar company_nm = null;\r\n\t\t \t\t\t\tif(company != null){\r\n\t\t \t\t\t\t\tcompany_nm = company.text;\r\n\t\t \t\t\t\t}\r\n\r\n\r\n\t\t \t\t\t\t// tmp.push({\r\n\t\t \t\t\t\t\tthis.obj_personnel.CRIMINAL_RECORD.administrative.list.push({\r\n\t\t \t\t\t\t\tadmin_case_id: r.ADMIN_CASE_ID,\r\n\t\t \t\t\t\t\tglobal_company_id: r.GLOBAL_COMPANY_ID,\r\n\t\t \t\t\t\t\tcompany_nm: company_nm,\r\n\t\t \t\t\t\t\tviolation_cd: r.VIOLATION_CD,\r\n\t\t \t\t\t\t\tcase_stat_cd: r.CASE_STAT_CD,\r\n\t\t \t\t\t\t\teff_start_dt: moment.utc(r.EFF_START_DT).format(\"MM/DD/YYYY\"),\r\n\t\t \t\t\t\t\teff_end_dt: moment.utc(r.EFF_END_DT).format(\"MM/DD/YYYY\"),\r\n\t\t \t\t\t\t\tremarks: r.REMARKS\r\n\t\t \t\t\t\t});\r\n\r\n\t\t \t\t\t\tif(r.CREATED_BY != null){\r\n\t\t \t\t\t\t\ttmpLog.push({\r\n\t\t \t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t \t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t \t\t\t\t\t});\r\n\t\t \t\t\t\t}\r\n\r\n\t\t \t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t \t\t\t\t\ttmpLog.push({\r\n\t\t \t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t \t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t \t\t\t\t\t});\r\n\t\t \t\t\t\t}\r\n\t\t \t\t\t});\r\n\r\n\t\t \t\t}, (e2)=>{\r\n\t\t \t\t\tsettings.isNavigating = false;\r\n\t\t \t\t\t// toastr.clear();\r\n\t\t \t\t\ttoastr.error(e2, \"Error in querying administrative case.\");\r\n\t\t \t\t});\r\n\t\t \t});\r\n\r\n\r\n\t\t \tsettings.isNavigating = false;\r\n\t\t \t// toastr.clear();\r\n\t\t \ttoastr.success(\"\", \"Administrative cases has been loaded.\");\r\n\t\t \t// this.obj_personnel.CRIMINAL_RECORD.administrative.list = tmp;\r\n\t\t \tif(tmpLog.length>0){\r\n\r\n\t\t \t\tthis.lblCreatedByAdministrative = tmpLog[0].user + \" \" + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t \t\tif(tmpLog.length>1){\r\n\t\t \t\t\tvar lastIndex = tmpLog.length-1;\r\n\t\t \t\t\tthis.lblUpdatedByAdministrative = tmpLog[lastIndex].user + \" \" + moment.utc(tmpLog[lastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t \t\t}else{\r\n\t\t \t\t\tthis.lblUpdatedByAdministrative = \"\";\r\n\t\t \t\t}\r\n\r\n\t\t \t}else{\r\n\t\t \t\tthis.lblCreatedByAdministrative = \"\";\r\n\t\t \t\tthis.lblUpdatedByAdministrative = \"\";\r\n\t\t \t}\r\n\r\n\t\t }, (e1)=>{\r\n\t\t \tsettings.isNavigating = false;\r\n\t\t \t// toastr.clear();\r\n\t\t \ttoastr.erorr(e1, \"Error in querying company ids.\");\r\n\t\t });\r\n\r\n\t}\r\n\r\n\tbtnAddCivil(){\r\n\t\tthis._disableBtnAddCivil = true;\r\n\t\tthis._disableBtnSaveCivil = false;\r\n\t\tthis._disableFormCivil = false;\r\n\t\tthis._disableTableCivil = true;\r\n\t\tthis.formStatusCivil = \"ADD\";\r\n\t}\r\n\r\n\tbtnEditCivil(item){\r\n\t\tthis._disableBtnAddCivil = true;\r\n\t\tthis._disableBtnSaveCivil = false;\r\n\t\tthis._disableFormCivil = false;\r\n\t\tthis._disableTableCivil = true;\r\n\t\tthis.formStatusCivil = \"EDIT\";\r\n\t\tthis.obj_personnel.CRIMINAL_RECORD.civil.model.court_case_id = item.court_case_id;\r\n\t\tthis.obj_personnel.CRIMINAL_RECORD.civil.model.case_no = item.case_no;\r\n\t\tthis.obj_personnel.CRIMINAL_RECORD.civil.model.case_desc = item.case_desc;\r\n\t\tthis.obj_personnel.CRIMINAL_RECORD.civil.model.case_stat_cd = item.case_stat_cd;\r\n\t\tthis.obj_personnel.CRIMINAL_RECORD.civil.model.start_dt = item.start_dt;\r\n\t\tthis.obj_personnel.CRIMINAL_RECORD.civil.model.remarks = item.remarks;\r\n\t\tswitch(item.criminal_fl){\r\n\t\t\tcase \"1\": $(\"#criminal_fl\").prop(\"checked\", true);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"0\": $(\"#criminal_fl\").prop(\"checked\", false);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tbtnRemoveCivil(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the record?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('COURT_CASE_TRX').where('COURT_CASE_ID', '==', item.court_case_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The record was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadCivilCase(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing court case.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tclearFieldCivil(){\r\n\t\tthis._disableBtnAddCivil = false;\r\n\t\tthis._disableBtnSaveCivil = true;\r\n\t\tthis._disableFormCivil = true;\r\n\t\tthis._disableTableCivil = false;\r\n\t\t$(\"#criminal_fl\").prop(\"checked\", false);\r\n\t\tthis.formStatusCivil = \"\";\r\n\t\tthis.obj_personnel.CRIMINAL_RECORD.civil.model = {};\r\n\t}\r\n\r\n\tvalidateCivil(){\r\n\t\tvar strValidation = \"\";\r\n\r\n\t\tthis.obj_personnel.CRIMINAL_RECORD.civil.model.start_dt = $(\"#civil_start_dt\").val();\r\n\t\tthis.obj_personnel.CRIMINAL_RECORD.civil.model.criminal_fl = $('#criminal_fl').is(\":checked\");\r\n\r\n\t\tif(this.obj_personnel.CRIMINAL_RECORD.civil.model.case_no == undefined || this.obj_personnel.CRIMINAL_RECORD.civil.model.case_no == null || this.obj_personnel.CRIMINAL_RECORD.civil.model.case_no.length==0){\r\n\t\t\tstrValidation+=\"No case number specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.CRIMINAL_RECORD.civil.model.case_stat_cd == undefined || this.obj_personnel.CRIMINAL_RECORD.civil.model.case_stat_cd == null || this.obj_personnel.CRIMINAL_RECORD.civil.model.case_stat_cd.length==0){\r\n\t\t\tstrValidation+=\"No case status specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.CRIMINAL_RECORD.civil.model.start_dt == undefined || this.obj_personnel.CRIMINAL_RECORD.civil.model.start_dt == null || this.obj_personnel.CRIMINAL_RECORD.civil.model.start_dt.length==0){\r\n\t\t\tstrValidation+=\"No start date specified.<br/>\";\r\n\t\t}else{\r\n\t\t\tif(!moment(this.obj_personnel.CRIMINAL_RECORD.civil.model.start_dt).isValid()){\r\n\t\t\t\tstrValidation+=\"Invalid start date.<br/>\";\r\n\t\t\t}else{\r\n\t\t\t\tvar d1 = new Date(this.obj_personnel.CRIMINAL_RECORD.civil.model.start_dt);\r\n\t\t\t\tvar d2 = new Date();\r\n\t\t\t\tif(d1>d2){\r\n\t\t\t\t\tstrValidation+=\"Start date cannot be greater than date today.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.CRIMINAL_RECORD.civil.model.case_desc == undefined || this.obj_personnel.CRIMINAL_RECORD.civil.model.case_desc == null || this.obj_personnel.CRIMINAL_RECORD.civil.model.case_desc.length==0){\r\n\t\t\tstrValidation+=\"No case description specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.formStatusCivil == \"ADD\"){\r\n\t\t\t\tthis.saveCivilRecord(this.obj_personnel.global_indiv_id);\r\n\t\t\t}else if(this.formStatusCivil == \"EDIT\"){\r\n\t\t\t\tthis.updateCivilRecord(this.obj_personnel.CRIMINAL_RECORD.civil.model.court_case_id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsaveCivilRecord(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = false;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"COURT_CASE_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"COURT_CASE_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar maxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].COURT_CASE_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar civil_rec = {\r\n\t\t\t\tCOURT_CASE_ID: maxId,\r\n\t\t\t\tGLOBAL_ID: global_indiv_id,\r\n\t\t\t\tCASE_NO: this.obj_personnel.CRIMINAL_RECORD.civil.model.case_no,\r\n\t\t\t\tCASE_STAT_CD: this.obj_personnel.CRIMINAL_RECORD.civil.model.case_stat_cd,\r\n\t\t\t\tSTART_DT: new Date(moment(this.obj_personnel.CRIMINAL_RECORD.civil.model.start_dt).add(8, \"hours\")),\r\n\t\t\t\tCASE_DESC: this.obj_personnel.CRIMINAL_RECORD.civil.model.case_desc,\r\n\t\t\t\tCRIMINAL_FL: this.obj_personnel.CRIMINAL_RECORD.civil.model.criminal_fl?1:0,\r\n\t\t\t\tREMARKS: this.obj_personnel.CRIMINAL_RECORD.civil.model.remarks,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\t\t\t// console.log(civil_rec);\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"COURT_CASE_TRX\", civil_rec);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadCivilCase(global_indiv_id);\r\n\t\t\t\tthis.clearFieldCivil();\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in saving court case.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in quering court case id.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tupdateCivilRecord(court_case_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"COURT_CASE_TRX\")\r\n\t\t\t\t\t.where(\"COURT_CASE_ID\", \"==\", court_case_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].CASE_NO = this.obj_personnel.CRIMINAL_RECORD.civil.model.case_no;\r\n\t\t\ts1.results[0].CASE_STAT_CD = this.obj_personnel.CRIMINAL_RECORD.civil.model.case_stat_cd;\r\n\t\t\ts1.results[0].CRIMINAL_FL = this.obj_personnel.CRIMINAL_RECORD.civil.model.criminal_fl?1:0;\r\n\t\t\ts1.results[0].START_DT = new Date(moment(this.obj_personnel.CRIMINAL_RECORD.civil.model.start_dt).add(8, \"hours\"));\r\n\t\t\ts1.results[0].CASE_DESC = this.obj_personnel.CRIMINAL_RECORD.civil.model.case_desc;\r\n\t\t\ts1.results[0].REMARKS = this.obj_personnel.CRIMINAL_RECORD.civil.model.remarks;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().executeQuery(query).then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\tthis.loadCivilCase(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearFieldCivil();\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in updating court case info.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying court case info.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tbtnAddAdministrative(){\r\n\t\tthis._disableBtnAddAdministrative = true;\r\n\t\tthis._disableBtnSaveAdministrative = false;\r\n\t\tthis._disableFormAdministrative = false;\r\n\t\tthis._disableTableAdministrative = true;\r\n\t\tthis.formStatusAdministrative = \"ADD\";\r\n\t}\r\n\r\n\tbtnEditAdministrative(item){\r\n\t\tthis._disableBtnAddAdministrative = true;\r\n\t\tthis._disableBtnSaveAdministrative = false;\r\n\t\tthis._disableFormAdministrative = false;\r\n\t\tthis._disableTableAdministrative = true;\r\n\t\tthis.formStatusAdministrative = \"EDIT\";\r\n\t\tthis.obj_personnel.CRIMINAL_RECORD.administrative.model.admin_case_id = item.admin_case_id;\r\n\t\tthis.obj_personnel.CRIMINAL_RECORD.administrative.model.global_company_id = item.global_company_id.toString();\r\n\t\tthis.obj_personnel.CRIMINAL_RECORD.administrative.model.violation_cd = item.violation_cd;\r\n\t\tthis.obj_personnel.CRIMINAL_RECORD.administrative.model.case_stat_cd = item.case_stat_cd;\r\n\t\tthis.obj_personnel.CRIMINAL_RECORD.administrative.model.eff_start_dt = item.eff_start_dt;\r\n\t\tthis.obj_personnel.CRIMINAL_RECORD.administrative.model.eff_end_dt = item.eff_end_dt;\r\n\t\tthis.obj_personnel.CRIMINAL_RECORD.administrative.model.remarks = item.remarks;\r\n\t}\r\n\r\n\tbtmRemoveAdministrative(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the record?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('ADMIN_CASE_TRX').where('ADMIN_CASE_ID', '==', item.admin_case_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The record was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadAdministrativeCase(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing administrative case.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tclearFieldAdministrative(){\r\n\t\tthis._disableBtnAddAdministrative = false;\r\n\t\tthis._disableBtnSaveAdministrative = true;\r\n\t\tthis._disableFormAdministrative = true;\r\n\t\tthis._disableTableAdministrative = false;\r\n\t\tthis.formStatusAdministrative = \"\";\r\n\t\tthis.obj_personnel.CRIMINAL_RECORD.administrative.model = {};\r\n\t}\r\n\r\n\tvalidateAdministrative(){\r\n\r\n\t\tvar strValidation = \"\";\r\n\t\tthis.obj_personnel.CRIMINAL_RECORD.administrative.model.eff_start_dt = $(\"#admin_eff_start_dt\").val();\r\n\t\tthis.obj_personnel.CRIMINAL_RECORD.administrative.model.eff_end_dt = $(\"#admin_eff_end_dt\").val();\r\n\r\n\t\tif(this.obj_personnel.CRIMINAL_RECORD.administrative.model.global_company_id == undefined || this.obj_personnel.CRIMINAL_RECORD.administrative.model.global_company_id == null || this.obj_personnel.CRIMINAL_RECORD.administrative.model.global_company_id.length==0){\r\n\t\t\tstrValidation+=\"No company specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.CRIMINAL_RECORD.administrative.model.violation_cd == undefined || this.obj_personnel.CRIMINAL_RECORD.administrative.model.violation_cd == null || this.obj_personnel.CRIMINAL_RECORD.administrative.model.violation_cd.length==0){\r\n\t\t\tstrValidation+=\"No violation specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.CRIMINAL_RECORD.administrative.model.case_stat_cd == undefined || this.obj_personnel.CRIMINAL_RECORD.administrative.model.case_stat_cd == null || this.obj_personnel.CRIMINAL_RECORD.administrative.model.case_stat_cd.length==0){\r\n\t\t\tstrValidation+=\"No case status specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.CRIMINAL_RECORD.administrative.model.eff_start_dt==undefined || this.obj_personnel.CRIMINAL_RECORD.administrative.model.eff_start_dt==null || this.obj_personnel.CRIMINAL_RECORD.administrative.model.eff_start_dt.length==0){\r\n\t\t\tstrValidation+=\"No start date specified.<br/>\";\r\n\t\t}else{\r\n\t\t\tif(moment(this.obj_personnel.CRIMINAL_RECORD.administrative.model.eff_start_dt).isValid()){\r\n\t\t\t\tvar d1 = new Date(this.obj_personnel.CRIMINAL_RECORD.administrative.model.eff_start_dt);\r\n\t\t\t\tvar d2 = new Date();\r\n\t\t\t\tif(d1>d2){\r\n\t\t\t\t\tstrValidation+=\"Start date cannot be greater than date today.<br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(moment(this.obj_personnel.CRIMINAL_RECORD.administrative.model.eff_end_dt).isValid()){\r\n\t\t\t\t\t\tvar end = new Date(this.obj_personnel.CRIMINAL_RECORD.administrative.model.eff_end_dt);\r\n\t\t\t\t\t\tif(d1>end){\r\n\t\t\t\t\t\t\tstrValidation+=\"End date cannot be greater than start date.<br/>\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tstrValidation+=\"Invalid end date.<br/>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+=\"Invalid start date.<br/>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.formStatusAdministrative==\"ADD\"){\r\n\t\t\t\tthis.saveAdministrativeRecord(this.obj_personnel.global_indiv_id);\r\n\t\t\t}else if(this.formStatusAdministrative==\"EDIT\"){\r\n\t\t\t\tthis.updateAdministrativeRecord(this.obj_personnel.CRIMINAL_RECORD.administrative.model.admin_case_id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsaveAdministrativeRecord(){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar start_dt = new Date(moment(this.obj_personnel.CRIMINAL_RECORD.administrative.model.eff_start_dt).add(8, \"hours\"));\r\n\t\tvar end_dt = null;\r\n\t\tif(moment(this.obj_personnel.CRIMINAL_RECORD.administrative.model).isValid()){\r\n\t\t\tend_dt = new Date(moment(this.obj_personnel.CRIMINAL_RECORD.administrative.model.eff_end_dt).add(8, \"hours\"));\r\n\t\t}\r\n\t\tvar query = EntityQuery().from(\"ADMIN_CASE_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"ADMIN_CASE_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar maxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].ADMIN_CASE_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar admin_case= {\r\n\t\t\t\tADMIN_CASE_ID: maxId,\r\n\t\t\t\tGLOBAL_COMPANY_ID: this.obj_personnel.CRIMINAL_RECORD.administrative.model.global_company_id,\r\n\t\t\t\tVIOLATION_CD: this.obj_personnel.CRIMINAL_RECORD.administrative.model.violation_cd,\r\n\t\t\t\tCASE_STAT_CD: this.obj_personnel.CRIMINAL_RECORD.administrative.model.case_stat_cd,\r\n\t\t\t\tEFF_START_DT: start_dt,\r\n\t\t\t\tEFF_END_DT: end_dt,\r\n\t\t\t\t// EFF_START_DT: this.obj_personnel.CRIMINAL_RECORD.administrative.model.eff_start_dt,\r\n\t\t\t\t// EFF_END_DT: this.obj_personnel.CRIMINAL_RECORD.administrative.model.eff_end_dt,\r\n\t\t\t\tREMARKS: this.obj_personnel.CRIMINAL_RECORD.administrative.model.remarks,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\t\t\tvar entity = EntityManager().createEntity(\"ADMIN_CASE_TRX\", admin_case);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadAdministrativeCase(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearFieldAdministrative();\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in saving administrative record.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying admin case id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdateAdministrativeRecord(admin_case_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar start_dt = new Date(moment(this.obj_personnel.CRIMINAL_RECORD.administrative.model.eff_start_dt).add(8, \"hours\"));\r\n\t\tvar end_dt = null;\r\n\t\tif(moment(this.obj_personnel.CRIMINAL_RECORD.administrative.model).isValid()){\r\n\t\t\tend_dt = new Date(moment(this.obj_personnel.CRIMINAL_RECORD.administrative.model.eff_end_dt).add(8, \"hours\"));\r\n\t\t}\r\n\t\tvar query = EntityQuery().from(\"ADMIN_CASE_TRX\")\r\n\t\t\t\t\t.where(\"ADMIN_CASE_ID\", \"==\", admin_case_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].GLOBAL_COMPANY_ID = this.obj_personnel.CRIMINAL_RECORD.administrative.model.global_company_id;\r\n\t\t\ts1.results[0].VIOLATION_CD = this.obj_personnel.CRIMINAL_RECORD.administrative.model.violation_cd;\r\n\t\t\ts1.results[0].CASE_STAT_CD = this.obj_personnel.CRIMINAL_RECORD.administrative.model.case_stat_cd;\r\n\t\t\ts1.results[0].EFF_START_DT = start_dt;\r\n\t\t\ts1.results[0].EFF_END_DT = end_dt;\r\n\t\t\ts1.results[0].REMARKS = this.obj_personnel.CRIMINAL_RECORD.administrative.model.remarks;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\tthis.loadAdministrativeCase(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearFieldAdministrative();\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in updating administrative record.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e2, \"Error in querying administrative record.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\nimport {OrderByDate, isDigit} from '../../helpers';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class gov_info_exam_passed{\r\n\r\n\tobj_personnel = null;\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\t_disableForm=true;\r\n\t_disableTable=false;\t\r\n\tformStatus=\"\";\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.govinfo_tab_changed.push((tab_num, global_id)=>{\r\n\t\t\tif(tab_num == 1){\r\n\t\t\t\t$(\"#exam_dt\").datepicker();\r\n\t\t\t\tthis.loadExamRecord(global_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tloadExamRecord(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"EXAM_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", global_indiv_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\tvar tmpLog = [];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\t\t\t\tvar exam_cd = this.obj_personnel.EXAM.find((x)=>{\r\n\t\t\t\t\treturn x.value == r.EXAM_CD;\r\n\t\t\t\t});\r\n\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\texam_id: r.EXAM_ID,\r\n\t\t\t\t\texam_cd: r.EXAM_CD,\r\n\t\t\t\t\texam_nm: exam_cd.text,\r\n\t\t\t\t\trating_grade: r.RATING_GRADE,\r\n\t\t\t\t\texam_dt: moment.utc(r.EXAM_DT).format(\"MM/DD/YYYY\"),\r\n\t\t\t\t\tremarks: r.REMARKS\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"List of Government exam passed has been loaded.\");\r\n\t\t\tthis.obj_personnel.GOVERNMENT_EXAM.list = tmp;\r\n\r\n\t\t\tif(tmpLog.length>0){\r\n\r\n\t\t\t\tthis.lblCreatedBy = tmpLog[0].user + \" \" + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tvar lastIndex = tmpLog.length - 1;\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpLog[lastIndex].user + \" \" + moment.utc(tmpLog[lastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\r\n\r\n\t\t}, (e1)=>{\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying exam record.\");\r\n\t\t});\t\r\n\t}\r\n\r\n\tbtnAdd(){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"ADD\";\r\n\t}\r\n\r\n\tbtnEdit(item){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"EDIT\";\r\n\t\tthis.obj_personnel.GOVERNMENT_EXAM.model.exam_id = item.exam_id;\r\n\t\tthis.obj_personnel.GOVERNMENT_EXAM.model.exam_cd = item.exam_cd;\r\n\t\tthis.obj_personnel.GOVERNMENT_EXAM.model.rating_grade = item.rating_grade;\r\n\t\tthis.obj_personnel.GOVERNMENT_EXAM.model.remarks = item.remarks;\r\n\t\tthis.obj_personnel.GOVERNMENT_EXAM.model.exam_dt = item.exam_dt;\r\n\t}\r\n\r\n\tbtnRemove(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the record?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('EXAM_TRX').where('EXAM_ID', '==', item.exam_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\", \"Record was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadExamRecord(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.clearField();\r\n\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(error, \"Error in removing exam info.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tclearField(){\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableTable = false;\r\n\t\tthis.formStatus = \"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_EXAM.model = {};\r\n\t}\r\n\r\n\tDigitOnly(event){\r\n\t\treturn isDigit(event);\r\n\t}\r\n\r\n\tvalidate(){\r\n\r\n\t\tvar strValidation = \"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_EXAM.model.exam_dt = $(\"#exam_dt\").val();\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_EXAM.model.exam_cd == undefined || this.obj_personnel.GOVERNMENT_EXAM.model.exam_cd == null || this.obj_personnel.GOVERNMENT_EXAM.model.exam_cd.length==0){\r\n\t\t\tstrValidation+=\"Exam name not specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_EXAM.model.rating_grade == undefined || this.obj_personnel.GOVERNMENT_EXAM.model.rating_grade == null || this.obj_personnel.GOVERNMENT_EXAM.model.rating_grade.length==0){\r\n\t\t\tstrValidation+=\"Rating/Grade not specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_EXAM.model.exam_dt == undefined || this.obj_personnel.GOVERNMENT_EXAM.model.exam_dt == null || this.obj_personnel.GOVERNMENT_EXAM.model.exam_dt.length==0){\r\n\t\t\tstrValidation+=\"No exam date specified.<br/>\";\r\n\t\t}else{\r\n\t\t\tif(moment(this.obj_personnel.GOVERNMENT_EXAM.model.exam_dt).isValid()){\r\n\r\n\t\t\t\tvar d1 = new Date(this.obj_personnel.GOVERNMENT_EXAM.model.exam_dt);\r\n\t\t\t\tvar d2 = new Date();\r\n\r\n\t\t\t\tif(d1>d2){\r\n\t\t\t\t\tstrValidation+=\"exam date cannot be greater than date today.<br/>\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+=\"Invalid exam date.<br/>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.formStatus==\"ADD\"){\r\n\t\t\t\tthis.saveExamInfo(this.obj_personnel.global_indiv_id);\r\n\t\t\t}else if(this.formStatus==\"EDIT\"){\r\n\t\t\t\tthis.updateExamInfo(this.obj_personnel.GOVERNMENT_EXAM.model.exam_id);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tsaveExamInfo(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"EXAM_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"EXAM_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar maxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].EXAM_ID + 1;\r\n\t\t\t}\r\n\r\n\t\t\tvar exam_trx = {\r\n\t\t\t\tEXAM_ID: maxId,\r\n\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\tEXAM_CD: this.obj_personnel.GOVERNMENT_EXAM.model.exam_cd,\r\n\t\t\t\tRATING_GRADE: this.obj_personnel.GOVERNMENT_EXAM.model.rating_grade,\r\n\t\t\t\tEXAM_DT: this.obj_personnel.GOVERNMENT_EXAM.model.exam_dt,\r\n\t\t\t\tREMARKS: this.obj_personnel.GOVERNMENT_EXAM.model.remarks,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\t\t\tconsole.log(exam_trx);\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"EXAM_TRX\", exam_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadExamRecord(global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in saving exam info.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\t\t\t\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying exam id.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tupdateExamInfo(exam_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"EXAM_TRX\")\r\n\t\t\t\t\t.where(\"EXAM_ID\", \"==\", exam_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].EXAM_CD = this.obj_personnel.GOVERNMENT_EXAM.model.exam_cd;\r\n\t\t\ts1.results[0].RATING_GRADE = this.obj_personnel.GOVERNMENT_EXAM.model.rating_grade;\r\n\t\t\ts1.results[0].REMARKS = this.obj_personnel.GOVERNMENT_EXAM.model.remarks;\r\n\t\t\ts1.results[0].EXAM_DT = new Date(moment(this.obj_personnel.GOVERNMENT_EXAM.model.exam_dt).add(8, \"hours\"));\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\tthis.loadExamRecord(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\r\n\t\t\t}, (e2)=>{\r\n\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in updating exam info.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying exam info.\");\r\n\t\t});\r\n\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\n\r\n@inject(DialogService, obj_personnel, toastr)\r\nexport class gov_info_group{\r\n\t\r\n\tobj_personnel = null;\r\n\t_activeTab=0;\r\n\t_404_img = \"/images/404.png\";\r\n\tconstructor(dialogService, obj_personnel, toastr){\r\n\t\tthis.dialogService = dialogService;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num == 3){\r\n\t\t\t\t$(\"#gov_tab0\").addClass(\"active\");\r\n\t\t\t\t$(\"#gov_tab1\").removeClass(\"active\");\r\n\t\t\t\t$(\"#gov_tab2\").removeClass(\"active\");\r\n\t\t\t\t$(\"#gov_info_tabs\").find(\".active\").removeClass(\"active\");\r\n\t\t\t\t$(\"#gov_info_main\").addClass(\"active\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tclickTab_GovInfo(tab_num){\r\n\t\tif(this.obj_personnel.global_indiv_id.length===0)\r\n\t\t\treturn;\r\n\t\tswitch(tab_num){\r\n\t\t\tcase 0: \r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.info(\"\", \"Loading government info...\");\t\t\t\t\t\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 1: \r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.info(\"\", \"Loading government exam passed...\");\t\t\t\t\t\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 2: \r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.info(\"\", \"Loading criminal record...\");\r\n\t\t}\r\n\t\tthis.obj_personnel.OBSERVERS.govinfo_tab_changed.forEach((delegate)=>{\r\n\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t});\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class gov_info_group_main{\r\n\t\r\n\tobj_personnel = null;\r\n\talreadyLoaded = false;\r\n\t_disableOtherGovernmentInfo = true;\r\n\tlblCreatedBy = null;\r\n\tlblUpdatedBy = null;\r\n\r\n\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\r\n\t\t$(\"#affidavit_dt\").datepicker();\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num,global_id)=>{\r\n\t\t\tif(tab_num==3){\r\n\t\t\t\tif(!this.alreadyLoaded){\r\n\t\t\t\t\tthis.alreadyLoaded = false;\r\n\t\t\t\t\t$(\"#affidavit_dt\").datepicker();\r\n\t\t\t\t\t$(\"#expiry_dt\").datepicker();\r\n\t\t\t\t\t$(\"#vat_reg_dt\").datepicker();\r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.info(\"\", \"Loading data...\");\r\n\t\t\t\t\tthis.load_TaxInformation(global_id);\r\n\t\t\t\t\tthis.load_TaxAffidavit(global_id);\r\n\t\t\t\t\tthis.load_Permit(global_id);\r\n\t\t\t\t\tthis.clearTaxAffidavitField();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\tif(this.obj_personnel.USER.COMPANY_ID == 1){\r\n\t\t\t\tthis._disableOtherGovernmentInfo = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.govinfo_tab_changed.push((tab_num, global_id)=>{\r\n\t\t\tif(tab_num == 0){\r\n\t\t\t\tthis.load_TaxInformation(global_id);\r\n\t\t\t\tthis.load_TaxAffidavit(global_id);\r\n\t\t\t\tthis.load_Permit(global_id);\r\n\t\t\t\tthis.clearTaxAffidavitField();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.push(()=>{\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO = {\t\t\t\t\r\n\t\t\t\tmodelTaxAffidavit:{},\r\n\t\t\t\tmodelPermit:{},\r\n\t\t\t\ttax_affidavit:[],\r\n\t\t\t\tpermits:[]\r\n\t\t\t};\r\n\t\t\tthis.alreadyLoaded=false;\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n\tformatDate(strDate){\r\n\t\tif(strDate == null || strDate.length == 0)\r\n\t\t\treturn \"\";\r\n\t\tvar dt = new Date(strDate);\r\n\t\tvar month = dt.getMonth()+1;\r\n\t\tvar day = dt.getDate();\r\n\t\tvar year = dt.getFullYear();\r\n\t\treturn ('0'+month).slice(-2)+'/'+('0'+day).slice(-2)+'/'+(\"000\"+year).slice(-4);\r\n\t}\r\n\r\n\tconvertToGMT8(date){\r\n\t\tif(date==undefined || date == null || date.length==0)\r\n\t\t\treturn null;\r\n\t\tvar tempDt = moment(date).add(8, 'hours');\r\n\t\treturn new Date(tempDt);\r\n\t}\r\n\r\n\r\n\tvalidate_input(input, type){\r\n\t\tswitch(type){\r\n\t\t\tcase \"PAGIBIG\": \r\n\t\t\t\t\tvar pagibig = /^(?:\\d{4}-\\d{4}-\\d{4})$/;\r\n\t\t\t\t\treturn pagibig.test(input);\r\n\t\t\tcase \"SSS\":\r\n\t\t\t\t\tvar sss = /^(?:\\d{2}-\\d{7}-\\d{1})$/;\r\n\t\t\t\t\treturn sss.test(input);\r\n\t\t\tcase \"PHILHEALTH\":\r\n\t\t\t\t\tvar philhealth = /^(?:\\d{2}-\\d{9}-\\d{1})$/;\r\n\t\t\t\t\treturn philhealth.test(input);\r\n\t\t\tdefault: return false;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tload_TaxInformation(global_id){\t\t\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.tax_exempt_cd = \"--\";\r\n\t\t// var query = EntityQuery().from(\"GLOBAL_INDIV_MSTR\")\r\n\t\t// \t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", global_id);\r\n\t\t// EntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\t\r\n\t\t// \tthis.obj_personnel.GOVERNMENT_INFO.tax_exempt_cd = querySuccess.results[0].TAX_EXEMPT_CD;\r\n\t\t// \tthis.obj_personnel.GOVERNMENT_INFO.sss_no = querySuccess.results[0].SSS_NO;\r\n\t\t// \tthis.obj_personnel.GOVERNMENT_INFO.pagibig_no = querySuccess.results[0].PAGIBIG_NO;\r\n\t\t// \tthis.obj_personnel.GOVERNMENT_INFO.philhealth_no = querySuccess.results[0].PHILHEALTH_NO;\r\n\t\t// \tthis.obj_personnel.GOVERNMENT_INFO.national_id = querySuccess.results[0].NATIONAL_ID;\r\n\t\t// \tthis.obj_personnel.GOVERNMENT_INFO.voters_id = querySuccess.results[0].VOTERS_ID;\r\n\t\t// \tif(querySuccess.results[0].CREATED_BY != null){\r\n\t\t// \t\tvar _user = querySuccess.results[0].CREATED_BY;\r\n\t\t// \t\tvar _date = moment.utc(querySuccess.results[0].CREATED_DT).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t// \t\tthis.lblCreatedBy = _user + ' '+ _date;\t\t\t\t\r\n\t\t// \t}else{\r\n\t\t// \t\tthis.lblCreatedBy = \"\";\r\n\t\t// \t}\r\n\r\n\t\t// \tif(querySuccess.results[0].LAST_UPDATED_BY != null){\r\n\t\t// \t\tvar _user = querySuccess.results[0].LAST_UPDATED_BY;\r\n\t\t// \t\tvar _date = moment.utc(querySuccess.results[0].LAST_UPDATED_DT).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t// \t\tthis.lblUpdatedBy = _user+ ' ' + _date;\r\n\t\t// \t}else{\r\n\t\t// \t\tthis.lblUpdatedBy = \"\";\r\n\t\t// \t}\r\n\r\n\t\t// \ttoastr.clear();\r\n\t\t// \tsettings.isNavigating = false;\r\n\r\n\r\n\t\t// }, (errorQuery)=>{\r\n\t\t// \tsettings.isNavigating = false;\r\n\t\t// \ttoastr.error(errorQuery, \"Error in loading Government information.\");\r\n\t\t// });\r\n\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_MSTR\")\r\n\t\t\t\t.where(\"GLOBAL_ID\",\"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.input_tax_cd = querySuccess.results[0].INPUT_TAX_CD;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.tin = querySuccess.results[0].TIN;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.vat_reg_dt = this.formatDate(querySuccess.results[0].VAT_REG_DT);\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.vat_stat_cd = querySuccess.results[0].VAT_STAT_CD;\r\n\t\t\ttoastr.success(\"\",\"Tax Information has been loaded.\");\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t}, (errorQuery)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(errorQuery, \"Error in loading Government information.\");\r\n\t\t});\r\n\t}\r\n\r\n\tload_TaxAffidavit(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"TAX_AFFIDAVIT_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.tax_affidavit=[];\r\n\t\t\tvar tmpList = [];\r\n\t\t\t_.each(querySuccess.results, (result)=>{\r\n\t\t\t\ttmpList.push({\r\n\t\t\t\t\ttax_affidavit_id: result.TAX_AFFIDAVIT_ID,\r\n\t\t\t\t\taffidavit_no: result.AFFIDAVIT_NO,\r\n\t\t\t\t\taffidavit_dt: this.formatDate(result.AFFIDAVIT_DT)\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.tax_affidavit = tmpList;\r\n\t\t\tsettings.isNavigating = false;\t\t\t\r\n\t\t}, (errorQuery)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(errorQuery, \"Error in loading tax affidavit\");\r\n\t\t});\r\n\t}\r\n\r\n\tload_Permit(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"PERMIT_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\r\n\t\tEntityManager().executeQuery(query).then((successQuery)=>{\r\n\t\t\tvar tmpList=[];\r\n\t\t\t_.each(successQuery.results, (result)=>{\r\n\t\t\t\tvar place = this.obj_personnel.LOCATIONS.find((x)=>{\r\n\t\t\t\t\treturn x.LOCATION_CD == result.PLACE_OF_ISSUE;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar permit = this.obj_personnel.PERMIT.find((x)=>{\r\n\t\t\t\t\treturn x.value == result.PERMIT_CD;\r\n\t\t\t\t});\r\n\r\n\t\t\t\ttmpList.push({\r\n\t\t\t\t\tglobal_id: result.GLOBAL_ID,\r\n\t\t\t\t\tpermit_no: result.PERMIT_NO,\r\n\t\t\t\t\texpiry_dt: this.formatDate(result.EXPIRY_DT),\r\n\t\t\t\t\tpermit_cd: result.PERMIT_CD,\r\n\t\t\t\t\tagency_cd: result.AGENCY_CD,\r\n\t\t\t\t\tpermit_id: result.PERMIT_ID,\r\n\t\t\t\t\tgrant_dt: result.GRANT_DT,\r\n\t\t\t\t\tplace_of_issue: result.PLACE_OF_ISSUE,\r\n\t\t\t\t\tpoi: place.LOCATION_DESC,\r\n\t\t\t\t\tpermit_name: permit.text\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.permits = tmpList;\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t}, (errorQuery)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(errorQuery, \"Error in loading permits.\");\r\n\t\t});\r\n\t}\r\n\r\n\tclearTaxAffidavitField(){\r\n\t\tsettings.isNavigating = false;\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no = \"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt = \"\";\r\n\t\t//$(\"#affidavit_dt\").val(\"\");\r\n\t}\r\n\r\n\tbtnAdd_TaxAffidavit(){\r\n\t\tvar strValidation=\"\";\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no == undefined || this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no == null || this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no.length==0){\r\n\t\t\tstrValidation += \"Affidavit no is required.<br/>\";\r\n\t\t}\r\n\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt = $(\"#affidavit_dt\").val();\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt == undefined || this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt == null || this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt.length==0){\r\n\t\t\tstrValidation += \"Affidavit date is required.<br/>\";\r\n\t\t}else{\r\n\t\t\tif(!moment(this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt).isValid()){\r\n\t\t\t\tstrValidation += \"Invalid affidavit dt.<br/>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tthis.insertTaxAffidavit();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tbtnRemove_TaxAffidavit(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the tax affidavit?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n  \t\t\t\t\tsettings.isNavigating = true;\r\n\t  \t\t\t\t//alert(\"Confirmed delete.\");\r\n  \t\t\t\t\tvar query = EntityQuery().from('TAX_AFFIDAVIT_TRX').where('TAX_AFFIDAVIT_ID', '==', item.tax_affidavit_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The tax affidavit was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.load_TaxAffidavit(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing tax affidavit.\");\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tinsertTaxAffidavit(){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"TAX_AFFIDAVIT_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"TAX_AFFIDAVIT_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tvar Max = 1;\r\n\t\t\tif(querySuccess.results.length>0){\r\n\t\t\t\tMax = querySuccess.results[0].TAX_AFFIDAVIT_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar tax_affidavit = {\r\n\t\t\t\tGLOBAL_ID: this.obj_personnel.global_indiv_id,\r\n\t\t\t\tAFFIDAVIT_NO: this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no,\r\n\t\t\t\tTAX_AFFIDAVIT_ID: Max,\r\n\t\t\t\tAFFIDAVIT_DT: this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt,\r\n\t\t\t\tRELEASE_DT: dateToday,\r\n\t\t\t\tRETURN_DT: dateToday,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t}\r\n\t\t\tvar entity = EntityManager().createEntity(\"TAX_AFFIDAVIT_TRX\", tax_affidavit);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(saveSuccess, \"Record saved.\");\r\n\t\t\t\tthis.load_TaxAffidavit(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearTaxAffidavitField();\r\n\t\t\t}, (errorSave)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity!=null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.error(errorQuery, \"Error in saving Tax affidavit.\");\r\n\t\t\t});\r\n\r\n\r\n\t\t}, (errorQuery)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(errorQuery, \"Error in querying Tax affidavit id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tclearPermitField(){\r\n\t\tsettings.isNavigating = false;\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd=\"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no=\"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt=\"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue=\"\";\r\n\t}\r\n\r\n\tbtnAdd_Permit(){\r\n\t\tvar strValidation=\"\";\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd == undefined || this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd == null || this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd.length==0){\r\n\t\t\tstrValidation+=\"No Permit type specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no == undefined || this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no == null || this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no.length==0){\r\n\t\t\tstrValidation+=\"No Permit number specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt = $(\"#expiry_dt\").val();\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt == undefined || this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt == null || this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt.length==0){\r\n\t\t\tstrValidation+=\"No expiry date specified.<br/>\";\r\n\t\t}else{\r\n\t\t\tif(!moment(this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt).isValid()){\r\n\t\t\t\tstrValidation+=\"Invalid expiry date.<br/>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue == undefined || this.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue == null || this.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue.length==0){\r\n\t\t\tstrValidation+=\"No place of issuance specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tthis.insertPermit();\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tbtnUpdate_Permit(item){\r\n\r\n\t}\r\n\r\n\tbtnRemove_Permit(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the permit?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\t//alert(\"Confirmed delete.\");\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('PERMIT_TRX').where('PERMIT_ID', '==', item.permit_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The permit was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.load_Permit(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing permit.\");\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tinsertPermit(){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"PERMIT_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"PERMIT_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tvar Max = 1;\r\n\t\t\tif(querySuccess.results.length>0){\r\n\t\t\t\tMax = querySuccess.results[0].PERMIT_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar permit = {\r\n\t\t\t\tGLOBAL_ID: this.obj_personnel.global_indiv_id,\r\n\t\t\t\tPERMIT_NO: this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no,\r\n\t\t\t\tEXPIRY_DT: this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt,\r\n\t\t\t\tPERMIT_CD: this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd,\r\n\t\t\t\t AGENCY_CD: this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd,\r\n\t\t\t\tPERMIT_ID: Max,\r\n\t\t\t\tPLACE_OF_ISSUE: this.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"PERMIT_TRX\", permit);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.load_Permit(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearPermitField();\r\n\t\t\t}, (errorSave)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", errorSave);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t\r\n\tvalidate(){\r\n\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.pagibig_no = $(\"#_pagibig\").val();\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.philhealth_no = $(\"#_philhealth\").val();\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.sss_no = $(\"#_sss\").val();\r\n\t\tvar strValidation=\"\";\r\n\r\n\t\t// if(this.obj_personnel.GOVERNMENT_INFO.pagibig_no.length>0){\r\n\t\t// \tif(this.obj_personnel.GOVERNMENT_INFO.pagibig_no != \"____-____-____\" && !this.validate_input(this.obj_personnel.GOVERNMENT_INFO.pagibig_no, \"PAGIBIG\")){\r\n\t\t// \t\tstrValidation+=\"Invalid Pag-ibig No.<br/>\";\r\n\t\t// \t}\r\n\t\t// }else{\r\n\t\t// \t// this.obj_personnel.GOVERNMENT_INFO.pagibig_no = \"0000-0000-0000\";\r\n\t\t// }\r\n\r\n\t\t// if(this.obj_personnel.GOVERNMENT_INFO.sss_no.length>0){\r\n\t\t// \tif(this.obj_personnel.GOVERNMENT_INFO.sss_no != \"__-_______-_\" &&  !this.validate_input(this.obj_personnel.GOVERNMENT_INFO.sss_no, \"SSS\")){\r\n\t\t// \t\tstrValidation+=\"Invalid SSS No.<br/>\";\r\n\t\t// \t\tconsole.log(this.obj_personnel.GOVERNMENT_INFO.sss_no);\r\n\t\t// \t}\r\n\t\t// }else{\r\n\t\t// \t// this.obj_personnel.GOVERNMENT_INFO.sss_no = \"00-0000000-0\";\r\n\t\t// }\r\n\r\n\t\t// if(this.obj_personnel.GOVERNMENT_INFO.philhealth_no.length>0){\r\n\t\t// \tif(this.obj_personnel.GOVERNMENT_INFO.philhealth_no != \"__-_________-_\" && !this.validate_input(this.obj_personnel.GOVERNMENT_INFO.philhealth_no, \"PHILHEALTH\")){\r\n\t\t// \t\tstrValidation+=\"Invalid Philhealth No.<br/>\";\r\n\t\t// \t}\r\n\t\t// }else{\r\n\t\t// \t// this.obj_personnel.GOVERNMENT_INFO.philhealth_no = \"00-000000000-0\";\r\n\t\t// }\r\n\r\n\t\t// this.obj_personnel.GOVERNMENT_INFO.vat_reg_dt = $(\"#vat_reg_dt\").val();\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\t\t\t\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tthis.update();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tupdate(){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\r\n\t\tvar philhealth = null;\r\n\t\tvar pagibig = null;\r\n\t\tvar sss =null;\r\n\t\t// if(this.obj_personnel.GOVERNMENT_INFO.philhealth_no != \"__-_________-_\")\r\n\t\t// {\r\n\t\t// \tphilhealth=this.obj_personnel.GOVERNMENT_INFO.philhealth_no;\r\n\t\t// }\r\n\r\n\t\t// if(this.obj_personnel.GOVERNMENT_INFO.pagibig_no != \"____-____-____\")\r\n\t\t// {\r\n\t\t// \tpagibig=this.obj_personnel.GOVERNMENT_INFO.pagibig_no;\r\n\t\t// }\r\n\r\n\t\t// if(this.obj_personnel.GOVERNMENT_INFO.sss_no != \"__-_______-_\")\r\n\t\t// {\r\n\t\t// \tsss=this.obj_personnel.GOVERNMENT_INFO.sss_no;\r\n\t\t// }\r\n\r\n\t\tvar query=EntityQuery().from(\"GLOBAL_MSTR\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", this.obj_personnel.global_indiv_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess2)=>{\r\n\t\t\tquerySuccess2.results[0].INPUT_TAX_CD = this.obj_personnel.GOVERNMENT_INFO.input_tax_cd;\r\n\t\t\tquerySuccess2.results[0].VAT_REG_DT = this.convertToGMT8(this.obj_personnel.GOVERNMENT_INFO.vat_reg_dt);\r\n\t\t\tquerySuccess2.results[0].VAT_STAT_CD = this.obj_personnel.GOVERNMENT_INFO.vat_stat_cd;\r\n\t\t\tquerySuccess2.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\tquerySuccess2.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((save2)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t}, (error2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", error2);\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\r\n\t\t// var query = EntityQuery().from(\"GLOBAL_INDIV_MSTR\")\r\n\t\t// \t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", this.obj_personnel.global_indiv_id);\r\n\t\t// EntityManager().executeQuery(query).then((querySuccess1)=>{\r\n\t\t// \tquerySuccess1.results[0].TAX_EXEMPT_CD = this.obj_personnel.GOVERNMENT_INFO.tax_exempt_cd;\r\n\t\t// \t// querySuccess1.results[0].SSS_NO = this.obj_personnel.GOVERNMENT_INFO.sss_no;\r\n\t\t// \t// querySuccess1.results[0].PAGIBIG_NO = this.obj_personnel.GOVERNMENT_INFO.pagibig_no;\r\n\t\t// \t// querySuccess1.results[0].PHILHEALTH_NO = this.obj_personnel.GOVERNMENT_INFO.philhealth_no;\t\t\t\r\n\t\t// \tquerySuccess1.results[0].SSS_NO = sss;\r\n\t\t// \tquerySuccess1.results[0].PAGIBIG_NO = pagibig;\r\n\t\t// \tquerySuccess1.results[0].PHILHEALTH_NO = philhealth;\r\n\t\t// \tquerySuccess1.results[0].NATIONAL_ID = this.obj_personnel.GOVERNMENT_INFO.national_id;\r\n\t\t// \tquerySuccess1.results[0].VOTERS_ID = this.obj_personnel.GOVERNMENT_INFO.voters_id;\r\n\t\t// \tquerySuccess1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t// \tquerySuccess1.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t// \tEntityManager().saveChanges().then((save1)=>{\r\n\t\t\t\t\r\n\t\t// \t\tquery=EntityQuery().from(\"GLOBAL_MSTR\")\r\n\t\t// \t\t\t  .where(\"GLOBAL_ID\", \"==\", this.obj_personnel.global_indiv_id);\r\n\t\t// \t\tEntityManager().executeQuery(query).then((querySuccess2)=>{\r\n\t\t// \t\t\tquerySuccess2.results[0].INPUT_TAX_CD = this.obj_personnel.GOVERNMENT_INFO.input_tax_cd;\r\n\t\t// \t\t\tquerySuccess2.results[0].VAT_REG_DT = this.convertToGMT8(this.obj_personnel.GOVERNMENT_INFO.vat_reg_dt);\r\n\t\t// \t\t\tquerySuccess2.results[0].VAT_STAT_CD = this.obj_personnel.GOVERNMENT_INFO.vat_stat_cd;\r\n\t\t// \t\t\tquerySuccess2.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t// \t\t\tquerySuccess2.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t// \t\t\tEntityManager().saveChanges().then((save2)=>{\r\n\t\t// \t\t\t\ttoastr.clear();\r\n\t\t// \t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t// \t\t\t\tsettings.isNavigating = false;\r\n\t\t// \t\t\t}, (error2)=>{\r\n\t\t// \t\t\t\tsettings.isNavigating = false;\r\n\t\t// \t\t\t\ttoastr.clear();\r\n\t\t// \t\t\t\ttoastr.error(\"\", error2);\r\n\t\t// \t\t\t});\r\n\r\n\t\t// \t\t});\r\n\r\n\t\t// \t}, (error1)=>{\r\n\t\t// \t\tsettings.isNavigating = false;\r\n\t\t// \t\ttoastr.clear();\r\n\t\t// \t\ttoastr.error(\"\", error1);\r\n\t\t// \t});\r\n\t\t// }, (queryError1)=>{\r\n\t\t// \tsettings.isNavigating = false;\r\n\t\t// \ttoastr.clear();\r\n\t\t// \ttoastr.error(queryError1, \"Error in querying other government info.\");\r\n\t\t// });\r\n\t}\r\n\r\n\t//source: https://stackoverflow.com/questions/12578507/how-to-implement-an-input-with-a-mask\r\n\tisDigit(event){\r\n\t\tif ((event.charCode >= 48 && event.charCode <= 57) || event.keyCode == 9 || event.keyCode == 10 || event.keyCode == 13 || event.keyCode == 8 || event.keyCode == 116 || event.keyCode == 46 || (event.keyCode <= 40 && event.keyCode >= 37)) {\r\n    \t\treturn true;\r\n  \t\t} else {\r\n    \t\treturn false;\r\n  \t\t}  \t\t\r\n\t}\r\n\r\n\t//source: https://stackoverflow.com/questions/12578507/how-to-implement-an-input-with-a-mask\r\n\tinput_mask(id, mask){\r\n\t\tvar myMask = mask;\r\n  \t\tvar myCaja = document.getElementById(id);\r\n  \t\tvar myText = \"\";\r\n  \t\tvar myNumbers = [];\r\n  \t\tvar myOutPut = \"\"\r\n  \t\tvar theLastPos = 1;\r\n  \t\tmyText = myCaja.value;\r\n  \t\t//get numbers\r\n  \t\tfor (var i = 0; i < myText.length; i++) {\r\n    \t\tif (!isNaN(myText.charAt(i)) && myText.charAt(i) != \" \") {\r\n      \t\t\tmyNumbers.push(myText.charAt(i));\r\n    \t\t}\r\n  \t\t}\r\n  //write over mask\r\n  \t\tfor (var j = 0; j < myMask.length; j++) {\r\n    \t\tif (myMask.charAt(j) == \"_\") { //replace \"_\" by a number \r\n      \t\t\tif (myNumbers.length == 0)\r\n        \t\t\tmyOutPut = myOutPut + myMask.charAt(j);\r\n      \t\t\telse {\r\n        \t\t\tmyOutPut = myOutPut + myNumbers.shift();\r\n        \t\t\ttheLastPos = j + 1; //set caret position\r\n      \t\t\t}\r\n    \t\t} else {\r\n      \t\t\tmyOutPut = myOutPut + myMask.charAt(j);\r\n    \t\t}\r\n  \t\t}\r\n\r\n  \t\tdocument.getElementById(id).value = myOutPut;\r\n  \t\tdocument.getElementById(id).setSelectionRange(theLastPos, theLastPos);\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class gov_info_main{\r\n\r\n\tobj_personnel = null;\r\n\talreadyLoaded = false;\r\n\t_disableOtherGovernmentInfo = true;\r\n\tlblCreatedBy = null;\r\n\tlblUpdatedBy = null;\r\n\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\r\n\t\t$(\"#affidavit_dt\").datepicker();\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num,global_id)=>{\r\n\t\t\tif(tab_num==3){\r\n\t\t\t\tif(!this.alreadyLoaded){\r\n\t\t\t\t\tthis.alreadyLoaded = false;\r\n\t\t\t\t\t$(\"#affidavit_dt\").datepicker();\r\n\t\t\t\t\t$(\"#expiry_dt\").datepicker();\r\n\t\t\t\t\t$(\"#vat_reg_dt\").datepicker();\r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.info(\"\", \"Loading data...\");\r\n\t\t\t\t\tthis.load_TaxInformation(global_id);\r\n\t\t\t\t\tthis.load_TaxAffidavit(global_id);\r\n\t\t\t\t\tthis.load_Permit(global_id);\r\n\t\t\t\t\tthis.clearTaxAffidavitField();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\tif(this.obj_personnel.USER.COMPANY_ID == 1){\r\n\t\t\t\tthis._disableOtherGovernmentInfo = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.govinfo_tab_changed.push((tab_num, global_id)=>{\r\n\t\t\tif(tab_num == 0){\r\n\t\t\t\tthis.load_TaxInformation(global_id);\r\n\t\t\t\tthis.load_TaxAffidavit(global_id);\r\n\t\t\t\tthis.load_Permit(global_id);\r\n\t\t\t\tthis.clearTaxAffidavitField();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.push(()=>{\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO = {\t\t\t\t\r\n\t\t\t\tmodelTaxAffidavit:{},\r\n\t\t\t\tmodelPermit:{},\r\n\t\t\t\ttax_affidavit:[],\r\n\t\t\t\tpermits:[]\r\n\t\t\t};\r\n\t\t\tthis.alreadyLoaded=false;\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tformatDate(strDate){\r\n\t\tif(strDate == null || strDate.length == 0)\r\n\t\t\treturn \"\";\r\n\t\tvar dt = new Date(strDate);\r\n\t\tvar month = dt.getMonth()+1;\r\n\t\tvar day = dt.getDate();\r\n\t\tvar year = dt.getFullYear();\r\n\t\treturn ('0'+month).slice(-2)+'/'+('0'+day).slice(-2)+'/'+(\"000\"+year).slice(-4);\r\n\t}\r\n\r\n\tconvertToGMT8(date){\r\n\t\tif(date==undefined || date == null || date.length==0)\r\n\t\t\treturn null;\r\n\t\tvar tempDt = moment(date).add(8, 'hours');\r\n\t\treturn new Date(tempDt);\r\n\t}\r\n\r\n\r\n\tvalidate_input(input, type){\r\n\t\tswitch(type){\r\n\t\t\tcase \"PAGIBIG\": \r\n\t\t\t\t\tvar pagibig = /^(?:\\d{4}-\\d{4}-\\d{4})$/;\r\n\t\t\t\t\treturn pagibig.test(input);\r\n\t\t\tcase \"SSS\":\r\n\t\t\t\t\tvar sss = /^(?:\\d{2}-\\d{7}-\\d{1})$/;\r\n\t\t\t\t\treturn sss.test(input);\r\n\t\t\tcase \"PHILHEALTH\":\r\n\t\t\t\t\tvar philhealth = /^(?:\\d{2}-\\d{9}-\\d{1})$/;\r\n\t\t\t\t\treturn philhealth.test(input);\r\n\t\t\tdefault: return false;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tload_TaxInformation(global_id){\t\t\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_INDIV_MSTR\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\t\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.tax_exempt_cd = querySuccess.results[0].TAX_EXEMPT_CD;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.sss_no = querySuccess.results[0].SSS_NO;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.pagibig_no = querySuccess.results[0].PAGIBIG_NO;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.philhealth_no = querySuccess.results[0].PHILHEALTH_NO;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.national_id = querySuccess.results[0].NATIONAL_ID;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.voters_id = querySuccess.results[0].VOTERS_ID;\r\n\t\t\tif(querySuccess.results[0].CREATED_BY != null){\r\n\t\t\t\tvar _user = querySuccess.results[0].CREATED_BY;\r\n\t\t\t\tvar _date = moment.utc(querySuccess.results[0].CREATED_DT).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tthis.lblCreatedBy = _user + ' '+ _date;\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t}\r\n\r\n\t\t\tif(querySuccess.results[0].LAST_UPDATED_BY != null){\r\n\t\t\t\tvar _user = querySuccess.results[0].LAST_UPDATED_BY;\r\n\t\t\t\tvar _date = moment.utc(querySuccess.results[0].LAST_UPDATED_DT).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tthis.lblUpdatedBy = _user+ ' ' + _date;\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\r\n\t\t\ttoastr.clear();\r\n\t\t\tsettings.isNavigating = false;\r\n\r\n\r\n\t\t}, (errorQuery)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(errorQuery, \"Error in loading Government information.\");\r\n\t\t});\r\n\r\n\t\tquery = EntityQuery().from(\"GLOBAL_MSTR\")\r\n\t\t\t\t.where(\"GLOBAL_ID\",\"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.input_tax_cd = querySuccess.results[0].INPUT_TAX_CD;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.tin = querySuccess.results[0].TIN;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.vat_reg_dt = this.formatDate(querySuccess.results[0].VAT_REG_DT);\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.vat_stat_cd = querySuccess.results[0].VAT_STAT_CD;\r\n\t\t\ttoastr.success(\"\",\"Tax Information has been loaded.\");\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t}, (errorQuery)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(errorQuery, \"Error in loading Government information.\");\r\n\t\t});\r\n\t}\r\n\r\n\tload_TaxAffidavit(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"TAX_AFFIDAVIT_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.tax_affidavit=[];\r\n\t\t\tvar tmpList = [];\r\n\t\t\t_.each(querySuccess.results, (result)=>{\r\n\t\t\t\ttmpList.push({\r\n\t\t\t\t\ttax_affidavit_id: result.TAX_AFFIDAVIT_ID,\r\n\t\t\t\t\taffidavit_no: result.AFFIDAVIT_NO,\r\n\t\t\t\t\taffidavit_dt: this.formatDate(result.AFFIDAVIT_DT)\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.tax_affidavit = tmpList;\r\n\t\t\tsettings.isNavigating = false;\t\t\t\r\n\t\t}, (errorQuery)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(errorQuery, \"Error in loading tax affidavit\");\r\n\t\t});\r\n\t}\r\n\r\n\tload_Permit(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"PERMIT_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\r\n\t\tEntityManager().executeQuery(query).then((successQuery)=>{\r\n\t\t\tvar tmpList=[];\r\n\t\t\t_.each(successQuery.results, (result)=>{\r\n\t\t\t\tvar place = this.obj_personnel.LOCATIONS.find((x)=>{\r\n\t\t\t\t\treturn x.LOCATION_CD == result.PLACE_OF_ISSUE;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar permit = this.obj_personnel.PERMIT.find((x)=>{\r\n\t\t\t\t\treturn x.value == result.PERMIT_CD;\r\n\t\t\t\t});\r\n\r\n\t\t\t\ttmpList.push({\r\n\t\t\t\t\tglobal_id: result.GLOBAL_ID,\r\n\t\t\t\t\tpermit_no: result.PERMIT_NO,\r\n\t\t\t\t\texpiry_dt: this.formatDate(result.EXPIRY_DT),\r\n\t\t\t\t\tpermit_cd: result.PERMIT_CD,\r\n\t\t\t\t\tagency_cd: result.AGENCY_CD,\r\n\t\t\t\t\tpermit_id: result.PERMIT_ID,\r\n\t\t\t\t\tgrant_dt: result.GRANT_DT,\r\n\t\t\t\t\tplace_of_issue: result.PLACE_OF_ISSUE,\r\n\t\t\t\t\tpoi: place.LOCATION_DESC,\r\n\t\t\t\t\tpermit_name: permit.text\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.permits = tmpList;\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t}, (errorQuery)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(errorQuery, \"Error in loading permits.\");\r\n\t\t});\r\n\t}\r\n\r\n\tclearTaxAffidavitField(){\r\n\t\tsettings.isNavigating = false;\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no = \"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt = \"\";\r\n\t\t//$(\"#affidavit_dt\").val(\"\");\r\n\t}\r\n\r\n\tbtnAdd_TaxAffidavit(){\r\n\t\tvar strValidation=\"\";\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no == undefined || this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no == null || this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no.length==0){\r\n\t\t\tstrValidation += \"Affidavit no is required.<br/>\";\r\n\t\t}\r\n\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt = $(\"#affidavit_dt\").val();\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt == undefined || this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt == null || this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt.length==0){\r\n\t\t\tstrValidation += \"Affidavit date is required.<br/>\";\r\n\t\t}else{\r\n\t\t\tif(!moment(this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt).isValid()){\r\n\t\t\t\tstrValidation += \"Invalid affidavit dt.<br/>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tthis.insertTaxAffidavit();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tbtnRemove_TaxAffidavit(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the tax affidavit?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n  \t\t\t\t\tsettings.isNavigating = true;\r\n\t  \t\t\t\t//alert(\"Confirmed delete.\");\r\n  \t\t\t\t\tvar query = EntityQuery().from('TAX_AFFIDAVIT_TRX').where('TAX_AFFIDAVIT_ID', '==', item.tax_affidavit_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The tax affidavit was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.load_TaxAffidavit(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing tax affidavit.\");\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tinsertTaxAffidavit(){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"TAX_AFFIDAVIT_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"TAX_AFFIDAVIT_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tvar Max = 1;\r\n\t\t\tif(querySuccess.results.length>0){\r\n\t\t\t\tMax = querySuccess.results[0].TAX_AFFIDAVIT_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar tax_affidavit = {\r\n\t\t\t\tGLOBAL_ID: this.obj_personnel.global_indiv_id,\r\n\t\t\t\tAFFIDAVIT_NO: this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no,\r\n\t\t\t\tTAX_AFFIDAVIT_ID: Max,\r\n\t\t\t\tAFFIDAVIT_DT: this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt,\r\n\t\t\t\tRELEASE_DT: dateToday,\r\n\t\t\t\tRETURN_DT: dateToday,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t}\r\n\t\t\tvar entity = EntityManager().createEntity(\"TAX_AFFIDAVIT_TRX\", tax_affidavit);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(saveSuccess, \"Record saved.\");\r\n\t\t\t\tthis.load_TaxAffidavit(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearTaxAffidavitField();\r\n\t\t\t}, (errorSave)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity!=null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.error(errorQuery, \"Error in saving Tax affidavit.\");\r\n\t\t\t});\r\n\r\n\r\n\t\t}, (errorQuery)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(errorQuery, \"Error in querying Tax affidavit id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tclearPermitField(){\r\n\t\tsettings.isNavigating = false;\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd=\"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no=\"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt=\"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue=\"\";\r\n\t}\r\n\r\n\tbtnAdd_Permit(){\r\n\t\tvar strValidation=\"\";\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd == undefined || this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd == null || this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd.length==0){\r\n\t\t\tstrValidation+=\"No Permit type specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no == undefined || this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no == null || this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no.length==0){\r\n\t\t\tstrValidation+=\"No Permit number specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt = $(\"#expiry_dt\").val();\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt == undefined || this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt == null || this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt.length==0){\r\n\t\t\tstrValidation+=\"No expiry date specified.<br/>\";\r\n\t\t}else{\r\n\t\t\tif(!moment(this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt).isValid()){\r\n\t\t\t\tstrValidation+=\"Invalid expiry date.<br/>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue == undefined || this.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue == null || this.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue.length==0){\r\n\t\t\tstrValidation+=\"No place of issuance specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tthis.insertPermit();\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tbtnUpdate_Permit(item){\r\n\r\n\t}\r\n\r\n\tbtnRemove_Permit(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the permit?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\t//alert(\"Confirmed delete.\");\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('PERMIT_TRX').where('PERMIT_ID', '==', item.permit_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The permit was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.load_Permit(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing permit.\");\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tinsertPermit(){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"PERMIT_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"PERMIT_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tvar Max = 1;\r\n\t\t\tif(querySuccess.results.length>0){\r\n\t\t\t\tMax = querySuccess.results[0].PERMIT_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar permit = {\r\n\t\t\t\tGLOBAL_ID: this.obj_personnel.global_indiv_id,\r\n\t\t\t\tPERMIT_NO: this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no,\r\n\t\t\t\tEXPIRY_DT: this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt,\r\n\t\t\t\tPERMIT_CD: this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd,\r\n\t\t\t\t AGENCY_CD: this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd,\r\n\t\t\t\tPERMIT_ID: Max,\r\n\t\t\t\tPLACE_OF_ISSUE: this.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"PERMIT_TRX\", permit);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.load_Permit(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearPermitField();\r\n\t\t\t}, (errorSave)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", errorSave);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t\r\n\tvalidate(){\r\n\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.pagibig_no = $(\"#_pagibig\").val();\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.philhealth_no = $(\"#_philhealth\").val();\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.sss_no = $(\"#_sss\").val();\r\n\t\tvar strValidation=\"\";\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.pagibig_no.length>0){\r\n\t\t\tif(this.obj_personnel.GOVERNMENT_INFO.pagibig_no != \"____-____-____\" && !this.validate_input(this.obj_personnel.GOVERNMENT_INFO.pagibig_no, \"PAGIBIG\")){\r\n\t\t\t\tstrValidation+=\"Invalid Pag-ibig No.<br/>\";\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t// this.obj_personnel.GOVERNMENT_INFO.pagibig_no = \"0000-0000-0000\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.sss_no.length>0){\r\n\t\t\tif(this.obj_personnel.GOVERNMENT_INFO.sss_no != \"__-_______-_\" &&  !this.validate_input(this.obj_personnel.GOVERNMENT_INFO.sss_no, \"SSS\")){\r\n\t\t\t\tstrValidation+=\"Invalid SSS No.<br/>\";\r\n\t\t\t\tconsole.log(this.obj_personnel.GOVERNMENT_INFO.sss_no);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t// this.obj_personnel.GOVERNMENT_INFO.sss_no = \"00-0000000-0\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.philhealth_no.length>0){\r\n\t\t\tif(this.obj_personnel.GOVERNMENT_INFO.philhealth_no != \"__-_________-_\" && !this.validate_input(this.obj_personnel.GOVERNMENT_INFO.philhealth_no, \"PHILHEALTH\")){\r\n\t\t\t\tstrValidation+=\"Invalid Philhealth No.<br/>\";\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t// this.obj_personnel.GOVERNMENT_INFO.philhealth_no = \"00-000000000-0\";\r\n\t\t}\r\n\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.vat_reg_dt = $(\"#vat_reg_dt\").val();\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\t\t\t\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tthis.update();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tupdate(){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\r\n\t\tvar philhealth = null;\r\n\t\tvar pagibig = null;\r\n\t\tvar sss =null;\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.philhealth_no != \"__-_________-_\")\r\n\t\t{\r\n\t\t\tphilhealth=this.obj_personnel.GOVERNMENT_INFO.philhealth_no;\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.pagibig_no != \"____-____-____\")\r\n\t\t{\r\n\t\t\tpagibig=this.obj_personnel.GOVERNMENT_INFO.pagibig_no;\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.sss_no != \"__-_______-_\")\r\n\t\t{\r\n\t\t\tsss=this.obj_personnel.GOVERNMENT_INFO.sss_no;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_INDIV_MSTR\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", this.obj_personnel.global_indiv_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess1)=>{\r\n\t\t\tquerySuccess1.results[0].TAX_EXEMPT_CD = this.obj_personnel.GOVERNMENT_INFO.tax_exempt_cd;\r\n\t\t\t// querySuccess1.results[0].SSS_NO = this.obj_personnel.GOVERNMENT_INFO.sss_no;\r\n\t\t\t// querySuccess1.results[0].PAGIBIG_NO = this.obj_personnel.GOVERNMENT_INFO.pagibig_no;\r\n\t\t\t// querySuccess1.results[0].PHILHEALTH_NO = this.obj_personnel.GOVERNMENT_INFO.philhealth_no;\t\t\t\r\n\t\t\tquerySuccess1.results[0].SSS_NO = sss;\r\n\t\t\tquerySuccess1.results[0].PAGIBIG_NO = pagibig;\r\n\t\t\tquerySuccess1.results[0].PHILHEALTH_NO = philhealth;\r\n\t\t\tquerySuccess1.results[0].NATIONAL_ID = this.obj_personnel.GOVERNMENT_INFO.national_id;\r\n\t\t\tquerySuccess1.results[0].VOTERS_ID = this.obj_personnel.GOVERNMENT_INFO.voters_id;\r\n\t\t\tquerySuccess1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\tquerySuccess1.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\tEntityManager().saveChanges().then((save1)=>{\r\n\t\t\t\t\r\n\t\t\t\tquery=EntityQuery().from(\"GLOBAL_MSTR\")\r\n\t\t\t\t\t  .where(\"GLOBAL_ID\", \"==\", this.obj_personnel.global_indiv_id);\r\n\t\t\t\tEntityManager().executeQuery(query).then((querySuccess2)=>{\r\n\t\t\t\t\tquerySuccess2.results[0].INPUT_TAX_CD = this.obj_personnel.GOVERNMENT_INFO.input_tax_cd;\r\n\t\t\t\t\tquerySuccess2.results[0].VAT_REG_DT = this.convertToGMT8(this.obj_personnel.GOVERNMENT_INFO.vat_reg_dt);\r\n\t\t\t\t\tquerySuccess2.results[0].VAT_STAT_CD = this.obj_personnel.GOVERNMENT_INFO.vat_stat_cd;\r\n\t\t\t\t\tquerySuccess2.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\t\tquerySuccess2.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\t\t\tEntityManager().saveChanges().then((save2)=>{\r\n\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\t}, (error2)=>{\r\n\t\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\ttoastr.error(\"\", error2);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t}, (error1)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", error1);\r\n\t\t\t});\r\n\t\t}, (queryError1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(queryError1, \"Error in querying other government info.\");\r\n\t\t});\r\n\t}\r\n\r\n\t//source: https://stackoverflow.com/questions/12578507/how-to-implement-an-input-with-a-mask\r\n\tisDigit(event){\r\n\t\tif ((event.charCode >= 48 && event.charCode <= 57) || event.keyCode == 9 || event.keyCode == 10 || event.keyCode == 13 || event.keyCode == 8 || event.keyCode == 116 || event.keyCode == 46 || (event.keyCode <= 40 && event.keyCode >= 37)) {\r\n    \t\treturn true;\r\n  \t\t} else {\r\n    \t\treturn false;\r\n  \t\t}  \t\t\r\n\t}\r\n\r\n\t//source: https://stackoverflow.com/questions/12578507/how-to-implement-an-input-with-a-mask\r\n\tinput_mask(id, mask){\r\n\t\tvar myMask = mask;\r\n  \t\tvar myCaja = document.getElementById(id);\r\n  \t\tvar myText = \"\";\r\n  \t\tvar myNumbers = [];\r\n  \t\tvar myOutPut = \"\"\r\n  \t\tvar theLastPos = 1;\r\n  \t\tmyText = myCaja.value;\r\n  \t\t//get numbers\r\n  \t\tfor (var i = 0; i < myText.length; i++) {\r\n    \t\tif (!isNaN(myText.charAt(i)) && myText.charAt(i) != \" \") {\r\n      \t\t\tmyNumbers.push(myText.charAt(i));\r\n    \t\t}\r\n  \t\t}\r\n  //write over mask\r\n  \t\tfor (var j = 0; j < myMask.length; j++) {\r\n    \t\tif (myMask.charAt(j) == \"_\") { //replace \"_\" by a number \r\n      \t\t\tif (myNumbers.length == 0)\r\n        \t\t\tmyOutPut = myOutPut + myMask.charAt(j);\r\n      \t\t\telse {\r\n        \t\t\tmyOutPut = myOutPut + myNumbers.shift();\r\n        \t\t\ttheLastPos = j + 1; //set caret position\r\n      \t\t\t}\r\n    \t\t} else {\r\n      \t\t\tmyOutPut = myOutPut + myMask.charAt(j);\r\n    \t\t}\r\n  \t\t}\r\n\r\n  \t\tdocument.getElementById(id).value = myOutPut;\r\n  \t\tdocument.getElementById(id).setSelectionRange(theLastPos, theLastPos);\r\n\t}\r\n\r\n\r\n\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport moment from 'moment';\r\nimport {fnSerializeCode} from \"../../helpers\";\r\nimport { cache_obj } from '../../cache_obj';\r\nimport {input_mask} from \"../../helpers\";\r\nimport {isDigit} from \"../../helpers\";\r\nimport settings from 'settings';\r\n\r\n\r\n@inject(DialogService, obj_personnel, toastr, cache_obj)\r\nexport class group {\r\n\tconstructor(dialogService, obj_personnel, toastr, cache_obj){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.dialogService = dialogService;\r\n\t\tthis.cache_obj = cache_obj;\r\n\t\tthis.obj_personnel.USER = this.cache_obj.USER;\r\n\t}\r\n\r\n\tclickTab_group(index)\r\n\t{\r\n\t\tif(this.obj_personnel.global_indiv_id.length===0)\r\n\t\t\treturn;\r\n\t\tswitch(index){\r\n\t\t\tcase 0: \r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading employee info...\", \"\");\r\n\t\t\t\t// this.loadData(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.group_dialog.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\t//load Contact list.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading contact list...\", \"\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.maintab_contact_clicked.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2: //load Educational Achievement.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading Educational Achievement...\", \"\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.maintab_education_clicked.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3: //load Characteristic/Interest.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading Characteristic/Interest...\", \"\");\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4: //load Skills/Talent.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading Skills/Talent...\", \"\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.maintab_skills_clicked.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 5: //load Language/Dialect.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading Language/Dialect...\", \"\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.maintab_language_clicked.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\t\t\t\r\n\t\t}\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\nimport {OrderByDate, isDigit, input_mask} from '../../helpers';\r\nimport {Router} from 'aurelia-router';\r\nimport {cache_obj} from '../../cache_obj';\r\nimport {group_search} from \"../modals/group_search\";\r\nimport {add_member} from \"../modals/add_member\";\r\n\r\n@inject(obj_personnel, toastr, DialogService, Router, cache_obj)\r\nexport class group_main{\r\n\t\r\n\tobj_personnel = null;\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\t_disableForm = true;\r\n\t_disableSearch = false;\r\n\t_disableCreate = false;\r\n\t_disableClear = false;\r\n\t_disableSave = true;\r\n\t_disableAddMember = true;\r\n\tformStatus = \"\";\r\n\t_lblBtnSave = \"SAVE\";\r\n\trouter;\r\n\r\n\tconstructor(obj_personnel, toastr, DialogService, Router, cache_obj){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\t\tthis.cache_obj = cache_obj;\r\n\t\tthis.router = Router;\r\n\t\tthis.obj_personnel.USER = this.cache_obj.USER;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.group_dialog.push((global_id)=>{\r\n\t\t\tthis.loadGroupDetails(global_id);\r\n\t\t\tthis.loadMembers(global_id);\r\n\t\t});\r\n\t\t\r\n\t}\r\n\r\n\tloadGroupDetails(global_grp_id){\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_GRP_MSTR\")\r\n\t\t.where(\"GLOBAL_GRP_ID\", \"==\", global_grp_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tthis.obj_personnel.GROUP_INFO.model.global_grp_id = s1.results[0].GLOBAL_GRP_ID;\r\n\t\t\tthis.obj_personnel.GROUP_INFO.model.group_name = s1.results[0].GROUP_NAME;\r\n\t\t\tvar establish_dt = null;\r\n\t\t\tif(moment(s1.results[0].ESTABLISH_DT).isValid()){\r\n\t\t\t\testablish_dt = moment.utc(s1.results[0].ESTABLISH_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t}\r\n\t\t\tthis.obj_personnel.GROUP_INFO.model.establish_dt = establish_dt;\r\n\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Group details has been loaded.\");\r\n\t\t\tthis._disableAddMember = false;\r\n\r\n\t\t}, (e1) =>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying group details.\");\r\n\t\t});\r\n\r\n\t\tquery = EntityQuery().from(\"GLOBAL_MSTR\")\r\n\t\t.where(\"GLOBAL_ID\", \"==\", global_grp_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tthis.obj_personnel.GROUP_INFO.model.tin = s1.results[0].TIN;\r\n\t\t\tthis.obj_personnel.GROUP_INFO.model.global_id = s1.results[0].GLOBAL_ID;\r\n\t\t\tthis.obj_personnel.GROUP_INFO.model.country_cd = s1.results[0].COUNTRY_CD;\r\n\t\t\tthis.obj_personnel.GROUP_INFO.model.country_base_cd = s1.results[0].COUNTRY_BASE_CD;\r\n\t\t\tthis.obj_personnel.GROUP_INFO.model.location_base_cd = s1.results[0].LOCATION_BASE_CD;\r\n\t\t\tthis.obj_personnel.GROUP_INFO.model.status_cd = s1.results[0].STATUS_CD;\r\n\t\t\tif(s1.results[0].STATUS_CD == \"SUSPEND\"){\r\n\t\t\t\tvar _pred1 = breeze.Predicate.create(\"GLOBAL_ID\",\"==\", global_grp_id);\r\n\t\t\t\tvar _pred2 = breeze.Predicate.create(\"SUSPEND_LEVEL\", \"==\", 1);\r\n\t\t\t\tvar _finalPred = breeze.Predicate.and([_pred1, _pred2]);\r\n\t\t\t\tquery = EntityQuery().from('SUSPEND_TRX')\r\n\t\t\t\t.where(_finalPred)\r\n\t\t\t\t.orderByDesc(\"SUSPEND_ID\")\r\n\t\t\t\t.take(1);\r\n\t\t\t\tEntityManager().executeQuery(query).then((s2)=>{\r\n\r\n\t\t\t\t\tconsole.log(s2.results);\r\n\t\t\t\t\tif(s2.results.length>0){\r\n\t\t\t\t\t\tthis.obj_personnel.GROUP_INFO.model.suspend_id = s2.results[0].SUSPEND_ID;\r\n\r\n\t\t\t\t\t\tif(moment(s2.results[0].START_DT)){\r\n\t\t\t\t\t\t\tvar start_dt = moment.utc(s2.results[0].START_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\t\t\tthis.obj_personnel.GROUP_INFO.model.suspension_start = start_dt;\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(moment(s2.results[0].END_DT)){\r\n\t\t\t\t\t\t\tvar end_dt = moment.utc(s2.results[0].END_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\t\t\tthis.obj_personnel.GROUP_INFO.model.suspension_end = end_dt;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}, (e2)=>{\r\n\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.error(e2,\"Error in loading suspension details.\");\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying group info.\");\r\n\t\t});\r\n\t}\r\n\r\n\tloadMembers(global_grp_id){\r\n\r\n\t\tconsole.log(global_grp_id);\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"GRP_INDIV_MSTR\")\r\n\t\t.where(\"GLOBAL_GRP_ID\", \"==\", global_grp_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar tempIds = [];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\t\t\t\ttempIds.push(r.GLOBAL_INDIV_ID);\r\n\t\t\t});\r\n\t\t\t// console.log(tempIds);\r\n\t\t\tthis.obj_personnel.GROUP_INFO.members=[];\r\n\t\t\t_.each(tempIds, (gid)=>{\r\n\t\t\t\tquery = EntityQuery().from(\"GLOBAL_INDIV_MSTR\")\r\n\t\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", gid);\r\n\t\t\t\tEntityManager().executeQuery(query).then((s2)=>{\r\n\t\t\t\t\t\r\n\t\t\t\t\t// this.obj_personnel.GROUP_INFO.members=[];\r\n\t\t\t\t\t_.each(s2.results, (r2)=>{\r\n\t\t\t\t\t\tthis.obj_personnel.GROUP_INFO.members.push({\r\n\t\t\t\t\t\t\tglobal_indiv_id: r2.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\t\tfullname: r2.GIVEN_NAME + ' ' + r2.MIDDLE_NAME + ' ' + r2.LAST_NAME\t\t\t\t\t\t\r\n\t\t\t\t\t\t});\t\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}, (e2)=>{\r\n\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.error(e2, \"Error in querying members' details.\");\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tsettings.isNavigating = false;\t\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\",\"Group's Member has been loaded.\");\r\n\t\t\t// var conditions = [];\r\n\t\t\t// _.each(tempIds, (id)=>{\r\n\t\t\t// \tvar tempCon = breeze.Predicate.create(\"GLOBAL_INDIV_ID\", \"==\", id);\r\n\t\t\t// \tconditions.push(tempCon);\r\n\t\t\t// });\r\n\t\t\t// // console.log(conditions);\r\n\r\n\t\t\t// if(conditions.length>0){\r\n\t\t\t// \tvar finalPredicate = breeze.Predicate.or(conditions);\r\n\t\t\t// \tquery = EntityQuery().from(\"GLOBAL_INDIV_MSTR\")\r\n\t\t\t// \t.where(finalPredicate);\r\n\t\t\t// \tEntityManager().executeQuery(query).then((s2)=>{\r\n\t\t\t// \t\tvar tmp = [];\r\n\t\t\t// \t\t_.each(s2.results, (r2)=>{\r\n\t\t\t// \t\t\ttmp.push({\r\n\t\t\t// \t\t\t\tglobal_indiv_id: r2.GLOBAL_INDIV_ID,\r\n\t\t\t// \t\t\t\tfullname: r2.GIVEN_NAME + ' ' + r2.MIDDLE_NAME + ' ' + r2.LAST_NAME\t\t\t\t\t\t\r\n\t\t\t// \t\t\t});\r\n\t\t\t// \t\t});\r\n\r\n\t\t\t// \t\tthis.obj_personnel.GROUP_INFO.members = tmp;\r\n\t\t\t// \t\tconsole.log(tmp);\r\n\t\t\t// \t\tsettings.isNavigating = false;\r\n\t\t\t// \t\ttoastr.clear();\r\n\t\t\t// \t\ttoastr.success(\"\",\"Group's Member has been loaded.\");\r\n\r\n\t\t\t// \t}, (e2)=>{\r\n\t\t\t// \t\tsettings.isNavigating = false;\r\n\t\t\t// \t\ttoastr.clear();\r\n\t\t\t// \t\ttoastr.error(e2, \"Error in querying member's details.\");\r\n\t\t\t// \t});\r\n\t\t\t// }\r\n\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e2, \"Error in querying individual's ID\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tfnGroup(action){\r\n\t\t$(\"#fDate\").datepicker();\r\n\t\t$(\"#suspensionFrom\").datepicker();\r\n\t\t$(\"#suspensionTo\").datepicker();\r\n\t\tswitch(action){\r\n\t\t\tcase \"CREATE\": \tthis._disableForm = false;\r\n\t\t\tthis._disableSearch = true;\r\n\t\t\tthis._disableCreate = true;\r\n\t\t\tthis._disableSave = false;\r\n\t\t\tthis.formStatus = \"ADD\";\r\n\t\t\tthis._lblBtnSave = \"SAVE\";\r\n\t\t\tbreak;\r\n\t\t\tcase \"EDIT\": this.search_group();\r\n\t\t\tbreak;\r\n\t\t\tcase \"CLEAR\": this.clearField();\r\n\t\t\tbreak;\r\n\t\t\tcase \"SAVE\": this.validate();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tsearch_group(){\r\n\t\tthis.DialogService.open({ viewModel: group_search }).whenClosed(response=>{\r\n\t\t\tif(!response.wasCancelled)\r\n\t\t\t{\r\n\t\t\t\tthis._disableForm = false;\r\n\t\t\t\tthis._disableSearch = true;\r\n\t\t\t\tthis._disableCreate = true;\r\n\t\t\t\tthis._disableSave = false;\r\n\t\t\t\tthis.formStatus = \"EDIT\";\r\n\t\t\t\tthis._lblBtnSave = \"UPDATE\";\r\n\t\t\t\tconsole.log(response.output);\r\n\t\t\t\tthis.obj_personnel.global_indiv_id = response.output;\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log('search was cancelled.');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tclearField(){\t\t\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableSearch = false;\r\n\t\tthis._disableCreate = false;\r\n\t\t// this._disableClear = true;\r\n\t\tthis._disableSave = true;\r\n\t\tthis._disableAddMember = true;\r\n\t\tthis.formStatus = \"\";\r\n\t\tthis._lblBtnSave = \"SAVE\";\r\n\t\tthis.obj_personnel.global_indiv_id=\"\";\r\n\t\tthis.obj_personnel.GROUP_INFO.model={};\r\n\t\tthis.obj_personnel.GROUP_INFO.members=[];\r\n\t}\r\n\r\n\tvalidate(){\r\n\r\n\t\tvar strValidation = \"\";\r\n\r\n\t\tthis.obj_personnel.GROUP_INFO.model.establish_dt = $(\"#fDate\").val();\t\t\r\n\r\n\t\tif(this.obj_personnel.GROUP_INFO.model.country_cd == undefined || this.obj_personnel.GROUP_INFO.model.country_cd == null || this.obj_personnel.GROUP_INFO.model.country_cd.length==0){\r\n\t\t\tstrValidation+=\"No country specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GROUP_INFO.model.tin == undefined || this.obj_personnel.GROUP_INFO.model.tin == null || this.obj_personnel.GROUP_INFO.model.tin.length==0){\r\n\t\t\tstrValidation+=\"No TIN specified.<br/>\";\t\t\t\r\n\t\t}else{\r\n\t\t\tvar TinRegex = /^(?:\\d{3}-\\d{3}-\\d{3}-\\d{3})$/;\r\n\t\t\tvar TinRegex2 = /^(?:\\d{12})$/;\r\n\t\t\tif(!TinRegex.test(this.obj_personnel.GROUP_INFO.model.tin) && !TinRegex2.test(this.obj_personnel.GROUP_INFO.model.tin))\r\n\t\t\t{\r\n\t\t\t\tstrValidation+=\"TIN is invalid.<br/>\";\r\n\t\t\t}else if(TinRegex2.test(this.obj_personnel.GROUP_INFO.model.tin))\r\n\t\t\t{\r\n\t\t\t\tvar set_1 = this.obj_personnel.GROUP_INFO.model.tin.substring(0,3);\r\n\t\t\t\tvar set_2 = this.obj_personnel.GROUP_INFO.model.tin.substring(3,6);\r\n\t\t\t\tvar set_3 = this.obj_personnel.GROUP_INFO.model.tin.substring(6,9);\r\n\t\t\t\tvar set_4 = this.obj_personnel.GROUP_INFO.model.tin.substring(9,12);\r\n\t\t\t\tthis.obj_personnel.GROUP_INFO.model.tin = set_1+'-'+set_2+'-'+set_3+'-'+set_4;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GROUP_INFO.model.group_name == undefined || this.obj_personnel.GROUP_INFO.model.group_name == null || $.trim(this.obj_personnel.GROUP_INFO.model.group_name).length==0)\r\n\t\t{\r\n\t\t\tstrValidation+=\"No group name specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GROUP_INFO.model.status_cd == \"SUSPEND\"){\r\n\r\n\t\t\tvar sus_start = null;\r\n\t\t\tvar sus_end = null;\r\n\t\t\tthis.obj_personnel.GROUP_INFO.model.suspension_start = $(\"#suspensionFrom\").val();\r\n\t\t\tthis.obj_personnel.GROUP_INFO.model.suspension_end = $(\"#suspensionTo\").val();\r\n\t\t\tif(this.obj_personnel.GROUP_INFO.model.suspension_start != undefined && this.obj_personnel.GROUP_INFO.model.suspension_start != null && this.obj_personnel.GROUP_INFO.model.suspension_start.length>0){\r\n\t\t\t\tif(!moment(this.obj_personnel.GROUP_INFO.model.suspension_start).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid suspension start date.<br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsus_start = new Date(this.obj_personnel.GROUP_INFO.model.suspension_start);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+= \"No start date of suspension specified.<br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.GROUP_INFO.model.suspension_end != undefined && this.obj_personnel.GROUP_INFO.model.suspension_end != null && this.obj_personnel.GROUP_INFO.model.suspension_end.length>0){\t\t\t\r\n\t\t\t\tif(!moment(this.obj_personnel.GROUP_INFO.model.suspension_end).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid suspension end date.<br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsus_end = new Date(this.obj_personnel.GROUP_INFO.model.suspension_end);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+= \"No end date of suspension specified.<br/>\";\t\r\n\t\t\t}\r\n\r\n\t\t\tif(sus_start != null && sus_end != null){\r\n\t\t\t\tif(sus_end < sus_start){\r\n\t\t\t\t\tstrValidation+= \"end date of suspension cannot be greater than the start date.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tthis.obj_personnel.GROUP_INFO.model.group_name = this.obj_personnel.GROUP_INFO.model.group_name.toUpperCase();\r\n\t\t\tif(this.formStatus==\"ADD\")\r\n\t\t\t{\r\n\t\t\t\tthis.obj_personnel.GROUP_INFO.model.global_id = this.obj_personnel.GROUP_INFO.model.tin + this.obj_personnel.GROUP_INFO.model.country_cd;\r\n\t\t\t\tthis.saveGroupInfo(this.obj_personnel.GROUP_INFO.model.global_id);\r\n\t\t\t}else if(this.formStatus==\"EDIT\"){\r\n\t\t\t\tthis.updateGroupInfo(this.obj_personnel.GROUP_INFO.model.global_id);\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsaveGroupInfo(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar establish_dt = null;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\r\n\t\tif(moment(this.obj_personnel.GROUP_INFO.model.establish_dt).isValid()){\r\n\t\t\testablish_dt = moment(this.obj_personnel.GROUP_INFO.model.establish_dt).add(8, \"hours\");\r\n\t\t}\r\n\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_MSTR\")\r\n\t\t.where(\"TIN\", \"==\", this.obj_personnel.GROUP_INFO.model.tin);\r\n\t\tEntityManager().executeQuery(query).then((s)=>{\r\n\r\n\t\t\tif(s.results.length>0){\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", \"Tin already exist.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar global_mstr = {\r\n\t\t\t\tGLOBAL_ID: global_id,\r\n\t\t\t\tCOUNTRY_CD: this.obj_personnel.GROUP_INFO.model.country_cd,\r\n\t\t\t\tPARK_FL: 0,\r\n\t\t\t\tTIN: this.obj_personnel.GROUP_INFO.model.tin,\r\n\t\t\t\tACTIVE_FL: 1,\r\n\t\t\t\tINDIV_FL:0,\r\n\t\t\t\tSTATUS_CD: this.obj_personnel.GROUP_INFO.model.status_cd,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\t\t\t// console.log(global_mstr);\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"GLOBAL_MSTR\", global_mstr);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s1)=>{\r\n\r\n\t\t\t\tvar global_grp_mstr = {\r\n\t\t\t\t\tGLOBAL_GRP_ID: global_id,\r\n\t\t\t\t\tGROUP_NAME: this.obj_personnel.GROUP_INFO.model.group_name,\r\n\t\t\t\t\tESTABLISH_DT: establish_dt,\r\n\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar entity2 = EntityManager().createEntity(\"GLOBAL_GRP_MSTR\", global_grp_mstr);\r\n\t\t\t\tEntityManager().addEntity(entity2);\r\n\t\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\t\tif(this.obj_personnel.GROUP_INFO.model.status_cd == \"SUSPEND\"){\r\n\t\t\t\t\t\tvar getMax = EntityQuery().from(\"SUSPEND_TRX\").orderByDesc(\"SUSPEND_ID\").take(1);\r\n\t\t\t\t\t\tEntityManager().executeQuery(getMax).then((s3)=>{\r\n\r\n\t\t\t\t\t\t\tvar maxId = 1;\r\n\t\t\t\t\t\t\tif(s3.results.length>0){\r\n\t\t\t\t\t\t\t\tmaxId = s3.results[0].SUSPEND_ID+1;\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar suspend_trx = {\r\n\t\t\t\t\t\t\t\tSUSPEND_ID: maxId,\r\n\t\t\t\t\t\t\t\tGLOBAL_ID: global_id,\r\n\t\t\t\t\t\t\t\tSUSPEND_LEVEL: 1,\r\n\t\t\t\t\t\t\t\tSTART_DT: this.obj_personnel.GROUP_INFO.model.suspension_start,\r\n\t\t\t\t\t\t\t\tEND_DT: this.obj_personnel.GROUP_INFO.model.suspension_end,\r\n\t\t\t\t\t\t\t\tCOMPANY_ID:0, \r\n\t\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tvar entity3 = EntityManager().createEntity(\"SUSPEND_TRX\", suspend_trx);\r\n\t\t\t\t\t\t\tEntityManager().addEntity(entity3);\r\n\t\t\t\t\t\t\tEntityManager().saveChanges().then((s4)=>{\r\n\r\n\t\t\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\t\t\t\t\tthis.obj_personnel.global_indiv_id = global_id;\r\n\t\t\t\t\t\t\t\tthis.loadGroupDetails(global_id);\r\n\t\t\t\t\t\t\t\tthis.formStatus = \"EDIT\";\r\n\t\t\t\t\t\t\t\tthis._lblBtnSave = \"UPDATE\";\r\n\r\n\t\t\t\t\t\t\t}, (e4)=>{\r\n\t\t\t\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\t\t\ttoastr.error(e4, \"Error in saving suspension details.\");\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t}, (e3)=>{\r\n\t\t\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\t\ttoastr.error(e3, \"Error in querying suspension id.\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\t\t\tthis.obj_personnel.global_indiv_id = global_id;\r\n\t\t\t\t\t\tthis.loadGroupDetails(global_id);\r\n\t\t\t\t\t\tthis.formStatus = \"EDIT\";\r\n\t\t\t\t\t\tthis._lblBtnSave = \"UPDATE\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}, (e2)=>{\r\n\t\t\t\t\tif(entity2 != null){\r\n\t\t\t\t\t\tentity2.entityAspect.setDeleted();\t\t\t \t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.error(e2, \"Error in saving to grlobal group.\");\r\n\t\t\t\t});\r\n\r\n\t\t\t}, (e1)=>{\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e1, \"Error in saving to global mstr.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e)=>{\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e, \"Error in checking if the tin already exist.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tupdateGroupInfo(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar establish_dt = null;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tif(moment(this.obj_personnel.GROUP_INFO.model.establish_dt).isValid()){\r\n\t\t\testablish_dt = new Date(moment(this.obj_personnel.GROUP_INFO.model.establish_dt).add(8, \"hours\"));\r\n\t\t}\r\n\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_MSTR\")\r\n\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].COUNTRY_CD = this.obj_personnel.GROUP_INFO.model.country_cd;\r\n\t\t\ts1.results[0].COUNTRY_BASE_CD = this.obj_personnel.GROUP_INFO.model.country_base_cd;\r\n\t\t\ts1.results[0].LOCATION_BASE_CD = this.obj_personnel.GROUP_INFO.model.location_base_cd;\r\n\t\t\ts1.results[0].STATUS_CD = this.obj_personnel.GROUP_INFO.model.status_cd;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\t\t\t\t\r\n\r\n\t\t\t\tquery = EntityQuery().from(\"GLOBAL_GRP_MSTR\")\r\n\t\t\t\t.where(\"GLOBAL_GRP_ID\", \"==\", global_id);\r\n\t\t\t\tEntityManager().executeQuery(query).then((s3)=>{\r\n\r\n\t\t\t\t\ts3.results[0].GROUP_NAME = this.obj_personnel.GROUP_INFO.model.group_name;\r\n\t\t\t\t\ts3.results[0].ESTABLISH_DT = establish_dt;\r\n\t\t\t\t\ts3.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\t\ts3.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\t\t\tEntityManager().saveChanges().then((s4)=>{\r\n\r\n\t\t\t\t\t\tif(this.obj_personnel.GROUP_INFO.model.status_cd==\"SUSPEND\"){\r\n\t\t\t\t\t\t\tvar suspend_start = null;\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar suspend_end = null;\r\n\t\t\t\t\t\t\tif(moment(this.obj_personnel.GROUP_INFO.suspension_start).isValid()){\r\n\t\t\t\t\t\t\t\tsuspend_start = new Date(moment(this.obj_personnel.GROUP_INFO.model.suspension_start).add(8, \"hours\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(moment(this.obj_personnel.GROUP_INFO.suspension_end).isValid()){\r\n\t\t\t\t\t\t\t\tsuspend_end = new Date(moment(this.obj_personnel.GROUP_INFO.model.suspension_end).add(8, \"hours\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// console.log(suspend_start);\r\n\r\n\t\t\t\t\t\t\tconsole.log(\"Suspension id: \"+this.obj_personnel.GROUP_INFO.model.suspend_id);\r\n\t\t\t\t\t\t\tif(this.obj_personnel.GROUP_INFO.model.suspend_id != undefined && this.obj_personnel.GROUP_INFO.model.suspend_id != null && this.obj_personnel.GROUP_INFO.model.suspend_id.toString().length>0){\r\n\t\t\t\t\t\t\t\tquery = EntityQuery().from(\"SUSPEND_TRX\")\r\n\t\t\t\t\t\t\t\t.where(\"SUSPEND_ID\", \"==\", this.obj_personnel.GROUP_INFO.model.suspend_id);\r\n\t\t\t\t\t\t\t\tEntityManager().executeQuery(query).then((s5)=>{\r\n\r\n\t\t\t\t\t\t\t\t\ts5.results[0].START_DT = suspend_start;\r\n\t\t\t\t\t\t\t\t\ts5.results[0].END_DT = suspend_end;\r\n\t\t\t\t\t\t\t\t\ts5.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\t\t\t\t\t\ts5.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\t\t\t\t\t\t\tEntityManager().saveChanges().then((s6)=>{\r\n\r\n\t\t\t\t\t\t\t\t\t}, (e6)=>{\r\n\t\t\t\t\t\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\t\t\t\t\ttoastr.error(e6, \"Error in updating suspension details.\");\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t}, (e5)=>{\r\n\t\t\t\t\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\t\t\t\ttoastr.error(e5, \"Error in querying suspension details.\");\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tquery = EntityQuery().from(\"SUSPEND_TRX\")\r\n\t\t\t\t\t\t\t\t\t\t.orderByDesc(\"SUSPEND_ID\")\r\n\t\t\t\t\t\t\t\t\t\t.take(1);\r\n\t\t\t\t\t\t\t\tEntityManager().executeQuery(query).then((s5)=>{\r\n\r\n\t\t\t\t\t\t\t\t\tvar maxId = 1;\r\n\t\t\t\t\t\t\t\t\tif(s5.results.length>0){\r\n\t\t\t\t\t\t\t\t\t\tmaxId = s5.results[0].SUSPEND_ID+1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tvar suspend_trx = {\r\n\t\t\t\t\t\t\t\t\t\tSUSPEND_ID: maxId,\r\n\t\t\t\t\t\t\t\t\t\tGLOBAL_ID: global_id,\r\n\t\t\t\t\t\t\t\t\t\tSUSPEND_LEVEL: 1,\r\n\t\t\t\t\t\t\t\t\t\tSTART_DT: suspend_start,\r\n\t\t\t\t\t\t\t\t\t\tEND_DT: suspend_end,\r\n\t\t\t\t\t\t\t\t\t\tCOMPANY_ID:0, \r\n\t\t\t\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\t\tvar entity = EntityManager().createEntity(\"SUSPEND_TRX\", suspend_trx);\r\n\t\t\t\t\t\t\t\t\tEntityManager().addEntity(entity);\r\n\t\t\t\t\t\t\t\t\tEntityManager().saveChanges().then((s6)=>{\r\n\t\t\t\t\t\t\t\t\t\tthis.obj_personnel.GROUP_INFO.model.suspend_id = maxId;\r\n\t\t\t\t\t\t\t\t\t}, (e6)=>{\r\n\t\t\t\t\t\t\t\t\t\tif(entity != null){\r\n\t\t\t\t\t\t\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\t\t\t\t\ttoastr.error(e6, \"Error in saving suspension details.\");\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t},(e5)=>{\r\n\t\t\t\t\t\t\t\t\tsettings.isNavigating = false\r\n\t\t\t\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\t\t\t\ttoastr.error(e5, \"Error in querying suspension id.\");\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.obj_personnel.GROUP_INFO.model.suspend_id = null;\r\n\t\t\t\t\t\t\tthis.obj_personnel.GROUP_INFO.model.suspension_start=\"\";\r\n\t\t\t\t\t\t\tthis.obj_personnel.GROUP_INFO.model.suspension_end = \"\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\t\t\t// this.loadGroupDetails(global_id);\r\n\t\t\t\t\t\t// this.loadMembers(global_id);\r\n\r\n\r\n\t\t\t\t\t}, (e4)=>{\r\n\t\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\ttoastr.error(e4, \"Error in saving changes in global group.\");\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t},(e3)=>{\r\n\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.error(e3, \"Error in querying global group.\");\r\n\t\t\t\t});\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in saving global mstr.\");\r\n\t\t\t});\t\t\r\n\r\n\t\t\t\r\n\r\n\t\t\tif(this.obj_personnel.GROUP_INFO.model.status_cd == \"SUSPEND\"){\r\n\r\n\t\t\t}\r\n\r\n\t\t}, (e2)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e2, \"Error in querying global mstr.\");\r\n\t\t});\t\r\n\r\n\t}\r\n\r\n\tDigitOnly(event){\r\n\t\treturn isDigit(event);\r\n\t}\r\n\r\n\tmask(id, mask){\r\n\t\tinput_mask(id, mask);\t\t\r\n\t}\r\n\r\n\tbtnAddNewMember(){\r\n\t\tthis.DialogService.open({ viewModel: add_member, model: this.obj_personnel.GROUP_INFO.members }).whenClosed(response=>{\r\n\t\t\tif(!response.wasCancelled)\r\n\t\t\t{\r\n\t\t\t\t// this._disableForm = false;\r\n\t\t\t\t// this._disableSearch = true;\r\n\t\t\t\t// this._disableCreate = true;\r\n\t\t\t\t// this._disableSave = false;\r\n\t\t\t\t// this.formStatus = \"ADD\";\r\n\t\t\t\t// console.log(response.output);\r\n\t\t\t\tthis.fnAddNewMembers(response.output, this.obj_personnel.GROUP_INFO.model.global_grp_id);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log('search was cancelled.');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfnAddNewMembers(members, global_grp_id){\t\t\r\n\r\n\t\t// console.log(global_grp_id);\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8,\"hours\"));\r\n\t\tvar query = EntityQuery().from(\"GRP_INDIV_MSTR\")\r\n\t\t.orderByDesc(\"GRP_INDIV_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar maxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].GRP_INDIV_ID;\r\n\t\t\t}\r\n\t\t\tvar entities = [];\r\n\t\t\t_.each(members, (m)=>{\r\n\t\t\t\tmaxId+=1;\r\n\t\t\t\tvar grp_indiv = {\r\n\t\t\t\t\tGRP_INDIV_ID: maxId,\r\n\t\t\t\t\tGLOBAL_INDIV_ID: m.GLOBAL_INDIV_ID,\r\n\t\t\t\t\tGLOBAL_GRP_ID: global_grp_id,\r\n\t\t\t\t\tSTATUS_CD: \"ACTIV\",\r\n\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t};\r\n\t\t\t\tconsole.log(grp_indiv);\r\n\t\t\t\tvar entity = EntityManager().createEntity(\"GRP_INDIV_MSTR\", grp_indiv);\r\n\t\t\t\tEntityManager().addEntity(entity);\r\n\t\t\t\tentities.push(entity);\r\n\t\t\t});\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"New member(s) has been added.\");\r\n\t\t\t\tthis.loadMembers(global_grp_id);\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\t_.each(entities, (entity)=>{\r\n\t\t\t\t\tif(entity != null){\r\n\t\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in adding new members.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying grp indiv id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tbtnAddNewPersonnel(){\r\n\t\tvar url = this.router.generate('ppid');\r\n\t\twindow.open(url);\r\n\t}\r\n\r\n\tbtnRemoveMember(item){\r\n\r\n\t\tconsole.log(item);\r\n\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove \"+ item.fullname +\" to the members list?\" } })\r\n\t\t.whenClosed(response=>{\r\n\t\t\tif(!response.wasCancelled){\r\n\t\t\t\tsettings.isNavigating = true;\r\n\t\t\t\tvar pred1 = breeze.Predicate.create(\"GLOBAL_INDIV_ID\",\"==\", item.global_indiv_id);\r\n\t\t\t\tvar pred2 = breeze.Predicate.create(\"GLOBAL_GRP_ID\", \"==\", this.obj_personnel.GROUP_INFO.model.global_grp_id);\r\n\t\t\t\tvar finalPred = breeze.Predicate.and([pred1, pred2]);\r\n\r\n\t\t\t\tvar query = EntityQuery().from('GRP_INDIV_MSTR').where(finalPred);\r\n\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n\r\n\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\r\n\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\ttoastr.success(\"\", \"Record was successfully removed.\");\r\n\t\t\t\t\t\tthis.loadMembers(this.obj_personnel.GROUP_INFO.model.global_grp_id);\r\n  \t\t\t\t\t\t\t// this.clearField();\r\n\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(error, \"Error in removing medical record.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n}","//import {checkCookie,setCookie,removeCookie} from '.././helpers';\r\nimport toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {ppid_search} from \"../modals/ppid_search\";\r\nimport moment from 'moment';\r\nimport {fnSerializeCode} from \"../../helpers\";\r\nimport { cache_obj } from '../../cache_obj';\r\nimport {input_mask} from \"../../helpers\";\r\nimport {isDigit} from \"../../helpers\";\r\nimport settings from 'settings';\r\n\r\n@inject(DialogService, obj_personnel, toastr, cache_obj)\r\nexport class main\r\n{\r\n\t\r\n\r\n\t_disableSearchPersonnel = false;\r\n\t_disableCreatePersonnel = false;\t\r\n\t_disableSavePersonnel = true;\r\n\t_disableClearData = true;\r\n\t_disableResetData = true;\r\n\t_disableForm = true;\r\n\t_isActiveTab=true;\r\n\r\n\tgender=[\"Male\", \"Female\"];\r\n\tselectedGender=\"\";\r\n\tselected_citizenship=\"\";\r\n\tselected_group=\"\";\t\r\n\tobj_personnel=null;\r\n\tcache_obj=null;\r\n\t_404_img = \"/images/404.png\";\r\n\tprimary_img=\"/styles/images/abslogo_BIG.png\";\r\n\tconstructor(dialogService, obj_personnel, toastr, cache_obj)\r\n\t{\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.dialogService = dialogService;\r\n\t\tthis.cache_obj = cache_obj;\r\n\t\tthis.obj_personnel.USER = this.cache_obj.USER;\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num, global_id)=>{\r\n\t\t\t// this.loadData(global_id);\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.ppid_dialog.push((val)=>{\t\t\t\r\n\t\t\tthis.loadData(val);\r\n\t\t});\r\n\r\n\t\t// this.obj_personnel.OBSERVERS.clear_ppid.push(()=>{\r\n\t\t// \tthis.clearData();\r\n\t\t// });\r\n\r\n\t\t// this.LoginPassed(this.obj_personnel.USER);\r\n        //this.obj_personnel.OBSERVERS.ppid_dialog.length;\r\n    }\r\n\r\n\t//https://stackoverflow.com/questions/4060004/calculate-age-in-javascript\r\n\tgetAge(dateString) {\r\n\t\tif(dateString == null || dateString.length==0)\r\n\t\t\treturn;\r\n\t\tvar today = new Date();\r\n\t\tvar birthDate = new Date(dateString);\r\n\t\tvar age = today.getFullYear() - birthDate.getFullYear();\r\n\t\tvar m = today.getMonth() - birthDate.getMonth();\r\n\t\tif (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\r\n\t\t\tage--;\r\n\t\t}\r\n\t\treturn age;\r\n\t}\r\n\r\n\r\n\tloadData(global_id)\r\n\t{\r\n\t\tsettings.isNavigating = true;\r\n\t\t//toastr.success('Retrieving data...', 'Loading...');\r\n\t\tthis.obj_personnel.global_indiv_id=global_id;\r\n\t\tvar _query = EntityQuery().from('GLOBAL_INDIV_MSTR')\r\n\t\t\t\t\t.where('GLOBAL_INDIV_ID', '==', global_id);\r\n\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\tthis.obj_personnel.HEADER.global_indiv_id = result.GLOBAL_INDIV_ID;\r\n\t\t\t\tthis.obj_personnel.HEADER.given_name = result.GIVEN_NAME;\r\n\t\t\t\tthis.obj_personnel.HEADER.last_name = result.LAST_NAME;\r\n\t\t\t\tthis.obj_personnel.HEADER.middle_name = result.MIDDLE_NAME;\r\n\t\t\t\tthis.obj_personnel.HEADER.religion_cd = result.RELIGION_CD;\r\n\t\t\t\tif(moment(result.BIRTH_DT).isValid()){\r\n\t\t\t\t\tvar birthdt = moment.utc(result.BIRTH_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\t// birthdt = new Date(birthdt);\r\n\t\t\t\t\tif(birthdt.length==0){\r\n\t\t\t\t\t\t// $(\"#birthDate\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$(\"#birthDate\").datepicker(\"setValue\", new Date(birthdt));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.obj_personnel.HEADER.birth_dt = birthdt;\r\n\t\t\t\t}\r\n\t\t\t\tthis.obj_personnel.HEADER.age = this.getAge(result.BIRTH_DT);\r\n\t\t\t\tthis.obj_personnel.HEADER.civil_status = result.CIVIL_STATUS;\r\n\t\t\t\tthis.obj_personnel.HEADER.mother_maiden_name = result.MOTHER_MAIDEN_NAME;\r\n\t\t\t\tthis.obj_personnel.HEADER.alias = result.ALIAS;\r\n\t\t\t\tthis.obj_personnel.HEADER.birth_place = result.BIRTH_PLACE; \r\n\t\t\t\tthis.obj_personnel.HEADER.gender = result.GENDER;\t\t\t\t\r\n\t\t\t\tswitch(result.GENDER)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase \"M\": \tthis.selectedGender=\"Male\";\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"F\": \tthis.selectedGender=\"Female\";\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tthis.obj_personnel.HEADER.acr_no = result.ACR_NO;\r\n\t\t\t});\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Success\");\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t},(failed)=>{\r\n\t\t\ttoastr.error(failed,\"Error in retrieving data[1].\");\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from('GLOBAL_MSTR')\r\n\t\t\t\t.where('GLOBAL_ID','==', global_id);\r\n\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\t\t\t\t\t\r\n\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\tthis.obj_personnel.HEADER.tin = result.TIN;\r\n\t\t\t\tthis.obj_personnel.HEADER.country_cd = result.COUNTRY_CD;\r\n\t\t\t\tthis.obj_personnel.HEADER.country_base_cd = result.COUNTRY_BASE_CD;\r\n\t\t\t\tthis.obj_personnel.HEADER.location_base_cd = result.LOCATION_BASE_CD;\r\n\t\t\t\tthis.obj_personnel.HEADER.status_cd = result.STATUS_CD;\r\n\t\t\t\tthis.obj_personnel.HEADER.created_by = result.CREATED_BY;\r\n\t\t\t\tthis.obj_personnel.HEADER.created_dt = moment.utc(result.CREATED_DT).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tthis.obj_personnel.HEADER.last_updated_by = result.LAST_UPDATED_BY;\r\n\t\t\t\tthis.obj_personnel.HEADER.last_updated_dt = moment.utc(result.LAST_UPDATED_DT).format(\"MM/DD/YYYY hh:mm A\");\r\n\r\n\t\t\t\tif(this.obj_personnel.HEADER.status_cd == \"SUSPEND\"){\r\n\t\t\t\t\tvar _pred1 = breeze.Predicate.create(\"GLOBAL_ID\",\"==\", global_id);\r\n\t\t\t\t\tvar _pred2 = breeze.Predicate.create(\"SUSPEND_LEVEL\", \"==\", 1);\r\n\t\t\t\t\tvar _finalPred = breeze.Predicate.and([_pred1, _pred2]);\r\n\t\t\t\t\t_query = EntityQuery().from('SUSPEND_TRX')\r\n\t\t\t\t\t\t\t.where(_finalPred)\r\n\t\t\t\t\t\t\t.orderByDesc(\"SUSPEND_ID\")\r\n\t\t\t\t\t\t\t.take(1);\r\n\t\t\t\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\t\t\t\tif(success.results.length>0){\r\n\t\t\t\t\t\t\tthis.obj_personnel.HEADER.suspend_id = success.results[0].SUSPEND_ID;\r\n\t\t\t\t\t\t\t// this.obj_personnel.HEADER.suspension_start = success.results[0].START_DT;\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar start_dt = moment.utc(success.results[0].START_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\t\t\tthis.obj_personnel.HEADER.suspension_start = start_dt;\r\n\t\t\t\t\t\t\t$(\"#suspensionFrom\").datepicker(\"setValue\", new Date(start_dt));\r\n\r\n\t\t\t\t\t\t\tvar end_dt = moment.utc(success.results[0].END_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\t\t\tthis.obj_personnel.HEADER.suspension_end = end_dt;\r\n\t\t\t\t\t\t\t$(\"#suspensionTo\").datepicker(\"setValue\", new Date(end_dt));\r\n\t\t\t\t\t\t\t// this.obj_personnel.HEADER.suspension_end = success.results[0].END_DT;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, (error)=>{\r\n\t\t\t\t\t\ttoastr.error(\"\", error);\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.HEADER.suspension_start = \"\";\r\n\t\t\t\t\tthis.obj_personnel.HEADER.suspension_end=\"\";\r\n\t\t\t\t\t// $(\"#suspensionFrom\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t\t// $(\"#suspensionTo\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t},(failed)=>{\r\n\t\t\t\ttoastr.error(failed,\"Error in retrieving data[2].\");\r\n\t\t\t});\r\n\r\n\r\n\r\n\t\t_query = EntityQuery().from('CITIZENSHIP_TRX')\r\n\t\t\t\t.where('GLOBAL_INDIV_ID','==', global_id)\r\n\t\t\t\t.orderBy('CITIZENSHIP_CD');\r\n\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmpArr=[];\r\n\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\tvar tmp=this.obj_personnel.CITIZENSHIP.find((x)=>{\r\n\t\t\t\t\tif(x.value === result.CITIZENSHIP_CD){\r\n\t\t\t\t\t\treturn x;\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(tmp != null)\r\n\t\t\t\t{\r\n\t\t\t\t\ttmpArr.push(tmp);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.HEADER.citizenship = tmpArr;\r\n\t\t},(failed)=>{\r\n\t\t\ttoastr.error(failed, 'Error in Retrieving Citizenship list.');\r\n\t\t});\r\n\r\n\t\tvar pred1 = breeze.Predicate.create('GLOBAL_INDIV_ID', '==', global_id);\r\n\t\tvar pred2 = breeze.Predicate.create('STATUS_CD', '==', 'ACTV');\r\n\t\tvar finalPred = breeze.Predicate.and([pred1, pred2]);\r\n\t\t_query = EntityQuery().from('GRP_INDIV_MSTR')\r\n\t\t\t\t.where(finalPred);\r\n\r\n\t\tthis.obj_personnel.HEADER.group.length=0;\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmpArr=[];\r\n\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\tvar tmp = this.obj_personnel.GROUP.find((x)=>{\r\n\t\t\t\t\tif(x.value === result.GLOBAL_GRP_ID){\r\n\t\t\t\t\t\treturn x;\r\n\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t\tif(tmp != null){\r\n\t\t\t\t\ttmpArr.push(tmp);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.HEADER.group = tmpArr;\r\n\t\t},(failed)=>{\r\n\t\t\ttoastr.error(failed, 'Error in Retrieving Group list.');\r\n\t\t});\r\n\t}\r\n\r\n\tbtnAdd_Citizenship(){\r\n\t\tif(this.selected_citizenship.length>0){\r\n\r\n\t\t\tvar checkIfExist = this.obj_personnel.HEADER.citizenship.find((c)=>{\r\n\t\t\t\tif(c.value === this.selected_citizenship){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(checkIfExist){\r\n\t\t\t\ttoastr.error('The selected citizenship is already in the list.','Citizenship function');\r\n\t\t\t\t$('.ddCitizenship').val('');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar tmp = this.obj_personnel.CITIZENSHIP.find((c)=>{\r\n\t\t\t\tif(c.value === this.selected_citizenship){\r\n\t\t\t\t\treturn c;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(tmp != null){\r\n\t\t\t\tthis.obj_personnel.HEADER.citizenship.push(tmp);\r\n\t\t\t\t//$('.ddCitizenship').val('');\r\n\t\t\t\tthis.selected_citizenship='';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tremoveCitizenship(item){\r\n\t\tvar index = this.obj_personnel.HEADER.citizenship.indexOf(item);\r\n\t\tthis.obj_personnel.HEADER.citizenship.splice(index, 1);\r\n\t}\r\n\r\n\tremoveAllCitizenship(){\r\n\t\tthis.obj_personnel.HEADER.citizenship=[];\r\n\t}\r\n\r\n\tbtnAdd_Group(){\r\n\r\n\t\tif(this.selected_group.length>0){\r\n\t\t\t// var result = this.obj_personnel.HEADER.group.some((x)=>x.value == this.selected_group);\r\n\t\t\tvar checkIfExist = this.obj_personnel.HEADER.group.find((c)=>{\r\n\t\t\t\tif(c.value === this.selected_group){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(checkIfExist){\r\n\t\t\t\ttoastr.error('The selected group is already added in the list.','Group function');\r\n\t\t\t\t$('.ddGroup').val('');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar tmp = this.obj_personnel.GROUP.find((c)=>{\r\n\t\t\t\tif(c.value === this.selected_group){\r\n\t\t\t\t\treturn c;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(tmp != null){\r\n\t\t\t\tthis.obj_personnel.HEADER.group.push(tmp);\r\n\t\t\t\t//$('.ddGroup').val('');\r\n\t\t\t\tthis.selected_group = '';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tremoveGroup(item)\r\n\t{\r\n\t\tvar index = this.obj_personnel.HEADER.group.indexOf(item);\r\n\t\tthis.obj_personnel.HEADER.group.splice(index, 1);\r\n\t}\r\n\r\n\tremoveAllGroup(){\r\n\t\tthis.obj_personnel.HEADER.group=[];\r\n\t}\r\n\r\n\tfnPersonnel(call)\r\n\t{\r\n\r\n\t\t$(\"#birthDate\").datepicker();\r\n\t\t$(\"#suspensionFrom\").datepicker();\r\n\t\t$(\"#suspensionTo\").datepicker();\t\t\r\n\t\tswitch(call)\r\n\t\t{\r\n\t\t\tcase \"EDIT\": \t\r\n\t\t\t\tthis.dialogService.open({ viewModel: ppid_search }).whenClosed(response=>{\r\n\t\t\t\t\t\tif(!response.wasCancelled)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis._disableSearchPersonnel = true;\r\n\t\t\t\t\t\t\tthis._disableCreatePersonnel = true;\r\n\t\t\t\t\t\t\tthis._disableResetData = false;\r\n\t\t\t\t\t\t\tthis._disableClearData = false;\r\n\t\t\t\t\t\t\tthis._disableSavePersonnel = false;\r\n\t\t\t\t\t\t\tthis._disableForm = false;\r\n\t\t\t\t\t\t\tthis.obj_personnel.editing_status = 'EDIT';\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tconsole.log('search was cancelled.');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"CREATE\": \t\r\n\t\t\t\tthis._disableSearchPersonnel = true;\r\n\t\t\t\tthis._disableCreatePersonnel = true;\r\n\t\t\t\tthis._disableResetData = false;\r\n\t\t\t\tthis._disableClearData = false;\r\n\t\t\t\tthis._disableSavePersonnel = false;\r\n\t\t\t\tthis._disableForm = false;\t\t\t\t\t\t\t\r\n\t\t\t\tthis.obj_personnel.editing_status = 'CREATE';\r\n\t\t\t\tthis.selected_citizenship = \"FIL\";\r\n\t\t\t\tthis.btnAdd_Citizenship();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"CLEAR\": \r\n\t\t\t\tthis.clearData();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"SAVE\": \r\n\t\t\t\tif(this.obj_personnel.editing_status == 'CREATE'){\r\n\t\t\t\t\tthis.validateHeader('INSERT');\r\n\t\t\t\t}else if(this.obj_personnel.editing_status == 'EDIT'){\r\n\t\t\t\t\tthis.validateHeader('UPDATE');\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateHeader(passed_status){\r\n\r\n\t\tconsole.log(this.obj_personnel.HEADER.tin);\r\n\t\tvar strValidation=\"\";\r\n\t\tif(this.obj_personnel.HEADER.country_cd == undefined || this.obj_personnel.HEADER.country_cd == null || this.obj_personnel.HEADER.country_cd.length==0){\r\n\t\t\tstrValidation+=\"No Country specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.tin == undefined || this.obj_personnel.HEADER.tin == null || this.obj_personnel.HEADER.tin.length===0){  \t\t\t\r\n\t\t\tstrValidation+=\"No TIN specified.<br/>\";\r\n\t\t}else{\r\n\t\t\tvar TinRegex = /^(?:\\d{3}-\\d{3}-\\d{3}-\\d{3})$/;\r\n\t\t\tvar TinRegex2 = /^(?:\\d{12})$/;\r\n\t\t\tif(!TinRegex.test(this.obj_personnel.HEADER.tin) && !TinRegex2.test(this.obj_personnel.HEADER.tin))\r\n\t\t\t{\r\n\t\t\t\tstrValidation+=\"TIN is invalid.<br/>\";\r\n\t\t\t}else if(TinRegex2.test(this.obj_personnel.HEADER.tin))\r\n\t\t\t{\r\n\t\t\t\tvar set_1 = this.obj_personnel.HEADER.tin.substring(0,3);\r\n\t\t\t\tvar set_2 = this.obj_personnel.HEADER.tin.substring(3,6);\r\n\t\t\t\tvar set_3 = this.obj_personnel.HEADER.tin.substring(6,9);\r\n\t\t\t\tvar set_4 = this.obj_personnel.HEADER.tin.substring(9,12);\r\n\t\t\t\tthis.obj_personnel.HEADER.tin = set_1+'-'+set_2+'-'+set_3+'-'+set_4;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.last_name == undefined || this.obj_personnel.HEADER.last_name==null || this.obj_personnel.HEADER.last_name.length == 0){\r\n\t\t\tstrValidation+=\"No Last Name specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.given_name == undefined || this.obj_personnel.HEADER.given_name==null || this.obj_personnel.HEADER.given_name.length==0){\r\n\t\t\tstrValidation+=\"No First Name specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.middle_name == undefined || this.obj_personnel.HEADER.middle_name==null || this.obj_personnel.HEADER.middle_name.length==0){\r\n\t\t\tstrValidation+=\"No Middle Name specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.selectedGender.length==0){\r\n\t\t\t//if(this.obj_personnel.HEADER.gender == undefined || this.obj_personnel.HEADER.gender == null || this.obj_personnel.HEADER.gender.length==0){\r\n\t\t\tstrValidation+=\"No Gender specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.birth_dt != undefined && this.obj_personnel.HEADER.birth_dt != null && this.obj_personnel.HEADER.birth_dt.trim().length > 0){\r\n\t\t\tif(!moment(this.obj_personnel.HEADER.birth_dt).isValid()){\r\n\t\t\t\tstrValidation+=\"Invalid date of birth.<br/>\";\r\n\t\t\t}else{\r\n\t\t\t\tvar bdt = new Date(this.obj_personnel.HEADER.birth_dt);\r\n\t\t\t\tvar today = new Date();\r\n\t\t\t\tif(today<bdt){\r\n\t\t\t\t\tstrValidation+=\"Date of birth cannot be greater than today.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tstrValidation += \"No birth date specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.religion_cd == undefined || this.obj_personnel.HEADER.religion_cd==null || this.obj_personnel.HEADER.religion_cd.length == 0){\r\n\t\t\tstrValidation += \"No religion specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.status_cd == \"SUSPEND\"){\r\n\r\n\t\t\tvar sus_start = null;\r\n\t\t\tvar sus_end = null;\r\n\t\t\tthis.obj_personnel.HEADER.suspension_start = $(\"#suspensionFrom\").val();\r\n\t\t\tthis.obj_personnel.HEADER.suspension_end = $(\"#suspensionTo\").val();\r\n\t\t\tif(this.obj_personnel.HEADER.suspension_start != undefined && this.obj_personnel.HEADER.suspension_start != null && this.obj_personnel.HEADER.suspension_start.length>0){\r\n\t\t\t\tif(!moment(this.obj_personnel.HEADER.suspension_start).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid suspension start date.<br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsus_start = new Date(this.obj_personnel.HEADER.suspension_start);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+= \"No start date of suspension specified.<br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.HEADER.suspension_end != undefined && this.obj_personnel.HEADER.suspension_end != null && this.obj_personnel.HEADER.suspension_end.length>0){\t\t\t\r\n\t\t\t\tif(!moment(this.obj_personnel.HEADER.suspension_end).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid suspension end date.<br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsus_end = new Date(this.obj_personnel.HEADER.suspension_end);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+= \"No end date of suspension specified.<br/>\";\t\r\n\t\t\t}\r\n\r\n\t\t\tif(sus_start != null && sus_end != null){\r\n\t\t\t\tif(sus_end < sus_start){\r\n\t\t\t\t\tstrValidation+= \"end date of suspension cannot be greater than the start date.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\r\n\t\tif(strValidation.length>0)\r\n\t\t{\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(strValidation, 'Personnel info');  \t\t\t\r\n\t\t\treturn;\r\n\t\t}else{\r\n\t\t\tvar mother_maiden_nm = this.obj_personnel.HEADER.mother_maiden_name;\r\n\t\t\tvar alias_nick = this.obj_personnel.HEADER.alias;\r\n\t\t\tvar first_nm = this.obj_personnel.HEADER.given_name;\r\n\t\t\tvar middle_nm = this.obj_personnel.HEADER.middle_name;\r\n\t\t\tvar last_nm = this.obj_personnel.HEADER.last_name;\r\n\t\t\tif(mother_maiden_nm != null)\r\n\t\t\t\tthis.obj_personnel.HEADER.mother_maiden_name = mother_maiden_nm.toUpperCase();\r\n\t\t\tif(alias_nick != null)\r\n\t\t\t\tthis.obj_personnel.HEADER.alias = alias_nick.toUpperCase();\r\n\t\t\tif(first_nm != null)\r\n\t\t\t\tthis.obj_personnel.HEADER.given_name = first_nm.toUpperCase();\r\n\t\t\tif(middle_nm != null)\r\n\t\t\t\tthis.obj_personnel.HEADER.middle_name = middle_nm.toUpperCase();\r\n\t\t\tif(last_nm != null)\r\n\t\t\t\tthis.obj_personnel.HEADER.last_name = last_nm.toUpperCase();\r\n\t\t}\r\n\r\n\t\tif(passed_status.includes(\"INSERT\")){\r\n\t\t\tvar query = EntityQuery().from(\"GLOBAL_MSTR\")\r\n\t\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", this.obj_personnel.HEADER.tin+this.obj_personnel.HEADER.country_cd);\r\n\t\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\t\tif(s1.results.length>0){\r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.error(\"Tin already exist.\", \"Personnel info\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.saveHeader();\r\n\t\t\t\t}\r\n\r\n\t\t\t}, (e1)=>{\r\n\t\t\t\ttoastr.error(e1,\"Personnel info\");\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t\telse if(passed_status.includes('UPDATE')){\r\n\t\t\tthis.updateHeader();\r\n\t\t}\r\n\t}\r\n\r\n\tsaveHeader(){\r\n\t\tsettings.isNavigating = true;\r\n\t\ttoastr.clear();\r\n\t\tvar varInsert=null;  \t\t\r\n\t\tvar bdate = null;\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\r\n\t\tthis.obj_personnel.HEADER.birth_dt = $(\"#birthDate\").val();\r\n\r\n\t\tif(this.obj_personnel.HEADER.birth_dt != undefined && this.obj_personnel.HEADER.birth_dt != null && this.obj_personnel.HEADER.birth_dt.length > 0){\r\n\t\t\tbdate = new moment(new Date(this.obj_personnel.HEADER.birth_dt)).add(8,'hours');\r\n\t\t\tbdate = new Date(bdate);\r\n\t\t}\r\n\r\n\r\n\t\tvar varInsert_2 = EntityManager().createEntity('GLOBAL_MSTR', {\r\n\t\t\tGLOBAL_ID: this.obj_personnel.HEADER.tin+this.obj_personnel.HEADER.country_cd,\r\n\t\t\tCOUNTRY_CD: this.obj_personnel.HEADER.country_cd,\r\n\t\t\tTIN: this.obj_personnel.HEADER.tin,\r\n\t\t\tCOUNTRY_BASE_CD: this.obj_personnel.HEADER.country_base_cd,\r\n\t\t\tLOCATION_BASE_CD: this.obj_personnel.HEADER.location_base_cd,\r\n\t\t\tSTATUS_CD: this.obj_personnel.HEADER.status_cd,\r\n\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\tCREATED_DT: dateToday,\r\n\t\t\tACTIVE_FL:'1',\r\n\t\t\tPARK_FL:'0',\r\n\t\t\tINDIV_FL:1\r\n\t\t});\r\n\r\n\t\t// console.log(varInsert_2);\r\n\r\n\t\tEntityManager().addEntity(varInsert_2);\r\n\t\tEntityManager().saveChanges().then((success)=>{\r\n\r\n\t\t\tvarInsert = EntityManager().createEntity('GLOBAL_INDIV_MSTR', {\r\n\t\t\t\tGLOBAL_INDIV_ID: this.obj_personnel.HEADER.tin+this.obj_personnel.HEADER.country_cd,\r\n\t\t\t\t//TAX_EXEMPT_CD: '--',\r\n\t\t\t\tEMERGENCY_RELATION_CD:null,\r\n\t\t\t\tINDIV_ID:0,\r\n\t\t\t\tGIVEN_NAME: this.obj_personnel.HEADER.given_name,\r\n\t\t\t\tMIDDLE_NAME: this.obj_personnel.HEADER.middle_name,\r\n\t\t\t\tLAST_NAME: this.obj_personnel.HEADER.last_name,\r\n\t\t\t\tBIRTH_DT: bdate,\r\n\t\t\t\tBIRTH_PLACE: this.obj_personnel.HEADER.birth_place,\r\n\t\t\t\tGENDER: this.selectedGender=='Male'?'M':'F',\r\n\t\t\t\tCIVIL_STATUS: this.obj_personnel.HEADER.civil_status,\r\n\t\t\t\tMOTHER_MAIDEN_NAME: this.obj_personnel.HEADER.mother_maiden_name,\r\n\t\t\t\tACR_NO: this.obj_personnel.HEADER.acr_no,\t\r\n\t\t\t\tRELIGION_CD: this.obj_personnel.HEADER.religion_cd,\r\n\t\t\t\tALIAS: this.obj_personnel.HEADER.alias,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t});\r\n\r\n\t\t\tEntityManager().addEntity(varInsert);\r\n\t\t\tEntityManager().saveChanges().then((success_2)=>{\r\n\r\n\t\t\t\tthis.obj_personnel.HEADER.global_indiv_id = this.obj_personnel.HEADER.tin+this.obj_personnel.HEADER.country_cd;\t\t\t\t\r\n\t\t\t\tthis.obj_personnel.global_indiv_id = this.obj_personnel.HEADER.global_indiv_id;\r\n\t\t\t\tthis.obj_personnel.editing_status = 'EDIT';\r\n\t\t\t\ttoastr.success(success_2, \"Record saved.\");\r\n\t\t\t\tsettings.isNavigating = false;\r\n\r\n\t\t\t\tvar getMax = EntityQuery().from('CITIZENSHIP_TRX').orderByDesc('CITIZENSHIP_ID').take(1);\r\n\r\n\t\t\t\tEntityManager().executeQuery(getMax).then((successMax)=>{\r\n\t\t\t\t\tvar Max = 1;\r\n\t\t\t\t\tif (successMax.results.length > 0){\r\n\t\t\t\t\t\tMax = successMax.results[0].CITIZENSHIP_ID;\r\n\r\n\t\t\t\t\t\t_.each(this.obj_personnel.HEADER.citizenship, (c)=>{\r\n\t\t\t\t\t\t\tMax+=1;\r\n\r\n\t\t\t\t\t\t\tvar tempCiti = EntityManager().createEntity('CITIZENSHIP_TRX', {\r\n\t\t\t\t\t\t\t\tCITIZENSHIP_CD: c.value,\r\n\t\t\t\t\t\t\t\tGLOBAL_INDIV_ID: this.obj_personnel.HEADER.global_indiv_id,\r\n\t\t\t\t\t\t\t\tCITIZENSHIP_ID: Max,\r\n\t\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tEntityManager().addEntity(tempCiti);\r\n\t\t\t\t\t\t});\t  \t\r\n\r\n\t\t\t\t\t\tif(this.obj_personnel.HEADER.citizenship.length>0){\r\n\t\t\t\t\t\t\tEntityManager().saveChanges().then((success_3)=>{\r\n\t\t\t\t\t\t\t\t\tconsole.log(success_3);\r\n\t\t\t\t\t\t\t},(failed_3)=>{\r\n\t\t\t\t\t\t\t\ttoastr.error(failed_3,'Error');\r\n\t\t\t\t\t\t\t});\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},(failedMax)=>{\r\n\t\t\t\t\ttoastr.error(failedMax, \"Error in saving citizenship.\");\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgetMax = EntityQuery().from('GRP_INDIV_MSTR').orderByDesc('GRP_INDIV_ID').take(1);\r\n\r\n\t\t\t\tEntityManager().executeQuery(getMax).then((successMax)=>{\r\n\t\t\t\t\tvar Max = 1;\r\n\t\t\t\t\tif(successMax.results.length>0){\r\n\t\t\t\t\t\tMax = successMax.results[0].GRP_INDIV_ID;\r\n\r\n\t\t\t\t\t\t_.each(this.obj_personnel.HEADER.group, (g)=>{\r\n\t\t\t\t\t\t\tMax+=1;\r\n\t\t\t\t\t\t\tvar tempGroup = EntityManager().createEntity('GRP_INDIV_MSTR', {\r\n\t\t\t\t\t\t\t\tGLOBAL_INDIV_ID: this.obj_personnel.HEADER.global_indiv_id,\r\n\t\t\t\t\t\t\t\tGLOBAL_GRP_ID: g.value,\r\n\t\t\t\t\t\t\t\tGRP_INDIV_ID: Max,\r\n\t\t\t\t\t\t\t\tSTATUS_CD: 'ACTV',\r\n\t\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tEntityManager().addEntity(tempGroup);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif(this.obj_personnel.HEADER.group.length>0){\r\n\t\t\t\t\t\t\tEntityManager().saveChanges().then(\r\n\t\t\t\t\t\t\t\t(success_3)=>{\r\n\t\t\t\t\t\t\t\t\tconsole.log(success_3);\r\n\t\t\t\t\t\t\t\t},(failed_3)=>{\r\n\t\t\t\t\t\t\t\t\ttoastr.error(failed_3,'Error');\r\n\t\t\t\t\t\t\t\t});\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, (failedMax)=>{\r\n\t\t\t\t\ttoastr.error(failedMax, \"Error in saving citizenship.\");\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(this.obj_personnel.HEADER.status_cd == \"SUSPEND\"){\r\n\t\t\t\t\tvar getMax = EntityQuery().from(\"SUSPEND_TRX\").orderByDesc(\"SUSPEND_ID\").take(1);\r\n\t\t\t\t\tEntityManager().executeQuery(getMax).then((success_suspend)=>{\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tvar maxId = 1;\r\n\t\t\t\t\t\tif(success_suspend.results.length>0){\r\n\t\t\t\t\t\t\tmaxId = success_suspend.results[0].SUSPEND_ID + 1;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar suspend_trx = EntityManager().createEntity(\"SUSPEND_TRX\", {\r\n\t\t\t\t\t\t\tSUSPEND_ID: maxId,\r\n\t\t\t\t\t\t\tGLOBAL_ID: this.obj_personnel.HEADER.tin+this.obj_personnel.HEADER.country_cd,\r\n\t\t\t\t\t\t\tSUSPEND_LEVEL: 1,\r\n\t\t\t\t\t\t\tSTART_DT: this.obj_personnel.HEADER.suspension_start,\r\n\t\t\t\t\t\t\tEND_DT: this.obj_personnel.HEADER.suspension_end,\r\n\t\t\t\t\t\t\tCOMPANY_ID: 0, \r\n\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tEntityManager().addEntity(suspend_trx);\r\n\t\t\t\t\t\tEntityManager().saveChanges().then((suspend_saved)=>{\r\n\t\t\t\t\t\t\ttoastr.success(\"\", \"Suspension details saved.\");\r\n\t\t\t\t\t\t}, (suspend_error)=>{\r\n\t\t\t\t\t\t\ttoastr.error(suspend_error, \"error in saving suspension details.\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.HEADER.suspension_start = \"\";\r\n\t\t\t\t\tthis.obj_personnel.HEADER.suspension_end=\"\";\r\n\t\t\t\t\t// $(\"#suspensionFrom\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t\t// $(\"#suspensionTo\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t}, (failed_2)=>{\r\n\t\t\t\tif(varInsert != null){\r\n\t\t\t\t\tvarInsert.entityAspect().setDeleted();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(varInsert_2!=null)\r\n\t\t\t\t{\r\n\t\t\t\t\tvarInsert_2.entityAspect.setDeleted();  \r\n\t\t\t\t}\r\n\r\n\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconsole.log(failed_2);\r\n\t\t\t\ttoastr.error(failed_2,\"Error occured.\");\r\n\t\t\t});\r\n\r\n\t\t},(failed)=>{\r\n\t\t\tif(varInsert_2!=null)\r\n\t\t\t{\r\n\t\t\t\tvarInsert_2.entityAspect.setDeleted();  \r\n\t\t\t}\r\n\r\n\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\tconsole.log(errors);\r\n\t\t\t});\r\n\t\t\tconsole.log(failed);\r\n\t\t\ttoastr.error(failed,\"Error occured.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdateHeader(){\r\n\t\tsettings.isNavigating = true;\r\n\t\ttoastr.clear();\r\n\t\tvar dateToday = null;\r\n\t\tvar bdate = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\r\n\t\tthis.obj_personnel.HEADER.birth_dt = $(\"#birthDate\").val();\r\n\r\n\t\tif(this.obj_personnel.HEADER.birth_dt != undefined && this.obj_personnel.HEADER.birth_dt != null && this.obj_personnel.HEADER.birth_dt.length > 0)\r\n\t\t{\r\n\t\t\tbdate = new moment(new Date(this.obj_personnel.HEADER.birth_dt)).add(8,'hours');\r\n\t\t\tbdate = new Date(bdate);\r\n\t\t}\r\n\r\n\t\tvar getEntity = EntityQuery().from('GLOBAL_MSTR').where('GLOBAL_ID','==',this.obj_personnel.HEADER.global_indiv_id);\r\n\t\tEntityManager().executeQuery(getEntity).then((item)=>{\r\n\r\n\t\t\tif(item.results.length==0)\r\n\t\t\t{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error('No data for editing retrieved.', 'Error in updating record.');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\titem.results[0].COUNTRY_BASE_CD = this.obj_personnel.HEADER.country_base_cd;\r\n\t\t\titem.results[0].LOCATION_BASE_CD = this.obj_personnel.HEADER.location_base_cd;\r\n\t\t\titem.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\titem.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\titem.results[0].STATUS_CD = this.obj_personnel.HEADER.status_cd;\r\n\r\n\t\t\tEntityManager().saveChanges().then((success)=>{\t\t\t\t\r\n\r\n\t\t\t\tvar getEntity = EntityQuery().from('GLOBAL_INDIV_MSTR').where('GLOBAL_INDIV_ID','==',this.obj_personnel.HEADER.global_indiv_id);\r\n\t\t\t\tEntityManager().executeQuery(getEntity).then((item_2)=>{\r\n\t\t\t\t\tif(item_2.results.length==0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\ttoastr.error('No data for editing retrieved.', 'Error in updating record.');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\titem_2.results[0].GIVEN_NAME = this.obj_personnel.HEADER.given_name.toUpperCase();\r\n\t\t\t\t\titem_2.results[0].MIDDLE_NAME = this.obj_personnel.HEADER.middle_name.toUpperCase();\r\n\t\t\t\t\titem_2.results[0].LAST_NAME = this.obj_personnel.HEADER.last_name.toUpperCase();\r\n\t\t\t\t\titem_2.results[0].BIRTH_DT = bdate;\r\n\t\t\t\t\titem_2.results[0].BIRTH_PLACE = this.obj_personnel.HEADER.birth_place;\r\n\t\t\t\t\titem_2.results[0].GENDER = this.selectedGender=='Male'?'M':'F';\r\n\t\t\t\t\titem_2.results[0].CIVIL_STATUS = this.obj_personnel.HEADER.civil_status;\r\n\t\t\t\t\titem_2.results[0].MOTHER_MAIDEN_NAME = this.obj_personnel.HEADER.mother_maiden_name;\r\n\t\t\t\t\titem_2.results[0].ACR_NO = this.obj_personnel.HEADER.acr_no;\r\n\t\t\t\t\titem_2.results[0].RELIGION_CD = this.obj_personnel.HEADER.religion_cd;\r\n\t\t\t\t\titem_2.results[0].ALIAS = this.obj_personnel.HEADER.alias;\r\n\t\t\t\t\titem_2.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\t\titem_2.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\t\t\tEntityManager().saveChanges().then((success_2)=>{\r\n\t\t\t\t\t\ttoastr.success('','Record updated.');\r\n\t\t\t\t\t\tsettings.isNavigating = false;\r\n\r\n\t\t\t\t\t\t//update citizenship list\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\tvar getCitizenshipList = EntityQuery().from('CITIZENSHIP_TRX').where('GLOBAL_INDIV_ID', '==', this.obj_personnel.HEADER.global_indiv_id);\r\n\t\t\t\t\t\tEntityManager().executeQuery(getCitizenshipList).then((query)=>{\r\n\r\n\t\t\t\t\t\t\t_.each(query.results, (result)=>{\r\n\t\t\t\t\t\t\t\tvar doesExist = this.obj_personnel.HEADER.citizenship.some((x)=>x.value == result.CITIZENSHIP_CD);\r\n\r\n\t\t\t\t\t\t\t\tif(!doesExist)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tresult.entityAspect.setDeleted();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tvar getMax = EntityQuery().from('CITIZENSHIP_TRX').orderByDesc('CITIZENSHIP_ID').take(1);\r\n\t\t\t\t\t\t\tEntityManager().executeQuery(getMax).then((getMaxSuccess)=>{\r\n\t\t\t\t\t\t\t\tvar Max = 1;\r\n\t\t\t\t\t\t\t\tvar newCount=0;\r\n\t\t\t\t\t\t\t\tif(getMaxSuccess.results.length>0)\r\n\t\t\t\t\t\t\t\t{\r\n\r\n\t\t\t\t\t\t\t\t\tMax = getMaxSuccess.results[0].CITIZENSHIP_ID;\r\n\r\n\t\t\t\t\t\t\t\t\t_.each(this.obj_personnel.HEADER.citizenship, (citi)=>{\r\n\t\t\t\t\t\t\t\t\t\tvar doesExist = query.results.some((x)=>x.CITIZENSHIP_CD == citi.value);\r\n\t\t\t\t\t\t\t\t\t\tif(!doesExist)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tMax+=1;\r\n\t\t\t\t\t\t\t\t\t\t\tnewCount++;\r\n\t\t\t\t\t\t\t\t\t\t\tvar tempEnt = EntityManager().createEntity('CITIZENSHIP_TRX', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tCITIZENSHIP_CD: citi.value,\r\n\t\t\t\t\t\t\t\t\t\t\t\tGLOBAL_INDIV_ID: this.obj_personnel.HEADER.global_indiv_id,\r\n\t\t\t\t\t\t\t\t\t\t\t\tCITIZENSHIP_ID: Max,\r\n\t\t\t\t\t\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tEntityManager().addEntity(tempEnt);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\tEntityManager().saveChanges().then((success_3)=>{\r\n\t\t\t\t\t\t\t\t\t\ttoastr.success(success_3,'Citizenship list was updated.');\r\n\t\t\t\t\t\t\t\t\t},(error)=>{\r\n\t\t\t\t\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t\t\t\ttoastr.error(\"Error Occured_3\", error);\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//update citizenship list end.\r\n\r\n\t\t\t\t\t\t//update group list.\r\n\t\t\t\t\t\tvar getGroup = EntityQuery().from('GRP_INDIV_MSTR').where('GLOBAL_INDIV_ID', '==', this.obj_personnel.HEADER.global_indiv_id);\r\n\t\t\t\t\t\tEntityManager().executeQuery(getGroup).then((queryGroup)=>{\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t_.each(queryGroup.results, (result)=>{\r\n\t\t\t\t\t\t\t\tvar doesExist = this.obj_personnel.HEADER.group.some((x)=>x.value == result.GLOBAL_GRP_ID);\r\n\t\t\t\t\t\t\t\tif(!doesExist)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tresult.entityAspect.setDeleted();\r\n\t\t\t\t\t\t\t\t\t//result.STATUS_CD = 'INACTV';\r\n\t\t\t\t\t\t\t\t\t//result.LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\t\t\t\t\t\t//result.LAST_UPDATED_DT = dateToday;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tvar getMax = EntityQuery().from('GRP_INDIV_MSTR').orderByDesc('GRP_INDIV_ID').take(1);\r\n\t\t\t\t\t\t\tEntityManager().executeQuery(getMax).then((queryMax)=>{\r\n\t\t\t\t\t\t\t\tvar Max=1;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif(queryMax.results.length>0)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tMax = queryMax.results[0].GRP_INDIV_ID;\r\n\t\t\t\t\t\t\t\t\t_.each(this.obj_personnel.HEADER.group, (g)=>{\r\n\t\t\t\t\t\t\t\t\t\tvar doesExist = queryGroup.results.some((x)=>x.GLOBAL_GRP_ID == g.value);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tif(!doesExist)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tMax+=1;\r\n\t\t\t\t\t\t\t\t\t\t\tvar tempEnt = EntityManager().createEntity('GRP_INDIV_MSTR', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tGLOBAL_INDIV_ID: this.obj_personnel.HEADER.global_indiv_id,\r\n\t\t\t\t\t\t\t\t\t\t\t\tGLOBAL_GRP_ID: g.value,\r\n\t\t\t\t\t\t\t\t\t\t\t\tGRP_INDIV_ID: Max,\r\n\t\t\t\t\t\t\t\t\t\t\t\tSTATUS_CD: 'ACTV',\r\n\t\t\t\t\t\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tEntityManager().addEntity(tempEnt);\r\n\t\t\t\t\t\t\t\t\t\t}else{\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tvar index = _.findIndex(queryGroup.results, function(o){\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn o.GLOBAL_GRP_ID == g.value;\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tif(index != -1 && queryGroup.results[index].STATUS_CD == 'INACTV')\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tqueryGroup.results[index].STATUS_CD = 'ACTV';\r\n\t\t\t\t\t\t\t\t\t\t\t\tqueryGroup.results[index].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\t\t\t\t\t\t\t\t\tqueryGroup.results[index].LAST_UPDATED_DT = dateToday;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\tEntityManager().saveChanges().then((success_710)=>{\r\n\t\t\t\t\t\t\t\t\t\ttoastr.success(success_710,'Group list was updated.');\r\n\t\t\t\t\t\t\t\t\t},(error_712)=>{\r\n\t\t\t\t\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(error_712);\r\n\t\t\t\t\t\t\t\t\t\ttoastr.error(\"Error Occured_4\", error_712);\r\n\t\t\t\t\t\t\t\t\t});\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//update group list end.\r\n\r\n\t\t\t\t\t\t//Update/Insert suspend_trx\r\n\t\t\t\t\t\tif(this.obj_personnel.HEADER.status_cd == \"SUSPEND\"){\r\n\t\t\t\t\t\t\tvar suspend_start = null;\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar suspend_end = null;\r\n\t\t\t\t\t\t\tif(moment(this.obj_personnel.HEADER.suspension_start).isValid()){\r\n\t\t\t\t\t\t\t\tsuspend_start = new Date(moment(this.obj_personnel.HEADER.suspension_start).add(8, \"hours\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(moment(this.obj_personnel.HEADER.suspension_end).isValid()){\r\n\t\t\t\t\t\t\t\tsuspend_end = new Date(moment(this.obj_personnel.HEADER.suspension_end).add(8, \"hours\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\tif(this.obj_personnel.HEADER.suspend_id != undefined && this.obj_personnel.HEADER.suspend_id != null && this.obj_personnel.HEADER.suspend_id.toString().length>0){\r\n\t\t\t\t\t\t\t\tvar getSuspend = EntityQuery().from(\"SUSPEND_TRX\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t.where(\"SUSPEND_ID\", \"==\", this.obj_personnel.HEADER.suspend_id);\r\n\t\t\t\t\t\t\t\tEntityManager().executeQuery(getSuspend).then((success_getSuspend)=>{\r\n\t\t\t\t\t\t\t\t\tsuccess_getSuspend.results[0].START_DT = suspend_start;\r\n\t\t\t\t\t\t\t\t\tsuccess_getSuspend.results[0].END_DT = suspend_end;\r\n\t\t\t\t\t\t\t\t\tsuccess_getSuspend.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\t\t\t\t\t\tsuccess_getSuspend.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\t\t\t\t\t\t\tEntityManager().saveChanges().then((save_success)=>{\r\n\t\t\t\t\t\t\t\t\t\ttoastr.success(\"\",\"Suspension date updated.\");\r\n\t\t\t\t\t\t\t\t\t},(save_error)=>{\r\n\t\t\t\t\t\t\t\t\t\ttoastr.error(save_error, \"error in updating suspension date.\");\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}, (error_getSuspend)=>{\r\n\t\t\t\t\t\t\t\t\ttoastr.error(error_getSuspend, \"error in updating suspension date.\");\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tvar getMax = EntityQuery().from(\"SUSPEND_TRX\").orderByDesc(\"SUSPEND_ID\").take(1);\r\n\t\t\t\t\t\t\t\tEntityManager().executeQuery(getMax).then((success_suspend)=>{\r\n\t\t\t\t\t\t\t\t\tvar maxId = 1;\r\n\t\t\t\t\t\t\t\t\tif(success_suspend.results.length>0){\r\n\t\t\t\t\t\t\t\t\t\tmaxId = success_suspend.results[0].SUSPEND_ID + 1;\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvar suspend_trx = EntityManager().createEntity(\"SUSPEND_TRX\", {\r\n\t\t\t\t\t\t\t\t\t\tSUSPEND_ID: maxId+\"\",\r\n\t\t\t\t\t\t\t\t\t\tGLOBAL_ID: this.obj_personnel.HEADER.tin+this.obj_personnel.HEADER.country_cd,\r\n\t\t\t\t\t\t\t\t\t\tSUSPEND_LEVEL: 1,\r\n\t\t\t\t\t\t\t\t\t\tSTART_DT: suspend_start,\r\n\t\t\t\t\t\t\t\t\t\tEND_DT: suspend_end,\r\n\t\t\t\t\t\t\t\t\t\tCOMPANY_ID: 0, \r\n\t\t\t\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tEntityManager().addEntity(suspend_trx);\r\n\t\t\t\t\t\t\t\t\tEntityManager().saveChanges().then((suspend_saved)=>{\r\n\t\t\t\t\t\t\t\t\t\ttoastr.success(\"\", \"Suspension details saved.\");\r\n\t\t\t\t\t\t\t\t\t}, (suspend_error)=>{\r\n\t\t\t\t\t\t\t\t\t\t// console.log(suspend_error);\r\n\t\t\t\t\t\t\t\t\t\ttoastr.error(suspend_error, \"error in saving suspension details.\");\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.obj_personnel.HEADER.suspension_start = \"\";\r\n\t\t\t\t\t\t\tthis.obj_personnel.HEADER.suspension_end=\"\";\r\n\t\t\t\t\t\t\t// $(\"#suspensionFrom\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t\t\t\t// $(\"#suspensionTo\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t//Update/Insert suspend_trx\r\n\r\n\r\n\r\n\t\t\t\t\t}, (error)=>{\r\n\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\ttoastr.error(\"Error Occured_2\", error);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},(error)=>{\r\n\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t\ttoastr.error(\"Error Occured_1\", error);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tbtnUpload(){\r\n\t\ttoastr.clear();\r\n\t\ttoastr.info(\"Image Upload under maintenance.\", \"\");\r\n\t}\r\n\r\n\tclickTab_main(index)\r\n\t{\r\n\t\tif(this.obj_personnel.global_indiv_id.length===0)\r\n\t\t\treturn;\r\n\t\tswitch(index){\r\n\t\t\tcase 0: \r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading employee info...\", \"\");\r\n\t\t\t\tthis.loadData(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\t//load Contact list.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading contact list...\", \"\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.maintab_contact_clicked.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2: //load Educational Achievement.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading Educational Achievement...\", \"\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.maintab_education_clicked.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3: //load Characteristic/Interest.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading Characteristic/Interest...\", \"\");\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4: //load Skills/Talent.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading Skills/Talent...\", \"\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.maintab_skills_clicked.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 5: //load Language/Dialect.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading Language/Dialect...\", \"\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.maintab_language_clicked.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tclearData(){\r\n\t\tthis._disableSavePersonnel = true;\r\n\t\tthis._disableClearData = true;\r\n\t\tthis._disableCreatePersonnel = false;\r\n\t\tthis._disableSearchPersonnel = false;\r\n\t\tthis.obj_personnel.global_indiv_id = \"\";\r\n\t\tthis.obj_personnel.HEADER = {\r\n\t\t\tcitizenship:[],\r\n\t\t\tgroup:[]\r\n\t\t};\r\n\t\tthis.selectedGender = \"\";\r\n\t\tthis.selected_citizenship = \"\";\r\n\t\tthis.selected_group=\"\";\r\n\t\tthis._disableForm = true;\r\n\t\tthis.obj_personnel.editing_status=\"\";\r\n\t\ttoastr.clear();\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.forEach((delegate)=>{\r\n\t\t\tdelegate();\r\n\t\t});\r\n\t}  \r\n\r\n\t// LoginPassed(user){\r\n\t// \tconsole.log(user);\r\n\t// }\r\n\r\n\t// date_mask(id, mask){\r\n\t// \tinput_mask(id, mask);\r\n\t// }\r\n\r\n\tDigitOnly(event){\r\n\t\treturn isDigit(event);\r\n\t}\r\n\r\n\tmask(id, mask){\r\n\t\tinput_mask(id, mask);\t\t\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class main_contact \r\n{\r\n\t_disableForm=true;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\t_disableAddressTable=false;\r\n\t_disableContactTable=false;\r\n\tlblCreatedBy=\"\";\r\n\tlblUpdatedBy=\"\";\r\n\tobj_personnel=null;\r\n\tconstructor(obj_personnel, toastr, DialogService)\r\n\t{\r\n\t\tthis.DialogService = DialogService;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_contact_clicked.push((val)=>{\r\n\t\t\tthis.loadMain_Address(val);\r\n\t\t\tthis.loadMain_Contact(val);\r\n\t\t\tthis.loadMain_EmailWeb(val);\r\n\t\t\tthis.clearAddressData();\r\n\t\t\tthis.clearContactData();\r\n\t\t\t// this.loadLog(val);\r\n\t\t\tthis.loadLog_V2(val);\r\n\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.push((val)=>{\r\n\t\t\tthis.obj_personnel.CONTACT= {\r\n\t\t\t\tstatus:\"\",\r\n\t\t\t\tmodelAddress:{},\r\n\t\t\t\tstatusContact:\"Add\",\r\n\t\t\t\tmodelContact:{},\r\n\t\t\t\tmodelInternet:{},\r\n\t\t\t\taddress:[],\r\n\t\t\t\tcontact:[],\r\n\t\t\t\temail:[],\r\n\t\t\t\twebsite:[]\r\n\t\t\t};\r\n\t\t\tthis.clearAddressData();\r\n\t\t\tthis.clearContactData();\r\n\t\t\tthis.clearEmailWebData();\r\n\t\t});\r\n\t}\r\n\r\n\tloadMain_Address(global_id)\r\n\t{\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from('ADDR_TRX').where('GLOBAL_ID','==',global_id);\t\t\r\n\t\tEntityManager().executeQuery(query).then((success)=>{\r\n\t\t\tvar tmp = [];\r\n\t\t\tvar tmpFullAddress = [];\r\n\t\t\t_.each(success.results,(result)=>{\r\n\t\t\t\tvar strFullAddress=\"\";\r\n\t\t\t\tif(result.UNIT_NO != null && result.UNIT_NO.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.UNIT_NO);\r\n\t\t\t\tif(result.HOUSE_NO != null && result.HOUSE_NO.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.HOUSE_NO);\r\n\t\t\t\tif(result.BLOCK_LOT != null && result.BLOCK_LOT.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.BLOCK_LOT);\r\n\t\t\t\tif(result.BLDG_NAME != null && result.BLDG_NAME.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.BLDG_NAME);\r\n\t\t\t\tif(result.STREET_NAME != null && result.STREET_NAME.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.STREET_NAME);\r\n\t\t\t\tif(result.SUB_VILLAGE != null && result.SUB_VILLAGE.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.SUB_VILLAGE);\r\n\t\t\t\tif(result.BARANGAY != null && result.BARANGAY.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.BARANGAY);\r\n\t\t\t\tif(result.DISTRICT != null && result.DISTRICT.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.DISTRICT);\r\n\t\t\t\tif(result.CITY_TOWN != null && result.CITY_TOWN.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.CITY_TOWN);\r\n\t\t\t\tif(result.STATE_PROVINCE != null && result.STATE_PROVINCE.length>0){\r\n\t\t\t\t\tvar text = this.obj_personnel.LOCATIONS.find((l)=>{\r\n\t\t\t\t\t\tif(l.value == result.STATE_PROVINCE)\r\n\t\t\t\t\t\t\treturn l.text;\r\n\t\t\t\t\t});          \r\n          \t\t\ttmpFullAddress.push(text);\r\n      \t\t\t}\r\n      \t\t\tif(result.REGION != null && result.REGION.length>0)\r\n      \t\t\t\ttmpFullAddress.push(result.REGION);\r\n      \t\t\tif(result.ZIPCODE != null && result.ZIPCODE.length>0)\r\n      \t\t\t\ttmpFullAddress.push(result.ZIPCODE);        \r\n      \t\t\tif(result.COUNTRY_CD != null && result.COUNTRY_CD.length>0)\r\n      \t\t\t\ttmpFullAddress.push(result.COUNTRY_CD);\r\n\r\n      \t\t\tif(tmpFullAddress.length>0){\r\n      \t\t\t\tstrFullAddress = tmpFullAddress.join(' ');\r\n      \t\t\t\ttmpFullAddress=[];\r\n      \t\t\t}\r\n\r\n\r\n      \t\t\ttmp.push({\r\n\t\t\t\t\tglobal_id: result.GLOBAL_ID,\r\n\t\t\t\t\taddr_id: result.ADDR_ID,\r\n\t\t\t\t\tcountry_cd: result.COUNTRY_CD,\r\n\t\t\t\t\tregion: result.REGION,\r\n\t\t\t\t\tstate_province: result.STATE_PROVINCE,\r\n\t\t\t\t\tcity_town: result.CITY_TOWN,\r\n\t\t\t\t\tdistrict: result.DISTRICT,\r\n\t\t\t\t\tbarangay: result.BARANGAY,\r\n\t\t\t\t\tsub_village: result.SUB_VILLAGE,\r\n\t\t\t\t\tphase: result.PHASE,\r\n\t\t\t\t\tpermanent_fl: result.PERMANENT_FL,\r\n\t\t\t\t\tpresent_fl: result.PRESENT_FL,\r\n\t\t\t\t\tblock_lot: result.BLOCK_LOT,\r\n\t\t\t\t\tstreet_name: result.STREET_NAME,\r\n\t\t\t\t\thouse_no: result.HOUSE_NO,\r\n\t\t\t\t\tbldg_name: result.BLDG_NAME,\r\n\t\t\t\t\tunit_no: result.UNIT_NO,\r\n\t\t\t\t\tzipcode: result.ZIPCODE,\r\n\t\t\t\t\tresidential_type: result.RESIDENTIAL_TYPE,\r\n\t\t\t\t\thouse_ownership: result.HOUSE_OWNERSHIP,\r\n\t\t\t\t\tmailing_fl: result.MAILING_FL,\r\n\t\t\t\t\tpostal_box: result.POSTAL_BOX,\r\n\t\t\t\t\tremarks: result.REMARKS,\r\n\t\t\t\t\tsketch_path: result.SKETCH_PATH,\r\n\t\t\t\t\tfull_address: strFullAddress\r\n        \t\t});\r\n \t\t\t});\r\n\t\t\t\r\n\t\t\tthis.obj_personnel.CONTACT.address = tmp;\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Contact info has been loaded.\");\r\n\t\t});\r\n\t}\r\n\r\n\tloadMain_Contact(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from('CONTACT_INFO_TRX')\r\n\t\t\t\t\t.where('GLOBAL_ID', '==', global_id);\r\n\t\tEntityManager().executeQuery(query).then((success)=>{\r\n\r\n\t\t\tvar tmp = [];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\tvar type = this.obj_personnel.CONTACT_TYPE.find((x)=>{\r\n\t\t\t\t\treturn x.value == result.PHONE_TYPE;\r\n\t\t\t\t});\r\n\t\t\t\tvar contact = {\r\n\t\t\t\t\tcontact_no_id: result.CONTACT_NO_ID,\r\n\t\t\t\t\tglobal_id: result.GLOBAL_ID,\r\n\t\t\t\t\tphone_type_text: type.text,\r\n\t\t\t\t\tphone_type: result.PHONE_TYPE,\r\n\t\t\t\t\tarea_cd: result.AREA_CD,\r\n\t\t\t\t\tphone_no: result.PHONE_NO,\r\n\t\t\t\t\tlocal_no: result.LOCAL_NO\r\n\t\t\t\t};\r\n\t\t\t\ttmp.push(contact);\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.CONTACT.contact = tmp;\r\n\t\t\tsettings.isNavigating = false;\r\n\r\n\t\t}, (error)=>{\r\n\t\t\ttoastr.error(error, \"Error in loading contact details.\");\r\n\t\t});\r\n\t}\r\n\r\n\tloadMain_EmailWeb(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"INTERNET_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\r\n\t\t\tvar tmpEmail=[];\r\n\t\t\tvar tmpWeb=[];\r\n\t\t\t_.each(querySuccess.results, (result)=>{\r\n\r\n\t\t\t\tif(result.EMAIL_FL == 1){\r\n\t\t\t\t\tvar email = {\r\n\t\t\t\t\t\tinternet_id: result.INTERNET_ID,\r\n\t\t\t\t\t\tweb_addr: result.WEB_ADDR\r\n\t\t\t\t\t};\r\n\t\t\t\t\ttmpEmail.push(email);\r\n\t\t\t\t}else if(result.REC_STAT_FL == 1){\r\n\t\t\t\t\tvar web = {\r\n\t\t\t\t\t\tinternet_id: result.INTERNET_ID,\r\n\t\t\t\t\t\tweb_addr: result.WEB_ADDR\t\r\n\t\t\t\t\t};\r\n\t\t\t\t\ttmpWeb.push(web);\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.CONTACT.email=tmpEmail;\r\n\t\t\tthis.obj_personnel.CONTACT.website=tmpWeb;\r\n\r\n\t\t}, (queryError)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(queryError, \"Error in loading email data.\");\r\n\t\t\t// console.log(queryError);\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tloadLog(global_id){\r\n\t\tvar createdBy = null;\r\n\t\tvar dtCreated = null;\r\n\t\tvar updatedBy = null;\r\n\t\tvar dtUpdated = null;\r\n\t\tvar query = EntityQuery().from(\"ADDR_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id)\r\n\t\t\t\t\t.orderBy(\"CREATED_DT\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tif(s1.results.length==1){\r\n\t\t\t\tdtCreated = new Date(s1.results[0].CREATED_DT);\r\n\t\t\t\tcreatedBy = s1.results[0].CREATED_BY;\r\n\t\t\t} \r\n\r\n\t\t\t// console.log(createdBy+\":\"+dtCreated);\r\n\t\t\tquery = EntityQuery().from(\"CONTACT_INFO_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\",\"==\", global_id)\r\n\t\t\t\t\t.orderBy(\"CREATED_DT\").take(1);\r\n\t\t\tEntityManager().executeQuery(query).then((s2)=>{\r\n\t\t\t\tif(s2.results.length==1){\t\t\t\t\t\r\n\t\t\t\t\tvar tmpDt = new Date(s2.results[0].CREATED_DT);\r\n\t\t\t\t\tif(dtCreated == null || dtCreated>tmpDt){\r\n\t\t\t\t\t\tdtCreated = tmpDt;\r\n\t\t\t\t\t\tcreatedBy = s2.results[0].CREATED_BY;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tquery = EntityQuery().from(\"INTERNET_TRX\")\r\n\t\t\t\t\t\t.where(\"GLOBAL_ID\",\"==\", global_id)\r\n\t\t\t\t\t\t.orderBy(\"CREATED_DT\").take(1);\r\n\t\t\t\tEntityManager().executeQuery(query).then((s3)=>{\r\n\t\t\t\t\tif(s3.results.length==1){\r\n\t\t\t\t\t\tvar tmpDt = new Date(s3.results[0].CREATED_DT);\r\n\t\t\t\t\t\tif(dtCreated == null || dtCreated>tmpDt){\r\n\t\t\t\t\t\t\tdtCreated = tmpDt;\r\n\t\t\t\t\t\t\tcreatedBy = s3.results[0].CREATED_BY;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(createdBy != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.lblCreatedBy = createdBy+' '+moment.utc(dtCreated).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tvar query2 = EntityQuery().from(\"ADDR_TRX\")\r\n\t\t\t\t\t .where(\"GLOBAL_ID\", \"==\", global_id)\r\n\t\t\t\t\t .orderByDesc(\"LAST_UPDATED_DT\").take(1);\r\n\t\tEntityManager().executeQuery(query2).then((ss1)=>{\r\n\t\t\tif(ss1.results.length==1){\r\n\t\t\t\tif(ss1.results[0].LAST_UPDATED_BY != null){\r\n\t\t\t\t\tupdatedBy = ss1.results[0].LAST_UPDATED_BY;\r\n\t\t\t\t\tdtUpdated = new Date(ss1.results[0].LAST_UPDATED_DT);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tquery2 = EntityQuery().from(\"CONTACT_INFO_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id)\r\n\t\t\t\t\t.orderByDesc(\"LAST_UPDATED_DT\").take(1);\r\n\t\t\tEntityManager().executeQuery(query2).then((ss2)=>{\r\n\t\t\t\tif(ss2.results.length==1){\r\n\t\t\t\t\tif(ss2.results[0].LAST_UPDATED_BY != null){\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar tmpDt = new Date(ss2.results[0].LAST_UPDATED_DT);\r\n\t\t\t\t\t\tif(dtUpdated == null || dtUpdated<tmpDt){\r\n\t\t\t\t\t\t\tupdatedBy = ss2.results[0].LAST_UPDATED_BY;\r\n\t\t\t\t\t\t\tdtUpdated = tmpDt;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tquery2 = EntityQuery().from(\"INTERNET_TRX\")\r\n\t\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id)\r\n\t\t\t\t\t\t.orderByDesc(\"LAST_UPDATED_DT\").take(1);\r\n\t\t\t\tEntityManager().executeQuery(query2).then((ss3)=>{\r\n\t\t\t\t\tif(ss3.results.length==1){\r\n\t\t\t\t\t\tif(ss3.results[0].LAST_UPDATED_BY != null){\r\n\t\t\t\t\t\t\tvar tmpDt = new Date(ss3.results[0].LAST_UPDATED_DT);\r\n\t\t\t\t\t\t\tif(dtUpdated==null || dtUpdated<tmpDt){\r\n\t\t\t\t\t\t\t\tupdatedBy = ss3.results[0].LAST_UPDATED_BY;\r\n\t\t\t\t\t\t\t\tdtUpdated = tmpDt;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(updatedBy != null){\r\n\t\t\t\t\t\tthis.lblUpdatedBy = updatedBy+' '+moment.utc(dtUpdated).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\t\t\r\n\t}\r\n\r\n\tloadLog_V2(global_id){\r\n\t\tvar tmpList=[];\r\n\t\tvar query = EntityQuery().from(\"ADDR_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\tvar _user = r.CREATED_BY;\r\n\t\t\t\t\tvar _date = new Date(r.CREATED_DT);\r\n\t\t\t\t\ttmpList.push({\r\n\t\t\t\t\t\tuser: _user,\r\n\t\t\t\t\t\tdate: _date\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\tvar _user = r.LAST_UPDATED_BY;\r\n\t\t\t\t\tvar _date = new Date(r.LAST_UPDATED_DT);\r\n\t\t\t\t\ttmpList.push({\r\n\t\t\t\t\t\tuser: _user,\r\n\t\t\t\t\t\tdate: _date\r\n\t\t\t\t\t});\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t});\r\n\r\n\t\t\tquery = EntityQuery().from(\"CONTACT_INFO_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\t\t\tEntityManager().executeQuery(query).then((s2)=>{\r\n\t\t\t\t_.each(s2.results, (r2)=>{\r\n\t\t\t\t\tif(r2.CREATED_BY != null){\r\n\t\t\t\t\t\tvar _user = r2.CREATED_BY;\r\n\t\t\t\t\t\tvar _date = new Date(r2.CREATED_DT);\r\n\t\t\t\t\t\ttmpList.push({\r\n\t\t\t\t\t\t\tuser: _user,\r\n\t\t\t\t\t\t\tdate: _date\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(r2.LAST_UPDATED_BY != null){\r\n\t\t\t\t\t\tvar _user = r2.LAST_UPDATED_BY;\r\n\t\t\t\t\t\tvar _date = new Date(r2.LAST_UPDATED_DT);\r\n\t\t\t\t\t\ttmpList.push({\r\n\t\t\t\t\t\t\tuser: _user,\r\n\t\t\t\t\t\t\tdate: _date\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tquery = EntityQuery().from(\"INTERNET_TRX\")\r\n\t\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\t\t\t\tEntityManager().executeQuery(query).then((s3)=>{\r\n\r\n\t\t\t\t\t_.each(s3.results, (r3)=>{\r\n\t\t\t\t\t\tif(r3.CREATED_BY != null){\r\n\t\t\t\t\t\t\tvar _user = r3.CREATED_BY;\r\n\t\t\t\t\t\t\tvar _date = new Date(r3.CREATED_DT);\r\n\t\t\t\t\t\t\ttmpList.push({\r\n\t\t\t\t\t\t\t\tuser: _user,\r\n\t\t\t\t\t\t\t\tdate: _date\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(r3.LAST_UPDATED_BY != null){\r\n\t\t\t\t\t\t\tvar _user = r3.LAST_UPDATED_BY;\r\n\t\t\t\t\t\t\tvar _date = new Date(r3.LAST_UPDATED_DT);\r\n\t\t\t\t\t\t\ttmpList.push({\r\n\t\t\t\t\t\t\t\tuser: _user,\r\n\t\t\t\t\t\t\t\tdate: _date\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\ttmpList.sort(this.OrderByDate);\r\n\t\t\t\t\tvar LastIndex = tmpList.length-1;\r\n\t\t\t\t\tif(tmpList.length>0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.lblCreatedBy = tmpList[0].user+' '+moment.utc(tmpList[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t\t\tif(tmpList.length>1){\r\n\t\t\t\t\t\t\tthis.lblUpdatedBy = tmpList[LastIndex].user + ' ' + moment.utc(tmpList[LastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tOrderByDate(a, b){\r\n\t\tif(a.date > b.date)\r\n\t\t\treturn 1;\r\n\t\tif(a.date < b.date)\r\n\t\t\treturn -1;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\r\n\tclearAddressData(){\r\n\r\n\t\tsettings.isNavigating = false;\r\n\t\tthis.obj_personnel.CONTACT.modelAddress={};\r\n\t\tthis.obj_personnel.CONTACT.status=\"\";\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableAddressTable = false;\r\n\r\n\t}\r\n\r\n\tclearContactData(){\r\n\r\n\t\tsettings.isNavigating = false;\r\n\t\tthis._disableContactTable = false;\r\n\t\tthis.obj_personnel.CONTACT.statusContact=\"Add\";\r\n\t\tthis.obj_personnel.CONTACT.modelContact={};\r\n\r\n\t}\r\n\r\n\tclearEmailWebData(){\r\n\r\n\t\tsettings.isNavigating = false;\r\n\t\tthis.obj_personnel.CONTACT.modelInternet={};\r\n\r\n\t}\r\n\r\n\t//Source: https://stackoverflow.com/questions/13952686/how-to-make-html-input-tag-only-accept-numerical-values\r\n\tisNumberKey(evt){\t\r\n    \tvar charCode = (evt.which) ? evt.which : event.keyCode\r\n    \tif (charCode > 31 && (charCode < 48 || charCode > 57))\r\n\t        return false;\r\n    \treturn true;\r\n\t}\r\n\r\n\tdd_provinceChanged(){\r\n\t\tvar prov = this.obj_personnel.CONTACT.modelAddress.state_province;\r\n\t\tif(prov != undefined && prov != null && prov.length!=0){\r\n\t\t\tvar selectedProv = this.obj_personnel.PROVINCE.find((p)=>{\r\n\t\t\t\tif(p.value == prov){\r\n\t\t\t\t\treturn p;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(selectedProv != null){\r\n\t\t\t\tthis.obj_personnel.CONTACT.modelAddress.region = selectedProv.group;\t\t\t\t\r\n\t\t\t\tthis.dd_regionChanged();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdd_regionChanged(){\r\n\t\tvar reg = this.obj_personnel.CONTACT.modelAddress.region;\r\n\t\tif(reg != undefined && reg!=null && reg.length!=0)\r\n\t\t{\r\n\t\t\t//alert(this.obj_personnel.CONTACT.modelAddress.region);\r\n\t\t\tvar selectedRegion = this.obj_personnel.REGION.find((r)=>{\r\n\t\t\t\tif(r.value == reg)\r\n\t\t\t\t\treturn r;\r\n\t\t\t});\r\n\r\n\t\t\tif(selectedRegion != null)\r\n\t\t\t{\r\n\t\t\t\tthis.obj_personnel.CONTACT.modelAddress.country_cd = selectedRegion.group;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tbtnAdd_Address()\r\n\t{\r\n\t\tthis.obj_personnel.CONTACT.status=\"ADD\";\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableAddressTable = true;\r\n\t}\r\n\r\n\tbtnEdit_Address(address)\r\n\t{\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableAddressTable = true;\r\n\t\tthis.obj_personnel.CONTACT.status=\"EDIT\";\r\n\t\tthis.obj_personnel.CONTACT.modelAddress=address;\r\n\t\tthis.obj_personnel.CONTACT.modelAddress.present_fl=this.obj_personnel.CONTACT.modelAddress.present_fl=='1'?true:false;\r\n\t\tthis.obj_personnel.CONTACT.modelAddress.permanent_fl=this.obj_personnel.CONTACT.modelAddress.permanent_fl=='1'?true:false;\r\n  \t\t//console.log(address);\r\n  \t}\r\n\r\n  \tbtnRemoveAddress(item){\r\n  \t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the address?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\t//alert(\"Confirmed delete.\");\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('ADDR_TRX').where('ADDR_ID', '==', item.addr_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The address was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadMain_Address(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\t// this.loadLog(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.loadLog_V2(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing address.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n  \t}\r\n\r\n  \tvalidateAddress()\r\n  \t{\r\n  \t\tvar strValidation=\"\";\r\n  \t\tif(this.obj_personnel.CONTACT.modelAddress.country_cd == undefined || this.obj_personnel.CONTACT.modelAddress.country_cd == null || this.obj_personnel.CONTACT.modelAddress.country_cd.length==0){\r\n  \t\t\tstrValidation+= \"No country specified.<br/>\";\r\n  \t\t}\r\n\r\n  \t\tif(strValidation.length>0){\r\n  \t\t\ttoastr.clear();\r\n  \t\t\ttoastr.error(strValidation, \"\");\r\n  \t\t\treturn;\r\n  \t\t}else{\r\n  \t\t\tif(this.obj_personnel.CONTACT.status=='ADD'){\r\n  \t\t\t\tthis.insertAddress();\r\n  \t\t\t}else if(this.obj_personnel.CONTACT.status=='EDIT')\r\n  \t\t\t{\r\n  \t\t\t\tthis.updateAddress();\r\n  \t\t\t}\r\n  \t\t}\r\n  \t}\r\n\r\n  \tinsertAddress(){\r\n\r\n  \t\tsettings.isNavigating = true;\r\n  \t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n\r\n  \t\tvar query = EntityQuery().from('ADDR_TRX').orderByDesc('ADDR_ID').take(1);\r\n  \t\tEntityManager().executeQuery(query).then((success)=>{\r\n\r\n  \t\t\tvar Max=1;\r\n  \t\t\tif(success.results.length>0){\r\n  \t\t\t\tMax = success.results[0].ADDR_ID+1;\r\n  \t\t\t}\r\n  \t\t\t// console.log(Max);\r\n        //Upload Image first before save to DB record.\r\n\r\n        \tvar _address = {\r\n\t        \tADDR_ID: Max,\r\n\t        \tBARANGAY: this.obj_personnel.CONTACT.modelAddress.barangay,\r\n\t        \tBLDG_NAME: this.obj_personnel.CONTACT.modelAddress.bldg_name,\r\n\t        \tBLOCK_LOT: this.obj_personnel.CONTACT.modelAddress.block_lot,\r\n\t        \tCITY_TOWN: this.obj_personnel.CONTACT.modelAddress.city_town,\r\n\t        \tCOUNTRY_CD: this.obj_personnel.CONTACT.modelAddress.country_cd,\r\n\t        \tDISTRICT: this.obj_personnel.CONTACT.modelAddress.district,\r\n\t        \tGLOBAL_ID: this.obj_personnel.global_indiv_id,\r\n\t        \tHOUSE_NO: this.obj_personnel.CONTACT.modelAddress.house_no,\r\n\t            //HOUSE_OWNERSHIP: this.obj_personnel.CONTACT.modelAddress.house_ownership,\r\n\t            MAILING_FL: 0,\r\n\t            PERMANENT_FL: this.obj_personnel.CONTACT.modelAddress.permanent_fl?1:0,\r\n\t            // PERMANENT_FL: 0,\r\n\t            // PHASE: this.obj_personnel.CONTACT.modelAddress.phase,\r\n\t            // POSTAL_BOX: this.obj_personnel.CONTACT.modelAddress.postal_box,\r\n\t            PRESENT_FL: this.obj_personnel.CONTACT.modelAddress.present_fl?1:0,\r\n\t            // PRESENT_FL: 0,\r\n\t            REGION: this.obj_personnel.CONTACT.modelAddress.region,\r\n\t            REMARKS: this.obj_personnel.CONTACT.modelAddress.remarks,\r\n\t            // RESIDENTIAL_TYPE: this.obj_personnel.CONTACT.modelAddress.residential_type,\r\n\t            // SKETCH_PATH: this.obj_personnel.CONTACT.modelAddress.sketch_path,\r\n\t            STATE_PROVINCE: this.obj_personnel.CONTACT.modelAddress.state_province,\r\n\t            STREET_NAME: this.obj_personnel.CONTACT.modelAddress.street_name,\r\n\t            SUB_VILLAGE: this.obj_personnel.CONTACT.modelAddress.sub_village,\r\n\t            UNIT_NO: this.obj_personnel.CONTACT.modelAddress.unit_no,\r\n\t            ZIPCODE: this.obj_personnel.CONTACT.modelAddress.zipcode,\r\n\t            CREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t            CREATED_DT: dateToday\r\n\t        };\r\n\r\n\t        var address = EntityManager().createEntity('ADDR_TRX', _address);\r\n\r\n    \t    EntityManager().addEntity(address);\r\n        \tEntityManager().saveChanges().then((success)=>{\r\n        \t\ttoastr.clear();\r\n\t        \ttoastr.success(\"\", \"Record saved.\");\r\n\t        \tthis.loadMain_Address(this.obj_personnel.global_indiv_id);\r\n\t        \t// this.loadLog(this.obj_personnel.global_indiv_id);\r\n\t        \tthis.loadLog_V2(this.obj_personnel.global_indiv_id);\r\n\t        \tthis.clearAddressData();\r\n\t        }, (error)=>{\r\n\t        \tif(address != null){\r\n\t        \t\taddress.entityAspect.setDeleted();\r\n\t        \t}\r\n\t        \tEntityManager().getEntities().forEach(function(entity) {\r\n\t        \t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t        \t\tif (errors.length > 0)\r\n\t        \t\t\tconsole.log(errors);\r\n\t        \t});\r\n\t        \ttoastr.clear();\r\n\t        \ttoastr.error(error, \"Error in saving address.\");\r\n\r\n\t        \tsettings.isNavigating = false;\r\n\t        \t// console.log(error);\r\n\t        });\r\n    \t});\r\n  \t}\r\n\r\n  \tupdateAddress(){\r\n\r\n  \t\tsettings.isNavigating = true;\r\n  \t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n  \t\tvar query = EntityQuery().from('ADDR_TRX').where('ADDR_ID','==', this.obj_personnel.CONTACT.modelAddress.addr_id);\r\n  \t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\tsuccess.results[0].BARANGAY = this.obj_personnel.CONTACT.modelAddress.barangay;\r\n  \t\t\tsuccess.results[0].BLDG_NAME = this.obj_personnel.CONTACT.modelAddress.bldg_name;\r\n  \t\t\tsuccess.results[0].BLOCK_LOT = this.obj_personnel.CONTACT.modelAddress.block_lot;\r\n  \t\t\tsuccess.results[0].CITY_TOWN = this.obj_personnel.CONTACT.modelAddress.city_town;\r\n  \t\t\tsuccess.results[0].COUNTRY_CD = this.obj_personnel.CONTACT.modelAddress.country_cd;\r\n  \t\t\tsuccess.results[0].DISTRICT = this.obj_personnel.CONTACT.modelAddress.district;\r\n  \t\t\tsuccess.results[0].HOUSE_NO = this.obj_personnel.CONTACT.modelAddress.house_no;\r\n  \t\t\tsuccess.results[0].PERMANENT_FL = this.obj_personnel.CONTACT.modelAddress.permanent_fl?'1':'0';\r\n  \t\t\tsuccess.results[0].PRESENT_FL = this.obj_personnel.CONTACT.modelAddress.present_fl?'1':'0';\r\n  \t\t\tsuccess.results[0].REGION = this.obj_personnel.CONTACT.modelAddress.region;\r\n  \t\t\tsuccess.results[0].REMARKS = this.obj_personnel.CONTACT.modelAddress.remarks;\r\n  \t\t\tsuccess.results[0].STATE_PROVINCE = this.obj_personnel.CONTACT.modelAddress.state_province;\r\n  \t\t\tsuccess.results[0].STREET_NAME = this.obj_personnel.CONTACT.modelAddress.street_name;\r\n  \t\t\tsuccess.results[0].SUB_VILLAGE = this.obj_personnel.CONTACT.modelAddress.sub_village;\r\n  \t\t\tsuccess.results[0].UNIT_NO = this.obj_personnel.CONTACT.modelAddress.unit_no;\r\n  \t\t\tsuccess.results[0].ZIPCODE = this.obj_personnel.CONTACT.modelAddress.zipcode;\r\n  \t\t\tsuccess.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n  \t\t\tsuccess.results[0].LAST_UPDATED_DT = dateToday;\r\n  \t\t\t\r\n  \t\t\tEntityManager().saveChanges().then((success)=>{\r\n  \t\t\t\ttoastr.clear();\r\n  \t\t\t\ttoastr.success(\"\",\"Record updated sucessfully.\");\r\n  \t\t\t\tthis.loadMain_Address(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\tthis.clearAddressData();\r\n  \t\t\t\t// this.loadLog(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\tthis.loadLog_V2(this.obj_personnel.global_indiv_id);\r\n  \t\t\t},(error)=>{\r\n  \t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\ttoastr.clear();\r\n  \t\t\t\tconsole.log(error);\r\n  \t\t\t\ttoastr.error(error, 'Error in updating address.');\r\n  \t\t\t});\r\n  \t\t});\r\n\r\n  \t}\r\n\r\n  \tbtnEdit_Contact(contact){\r\n  \t\tthis._disableContactTable = true;\r\n  \t\tthis.obj_personnel.CONTACT.statusContact = \"Edit\";\r\n  \t\tthis.obj_personnel.CONTACT.modelContact.contact_no_id = contact.contact_no_id;\r\n  \t\tthis.obj_personnel.CONTACT.modelContact.phone_type = contact.phone_type;\r\n  \t\tthis.obj_personnel.CONTACT.modelContact.area_cd = contact.area_cd;\r\n  \t\tthis.obj_personnel.CONTACT.modelContact.phone_no = contact.phone_no;\r\n  \t\tthis.obj_personnel.CONTACT.modelContact.local_no = contact.local_no;\r\n  \t}\r\n\r\n  \tbtnRemove_Contact(contact){\r\n\r\n  \t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the contact?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n  \t\t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from(\"CONTACT_INFO_TRX\")\r\n  \t\t\t\t\t\t\t\t.where(\"CONTACT_NO_ID\", \"==\", contact.contact_no_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n  \t\t\t\t\t\tif(querySuccess.results.length==0){\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\",\"No to-be-remove record found.\");\r\n  \t\t\t\t\t\t}\r\n  \t\t\t\t\t\tquerySuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((removeSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The contact was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadMain_Contact(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.clearContactData();\r\n  \t\t\t\t\t\t\t// this.loadLog(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.loadLog_V2(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(removeError)=>{\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(removeError, \"Error in removing contact.\");\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n  \t}\r\n\r\n  \tvalidateContact(){\r\n  \t\tvar strValidation = \"\";\r\n\r\n\t\tif(this.obj_personnel.CONTACT.modelContact.phone_type == undefined || this.obj_personnel.CONTACT.modelContact.phone_type == null || this.obj_personnel.CONTACT.modelContact.phone_type.length==0){\r\n  \t\t\tstrValidation+=\"Phone type is required.<br/>\";\r\n  \t\t}\r\n\r\n  \t\tif(this.obj_personnel.CONTACT.modelContact.area_cd == undefined || this.obj_personnel.CONTACT.modelContact.area_cd == null || this.obj_personnel.CONTACT.modelContact.area_cd.length==0){\r\n  \t\t\tstrValidation+=\"Area Code is required.<br/>\";\r\n  \t\t}\r\n\r\n  \t\tif(this.obj_personnel.CONTACT.modelContact.phone_no == undefined || this.obj_personnel.CONTACT.modelContact.phone_no == null || this.obj_personnel.CONTACT.modelContact.phone_no.length==0){\r\n  \t\t\tstrValidation+=\"Phone number is required.<br/>\";\r\n  \t\t}\r\n\r\n  \t\tif(strValidation.length>0){\r\n  \t\t\ttoastr.clear();\r\n  \t\t\ttoastr.error(\"\", strValidation);\r\n  \t\t}else{\r\n  \t\t\tif(this.obj_personnel.CONTACT.statusContact==\"Add\"){\r\n  \t\t\t\tthis.insertContact();\r\n  \t\t\t}else if(this.obj_personnel.CONTACT.statusContact==\"Edit\")\r\n  \t\t\t{\r\n  \t\t\t\tthis.updateContact();\r\n  \t\t\t}  \t\t\r\n  \t\t}\r\n  \t}\r\n  \t\r\n  \tinsertContact(){\r\n\r\n  \t\tsettings.isNavigating = true;\r\n  \t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n  \t\tvar query = EntityQuery().from(\"CONTACT_INFO_TRX\").orderByDesc(\"CONTACT_NO_ID\").take(1);\r\n  \t\tEntityManager().executeQuery(query).then((Success)=>{\r\n  \t\t\tvar Max = 1;\r\n  \t\t\tif(Success.results.length>0)\r\n  \t\t\t{\r\n  \t\t\t\tMax = Success.results[0].CONTACT_NO_ID + 1;\r\n  \t\t\t}\r\n  \t\t\tvar Contact = EntityManager().createEntity(\"CONTACT_INFO_TRX\", {\r\n  \t\t\t\tAREA_CD: this.obj_personnel.CONTACT.modelContact.area_cd,\r\n  \t\t\t\tCONTACT_NO_ID: Max,\r\n  \t\t\t\tCOUNTRY_CD: \"PH\",\r\n  \t\t\t\tGLOBAL_ID: this.obj_personnel.global_indiv_id,\r\n  \t\t\t\tLOCAL_NO: this.obj_personnel.CONTACT.modelContact.local_no,\r\n  \t\t\t\tPHONE_NO: this.obj_personnel.CONTACT.modelContact.phone_no,\r\n  \t\t\t\tPHONE_TYPE: this.obj_personnel.CONTACT.modelContact.phone_type,\r\n  \t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n  \t\t\t\tCREATED_DT: dateToday\r\n\r\n  \t\t\t});\r\n  \t\t\tEntityManager().addEntity(Contact);\r\n  \t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Contact successfully added.\");\r\n\t\t\t\tthis.loadMain_Contact(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearContactData();\r\n\t\t\t\t// this.loadLog(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.loadLog_V2(this.obj_personnel.global_indiv_id);\r\n  \t\t\t}, (error)=>{\r\n  \t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\tif(Contact != null){\r\n  \t\t\t\t\tContact.entityAspect.setDeleted();\r\n  \t\t\t\t}\r\n  \t\t\t\ttoastr.clear();\r\n  \t\t\t\ttoastr.error(error, \"Error in adding contact.\");\r\n  \t\t\t});\r\n\r\n  \t\t});  \t\t\r\n  \t}\r\n\r\n  \tupdateContact(){\r\n\r\n  \t\tsettings.isNavigating = true;\r\n  \t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n  \t\tvar query = EntityQuery().from('CONTACT_INFO_TRX')\r\n  \t\t\t\t\t.where(\"CONTACT_NO_ID\", \"==\", this.obj_personnel.CONTACT.modelContact.contact_no_id);\r\n  \t\tEntityManager().executeQuery(query).then((Success)=>{\r\n\r\n  \t\t\tif(Success.results.length == 0)\r\n  \t\t\t{\r\n  \t\t\t\ttoastr.clear();\r\n  \t\t\t\ttoastr.error(\"\", \"No record to be updated found.\");\r\n  \t\t\t\treturn;\r\n  \t\t\t}\r\n  \t\t\tSuccess.results[0].AREA_CD = this.obj_personnel.CONTACT.modelContact.area_cd;\r\n  \t\t\tSuccess.results[0].LOCAL_NO = this.obj_personnel.CONTACT.modelContact.local_no;\r\n  \t\t\tSuccess.results[0].PHONE_NO = this.obj_personnel.CONTACT.modelContact.phone_no;\r\n  \t\t\tSuccess.results[0].PHONE_TYPE = this.obj_personnel.CONTACT.modelContact.phone_type;\r\n  \t\t\tSuccess.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n  \t\t\tSuccess.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n  \t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\ttoastr.clear();\r\n  \t\t\t\ttoastr.success(\"\", \"The contact was successfully updated.\");\r\n\t\t\t\tthis.loadMain_Contact(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearContactData();\r\n\t\t\t\t// this.loadLog(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.loadLog_V2(this.obj_personnel.global_indiv_id);\r\n  \t\t\t}, (errorSave)=>{  \t\t\t\t\r\n  \t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\ttoastr.clear();\r\n  \t\t\t\ttoastr.error(errorSave, \"Error in updating contact.\");\r\n  \t\t\t\tconsole.log(errorSave);\r\n  \t\t\t});\r\n  \t\t});\r\n  \t}\r\n\r\n  \tvalidateEmail(email) {\r\n  \t\tvar re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n  \t\treturn re.test(email);\r\n\t}\r\n\r\n\tvalidateWeb(URL){\r\n\t\tvar regEx = /^\\s*[a-z](?:[-a-z0-9\\+\\.])*:(?:\\/\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:])*@)?(?:\\[(?:(?:(?:[0-9a-f]{1,4}:){6}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|::(?:[0-9a-f]{1,4}:){5}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4}:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+[-a-z0-9\\._~!\\$&\\'\\(\\)\\*\\+,;=:]+)\\]|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}|(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=@])*)(?::[0-9]*)?(?:\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@]))*)*|\\/(?:(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@]))+)(?:\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@]))*)*)?|(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@]))+)(?:\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@]))*)*|(?!(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@])))(?:\\?(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@])|[\\uE000-\\uF8FF\\uF0000-\\uFFFFD|\\u100000-\\u10FFFD\\/\\?])*)?(?:\\#(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@])|[\\/\\?])*)?\\s*$/i;\r\n\t\treturn regEx.test(URL);\r\n\t}\r\n\r\n\tbtnAdd_EmailWeb(isEmail){\r\n\r\n\t\tif(isEmail){\r\n\t\t\tif(this.obj_personnel.CONTACT.modelInternet.email_addr==undefined || this.obj_personnel.CONTACT.modelInternet.email_addr.length==0){\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", \"No email specified.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.validateEmail(this.obj_personnel.CONTACT.modelInternet.email_addr)){\r\n\t\t\t\t//alert('email is valid.');\r\n\t\t\t\tthis.insertEmailWeb(isEmail);\r\n\t\t\t}else{\r\n\t\t\t\t//alert('email is not valid.');\r\n\t\t\t\ttoastr.error(\"Invalid email.\");\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(this.obj_personnel.CONTACT.modelInternet.url==undefined || this.obj_personnel.CONTACT.modelInternet.url.length==0){\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", \"No URL specified.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// if(this.validateWeb(this.obj_personnel.CONTACT.modelInternet.url)){\r\n\t\t\t// \talert('url is valid');\r\n\t\t\t\tthis.insertEmailWeb(isEmail);\r\n\t\t\t// }else{\r\n\t\t\t// \talert('url is invalid.');\r\n\t\t\t// \ttoastr.error(\"Invalid URL.\");\r\n\t\t\t// }\r\n\t\t}\r\n\t}\r\n\r\n\tbtnRemove_EmailWeb(internet_id, isEmail){\r\n\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the \"+(isEmail?\"Email address\":\"website url\")+\"?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n  \t\t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from(\"INTERNET_TRX\")\r\n  \t\t\t\t\t\t\t\t.where(\"INTERNET_ID\", \"==\", internet_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n  \t\t\t\t\t\tif(querySuccess.results.length==0){\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\",\"No to-be-remove record found.\");\r\n  \t\t\t\t\t\t}\r\n  \t\t\t\t\t\tquerySuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((removeSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The \"+(isEmail?\"Email address\":\"website url\")+\" was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadMain_EmailWeb(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.clearEmailWebData();\r\n  \t\t\t\t\t\t},(removeError)=>{\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(removeError, \"Error in removing \"+(isEmail?\"Email address\":\"website url\")+\" .\");\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\r\n\t}\r\n\r\n\tbtnRemove_AllEmailWeb(isEmail){\r\n\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove all.\", message:\"Are you sure you want to remove all the \"+(isEmail?\"Email address\":\"website url\")+\"?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n  \t\t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar pred1 = breeze.Predicate.create(\"GLOBAL_ID\", \"==\", this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\tvar pred2 = breeze.Predicate.create(\"EMAIL_FL\", \"==\", isEmail?1:0);\r\n  \t\t\t\t\tvar finalPred = breeze.Predicate.and([pred1, pred2]);\r\n  \t\t\t\t\tvar query = EntityQuery().from(\"INTERNET_TRX\")\r\n  \t\t\t\t\t\t\t\t.where(finalPred);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n  \t\t\t\t\t\tif(querySuccess.results.length==0){\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\",\"No to-be-remove record found.\");\r\n  \t\t\t\t\t\t}\r\n\r\n  \t\t\t\t\t\t_.each(querySuccess.results, (result)=>{\r\n  \t\t\t\t\t\t\tresult.entityAspect.setDeleted();\r\n  \t\t\t\t\t\t});  \t\t\t\t\t\t\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((removeSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The \"+(isEmail?\"Email address\":\"website url\")+\" was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadMain_EmailWeb(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.clearEmailWebData();\r\n  \t\t\t\t\t\t},(removeError)=>{\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(removeError, \"Error in removing \"+(isEmail?\"Email address\":\"website url\")+\" .\");\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\r\n\t}\r\n\r\n\tinsertEmailWeb(isEmail){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from('INTERNET_TRX').orderByDesc('INTERNET_ID').take(1);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tvar Max = 1;\r\n\t\t\tif(querySuccess.results.length>0){\r\n\t\t\t\tMax = querySuccess.results[0].INTERNET_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar internet_trx = {\r\n\t\t\t\tGLOBAL_ID: this.obj_personnel.global_indiv_id,\r\n\t\t\t\tWEB_ADDR: isEmail? this.obj_personnel.CONTACT.modelInternet.email_addr: this.obj_personnel.CONTACT.modelInternet.url,\r\n\t\t\t\tINTERNET_ID: Max,\r\n\t\t\t\tEMAIL_FL: isEmail?1:0,\r\n\t\t\t\tREC_STAT_FL: 1,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\t\t\tvar entity = EntityManager().createEntity(\"INTERNET_TRX\", internet_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"The \"+(isEmail?\"Email\":\"Website\")+ \" successfully added.\");\r\n\t\t\t\tthis.loadMain_EmailWeb(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearEmailWebData();\r\n\t\t\t\t// this.loadLog(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.loadLog_V2(this.obj_personnel.global_indiv_id);\r\n\t\t\t}, (errorSave)=>{\r\n\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(errorSave, \"Error in saving \"+(isEmail?\"Email.\":\"Website.\"));\r\n\t\t\t});\r\n\r\n\t\t});\t\t\r\n\t}\r\n\r\n\r\n\r\n  }","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class main_educational{\r\n\r\n\tobj_personnel = null;\r\n\t_disableForm=true;\r\n\t_disableTable=false;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\tlblCreatedBy=\"\";\r\n\tlblUpdatedBy=\"\";\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_education_clicked.push((val)=>{\r\n\t\t\tthis.loadMain_Educational(val);\r\n\t\t\tthis.loadLog(val);\r\n\t\t\tthis.clearData();\r\n\t\t});\r\n\t\t\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.push(()=>{\r\n\t\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT={\r\n\t\t\t\tstatus:\"\",\r\n\t\t\t\tmodel:{},\r\n\t\t\t\tlist:[]\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\tloadMain_Educational(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"EDUCATION_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tvar tmpList=[];\r\n\t\t\t_.each(querySuccess.results, (result)=>{\r\n\t\t\t\tvar school = this.obj_personnel.SCHOOLS.find((x)=>{\r\n\t\t\t\t\treturn x.school_cd == result.SCHOOL_CD;\r\n\t\t\t\t});\r\n\t\t\t\tvar level = this.obj_personnel.LEVEL.find((x)=>{\r\n\t\t\t\t\treturn x.value == result.EDUCATION_LEVEL;\r\n\t\t\t\t});\r\n\t\t\t\tvar education = {\r\n\t\t\t\t\tstart_yr: result.START_YR,\r\n\t\t\t\t\tcourse: result.COURSE,\r\n\t\t\t\t\teducation_id: result.EDUCATION_ID,\r\n\t\t\t\t\teducation_level: result.EDUCATION_LEVEL,\r\n\t\t\t\t\tend_yr: result.END_YR,\r\n\t\t\t\t\tschool_cd: result.SCHOOL_CD,\r\n\t\t\t\t\thonor_awards: result.HONOR_AWARDS,\r\n\t\t\t\t\tcompleted_fl: result.COMPLETED_FL,\r\n\t\t\t\t\tschool_name: school.school_name,\r\n\t\t\t\t\tlevel_name: level.text\t\t\t\t\t\r\n\t\t\t\t};\r\n\t\t\t\ttmpList.push(education);\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT.list = tmpList;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Success\");\r\n\t\t\tsettings.isNavigating = false;\r\n\r\n\t\t}, (error)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(error, \"Error in loading educational details.\");\r\n\t\t});\r\n\t}\r\n\r\n\tloadLog(global_id){\r\n\r\n\t\tvar tmpList=[];\r\n\t\tvar query = EntityQuery().from(\"EDUCATION_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\tvar _user = r.CREATED_BY;\r\n\t\t\t\t\tvar _date = new Date(r.CREATED_DT);\r\n\t\t\t\t\ttmpList.push({\r\n\t\t\t\t\t\tuser: _user,\r\n\t\t\t\t\t\tdate: _date\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(r.LAST_UPDATED_DT != null){\r\n\t\t\t\t\tvar _user = r.LAST_UPDATED_BY;\r\n\t\t\t\t\tvar _date = r.LAST_UPDATED_DT;\r\n\t\t\t\t\ttmpList.push({\r\n\t\t\t\t\t\tuser: _user,\r\n\t\t\t\t\t\tdate: _date\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\ttmpList.sort(this.OrderByDate);\r\n\t\t\tvar LastIndex = tmpList.length-1;\r\n\t\t\tif(tmpList.length>0){\r\n\t\t\t\tthis.lblCreatedBy = tmpList[0].user + ' ' + moment.utc(tmpList[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpList.length>1){\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpList[LastIndex].user + ' ' + moment.utc(tmpList[LastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tOrderByDate(a, b){\r\n\t\tif(a.date > b.date)\r\n\t\t\treturn 1;\r\n\t\tif(a.date < b.date)\r\n\t\t\treturn -1;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tbtnAdd(){\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis._disableBtnAdd = true;\t\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT.status=\"ADD\";\r\n\t}\r\n\r\n\tbtnEdit(education){\t\t\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis._disableBtnAdd = true;\t\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model = {\r\n\t\t\teducation_id: education.education_id,\r\n\t\t\teducation_level: education.education_level,\r\n\t\t\tstart_yr: education.start_yr+\"\",\r\n\t\t\tend_yr: education.end_yr+\"\",\r\n\t\t\tschool_cd: education.school_cd,\r\n\t\t\tcourse: education.course,\r\n\t\t\thonor_awards: education.honor_awards,\r\n\t\t\tcompleted_fl: education.completed_fl==\"1\"\r\n\t\t};\r\n\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT.status=\"EDIT\";\r\n\t}\r\n\r\n\tclearData(){\r\n\t\tsettings.isNavigating = false;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableTable = false;\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model={};\r\n\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT.status=\"\";\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\tvar strValidation=\"\";\r\n\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.education_level == undefined || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.education_level == null || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.education_level.length==0){\r\n\t\t\tstrValidation+=\"No level specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr == undefined || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr == null || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr.length==0){\r\n\t\t\tstrValidation+=\"No start year specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr == undefined || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr == null || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr.length==0){\r\n\t\t\tstrValidation+=\"No end year specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.school_cd == undefined || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.school_cd == null || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.school_cd.length==0){\r\n\t\t\tstrValidation+=\"No school specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.course == undefined || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.course == null || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.course.length==0){\r\n\t\t\tstrValidation+=\"No degree/major specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr != undefined && this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr != null && this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr.length>0){\r\n\t\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr != undefined && this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr != null && this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr.length>0){\t\t\t\t\r\n\t\t\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr> this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr)\r\n\t\t\t\t{\r\n\t\t\t\t\tstrValidation+=\"Start year cannot be greater than end year.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.status==\"ADD\")\r\n\t\t\t{\r\n\t\t\t\tthis.insert();\r\n\t\t\t}else if(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.status==\"EDIT\")\r\n\t\t\t{\r\n\t\t\t\tthis.update();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinsert(){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"EDUCATION_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"EDUCATION_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tvar Max=1;\r\n\t\t\tif(querySuccess.results.length>0)\r\n\t\t\t{\r\n\t\t\t\tMax = querySuccess.results[0].EDUCATION_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar education_trx = {\r\n\t\t\t\tGLOBAL_INDIV_ID: this.obj_personnel.global_indiv_id,\r\n\t\t\t\tSTART_YR: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr,\r\n\t\t\t\tCOURSE: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.course,\r\n\t\t\t\tEDUCATION_ID: Max,\r\n\t\t\t\tEDUCATION_LEVEL: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.education_level,\r\n\t\t\t\tEND_YR: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr,\r\n\t\t\t\tSCHOOL_CD: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.school_cd,\r\n\t\t\t\tYR_GRADUATED: 0,\r\n\t\t\t\tHONOR_AWARDS: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.honor_awards,\r\n\t\t\t\tCOMPLETED_FL: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.completed_fl?1:0,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"EDUCATION_TRX\", education_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadMain_Educational(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearData();\r\n\t\t\t},(saveError)=>{\r\n\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity!= null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", saveError);\r\n\t\t\t});\r\n\t\t});\t\t\r\n\t}\r\n\r\n\tupdate(){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"EDUCATION_TRX\")\r\n\t\t\t\t\t.where(\"EDUCATION_ID\", \"==\", this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.education_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tif(querySuccess.results.length==0){\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", \"Error in query data to be updated\");\r\n\t\t\t}\r\n\t\t\tquerySuccess.results[0].START_YR = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr;\r\n\t\t\tquerySuccess.results[0].COURSE = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.course;\r\n\t\t\tquerySuccess.results[0].EDUCATION_LEVEL = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.education_level;\r\n\t\t\tquerySuccess.results[0].END_YR = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr;\r\n\t\t\tquerySuccess.results[0].SCHOOL_CD = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.school_cd;\r\n\t\t\tquerySuccess.results[0].HONOR_AWARDS = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.honor_awards;\r\n\t\t\tquerySuccess.results[0].COMPLETED_FL = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.completed_fl?1:0;\r\n\t\t\tquerySuccess.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\tquerySuccess.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((updateSuccess)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\tthis.loadMain_Educational(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearData();\r\n\t\t\t}, (updateError)=>{\r\n\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", updateError);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tbtnRemove(educ)\r\n\t{\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the educational achievement\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n  \t\t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from(\"EDUCATION_TRX\")\r\n  \t\t\t\t\t\t\t\t.where(\"EDUCATION_ID\", \"==\", educ.education_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n  \t\t\t\t\t\tif(querySuccess.results.length==0){\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\",\"No to-be-remove record found.\");\r\n  \t\t\t\t\t\t}\r\n  \t\t\t\t\t\tquerySuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((removeSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The educational achievement was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadMain_Educational(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t\t\t\tthis.clearData();\r\n  \t\t\t\t\t\t},(removeError)=>{\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(removeError, \"Error in removing educational achievement.\");\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\nimport {OrderByDate} from '../../helpers';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class main_language{\r\n\r\n\tobj_personnel = null;\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\t_disableForm=true;\r\n\t_disableTable=false;\t\r\n\tformStatus=\"\";\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\t\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_language_clicked.push((val)=>{\r\n\t\t\tthis.loadLangDialect(val);\r\n\t\t\tthis.clearField();\r\n\t\t});\r\n\t}\r\n\r\n\tloadLangDialect(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"LANG_DIALECT_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\",\"==\", global_indiv_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar tmp=[];\r\n\t\t\tvar tmpLog=[];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tlang_dialect_id: r.LANG_DIALECT_ID,\r\n\t\t\t\t\tlang_dialect_cd: r.LANG_DIALECT_CD,\r\n\t\t\t\t\tread_rating_cd: r.READ_RATING_CD,\r\n\t\t\t\t\tspeak_rating_cd: r.SPEAK_RATING_CD,\r\n\t\t\t\t\twrite_rating_cd: r.WRITE_RATING_CD,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(r.CREATED_BY!=null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Language/Dialect record has been loaded...\");\r\n\t\t\tthis.obj_personnel.LANGUAGE_DIALECT.list = tmp;\r\n\t\t\tif(tmpLog.length>0){\r\n\r\n\t\t\t\ttmpLog.sort(OrderByDate);\r\n\t\t\t\tthis.lblCreatedBy = tmpLog[0].user + \" \" + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tvar lastIndex = tmpLog.length-1;\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpLog[lastIndex].user + \" \" + moment.utc(tmpLog[lastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\t\t\t\t\t\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying language/dialect record.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tbtnAdd(){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"ADD\";\r\n\t}\r\n\r\n\tbtnEdit(item){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true; \r\n\t\tthis.formStatus = \"EDIT\";\r\n\t\tthis.obj_personnel.LANGUAGE_DIALECT.model.lang_dialect_id = item.lang_dialect_id;\r\n\t\tthis.obj_personnel.LANGUAGE_DIALECT.model.lang_dialect_cd = item.lang_dialect_cd;\r\n\t\tthis.obj_personnel.LANGUAGE_DIALECT.model.speak_rating_cd = item.speak_rating_cd;\r\n\t\tthis.obj_personnel.LANGUAGE_DIALECT.model.write_rating_cd = item.write_rating_cd;\r\n\t\tthis.obj_personnel.LANGUAGE_DIALECT.model.read_rating_cd = item.read_rating_cd;\r\n\t}\r\n\r\n\tbtnRemove(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the record?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\t//alert(\"Confirmed delete.\");\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('LANG_DIALECT_TRX').where('LANG_DIALECT_ID', '==', item.lang_dialect_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The record was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadLangDialect(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.clearField();\r\n  \t\t\t\t\t\t\t\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(error, \"Error in removing address.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t\t});\r\n\t}\r\n\r\n\tclearField(){\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableTable = false;\r\n\t\tthis.formStatus = \"\";\r\n\t\tthis.obj_personnel.LANGUAGE_DIALECT.model.lang_dialect_id = 0;\r\n\t\tthis.obj_personnel.LANGUAGE_DIALECT.model.lang_dialect_cd = \"\";\r\n\t\tthis.obj_personnel.LANGUAGE_DIALECT.model.speak_rating_cd = \"\";\r\n\t\tthis.obj_personnel.LANGUAGE_DIALECT.model.write_rating_cd = \"\";\r\n\t\tthis.obj_personnel.LANGUAGE_DIALECT.model.read_rating_cd = \"\";\r\n\r\n\r\n\t\t// if(this.obj_personnel.LANGUAGE.length>0){\r\n\t\t// \tvar language_cd = this.obj_personnel.LANGUAGE[0];\t\t\t\r\n\t\t// \tthis.obj_personnel.LANGUAGE_DIALECT.model.lang_dialect_cd = language_cd.value;\r\n\t\t// }\r\n\r\n\t\t// if(this.obj_personnel.RATING.length>0){\r\n\t\t// \tvar rating_cd = this.obj_personnel.RATING[0];\r\n\t\t// \tthis.obj_personnel.LANGUAGE_DIALECT.model.speak_rating_cd = rating_cd.value;\r\n\t\t// \tthis.obj_personnel.LANGUAGE_DIALECT.model.write_rating_cd = rating_cd.value;\r\n\t\t// \tthis.obj_personnel.LANGUAGE_DIALECT.model.read_rating_cd = rating_cd.value;\r\n\t\t// }\t\t\r\n\t}\r\n\r\n\tvalidate(){\r\n\r\n\t\tvar strValidation = \"\";\r\n\r\n\t\tif(this.obj_personnel.LANGUAGE_DIALECT.model.lang_dialect_cd == undefined || this.obj_personnel.LANGUAGE_DIALECT.model.lang_dialect_cd == null || this.obj_personnel.LANGUAGE_DIALECT.model.lang_dialect_cd.length==0){\r\n\t\t\tstrValidation+=\"No language specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.LANGUAGE_DIALECT.model.write_rating_cd == undefined || this.obj_personnel.LANGUAGE_DIALECT.model.write_rating_cd == null || this.obj_personnel.LANGUAGE_DIALECT.model.write_rating_cd.length==0){\r\n\t\t\tstrValidation+=\"No write rating specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.LANGUAGE_DIALECT.model.speak_rating_cd == undefined || this.obj_personnel.LANGUAGE_DIALECT.model.speak_rating_cd == null || this.obj_personnel.LANGUAGE_DIALECT.model.speak_rating_cd.length==0){\r\n\t\t\tstrValidation+=\"No speak rating specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.LANGUAGE_DIALECT.model.read_rating_cd == undefined || this.obj_personnel.LANGUAGE_DIALECT.model.read_rating_cd == null || this.obj_personnel.LANGUAGE_DIALECT.model.read_rating_cd.length==0){\r\n\t\t\tstrValidation+=\"No read rating specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(strValidation.length==0){\r\n\t\t\tvar lang_dialect = this.obj_personnel.LANGUAGE_DIALECT.list.find((x)=>{\r\n\t\t\t\treturn x.lang_dialect_cd == this.obj_personnel.LANGUAGE_DIALECT.model.lang_dialect_cd;\r\n\t\t\t});\r\n\t\t\tif(lang_dialect != null){\r\n\t\t\t\tif(this.formStatus == \"ADD\"){\r\n\t\t\t\t\tstrValidation+=\"Duplicate entries are not allowed.<br/>\";\r\n\t\t\t\t}else if(this.formStatus == \"EDIT\"){\r\n\t\t\t\t\tif(lang_dialect.lang_dialect_id != this.obj_personnel.LANGUAGE_DIALECT.model.lang_dialect_id){\r\n\t\t\t\t\t\tstrValidation+=\"Duplicate entries are not allowed.<br/>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.formStatus == \"ADD\"){\r\n\t\t\t\tthis.saveLangDialect(this.obj_personnel.global_indiv_id);\r\n\t\t\t}else if(this.formStatus == \"EDIT\"){\r\n\t\t\t\tthis.updateLangDialect(this.obj_personnel.LANGUAGE_DIALECT.model.lang_dialect_id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsaveLangDialect(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"LANG_DIALECT_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"LANG_DIALECT_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar maxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].LANG_DIALECT_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar lang_dialect_trx = {\r\n\t\t\t\tLANG_DIALECT_ID: maxId,\r\n\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\tLANG_DIALECT_CD: this.obj_personnel.LANGUAGE_DIALECT.model.lang_dialect_cd,\r\n\t\t\t\tWRITE_RATING_CD: this.obj_personnel.LANGUAGE_DIALECT.model.write_rating_cd,\r\n\t\t\t\tSPEAK_RATING_CD: this.obj_personnel.LANGUAGE_DIALECT.model.speak_rating_cd,\r\n\t\t\t\tREAD_RATING_CD: this.obj_personnel.LANGUAGE_DIALECT.model.read_rating_cd,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tconsole.log(lang_dialect_trx);\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"LANG_DIALECT_TRX\", lang_dialect_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadLangDialect(global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in saving language/dialect...\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying language/dialect id.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tupdateLangDialect(lang_dialect_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"LANG_DIALECT_TRX\")\r\n\t\t\t\t\t.where(\"LANG_DIALECT_ID\", \"==\", lang_dialect_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].LANG_DIALECT_CD = this.obj_personnel.LANGUAGE_DIALECT.model.lang_dialect_cd;\r\n\t\t\ts1.results[0].WRITE_RATING_CD = this.obj_personnel.LANGUAGE_DIALECT.model.write_rating_cd;\r\n\t\t\ts1.results[0].SPEAK_RATING_CD = this.obj_personnel.LANGUAGE_DIALECT.model.speak_rating_cd;\r\n\t\t\ts1.results[0].READ_RATING_CD = this.obj_personnel.LANGUAGE_DIALECT.model.read_rating_cd;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\tthis.loadLangDialect(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in saving changes.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e2)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e2, \"Error in querying language/dialect info.\");\r\n\t\t});\r\n\t}\r\n\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\nimport {OrderByDate} from '../../helpers';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class main_skills {\r\n\r\n\tobj_personnel = null;\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\t_disableForm=true;\r\n\t_disableTable=false;\t\r\n\tformStatus=\"\";\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_skills_clicked.push((val)=>{\r\n\t\t\tthis.loadSkillTalent(val);\r\n\t\t});\r\n\t}\r\n\r\n\tloadSkillTalent(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"SKILL_TALENT_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar tmp=[];\r\n\t\t\tvar tmpLog=[];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\r\n\t\t\t\tvar skill_talent_cd = this.obj_personnel.SKILL_TALENT.find((x)=>{\r\n\t\t\t\t\treturn x.value == r.SKILL_TALENT_CD;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar rating_cd = this.obj_personnel.RATING.find((x)=>{\r\n\t\t\t\t\treturn x.value == r.RATING_CD;\r\n\t\t\t\t});\r\n\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tskill_talent_id: r.SKILL_TALENT_ID,\t\t\t\t\t\r\n\t\t\t\t\tskill_talent_cd: r.SKILL_TALENT_CD,\r\n\t\t\t\t\tskill_talent_nm: skill_talent_cd.text,\t\t\t\t\t\r\n\t\t\t\t\trating_cd: r.RATING_CD,\r\n\t\t\t\t\trating_nm: rating_cd.text\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Skills/Talents has been loaded.\");\r\n\t\t\tthis.obj_personnel.SKILLS.list = tmp;\r\n\t\t\ttmpLog.sort(OrderByDate);\r\n\t\t\tif(tmpLog.length>0){\r\n\r\n\t\t\t\tthis.lblCreatedBy = tmpLog[0].user + \" \" + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tvar lastIndex = tmpLog.length-1;\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpLog[lastIndex].user + \" \" + moment.utc(tmpLog[lastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t},(e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying skill/talent record.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tbtnAdd(){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"ADD\";\r\n\t}\r\n\r\n\tbtnEdit(item){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"EDIT\";\r\n\t\tthis.obj_personnel.SKILLS.model.skill_talent_id = item.skill_talent_id;\r\n\t\tthis.obj_personnel.SKILLS.model.skill_talent_cd = item.skill_talent_cd;\r\n\t\tthis.obj_personnel.SKILLS.model.rating_cd = item.rating_cd;\r\n\t\t// var rating_cd = this.obj_personnel.RATING.find((x)=>{\r\n\t\t// \treturn x.value == item.rating_cd;\r\n\t\t// });\r\n\t\t// if(rating_cd != null){\r\n\t\t// \tthis.obj_personnel.SKILLS.model.rating_cd = rating_cd.value;\r\n\t\t// }else{\r\n\t\t// \tthis.obj_personnel.SKILLS.model.rating_cd = item.rating_cd;\r\n\t\t// }\r\n\t}\r\n\r\n\tbtnRemove(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the record?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\t//alert(\"Confirmed delete.\");\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('SKILL_TALENT_TRX').where('SKILL_TALENT_ID', '==', item.skill_talent_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The record was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadSkillTalent(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.clearField();\r\n  \t\t\t\t\t\t\t\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing address.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t\t});\r\n\t}\r\n\r\n\tclearField(){\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableTable = false;\r\n\t\tthis.formStatus = \"\";\r\n\t\tif(this.obj_personnel.SKILL_TALENT.length>0){\r\n\t\t\tthis.obj_personnel.SKILLS.model.skill_talent_cd = this.obj_personnel.SKILL_TALENT[0].value;\r\n\t\t}\r\n\t\tif(this.obj_personnel.RATING.length>0){\r\n\t\t\tthis.obj_personnel.SKILLS.model.rating_cd = this.obj_personnel.RATING[0].value;\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(){\r\n\r\n\t\tvar strValidation = \"\";\r\n\t\tif(this.obj_personnel.SKILLS.model.skill_talent_cd == undefined || this.obj_personnel.SKILLS.model.skill_talent_cd == null || this.obj_personnel.SKILLS.model.skill_talent_cd.length==0){\r\n\t\t\tstrValidation+=\"No Skill/Talent specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.SKILLS.model.rating_cd == undefined || this.obj_personnel.SKILLS.model.rating_cd == null || this.obj_personnel.SKILLS.model.rating_cd.length==0){\r\n\t\t\tstrValidation+=\"No rating specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(strValidation.length==0){\r\n\r\n\t\t\tvar skill_talent = this.obj_personnel.SKILLS.list.find((x)=>{\r\n\t\t\t\t\treturn x.skill_talent_cd == this.obj_personnel.SKILLS.model.skill_talent_cd;\r\n\t\t\t\t});\r\n\t\t\tif(skill_talent != null){\r\n\t\t\t\tif(this.formStatus == \"ADD\"){\r\n\t\t\t\t\tstrValidation+=\"Duplicate entries are not allowed.<br/>\";\r\n\t\t\t\t}else if(this.formStatus == \"EDIT\"){\r\n\t\t\t\t\tif(this.obj_personnel.SKILLS.model.skill_talent_id != skill_talent.skill_talent_id){\r\n\t\t\t\t\t\tstrValidation+=\"Duplicate entries are not allowed.<br/>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.formStatus==\"ADD\"){\r\n\t\t\t\tthis.saveSkillTalent(this.obj_personnel.global_indiv_id);\r\n\t\t\t}else if(this.formStatus==\"EDIT\"){\r\n\t\t\t\tthis.updateSkillTalent(this.obj_personnel.SKILLS.model.skill_talent_id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsaveSkillTalent(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"SKILL_TALENT_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"SKILL_TALENT_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar maxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].SKILL_TALENT_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar skill_talent = {\r\n\t\t\t\tSKILL_TALENT_ID: maxId,\r\n\t\t\t\tGLOBAL_ID: global_id,\r\n\t\t\t\tSKILL_TALENT_CD: this.obj_personnel.SKILLS.model.skill_talent_cd,\r\n\t\t\t\tRATING_CD: this.obj_personnel.SKILLS.model.rating_cd,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"SKILL_TALENT_TRX\", skill_talent);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadSkillTalent(global_id);\r\n\t\t\t\tthis.clearField();\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in saving skill/talent record.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying skill/talent id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdateSkillTalent(skill_talent_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"SKILL_TALENT_TRX\")\r\n\t\t\t\t\t.where(\"SKILL_TALENT_ID\", \"==\", skill_talent_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].SKILL_TALENT_CD = this.obj_personnel.SKILLS.model.skill_talent_cd;\r\n\t\t\ts1.results[0].RATING_CD = this.obj_personnel.SKILLS.model.rating_cd;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadSkillTalent(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in updating skill/talent record.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying skill/talent record.\");\r\n\t\t});\r\n\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\n\r\n@inject(DialogService, obj_personnel, toastr)\r\nexport class miscellaneous\r\n{\r\n\tobj_personnel = null;\r\n\tconstructor(dialogService, obj_personnel, toastr){\r\n\t\tthis.dialogService = dialogService;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.obj_personnel.OBSERVERS.ppid_dialog.push((all)=>{\t\t\t\t\r\n\t\t\tthis.CloseSearch(all);\r\n\t\t});\t\r\n\t}\r\n\t\r\n\tCloseSearch(global_id){\t\t\r\n\t\t//alert(\"miscellaneous:\"+global_id);\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\n\r\n@inject(DialogService, obj_personnel, toastr)\r\nexport class relative\r\n{\r\n\tobj_personnel = null;\r\n\t_tab0_loaded = false;\r\n\t_404_img = \"/images/404.png\";\r\n\tconstructor(dialogService, obj_personnel, toastr){\r\n\t\tthis.dialogService = dialogService;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\t//this.obj_personnel.OBSERVERS.ppid_dialog.push((all)=>{\t\t\t\t\r\n\t\t//\tthis.CloseSearch(all);\r\n\t\t//});\r\n\t\t// this.obj_personnel.OBSERVERS.tab_changed.push((tab_num,global_id)=>{\r\n\t\t// \tthis.LoadData(tab_num, global_id);\r\n\t\t// });\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num == 1){\r\n\t\t\t\t$(\"#tab0\").addClass(\"active\");\r\n\t\t\t\t$(\"#tabs1\").removeClass(\"active\");\r\n\t\t\t\t$(\"#tabs2\").removeClass(\"active\");\r\n\t\t\t\t$(\"#tabs3\").removeClass(\"active\");\r\n\t\t\t\t$(\"#tabs4\").removeClass(\"active\");\r\n\t\t\t\t$(\"#relative\").find(\".active\").removeClass(\"active\");\r\n\t\t\t\t$(\"#relative_parent\").addClass(\"active\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tclickTab_relative(tab_num){\r\n\t\t\r\n\t\tif(this.obj_personnel.global_indiv_id == undefined || this.obj_personnel.global_indiv_id == null || this.obj_personnel.global_indiv_id.length==0)\r\n\t\t\treturn;\r\n\r\n\t\tswitch(tab_num){\r\n\t\t\tcase 0: \r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading parents' info...\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading siblings' info...\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading spouse's info...\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading children list...\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4:\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading emergency contacts...\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\t\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\nimport {OrderByDate} from '../../helpers';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class relative_children{\r\n\r\n\tobj_personnel = null;\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\t_disableForm=true;\r\n\t_disableTable=false;\r\n\t_disableDeceasedDt=true;\r\n\tformStatus=\"\";\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num==3){\r\n\t\t\t\t$(\"#children_birth_dt\").datepicker();\r\n\t\t\t\t$(\"#children_deceased_dt\").datepicker();\r\n\t\t\t\tthis.loadChildren(global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tloadChildren(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar pred1 = breeze.Predicate.create(\"GLOBAL_INDIV_ID\", \"==\", global_indiv_id);\r\n\t\tvar pred2 = breeze.Predicate.create(\"IN_CASE_OF_EMERGENCY_FL\", \"!=\", \"1\");\r\n\t\tvar orPred = [];\r\n\t\t_.each(this.obj_personnel.RELATIONSHIP, (relation)=>{\r\n\t\t\tif(relation.group==\"CHILDREN\"){\r\n\t\t\t\torPred.push(breeze.Predicate.create(\"RELATIVE_CD\", \"==\", relation.value));\r\n\t\t\t}\r\n\t\t});\r\n\t\tvar _orPred = breeze.Predicate.or(orPred);\r\n\t\tvar finalPred = breeze.Predicate.and([pred1, pred2, _orPred]);\r\n\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(finalPred);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar tmp = [];\r\n\t\t\tvar tmpLog=[];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\t\t\t\tvar deceased_dt = null;\r\n\t\t\t\tif(moment(r.DECEASED_DT).isValid()){\t\t\t\t\t\r\n\t\t\t\t\tdeceased_dt = moment.utc(r.DECEASED_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\tif(deceased_dt == \"01/01/0001\"){\r\n\t\t\t\t\t\tdeceased_dt = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar status = null;\r\n\t\t\t\tswitch(r.DEPENDENT_FL){\r\n\t\t\t\t\tcase \"0\": status = \"Dependent\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"1\": status = \"Deceased\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\trelative_id: r.RELATIVE_ID,\r\n\t\t\t\t\tgiven_name: r.GIVEN_NAME,\r\n\t\t\t\t\tmiddle_name: r.MIDDLE_NAME,\r\n\t\t\t\t\tlast_name: r.LAST_NAME,\r\n\t\t\t\t\tbirth_dt: moment.utc(r.BIRTH_DT).format(\"MM/DD/YYYY\"),\r\n\t\t\t\t\tage: this.computeAge(moment.utc(r.BIRTH_DT).format(\"MM/DD/YYYY\")),\r\n\t\t\t\t\toccupation: r.OCCUPATION,\r\n\t\t\t\t\temployer: r.EMPLOYER,\r\n\t\t\t\t\tdependent_fl: r.DEPENDENT_FL,\r\n\t\t\t\t\tstatus: status,\r\n\t\t\t\t\tdeceased_dt: deceased_dt,\r\n\t\t\t\t\trelative_cd: r.RELATIVE_CD\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconsole.log(tmp);\r\n\t\t\tthis.obj_personnel.RELATIVE.children.list = tmp;\r\n\t\t\ttmpLog.sort(OrderByDate);\r\n\t\t\tvar LastIndex = tmpLog.length-1;\r\n\t\t\tif(tmpLog.length>0){\r\n\t\t\t\tthis.lblCreatedBy = tmpLog[0].user + ' ' + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpLog[LastIndex].user + ' ' + moment.utc(tmpLog[LastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Relative info has been loaded...\");\r\n\t\t\tsettings.isNavigating = false;\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying children list.\");\r\n\t\t});\r\n\t}\r\n\r\n\tcheckChange(bit){\r\n \r\n\t\tswitch(bit){\r\n\t\t\tcase 0:\r\n\t\t\t\t$(\"#children_deceased\").prop(\"checked\", false);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\t$(\"#children_dependent\").prop(\"checked\", false);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tvar isChecked_dependent = $('#children_dependent').is(\":checked\");\r\n\t\tvar isChecked_deceased = $(\"#children_deceased\").is(\":checked\");\r\n\t\tif(isChecked_dependent){\r\n\t\t\tthis.obj_personnel.RELATIVE.children.model.dependent_fl = \"0\";\r\n\t\t\tthis.obj_personnel.RELATIVE.children.model.deceased_dt = null;\r\n\t\t\t$(\"#deceased_dt\").val(\"\");\r\n\t\t\tthis._disableDeceasedDt = true;\r\n\t\t}else if(isChecked_deceased){\r\n\t\t\tthis.obj_personnel.RELATIVE.children.model.dependent_fl = \"1\";\r\n\t\t\tthis._disableDeceasedDt = false;\r\n\t\t}else if(isChecked_dependent == false && isChecked_deceased == false){\r\n\t\t\tthis._disableDeceasedDt = true;\r\n\t\t\tthis.obj_personnel.RELATIVE.children.model.dependent_fl = null;\t\t\t\t\r\n\t\t\tthis.obj_personnel.RELATIVE.children.model.deceased_dt = null;\r\n\t\t\t$(\"#deceased_dt\").val(\"\");\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tcomputeAge(dateString){\r\n\t\tif(dateString == null || dateString.length==0)\r\n\t\t\treturn;\r\n\t\tvar today = new Date();\r\n\t\tvar birthDate = new Date(dateString);\r\n\t\tvar age = today.getFullYear() - birthDate.getFullYear();\r\n\t\tvar m = today.getMonth() - birthDate.getMonth();\r\n\t\tif (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\r\n\t\t\tage--;\r\n\t\t}\r\n\t\treturn age;\t\r\n\t}\r\n\r\n\tbtnAdd(){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableTable = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis.formStatus = \"ADD\";\r\n\t}\r\n\r\n\tbtnEdit(item){\r\n\t\tconsole.log(item);\r\n\r\n\t\tthis.formStatus=\"EDIT\";\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableTable = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis.obj_personnel.RELATIVE.children.model.relative_id = item.relative_id;\r\n\t\tthis.obj_personnel.RELATIVE.children.model.last_name = item.last_name;\r\n\t\tthis.obj_personnel.RELATIVE.children.model.given_name = item.given_name;\r\n\t\tthis.obj_personnel.RELATIVE.children.model.middle_name = item.middle_name;\r\n\t\tthis.obj_personnel.RELATIVE.children.model.birth_dt = item.birth_dt;\r\n\t\tthis.obj_personnel.RELATIVE.children.model.age = item.age;\r\n\t\tthis.obj_personnel.RELATIVE.children.model.relative_cd = item.relative_cd;\r\n\t\tif(item.dependent_fl != null){\r\n\t\t\tswitch(item.dependent_fl){\r\n\t\t\t\tcase \"0\":\r\n\t\t\t\t\t$(\"#children_dependent\").prop(\"checked\", true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"1\":\r\n\t\t\t\t\t$(\"#children_deceased\").prop(\"checked\", true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tthis.checkChange(this.obj_personnel.RELATIVE.children.model.dependent_fl);\r\n\t\t\tthis.obj_personnel.RELATIVE.children.model.deceased_dt = item.deceased_dt;\r\n\t\t}\r\n\t}\r\n\r\n\tbtnRemove(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the record?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('RELATIVE_TRX').where('RELATIVE_ID', '==', item.relative_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The record was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadChildren(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing address.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tclearField(){\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableTable = false;\r\n\t\t$(\"#children_deceased\").prop(\"checked\", false);\r\n\t\t$(\"#children_dependent\").prop(\"checked\", false);\r\n\t\tthis.obj_personnel.RELATIVE.children.model = {};\t\t\r\n\t\tthis.formStatus = \"\";\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\tvar strValidation = \"\";\r\n\t\tthis.obj_personnel.RELATIVE.children.model.birth_dt = $(\"#children_birth_dt\").val();\r\n\t\tthis.obj_personnel.RELATIVE.children.model.deceased_dt = $(\"#children_deceased_dt\").val();\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.children.model.last_name == undefined || this.obj_personnel.RELATIVE.children.model.last_name == null || this.obj_personnel.RELATIVE.children.model.last_name.length == 0){\r\n\t\t\tstrValidation+=\"No last name specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.children.model.given_name == undefined || this.obj_personnel.RELATIVE.children.model.given_name == null || this.obj_personnel.RELATIVE.children.model.given_name.length == 0){\r\n\t\t\tstrValidation+=\"No given name specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.children.model.birth_dt != undefined && this.obj_personnel.RELATIVE.children.model.birth_dt != null && this.obj_personnel.RELATIVE.children.model.birth_dt.length>0){\r\n\t\t\tif(!moment(this.obj_personnel.RELATIVE.children.model.birth_dt).isValid()){\r\n\t\t\t\tstrValidation+=\"Invalid birth date.<br/>\";\r\n\t\t\t}else{\r\n\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.children.model.birth_dt);\r\n\t\t\t\tvar d2 = new Date();\r\n\t\t\t\tif(d1>d2){\r\n\t\t\t\t\tstrValidation+=\"Birth date cannot be greater than date today.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tstrValidation+=\"No birth date specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.children.model.dependent_fl == \"1\"){\r\n\t\t\tif(this.obj_personnel.RELATIVE.children.model.deceased_dt.length>0){\r\n\t\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.children.model.deceased_dt)).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid deceased date. <br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.children.model.deceased_dt);\r\n\t\t\t\t\tvar d2 = new Date();\r\n\t\t\t\t\tif(d1>d2){\r\n\t\t\t\t\t\tstrValidation+=\"Deceased date cannot be greater than date today.<br/>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// else{\r\n\t\t\t// \tstrValidation+=\"[Mother] No deceased date specified.<br/>\";\r\n\t\t\t// }\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.children.model.relative_cd == undefined || this.obj_personnel.RELATIVE.children.model.relative_cd == null || this.obj_personnel.RELATIVE.children.model.relative_cd.length ==0){\r\n\t\t\tstrValidation+=\"No relationship specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.formStatus==\"ADD\"){\r\n\t\t\t\tthis.save(this.obj_personnel.global_indiv_id);\r\n\t\t\t}else if(this.formStatus==\"EDIT\"){\r\n\t\t\t\tthis.update(this.obj_personnel.RELATIVE.children.model.relative_id);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\t\r\n\r\n\tsave(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar birth_dt = new Date(moment(this.obj_personnel.RELATIVE.children.model.birth_dt).add(8, \"hours\"));\r\n\t\tvar deceased_dt = null;\r\n\r\n\t\tif(moment(this.obj_personnel.RELATIVE.children.model.deceased_dt).isValid()){\r\n\t\t\tdeceased_dt = new Date(moment(this.obj_personnel.RELATIVE.children.model.deceased_dt).add(8, \"hours\"));\r\n\t\t}\r\n\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"RELATIVE_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\t\r\n\t\t\tvar MaxId = 1;\r\n\t\t\tif(s1.results.length==1){\r\n\t\t\t\tMaxId = s1.results[0].RELATIVE_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar relative_trx = {\r\n\t\t\t\tRELATIVE_ID: MaxId,\r\n\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\tGIVEN_NAME: this.obj_personnel.RELATIVE.children.model.given_name,\r\n\t\t\t\tMIDDLE_NAME: this.obj_personnel.RELATIVE.children.model.middle_name,\r\n\t\t\t\tLAST_NAME: this.obj_personnel.RELATIVE.children.model.last_name,\r\n\t\t\t\tBIRTH_DT: birth_dt,\r\n\t\t\t\tDEPENDENT_FL: this.obj_personnel.RELATIVE.children.model.dependent_fl,\r\n\t\t\t\tDECEASED_DT: deceased_dt,\r\n\t\t\t\tRELATIVE_CD: this.obj_personnel.RELATIVE.children.model.relative_cd,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\t\t\tconsole.log(relative_trx);\r\n\t\t\t\r\n\t\t\tvar entity = EntityManager().createEntity(\"RELATIVE_TRX\", relative_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadChildren(global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.error(e2, \"Error in saving children info.\");\r\n\t\t\t});\r\n\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(\"\", \"Error in querying relative id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdate(relative_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(\"RELATIVE_ID\", \"==\", relative_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar birth_dt = new Date(moment(this.obj_personnel.RELATIVE.children.model.birth_dt).add(8, \"hours\"));\r\n\r\n\t\t\tvar deceased_dt = null;\r\n\t\t\tif(moment(this.obj_personnel.RELATIVE.children.model.deceased_dt).isValid()){\r\n\t\t\t\tdeceased_dt = new Date(moment(this.obj_personnel.RELATIVE.children.model.deceased_dt).add(8, \"hours\"));\r\n\t\t\t}\r\n\r\n\t\t\ts1.results[0].LAST_NAME = this.obj_personnel.RELATIVE.children.model.last_name;\r\n\t\t\ts1.results[0].GIVEN_NAME = this.obj_personnel.RELATIVE.children.model.given_name;\r\n\t\t\ts1.results[0].MIDDLE_NAME = this.obj_personnel.RELATIVE.children.model.middle_name;\r\n\t\t\ts1.results[0].BIRTH_DT = birth_dt;\r\n\t\t\ts1.results[0].RELATIVE_CD = this.obj_personnel.RELATIVE.children.model.relative_cd;\r\n\t\t\ts1.results[0].DEPENDENT_FL = this.obj_personnel.RELATIVE.children.model.dependent_fl;\r\n\t\t\ts1.results[0].DECEASED_DT = deceased_dt;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\t\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\tthis.loadChildren(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\ttoastr.error(e2, \"Error in saving changes.\");\r\n\t\t\t});\r\n\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\ttoastr.error(e1, \"Error in querying relative info.\");\r\n\t\t});\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\nimport {OrderByDate} from '../../helpers';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class relative_emergency{\r\n\r\n\tobj_personnel = null;\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\t_disableForm=true;\r\n\t_disableTable=false;\t\r\n\tformStatus=\"\";\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num == 4){\r\n\t\t\t\tthis.loadEmergencyContacts(global_indiv_id);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tloadEmergencyContacts(global_indiv_id){\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar pred1 = breeze.Predicate.create(\"GLOBAL_INDIV_ID\", \"==\", global_indiv_id);\r\n\t\tvar pred2 = breeze.Predicate.create(\"IN_CASE_OF_EMERGENCY_FL\", \"==\", \"1\");\r\n\t\tvar finalPred = breeze.Predicate.and([pred1, pred2]);\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(finalPred)\r\n\t\t\t\t\t.orderBy(\"RELATIVE_ID\");\r\n\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\t// var tmp=[];\r\n\t\t\tthis.obj_personnel.RELATIVE.emergency_contact.list=[];\r\n\t\t\tvar tmpLog = [];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\r\n\t\t\t\tvar emergency={};\r\n\t\t\t\temergency.relative_id = r.RELATIVE_ID;\r\n\t\t\t\temergency.global_indiv_id = r.GLOBAL_INDIV_ID;\r\n\t\t\t\temergency.given_name = r.GIVEN_NAME;\r\n\t\t\t\temergency.middle_name = r.MIDDLE_NAME;\r\n\t\t\t\temergency.last_name = r.LAST_NAME;\r\n\t\t\t\temergency.phone_no = r.PHONE_NO;\r\n\t\t\t\temergency.relative_cd = r.RELATIVE_CD;\r\n\r\n\t\t\t\tquery = EntityQuery().from(\"RELATIVE_ADDR_TRX\")\r\n\t\t\t\t\t\t.where(\"RELATIVE_ID\", \"==\", r.RELATIVE_ID);\r\n\t\t\t\tEntityManager().executeQuery(query).then((s2)=>{\r\n\r\n\t\t\t\t\tif(s2.results.length>0){\r\n\t\t\t\t\t\temergency.relative_addr_id = s2.results[0].RELATIVE_ADDR_ID;\r\n\t\t\t\t\t\temergency.country_cd = s2.results[0].COUNTRY_CD;\r\n\t\t\t\t\t\temergency.region = s2.results[0].REGION;\r\n\t\t\t\t\t\temergency.state_province = s2.results[0].STATE_PROVINCE;\r\n\t\t\t\t\t\temergency.city_town = s2.results[0].CITY_TOWN;\r\n\t\t\t\t\t\temergency.district = s2.results[0].DISTRICT;\r\n\t\t\t\t\t\temergency.barangay = s2.results[0].BARANGAY;\r\n\t\t\t\t\t\temergency.sub_village = s2.results[0].SUB_VILLAGE;\r\n\t\t\t\t\t\temergency.block_lot = s2.results[0].BLOCK_LOT;\r\n\t\t\t\t\t\temergency.street_name = s2.results[0].STREET_NAME;\r\n\t\t\t\t\t\temergency.house_no = s2.results[0].HOUSE_NO;\r\n\t\t\t\t\t\temergency.bldg_name = s2.results[0].BLDG_NAME;\r\n\t\t\t\t\t\temergency.unit_no = s2.results[0].UNIT_NO;\r\n\t\t\t\t\t\temergency.zipcode = s2.results[0].ZIPCODE;\r\n\t\t\t\t\t\tvar strAddress=\"\";\r\n\t\t\t\t\t\tvar tmpAddress=[];\r\n\t\t\t\t\t\tif(s2.results[0].UNIT_NO != null && s2.results[0].UNIT_NO.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].UNIT_NO);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(s2.results[0].HOUSE_NO != null && s2.results[0].HOUSE_NO.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].HOUSE_NO);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].BLOCK_LOT != null && s2.results[0].BLOCK_LOT.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].BLOCK_LOT);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].BLDG_NAME != null && s2.results[0].BLDG_NAME.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].BLDG_NAME);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].STREET_NAME != null && s2.results[0].STREET_NAME.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].STREET_NAME);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].SUB_VILLAGE != null && s2.results[0].SUB_VILLAGE.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].SUB_VILLAGE);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].BARANGAY != null && s2.results[0].BARANGAY.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].BARANGAY);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].DISTRICT != null && s2.results[0].DISTRICT.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].DISTRICT);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].CITY_TOWN != null && s2.results[0].CITY_TOWN.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].CITY_TOWN);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].STATE_PROVINCE != null && s2.results[0].STATE_PROVINCE.length>0){\r\n\t\t\t\t\t\t\tvar text = this.obj_personnel.LOCATIONS.find((l)=>{\r\n\t\t\t\t\t\t\t\tif(l.value == s2.results[0].STATE_PROVINCE)\r\n\t\t\t\t\t\t\t\t\treturn l.text;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\ttmpAddress.push(text);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].REGION != null && s2.results[0].REGION.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].REGION);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].ZIPCODE != null && s2.results[0].ZIPCODE.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].ZIPCODE);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].COUNTRY_CD != null && s2.results[0].COUNTRY_CD.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].COUNTRY_CD);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(tmpAddress.length>0){\r\n\t\t\t\t\t\t\tstrAddress = tmpAddress.join(' ');\r\n\t\t\t\t\t\t\temergency.address = strAddress;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.obj_personnel.RELATIVE.emergency_contact.list.push(emergency);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\t\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t});\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"emergency contacts has been loaded...\");\r\n\t\t\t// this.obj_personnel.RELATIVE.emergency_contact.list = tmp;\r\n\t\t\ttmpLog.sort(OrderByDate);\r\n\t\t\tif(tmpLog.length >0){\r\n\r\n\t\t\t\tvar lastIndex = tmpLog.length-1;\r\n\t\t\t\tthis.lblCreatedBy = tmpLog[0].user + \" \" + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpLog[lastIndex].user + \" \" + moment.utc(tmpLog[lastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\t\t\tsettings.isNavigating = false;\r\n\r\n\t\t}, (e1)=>{\t\t\t\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying emergency contacts.\")\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tbtnAdd(){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"ADD\";\r\n\t}\r\n\r\n\tbtnEdit(item){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"EDIT\";\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.relative_id = item.relative_id;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.last_name = item.last_name;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.given_name = item.given_name;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.middle_name = item.middle_name;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.relative_cd = item.relative_cd;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.phone_no = item.phone_no;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.relative_addr_id = item.relative_addr_id;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.zipcode = item.zipcode;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.unit_no = item.unit_no;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.house_no = item.house_no;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.block_lot = item.block_lot;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.bldg_name = item.bldg_name;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.street_name = item.street_name;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.sub_village = item.sub_village;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.barangay = item.barangay;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.district = item.district;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.city_town = item.city_town;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.state_province = item.state_province;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.region = item.region;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.country_cd = item.country_cd;\r\n\t}\r\n\r\n\tbtnRemove(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the record?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('RELATIVE_ADDR_TRX').where('RELATIVE_ADDR_ID', '==', item.relative_addr_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\r\n  \t\t\t\t\t\t\tquery = EntityQuery().from(\"RELATIVE_TRX\").where(\"RELATIVE_ID\", \"==\", item.relative_id);\r\n  \t\t\t\t\t\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n  \t\t\t\t\t\t\t\ts1.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n  \t\t\t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\t\t\ttoastr.success(\"\", \"Record successfully removed.\");\r\n  \t\t\t\t\t\t\t\t\tthis.loadEmergencyContacts(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\t\t\tthis.clearField();\r\n  \t\t\t\t\t\t\t\t}, (e2)=>{\r\n  \t\t\t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\t\t\ttoastr.error(e2, \"Error in removing emergency contact.\");\r\n  \t\t\t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\t\t})\r\n\r\n  \t\t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(error, \"Error in removing address.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tdd_provinceChanged(){\t\t\r\n\t\tvar prov = this.obj_personnel.RELATIVE.emergency_contact.model.state_province;\r\n\t\tif(prov != undefined && prov != null && prov.length!=0){\r\n\t\t\tvar selectedProv = this.obj_personnel.PROVINCE.find((p)=>{\r\n\t\t\t\tif(p.value == prov){\r\n\t\t\t\t\treturn p;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(selectedProv != null){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.region = selectedProv.group;\r\n\t\t\t\tthis.dd_regionChanged();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdd_regionChanged(){\r\n\t\tvar reg = this.obj_personnel.RELATIVE.emergency_contact.model.region;\r\n\t\tif(reg != undefined && reg!=null && reg.length!=0)\r\n\t\t{\r\n\t\t\t//alert(this.obj_personnel.CONTACT.modelAddress.region);\r\n\t\t\tvar selectedRegion = this.obj_personnel.REGION.find((r)=>{\r\n\t\t\t\tif(r.value == reg)\r\n\t\t\t\t\treturn r;\r\n\t\t\t});\r\n\r\n\t\t\tif(selectedRegion != null)\r\n\t\t\t{\r\n\t\t\t\treg = this.obj_personnel.RELATIVE.emergency_contact.model.country_cd = selectedRegion.group;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tclearField(){\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableTable = false;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model={};\r\n\t\tthis.formStatus = \"\";\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\tvar strValidation = \"\";\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.emergency_contact.model.last_name == undefined || this.obj_personnel.RELATIVE.emergency_contact.model.last_name == null || this.obj_personnel.RELATIVE.emergency_contact.model.last_name.length==0){\r\n\t\t\tstrValidation+=\"No last name specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.emergency_contact.model.given_name == undefined || this.obj_personnel.RELATIVE.emergency_contact.model.given_name == null || this.obj_personnel.RELATIVE.emergency_contact.model.given_name.length==0){\r\n\t\t\tstrValidation+=\"No given name specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.emergency_contact.model.relative_cd == undefined || this.obj_personnel.RELATIVE.emergency_contact.model.relative_cd == null || this.obj_personnel.RELATIVE.emergency_contact.model.relative_cd.length==0){\r\n\t\t\tstrValidation+=\"No relationship specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.emergency_contact.model.phone_no == undefined || this.obj_personnel.RELATIVE.emergency_contact.model.phone_no == null || this.obj_personnel.RELATIVE.emergency_contact.model.phone_no.length==0){\r\n\t\t\tstrValidation+= \"No phone number specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.emergency_contact.model.country_cd == undefined || this.obj_personnel.RELATIVE.emergency_contact.model.country_cd == null || this.obj_personnel.RELATIVE.emergency_contact.model.country_cd.length==0){\r\n\t\t\tstrValidation+=\"No country specified. <br/>\";\r\n\t\t}\r\n\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.obj_personnel.RELATIVE.emergency_contact.model.relative_id != undefined && this.obj_personnel.RELATIVE.emergency_contact.model.relative_id != null && this.obj_personnel.RELATIVE.emergency_contact.model.relative_id>0){\r\n\t\t\t\tthis.updateInfo(this.obj_personnel.RELATIVE.emergency_contact.model.relative_id);\r\n\t\t\t}else{\r\n\t\t\t\tthis.saveInfo(this.obj_personnel.global_indiv_id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsaveInfo(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"RELATIVE_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar maxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].RELATIVE_ID+1;\t\t\t\t\r\n\t\t\t}\r\n\t\t\tvar relative = {\r\n\t\t\t\tRELATIVE_ID: maxId,\r\n\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\tGIVEN_NAME: this.obj_personnel.RELATIVE.emergency_contact.model.given_name,\r\n\t\t\t\tMIDDLE_NAME: this.obj_personnel.RELATIVE.emergency_contact.model.middle_name,\r\n\t\t\t\tLAST_NAME: this.obj_personnel.RELATIVE.emergency_contact.model.last_name,\r\n\t\t\t\tBIRTH_DT: \"01/01/0001\",\r\n\t\t\t\tPHONE_NO: this.obj_personnel.RELATIVE.emergency_contact.model.phone_no,\r\n\t\t\t\tIN_CASE_OF_EMERGENCY_FL: 1,\r\n\t\t\t\tRELATIVE_CD: this.obj_personnel.RELATIVE.emergency_contact.model.relative_cd,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"RELATIVE_TRX\", relative);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\tthis.saveAddress(maxId);\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tif(entity!=null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\tsettings.isNavigating=false;\r\n\t\t\t\ttoastr.error(e2, \"Error in saving emergency contact.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating=false;\r\n\t\t\ttoastr.error(e1, \"Error in querying relative id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdateInfo(relative_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(\"RELATIVE_ID\", \"==\", relative_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].GIVEN_NAME = this.obj_personnel.RELATIVE.emergency_contact.model.given_name;\r\n\t\t\ts1.results[0].MIDDLE_NAME = this.obj_personnel.RELATIVE.emergency_contact.model.middle_name;\r\n\t\t\ts1.results[0].LAST_NAME = this.obj_personnel.RELATIVE.emergency_contact.model.last_name;\r\n\t\t\ts1.results[0].PHONE_NO = this.obj_personnel.RELATIVE.emergency_contact.model.phone_no;\r\n\t\t\ts1.results[0].RELATIVE_CD = this.obj_personnel.RELATIVE.emergency_contact.model.relative_cd;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.emergency_contact.model.relative_addr_id != undefined && this.obj_personnel.RELATIVE.emergency_contact.model.relative_addr_id != null && this.obj_personnel.RELATIVE.emergency_contact.model.relative_addr_id>0){\r\n\t\t\t\t\tthis.updateAddress(this.obj_personnel.RELATIVE.emergency_contact.model.relative_addr_id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.saveAddress(relative_id);\r\n\t\t\t\t}\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in updating info.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying emergency contact info.\");\r\n\t\t});\r\n\t}\r\n\r\n\tsaveAddress(relative_id){\r\n\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8,\"hours\"));\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_ADDR_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"RELATIVE_ADDR_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar maxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].RELATIVE_ADDR_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar address_trx = {\r\n\t\t\t\tRELATIVE_ADDR_ID: maxId,\r\n\t\t\t\tRELATIVE_ID: relative_id,\r\n\t\t\t\tCOUNTRY_CD: this.obj_personnel.RELATIVE.emergency_contact.model.country_cd,\r\n\t\t\t\tREGION: this.obj_personnel.RELATIVE.emergency_contact.model.region,\r\n\t\t\t\tSTATE_PROVINCE: this.obj_personnel.RELATIVE.emergency_contact.model.state_province,\r\n\t\t\t\tCITY_TOWN: this.obj_personnel.RELATIVE.emergency_contact.model.city_town,\r\n\t\t\t\tDISTRICT: this.obj_personnel.RELATIVE.emergency_contact.model.district,\r\n\t\t\t\tBARANGAY: this.obj_personnel.RELATIVE.emergency_contact.model.barangay,\r\n\t\t\t\tSUB_VILLAGE: this.obj_personnel.RELATIVE.emergency_contact.model.sub_village,\r\n\t\t\t\tBLOCK_LOT: this.obj_personnel.RELATIVE.emergency_contact.model.block_lot,\r\n\t\t\t\tSTREET_NAME: this.obj_personnel.RELATIVE.emergency_contact.model.street_name,\r\n\t\t\t\tHOUSE_NO: this.obj_personnel.RELATIVE.emergency_contact.model.house_no,\r\n\t\t\t\tBLDG_NAME: this.obj_personnel.RELATIVE.emergency_contact.model.bldg_name,\r\n\t\t\t\tUNIT_NO: this.obj_personnel.RELATIVE.emergency_contact.model.unit_no,\r\n\t\t\t\tZIPCODE: this.obj_personnel.RELATIVE.emergency_contact.model.zipcode,\r\n\t\t\t\tPERMANENT_FL:0,\r\n\t\t\t\tMAILING_FL:0,\r\n\t\t\t\tPRESENT_FL:0,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"RELATIVE_ADDR_TRX\", address_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadEmergencyContacts(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.error(e2, \"Error in saving address.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in quering relative address id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdateAddress(relative_addr_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_ADDR_TRX\")\r\n\t\t\t\t\t.where(\"RELATIVE_ADDR_ID\", \"==\", relative_addr_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].COUNTRY_CD = this.obj_personnel.RELATIVE.emergency_contact.model.country_cd;\r\n\t\t\ts1.results[0].REGION = this.obj_personnel.RELATIVE.emergency_contact.model.region;\r\n\t\t\ts1.results[0].STATE_PROVINCE = this.obj_personnel.RELATIVE.emergency_contact.model.state_province;\r\n\t\t\ts1.results[0].CITY_TOWN = this.obj_personnel.RELATIVE.emergency_contact.model.city_town;\r\n\t\t\ts1.results[0].DISTRICT = this.obj_personnel.RELATIVE.emergency_contact.model.district;\r\n\t\t\ts1.results[0].BARANGAY = this.obj_personnel.RELATIVE.emergency_contact.model.barangay;\r\n\t\t\ts1.results[0].SUB_VILLAGE = this.obj_personnel.RELATIVE.emergency_contact.model.sub_village;\r\n\t\t\ts1.results[0].BLOCK_LOT = this.obj_personnel.RELATIVE.emergency_contact.model.block_lot;\t\t\t\r\n\t\t\ts1.results[0].STREET_NAME = this.obj_personnel.RELATIVE.emergency_contact.model.street_name;\r\n\t\t\ts1.results[0].HOUSE_NO = this.obj_personnel.RELATIVE.emergency_contact.model.house_no;\r\n\t\t\ts1.results[0].BLDG_NAME = this.obj_personnel.RELATIVE.emergency_contact.model.bldg_name;\r\n\t\t\ts1.results[0].UNIT_NO = this.obj_personnel.RELATIVE.emergency_contact.model.unit_no;\r\n\t\t\ts1.results[0].ZIPCODE = this.obj_personnel.RELATIVE.emergency_contact.model.zipcode;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\tthis.loadEmergencyContacts(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.error(e2, \"Error in updating address.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e2)=>{\t\t\t\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e2, \"Error in querying address.\");\r\n\t\t});\r\n\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class relative_parent{\r\n\tobj_personnel = null;\r\n\talreadyLoaded = false;\r\n\tstatus=[\"Dependent\", \"Deceased\"];\r\n\tselectedStatus = null;\r\n\tlblCreatedBy = null;\r\n\tlblUpdatedBy = null;\r\n\r\n\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num == 1){\r\n\t\t\t\tif(!this.alreadyLoaded){\r\n\t\t\t\t\tthis.alreadyLoaded=false; //set to false to always load this tab.\r\n\t\t\t\t\t$(\"#fBirthDate\").datepicker();\r\n\t\t\t\t\t$(\"#fDeceasedDate\").datepicker();\r\n\t\t\t\t\t$(\"#mBirthDate\").datepicker();\r\n\t\t\t\t\t$(\"#mDeceasedDate\").datepicker();\r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.info(\"\", \"Loading parents data...\");\r\n\t\t\t\t\tthis.loadParent(global_indiv_id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num == 0){\r\n\t\t\t\tthis.loadParent(global_indiv_id);\t\t\t\t\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.push(()=>{\r\n\t\t\tthis.obj_personnel.RELATIVE.parents.father={};\r\n\t\t\tthis.obj_personnel.RELATIVE.parents.mother={};\r\n\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t});\r\n\r\n\r\n\r\n\r\n\t}\r\n\r\n\tloadParent(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar tmpLog = [];\r\n\t\tvar pred1 = breeze.Predicate.create(\"GLOBAL_INDIV_ID\", \"==\", global_indiv_id);\t\t\r\n\t\tvar pred2 = breeze.Predicate.create(\"RELATIVE_CD\", \"==\", \"FATHER\");\r\n\t\tvar pred3 = breeze.Predicate.create(\"RELATIVE_CD\", \"==\", \"MOTHER\");\r\n\t\tvar pred4 = breeze.Predicate.create(\"IN_CASE_OF_EMERGENCY_FL\", \"!=\", \"1\");\r\n\t\tvar _pred1 = breeze.Predicate.or([pred2, pred3]);\r\n\t\tvar finalPred = breeze.Predicate.and([pred1, _pred1, pred4]);\t\t\r\n\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(finalPred);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\t\r\n\t\t\t_.each(s1.results, (result)=>{\r\n\t\t\t\tvar birthDt = moment.utc(result.BIRTH_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\tif(moment(result.DECEASED_DT).isValid()){\r\n\t\t\t\t\tvar deceasedDt = moment.utc(result.DECEASED_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\tif(deceasedDt == \"01/01/0001\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdeceasedDt = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(result.RELATIVE_CD == \"FATHER\"){\r\n\t\t\t\t\tvar father={\r\n\t\t\t\t\t\trelative_id: result.RELATIVE_ID,\r\n\t\t\t\t\t\tglobal_indiv_id: result.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\tgiven_name: result.GIVEN_NAME,\r\n\t\t\t\t\t\tmiddle_name: result.MIDDLE_NAME,\r\n\t\t\t\t\t\tlast_name: result.LAST_NAME,\r\n\t\t\t\t\t\tbirth_dt: birthDt,\r\n\t\t\t\t\t\tphone_no: result.PHONE_NO,\r\n\t\t\t\t\t\toccupation: result.OCCUPATION,\r\n\t\t\t\t\t\temployer: result.EMPLOYER,\r\n\t\t\t\t\t\tstatus: result.DEPENDENT_FL,\r\n\t\t\t\t\t\tdependent_fl: result.DEPENDENT_FL,\r\n\t\t\t\t\t\tdeceased_dt: deceasedDt,\r\n\t\t\t\t\t\tin_case_of_emergency_fl: result.IN_CASE_OF_EMERGENCY_FL,\r\n\t\t\t\t\t\trelative_cd: result.RELATIVE_CD\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif(father.dependent_fl == 0){\r\n\t\t\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.status = \"Dependent\";\r\n\t\t\t\t\t\t$(\"#fstatus_dependent\").prop(\"checked\", true);\r\n\t\t\t\t\t\t$(\"#fstatus_deceased\").prop(\"checked\", false);\r\n\t\t\t\t\t}else if(father.dependent_fl == 1){\r\n\t\t\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.status = \"Deceased\";\r\n\t\t\t\t\t\t$(\"#fstatus_dependent\").prop(\"checked\", false);\r\n\t\t\t\t\t\t$(\"#fstatus_deceased\").prop(\"checked\", true);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.obj_personnel.RELATIVE.parents.father = father;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif(result.RELATIVE_CD == \"MOTHER\"){\r\n\t\t\t\t\tvar mother={\r\n\t\t\t\t\t\trelative_id: result.RELATIVE_ID,\r\n\t\t\t\t\t\tglobal_indiv_id: result.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\tgiven_name: result.GIVEN_NAME,\r\n\t\t\t\t\t\tmiddle_name: result.MIDDLE_NAME,\r\n\t\t\t\t\t\tlast_name: result.LAST_NAME,\r\n\t\t\t\t\t\tbirth_dt: birthDt,\r\n\t\t\t\t\t\tphone_no: result.PHONE_NO,\r\n\t\t\t\t\t\toccupation: result.OCCUPATION,\r\n\t\t\t\t\t\temployer: result.EMPLOYER,\r\n\t\t\t\t\t\tstatus: result.DEPENDENT_FL==0?\"Dependent\": \"Deceased\",\r\n\t\t\t\t\t\tdependent_fl: result.DEPENDENT_FL,\r\n\t\t\t\t\t\tdeceased_dt: deceasedDt,\r\n\t\t\t\t\t\tin_case_of_emergency_fl: result.IN_CASE_OF_EMERGENCY_FL,\r\n\t\t\t\t\t\trelative_cd: result.RELATIVE_CD\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother = mother;\r\n\t\t\t\t\t// console.log(mother.dependent_fl);\r\n\t\t\t\t\tif(mother.dependent_fl == 0){\r\n\t\t\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.status = \"Dependent\";\r\n\t\t\t\t\t\t$(\"#mstatus_dependent\").prop(\"checked\", true);\r\n\t\t\t\t\t\t$(\"#mstatus_deceased\").prop(\"checked\", false);\r\n\t\t\t\t\t}else if(mother.dependent_fl == 1){\r\n\t\t\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.status = \"Deceased\";\r\n\t\t\t\t\t\t$(\"#mstatus_dependent\").prop(\"checked\", false);\r\n\t\t\t\t\t\t$(\"#mstatus_deceased\").prop(\"checked\", true);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$(\"#mstatus_dependent\").prop(\"checked\", false);\r\n\t\t\t\t\t\t$(\"#mstatus_deceased\").prop(\"checked\", false);\r\n\t\t\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.status = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.loadParentAddress(result.RELATIVE_ID, (result.RELATIVE_CD==\"MOTHER\"?true:false));\r\n\r\n\t\t\t\tif(result.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: result.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(result.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(result.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: result.LAST_UPDATED_BY,\t\t\t\t\t\t\r\n\t\t\t\t\t\tdate: new Date(result.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\ttmpLog.sort(this.OrderByDate);\r\n\t\t\tvar LastIndex = tmpLog.length-1;\r\n\t\t\tif(tmpLog.length>0){\r\n\r\n\t\t\t\tthis.lblCreatedBy = tmpLog[0].user + ' ' + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpLog[LastIndex].user + ' ' + moment.utc(tmpLog[LastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Relative info has been loaded...\");\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in loading parents data.\");\r\n\t\t});\r\n\t\t// var pred1 = breeze.Predicate.create(\"GLOBAL_INDIV_ID\", \"==\", global_indiv_id);\r\n\t\t// var pred2 = breeze.Predicate.create(\"\");\r\n\t}\r\n\r\n\tloadParentAddress(relative_id, isMother){\r\n\t\t// console.log(relative_id, isMother);\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_ADDR_TRX\")\r\n\t\t\t\t\t.where(\"RELATIVE_ID\",\"==\",relative_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tif(s1.results.length==0)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(isMother){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.unit_no = s1.results[0].UNIT_NO;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.house_no = s1.results[0].HOUSE_NO;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.block_lot = s1.results[0].BLOCK_LOT;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.bldg_name = s1.results[0].BLDG_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.street_name = s1.results[0].STREET_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.sub_village = s1.results[0].SUB_VILLAGE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.barangay = s1.results[0].BARANGAY;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.district = s1.results[0].DISTRICT;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.city_town = s1.results[0].CITY_TOWN;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.state_province = s1.results[0].STATE_PROVINCE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.region = s1.results[0].REGION;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.zipcode = s1.results[0].ZIPCODE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.country_cd = s1.results[0].COUNTRY_CD;\r\n\t\t\t}else{\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.unit_no = s1.results[0].UNIT_NO;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.house_no = s1.results[0].HOUSE_NO;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.block_lot = s1.results[0].BLOCK_LOT;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.bldg_name = s1.results[0].BLDG_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.street_name = s1.results[0].STREET_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.sub_village = s1.results[0].SUB_VILLAGE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.barangay = s1.results[0].BARANGAY;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.district = s1.results[0].DISTRICT;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.city_town = s1.results[0].CITY_TOWN;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.state_province = s1.results[0].STATE_PROVINCE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.region = s1.results[0].REGION;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.zipcode = s1.results[0].ZIPCODE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.country_cd = s1.results[0].COUNTRY_CD;\r\n\t\t\t}\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in parent's address.\");\r\n\t\t});\r\n\t}\r\n\r\n\tOrderByDate(a, b){\t\t\r\n\t\tif(a.date > b.date)\r\n\t\t\treturn 1;\r\n\t\tif(a.date < b.date)\r\n\t\t\treturn -1;\r\n\t\treturn 0;\t\r\n\t}\r\n\r\n\tcheckChange(isMother, status){\r\n\t\tif(isMother){\r\n\r\n\t\t\t// console.log(this.obj_personnel.RELATIVE.parents.mother.status);\t\r\n\r\n\t\t\tif(status==\"Dependent\"){\r\n\t\t\t\t$(\"#mstatus_deceased\").prop(\"checked\", false);\r\n\t\t\t}else if(status = \"Deceased\"){\r\n\t\t\t\t$(\"#mstatus_dependent\").prop(\"checked\", false);\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tvar isChecked_dependent = $('#mstatus_dependent').is(\":checked\");\r\n\t\t\tvar isChecked_deceased = $(\"#mstatus_deceased\").is(\":checked\");\r\n\t\t\tif(isChecked_dependent){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.status = \"Dependent\";\t\t\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.deceased_dt = \"\";\r\n\t\t\t\t$(\"#mDeceasedDate\").val(\"\");\r\n\t\t\t}else if(isChecked_deceased){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.status = \"Deceased\";\r\n\t\t\t}else if(isChecked_dependent == false && isChecked_deceased == false){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.status = \"\";\t\t\t\t\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.deceased_dt = \"\";\r\n\t\t\t\t$(\"#mDeceasedDate\").val(\"\");\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\r\n\t\t\tif(status==\"Dependent\"){\r\n\t\t\t\t$(\"#fstatus_deceased\").prop(\"checked\", false);\r\n\t\t\t}else if(status = \"Deceased\"){\r\n\t\t\t\t$(\"#fstatus_dependent\").prop(\"checked\", false);\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tvar isChecked_dependent = $('#fstatus_dependent').is(\":checked\");\r\n\t\t\tvar isChecked_deceased = $(\"#fstatus_deceased\").is(\":checked\");\r\n\t\t\tif(isChecked_dependent){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.status = \"Dependent\";\t\t\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.deceased_dt = \"\";\r\n\t\t\t\t$(\"#fDeceasedDate\").val(\"\");\r\n\t\t\t}else if(isChecked_deceased){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.status = \"Deceased\";\r\n\t\t\t}else if(isChecked_dependent == false && isChecked_deceased == false){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.status = \"\";\t\t\t\t\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.deceased_dt = \"\";\r\n\t\t\t\t$(\"#fDeceasedDate\").val(\"\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdd_provinceChanged(isMother){\r\n\t\tvar prov = null;\r\n\t\tif(isMother){\r\n\t\t\tprov = this.obj_personnel.RELATIVE.parents.mother.state_province;\r\n\t\t}else{\r\n\t\t\tprov = this.obj_personnel.RELATIVE.parents.father.state_province;\r\n\t\t}\r\n\t\tif(prov != undefined && prov != null && prov.length!=0){\r\n\t\t\tvar selectedProv = this.obj_personnel.PROVINCE.find((p)=>{\r\n\t\t\t\tif(p.value == prov){\r\n\t\t\t\t\treturn p;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(selectedProv != null){\r\n\t\t\t\tif(isMother){\r\n\t\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.region = selectedProv.group;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.region = selectedProv.group;\r\n\t\t\t\t}\r\n\t\t\t\tthis.dd_regionChanged(isMother);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdd_regionChanged(isMother){\r\n\t\tvar reg = null;\r\n\t\tif(isMother){\r\n\t\t\treg = this.obj_personnel.RELATIVE.parents.mother.region;\r\n\t\t}else{\r\n\t\t\treg = this.obj_personnel.RELATIVE.parents.father.region;\r\n\t\t}\r\n\t\tif(reg != undefined && reg!=null && reg.length!=0)\r\n\t\t{\r\n\t\t\t//alert(this.obj_personnel.CONTACT.modelAddress.region);\r\n\t\t\tvar selectedRegion = this.obj_personnel.REGION.find((r)=>{\r\n\t\t\t\tif(r.value == reg)\r\n\t\t\t\t\treturn r;\r\n\t\t\t});\r\n\r\n\t\t\tif(selectedRegion != null)\r\n\t\t\t{\r\n\t\t\t\tif(isMother){\r\n\t\t\t\t\treg = this.obj_personnel.RELATIVE.parents.mother.country_cd = selectedRegion.group;\r\n\t\t\t\t}else{\r\n\t\t\t\t\treg = this.obj_personnel.RELATIVE.parents.father.country_cd = selectedRegion.group;\r\n\t\t\t\t}\r\n\t\t\t\t// this.obj_personnel.CONTACT.modelAddress.country_cd = selectedRegion.group;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(){\r\n\r\n\t\tvar strValidation = \"\";\r\n\r\n\t\tthis.obj_personnel.RELATIVE.parents.mother.birth_dt = $(\"#mBirthDate\").val();\r\n\t\tthis.obj_personnel.RELATIVE.parents.mother.deceased_dt = $(\"#mDeceasedDate\").val();\r\n\t\tswitch(this.obj_personnel.RELATIVE.parents.mother.status){\r\n\t\t\tcase \"Dependent\": this.obj_personnel.RELATIVE.parents.mother.dependent_fl = 0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Deceased\": this.obj_personnel.RELATIVE.parents.mother.dependent_fl = 1;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: this.obj_personnel.RELATIVE.parents.mother.dependent_fl = null;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.obj_personnel.RELATIVE.parents.father.birth_dt = $(\"#fBirthDate\").val();\r\n\t\tthis.obj_personnel.RELATIVE.parents.father.deceased_dt = $(\"#fDeceasedDate\").val();\r\n\t\tswitch(this.obj_personnel.RELATIVE.parents.father.status){\r\n\t\t\tcase \"Dependent\": this.obj_personnel.RELATIVE.parents.father.dependent_fl = 0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Deceased\": this.obj_personnel.RELATIVE.parents.father.dependent_fl = 1;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: this.obj_personnel.RELATIVE.parents.father.dependent_fl = null;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.parents.mother.relative_id != undefined && this.obj_personnel.RELATIVE.parents.mother.relative_id.toString().length>0){\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.last_name == null || this.obj_personnel.RELATIVE.parents.mother.last_name.length==0){\r\n\t\t\t\tstrValidation+=\"[Mother] No Last Name specified.<br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.given_name == null || this.obj_personnel.RELATIVE.parents.mother.given_name.length==0){\r\n\t\t\t\tstrValidation+=\"[Mother] No Given Name specified.<br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.birth_dt.length>0){\r\n\t\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.parents.mother.birth_dt)).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid birth date.<br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.parents.mother.birth_dt);\r\n\t\t\t\t\tvar d2 = new Date();\r\n\t\t\t\t\tif(d1>d2){\r\n\t\t\t\t\t\tstrValidation+=\"[Mother] birth date cannot be greater than date today.<br/>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+=\"[Mother] No Birth date specified. <br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.dependent_fl == 1){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.deceased_dt.length>0){\r\n\t\t\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.parents.mother.deceased_dt)).isValid()){\r\n\t\t\t\t\t\tstrValidation+=\"[Mother] Invalid deceased date. <br/>\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.parents.mother.deceased_dt);\r\n\t\t\t\t\t\tvar d2 = new Date();\r\n\t\t\t\t\t\tif(d1>d2){\r\n\t\t\t\t\t\t\tstrValidation += \"[Mother] deceased date cannot be greater than date today.<br/>\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// else{\r\n\t\t\t\t// \tstrValidation+=\"[Mother] No deceased date specified.<br/>\";\r\n\t\t\t\t// }\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.country_cd == undefined || this.obj_personnel.RELATIVE.parents.mother.country_cd.length==0){\r\n\t\t\t\tstrValidation+=\"[Mother] No country specified.<br/>\";\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.last_name != null && this.obj_personnel.RELATIVE.parents.mother.last_name.length>0){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.given_name == null || this.obj_personnel.RELATIVE.parents.mother.given_name.length==0){\r\n\t\t\t\t\tstrValidation+=\"[Mother] No given name specified.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.given_name != null && this.obj_personnel.RELATIVE.parents.mother.given_name.length>0){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.last_name == null || this.obj_personnel.RELATIVE.parents.mother.last_name.length==0){\r\n\t\t\t\t\tstrValidation+=\"[Mother] No last name specified.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.last_name != null && this.obj_personnel.RELATIVE.parents.mother.last_name.length>0){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.given_name != null && this.obj_personnel.RELATIVE.parents.mother.given_name.length>0){\r\n\r\n\t\t\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.country_cd.length==0){\r\n\t\t\t\t\t\tstrValidation+=\"[Mother] No country specified.<br/>\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.dependent_fl==1){\r\n\t\t\t\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.deceased_dt.length>0){\r\n\t\t\t\t\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.parents.mother.deceased_dt)).isValid()){\r\n\t\t\t\t\t\t\t\tstrValidation+=\"[Mother] Invalid deceased date.<br/>\";\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.parents.mother.deceased_dt);\r\n\t\t\t\t\t\t\t\tvar d2 = new Date();\r\n\t\t\t\t\t\t\t\tif(d1>d2){\r\n\t\t\t\t\t\t\t\t\tstrValidation += \"[Mother] deceased date cannot be greater than date today.<br/>\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// else{\r\n\t\t\t\t\t\t// \tstrValidation+=\"[Mother] No deceased date specified.<br/>\";\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t}else if(this.obj_personnel.RELATIVE.parents.mother.dependent_fl == -1){\r\n\t\t\t\t\t\tstrValidation+=\"[Mother] No status specified.<br/>\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.parents.father.relative_id != undefined && this.obj_personnel.RELATIVE.parents.father.relative_id.toString().length>0){\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.father.last_name == null || this.obj_personnel.RELATIVE.parents.father.last_name.length==0){\r\n\t\t\t\tstrValidation+=\"[Father] No Last Name specified.<br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.father.given_name == null || this.obj_personnel.RELATIVE.parents.father.given_name.length==0){\r\n\t\t\t\tstrValidation+=\"[Father] No Given Name specified.<br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.father.birth_dt.length>0){\r\n\t\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.parents.father.birth_dt)).isValid()){\r\n\t\t\t\t\tstrValidation+=\"[Father] Invalid birth date.<br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.parents.father.birth_dt);\r\n\t\t\t\t\tvar d2 = new Date();\r\n\t\t\t\t\tif(d1>d2){\r\n\t\t\t\t\t\tstrValidation+=\"[Father] Birth date cannot be greater than date today.<br/>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+=\"[Father] No Birth date specified. <br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.father.dependent_fl == 1){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.father.deceased_dt.length>0){\r\n\t\t\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.parents.father.deceased_dt)).isValid()){\r\n\t\t\t\t\t\tstrValidation+=\"[Father] Invalid deceased date. <br/>\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.parents.father.deceased_dt);\r\n\t\t\t\t\t\tvar d2 = new Date();\r\n\t\t\t\t\t\tif(d1>d2){\r\n\t\t\t\t\t\t\tstrValidation+=\"[Father] Deceased date cannot be greater than date today.\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// else{\r\n\t\t\t\t// \tstrValidation+=\"[Father] No deceased date specified.<br/>\";\r\n\t\t\t\t// }\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.father.country_cd.length==0){\r\n\t\t\t\tstrValidation+=\"[Father] No country specified.<br/>\";\r\n\t\t\t}\r\n\t\t}else{\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.father.last_name != null && this.obj_personnel.RELATIVE.parents.father.last_name.length>0){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.father.given_name == null || this.obj_personnel.RELATIVE.parents.father.given_name.length==0){\r\n\t\t\t\t\tstrValidation+=\"[Father] No given name specified.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.father.given_name != null && this.obj_personnel.RELATIVE.parents.father.given_name.length>0){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.father.last_name == null || this.obj_personnel.RELATIVE.parents.father.last_name.length==0){\r\n\t\t\t\t\tstrValidation+=\"[Father] No last name specified.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.father.last_name != null && this.obj_personnel.RELATIVE.parents.father.last_name.length>0){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.father.given_name != null && this.obj_personnel.RELATIVE.parents.father.given_name.length>0){\r\n\r\n\t\t\t\t\tif(this.obj_personnel.RELATIVE.parents.father.country_cd.length==0){\r\n\t\t\t\t\t\tstrValidation+=\"[Father] No country specified.<br/>\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(this.obj_personnel.RELATIVE.parents.father.dependent_fl==1){\r\n\t\t\t\t\t\tif(this.obj_personnel.RELATIVE.parents.father.deceased_dt.length>0){\r\n\t\t\t\t\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.parents.father.deceased_dt)).isValid()){\r\n\t\t\t\t\t\t\t\tstrValidation+=\"[Father] Invalid deceased date.<br/>\";\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.parents.father.deceased_dt);\r\n\t\t\t\t\t\t\t\tvar d2 = new Date();\r\n\t\t\t\t\t\t\t\tif(d1>d2){\r\n\t\t\t\t\t\t\t\t\tstrValidation+=\"[Father] Deceased date cannot be greater than date today.<br/>\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// else{\r\n\t\t\t\t\t\t// \tstrValidation+=\"[Father] No deceased date specified.<br/>\";\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t}else if(this.obj_personnel.RELATIVE.parents.father.dependent_fl == -1){\r\n\t\t\t\t\t\tstrValidation+=\"[Father] No status specified.<br/>\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.relative_id > 0){\r\n\t\t\t\tthis.updateRelative(this.obj_personnel.RELATIVE.parents.mother.relative_id, true);\r\n\t\t\t}else if(this.obj_personnel.RELATIVE.parents.mother.last_name != null && this.obj_personnel.RELATIVE.parents.mother.last_name.length>0){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.given_name != null && this.obj_personnel.RELATIVE.parents.mother.given_name.length>0){\r\n\r\n\t\t\t\t\t// this.obj_personnel.RELATIVE.parents.mother.last_name = this.obj_personnel.RELATIVE.parents.mother.last_name.toUpperCase();\r\n\t\t\t\t\t// this.obj_personnel.RELATIVE.parents.mother.given_name = this.obj_personnel.RELATIVE.parents.mother.given_name.toUpperCase();\r\n\t\t\t\t\t// this.obj_personnel.RELATIVE.parents.mother.middle_name = this.obj_personnel.RELATIVE.parents.mother.middle_name.toUpperCase();\r\n\t\t\t\t\tthis.saveRelative(this.obj_personnel.global_indiv_id, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.father.relative_id > 0){\r\n\t\t\t\tthis.updateRelative(this.obj_personnel.RELATIVE.parents.father.relative_id, false);\r\n\t\t\t}else if(this.obj_personnel.RELATIVE.parents.father.last_name != null && this.obj_personnel.RELATIVE.parents.father.last_name.length>0){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.father.given_name != null && this.obj_personnel.RELATIVE.parents.father.given_name.length>0){\r\n\t\t\t\t\tthis.saveRelative(this.obj_personnel.global_indiv_id, false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tconvertToGMT8(date){\r\n\t\tif(date==undefined || date == null || date.length==0)\r\n\t\t\treturn null;\r\n\t\tvar tempDt = moment(date).add(8, 'hours');\r\n\t\treturn new Date(tempDt);\r\n\t}\r\n\r\n\tsaveRelative(global_indiv_id, isMother){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = moment(new Date()).add(8, \"hours\");\r\n\t\tdateToday = new Date(dateToday);\r\n\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"RELATIVE_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar MaxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tMaxId = s1.results[0].RELATIVE_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar entity = null;\r\n\t\t\tif(isMother){\r\n\t\t\t\tvar birthdate = this.convertToGMT8(this.obj_personnel.RELATIVE.parents.mother.birth_dt);\r\n\t\t\t\tvar deceased_dt = this.obj_personnel.RELATIVE.parents.mother.deceased_dt;\r\n\t\t\t\tvar mother = {\r\n\t\t\t\t\tRELATIVE_ID: MaxId,\r\n\t\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\t\tLAST_NAME: this.obj_personnel.RELATIVE.parents.mother.last_name,\r\n\t\t\t\t\tGIVEN_NAME: this.obj_personnel.RELATIVE.parents.mother.given_name,\r\n\t\t\t\t\tMIDDLE_NAME: this.obj_personnel.RELATIVE.parents.mother.middle_name,\r\n\t\t\t\t\tBIRTH_DT: birthdate,\r\n\t\t\t\t\tPHONE_NO: this.obj_personnel.RELATIVE.parents.mother.phone_no,\r\n\t\t\t\t\tOCCUPATION: this.obj_personnel.RELATIVE.parents.mother.occupation,\r\n\t\t\t\t\tEMPLOYER: this.obj_personnel.RELATIVE.parents.mother.employer,\r\n\t\t\t\t\tDEPENDENT_FL: this.obj_personnel.RELATIVE.parents.mother.dependent_fl,\r\n\t\t\t\t\tDECEASED_DT: deceased_dt,\r\n\t\t\t\t\tIN_CASE_OF_EMERGENCY_FL: 0,\r\n\t\t\t\t\tRELATIVE_CD: \"MOTHER\",\r\n\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t};\r\n\t\t\t\tentity = EntityManager().createEntity(\"RELATIVE_TRX\", mother);\r\n\t\t\t}else{\r\n\t\t\t\tvar birthdate = this.convertToGMT8(this.obj_personnel.RELATIVE.parents.father.birth_dt);\r\n\t\t\t\tvar deceased_dt = this.convertToGMT8(this.obj_personnel.RELATIVE.parents.father.deceased_dt);\r\n\t\t\t\tvar father = {\r\n\t\t\t\t\tRELATIVE_ID: MaxId,\r\n\t\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\t\tLAST_NAME: this.obj_personnel.RELATIVE.parents.father.last_name,\r\n\t\t\t\t\tGIVEN_NAME: this.obj_personnel.RELATIVE.parents.father.given_name,\r\n\t\t\t\t\tMIDDLE_NAME: this.obj_personnel.RELATIVE.parents.father.middle_name,\r\n\t\t\t\t\tBIRTH_DT: birthdate,\r\n\t\t\t\t\tPHONE_NO: this.obj_personnel.RELATIVE.parents.father.phone_no,\r\n\t\t\t\t\tOCCUPATION: this.obj_personnel.RELATIVE.parents.father.occupation,\r\n\t\t\t\t\tEMPLOYER: this.obj_personnel.RELATIVE.parents.father.employer,\r\n\t\t\t\t\tDEPENDENT_FL: this.obj_personnel.RELATIVE.parents.father.dependent_fl,\r\n\t\t\t\t\tDECEASED_DT: deceased_dt,\r\n\t\t\t\t\tIN_CASE_OF_EMERGENCY_FL: 0,\r\n\t\t\t\t\tRELATIVE_CD: \"FATHER\",\r\n\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t};\r\n\t\t\t\tentity = EntityManager().createEntity(\"RELATIVE_TRX\", father);\r\n\t\t\t}\r\n\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\tquery = EntityQuery().from(\"RELATIVE_ADDR_TRX\")\r\n\t\t\t\t\t\t.orderByDesc(\"RELATIVE_ADDR_ID\").take(1);\r\n\t\t\t\tEntityManager().executeQuery(query).then((s3)=>{\r\n\t\t\t\t\tvar MaxAddrId = 1;\r\n\t\t\t\t\tif(s3.results.length>0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tMaxAddrId = s3.results[0].RELATIVE_ADDR_ID+1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar entity2 = null;\r\n\t\t\t\t\tif(isMother){\r\n\t\t\t\t\t\tvar addr_trx = {\r\n\t\t\t\t\t\t\tRELATIVE_ID: MaxId,\r\n\t\t\t\t\t\t\tRELATIVE_ADDR_ID: MaxAddrId,\r\n\t\t\t\t\t\t\tCOUNTRY_CD: this.obj_personnel.RELATIVE.parents.mother.country_cd,\r\n\t\t\t\t\t\t\tREGION: this.obj_personnel.RELATIVE.parents.mother.region,\r\n\t\t\t\t\t\t\tSTATE_PROVINCE: this.obj_personnel.RELATIVE.parents.mother.state_province,\r\n\t\t\t\t\t\t\tCITY_TOWN: this.obj_personnel.RELATIVE.parents.mother.city_town,\r\n\t\t\t\t\t\t\tDISTRICT: this.obj_personnel.RELATIVE.parents.mother.district,\r\n\t\t\t\t\t\t\tBARANGAY: this.obj_personnel.RELATIVE.parents.mother.barangay,\r\n\t\t\t\t\t\t\tSUB_VILLAGE: this.obj_personnel.RELATIVE.parents.mother.sub_village,\r\n\t\t\t\t\t\t\tPHASE: this.obj_personnel.RELATIVE.parents.mother.phase,\r\n\t\t\t\t\t\t\tBLOCK_LOT: this.obj_personnel.RELATIVE.parents.mother.block_lot,\r\n\t\t\t\t\t\t\tSTREET_NAME: this.obj_personnel.RELATIVE.parents.mother.street_name,\r\n\t\t\t\t\t\t\tHOUSE_NO: this.obj_personnel.RELATIVE.parents.mother.house_no,\r\n\t\t\t\t\t\t\tBLDG_NAME: this.obj_personnel.RELATIVE.parents.mother.bldg_name,\r\n\t\t\t\t\t\t\tUNIT_NO: this.obj_personnel.RELATIVE.parents.mother.unit_no,\r\n\t\t\t\t\t\t\tZIPCODE: this.obj_personnel.RELATIVE.parents.mother.zipcode,\r\n\t\t\t\t\t\t\t// RESIDENTIAL_TYPE: this.obj_personnel.RELATIVE.parents.mother.residential_type,\r\n\t\t\t\t\t\t\t// HOUSE_OWNERSHIP: this.obj_personnel.RELATIVE.parents.mother.house_ownership,\r\n\t\t\t\t\t\t\tPERMANENT_FL: 0,\r\n\t\t\t\t\t\t\tMAILING_FL: 0,\r\n\t\t\t\t\t\t\tPRESENT_FL: 0,\r\n\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tentity2 = EntityManager().createEntity(\"RELATIVE_ADDR_TRX\", addr_trx);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar addr_trx = {\r\n\t\t\t\t\t\t\tRELATIVE_ID: MaxId,\r\n\t\t\t\t\t\t\tRELATIVE_ADDR_ID: MaxAddrId,\r\n\t\t\t\t\t\t\tCOUNTRY_CD: this.obj_personnel.RELATIVE.parents.father.country_cd,\r\n\t\t\t\t\t\t\tREGION: this.obj_personnel.RELATIVE.parents.father.region,\r\n\t\t\t\t\t\t\tSTATE_PROVINCE: this.obj_personnel.RELATIVE.parents.father.state_province,\r\n\t\t\t\t\t\t\tCITY_TOWN: this.obj_personnel.RELATIVE.parents.father.city_town,\r\n\t\t\t\t\t\t\tDISTRICT: this.obj_personnel.RELATIVE.parents.father.district,\r\n\t\t\t\t\t\t\tBARANGAY: this.obj_personnel.RELATIVE.parents.father.barangay,\r\n\t\t\t\t\t\t\tSUB_VILLAGE: this.obj_personnel.RELATIVE.parents.father.sub_village,\r\n\t\t\t\t\t\t\tPHASE: this.obj_personnel.RELATIVE.parents.father.phase,\r\n\t\t\t\t\t\t\tBLOCK_LOT: this.obj_personnel.RELATIVE.parents.father.block_lot,\r\n\t\t\t\t\t\t\tSTREET_NAME: this.obj_personnel.RELATIVE.parents.father.street_name,\r\n\t\t\t\t\t\t\tHOUSE_NO: this.obj_personnel.RELATIVE.parents.father.house_no,\r\n\t\t\t\t\t\t\tBLDG_NAME: this.obj_personnel.RELATIVE.parents.father.bldg_name,\r\n\t\t\t\t\t\t\tUNIT_NO: this.obj_personnel.RELATIVE.parents.father.unit_no,\r\n\t\t\t\t\t\t\tZIPCODE: this.obj_personnel.RELATIVE.parents.father.zipcode,\r\n\t\t\t\t\t\t\t// RESIDENTIAL_TYPE: this.obj_personnel.RELATIVE.parents.father.residential_type,\r\n\t\t\t\t\t\t\t// HOUSE_OWNERSHIP: this.obj_personnel.RELATIVE.parents.father.house_ownership,\r\n\t\t\t\t\t\t\tPERMANENT_FL: 0,\r\n\t\t\t\t\t\t\tMAILING_FL: 0,\r\n\t\t\t\t\t\t\tPRESENT_FL: 0,\r\n\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tentity2 = EntityManager().createEntity(\"RELATIVE_ADDR_TRX\", addr_trx);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tEntityManager().addEntity(entity2);\r\n\t\t\t\t\tEntityManager().saveChanges().then((s4)=>{\r\n\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\t\t\tthis.loadParent(global_indiv_id);\r\n\t\t\t\t\t}, (e4)=>{\r\n\t\t\t\t\t\tif(entity2 != null){\r\n\t\t\t\t\t\t\tentity2.entityAspect.setDeleted();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\t\ttoastr.error(e4, \"Error in saving relative address.\");\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}, (e3)=>{\r\n\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\ttoastr.error(e3, \"Error in querying relative address id.\");\r\n\t\t\t\t});\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tif(entity != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.error(e2, \"Error in saving relative info.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying relative id.\");\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tupdateRelative(relative_id, isMother){\r\n\t\t\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(\"RELATIVE_ID\", \"==\", relative_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tif(isMother){\r\n\t\t\t\ts1.results[0].LAST_NAME = this.obj_personnel.RELATIVE.parents.mother.last_name;\r\n\t\t\t\ts1.results[0].GIVEN_NAME = this.obj_personnel.RELATIVE.parents.mother.given_name;\r\n\t\t\t\ts1.results[0].MIDDLE_NAME = this.obj_personnel.RELATIVE.parents.mother.middle_name;\r\n\t\t\t\ts1.results[0].BIRTH_DT = this.convertToGMT8(this.obj_personnel.RELATIVE.parents.mother.birth_dt);\r\n\t\t\t\ts1.results[0].PHONE_NO = this.obj_personnel.RELATIVE.parents.mother.phone_no;\r\n\t\t\t\ts1.results[0].OCCUPATION = this.obj_personnel.RELATIVE.parents.mother.occupation;\r\n\t\t\t\ts1.results[0].EMPLOYER = this.obj_personnel.RELATIVE.parents.mother.employer;\r\n\t\t\t\ts1.results[0].DEPENDENT_FL = this.obj_personnel.RELATIVE.parents.mother.dependent_fl;\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.dependent_fl == 1){\r\n\t\t\t\t\ts1.results[0].DECEASED_DT = this.convertToGMT8(this.obj_personnel.RELATIVE.parents.mother.deceased_dt);\r\n\t\t\t\t}else{\r\n\t\t\t\t\ts1.results[0].DECEASED_DT = null;\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\t}else{\r\n\t\t\t\ts1.results[0].LAST_NAME = this.obj_personnel.RELATIVE.parents.father.last_name;\r\n\t\t\t\ts1.results[0].GIVEN_NAME = this.obj_personnel.RELATIVE.parents.father.given_name;\r\n\t\t\t\ts1.results[0].MIDDLE_NAME = this.obj_personnel.RELATIVE.parents.father.middle_name;\r\n\t\t\t\ts1.results[0].BIRTH_DT = this.convertToGMT8(this.obj_personnel.RELATIVE.parents.father.birth_dt);\r\n\t\t\t\ts1.results[0].PHONE_NO = this.obj_personnel.RELATIVE.parents.father.phone_no;\r\n\t\t\t\ts1.results[0].OCCUPATION = this.obj_personnel.RELATIVE.parents.father.occupation;\r\n\t\t\t\ts1.results[0].EMPLOYER = this.obj_personnel.RELATIVE.parents.father.employer;\r\n\t\t\t\ts1.results[0].DEPENDENT_FL = this.obj_personnel.RELATIVE.parents.father.dependent_fl;\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.father.dependent_fl == 1){\r\n\t\t\t\t\ts1.results[0].DECEASED_DT = this.convertToGMT8(this.obj_personnel.RELATIVE.parents.father.deceased_dt);\r\n\t\t\t\t}else{\r\n\t\t\t\t\ts1.results[0].DECEASED_DT = null;\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\t}\r\n\r\n\t\t\tEntityManager().saveChanges().then((s3)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t}, (e3)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.error(e3, \"Error in updating personnel info.\");\r\n\t\t\t});\r\n\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying mother's info.\");\r\n\t\t});\r\n\r\n\t\tvar query2 = EntityQuery().from(\"RELATIVE_ADDR_TRX\")\r\n\t\t\t\t\t .where(\"RELATIVE_ID\", \"==\", relative_id);\r\n\t\tEntityManager().executeQuery(query2).then((s2)=>{\r\n\r\n\t\t\tif(isMother){\r\n\t\t\t\ts2.results[0].COUNTRY_CD = this.obj_personnel.RELATIVE.parents.mother.country_cd;\r\n\t\t\t\ts2.results[0].REGION = this.obj_personnel.RELATIVE.parents.mother.region;\r\n\t\t\t\ts2.results[0].STATE_PROVINCE = this.obj_personnel.RELATIVE.parents.mother.state_province;\r\n\t\t\t\ts2.results[0].CITY_TOWN = this.obj_personnel.RELATIVE.parents.mother.city_town;\r\n\t\t\t\ts2.results[0].DISTRICT = this.obj_personnel.RELATIVE.parents.mother.district;\r\n\t\t\t\ts2.results[0].BARANGAY = this.obj_personnel.RELATIVE.parents.mother.barangay;\r\n\t\t\t\ts2.results[0].SUB_VILLAGE = this.obj_personnel.RELATIVE.parents.mother.sub_village;\r\n\t\t\t\ts2.results[0].PHASE = this.obj_personnel.RELATIVE.parents.mother.phase;\r\n\t\t\t\ts2.results[0].BLOCK_LOT = this.obj_personnel.RELATIVE.parents.mother.block_lot;\r\n\t\t\t\ts2.results[0].STREET_NAME = this.obj_personnel.RELATIVE.parents.mother.street_name;\r\n\t\t\t\ts2.results[0].HOUSE_NO = this.obj_personnel.RELATIVE.parents.mother.house_no;\r\n\t\t\t\ts2.results[0].BLDG_NAME = this.obj_personnel.RELATIVE.parents.mother.bldg_name;\r\n\t\t\t\ts2.results[0].UNIT_NO = this.obj_personnel.RELATIVE.parents.mother.unit_no;\r\n\t\t\t\ts2.results[0].ZIPCODE = this.obj_personnel.RELATIVE.parents.mother.zipcode;\r\n\t\t\t\ts2.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\ts2.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\t}else{\r\n\t\t\t\ts2.results[0].COUNTRY_CD = this.obj_personnel.RELATIVE.parents.father.country_cd;\r\n\t\t\t\ts2.results[0].REGION = this.obj_personnel.RELATIVE.parents.father.region;\r\n\t\t\t\ts2.results[0].STATE_PROVINCE = this.obj_personnel.RELATIVE.parents.father.state_province;\r\n\t\t\t\ts2.results[0].CITY_TOWN = this.obj_personnel.RELATIVE.parents.father.city_town;\r\n\t\t\t\ts2.results[0].DISTRICT = this.obj_personnel.RELATIVE.parents.father.district;\r\n\t\t\t\ts2.results[0].BARANGAY = this.obj_personnel.RELATIVE.parents.father.barangay;\r\n\t\t\t\ts2.results[0].SUB_VILLAGE = this.obj_personnel.RELATIVE.parents.father.sub_village;\r\n\t\t\t\ts2.results[0].PHASE = this.obj_personnel.RELATIVE.parents.father.phase;\r\n\t\t\t\ts2.results[0].BLOCK_LOT = this.obj_personnel.RELATIVE.parents.father.block_lot;\r\n\t\t\t\ts2.results[0].STREET_NAME = this.obj_personnel.RELATIVE.parents.father.street_name;\r\n\t\t\t\ts2.results[0].HOUSE_NO = this.obj_personnel.RELATIVE.parents.father.house_no;\r\n\t\t\t\ts2.results[0].BLDG_NAME = this.obj_personnel.RELATIVE.parents.father.bldg_name;\r\n\t\t\t\ts2.results[0].UNIT_NO = this.obj_personnel.RELATIVE.parents.father.unit_no;\r\n\t\t\t\ts2.results[0].ZIPCODE = this.obj_personnel.RELATIVE.parents.father.zipcode;\r\n\t\t\t\ts2.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\ts2.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\t}\r\n\r\n\t\t\tEntityManager().saveChanges().then((s4)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t// toastr.success(\"\", \"ParentAddress\");\r\n\t\t\t}, (e4)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.error(e4, \"Error in updating personnel address.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e2)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e2, \"Error in querying Mother's info.\");\r\n\t\t})\r\n\t}\r\n\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\nimport {OrderByDate} from '../../helpers';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class relative_siblings{\r\n\r\n\tobj_personnel = null;\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\t_disableForm=true;\r\n\t_disableTable=false;\r\n\t_disableDeceasedDt=true;\r\n\tformStatus=\"\";\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num==1){\r\n\t\t\t\t$(\"#birth_dt\").datepicker();\r\n\t\t\t\t$(\"#deceased_dt\").datepicker();\r\n\t\t\t\tthis.loadSiblings(global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}\r\n\t\t});\r\n \r\n\t}\r\n\r\n\tloadSiblings(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar pred1 = breeze.Predicate.create(\"GLOBAL_INDIV_ID\", \"==\", global_indiv_id);\r\n\t\tvar pred2 = breeze.Predicate.create(\"IN_CASE_OF_EMERGENCY_FL\", \"!=\", \"1\");\r\n\t\tvar orPred = [];\r\n\t\t_.each(this.obj_personnel.RELATIONSHIP, (relation)=>{\r\n\t\t\tif(relation.group==\"SIBLING\"){\r\n\t\t\t\torPred.push(breeze.Predicate.create(\"RELATIVE_CD\", \"==\", relation.value));\r\n\t\t\t}\r\n\t\t});\r\n\t\tvar _orPred = breeze.Predicate.or(orPred);\r\n\t\tvar finalPred = breeze.Predicate.and([pred1, pred2, _orPred]);\r\n\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(finalPred);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar tmp = [];\r\n\t\t\tvar tmpLog=[];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\t\t\t\tvar deceased_dt = null;\r\n\t\t\t\tif(moment(r.DECEASED_DT).isValid()){\t\t\t\t\t\r\n\t\t\t\t\tdeceased_dt = moment.utc(r.DECEASED_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\tif(deceased_dt == \"01/01/0001\"){\r\n\t\t\t\t\t\tdeceased_dt = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar status = null;\r\n\t\t\t\tswitch(r.DEPENDENT_FL){\r\n\t\t\t\t\tcase \"0\": status = \"Dependent\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"1\": status = \"Deceased\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\trelative_id: r.RELATIVE_ID,\r\n\t\t\t\t\tgiven_name: r.GIVEN_NAME,\r\n\t\t\t\t\tmiddle_name: r.MIDDLE_NAME,\r\n\t\t\t\t\tlast_name: r.LAST_NAME,\r\n\t\t\t\t\tbirth_dt: moment.utc(r.BIRTH_DT).format(\"MM/DD/YYYY\"),\r\n\t\t\t\t\tage: this.computeAge(moment.utc(r.BIRTH_DT).format(\"MM/DD/YYYY\")),\r\n\t\t\t\t\toccupation: r.OCCUPATION,\r\n\t\t\t\t\temployer: r.EMPLOYER,\r\n\t\t\t\t\tdependent_fl: r.DEPENDENT_FL,\r\n\t\t\t\t\tstatus: status,\r\n\t\t\t\t\tdeceased_dt: deceased_dt,\r\n\t\t\t\t\trelative_cd: r.RELATIVE_CD\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.RELATIVE.siblings.list = tmp;\r\n\t\t\ttmpLog.sort(OrderByDate);\r\n\t\t\tvar LastIndex = tmpLog.length-1;\r\n\t\t\tif(tmpLog.length>0){\r\n\t\t\t\tthis.lblCreatedBy = tmpLog[0].user + ' ' + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpLog[LastIndex].user + ' ' + moment.utc(tmpLog[LastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Relative info has been loaded...\");\r\n\t\t\tsettings.isNavigating = false;\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying siblings list.\");\r\n\t\t});\r\n\t}\r\n\r\n\tcheckChange(bit){\r\n \r\n\t\tswitch(bit){\r\n\t\t\tcase 0:\r\n\t\t\t\t$(\"#status_deceased\").prop(\"checked\", false);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\t$(\"#status_dependent\").prop(\"checked\", false);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tvar isChecked_dependent = $('#status_dependent').is(\":checked\");\r\n\t\tvar isChecked_deceased = $(\"#status_deceased\").is(\":checked\");\r\n\t\tif(isChecked_dependent){\r\n\t\t\tthis.obj_personnel.RELATIVE.siblings.model.dependent_fl = \"0\";\r\n\t\t\tthis.obj_personnel.RELATIVE.siblings.model.deceased_dt = null;\r\n\t\t\t$(\"#deceased_dt\").val(\"\");\r\n\t\t\tthis._disableDeceasedDt = true;\r\n\t\t}else if(isChecked_deceased){\r\n\t\t\tthis.obj_personnel.RELATIVE.siblings.model.dependent_fl = \"1\";\r\n\t\t\tthis._disableDeceasedDt = false;\r\n\t\t}else if(isChecked_dependent == false && isChecked_deceased == false){\r\n\t\t\tthis._disableDeceasedDt = true;\r\n\t\t\tthis.obj_personnel.RELATIVE.siblings.model.dependent_fl = null;\t\t\t\t\r\n\t\t\tthis.obj_personnel.RELATIVE.siblings.model.deceased_dt = null;\r\n\t\t\t$(\"#deceased_dt\").val(\"\");\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tcomputeAge(dateString){\r\n\t\tif(dateString == null || dateString.length==0)\r\n\t\t\treturn;\r\n\t\tvar today = new Date();\r\n\t\tvar birthDate = new Date(dateString);\r\n\t\tvar age = today.getFullYear() - birthDate.getFullYear();\r\n\t\tvar m = today.getMonth() - birthDate.getMonth();\r\n\t\tif (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\r\n\t\t\tage--;\r\n\t\t}\r\n\t\treturn age;\t\r\n\t}\r\n\r\n\tbtnAdd_Siblings(){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableTable = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis.formStatus = \"ADD\";\r\n\t}\r\n\r\n\tbtnEdit_Siblings(item){\r\n\t\tthis.formStatus=\"EDIT\";\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableTable = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model.relative_id = item.relative_id;\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model.last_name = item.last_name;\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model.given_name = item.given_name;\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model.middle_name = item.middle_name;\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model.birth_dt = item.birth_dt;\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model.age = item.age;\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model.relative_cd = item.relative_cd;\r\n\t\tif(item.dependent_fl != null){\r\n\t\t\tswitch(item.dependent_fl){\r\n\t\t\t\tcase \"0\":\r\n\t\t\t\t\t$(\"#status_dependent\").prop(\"checked\", true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"1\":\r\n\t\t\t\t\t$(\"#status_deceased\").prop(\"checked\", true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tthis.checkChange(this.obj_personnel.RELATIVE.siblings.model.dependent_fl);\r\n\t\t\tthis.obj_personnel.RELATIVE.siblings.model.deceased_dt = item.deceased_dt;\r\n\t\t}\r\n\t}\r\n\r\n\tbtnRemove_Siblings(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the record?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('RELATIVE_TRX').where('RELATIVE_ID', '==', item.relative_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The record was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadSiblings(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing address.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tclearField(){\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableTable = false;\r\n\t\t$(\"#status_deceased\").prop(\"checked\", false);\r\n\t\t$(\"#status_dependent\").prop(\"checked\", false);\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model = {};\t\t\r\n\t\tthis.formStatus = \"\";\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\tvar strValidation = \"\";\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model.birth_dt = $(\"#birth_dt\").val();\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model.deceased_dt = $(\"#deceased_dt\").val();\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.siblings.model.last_name == undefined || this.obj_personnel.RELATIVE.siblings.model.last_name == null || this.obj_personnel.RELATIVE.siblings.model.last_name.length == 0){\r\n\t\t\tstrValidation+=\"No last name specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.siblings.model.given_name == undefined || this.obj_personnel.RELATIVE.siblings.model.given_name == null || this.obj_personnel.RELATIVE.siblings.model.given_name.length == 0){\r\n\t\t\tstrValidation+=\"No given name specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.siblings.model.birth_dt != undefined && this.obj_personnel.RELATIVE.siblings.model.birth_dt != null && this.obj_personnel.RELATIVE.siblings.model.birth_dt.length>0){\r\n\t\t\tif(!moment(this.obj_personnel.RELATIVE.siblings.model.birth_dt).isValid()){\r\n\t\t\t\tstrValidation+=\"Invalid birth date.<br/>\";\r\n\t\t\t}else{\r\n\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.siblings.model.birth_dt);\r\n\t\t\t\tvar d2 = new Date();\r\n\t\t\t\tif(d1>d2){\r\n\t\t\t\t\tstrValidation+=\"Birth date cannot be greater than date today.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tstrValidation+=\"No birth date specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.siblings.model.dependent_fl == \"1\"){\r\n\t\t\tif(this.obj_personnel.RELATIVE.siblings.model.deceased_dt.length>0){\r\n\t\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.siblings.model.deceased_dt)).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid deceased date. <br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.siblings.model.deceased_dt);\r\n\t\t\t\t\tvar d2 = new Date();\r\n\t\t\t\t\tif(d1>d2){\r\n\t\t\t\t\t\tstrValidation+=\"Deceased date cannot be greater than date today.<br/>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// else{\r\n\t\t\t// \tstrValidation+=\"[Mother] No deceased date specified.<br/>\";\r\n\t\t\t// }\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.siblings.model.relative_cd == undefined || this.obj_personnel.RELATIVE.siblings.model.relative_cd == null || this.obj_personnel.RELATIVE.siblings.model.relative_cd.length ==0){\r\n\t\t\tstrValidation+=\"No relationship specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.formStatus==\"ADD\"){\r\n\t\t\t\tthis.save(this.obj_personnel.global_indiv_id);\r\n\t\t\t}else if(this.formStatus==\"EDIT\"){\r\n\t\t\t\tthis.update(this.obj_personnel.RELATIVE.siblings.model.relative_id);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\t\r\n\r\n\tsave(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar birth_dt = new Date(moment(this.obj_personnel.RELATIVE.siblings.model.birth_dt).add(8, \"hours\"));\r\n\t\tvar deceased_dt = null;\r\n\r\n\t\tif(moment(this.obj_personnel.RELATIVE.siblings.model.deceased_dt).isValid()){\r\n\t\t\tdeceased_dt = new Date(moment(this.obj_personnel.RELATIVE.siblings.model.deceased_dt).add(8, \"hours\"));\r\n\t\t}\r\n\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"RELATIVE_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\t\r\n\t\t\tvar MaxId = 1;\r\n\t\t\tif(s1.results.length==1){\r\n\t\t\t\tMaxId = s1.results[0].RELATIVE_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar relative_trx = {\r\n\t\t\t\tRELATIVE_ID: MaxId,\r\n\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\tGIVEN_NAME: this.obj_personnel.RELATIVE.siblings.model.given_name,\r\n\t\t\t\tMIDDLE_NAME: this.obj_personnel.RELATIVE.siblings.model.middle_name,\r\n\t\t\t\tLAST_NAME: this.obj_personnel.RELATIVE.siblings.model.last_name,\r\n\t\t\t\tBIRTH_DT: birth_dt,\r\n\t\t\t\tDEPENDENT_FL: this.obj_personnel.RELATIVE.siblings.model.dependent_fl,\r\n\t\t\t\tDECEASED_DT: deceased_dt,\r\n\t\t\t\tRELATIVE_CD: this.obj_personnel.RELATIVE.siblings.model.relative_cd,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\t\t\t// console.log(relative_trx);\r\n\t\t\t\r\n\t\t\tvar entity = EntityManager().createEntity(\"RELATIVE_TRX\", relative_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadSiblings(global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.error(e2, \"Error in saving siblings info.\");\r\n\t\t\t});\r\n\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(\"\", \"Error in querying relative id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdate(relative_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(\"RELATIVE_ID\", \"==\", relative_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar birth_dt = new Date(moment(this.obj_personnel.RELATIVE.siblings.model.birth_dt).add(8, \"hours\"));\r\n\r\n\t\t\tvar deceased_dt = null;\r\n\t\t\tif(moment(this.obj_personnel.RELATIVE.siblings.model.deceased_dt).isValid()){\r\n\t\t\t\tdeceased_dt = new Date(moment(this.obj_personnel.RELATIVE.siblings.model.deceased_dt).add(8, \"hours\"));\r\n\t\t\t}\r\n\r\n\t\t\ts1.results[0].LAST_NAME = this.obj_personnel.RELATIVE.siblings.model.last_name;\r\n\t\t\ts1.results[0].GIVEN_NAME = this.obj_personnel.RELATIVE.siblings.model.given_name;\r\n\t\t\ts1.results[0].MIDDLE_NAME = this.obj_personnel.RELATIVE.siblings.model.middle_name;\r\n\t\t\ts1.results[0].BIRTH_DT = birth_dt;\r\n\t\t\ts1.results[0].RELATIVE_CD = this.obj_personnel.RELATIVE.siblings.model.relative_cd;\r\n\t\t\ts1.results[0].DEPENDENT_FL = this.obj_personnel.RELATIVE.siblings.model.dependent_fl;\r\n\t\t\ts1.results[0].DECEASED_DT = deceased_dt;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\t\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\tthis.loadSiblings(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\ttoastr.error(e2, \"Error in saving changes.\");\r\n\t\t\t});\r\n\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\ttoastr.error(e1, \"Error in querying relative info.\");\r\n\t\t});\r\n\t}\r\n\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class relative_spouse {\r\n\r\n\tobj_personnel=null;\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\t_disableDeceasedDt=true;\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.push((tab_num, global_indiv_id)=>{\t\t\t\r\n\t\t\tif(tab_num == 2){\r\n\t\t\t\t$(\"#spouse_birth_dt\").datepicker();\r\n\t\t\t\t$(\"#spouse_deceased_dt\").datepicker();\r\n\t\t\t\tthis.loadSpouse(global_indiv_id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.push(()=>{\r\n\t\t\tthis.obj_personnel.RELATIVE.spouse = {};\r\n\t\t});\r\n\t}\r\n\r\n\tloadSpouse(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar pred1 = breeze.Predicate.create(\"GLOBAL_INDIV_ID\", \"==\", global_indiv_id);\r\n\t\tvar pred2 = breeze.Predicate.create(\"RELATIVE_CD\", \"==\", \"SPOUSE\");\r\n\t\tvar pred3 = breeze.Predicate.create(\"IN_CASE_OF_EMERGENCY_FL\", \"!=\", \"1\");\r\n\t\tvar finalPred = breeze.Predicate.and([pred1, pred2, pred3]);\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(finalPred);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tvar birth_dt = moment.utc(s1.results[0].BIRTH_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\tvar deceased_dt = null;\r\n\t\t\t\tif(moment(s1.results[0].DECEASED_DT).isValid()){\r\n\t\t\t\t\tdeceased_dt = moment.utc(s1.results[0].DECEASED_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\t}\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.relative_id = s1.results[0].RELATIVE_ID;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.last_name = s1.results[0].LAST_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.given_name = s1.results[0].GIVEN_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.middle_name = s1.results[0].MIDDLE_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.birth_dt = birth_dt;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.occupation = s1.results[0].OCCUPATION;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.employer = s1.results[0].EMPLOYER;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.unit_no = s1.results[0].UNIT_NO;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.house_no = s1.results[0].HOUSE_NO;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.block_lot = s1.results[0].BLOCK_LOT;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.bldg_name = s1.results[0].BLDG_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.street_name = s1.results[0].STREET_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.sub_village = s1.results[0].SUB_VILLAGE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.barangay = s1.results[0].BARANGAY;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.district = s1.results[0].DISTRICT;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.city_town = s1.results[0].CITY_TOWN;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.state_province = s1.results[0].STATE_PROVINCE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.region = s1.results[0].REGION;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.zipcode = s1.results[0].ZIPCODE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.country_cd = s1.results[0].COUNTRY_CD;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.deceased_dt = deceased_dt;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.dependent_fl = s1.results[0].DEPENDENT_FL;\r\n\t\t\t\tthis.loadSpouseAddress(s1.results[0].RELATIVE_ID);\r\n\t\t\t\tswitch(s1.results[0].DEPENDENT_FL){\r\n\t\t\t\t\tcase 0:\t\t\t\t\t\t\r\n\t\t\t\t\t\t$(\"#status_dependent\").prop(\"checked\", true);\r\n\t\t\t\t\t\t$(\"#status_deceased\").prop(\"checked\", false);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\t\t\t\t\t\t\r\n\t\t\t\t\t\t$(\"#mstatus_dependent\").prop(\"checked\", false);\r\n\t\t\t\t\t\t$(\"#mstatus_deceased\").prop(\"checked\", true);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\t\t\t\t\t\r\n\t\t\t\t\t\t$(\"#mstatus_dependent\").prop(\"checked\", false);\r\n\t\t\t\t\t\t$(\"#mstatus_deceased\").prop(\"checked\", false);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(s1.results[0].CREATED_BY != null){\r\n\t\t\t\t\tthis.lblCreatedBy = s1.results[0].CREATED_BY+ ' ' + moment.utc(s1.results[0].CREATED_DT).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(s1.results[0].LAST_UPDATED_BY != null){\r\n\t\t\t\t\tthis.lblCreatedBy = s1.results[0].LAST_UPDATED_BY+ ' ' + moment.utc(s1.results[0].LAST_UPDATED_DT).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse = {};\r\n\t\t\t\tthis.lblCreatedBy=\"\";\r\n\t\t\t\tthis.lblUpdatedBy=\"\";\r\n\t\t\t}\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Spouse's info has been loaded.\");\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying spouse info.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tloadSpouseAddress(relative_id){\r\n\t\t// console.log(relative_id);\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_ADDR_TRX\")\r\n\t\t\t\t\t.where(\"RELATIVE_ID\",\"==\", relative_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.relative_addr_id = s1.results[0].RELATIVE_ADDR_ID;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.country_cd = s1.results[0].COUNTRY_CD;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.region = s1.results[0].REGION;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.state_province = s1.results[0].STATE_PROVINCE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.city_town = s1.results[0].CITY_TOWN;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.district = s1.results[0].DISTRICT;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.barangay = s1.results[0].BARANGAY;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.sub_village = s1.results[0].SUB_VILLAGE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.block_lot = s1.results[0].BLOCK_LOT;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.street_name = s1.results[0].STREET_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.house_no = s1.results[0].HOUSE_NO;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.bldg_name = s1.results[0].BLDG_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.unit_no = s1.results[0].UNIT_NO;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.zipcode = s1.results[0].ZIPCODE;\r\n\t\t\t}\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\ttoastr.error(e1, \"Error in querying spouse's address\");\r\n\t\t});\r\n\t}\r\n\r\n\tcheckChange(bit){\r\n \r\n\t\tswitch(bit){\r\n\t\t\tcase 0:\r\n\t\t\t\t$(\"#spouse_deceased\").prop(\"checked\", false);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\t$(\"#spouse_dependent\").prop(\"checked\", false);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tvar isChecked_dependent = $('#spouse_dependent').is(\":checked\");\r\n\t\tvar isChecked_deceased = $(\"#spouse_deceased\").is(\":checked\");\r\n\t\tif(isChecked_dependent){\r\n\t\t\tthis.obj_personnel.RELATIVE.spouse.dependent_fl = 0;\r\n\t\t\tthis.obj_personnel.RELATIVE.spouse.deceased_dt = null;\r\n\t\t\t$(\"#spouse_deceased_dt\").val(\"\");\r\n\t\t\tthis._disableDeceasedDt = true;\r\n\t\t}else if(isChecked_deceased){\r\n\t\t\tthis.obj_personnel.RELATIVE.spouse.dependent_fl = 1;\r\n\t\t\tthis._disableDeceasedDt = false;\r\n\t\t}else if(isChecked_dependent == false && isChecked_deceased == false){\r\n\t\t\tthis._disableDeceasedDt = true;\r\n\t\t\tthis.obj_personnel.RELATIVE.spouse.dependent_fl = null;\t\t\t\t\r\n\t\t\tthis.obj_personnel.RELATIVE.spouse.deceased_dt = null;\r\n\t\t\t$(\"#spouse_deceased_dt\").val(\"\");\r\n\t\t}\r\n\t}\r\n\r\n\tdd_provinceChanged(){\t\t\r\n\t\tvar prov = this.obj_personnel.RELATIVE.spouse.state_province;\r\n\t\tif(prov != undefined && prov != null && prov.length!=0){\r\n\t\t\tvar selectedProv = this.obj_personnel.PROVINCE.find((p)=>{\r\n\t\t\t\tif(p.value == prov){\r\n\t\t\t\t\treturn p;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(selectedProv != null){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.region = selectedProv.group;\r\n\t\t\t\tthis.dd_regionChanged();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdd_regionChanged(){\r\n\t\tvar reg = this.obj_personnel.RELATIVE.spouse.region;\r\n\t\tif(reg != undefined && reg!=null && reg.length!=0)\r\n\t\t{\r\n\t\t\t//alert(this.obj_personnel.CONTACT.modelAddress.region);\r\n\t\t\tvar selectedRegion = this.obj_personnel.REGION.find((r)=>{\r\n\t\t\t\tif(r.value == reg)\r\n\t\t\t\t\treturn r;\r\n\t\t\t});\r\n\r\n\t\t\tif(selectedRegion != null)\r\n\t\t\t{\r\n\t\t\t\treg = this.obj_personnel.RELATIVE.spouse.country_cd = selectedRegion.group;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\tvar strValidation = \"\";\r\n\r\n\t\tthis.obj_personnel.RELATIVE.spouse.birth_dt = $(\"#spouse_birth_dt\").val();\r\n\t\tthis.obj_personnel.RELATIVE.spouse.deceased_dt = $(\"#spouse_deceased_dt\").val();\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.spouse.last_name == undefined || this.obj_personnel.RELATIVE.spouse.last_name == null || this.obj_personnel.RELATIVE.spouse.last_name.length==0){\r\n\t\t\tstrValidation+=\"No last name specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.spouse.given_name == undefined || this.obj_personnel.RELATIVE.spouse.given_name == null || this.obj_personnel.RELATIVE.spouse.given_name.length==0){\r\n\t\t\tstrValidation+=\"No given name specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.spouse.birth_dt.length>0){\r\n\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.spouse.birth_dt)).isValid()){\r\n\t\t\t\tstrValidation+=\"Invalid birth date.<br/>\";\r\n\t\t\t}else{\r\n\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.spouse.birth_dt);\r\n\t\t\t\tvar d2 = new Date();\r\n\t\t\t\tif(d1 > d2){\r\n\t\t\t\t\tstrValidation+=\"Birth date cannot be greater than date today.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tstrValidation+=\"No Birth date specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.spouse.dependent_fl == 1){\r\n\t\t\tif(this.obj_personnel.RELATIVE.spouse.deceased_dt.length>0){\r\n\t\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.spouse.deceased_dt)).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid deceased date. <br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.spouse.deceased_dt);\r\n\t\t\t\t\tvar d2 = new Date();\r\n\t\t\t\t\tif(d1>d2){\r\n\t\t\t\t\t\tstrValidation+=\"Deceased date cannot be greater than date today.<br/>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// else{\r\n\t\t\t// \tstrValidation+=\"[Mother] No deceased date specified.<br/>\";\r\n\t\t\t// }\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.spouse.country_cd == undefined || this.obj_personnel.RELATIVE.spouse.country_cd.length==0){\r\n\t\t\tstrValidation+=\"No country specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.obj_personnel.RELATIVE.spouse.relative_id == undefined || this.obj_personnel.RELATIVE.spouse.relative_id == null || this.obj_personnel.RELATIVE.spouse.relative_id==0){\r\n\t\t\t\tthis.save(this.obj_personnel.global_indiv_id);\r\n\t\t\t}else if(this.obj_personnel.RELATIVE.spouse.relative_id>0){\r\n\t\t\t\tthis.update(this.obj_personnel.RELATIVE.spouse.relative_id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsave(global_indiv_id){\r\n\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar birth_dt = null;\r\n\t\tvar deceased_dt = null;\r\n\t\tif(moment(this.obj_personnel.RELATIVE.spouse.birth_dt).isValid()){\r\n\t\t\tbirth_dt = new Date(moment(this.obj_personnel.RELATIVE.spouse.birth_dt).add(8, \"hours\"));\r\n\t\t}\r\n\r\n\t\tif(moment(this.obj_personnel.RELATIVE.spouse.deceased_dt).isValid()){\r\n\t\t\tdeceased_dt = new Date(moment(this.obj_personnel.RELATIVE.spouse.deceased_dt).add(8, \"hours\"));\r\n\t\t}\r\n\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"RELATIVE_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar maxId = 1;\r\n\t\t\t// console.log(s1.results);\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].RELATIVE_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar spouse = {\r\n\t\t\t\tRELATIVE_ID: maxId,\r\n\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\tLAST_NAME: this.obj_personnel.RELATIVE.spouse.last_name,\r\n\t\t\t\tGIVEN_NAME: this.obj_personnel.RELATIVE.spouse.given_name,\r\n\t\t\t\tMIDDLE_NAME: this.obj_personnel.RELATIVE.spouse.middle_name,\r\n\t\t\t\tBIRTH_DT: birth_dt,\r\n\t\t\t\tOCCUPATION: this.obj_personnel.RELATIVE.spouse.occupation,\r\n\t\t\t\tEMPLOYER: this.obj_personnel.RELATIVE.spouse.employer,\r\n\t\t\t\tDEPENDENT_FL: this.obj_personnel.RELATIVE.spouse.dependent_fl,\r\n\t\t\t\tDECEASED_DT: deceased_dt,\r\n\t\t\t\tRELATIVE_CD: \"SPOUSE\",\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"RELATIVE_TRX\", spouse);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\tthis.saveAddress(maxId);\r\n\t\t\t\ttoastr.success(\"\",\"Record saved.\");\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in saving spouse's details..\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying relative id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdate(relative_id){\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(\"RELATIVE_ID\", \"==\", relative_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar birth_dt = new Date(moment(this.obj_personnel.RELATIVE.spouse.birth_dt).add(8, \"hours\"));\r\n\t\t\tvar deceased_dt = null;\r\n\t\t\tif(moment(this.obj_personnel.RELATIVE.spouse.deceased_dt).isValid()){\r\n\t\t\t\tdeceased_dt = new Date(moment(this.obj_personnel.RELATIVE.spouse.deceased_dt).add(8, \"hours\"));\r\n\t\t\t}\r\n\r\n\t\t\ts1.results[0].GIVEN_NAME = this.obj_personnel.RELATIVE.spouse.given_name;\r\n\t\t\ts1.results[0].MIDDLE_NAME = this.obj_personnel.RELATIVE.spouse.middle_name;\r\n\t\t\ts1.results[0].LAST_NAME = this.obj_personnel.RELATIVE.spouse.last_name;\r\n\t\t\ts1.results[0].BIRTH_DT = birth_dt;\r\n\t\t\ts1.results[0].OCCUPATION = this.obj_personnel.RELATIVE.spouse.occupation;\r\n\t\t\ts1.results[0].EMPLOYER = this.obj_personnel.RELATIVE.spouse.employer;\r\n\t\t\ts1.results[0].DEPENDENT_FL = this.obj_personnel.RELATIVE.spouse.dependent_fl;\r\n\t\t\ts1.results[0].DECEASED_DT = deceased_dt;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.spouse.relative_addr_id == undefined || this.obj_personnel.RELATIVE.spouse.relative_addr_id == null || this.obj_personnel.RELATIVE.spouse.relative_addr_id.toString().length==0){\r\n\t\t\t\t\tthis.saveAddress(relative_id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.updateAddress(this.obj_personnel.RELATIVE.spouse.relative_addr_id);\r\n\t\t\t\t}\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\ttoastr.error(e2, \"Error in saving spouse's info.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\ttoastr.error(e1, \"Error in querying relative info.\");\r\n\t\t});\r\n\t}\r\n\r\n\tsaveAddress(relative_id){\r\n\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_ADDR_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"RELATIVE_ADDR_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar maxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].RELATIVE_ADDR_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar relative_addr_trx = {\r\n\t\t\t\tRELATIVE_ADDR_ID: maxId,\r\n\t\t\t\tRELATIVE_ID: relative_id,\r\n\t\t\t\tCOUNTRY_CD: this.obj_personnel.RELATIVE.spouse.country_cd,\r\n\t\t\t\tREGION: this.obj_personnel.RELATIVE.spouse.region,\r\n\t\t\t\tSTATE_PROVINCE: this.obj_personnel.RELATIVE.spouse.state_province,\r\n\t\t\t\tCITY_TOWN: this.obj_personnel.RELATIVE.spouse.city_town,\r\n\t\t\t\tDISTRICT: this.obj_personnel.RELATIVE.spouse.district,\r\n\t\t\t\tBARANGAY: this.obj_personnel.RELATIVE.spouse.barangay,\r\n\t\t\t\tSUB_VILLAGE: this.obj_personnel.RELATIVE.spouse.sub_village, \r\n\t\t\t\tBLOCK_LOT: this.obj_personnel.RELATIVE.spouse.block_lot,\r\n\t\t\t\tSTREET_NAME: this.obj_personnel.RELATIVE.spouse.street_name,\r\n\t\t\t\tHOUSE_NO: this.obj_personnel.RELATIVE.spouse.house_no,\r\n\t\t\t\tBLDG_NAME: this.obj_personnel.RELATIVE.spouse.bldg_name,\r\n\t\t\t\tUNIT_NO: this.obj_personnel.RELATIVE.spouse.unit_no,\r\n\t\t\t\tZIPCODE: this.obj_personnel.RELATIVE.spouse.zipcode,\r\n\t\t\t\tPERMANENT_FL:0,\r\n\t\t\t\tMAILING_FL:0,\r\n\t\t\t\tPRESENT_FL:0,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\t\t\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"RELATIVE_ADDR_TRX\", relative_addr_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\tthis.loadSpouse(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t// toastr.success(\"\", \"Relative address has been saved.\");\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tif(entity!= null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in saving relative address.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\ttoastr.error(e1, \"Error ing querying address id.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tupdateAddress(relative_addr_id){\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_ADDR_TRX\")\r\n\t\t\t\t\t.where(\"RELATIVE_ADDR_ID\", \"==\", relative_addr_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].COUNTRY_CD = this.obj_personnel.RELATIVE.spouse.country_cd;\r\n\t\t\ts1.results[0].REGION = this.obj_personnel.RELATIVE.spouse.region;\r\n\t\t\ts1.results[0].STATE_PROVINCE = this.obj_personnel.RELATIVE.spouse.state_province;\r\n\t\t\ts1.results[0].CITY_TOWN = this.obj_personnel.RELATIVE.spouse.city_town;\r\n\t\t\ts1.results[0].DISTRICT = this.obj_personnel.RELATIVE.spouse.district;\r\n\t\t\ts1.results[0].BARANGAY = this.obj_personnel.RELATIVE.spouse.barangay;\r\n\t\t\ts1.results[0].SUB_VILLAGE = this.obj_personnel.RELATIVE.spouse.sub_village;\r\n\t\t\ts1.results[0].BLOCK_LOT = this.obj_personnel.RELATIVE.spouse.block_lot;\r\n\t\t\ts1.results[0].STREET_NAME = this.obj_personnel.RELATIVE.spouse.street_name;\r\n\t\t\ts1.results[0].HOUSE_NO = this.obj_personnel.RELATIVE.spouse.house_no;\r\n\t\t\ts1.results[0].BLDG_NAME = this.obj_personnel.RELATIVE.spouse.bldg_name;\r\n\t\t\ts1.results[0].UNIT_NO = this.obj_personnel.RELATIVE.spouse.unit_no;\r\n\t\t\ts1.results[0].ZIPCODE = this.obj_personnel.RELATIVE.spouse.zipcode;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\tthis.loadSpouse(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t// toastr.success(\"\", \"\");\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\ttoastr.error(e2, \"Error in saving spouse's address info.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\ttoastr.error(e1, \"Error in querying spouse's address info.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n}","import {inject,ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {DialogController} from 'aurelia-dialog';\r\n\r\n@inject(DialogController)\r\nexport class DialogBox\r\n{\r\n\tmessage=\"Sample Message\";\r\n\ttitle=\"Sample Title\";\r\n\tconstructor(controller){\r\n\t\tthis.controller = controller;\t\r\n\t}\r\n\r\n\tactivate(info){\r\n\t\tthis.message = info.message;\r\n\t\tthis.title = info.title;\t\t\r\n\t}\r\n}","export class photo_list{\r\n\tconstructor(){\r\n\t\r\n\t}\r\n}","import {inject,ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {getLookups} from '../.././masterfiles';\r\nimport breeze from 'breeze-client';\r\nimport {EntityManager, EntityQuery} from '../../entity-manager-factory';\r\nimport {getFilter} from '../../helpers';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport toastr from \"toastr\";\r\n\r\n@inject(MultiObserver,DialogController,ObserverLocator, obj_personnel, toastr)\r\nexport class ppid_search\r\n{\r\n\tobj_personnel=null;\r\n\tvarFilterArrayLength=0;\r\n\tvarFilterArray=[];\r\n\tlstPredicates=[];\r\n\tcurrPredicate=null;\r\n\tobserverLocator=null;\r\n\tconstructor(multiObserver,controller, observerLocator, obj_personnel, toastr){\r\n\t\tthis.controller = controller;\r\n\t\tthis.observerLocator = observerLocator;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\t\r\n\t\tmultiObserver.observe([\r\n\t\t\t[this, \"_bglobal_indiv_id\"],\r\n\t\t\t//[this, \"_btin\"],\r\n\t\t\t//[this, \"_bgroup\"],\r\n\t\t\t[this, \"_blast_name\"],\r\n\t\t\t[this, \"_bfirst_name\"],\r\n\t\t\t[this, \"_bnickname\"]\r\n\t\t\t//[this, \"_bproject_name\"],\r\n\t\t\t//[this, \"_bcountry\"]\r\n\t\t], (newValue, oldValue)=> this.onSpeculateProp(newValue, oldValue));\r\n\t\t\r\n\t}\r\n\t\r\n\tfnManualFilter(tmpVar)\r\n\t{\t\t\r\n\t\tthis.lstPredicates = [];\r\n\t\t//_rppid_queries\r\n\t\t_.each(this._rppid_queries.querySelectorAll('input'), all=> {\t\t\t\t\t\t\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\")\r\n\t\t\t{\r\n\t\t\t\tif((varOb.propertyName.indexOf('global_indiv_id')>-1) /*|| (varOb.propertyName.indexOf('tin')>-1 && varOb.getValue().length>=15)*/)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(varOb.getValue().length>=17)\r\n\t\t\t\t\t\tthis.lstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b','').toUpperCase(), \"==\", varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t\telse if(!(varOb.propertyName.indexOf('global_indiv_id')>-1))\r\n\t\t\t\t{\t\t\t\t\t\r\n\t\t\t\t\tthis.lstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b','').toUpperCase().replace('FIRST_NAME','GIVEN_NAME').replace('NICKNAME','ALIAS'), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t} \r\n\t\t\t\t\r\n\t\t\t\tif(tmpVar.length>0)\r\n\t\t\t\t{\r\n\t\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn tmpVar;\r\n\t}\r\n\t\r\n\tonSpeculateProp(newValue, oldValue)\r\n\t{\r\n\t\tvar varValuesHasChanged=false;\r\n\t\t//check if inputs has value else return;\r\n\t\t_.each(this._rppid_queries.querySelectorAll('input'), all => {\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n\t\t\t{\t\r\n\t\t\t\tvarValuesHasChanged=true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tif(!varValuesHasChanged) return;\t\t\r\n\t\t\r\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\t\t\r\n\t\tif(tmpVar.length>0){\t\t\t\r\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'GLOBAL_INDIV_ID').reverse();\r\n\t\t\tthis.varFilterArray = tmpVarNew;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(this.lstPredicates.length==0)\r\n\t\t\treturn;\r\n\r\n\t\tthis.currPredicate=this.lstPredicates;\t\t\r\n\t\tsetTimeout((a)=>{\r\n\t\t\tif(a!==this.currPredicate)\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\tvar _query = EntityQuery().from('GLOBAL_INDIV_MSTR').where(breeze.Predicate.and(this.currPredicate))\r\n\t\t\t//.expand('GLOBAL_GRP_MSTR')\r\n\t\t\t.orderBy('GIVEN_NAME')\r\n\t\t\t.select('GLOBAL_INDIV_ID,GIVEN_NAME,LAST_NAME,ALIAS');\r\n\t\t\tEntityManager().executeQuery(_query).then(\r\n\t\t\t(success)=>{\r\n\t\t\t\ttmpVar=[];\r\n\t\t\t\t_.each(success.results, (all)=>{\r\n\t\t\t\t\t//console.log(all.GLOBAL_INDIV_ID);\r\n\t\t\t\t\ttmpVar.push({\r\n\t\t\t\t\t\tGLOBAL_INDIV_ID: all.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\t//TIN: all.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\t// GROUP: \"Test group\", \r\n\t\t\t\t\t\tLAST_NAME: all.LAST_NAME,\r\n\t\t\t\t\t\tFIRST_NAME: all.GIVEN_NAME,\r\n\t\t\t\t\t\tNICK_NAME: all.ALIAS,\r\n\t\t\t\t\t\t//PROJECT_NAME: \"Coming soon.\",\r\n\t\t\t\t\t\t//COUNTRY: \"PHILIPPINES\"\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\t\t\t}, \r\n\t\t\t(failed)=>{\r\n\t\t\t\t//console.log(failed);\r\n\t\t\t\ttoastr.error(failed, \"Failed loading Personnel Info\");\t\t\t\t\r\n\t\t\t})\r\n\t\t\t\r\n\t\t}, 500, this.currPredicate);\r\n\t}\r\n\t\r\n\tselectedPersonnel(item)\r\n\t{\r\n\t\tthis.obj_personnel.OBSERVERS.ppid_dialog.forEach((all)=>{\r\n\t\t\tall(item.GLOBAL_INDIV_ID);\r\n\t\t});\r\n\t\tthis.controller.ok();\r\n\t}\r\n\t\r\n\tfnKeyup(evt,item){\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis.selectedPersonnel(this.varFilterArray[0]);\r\n\t\t\t\t//this.selectedBudget(this.varFilterArray[0]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\t\r\n\t\r\n\t\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\n\r\n@inject(DialogService, obj_personnel, toastr)\r\nexport class awards_training //Experience, awards, seminar, and training.\r\n{\r\n\tobj_personnel = null;\r\n\t_404_img = \"/images/404.png\";\t\r\n\tconstructor(dialogService, obj_personnel, toastr){\r\n\t\tthis.dialogService = dialogService;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.obj_personnel.OBSERVERS.ppid_dialog.push((all)=>{\t\t\t\t\r\n\t\t\tthis.CloseSearch(all);\r\n\t\t});\r\n\t}\r\n\t\r\n\tCloseSearch(global_id)\r\n\t{\t\t\r\n\t\t//alert(\"awards:\"+global_id);\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\n\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class company_info\r\n{\r\n\tobj_personnel=null;\t\r\n\t_404_img = \"/images/404.png\";\r\n\tconstructor(obj_personnel, toastr, DialogService)\r\n\t{\r\n\t\tthis.obj_personnel=obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num == 4){\r\n\t\t\t\t$(\"#company_tab_list\").find(\".active\").removeClass(\"active\");\r\n\t\t\t\t$(\"#company_tab0\").addClass(\"active\");\r\n\t\t\t\t$(\"#company_tabs\").find(\".active\").removeClass(\"active\");\r\n\t\t\t\t$(\"#company_specific\").addClass(\"active\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tclickTab_Company(tab_num){\r\n\t\tif(this.obj_personnel.global_indiv_id.length==0)\r\n\t\t\treturn;\r\n\t\tthis.obj_personnel.OBSERVERS.company_tab_changed.forEach((delegate)=>{\r\n\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t});\r\n\t\t\t\t\t\r\n\t\t// switch(tab_num){\r\n\t\t// \tcase 0: this.obj_personnel.OBSERVERS.company_tab_changed.forEach((delegate)=>{\r\n\t\t// \t\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t// \t\t\t});\r\n\t\t// \t\t\tbreak;\r\n\t\t// \tcase 1: \r\n\t\t// \t\t\tthis.obj_personnel.OBSERVERS.company_tab_changed.forEach((delegate)=>{\r\n\t\t// \t\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t// \t\t\t});\r\n\t\t// \t\t\tbreak;\r\n\t\t// \tcase 2:\r\n\t\t// \t\t\tthis.obj_personnel.OBSERVERS.company_tab_changed.forEach((delegate)=>{\r\n\t\t// \t\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t// \t\t\t});\r\n\t\t// \t\t\tbreak;\r\n\t\t// \tcase 3: \r\n\t\t// \t\t\tthis.obj_personnel.OBSERVERS.company_tab_changed.forEach((delegate)=>{\r\n\t\t// \t\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t// \t\t\t});\r\n\t\t// \t\t\tbreak;\r\n\t\t// } \r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\nimport {OrderByDate, isDigit} from '../../helpers';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class company_info_character_ref {\r\n\r\n\tobj_personnel = null;\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\t_disableForm=true;\r\n\t_disableTable=false;\t\r\n\tformStatus=\"\";\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\t//loadCharacterRef;\r\n\t\tthis.obj_personnel.OBSERVERS.company_tab_changed.push((tab_num, global_id)=>{\r\n\t\t\tif(tab_num==2){\r\n\t\t\t\t$(\"#medical_exam_dt\").datepicker();\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading Character references...\");\r\n\t\t\t\tthis.loadCharacterRef(global_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tloadCharacterRef(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"CHAR_REF_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", global_indiv_id)\r\n\t\t\t\t\t.orderBy(\"CHAR_REF_ID\");\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar tmp=[]; \r\n\t\t\tvar tmpLog=[];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\r\n\t\t\t\tvar job = this.obj_personnel.JOB.find((x)=>{\r\n\t\t\t\t\treturn x.value == r.JOB_ID;\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t\tvar job_name = null;\r\n\t\t\t\tif(job!= null){\r\n\t\t\t\t\tjob_name = job.text;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tchar_ref_id: r.CHAR_REF_ID,\r\n\t\t\t\t\tglobal_indiv_id: r.GLOBAL_INDIV_ID,\r\n\t\t\t\t\tfull_name: r.FULL_NAME,\r\n\t\t\t\t\tcompany_name: r.COMPANY_NAME,\r\n\t\t\t\t\tphone_no: r.PHONE_NO,\r\n\t\t\t\t\tjob_name: job_name,\r\n\t\t\t\t\tjob_id: r.JOB_ID,\r\n\t\t\t\t\tjob_other: r.JOB_OTHER\r\n\t\t\t\t});\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Character references has been loaded.\");\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\tthis.obj_personnel.CHARACTER_REF.list = tmp;\r\n\t\t\ttmpLog.sort(OrderByDate);\r\n\r\n\t\t\tif(tmpLog.length>0){\r\n\r\n\t\t\t\tthis.lblCreatedBy = tmpLog[0].user + \" \" +moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tvar lastIndex = tmpLog.length-1;\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpLog[lastIndex].user + \" \" + moment.utc(tmpLog[lastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy=\"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying character ref.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tbtnAdd(){\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"ADD\";\t\t\r\n\t}\r\n\r\n\tbtnEdit(item){\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"EDIT\";\r\n\t\tif(item.job_id != null){\r\n\t\t\tthis.obj_personnel.CHARACTER_REF.model.job_id = item.job_id.toString();\r\n\t\t}else{\r\n\t\t\tthis.obj_personnel.CHARACTER_REF.model.job_id = null;\r\n\t\t}\r\n\t\tthis.obj_personnel.CHARACTER_REF.model.job_other = item.job_other;\r\n\t\tthis.obj_personnel.CHARACTER_REF.model.char_ref_id = item.char_ref_id;\r\n\t\tthis.obj_personnel.CHARACTER_REF.model.full_name = item.full_name;\r\n\t\tthis.obj_personnel.CHARACTER_REF.model.company_name = item.company_name;\r\n\t\tthis.obj_personnel.CHARACTER_REF.model.phone_no = item.phone_no;\r\n\t}\r\n\r\n\tbtnRemove(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the record?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('CHAR_REF_TRX').where('CHAR_REF_ID', '==', item.char_ref_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\", \"Record was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadCharacterRef(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.clearField();\r\n\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(error, \"Error in removing character reference.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tclearField(){\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableTable = false;\r\n\t\tthis.formStatus = \"\";\r\n\t\t// console.log(this.obj_personnel.CHARACTER_REF.model.job_id);\r\n\t\tthis.obj_personnel.CHARACTER_REF.model = {};\r\n\t\tthis.obj_personnel.CHARACTER_REF.model.job_id = \"\";\r\n\t}\r\n\r\n\tvalidate(){\r\n\r\n\t\tvar strValidation = \"\";\r\n\r\n\t\tif(this.obj_personnel.CHARACTER_REF.model.full_name == undefined || this.obj_personnel.CHARACTER_REF.model.full_name == null || this.obj_personnel.CHARACTER_REF.model.length==0){\r\n\t\t\tstrValidation+=\"No name specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.CHARACTER_REF.model.phone_no == undefined || this.obj_personnel.CHARACTER_REF.model.phone_no == null || this.obj_personnel.CHARACTER_REF.model.phone_no.length==0){\r\n\t\t\tstrValidation+=\"No contact number specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.obj_personnel.CHARACTER_REF.model.char_ref_id != undefined && this.obj_personnel.CHARACTER_REF.model.char_ref_id != null && this.obj_personnel.CHARACTER_REF.model.char_ref_id>0){\r\n\t\t\t\tthis.updateCharacterRef(this.obj_personnel.CHARACTER_REF.model.char_ref_id);\r\n\t\t\t}else{\r\n\t\t\t\tthis.saveCharacterRef(this.obj_personnel.global_indiv_id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsaveCharacterRef(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"CHAR_REF_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"CHAR_REF_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar maxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].CHAR_REF_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar char_ref = {\r\n\t\t\t\tCHAR_REF_ID: maxId,\r\n\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\tFULL_NAME: this.obj_personnel.CHARACTER_REF.model.full_name,\r\n\t\t\t\tCOMPANY_NAME: this.obj_personnel.CHARACTER_REF.model.company_name,\r\n\t\t\t\tPHONE_NO: this.obj_personnel.CHARACTER_REF.model.phone_no,\r\n\t\t\t\tJOB_ID: this.obj_personnel.CHARACTER_REF.model.job_id,\r\n\t\t\t\tJOB_OTHER: this.obj_personnel.CHARACTER_REF.model.job_other,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\t\t\tvar entity = EntityManager().createEntity(\"CHAR_REF_TRX\", char_ref);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadCharacterRef(global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in saving character ref.\");\r\n\t\t\t});\r\n\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying character ref id.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tupdateCharacterRef(char_ref_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"CHAR_REF_TRX\")\r\n\t\t\t\t\t.where(\"CHAR_REF_ID\", \"==\", char_ref_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].FULL_NAME = this.obj_personnel.CHARACTER_REF.model.full_name;\r\n\t\t\ts1.results[0].COMPANY_NAME = this.obj_personnel.CHARACTER_REF.model.company_name;\r\n\t\t\ts1.results[0].PHONE_NO = this.obj_personnel.CHARACTER_REF.model.phone_no;\r\n\t\t\ts1.results[0].JOB_ID = this.obj_personnel.CHARACTER_REF.model.job_id;\r\n\t\t\ts1.results[0].JOB_OTHER = this.obj_personnel.CHARACTER_REF.model.job_other;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record has been updated.\");\r\n\t\t\t\tthis.loadCharacterRef(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in updating character ref.\");\r\n\t\t\t});\r\n\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying character ref.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tIsDigit(event){\r\n\t\treturn isDigit(event);\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport {getLookups} from '../../masterfiles';\r\nimport {isDigit} from \"../../helpers\";\r\nimport settings from 'settings';\r\n\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class company_info_main{\r\n\t\r\n\tobj_personnel = null;\r\n\t_disableLocations = true;\r\n\t_disableIDNo = false;\r\n\t_disableStatus=true;\r\n\t_disableTabsInput = true;\r\n\t_hideSuspendField=true;\r\n\t_hideInactiveField=true;\r\n\t_hideCessationDate=true;\r\n\t_hideInactiveReason=true;\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\talreadyLoaded = false;\r\n\taccreditation_status=\"\";\r\n\taccreditation_joblist=[];\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num, global_id)=>{\r\n\t\t\tif(tab_num == 4){\r\n\t\t\t\tif(!this.alreadyLoaded){\r\n\t\t\t\t\tthis.alreadyLoaded=false;\r\n\t\t\t\t\t$(\"#_start_dt\").datepicker();\r\n\t\t\t\t\t$(\"#_end_dt\").datepicker();\r\n\t\t\t\t\t$(\"#kapamilya_dt\").datepicker();\r\n\t\t\t\t\t$(\"#membership_dt\").datepicker();\r\n\t\t\t\t\t$(\"#suspended_start_dt\").datepicker();\r\n\t\t\t\t\t$(\"#suspended_end_dt\").datepicker();\r\n\t\t\t\t\t$(\"#cessation_end_dt\").datepicker();\r\n\t\t\t\t\t$(\"#a_start_dt\").datepicker();\r\n\t\t\t\t\t$(\"#a_end_dt\").datepicker();\r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.info(\"\", \"Loading company info...\");\r\n\t\t\t\t\t// this.dd_companyChanged();\r\n\t\t\t\t\tif(this.obj_personnel.COMPANY.length>0){\r\n\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.company_id = this.obj_personnel.COMPANY[0].id;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.loadGlobalCompany(global_id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.company_tab_changed.push((tab_num, global_id)=>{\r\n\t\t\tif(tab_num==0){\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading company info...\");\r\n\t\t\t\tthis.loadGlobalCompany(global_id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.push(()=>{\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC = {\r\n\t\t\t\tmodel:{\t\t\t\t\t\r\n\t\t\t\t\tpersonnel_bank:{}\r\n\t\t\t\t},\r\n\t\t\t\tlist:[]\r\n\t\t\t}\r\n\t\t\tthis.alreadyLoaded = false;\r\n\t\t});\r\n\t}\r\n\r\n\tloadGlobalCompany(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_COMPANY_MSTR\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id)\r\n\t\t\t\t\t.orderBy(\"COMPANY_ID\");\r\n\t\tEntityManager().executeQuery(query).then((success)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(success.results, (r)=>{\r\n\t\t\t\t// var suspend = [];\r\n\t\t\t\t// if(r.STATUS_CD == \"SUSPEND\"){\r\n\t\t\t\t// \tsuspend = this.loadSuspend(global_id, r.COMPANY_ID);\r\n\t\t\t\t// }\r\n\t\t\t\t// var accreditation = this.loadAccreditation(r.GLOBAL_COMPANY_ID);\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tglobal_company_id: r.GLOBAL_COMPANY_ID,\r\n\t\t\t\t\tglobal_id: r.GLOBAL_ID,\r\n\t\t\t\t\tid_no: r.ID_NO, \r\n\t\t\t\t\tcompany_id: r.COMPANY_ID,\r\n\t\t\t\t\tstart_dt: r.START_DT,\r\n\t\t\t\t\tend_dt: r.END_DT,\r\n\t\t\t\t\tkapamilya_dt: r.KAPAMILYA_DT,\r\n\t\t\t\t\tmembership_dt: r.MEMBERSHIP_DT,\r\n\t\t\t\t\texclusive_fl: r.EXCLUSIVE_FL,\r\n\t\t\t\t\tstatus_cd: r.STATUS_CD,\r\n\t\t\t\t\tcessation_reason_cd: r.CESSATION_REASON_CD,\r\n\t\t\t\t\tremarks: r.REMARKS,\r\n\t\t\t\t\tdivision_id: r.DIVISION_ID,\r\n\t\t\t\t\tlocation_cd: r.LOCATION_CD,\r\n\t\t\t\t\tcategory_id: r.CATEGORY_ID,\r\n\t\t\t\t\tjob_id: r.JOB_ID,\r\n\t\t\t\t\tpayroll_grp_id: r.PAYROLL_GRP_ID,\r\n\t\t\t\t\tprofessional_type_cd: r.PROFESSIONAL_TYPE_CD,\r\n\t\t\t\t\tcessation_end_dt: r.CESSATION_END_DATE,\r\n\t\t\t\t\tinactive_reason_cd: r.INACTIVE_REASON_CD\r\n\t\t\t\t\t// accreditation: accreditation\r\n\t\t\t\t\t// suspend_id: suspend.length==0?0: suspend[0].suspend_id,\r\n\t\t\t\t\t// suspended_start_dt: suspend.length==0?\"\":suspend[0].start_dt,\r\n\t\t\t\t\t// suspended_end_dt: suspend.length==0?\"\":suspend[0].end_dt\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.list = tmp;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Company info has been loaded...\");\r\n\t\t\tif(this.obj_personnel.COMPANY.length>0){\r\n\t\t\t\t// this.obj_personnel.COMPANY_SPECIFIC.model.company_id = this.obj_personnel.COMPANY[0].id;\r\n\t\t\t\t// console.log(tmp);\r\n\t\t\t\tthis.dd_companyChanged();\r\n\t\t\t}\r\n\t\t\tsettings.isNavigating = false;\r\n\r\n\t\t}, (failed)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(failed, \"error in fetching company specific data.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tloadAccreditation(global_company_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"ACCREDITATION_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_COMPANY_ID\", \"==\", global_company_id);\r\n\t\tvar accreditation = [];\r\n\t\tEntityManager().executeQuery(query).then((success)=>{\r\n\t\t\t_.each(success.results, (r)=>{\r\n\r\n\t\t\t\tvar job_group = this.obj_personnel.JOB_GROUP.find((x)=>{ return x.id==r.JOB_GRP_ID; });\r\n\t\t\t\tvar job = this.obj_personnel.JOB.find((x)=> { return x.value==r.JOB_ID; });\r\n\t\t\t\tvar division = this.obj_personnel.DIVISION.find((x)=>{ return x.id==r.DIVISION_ID; });\r\n\t\t\t\tvar _eff_start_dt = moment.utc(r.EFF_START_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\tvar _eff_end_dt = moment.utc(r.EFF_END_DT).format(\"MM/DD/YYYY\");\r\n\r\n\t\t\t\taccreditation.push({\r\n\t\t\t\t\taccreditation_id: r.ACCREDITATION_ID,\r\n\t\t\t\t\tglobal_company_id: r.GLOBAL_COMPANY_ID,\r\n\t\t\t\t\t// eff_start_dt: r.EFF_START_DT,\r\n\t\t\t\t\t// eff_end_dt: r.EFF_END_DT,\r\n\t\t\t\t\teff_start_dt: _eff_start_dt,\r\n\t\t\t\t\teff_end_dt: _eff_end_dt,\r\n\t\t\t\t\tdivision_id: r.DIVISION_ID,\r\n\t\t\t\t\tdivision_text: division.text,\r\n\t\t\t\t\tcategory_id: r.CATEGORY_ID,\t\t\t\t\t\r\n\t\t\t\t\tjob_grp_id: r.JOB_GRP_ID,\r\n\t\t\t\t\tjob_grp_text: job_group.text,\r\n\t\t\t\t\tjob_id: r.JOB_ID,\r\n\t\t\t\t\tjob_text: job.text,\r\n\t\t\t\t\tcompetency: r.COMPETENCY,\r\n\t\t\t\t\thome_fl: r.HOME_FL,\r\n\t\t\t\t\tentry_fl: r.ENTRY_FL,\r\n\t\t\t\t\taccreditation_memo: r.ACCREDITATION_MEMO\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.accreditation_list = accreditation;\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t}, (failed)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(failed, \"Error in fetching company specific data.\");\r\n\t\t});\r\n\t}\r\n\r\n\tloadSuspend(global_id, company_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar pred1 = breeze.Predicate.create('GLOBAL_ID', '==', global_id);\t\t\r\n\t\tvar pred2 = breeze.Predicate.create('SUSPEND_LEVEL', '==', 2);\r\n\t\tvar pred3 = breeze.Predicate.create(\"COMPANY_ID\", \"==\", company_id);\r\n\t\tvar finalPred = breeze.Predicate.and([pred1, pred2]);\r\n\t\tvar query = EntityQuery().from(\"SUSPEND_TRX\")\r\n\t\t\t\t\t.where(finalPred).orderByDesc(\"SUSPEND_ID\").take(1);\r\n\t\tvar suspend = [];\r\n\t\tEntityManager().executeQuery(query).then((success)=>{\r\n\t\t\t\r\n\t\t\tif(success.results.length>0){\r\n\t\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\t\tsuspend.push({\r\n\t\t\t\t\t\tsuspend_id: result.SUSPEND_ID,\r\n\t\t\t\t\t\tstart_dt: result.START_DT,\r\n\t\t\t\t\t\tend_dt: result.END_DT,\r\n\t\t\t\t\t\tcompany_id: result.COMPANY_ID\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspend_id = suspend[0].suspend_id;\r\n\r\n\t\t\t\tvar suspended_start_dt = moment.utc(suspend[0].start_dt).format(\"MM/DD/YYYY\");\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt = suspended_start_dt;\r\n\t\t\t\tif(suspended_start_dt.length>0)\r\n\t\t\t\t{\r\n\t\t\t\t\t$(\"#suspended_start_dt\").datepicker(\"setValue\", suspended_start_dt);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar suspended_end_dt = moment.utc(suspend[0].end_dt).format(\"MM/DD/YYYY\");\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt = suspended_end_dt;\r\n\t\t\t\tif(suspended_start_dt.length>0)\r\n\t\t\t\t{\t\t\t\t\t\t\r\n\t\t\t\t\t$(\"#suspended_end_dt\").datepicker(\"setValue\", suspended_end_dt);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t}, (error)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(error, \"Error in fetching company specific data.\");\r\n\t\t});\r\n\t\t// return suspend;\r\n\t}\r\n\r\n\tloadPersonnelBank(global_company_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar pred1 = breeze.Predicate.create(\"GLOBAL_COMPANY_ID\", \"==\", global_company_id);\r\n\t\tvar pred2 = breeze.Predicate.create(\"ACCOUNT_NO\", \"!=\", \"CHECK\");\r\n\t\tvar finalPred = breeze.Predicate.and([pred1, pred2]);\r\n\t\tvar query = EntityQuery().from(\"PERSONNEL_BANK_TRX\")\r\n\t\t\t\t\t.where(finalPred).take(1);\r\n\t\t\t\t\t// .where(\"GLOBAL_COMPANY_ID\", \"==\", global_company_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\t// console.log(\"PERSONNEL BANK\");\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.personnel_bank_id = s1.results[0].PERSONNEL_BANK_ID;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.global_company_id = s1.results[0].GLOBAL_COMPANY_ID;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.bank_id = s1.results[0].BANK_ID+\"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.acct_name = s1.results[0].ACCT_NAME;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.account_no = s1.results[0].ACCOUNT_NO;\r\n\t\t\t}else{\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.personnel_bank_id = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.global_company_id = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.bank_id=\"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.acct_name = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.account_no = \"\";\r\n\t\t\t}\r\n\t\t\tthis.dd_bankChanged();\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying personnel bank info.\");\r\n\t\t});\r\n\t}\r\n\r\n\tloadLog(global_company_id){\r\n\t\tvar tmpList = [];\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_COMPANY_MSTR\")\r\n\t\t\t\t\t.where(\"GLOBAL_COMPANY_ID\", \"==\", global_company_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tif(s1.results[0].CREATED_BY != null){\r\n\t\t\t\t\tvar user = s1.results[0].CREATED_BY;\r\n\t\t\t\t\tvar date = new Date(s1.results[0].CREATED_DT);\r\n\t\t\t\t\tthis.lblCreatedBy = user + ' ' + moment.utc(date).format(\"MM/DD/YYYY hh:mm A\");\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(s1.results[0].LAST_UPDATED_BY != null){\r\n\t\t\t\t\tvar user = s1.results[0].LAST_UPDATED_BY;\r\n\t\t\t\t\tvar date = new Date(s1.results[0].LAST_UPDATED_DT);\r\n\t\t\t\t\tthis.lblUpdatedBy = user + ' ' + moment.utc(date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// _.each(s1.results, (r)=>{\r\n\t\t\t// \tif(r.CREATED_BY != null){\r\n\t\t\t// \t\ttmpList.push({\r\n\t\t\t// \t\t\tuser: r.CREATED_BY,\r\n\t\t\t// \t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t// \t\t});\r\n\t\t\t// \t}\r\n\r\n\t\t\t// \tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t// \t\ttmpList.push({\r\n\t\t\t// \t\t\tuseR: r.LAST_UPDATED_BY,\r\n\t\t\t// \t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t// \t\t});\r\n\t\t\t// \t}\r\n\t\t\t// });\r\n\r\n\t\t\t// tmpList.sort(this.OrderByDate);\r\n\t\t\t// var LastIndex = tmpList.length-1;\r\n\t\t\t// if(tmpList.length>0){\r\n\r\n\t\t\t// \tthis.lblCreatedBy = tmpList[0].user + ' ' +moment.utc(tmpList[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t// \tif(tmpList.length>1){\r\n\t\t\t// \t\tthis.lblUpdatedBy = tmpList[LastIndex].user + ' ' + moment.utc(tmpList[LastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t// \t}else{\r\n\t\t\t// \t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t// \t}\r\n\r\n\t\t\t// }else{\r\n\t\t\t// \tthis.lblCreatedBy = \"\";\r\n\t\t\t// \tthis.lblUpdatedBy = \"\";\r\n\t\t\t// }\r\n\r\n\r\n\t\t});\r\n\r\n\t} \r\n\r\n\tOrderByDate(a, b){\r\n\t\tif(a.date > b.date)\r\n\t\t\treturn 1;\r\n\t\tif(a.date < b.date)\r\n\t\t\treturn -1;\r\n\t\treturn 0;\t\t\r\n\t}\r\n\r\n\tloadJobDropdown(){\r\n\t\tthis.obj_personnel.JOB=[];\r\n\t\t_.each(this.obj_personnel.JOB_GROUP, (jc)=>{\r\n\t\t\tgetLookups().JOB_MSTR.forEach((j)=>{\r\n\t\t\t\tif(j.JOB_GRP_ID == jc.id){\r\n\t\t\t\t\tthis.obj_personnel.JOB.push({\r\n\t\t\t\t\t\t//id: j.JOB_ID,\r\n\t\t\t\t\t\tvalue: j.JOB_ID,\r\n\t\t\t\t\t\ttext: j.JOB_DESC,\r\n\t\t\t\t\t\tgroup: j.JOB_GRP_ID\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\tthis.obj_personnel.JOB.sort(this.OrderByText);\t\t\r\n\t\r\n\t}\r\n\r\n\tdd_companyChanged(){\r\n\r\n\t\tvar company_id = this.obj_personnel.COMPANY_SPECIFIC.model.company_id;\r\n\r\n\t\tif(company_id == 2 || company_id == 3 || company_id == 4  || company_id==7 || company_id == 8){\r\n\t\t\tthis._disableIDNo = false;\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.id_no = \"\";\r\n\t\t}else{\r\n\t\t\tthis._disableIDNo = true;\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.id_no = \"000000\";\r\n\t\t}\r\n\r\n\t\tvar global_company = this.obj_personnel.COMPANY_SPECIFIC.list.find((gc)=>{\r\n\t\t\treturn gc.company_id == company_id;\r\n\t\t});\r\n\r\n\t\tif(getLookups() != null){\r\n\r\n\t\t\tthis.obj_personnel.DIVISION=[];\r\n\t\t\tthis.obj_personnel.CATEGORY=[];\r\n\t\t\tthis.obj_personnel.JOB_GROUP=[];\r\n\t\t\t// if(selectedCompany.id == 1){\r\n\t\t\t// \tthis.obj_personnel.JOB_CATEGORY.push({\r\n\t\t\t// \t\tid:0,\r\n\t\t\t// \t\tvalue: \"\",\r\n\t\t\t// \t\ttext: \"(OBSOLETE-NO-USE)\"\r\n\t\t\t// \t});\r\n\t\t\t// }\r\n\r\n\t\t\tgetLookups().DIVISION_MSTR.forEach((d)=>{\r\n\t\t\t\tif(d.COMPANY_ID == company_id){\r\n\t\t\t\t\tthis.obj_personnel.DIVISION.push({\r\n\t\t\t\t\t\tid: d.DIVISION_ID,\r\n\t\t\t\t\t\tlevel: d.DIVISION_LEVEL,\r\n\t\t\t\t\t\tvalue: d.DIVISION_CD,\r\n\t\t\t\t\t\ttext: d.DIVISION_NAME\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgetLookups().CATEGORY_MSTR.forEach((c)=>{\r\n\t\t\t\tif(c.COMPANY_ID == company_id){\r\n\t\t\t\t\tthis.obj_personnel.CATEGORY.push({\r\n\t\t\t\t\t\tid: c.CATEGORY_ID,\r\n\t\t\t\t\t\tvalue: c.CATEGORY_CD,\r\n\t\t\t\t\t\ttext: c.CATEGORY_DESC\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgetLookups().JOB_GRP_MSTR.forEach((j)=>{\r\n\t\t\t\tif(j.COMPANY_ID == company_id){\r\n\t\t\t\t\tthis.obj_personnel.JOB_GROUP.push({\r\n\t\t\t\t\t\tid: j.JOB_GRP_ID,\r\n\t\t\t\t\t\tvalue: j.JOB_GRP_CD,\r\n\t\t\t\t\t\ttext: j.JOB_GRP_DESC\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.JOB_GROUP.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.CATEGORY.sort(this.OrderByText);\r\n\r\n\t\t\tif(global_company != null && global_company != undefined){\r\n\t\t\t\tthis._disableStatus = false;\r\n\t\t\t\tthis._disableTabsInput = false;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.global_company_id = global_company.global_company_id;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.id_no = global_company.id_no;\r\n\t\t\t\tconsole.log(global_company.start_dt);\r\n\t\t\t\tif(moment(global_company.start_dt).isValid()){\r\n\t\t\t\t\tvar startDt = moment.utc(global_company.start_dt).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\tif(startDt != \"01/01/0001\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.start_dt = startDt;\r\n\t\t\t\t\t\t$(\"#_start_dt\").datepicker(\"setValue\", new Date(startDt));\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.start_dt = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.start_dt = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(moment(global_company.end_dt).isValid()){\r\n\t\t\t\t\tvar endDt = moment.utc(global_company.end_dt).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\tif(endDt != \"01/01/0001\"){\r\n\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.end_dt = endDt;\r\n\t\t\t\t\t\t$(\"#_end_dt\").datepicker(\"setValue\", new Date(endDt));\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.end_dt=\"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.end_dt=\"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(moment(global_company.kapamilya_dt).isValid()){\r\n\t\t\t\t\tvar kapamilya_dt = moment.utc(global_company.kapamilya_dt).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\tif(kapamilya_dt != \"01/01/0001\"){\r\n\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.kapamilya_dt = kapamilya_dt;\r\n\t\t\t\t\t\t$(\"#kapamilya_dt\").datepicker(\"setValue\", new Date(kapamilya_dt));\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.kapamilya_dt = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.kapamilya_dt = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(moment(global_company.membership_dt).isValid()){\r\n\t\t\t\t\tvar membership_dt = moment.utc(global_company.membership_dt).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\tif(membership_dt != \"01/01/0001\"){\r\n\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.membership_dt = membership_dt;\r\n\t\t\t\t\t\t$(\"#membership_dt\").datepicker(\"setValue\", new Date(membership_dt));\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.membership_dt = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.membership_dt = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(moment(global_company.cessation_end_dt).isValid()){\r\n\t\t\t\t\tvar cessation_dt = moment.utc(global_company.cessation_end_dt).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt = cessation_dt;\r\n\t\t\t\t\t$(\"#cessation_end_dt\").datepicker(\"setValue\", new Date(cessation_dt));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_dt = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.exclusive_fl = global_company.exclusive_fl==\"1\"?true:false;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.status_cd = global_company.status_cd;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd = global_company.cessation_reason_cd;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.remarks = global_company.remarks;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.division_id = global_company.division_id+\"\";\r\n\t\t\t\t// this.obj_personnel.COMPANY_SPECIFIC.model.division_cd = this.obj_personnel.DIVISION[0].value;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.location_cd = global_company.location_cd;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.category_id= global_company.category_id+\"\";\t\t\t\t\t\r\n\t\t\t\t// this.obj_personnel.COMPANY_SPECIFIC.model.category_id = this.obj_personnel.CATEGORY[0].value;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.payroll_grp_id = global_company.payroll_grp_id+\"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.professional_type_cd = global_company.professional_type_cd;\r\n\t\t\t\tif(global_company.status_cd == \"SUSPEND\"){\t\t\t\t\t\r\n\t\t\t\t\tthis.loadSuspend(global_company.global_id, global_company.company_id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.accreditation = global_company.accreditation;\r\n\t\t\t\tthis.loadJobDropdown();\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.job_id = global_company.job_id+\"\";\r\n\t\t\t\tthis.loadAccreditation(global_company.global_company_id);\r\n\t\t\t\tthis.loadPersonnelBank(global_company.global_company_id);\r\n\t\t\t\tthis.loadLog(global_company.global_company_id);\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.inactive_reason_cd = global_company.inactive_reason_cd;\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis._disableStatus = true;\r\n\t\t\t\tthis._disableTabsInput = true;\r\n\t\t\t\t// this.obj_personnel.COMPANY_SPECIFIC.model = {};\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.global_company_id = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.status_cd=\"ACTV\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.start_dt = \"\";\t\t\t\t\t\t\t\t\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.end_dt= \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.kapamilya_dt = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.membership_dt = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.remarks = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.exclusive_fl = false;\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\tif(this.obj_personnel.DIVISION.length>0)\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.division_id = this.obj_personnel.DIVISION[0].id;\r\n\t\t\t\tif(this.obj_personnel.CATEGORY.length>0)\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.category_id = this.obj_personnel.CATEGORY[0].id;\t\t\t\r\n\r\n\t\t\t\tthis.loadJobDropdown();\t\t\t\t\r\n\r\n\t\t\t\tif(this.obj_personnel.JOB.length>0)\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.job_id = this.obj_personnel.JOB[0].value;\r\n\r\n\t\t\t\tif(this.obj_personnel.PAYROLL_GROUP.length>0)\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.payroll_grp_id = this.obj_personnel.PAYROLL_GROUP[0].id;\r\n\t\t\t\tif(this.obj_personnel.PROFESSIONAL_TYPE.length>0)\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.professional_type_cd = this.obj_personnel.PROFESSIONAL_TYPE[0].value;\r\n\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspend_id = 0;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.accreditation_list=[];\r\n\t\t\t\t\r\n\t\t\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank != undefined && this.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank != null){\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.personnel_bank_id = \"\";\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.global_company_id = \"\";\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.bank_id=\"\";\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.acct_name = \"\";\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.account_no = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.inactive_reason_cd = \"\";\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.JOB_GROUP.length>0){\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_job_grp_id = this.obj_personnel.JOB_GROUP[0].id;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis.dd_jobGroupChange();\r\n\t\t\tthis.dd_divisionChanged();\r\n\t\t\tthis.dd_statusChanged();\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\tdd_divisionChanged(){\r\n\t\tvar division_id  = this.obj_personnel.COMPANY_SPECIFIC.model.division_id;\r\n\t\tvar division = this.obj_personnel.DIVISION.find((d)=>{\r\n\t\t\treturn d.id == division_id;\r\n\t\t});\r\n\r\n\t\t// console.log(this.obj_personnel.COMPANY_SPECIFIC.model.division_cd);\r\n\t\tif((division != undefined && division != null) && division.text.indexOf(\"REGIONAL DIVISION\")  != -1){\r\n\t\t\tthis._disableLocations = false;\r\n\t\t}else{\r\n\t\t\tthis._disableLocations = true;\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.location_cd = \"--NONE--\";\r\n\t\t}\r\n\t}\r\n\r\n\tdd_statusChanged(){\r\n\t\tvar stat = this.obj_personnel.COMPANY_SPECIFIC.model.status_cd;\r\n\t\tif(stat==\"ACTV\"){\r\n\t\t\tthis._hideInactiveField = true;\r\n\t\t\tthis._hideSuspendField = true;\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd=\"\";\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt=\"\";\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.remarks = \"\";\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt = \"\";\r\n\t\t\t$(\"#suspended_start_dt\").val(\"\");\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt=\"\";\r\n\t\t\t$(\"#suspended_end_dt\").val(\"\");\r\n\t\t}else if(stat==\"INACTV\"){\r\n\t\t\tthis._hideInactiveField = false;\r\n\t\t\tthis._hideSuspendField = true;\r\n\t\t\tthis.dd_cessationStatusChanged();\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt = \"\";\r\n\t\t\t$(\"#suspended_start_dt\").val(\"\");\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt=\"\";\r\n\t\t\t$(\"#suspended_end_dt\").val(\"\");\r\n\t\t}else if(stat==\"SUSPEND\"){\t\t\t\r\n\t\t\tthis._hideInactiveField = true;\r\n\t\t\tthis._hideSuspendField = false;\t\t\t\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd=\"\";\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt=\"\";\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.remarks = \"\";\r\n\t\t}\r\n\t}\r\n\r\n\tdd_cessationStatusChanged(){\r\n\t\tvar cess_cd = this.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd;\r\n\t\tswitch(cess_cd){\t\t\t\r\n\t\t\tcase \"DECEASED\":\r\n\t\t\tcase \"RETIRED\":\r\n\t\t\tcase \"RESIGNED\":\r\n\t\t\tcase \"END_CONTRACT\":\r\n\t\t\tcase \"TERMINATION\": this._hideCessationDate = false;\r\n\t\t\t\t\t\t\t\tthis._hideInactiveReason = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"INACTIVE\": this._hideInactiveReason = false;\r\n\t\t\t\t\t\t\t this._hideCessationDate = true;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: this._hideCessationDate = true;\r\n\t\t\t\t\t this._hideInactiveReason = true;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt = \"\";\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(){\r\n\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.start_dt = $(\"#_start_dt\").val();\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt = $(\"#cessation_end_dt\").val();\r\n\t\tvar strValidation = \"\";\r\n\r\n\t\t// if(this.obj_personnel.COMPANY_SPECIFIC.model.start_dt == null || this.obj_personnel.COMPANY_SPECIFIC.model.start_dt.length==0){\r\n\t\t// \tstrValidation+= \"No start date specified. <br/>\";\r\n\t\t// }\r\n\r\n\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.id_no == undefined || this.obj_personnel.COMPANY_SPECIFIC.model.id_no == null || this.obj_personnel.COMPANY_SPECIFIC.model.id_no.length==0){\r\n\t\t\tstrValidation+=\"No id number specified. <br/>\";\r\n\t\t}\t\t\r\n\r\n\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.status_cd == \"SUSPEND\"){\r\n\r\n\t\t\tvar sus_start = null;\r\n\t\t\tvar sus_end = null;\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt = $(\"#suspended_start_dt\").val();\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt = $(\"#suspended_end_dt\").val();\r\n\t\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt != undefined && this.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt != null && this.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt.length>0){\r\n\t\t\t\tif(!moment(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid suspension start date.<br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsus_start = new Date(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+= \"No start date of suspension specified.<br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt != undefined && this.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt != null && this.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt.length>0){\t\t\t\r\n\t\t\t\tif(!moment(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid suspension end date.<br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsus_end = new Date(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+= \"No end date of suspension specified.<br/>\";\t\r\n\t\t\t}\r\n\r\n\t\t\tif(sus_start != null && sus_end != null){\r\n\t\t\t\tif(sus_end < sus_start){\r\n\t\t\t\t\tstrValidation+= \"end date of suspension cannot be greater than the start date.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else if(this.obj_personnel.COMPANY_SPECIFIC.model.status_cd == \"INACTV\"){\r\n\t\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd == undefined || this.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd == null || this.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd.length == 0){\r\n\t\t\t\tstrValidation+=\"No Reason of cessation specified.<br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(!this._hideCessationDate){\r\n\t\t\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt != undefined && this.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt != null && this.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt.length>0){\r\n\t\t\t\t\tif(!moment(this.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt).isValid()){\r\n\t\t\t\t\t\tstrValidation += \"Invalid cessation date.<br/>\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar cess_cd = this.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd;\r\n\t\t\t\t\t\tif(cess_cd==\"DECEASED\"){\r\n\t\t\t\t\t\t\tvar cessation_dt = new Date(this.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt);\r\n\t\t\t\t\t\t\tvar today = new Date();\r\n\t\t\t\t\t\t\tif(cessation_dt > today)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tstrValidation+=\"Are you planning to kill the user?<br/>\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tstrValidation+=\"No cessation date specified.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar selectedBank = this.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.bank_id;\r\n\t\tif(selectedBank != undefined && selectedBank.length > 0){\r\n\t\t\tvar account_no = this.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.account_no;\r\n\t\t\tif(account_no == undefined || account_no.length==0){\r\n\t\t\t\tstrValidation+= \"No account number specified.<br/>\";\r\n\t\t\t}else if(account_no.length!=10){\r\n\t\t\t\tstrValidation+=\"Account number must be 10 digit.<br/>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.end_dt = $(\"#_end_dt\").val();\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.kapamilya_dt = $(\"#kapamilya_dt\").val();\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.membership_dt = $(\"#membership_dt\").val();\r\n\t\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.exclusive_fl == undefined)\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.exclusive_fl = false;\r\n\t\t\t// console.log(this.obj_personnel.COMPANY_SPECIFIC.model.company_id);\r\n\t\t\t// console.log(this.obj_personnel.COMPANY_SPECIFIC.model.global_company_id);\r\n\t\t\tvar cid = this.obj_personnel.COMPANY_SPECIFIC.model.company_id;\r\n\t\t\tvar gcid = this.obj_personnel.COMPANY_SPECIFIC.model.global_company_id;\r\n\t\t\tif(gcid.length==0){\r\n\t\t\t\tthis.saveCompany(cid);\r\n\t\t\t}else{\r\n\t\t\t\tthis.updateCompany(gcid);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconvertToGMT8(date){\r\n\t\tif(date==undefined || date == null || date.length==0)\r\n\t\t\treturn \"\";\r\n\t\tvar tempDt = moment(date).add(8, 'hours');\r\n\t\treturn new Date(tempDt);\r\n\t}\r\n\r\n\tsaveCompany(company_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n\r\n  \t\tvar lstart_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.start_dt);\r\n  \t\tvar lend_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.end_dt);\r\n  \t\tvar lkapmilya_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.kapamilya_dt);\r\n  \t\tvar lmembership_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.membership_dt);\r\n  \t\tvar lcessation_end_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt);\r\n\r\n\t\tvar LastID = \"000000\";\r\n\t\tvar currentYear = (new Date()).getFullYear().toString().substring(2,4);\r\n\t\tvar query = EntityQuery().from(\"COMPANY_SPECIFIC_INDEX\")\r\n\t\t\t\t\t.where(\"COMPANY_SPECIFIC_ID\", \"==\", company_id).take(1);\r\n\t\tEntityManager().executeQuery(query).then((s)=>{\r\n\t\t\tLastID = s.results[0].COMPANY_INDEX;\r\n\t\t\tvar lastYear = LastID.toString().substring(0,2);\r\n\t\t\tif(lastYear != currentYear){\r\n\t\t\t\tLastID = currentYear + \"0001\";\t\t\r\n\t\t\t}\r\n\r\n\t\t\tquery = EntityQuery().from(\"GLOBAL_COMPANY_MSTR\")\r\n\t\t\t\t\t.orderByDesc(\"GLOBAL_COMPANY_ID\").take(1);\r\n\t\t\tEntityManager().executeQuery(query).then((s2)=>{\r\n\t\t\t\tvar maxID = 1;\r\n\t\t\t\tif(s2.results.length>0){\r\n\t\t\t\t\tmaxID = s2.results[0].GLOBAL_COMPANY_ID+1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar global_company_mstr = {\r\n\t\t\t\t\tGLOBAL_ID: this.obj_personnel.global_indiv_id,\r\n\t\t\t\t\tSTART_DT: lstart_dt.length==0?null: lstart_dt,\r\n\t\t\t\t\tEND_DT: lend_dt.length==0?null:lend_dt,\r\n\t\t\t\t\tCOMPANY_ID: company_id,\r\n\t\t\t\t\tGLOBAL_COMPANY_ID: maxID,\r\n\t\t\t\t\tID_NO: LastID,\r\n\t\t\t\t\tCESSATION_REASON_CD: this.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd,\r\n\t\t\t\t\tCATEGORY_ID: this.obj_personnel.COMPANY_SPECIFIC.model.category_id,\r\n\t\t\t\t\tDIVISION_ID: this.obj_personnel.COMPANY_SPECIFIC.model.division_id,\r\n\t\t\t\t\tPAYROLL_GRP_ID: this.obj_personnel.COMPANY_SPECIFIC.model.payroll_grp_id,\r\n\t\t\t\t\tJOB_ID: this.obj_personnel.COMPANY_SPECIFIC.model.job_id,\r\n\t\t\t\t\tPROFESSIONAL_TYPE_CD: this.obj_personnel.COMPANY_SPECIFIC.model.professional_type_cd,\r\n\t\t\t\t\tSTATUS_CD: this.obj_personnel.COMPANY_SPECIFIC.model.status_cd,\r\n\t\t\t\t\tEXCLUSIVE_FL: this.obj_personnel.COMPANY_SPECIFIC.model.exclusive_fl?\"1\":\"0\",\r\n\t\t\t\t\tREMARKS: this.obj_personnel.COMPANY_SPECIFIC.model.remarks,\r\n\t\t\t\t\tKAPAMILYA_DT: lkapmilya_dt.length==0?null: lkapmilya_dt,\r\n\t\t\t\t\tMEMBERSHIP_DT: lmembership_dt.length==0?null: lmembership_dt,\r\n\t\t\t\t\tLOCATION_CD: this.obj_personnel.COMPANY_SPECIFIC.model.location_cd,\r\n\t\t\t\t\tCESSATION_END_DATE: lcessation_end_dt.length==0? null: lcessation_end_dt,\t\t\t\t\t\r\n\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tvar entity = EntityManager().createEntity(\"GLOBAL_COMPANY_MSTR\", global_company_mstr);\r\n\t\t\t\tEntityManager().addEntity(entity);\r\n\t\t\t\tEntityManager().saveChanges().then((s3)=>{\r\n\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\t\tthis.updateCompanyIndex(company_id, LastID);\r\n\t\t\t\t\tthis.loadGlobalCompany(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t}, (e3)=>{\r\n\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\tif(entity != null){\r\n\t\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// console.log(e3);\r\n\t\t\t\t\ttoastr.error(e3, \"Error in saving global company mstr.\");\r\n\t\t\t\t});\r\n\t\t\t},(e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t// console.log(e2);\r\n\t\t\t\ttoastr.clear(e2, \"Error in getting global company id.\")\r\n\t\t\t});\r\n\t\t\t\r\n\t\t},(e)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\t// console.log(e);\r\n\t\t\ttoastr.error(e, \"Error in generating ID.\");\r\n\t\t});\r\n\t\t\r\n\t}\r\n\r\n\tupdateCompany(global_company_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n\r\n\t\tvar lstart_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.start_dt);\r\n  \t\tvar lend_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.end_dt); \r\n  \t\tvar lkapamilya_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.kapamilya_dt);\r\n  \t\tvar lmembership_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.membership_dt);\r\n  \t\tvar lcessation_end_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.cessation_end_dt);\r\n  \t\tvar lsuspend_start_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt);\r\n  \t\tvar lsuspend_end_dt = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt);\r\n\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_COMPANY_MSTR\")\r\n\t\t\t\t\t.where(\"GLOBAL_COMPANY_ID\", \"==\", global_company_id);\r\n\t\tEntityManager().executeQuery(query).then((s)=>{\r\n\r\n\t\t\ts.results[0].START_DT = lstart_dt;\r\n\t\t\ts.results[0].END_DT = lend_dt;\r\n\t\t\ts.results[0].KAPAMILYA_DT = lkapamilya_dt;\r\n\t\t\ts.results[0].MEMBERSHIP_DT = lmembership_dt;\r\n\t\t\ts.results[0].EXCLUSIVE_FL = this.obj_personnel.COMPANY_SPECIFIC.model.exclusive_fl?\"1\":\"0\";\r\n\t\t\ts.results[0].DIVISION_ID = this.obj_personnel.COMPANY_SPECIFIC.model.division_id;\r\n\t\t\ts.results[0].LOCATION_CD = this.obj_personnel.COMPANY_SPECIFIC.model.location_cd;\r\n\t\t\ts.results[0].CATEGORY_ID = this.obj_personnel.COMPANY_SPECIFIC.model.category_id;\r\n\t\t\ts.results[0].JOB_ID = this.obj_personnel.COMPANY_SPECIFIC.model.job_id;\r\n\t\t\ts.results[0].PAYROLL_GRP_ID = this.obj_personnel.COMPANY_SPECIFIC.model.payroll_grp_id;\r\n\t\t\ts.results[0].PROFESSIONAL_TYPE_CD = this.obj_personnel.COMPANY_SPECIFIC.model.professional_type_cd;\r\n\t\t\ts.results[0].STATUS_CD = this.obj_personnel.COMPANY_SPECIFIC.model.status_cd;\r\n\t\t\tswitch(this.obj_personnel.COMPANY_SPECIFIC.model.status_cd){\t\t\t\t\r\n\t\t\t\tcase \"INACTV\":\r\n\t\t\t\t\ts.results[0].CESSATION_REASON_CD = this.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd;\r\n\t\t\t\t\ts.results[0].CESSATION_END_DATE = lcessation_end_dt.length==0?null: lcessation_end_dt;\r\n\t\t\t\t\ts.results[0].INACTIVE_REASON_CD = this.obj_personnel.COMPANY_SPECIFIC.model.inactive_reason_cd;\r\n\t\t\t\t\ts.results[0].REMARKS = this.obj_personnel.COMPANY_SPECIFIC.model.remarks;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"SUSPEND\": \r\n\t\t\t\tcase \"ACTV\": \r\n\t\t\t\t\ts.results[0].CESSATION_REASON_CD = null;\r\n\t\t\t\t\ts.results[0].CESSATION_END_DATE = null;\r\n\t\t\t\t\ts.results[0].REMARKS = null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\ts.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s1)=>{\r\n\r\n\t\t\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.status_cd == \"SUSPEND\"){\r\n\t\t\t\t\t// this.obj_personnel.COMPANY_SPECIFIC.model.suspend_id\r\n\t\t\t\t\t// console.log(this.obj_personnel.COMPANY_SPECIFIC.model.suspend_id); \r\n\t\t\t\t\tvar suspend_id = this.obj_personnel.COMPANY_SPECIFIC.model.suspend_id;\r\n\t\t\t\t\tif(suspend_id == undefined || suspend_id == null || suspend_id==0){\r\n\t\t\t\t\t\t//insert\r\n\t\t\t\t\t\tthis.saveSuspend(suspend_id, lsuspend_start_dt, lsuspend_end_dt);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//update\r\n\t\t\t\t\t\tthis.updateSuspend(suspend_id, lsuspend_start_dt, lsuspend_end_dt);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar pbi = this.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.personnel_bank_id; \r\n\t\t\t\tvar bank_id = this.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.bank_id;\r\n\t\t\t\tvar account_name = this.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.acct_name;\r\n\t\t\t\tvar account_no = this.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.account_no;\r\n\t\t\t\tif(pbi == undefined || pbi.toString().length==0){\r\n\t\t\t\t\tif(bank_id != undefined && bank_id.toString().length>0){\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.savePersonnelBank(global_company_id, bank_id, account_name, account_no);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(pbi != undefined && pbi.toString().length>0){\r\n\t\t\t\t\tif(bank_id == undefined || bank_id.toString().length==0){\r\n\t\t\t\t\t\tthis.updatePersonnelBank(pbi, bank_id, account_name, \"CHECK\");\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.updatePersonnelBank(pbi, bank_id, account_name, account_no);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.loadGlobalCompany(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.success(\"\",\"Record saved.\");\r\n\r\n\t\t\t},(e1)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.error(e1, \"Error in updating global company info.\");\r\n\t\t\t});\r\n\t\t},(e)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e, \"Error in updating global company.\");\r\n\t\t});\r\n\t}\r\n\r\n\tsaveSuspend(company_id, start_dt, end_dt){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null\r\n\t\tdateToday = moment(new Date()).add(8, \"hours\");\r\n\t\tdateToday = new Date(dateToday);\r\n\r\n\t\tvar query = EntityQuery().from(\"SUSPEND_TRX\")\r\n\t\t\t\t\t\t\t\t.orderByDesc(\"SUSPEND_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s2)=>{\r\n\t\t\tvar maxID = 1;\r\n\t\t\tif(s2.results.length>0){\r\n\t\t\t\tmaxID = s2.results[0].SUSPEND_ID+1;\r\n\t\t\t}\r\n\t\t\tvar suspend_trx = {\r\n\t\t\t\tSUSPEND_ID: maxID,\r\n\t\t\t\tGLOBAL_ID: this.obj_personnel.global_indiv_id,\r\n\t\t\t\tCOMPANY_ID: company_id,\r\n\t\t\t\tSUSPEND_LEVEL: 2,\r\n\t\t\t\tSTART_DT: start_dt,\r\n\t\t\t\tEND_DT: end_dt,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"SUSPEND_TRX\", suspend_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s3)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t// console.log(\"Suspend record has been saved.\");\r\n\t\t\t}, (e3)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.error(e3, \"Error in saving suspend info.\");\r\n\t\t\t});\r\n\t\t}, (e2)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e2, \"Error in quering suspend id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdateSuspend(suspend_id, start_dt, end_dt){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null\r\n\t\tdateToday = moment(new Date()).add(8, \"hours\");\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"SUSPEND_TRX\")\r\n\t\t\t\t.where(\"SUSPEND_ID\", \"==\", suspend_id);\r\n\t\tEntityManager().executeQuery(query).then((s4)=>{\r\n\t\t\ts4.results[0].START_DT = start_dt;\r\n\t\t\ts4.results[0].END_DT = end_dt;\r\n\t\t\ts4.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts4.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\tEntityManager().saveChanges().then((s5)=>{\r\n\t\t\t\tconsole.log(\"Suspend record has been updated.\");\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t}, (e5)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.error(e5, \"Error in updating suspend info.\");\r\n\t\t\t});\r\n\t\t}, (e4)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e4, \"Error in querying suspend info.\");\r\n\t\t});\r\n\t}\r\n\r\n\tsavePersonnelBank(global_company_id, bank_id, acct_name, account_no ){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null\r\n\t\tdateToday = moment(new Date()).add(8, \"hours\");\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"PERSONNEL_BANK_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"PERSONNEL_BANK_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((q1)=>{\r\n\t\t\tvar maxID = 1;\r\n\t\t\tif(q1.results.length>0)\r\n\t\t\t{\r\n\t\t\t\tmaxID = q1.results[0].PERSONNEL_BANK_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar personnel_bank_trx = {\r\n\t\t\t\tPERSONNEL_BANK_ID: maxID,\r\n\t\t\t\tGLOBAL_COMPANY_ID: global_company_id,\r\n\t\t\t\tBANK_ID: bank_id,\r\n\t\t\t\tACCT_NAME: acct_name,\r\n\t\t\t\tACCOUNT_NO: account_no,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"PERSONNEL_BANK_TRX\", personnel_bank_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\tthis.loadPersonnelBank(global_company_id);\r\n\t\t\t\t// toastr.success(\"\",\"\");\r\n\t\t\t\t// console.log(\"personnel bank save success.\");\r\n\t\t\t},(e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.error(e2, \"Error in saving personnel bank info.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying personnel bank id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdatePersonnelBank(personnel_bank_id, bank_id, acct_name, account_no){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null\r\n\t\tdateToday = moment(new Date()).add(8, \"hours\");\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"PERSONNEL_BANK_TRX\")\r\n\t\t\t\t\t.where(\"PERSONNEL_BANK_ID\", \"==\", personnel_bank_id);\r\n\t\tEntityManager().executeQuery(query).then((q1)=>{\r\n\r\n\t\t\tif(q1.results.length==0){\r\n\t\t\t\ttoastr.error(\"\", \"No personnel bank with an ID of \"+personnel_bank_id+\" found.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(account_no != \"CHECK\"){\r\n\t\t\t\tq1.results[0].BANK_ID = bank_id;\r\n\t\t\t}\r\n\r\n\t\t\tq1.results[0].ACCOUNT_NO = account_no;\r\n\t\t\tq1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\tq1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\t// toastr.success(\"\", \"Bank info\");\r\n\t\t\t\tthis.loadPersonnelBank(this.obj_personnel.COMPANY_SPECIFIC.model.global_company_id);\r\n\t\t\t\tconsole.log(\"\", \"bank info has been updated.\");\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.error(e2, \"Error in updating personnel bank.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(\"\", \"Error in querying personnel bank.\");\r\n\t\t});\r\n\t}\r\n\r\n\tdd_bankChanged(){\r\n\t\tvar bank_id = this.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.bank_id;\r\n\t\tif(bank_id != undefined && bank_id != null && bank_id.length>0){\r\n\t\t\tvar bank = this.obj_personnel.BANK.find((b)=>{\r\n\t\t\t\treturn b.id == bank_id;\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.bank_nm = bank.long_nm;\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.acct_name = this.obj_personnel.HEADER.last_name+\", \"+this.obj_personnel.HEADER.given_name+\" \"+this.obj_personnel.HEADER.middle_name;\r\n\t\t}else{\r\n\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.bank_nm = \"\";\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.acct_name = \"\";\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.account_no = \"\";\r\n\t\t}\r\n\t}\r\n\r\n\tupdateCompanyIndex(company_id, lastIndex){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"COMPANY_SPECIFIC_INDEX\")\r\n\t\t\t\t\t.where(\"COMPANY_SPECIFIC_ID\", \"==\", company_id);\r\n\t\tEntityManager().executeQuery(query).then((s)=>{\r\n\t\t\ts.results[0].COMPANY_INDEX = lastIndex+1;\r\n\t\t\tEntityManager().saveChanges().then((s1)=>{\r\n\t\t\t\t//Do nothing.\r\n\t\t\t\tconsole.log(\"index was updated.\");\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t},(e1)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.error(e1, \"Error in updating company specific index.\");\r\n\t\t\t});\r\n\t\t}, (e)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e,\"Error in querying company specific index.\");\r\n\t\t});\r\n\t}\r\n\r\n\tbtnAdd_accreditation(){\r\n\t\tthis.accreditation_status = \"ADD\";\r\n\t}\r\n\r\n\tbtnEdit_accreditation(item){\r\n\t\tconsole.log(item);\r\n\t\tthis.accreditation_status = \"EDIT\";\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_id = item.accreditation_id;\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_job_grp_id = item.job_grp_id;\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_job_id = item.job_id;\r\n\t\tvar start_dt = moment.utc(item.eff_start_dt).format(\"MM/DD/YYYY\");\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_start_dt = start_dt;\r\n\t\tvar end_dt = moment.utc(item.eff_end_dt).format(\"MM/DD/YYYY\");\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_end_dt = end_dt;\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_competency = item.competency;\r\n\t}\r\n\r\n\tbtnRemove_accreditation(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove this accreditation record?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n  \t\t\t\t\tsettings.isNavigating = true;\r\n\t  \t\t\t\t//alert(\"Confirmed delete.\");\r\n  \t\t\t\t\tvar query = EntityQuery().from('ACCREDITATION_TRX').where('ACCREDITATION_ID', '==', item.accreditation_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The accreditation info was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadAccreditation(this.obj_personnel.COMPANY_SPECIFIC.model.global_company_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing accreditation info.\");\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tclearAccreditationField(){\r\n\t\tthis.accreditation_status=\"\";\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_id=\"\";\r\n\t\tif(this.obj_personnel.JOB_GROUP.length>0){\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_job_grp_id = this.obj_personnel.JOB_GROUP[0].id;\r\n\t\t\tthis.dd_jobGroupChange();\r\n\r\n\t\t\tif(this.obj_personnel.JOB.length>0){\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_job_id = this.obj_personnel.JOB[0].id;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_competency = \"\";\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_start_dt = \"\";\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_end_dt = \"\";\r\n\t\t$(\"#a_start_dt\").val(\"\");\r\n\t\t$(\"#a_end_dt\").val(\"\");\r\n\t}\r\n\r\n\tDigit(event){\r\n\t\treturn isDigit(event);\r\n\t}\r\n\r\n\tvalidateAccreditation(){\r\n\t\tvar strValidation = \"\";\r\n\t\tvar _competency = this.obj_personnel.COMPANY_SPECIFIC.model.a_competency;\r\n\t\tvar _start_dt = $(\"#a_start_dt\").val();\r\n\t\tvar _end_dt = $(\"#a_end_dt\").val();\r\n\t\tif(_competency == undefined || _competency == null || _competency.length==0){\r\n\t\t\tstrValidation+= \"No competency level specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(_start_dt == undefined || _start_dt==null || _start_dt.length==0){\r\n\t\t\tstrValidation+=\"No start date specified. <br/>\";\r\n\t\t}else{\r\n\t\t\tif(_end_dt == undefined || _end_dt==null || _end_dt.length==0){\r\n\t\t\t\tstrValidation+=\"No end date specified. <br/>\";\r\n\t\t\t}else{\r\n\t\t\t\tif(!moment(_start_dt).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid start date. <br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(!moment(_end_dt).isValid()){\r\n\t\t\t\t\t\tstrValidation+=\"Invalid end date. <br/>\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar d1 = new Date(_start_dt);\r\n\t\t\t\t\t\tvar d2 = new Date(_end_dt);\r\n\t\t\t\t\t\tif(d2 < d1){\r\n\t\t\t\t\t\t\tstrValidation+=\"end date cannot be greater than start date. <br/>\";\r\n\t\t\t\t\t\t}else{ \r\n\t\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_start_dt = _start_dt;\r\n\t\t\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.a_end_dt = _end_dt;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\t// console.log(\"save accreditation.\");\r\n\t\t\tif(this.accreditation_status == \"ADD\"){\r\n\t\t\t\tthis.saveAccreditation(this.obj_personnel.COMPANY_SPECIFIC.model.global_company_id);\r\n\t\t\t}else if(this.accreditation_status==\"EDIT\"){\r\n\t\t\t\tvar accreditation_id = this.obj_personnel.COMPANY_SPECIFIC.model.a_id;\r\n\t\t\t\tthis.updateAccreditation(accreditation_id);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tsaveAccreditation(global_company_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n\r\n  \t\tvar query = EntityQuery().from(\"ACCREDITATION_TRX\")\r\n  \t\t\t\t\t.orderByDesc(\"ACCREDITATION_ID\").take(1);\r\n  \t\tEntityManager().executeQuery(query).then((s1)=>{\r\n  \t\t\tvar maxID = 1;\r\n  \t\t\tif(s1.results.length>0){\r\n  \t\t\t\tmaxID = s1.results[0].ACCREDITATION_ID+1;\r\n  \t\t\t}\r\n\r\n  \t\t\tvar accreditation_trx = {\r\n  \t\t\t\tACCREDITATION_ID: maxID,\r\n  \t\t\t\tGLOBAL_COMPANY_ID: global_company_id,\r\n  \t\t\t\tEFF_START_DT: this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.a_start_dt),\r\n  \t\t\t\tEFF_END_DT: this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.a_end_dt),\r\n  \t\t\t\tDIVISION_ID: this.obj_personnel.COMPANY_SPECIFIC.model.division_id,\r\n  \t\t\t\tCATEGORY_ID: this.obj_personnel.COMPANY_SPECIFIC.model.category_id,\r\n  \t\t\t\tJOB_GRP_ID: this.obj_personnel.COMPANY_SPECIFIC.model.a_job_grp_id,\r\n  \t\t\t\tJOB_ID: this.obj_personnel.COMPANY_SPECIFIC.model.a_job_id,\r\n  \t\t\t\tCOMPETENCY: this.obj_personnel.COMPANY_SPECIFIC.model.a_competency,\r\n  \t\t\t\tHOME_FL: '0',\r\n  \t\t\t\tENTRY_FL: '0',\r\n  \t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n  \t\t\t\tCREATED_DT: dateToday\r\n  \t\t\t};\r\n  \t\t\tvar entity = EntityManager().createEntity(\"ACCREDITATION_TRX\", accreditation_trx);\r\n  \t\t\tEntityManager().addEntity(entity);\r\n  \t\t\tEntityManager().saveChanges().then((s2)=>{\r\n  \t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n  \t\t\t\tthis.clearAccreditationField();\r\n  \t\t\t\tthis.loadAccreditation(global_company_id);\r\n  \t\t\t}, (e2)=>{\r\n  \t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\tif(entity != null){\r\n  \t\t\t\t\tentity.entityAspect.setDeleted();\r\n  \t\t\t\t}\r\n  \t\t\t\ttoastr.error(e2, \"Error in saving accreditation.\");\r\n  \t\t\t});\r\n\r\n\r\n  \t\t}, (e1)=>{\r\n  \t\t\tsettings.isNavigating = false;\r\n  \t\t\ttoastr.error(e1, \"Error in querying accreditation id.\");\r\n  \t\t});\r\n\t}\r\n\r\n\tupdateAccreditation(accreditation_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null\r\n\t\tdateToday = moment(new Date()).add(8, \"hours\");\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"ACCREDITATION_TRX\")\r\n\t\t\t\t\t.where(\"ACCREDITATION_ID\", \"==\", accreditation_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tif(s1.results.length==0){\r\n\t\t\t\ttoastr.error(\"\", \"Error in querying accreditation info.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\ts1.results[0].JOB_GRP_ID = this.obj_personnel.COMPANY_SPECIFIC.model.a_job_grp_id;\r\n\t\t\ts1.results[0].JOB_ID = this.obj_personnel.COMPANY_SPECIFIC.model.a_job_id;\r\n\t\t\ts1.results[0].COMPETENCY = this.obj_personnel.COMPANY_SPECIFIC.model.a_competency;\r\n\t\t\ts1.results[0].EFF_START_DT = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.a_start_dt);\r\n\t\t\ts1.results[0].EFF_END_DT = this.convertToGMT8(this.obj_personnel.COMPANY_SPECIFIC.model.a_end_dt);\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\ttoastr.success(s2, \"Accreditation has been updated.\");\r\n  \t\t\t\tthis.clearAccreditationField();\r\n\t\t\t\tthis.loadAccreditation(this.obj_personnel.COMPANY_SPECIFIC.model.global_company_id);\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.error(e2, \"Error in updating accreditation info.\");\r\n\t\t\t});\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying accreditation info.\");\r\n\t\t});\r\n\t}\r\n\r\n\tdd_jobGroupChange(){\r\n\t\tvar tmp=[];\r\n\t\tvar selectedJobGrp = this.obj_personnel.COMPANY_SPECIFIC.model.a_job_grp_id;\r\n\t\t_.each(this.obj_personnel.JOB, (j)=>{\r\n\t\t\tif(selectedJobGrp == j.group){\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tvalue: j.value,\r\n\t\t\t\t\ttext: j.text\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.accreditation_joblist = tmp;\r\n\t}\r\n\r\n\tOrderByText(a, b){\r\n\t\tif(a.text.toUpperCase() < b.text.toUpperCase())\r\n\t\t\treturn -1;\r\n\t\tif(a.text.toUpperCase() > b.text.toUpperCase())\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\nimport {OrderByDate} from '../../helpers';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class company_info_medical_rec {\r\n\r\n\tobj_personnel = null;\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\t_disableForm=true;\r\n\t_disableTable=false;\r\n\tformStatus=\"\";\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.company_tab_changed.push((tab_num, global_id)=>{\r\n\t\t\tif(tab_num==3){\r\n\t\t\t\t$(\"#med_exam_dt\").datepicker();\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading medical records...\");\r\n\t\t\t\tthis.loadMedicalRecord(global_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tloadMedicalRecord(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating =true;\r\n\t\tvar query = EntityQuery().from(\"MEDICAL_EXAM_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", global_indiv_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar tmp = [];\r\n\t\t\tvar tmpLog = [];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tmedical_exam_id: r.MEDICAL_EXAM_ID,\r\n\t\t\t\t\tendorsed_by: r.ENDORSED_BY,\r\n\t\t\t\t\tfit_to_work_fl: r.FIT_TO_WORK_FL,\r\n\t\t\t\t\tmedical_exam_dt: moment.utc(r.MEDICAL_EXAM_DT).format(\"MM/DD/YYYY\"),\r\n\t\t\t\t\tresult_remarks: r.RESULT_REMARKS\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\",\"Medical records has been loaded.\");\r\n\t\t\tthis.obj_personnel.MEDICAL_RECORD.list = tmp;\r\n\t\t\tif(tmpLog.length>0){\r\n\r\n\t\t\t\ttmpLog.sort(OrderByDate);\r\n\t\t\t\tvar lastIndex = tmpLog.length-1;\r\n\t\t\t\tthis.lblCreatedBy = tmpLog[0].user + \" \" + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpLog[lastIndex].user+ \" \" + moment.utc(tmpLog[lastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t} \r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying medical records.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tbtnAdd(){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"ADD\";\r\n\t}\r\n\r\n\tbtnEdit(item){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"EDIT\";\r\n\t\tthis.obj_personnel.MEDICAL_RECORD.model.medical_exam_id = item.medical_exam_id;\r\n\t\tthis.obj_personnel.MEDICAL_RECORD.model.endorsed_by = item.endorsed_by;\r\n\t\t$(\"#med_exam_dt\").datepicker(\"setValue\", new Date(item.medical_exam_dt));\r\n\t\tthis.obj_personnel.MEDICAL_RECORD.model.medical_exam_dt = item.medical_exam_dt;\r\n\t\tthis.obj_personnel.MEDICAL_RECORD.model.result_remarks = item.result_remarks;\r\n\t\tswitch(item.fit_to_work_fl){\r\n\t\t\tcase \"1\":\t\t\t\t\r\n\t\t\t\t$(\"#fit_to_work_fl\").prop(\"checked\", true);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"0\":\r\n\t\t\t\t$(\"#fit_to_work_fl\").prop(\"checked\", false);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tbtnRemove(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the record?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('MEDICAL_EXAM_TRX').where('MEDICAL_EXAM_ID', '==', item.medical_exam_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\", \"Record was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadMedicalRecord(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.clearField();\r\n\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(error, \"Error in removing medical record.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tclearField(){\t\t\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableTable = false;\r\n\t\tthis.formStatus = \"\";\r\n\t\tthis.obj_personnel.MEDICAL_RECORD.model = {};\r\n\t\t$(\"#fit_to_work_fl\").prop(\"checked\", false);\r\n\t\tsettings.isNavigating = false;\r\n\t}\r\n\r\n\tvalidate(){\r\n\r\n\t\tvar strValidation = \"\";\r\n\t\tthis.obj_personnel.MEDICAL_RECORD.model.medical_exam_dt = $(\"#med_exam_dt\").val();\r\n\t\tthis.obj_personnel.MEDICAL_RECORD.model.fit_to_work_fl = $(\"#fit_to_work_fl\").is(\":checked\")?1:0;\r\n\r\n\t\tif(this.obj_personnel.MEDICAL_RECORD.model.endorsed_by == undefined || this.obj_personnel.MEDICAL_RECORD.model.endorsed_by == null || this.obj_personnel.MEDICAL_RECORD.model.endorsed_by.length==0){\r\n\t\t\tstrValidation+=\"No endorser specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.MEDICAL_RECORD.model.medical_exam_dt == undefined || this.obj_personnel.MEDICAL_RECORD.model.medical_exam_dt == null || this.obj_personnel.MEDICAL_RECORD.model.medical_exam_dt.length==0){\r\n\t\t\tstrValidation+=\"No medical exam date specified.<br/>\";\r\n\t\t}else{\r\n\t\t\tif(moment(this.obj_personnel.MEDICAL_RECORD.model.medical_exam_dt).isValid()){\r\n\r\n\t\t\t\tvar d1 = new Date(this.obj_personnel.MEDICAL_RECORD.model.medical_exam_dt);\r\n\t\t\t\tvar d2 = new Date();\r\n\r\n\t\t\t\tif(d1>d2){\r\n\t\t\t\t\tstrValidation+=\"Medical exam date cannot be greater than date today.<br/>\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+=\"Invalid medical exam date.<br/>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.obj_personnel.MEDICAL_RECORD.model.medical_exam_id != undefined && this.obj_personnel.MEDICAL_RECORD.model.medical_exam_id != null){\r\n\t\t\t\tthis.updateMedicalRecord(this.obj_personnel.MEDICAL_RECORD.model.medical_exam_id);\r\n\t\t\t}else{\r\n\t\t\t\tthis.saveMedicalRecord(this.obj_personnel.global_indiv_id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsaveMedicalRecord(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"MEDICAL_EXAM_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"MEDICAL_EXAM_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar maxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].MEDICAL_EXAM_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar medical_record = {\r\n\t\t\t\tMEDICAL_EXAM_ID: maxId,\r\n\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\tENDORSED_BY: this.obj_personnel.MEDICAL_RECORD.model.endorsed_by,\r\n\t\t\t\tMEDICAL_EXAM_DT: new Date(moment(this.obj_personnel.MEDICAL_RECORD.model.medical_exam_dt).add(8, \"hours\")),\r\n\t\t\t\tRESULT_REMARKS: this.obj_personnel.MEDICAL_RECORD.model.result_remarks,\r\n\t\t\t\tFIT_TO_WORK_FL: this.obj_personnel.MEDICAL_RECORD.model.fit_to_work_fl,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"MEDICAL_EXAM_TRX\", medical_record);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadMedicalRecord(global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\r\n\t\t\t}, (e2)=>{\r\n\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in saving medical record.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying medical exam id.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tupdateMedicalRecord(medical_exam_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"MEDICAL_EXAM_TRX\")\r\n\t\t\t\t\t.where(\"MEDICAL_EXAM_ID\", \"==\", medical_exam_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].ENDORSED_BY = this.obj_personnel.MEDICAL_RECORD.model.endorsed_by;\r\n\t\t\ts1.results[0].MEDICAL_EXAM_DT = new Date(moment(this.obj_personnel.MEDICAL_RECORD.model.medical_exam_dt).add(8, \"hours\"));\r\n\t\t\ts1.results[0].RESULT_REMARKS = this.obj_personnel.MEDICAL_RECORD.model.result_remarks;\r\n\t\t\ts1.results[0].FIT_TO_WORK_FL = this.obj_personnel.MEDICAL_RECORD.model.fit_to_work_fl;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\tthis.loadMedicalRecord(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\r\n\t\t\t}, (e2)=>{\r\n\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in updating medical record.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying medical record.\");\r\n\t\t});\r\n\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {ppid_search} from \"../modals/ppid_search\";\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport {isDigit} from \"../../helpers\";\r\nimport settings from 'settings';\r\n\r\n@inject(DialogService, obj_personnel, toastr)\r\nexport class company_info_work_exp{\r\n\r\n\t_disableBtnAdd = false;\r\n\t_disableBtnSave= true;\r\n\t_disableBtnEdit = false;\r\n\t_disableBtnRemove = false;\r\n\t_disableForm=true;\r\n\t_formStatus=\"\";\r\n\tobj_personnel = null;\r\n\talreadyLoaded = false;\r\n\tlblCreatedBy = null;\r\n\tlblUpdatedBy = null;\r\n\tconstructor(DialogService, obj_personnel, toastr){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.company_tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num == 1){\r\n\t\t\t\tif(!this.alreadyLoaded){\r\n\t\t\t\t\tthis.alreadyLoaded = false;\r\n\t\t\t\t\t$(\"#startDt\").datepicker();\r\n\t\t\t\t\t$(\"#endDt\").datepicker();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading work experience list...\");\r\n\t\t\t\tthis.loadWorkExperience(global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tloadWorkExperience(global_indiv_id){\r\n\t\tsettings.isNavigating =true;\r\n\t\tvar query = EntityQuery().from(\"WORK_EXPERIENCE_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\",\"==\",global_indiv_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar tmp = [];\r\n\t\t\tvar tmpLog = [];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\t\t\t\tvar from = moment.utc(r.START_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\tvar to = moment.utc(r.END_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\tvar position = this.obj_personnel.POSITION.find((x)=>{\r\n\t\t\t\t\tif(x.value == r.POSITION_CD)\r\n\t\t\t\t\t\t\treturn x;\r\n\t\t\t\t});\r\n\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\twork_experience_id: r.WORK_EXPERIENCE_ID,\r\n\t\t\t\t\temployer: r.EMPLOYER,\r\n\t\t\t\t\tstart_dt: from,\r\n\t\t\t\t\tend_dt: to,\r\n\t\t\t\t\tpresent_fl: r.PRESENT_FL,\r\n\t\t\t\t\tsalary: r.SALARY,\r\n\t\t\t\t\tposition_cd: r.POSITION_CD,\r\n\t\t\t\t\tposition: position.text,\r\n\t\t\t\t\tfreelance_fl: r.FREELANCE_FL,\r\n\t\t\t\t\treason_for_leaving: r.REASON_FOR_LEAVING\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.WORK_EXPERIENCE.list = tmp;\r\n\r\n\t\t\ttmpLog.sort(this.OrderByDate);\r\n\t\t\tvar LastIndex = tmpLog.length-1;\r\n\t\t\tif(tmpLog.length>0){\r\n\r\n\t\t\t\tthis.lblCreatedBy = tmpLog[0].user + ' ' + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpLog[LastIndex].user + ' ' + moment.utc(tmpLog[LastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Work experience list has been loaded...\");\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in loading work experience list.\");\r\n\t\t});\r\n\t}\r\n\r\n\tOrderByDate(a, b){\r\n\t\tif(a.date > b.date)\r\n\t\t\treturn 1;\r\n\t\tif(a.date < b.date)\r\n\t\t\treturn -1;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tclearField(){\r\n\t\ttoastr.clear();\t\t\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model = {};\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._formStatus = \"\";\r\n\t\tthis._disableBtnEdit = false;\r\n\t\tthis._disableBtnRemove = false;\r\n\t}\r\n\r\n\tbtnAdd(){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._formStatus = \"ADD\";\r\n\t\tthis._disableBtnEdit = true;\r\n\t\tthis._disableBtnRemove = true;\r\n\t}\r\n\r\n\tbtnEdit(item){\r\n\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\t\t\r\n\t\tthis._disableBtnEdit = true;\r\n\t\tthis._disableBtnRemove = true;\r\n\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.work_experience_id = item.work_experience_id;\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.employer = item.employer;\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.start_dt = item.start_dt;\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.end_dt = item.end_dt;\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.present_fl = item.present_fl==1?true:false;\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.salary = item.salary;\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.position_cd = item.position_cd;\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.freelance_fl = item.freelance_fl==1?true:false;\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.reason_for_leaving = item.reason_for_leaving;\r\n\t\tthis._formStatus = \"EDIT\";\r\n\t}\r\n\r\n\tbtnRemove(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the work experience?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\t//alert(\"Confirmed delete.\");\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('WORK_EXPERIENCE_TRX').where('WORK_EXPERIENCE_ID', '==', item.work_experience_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The work experience was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadWorkExperience(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing work experience.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tvalidate(){\r\n\r\n\t\tvar strValidation = \"\";\r\n\t\tvar boolValidStart = false;\r\n\t\tvar boolValidEnd = false;\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.start_dt = $(\"#startDt\").val();\r\n\t\tthis.obj_personnel.WORK_EXPERIENCE.model.end_dt = $(\"#endDt\").val();\r\n\r\n\t\tif(this.obj_personnel.WORK_EXPERIENCE.model.employer == undefined || this.obj_personnel.WORK_EXPERIENCE.model.employer == null || this.obj_personnel.WORK_EXPERIENCE.model.employer.length == 0){\r\n\t\t\tstrValidation+=\"No employer specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.WORK_EXPERIENCE.model.start_dt == undefined || this.obj_personnel.WORK_EXPERIENCE.model.start_dt == null || this.obj_personnel.WORK_EXPERIENCE.model.start_dt.length == 0){\r\n\t\t\tstrValidation+=\"No start date specified.<br/>\";\r\n\t\t}else{\r\n\t\t\tif(!moment(new Date(this.obj_personnel.WORK_EXPERIENCE.model.start_dt)).isValid()){\r\n\t\t\t\tstrValidation+=\"Invalid start date.<br/>\";\r\n\t\t\t}else{\r\n\t\t\t\t// this.obj_personnel.WORK_EXPERIENCE.model.start_dt = new Date(moment(this.obj_personnel.WORK_EXPERIENCE.model.start_dt).add(8, \"hours\"));\r\n\t\t\t\tboolValidStart = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.WORK_EXPERIENCE.model.end_dt == undefined || this.obj_personnel.WORK_EXPERIENCE.model.end_dt == null || this.obj_personnel.WORK_EXPERIENCE.model.end_dt.length == 0){\r\n\t\t\tstrValidation+=\"No end date specified.<br/>\";\r\n\t\t}else{\r\n\t\t\tif(!moment(new Date(this.obj_personnel.WORK_EXPERIENCE.model.end_dt)).isValid()){\r\n\t\t\t\tstrValidation+=\"Invalid end date.<br/>\";\r\n\t\t\t}else{\r\n\t\t\t\t// this.obj_personnel.WORK_EXPERIENCE.model.end_dt = new Date(moment(this.obj_personnel.WORK_EXPERIENCE.model.end_dt).add(8, \"hours\"));\r\n\t\t\t\tboolValidEnd = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(boolValidStart && boolValidEnd){\r\n\t\t\tvar d1 = new Date(this.obj_personnel.WORK_EXPERIENCE.model.start_dt);\r\n\t\t\tvar d2 = new Date(this.obj_personnel.WORK_EXPERIENCE.model.end_dt);\r\n\t\t\tif(d1>d2){\r\n\t\t\t\tstrValidation+=\"Start date cannot be greater than end date.<br/>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.WORK_EXPERIENCE.model.position_cd == undefined || this.obj_personnel.WORK_EXPERIENCE.model.position_cd.length==0){\r\n\t\t\tstrValidation+=\"No position specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.WORK_EXPERIENCE.model.reason_for_leaving == undefined || this.obj_personnel.WORK_EXPERIENCE.model.reason_for_leaving == null || this.obj_personnel.WORK_EXPERIENCE.model.reason_for_leaving.length == 0){\r\n\t\t\tstrValidation+=\"No reason for leaving specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this._formStatus == \"ADD\"){\r\n\t\t\t\tthis.saveWorkExp(this.obj_personnel.global_indiv_id);\r\n\t\t\t}else if(this._formStatus==\"EDIT\"){\r\n\t\t\t\tthis.updateWorkExp(this.obj_personnel.WORK_EXPERIENCE.model.work_experience_id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsaveWorkExp(global_indiv_id){\r\n\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = moment(new Date()).add(8, \"hours\");\r\n\t\tdateToday = new Date(dateToday);\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"WORK_EXPERIENCE_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"WORK_EXPERIENCE_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar MaxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tMaxId = s1.results[0].WORK_EXPERIENCE_ID+1;\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tvar work_exp_trx = {\r\n\t\t\t\tWORK_EXPERIENCE_ID: MaxId,\r\n\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\tEMPLOYER: this.obj_personnel.WORK_EXPERIENCE.model.employer,\r\n\t\t\t\tSTART_DT: this.obj_personnel.WORK_EXPERIENCE.model.start_dt,\r\n\t\t\t\tEND_DT: this.obj_personnel.WORK_EXPERIENCE.model.end_dt,\r\n\t\t\t\tSALARY: this.obj_personnel.WORK_EXPERIENCE.model.salary,\r\n\t\t\t\tPOSITION_CD: this.obj_personnel.WORK_EXPERIENCE.model.position_cd,\r\n\t\t\t\tREASON_FOR_LEAVING: this.obj_personnel.WORK_EXPERIENCE.model.reason_for_leaving,\r\n\t\t\t\tPRESENT_FL: this.obj_personnel.WORK_EXPERIENCE.model.present_fl==true?1:0,\r\n\t\t\t\tFREELANCE_FL: this.obj_personnel.WORK_EXPERIENCE.model.freelance_fl==true?1:0,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"WORK_EXPERIENCE_TRX\", work_exp_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.clearField();\r\n\t\t\t\tthis.loadWorkExperience(this.obj_personnel.global_indiv_id);\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t});\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.error(e2, \"Error in saving work experience.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying max id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdateWorkExp(work_exp_id){\r\n\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = moment(new Date()).add(8, \"hours\");\r\n\t\tdateToday = new Date(dateToday);\r\n\r\n\t\tvar query = EntityQuery().from(\"WORK_EXPERIENCE_TRX\")\r\n\t\t\t\t\t.where(\"WORK_EXPERIENCE_ID\", \"==\", work_exp_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].EMPLOYER = this.obj_personnel.WORK_EXPERIENCE.model.employer;\r\n\t\t\ts1.results[0].START_DT = this.obj_personnel.WORK_EXPERIENCE.model.start_dt;\r\n\t\t\ts1.results[0].END_DT = this.obj_personnel.WORK_EXPERIENCE.model.end_dt;\r\n\t\t\ts1.results[0].PRESENT_FL = this.obj_personnel.WORK_EXPERIENCE.model.present_fl?1:0;\r\n\t\t\ts1.results[0].SALARY = this.obj_personnel.WORK_EXPERIENCE.model.salary;\r\n\t\t\ts1.results[0].POSITION_CD = this.obj_personnel.WORK_EXPERIENCE.model.position_cd;\r\n\t\t\ts1.results[0].FREELANCE_FL = this.obj_personnel.WORK_EXPERIENCE.model.freelance_fl?1:0;\r\n\t\t\ts1.results[0].REASON_FOR_LEAVING = this.obj_personnel.WORK_EXPERIENCE.model.reason_for_leaving;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.clearField();\r\n\t\t\t\tthis.loadWorkExperience(this.obj_personnel.global_indiv_id);\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\ttoastr.error(e2, \"Error in updating work experience.\");\t\t\t\t\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\ttoastr.error(e1, \"Error in querying work experience.\");\r\n\t\t});\r\n\t}\r\n\r\n\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\n\r\n@inject(DialogService, obj_personnel, toastr)\r\nexport class gov_info\r\n{\r\n\tobj_personnel = null;\r\n\t_activeTab=0;\r\n\t_404_img = \"/images/404.png\";\r\n\tconstructor(dialogService, obj_personnel, toastr){\r\n\t\tthis.dialogService = dialogService;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num == 3){\r\n\t\t\t\t$(\"#gov_tab0\").addClass(\"active\");\r\n\t\t\t\t$(\"#gov_tab1\").removeClass(\"active\");\r\n\t\t\t\t$(\"#gov_tab2\").removeClass(\"active\");\r\n\t\t\t\t$(\"#gov_info_tabs\").find(\".active\").removeClass(\"active\");\r\n\t\t\t\t$(\"#gov_info_main\").addClass(\"active\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\t\r\n\r\n\tclickTab_GovInfo(tab_num){\r\n\t\tif(this.obj_personnel.global_indiv_id.length===0)\r\n\t\t\treturn;\r\n\t\tswitch(tab_num){\r\n\t\t\tcase 0: \r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.info(\"\", \"Loading government info...\");\t\t\t\t\t\r\n\t\t\t\t\tbreak;\r\n\t\t\tcase 1: \r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.info(\"\", \"Loading government exam passed...\");\t\t\t\t\t\r\n\t\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.obj_personnel.OBSERVERS.govinfo_tab_changed.forEach((delegate)=>{\r\n\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t});\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\nimport {OrderByDate} from '../../helpers';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class gov_info_criminal_rec{\r\n\r\n\tobj_personnel = null;\r\n\tlblCreatedByCivil=null;\r\n\tlblUpdatedByCivil=null;\r\n\tformStatusCivil=\"\";\r\n\t_disableBtnAddCivil=false;\r\n\t_disableBtnSaveCivil=true;\r\n\t_disableFormCivil=true;\r\n\t_disableTableCivil=false;\r\n\tddCompany = [];\t\r\n\tlblCreatedByAdministrative=null;\r\n\tlblUpdatedByAdministrative=null;\r\n\tformStatusAdministrative=\"\";\r\n\t_disableBtnAddAdministrative=false;\r\n\t_disableBtnSaveAdministrative=true;\r\n\t_disableFormAdministrative=true;\r\n\t_disableTableAdministrative=false;\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\t}\r\n\r\n\tloadCivilCase(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"COURT_CASE_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_indiv_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\tvar tmpLog=[];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tcourt_case_id: r.COURT_CASE_ID,\r\n\t\t\t\t\tglobal_id: r.GLOBAL_ID,\r\n\t\t\t\t\tcase_no: r.CASE_NO,\r\n\t\t\t\t\tcase_stat_cd: r.CASE_STAT_CD,\r\n\t\t\t\t\tcase_desc: r.CASE_DESC,\r\n\t\t\t\t\tcriminal_fl: r.CRIMINAL_FL,\r\n\t\t\t\t\tstart_dt: r.START_DT,\r\n\t\t\t\t\tremarks: r.REMARKS\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.CRIMINAL_RECORD.civil.list = tmp;\r\n\t\t\ttmpLog.sort(OrderByDate);\r\n\t\t\tif(tmpLog.length>0){\r\n\r\n\t\t\t\tthis.lblCreatedByCivil = tmpLog[0].user + \" \" + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tvar lastIndex = tmpLog.length-1;\r\n\t\t\t\t\tthis.lblUpdatedByCivil = tmpLog[lastIndex].user + \" \" + moment.utc(tmpLog[lastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedByCivil = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedByCivil = \"\";\r\n\t\t\t\tthis.lblUpdatedByCivil = \"\";\r\n\t\t\t}\r\n\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", \"Civil cases has been loaded.\");\r\n\t\t\tsettings.isNavigating = false;\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying civil cases.\");\r\n\t\t});\r\n\t}\r\n\r\n\tloadAdministrativeCase(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_COMPANY_MSTR\")\r\n\t\t \t\t\t.where(\"GLOBAL_ID\",\"==\", global_indiv_id);\r\n\t\t EntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t \tvar company_ids=[];\r\n\t\t \tvar global_company_ids = [];\r\n\t\t \t_.each(s1.results, (r)=>{\r\n\t\t \t\tglobal_company_ids.push(r.GLOBAL_COMPANY_ID);\r\n\t\t \t\tvar alreadyExist = company_ids.some((x)=>x == r.COMPANY_ID);\r\n\t\t \t\tif(!alreadyExist){\r\n\t\t \t\t\tvar company = this.obj_personnel.COMPANY.find((x)=>{\r\n\t\t \t\t\t\treturn x.value == r;\r\n\t\t \t\t\t});\r\n\t\t \t\t\tif(company != null){\r\n\t\t \t\t\t\tcompany_ids.push(company);\r\n\t\t \t\t\t}\r\n\t\t \t\t}\r\n\t\t \t});\r\n\t\t \tddCompany = company_ids;\r\n\t\t \t_.each(global_company_ids, (c)=>{\r\n\t\t \t\tquery = EntityQuery().from(\"ADMIN_CASE_TRX\")\r\n\t\t \t\t\t\t.where(\"GLOBAL_COMPANY_ID\", \"==\", c);\r\n\t\t \t\tEntityManager().executeQuery(query).then((s2)=>{\r\n\r\n\t\t \t\t\tvar tmp=[];\r\n\t\t \t\t\tvar tmpLog=[];\r\n\t\t \t\t\t_.each(s2.results, (r)=>{\r\n\t\t \t\t\t\ttmp.push({\r\n\t\t \t\t\t\t\tadmin_case_id: r.ADMIN_CASE_ID,\r\n\t\t \t\t\t\t\tglobal_company_id: r.GLOBAL_COMPANY_ID,\r\n\t\t \t\t\t\t\tviolation_cd: r.VIOLATION_CD,\r\n\t\t \t\t\t\t\tcase_stat_cd: r.CASE_STAT_CD,\r\n\t\t \t\t\t\t\teff_start_dt: moment.utc(r.EFF_START_DT).format(\"MM/DD/YYYY\"),\r\n\t\t \t\t\t\t\teff_end_dt: moment.utc(r.EFF_END_DT).format(\"MM/DD/YYYY\")\r\n\t\t \t\t\t\t});\r\n\r\n\t\t \t\t\t\tif(r.CREATED_BY != null){\r\n\t\t \t\t\t\t\ttmpLog.push({\r\n\t\t \t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t \t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t \t\t\t\t\t});\r\n\t\t \t\t\t\t}\r\n\r\n\t\t \t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t \t\t\t\t\ttmpLog.push({\r\n\t\t \t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t \t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t \t\t\t\t\t});\r\n\t\t \t\t\t\t}\r\n\t\t \t\t\t});\r\n\r\n\t\t \t\t\tsettings.isNavigating = false;\r\n\t\t \t\t\ttoastr.clear();\r\n\t\t \t\t\ttoastr.success(\"\", \"Administrative cases has been loaded.\");\r\n\t\t \t\t\tthis.obj_personnel.CRIMINAL_RECORD.administrative.list = tmp;\r\n\r\n\r\n\t\t \t\t}, (e2)=>{\r\n\t\t \t\t\tsettings.isNavigating = false;\r\n\t\t \t\t\ttoastr.clear();\r\n\t\t \t\t\ttoastr.error(e2, \"Error in querying administrative case.\");\r\n\t\t \t\t});\r\n\t\t \t});\r\n\r\n\t\t }, (e1)=>{\r\n\t\t \tsettings.isNavigating = false;\r\n\t\t \ttoastr.clear();\r\n\t\t \ttoastr.erorr(e1, \"Error in querying company ids.\");\r\n\t\t });\r\n\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\nimport {OrderByDate, isDigit} from '../../helpers';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class gov_info_exam_passed{\r\n\r\n\tobj_personnel = null;\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\t_disableForm=true;\r\n\t_disableTable=false;\t\r\n\tformStatus=\"\";\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.govinfo_tab_changed.push((tab_num, global_id)=>{\r\n\t\t\tif(tab_num == 1){\r\n\t\t\t\t$(\"#exam_dt\").datepicker();\r\n\t\t\t\tthis.loadExamRecord(global_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tloadExamRecord(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"EXAM_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", global_indiv_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\tvar tmpLog = [];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\t\t\t\tvar exam_cd = this.obj_personnel.EXAM.find((x)=>{\r\n\t\t\t\t\treturn x.value == r.EXAM_CD;\r\n\t\t\t\t});\r\n\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\texam_id: r.EXAM_ID,\r\n\t\t\t\t\texam_cd: r.EXAM_CD,\r\n\t\t\t\t\texam_nm: exam_cd.text,\r\n\t\t\t\t\trating_grade: r.RATING_GRADE,\r\n\t\t\t\t\texam_dt: moment.utc(r.EXAM_DT).format(\"MM/DD/YYYY\"),\r\n\t\t\t\t\tremarks: r.REMARKS\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"List of Government exam passed has been loaded.\");\r\n\t\t\tthis.obj_personnel.GOVERNMENT_EXAM.list = tmp;\r\n\r\n\t\t\tif(tmpLog.length>0){\r\n\r\n\t\t\t\tthis.lblCreatedBy = tmpLog[0].user + \" \" + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tvar lastIndex = tmpLog.length - 1;\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpLog[lastIndex].user + \" \" + moment.utc(tmpLog[lastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\r\n\r\n\t\t}, (e1)=>{\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying exam record.\");\r\n\t\t});\t\r\n\t}\r\n\r\n\tbtnAdd(){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"ADD\";\r\n\t}\r\n\r\n\tbtnEdit(item){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"EDIT\";\r\n\t\tthis.obj_personnel.GOVERNMENT_EXAM.model.exam_id = item.exam_id;\r\n\t\tthis.obj_personnel.GOVERNMENT_EXAM.model.exam_cd = item.exam_cd;\r\n\t\tthis.obj_personnel.GOVERNMENT_EXAM.model.rating_grade = item.rating_grade;\r\n\t\tthis.obj_personnel.GOVERNMENT_EXAM.model.remarks = item.remarks;\r\n\t\tthis.obj_personnel.GOVERNMENT_EXAM.model.exam_dt = item.exam_dt;\r\n\t}\r\n\r\n\tbtnRemove(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the record?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('EXAM_TRX').where('EXAM_ID', '==', item.exam_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\", \"Record was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadExamRecord(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.clearField();\r\n\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(error, \"Error in removing exam info.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tclearField(){\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableTable = false;\r\n\t\tthis.formStatus = \"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_EXAM.model = {};\r\n\t}\r\n\r\n\tDigitOnly(event){\r\n\t\treturn isDigit(event);\r\n\t}\r\n\r\n\tvalidate(){\r\n\r\n\t\tvar strValidation = \"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_EXAM.model.exam_dt = $(\"#exam_dt\").val();\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_EXAM.model.exam_cd == undefined || this.obj_personnel.GOVERNMENT_EXAM.model.exam_cd == null || this.obj_personnel.GOVERNMENT_EXAM.model.exam_cd.length==0){\r\n\t\t\tstrValidation+=\"Exam name not specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_EXAM.model.rating_grade == undefined || this.obj_personnel.GOVERNMENT_EXAM.model.rating_grade == null || this.obj_personnel.GOVERNMENT_EXAM.model.rating_grade.length==0){\r\n\t\t\tstrValidation+=\"Rating/Grade not specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_EXAM.model.exam_dt == undefined || this.obj_personnel.GOVERNMENT_EXAM.model.exam_dt == null || this.obj_personnel.GOVERNMENT_EXAM.model.exam_dt.length==0){\r\n\t\t\tstrValidation+=\"No exam date specified.<br/>\";\r\n\t\t}else{\r\n\t\t\tif(moment(this.obj_personnel.GOVERNMENT_EXAM.model.exam_dt).isValid()){\r\n\r\n\t\t\t\tvar d1 = new Date(this.obj_personnel.GOVERNMENT_EXAM.model.exam_dt);\r\n\t\t\t\tvar d2 = new Date();\r\n\r\n\t\t\t\tif(d1>d2){\r\n\t\t\t\t\tstrValidation+=\"exam date cannot be greater than date today.<br/>\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+=\"Invalid exam date.<br/>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.formStatus==\"ADD\"){\r\n\t\t\t\tthis.saveExamInfo(this.obj_personnel.global_indiv_id);\r\n\t\t\t}else if(this.formStatus==\"EDIT\"){\r\n\t\t\t\tthis.updateExamInfo(this.obj_personnel.GOVERNMENT_EXAM.model.exam_id);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tsaveExamInfo(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"EXAM_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"EXAM_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar maxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].EXAM_ID + 1;\r\n\t\t\t}\r\n\r\n\t\t\tvar exam_trx = {\r\n\t\t\t\tEXAM_ID: maxId,\r\n\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\tEXAM_CD: this.obj_personnel.GOVERNMENT_EXAM.model.exam_cd,\r\n\t\t\t\tRATING_GRADE: this.obj_personnel.GOVERNMENT_EXAM.model.rating_grade,\r\n\t\t\t\tEXAM_DT: this.obj_personnel.GOVERNMENT_EXAM.model.exam_dt,\r\n\t\t\t\tREMARKS: this.obj_personnel.GOVERNMENT_EXAM.model.remarks,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\t\t\tconsole.log(exam_trx);\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"EXAM_TRX\", exam_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadExamRecord(global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in saving exam info.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\t\t\t\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying exam id.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tupdateExamInfo(exam_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"EXAM_TRX\")\r\n\t\t\t\t\t.where(\"EXAM_ID\", \"==\", exam_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].EXAM_CD = this.obj_personnel.GOVERNMENT_EXAM.model.exam_cd;\r\n\t\t\ts1.results[0].RATING_GRADE = this.obj_personnel.GOVERNMENT_EXAM.model.rating_grade;\r\n\t\t\ts1.results[0].REMARKS = this.obj_personnel.GOVERNMENT_EXAM.model.remarks;\r\n\t\t\ts1.results[0].EXAM_DT = new Date(moment(this.obj_personnel.GOVERNMENT_EXAM.model.exam_dt).add(8, \"hours\"));\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\tthis.loadExamRecord(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\r\n\t\t\t}, (e2)=>{\r\n\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in updating exam info.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying exam info.\");\r\n\t\t});\r\n\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class gov_info_main{\r\n\r\n\tobj_personnel = null;\r\n\talreadyLoaded = false;\r\n\t_disableOtherGovernmentInfo = true;\r\n\tlblCreatedBy = null;\r\n\tlblUpdatedBy = null;\r\n\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\r\n\t\t$(\"#affidavit_dt\").datepicker();\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num,global_id)=>{\r\n\t\t\tif(tab_num==3){\r\n\t\t\t\tif(!this.alreadyLoaded){\r\n\t\t\t\t\tthis.alreadyLoaded = false;\r\n\t\t\t\t\t$(\"#affidavit_dt\").datepicker();\r\n\t\t\t\t\t$(\"#expiry_dt\").datepicker();\r\n\t\t\t\t\t$(\"#vat_reg_dt\").datepicker();\r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.info(\"\", \"Loading data...\");\r\n\t\t\t\t\tthis.load_TaxInformation(global_id);\r\n\t\t\t\t\tthis.load_TaxAffidavit(global_id);\r\n\t\t\t\t\tthis.load_Permit(global_id);\r\n\t\t\t\t\tthis.clearTaxAffidavitField();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\tif(this.obj_personnel.USER.COMPANY_ID == 1){\r\n\t\t\t\tthis._disableOtherGovernmentInfo = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.govinfo_tab_changed.push((tab_num, global_id)=>{\r\n\t\t\tif(tab_num == 0){\r\n\t\t\t\tthis.load_TaxInformation(global_id);\r\n\t\t\t\tthis.load_TaxAffidavit(global_id);\r\n\t\t\t\tthis.load_Permit(global_id);\r\n\t\t\t\tthis.clearTaxAffidavitField();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.push(()=>{\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO = {\t\t\t\t\r\n\t\t\t\tmodelTaxAffidavit:{},\r\n\t\t\t\tmodelPermit:{},\r\n\t\t\t\ttax_affidavit:[],\r\n\t\t\t\tpermits:[]\r\n\t\t\t};\r\n\t\t\tthis.alreadyLoaded=false;\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tformatDate(strDate){\r\n\t\tif(strDate == null || strDate.length == 0)\r\n\t\t\treturn \"\";\r\n\t\tvar dt = new Date(strDate);\r\n\t\tvar month = dt.getMonth()+1;\r\n\t\tvar day = dt.getDate();\r\n\t\tvar year = dt.getFullYear();\r\n\t\treturn ('0'+month).slice(-2)+'/'+('0'+day).slice(-2)+'/'+(\"000\"+year).slice(-4);\r\n\t}\r\n\r\n\tconvertToGMT8(date){\r\n\t\tif(date==undefined || date == null || date.length==0)\r\n\t\t\treturn null;\r\n\t\tvar tempDt = moment(date).add(8, 'hours');\r\n\t\treturn new Date(tempDt);\r\n\t}\r\n\r\n\r\n\tvalidate_input(input, type){\r\n\t\tswitch(type){\r\n\t\t\tcase \"PAGIBIG\": \r\n\t\t\t\t\tvar pagibig = /^(?:\\d{4}-\\d{4}-\\d{4})$/;\r\n\t\t\t\t\treturn pagibig.test(input);\r\n\t\t\tcase \"SSS\":\r\n\t\t\t\t\tvar sss = /^(?:\\d{2}-\\d{7}-\\d{1})$/;\r\n\t\t\t\t\treturn sss.test(input);\r\n\t\t\tcase \"PHILHEALTH\":\r\n\t\t\t\t\tvar philhealth = /^(?:\\d{2}-\\d{9}-\\d{1})$/;\r\n\t\t\t\t\treturn philhealth.test(input);\r\n\t\t\tdefault: return false;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tload_TaxInformation(global_id){\t\t\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_INDIV_MSTR\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.tax_exempt_cd = querySuccess.results[0].TAX_EXEMPT_CD;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.sss_no = querySuccess.results[0].SSS_NO;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.pagibig_no = querySuccess.results[0].PAGIBIG_NO;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.philhealth_no = querySuccess.results[0].PHILHEALTH_NO;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.national_id = querySuccess.results[0].NATIONAL_ID;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.voters_id = querySuccess.results[0].VOTERS_ID;\r\n\t\t\tif(querySuccess.results[0].CREATED_BY != null){\r\n\t\t\t\tvar _user = querySuccess.results[0].CREATED_BY;\r\n\t\t\t\tvar _date = moment.utc(querySuccess.results[0].CREATED_DT).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tthis.lblCreatedBy = _user + ' '+ _date;\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t}\r\n\r\n\t\t\tif(querySuccess.results[0].LAST_UPDATED_BY != null){\r\n\t\t\t\tvar _user = querySuccess.results[0].LAST_UPDATED_BY;\r\n\t\t\t\tvar _date = moment.utc(querySuccess.results[0].LAST_UPDATED_DT).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tthis.lblUpdatedBy = _user+ ' ' + _date;\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\r\n\t\t\ttoastr.clear();\r\n\t\t\tsettings.isNavigating = false;\r\n\r\n\r\n\t\t}, (errorQuery)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(errorQuery, \"Error in loading Government information.\");\r\n\t\t});\r\n\r\n\t\tquery = EntityQuery().from(\"GLOBAL_MSTR\")\r\n\t\t\t\t.where(\"GLOBAL_ID\",\"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.input_tax_cd = querySuccess.results[0].INPUT_TAX_CD;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.tin = querySuccess.results[0].TIN;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.vat_reg_dt = this.formatDate(querySuccess.results[0].VAT_REG_DT);\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.vat_stat_cd = querySuccess.results[0].VAT_STAT_CD;\r\n\t\t\ttoastr.success(\"\",\"Tax Information has been loaded.\");\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t}, (errorQuery)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(errorQuery, \"Error in loading Government information.\");\r\n\t\t});\r\n\t}\r\n\r\n\tload_TaxAffidavit(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"TAX_AFFIDAVIT_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.tax_affidavit=[];\r\n\t\t\tvar tmpList = [];\r\n\t\t\t_.each(querySuccess.results, (result)=>{\r\n\t\t\t\ttmpList.push({\r\n\t\t\t\t\ttax_affidavit_id: result.TAX_AFFIDAVIT_ID,\r\n\t\t\t\t\taffidavit_no: result.AFFIDAVIT_NO,\r\n\t\t\t\t\taffidavit_dt: this.formatDate(result.AFFIDAVIT_DT)\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.tax_affidavit = tmpList;\r\n\t\t\tsettings.isNavigating = false;\t\t\t\r\n\t\t}, (errorQuery)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(errorQuery, \"Error in loading tax affidavit\");\r\n\t\t});\r\n\t}\r\n\r\n\tload_Permit(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"PERMIT_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\r\n\t\tEntityManager().executeQuery(query).then((successQuery)=>{\r\n\t\t\tvar tmpList=[];\r\n\t\t\t_.each(successQuery.results, (result)=>{\r\n\t\t\t\tvar place = this.obj_personnel.LOCATIONS.find((x)=>{\r\n\t\t\t\t\treturn x.LOCATION_CD == result.PLACE_OF_ISSUE;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar permit = this.obj_personnel.PERMIT.find((x)=>{\r\n\t\t\t\t\treturn x.value == result.PERMIT_CD;\r\n\t\t\t\t});\r\n\r\n\t\t\t\ttmpList.push({\r\n\t\t\t\t\tglobal_id: result.GLOBAL_ID,\r\n\t\t\t\t\tpermit_no: result.PERMIT_NO,\r\n\t\t\t\t\texpiry_dt: this.formatDate(result.EXPIRY_DT),\r\n\t\t\t\t\tpermit_cd: result.PERMIT_CD,\r\n\t\t\t\t\tagency_cd: result.AGENCY_CD,\r\n\t\t\t\t\tpermit_id: result.PERMIT_ID,\r\n\t\t\t\t\tgrant_dt: result.GRANT_DT,\r\n\t\t\t\t\tplace_of_issue: result.PLACE_OF_ISSUE,\r\n\t\t\t\t\tpoi: place.LOCATION_DESC,\r\n\t\t\t\t\tpermit_name: permit.text\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.permits = tmpList;\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t}, (errorQuery)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(errorQuery, \"Error in loading permits.\");\r\n\t\t});\r\n\t}\r\n\r\n\tclearTaxAffidavitField(){\r\n\t\tsettings.isNavigating = false;\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no = \"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt = \"\";\r\n\t\t//$(\"#affidavit_dt\").val(\"\");\r\n\t}\r\n\r\n\tbtnAdd_TaxAffidavit(){\r\n\t\tvar strValidation=\"\";\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no == undefined || this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no == null || this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no.length==0){\r\n\t\t\tstrValidation += \"Affidavit no is required.<br/>\";\r\n\t\t}\r\n\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt = $(\"#affidavit_dt\").val();\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt == undefined || this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt == null || this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt.length==0){\r\n\t\t\tstrValidation += \"Affidavit date is required.<br/>\";\r\n\t\t}else{\r\n\t\t\tif(!moment(this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt).isValid()){\r\n\t\t\t\tstrValidation += \"Invalid affidavit dt.<br/>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tthis.insertTaxAffidavit();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tbtnRemove_TaxAffidavit(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the tax affidavit?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n  \t\t\t\t\tsettings.isNavigating = true;\r\n\t  \t\t\t\t//alert(\"Confirmed delete.\");\r\n  \t\t\t\t\tvar query = EntityQuery().from('TAX_AFFIDAVIT_TRX').where('TAX_AFFIDAVIT_ID', '==', item.tax_affidavit_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The tax affidavit was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.load_TaxAffidavit(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing tax affidavit.\");\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tinsertTaxAffidavit(){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"TAX_AFFIDAVIT_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"TAX_AFFIDAVIT_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tvar Max = 1;\r\n\t\t\tif(querySuccess.results.length>0){\r\n\t\t\t\tMax = querySuccess.results[0].TAX_AFFIDAVIT_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar tax_affidavit = {\r\n\t\t\t\tGLOBAL_ID: this.obj_personnel.global_indiv_id,\r\n\t\t\t\tAFFIDAVIT_NO: this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no,\r\n\t\t\t\tTAX_AFFIDAVIT_ID: Max,\r\n\t\t\t\tAFFIDAVIT_DT: this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt,\r\n\t\t\t\tRELEASE_DT: dateToday,\r\n\t\t\t\tRETURN_DT: dateToday,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t}\r\n\t\t\tvar entity = EntityManager().createEntity(\"TAX_AFFIDAVIT_TRX\", tax_affidavit);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(saveSuccess, \"Record saved.\");\r\n\t\t\t\tthis.load_TaxAffidavit(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearTaxAffidavitField();\r\n\t\t\t}, (errorSave)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity!=null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.error(errorQuery, \"Error in saving Tax affidavit.\");\r\n\t\t\t});\r\n\r\n\r\n\t\t}, (errorQuery)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(errorQuery, \"Error in querying Tax affidavit id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tclearPermitField(){\r\n\t\tsettings.isNavigating = false;\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd=\"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no=\"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt=\"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue=\"\";\r\n\t}\r\n\r\n\tbtnAdd_Permit(){\r\n\t\tvar strValidation=\"\";\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd == undefined || this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd == null || this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd.length==0){\r\n\t\t\tstrValidation+=\"No Permit type specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no == undefined || this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no == null || this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no.length==0){\r\n\t\t\tstrValidation+=\"No Permit number specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt = $(\"#expiry_dt\").val();\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt == undefined || this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt == null || this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt.length==0){\r\n\t\t\tstrValidation+=\"No expiry date specified.<br/>\";\r\n\t\t}else{\r\n\t\t\tif(!moment(this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt).isValid()){\r\n\t\t\t\tstrValidation+=\"Invalid expiry date.<br/>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue == undefined || this.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue == null || this.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue.length==0){\r\n\t\t\tstrValidation+=\"No place of issuance specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tthis.insertPermit();\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tbtnUpdate_Permit(item){\r\n\r\n\t}\r\n\r\n\tbtnRemove_Permit(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the permit?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\t//alert(\"Confirmed delete.\");\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('PERMIT_TRX').where('PERMIT_ID', '==', item.permit_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The permit was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.load_Permit(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing permit.\");\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tinsertPermit(){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"PERMIT_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"PERMIT_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tvar Max = 1;\r\n\t\t\tif(querySuccess.results.length>0){\r\n\t\t\t\tMax = querySuccess.results[0].PERMIT_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar permit = {\r\n\t\t\t\tGLOBAL_ID: this.obj_personnel.global_indiv_id,\r\n\t\t\t\tPERMIT_NO: this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no,\r\n\t\t\t\tEXPIRY_DT: this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt,\r\n\t\t\t\tPERMIT_CD: this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd,\r\n\t\t\t\t AGENCY_CD: this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd,\r\n\t\t\t\tPERMIT_ID: Max,\r\n\t\t\t\tPLACE_OF_ISSUE: this.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"PERMIT_TRX\", permit);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.load_Permit(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearPermitField();\r\n\t\t\t}, (errorSave)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", errorSave);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t\r\n\tvalidate(){\r\n\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.pagibig_no = $(\"#_pagibig\").val();\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.philhealth_no = $(\"#_philhealth\").val();\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.sss_no = $(\"#_sss\").val();\r\n\t\tvar strValidation=\"\";\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.pagibig_no.length>0){\r\n\t\t\tif(this.obj_personnel.GOVERNMENT_INFO.pagibig_no != \"____-____-____\" && !this.validate_input(this.obj_personnel.GOVERNMENT_INFO.pagibig_no, \"PAGIBIG\")){\r\n\t\t\t\tstrValidation+=\"Invalid Pag-ibig No.<br/>\";\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t// this.obj_personnel.GOVERNMENT_INFO.pagibig_no = \"0000-0000-0000\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.sss_no.length>0){\r\n\t\t\tif(this.obj_personnel.GOVERNMENT_INFO.sss_no != \"__-_______-_\" &&  !this.validate_input(this.obj_personnel.GOVERNMENT_INFO.sss_no, \"SSS\")){\r\n\t\t\t\tstrValidation+=\"Invalid SSS No.<br/>\";\r\n\t\t\t\tconsole.log(this.obj_personnel.GOVERNMENT_INFO.sss_no);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t// this.obj_personnel.GOVERNMENT_INFO.sss_no = \"00-0000000-0\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.philhealth_no.length>0){\r\n\t\t\tif(this.obj_personnel.GOVERNMENT_INFO.philhealth_no != \"__-_________-_\" && !this.validate_input(this.obj_personnel.GOVERNMENT_INFO.philhealth_no, \"PHILHEALTH\")){\r\n\t\t\t\tstrValidation+=\"Invalid Philhealth No.<br/>\";\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t// this.obj_personnel.GOVERNMENT_INFO.philhealth_no = \"00-000000000-0\";\r\n\t\t}\r\n\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.vat_reg_dt = $(\"#vat_reg_dt\").val();\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\t\t\t\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tthis.update();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tupdate(){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\r\n\t\tvar philhealth = null;\r\n\t\tvar pagibig = null;\r\n\t\tvar sss =null;\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.philhealth_no != \"__-_________-_\")\r\n\t\t{\r\n\t\t\tphilhealth=this.obj_personnel.GOVERNMENT_INFO.philhealth_no;\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.pagibig_no != \"____-____-____\")\r\n\t\t{\r\n\t\t\tpagibig=this.obj_personnel.GOVERNMENT_INFO.pagibig_no;\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.sss_no != \"__-_______-_\")\r\n\t\t{\r\n\t\t\tsss=this.obj_personnel.GOVERNMENT_INFO.sss_no;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_INDIV_MSTR\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", this.obj_personnel.global_indiv_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess1)=>{\r\n\t\t\tquerySuccess1.results[0].TAX_EXEMPT_CD = this.obj_personnel.GOVERNMENT_INFO.tax_exempt_cd;\r\n\t\t\t// querySuccess1.results[0].SSS_NO = this.obj_personnel.GOVERNMENT_INFO.sss_no;\r\n\t\t\t// querySuccess1.results[0].PAGIBIG_NO = this.obj_personnel.GOVERNMENT_INFO.pagibig_no;\r\n\t\t\t// querySuccess1.results[0].PHILHEALTH_NO = this.obj_personnel.GOVERNMENT_INFO.philhealth_no;\t\t\t\r\n\t\t\tquerySuccess1.results[0].SSS_NO = sss;\r\n\t\t\tquerySuccess1.results[0].PAGIBIG_NO = pagibig;\r\n\t\t\tquerySuccess1.results[0].PHILHEALTH_NO = philhealth;\r\n\t\t\tquerySuccess1.results[0].NATIONAL_ID = this.obj_personnel.GOVERNMENT_INFO.national_id;\r\n\t\t\tquerySuccess1.results[0].VOTERS_ID = this.obj_personnel.GOVERNMENT_INFO.voters_id;\r\n\t\t\tquerySuccess1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\tquerySuccess1.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\tEntityManager().saveChanges().then((save1)=>{\r\n\t\t\t\t\r\n\t\t\t\tquery=EntityQuery().from(\"GLOBAL_MSTR\")\r\n\t\t\t\t\t  .where(\"GLOBAL_ID\", \"==\", this.obj_personnel.global_indiv_id);\r\n\t\t\t\tEntityManager().executeQuery(query).then((querySuccess2)=>{\r\n\t\t\t\t\tquerySuccess2.results[0].INPUT_TAX_CD = this.obj_personnel.GOVERNMENT_INFO.input_tax_cd;\r\n\t\t\t\t\tquerySuccess2.results[0].VAT_REG_DT = this.convertToGMT8(this.obj_personnel.GOVERNMENT_INFO.vat_reg_dt);\r\n\t\t\t\t\tquerySuccess2.results[0].VAT_STAT_CD = this.obj_personnel.GOVERNMENT_INFO.vat_stat_cd;\r\n\t\t\t\t\tquerySuccess2.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\t\tquerySuccess2.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\t\t\tEntityManager().saveChanges().then((save2)=>{\r\n\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\t}, (error2)=>{\r\n\t\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\ttoastr.error(\"\", error2);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t}, (error1)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", error1);\r\n\t\t\t});\r\n\t\t}, (queryError1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(queryError1, \"Error in querying other government info.\");\r\n\t\t});\r\n\t}\r\n\r\n\t//source: https://stackoverflow.com/questions/12578507/how-to-implement-an-input-with-a-mask\r\n\tisDigit(event){\r\n\t\tif ((event.charCode >= 48 && event.charCode <= 57) || event.keyCode == 9 || event.keyCode == 10 || event.keyCode == 13 || event.keyCode == 8 || event.keyCode == 116 || event.keyCode == 46 || (event.keyCode <= 40 && event.keyCode >= 37)) {\r\n    \t\treturn true;\r\n  \t\t} else {\r\n    \t\treturn false;\r\n  \t\t}  \t\t\r\n\t}\r\n\r\n\t//source: https://stackoverflow.com/questions/12578507/how-to-implement-an-input-with-a-mask\r\n\tinput_mask(id, mask){\r\n\t\tvar myMask = mask;\r\n  \t\tvar myCaja = document.getElementById(id);\r\n  \t\tvar myText = \"\";\r\n  \t\tvar myNumbers = [];\r\n  \t\tvar myOutPut = \"\"\r\n  \t\tvar theLastPos = 1;\r\n  \t\tmyText = myCaja.value;\r\n  \t\t//get numbers\r\n  \t\tfor (var i = 0; i < myText.length; i++) {\r\n    \t\tif (!isNaN(myText.charAt(i)) && myText.charAt(i) != \" \") {\r\n      \t\t\tmyNumbers.push(myText.charAt(i));\r\n    \t\t}\r\n  \t\t}\r\n  //write over mask\r\n  \t\tfor (var j = 0; j < myMask.length; j++) {\r\n    \t\tif (myMask.charAt(j) == \"_\") { //replace \"_\" by a number \r\n      \t\t\tif (myNumbers.length == 0)\r\n        \t\t\tmyOutPut = myOutPut + myMask.charAt(j);\r\n      \t\t\telse {\r\n        \t\t\tmyOutPut = myOutPut + myNumbers.shift();\r\n        \t\t\ttheLastPos = j + 1; //set caret position\r\n      \t\t\t}\r\n    \t\t} else {\r\n      \t\t\tmyOutPut = myOutPut + myMask.charAt(j);\r\n    \t\t}\r\n  \t\t}\r\n\r\n  \t\tdocument.getElementById(id).value = myOutPut;\r\n  \t\tdocument.getElementById(id).setSelectionRange(theLastPos, theLastPos);\r\n\t}\r\n\r\n\r\n\r\n}","//import {checkCookie,setCookie,removeCookie} from '.././helpers';\r\nimport toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {ppid_search} from \"../modals/ppid_search\";\r\nimport moment from 'moment';\r\nimport {fnSerializeCode} from \"../../helpers\";\r\nimport { cache_obj } from '../../cache_obj';\r\nimport {input_mask} from \"../../helpers\";\r\nimport {isDigit} from \"../../helpers\";\r\nimport settings from 'settings';\r\n\r\n@inject(DialogService, obj_personnel, toastr, cache_obj)\r\nexport class main\r\n{\r\n\t\r\n\r\n\t_disableSearchPersonnel = false;\r\n\t_disableCreatePersonnel = false;\t\r\n\t_disableSavePersonnel = true;\r\n\t_disableClearData = true;\r\n\t_disableResetData = true;\r\n\t_disableForm = true;\r\n\t_isActiveTab=true;\r\n\r\n\tgender=[\"Male\", \"Female\"];\r\n\tselectedGender=\"\";\r\n\tselected_citizenship=\"\";\r\n\tselected_group=\"\";\t\r\n\tobj_personnel=null;\r\n\tcache_obj=null;\r\n\t_404_img = \"/images/404.png\";\r\n\tprimary_img=\"/styles/images/abslogo_BIG.png\";\r\n\tconstructor(dialogService, obj_personnel, toastr, cache_obj)\r\n\t{\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.dialogService = dialogService;\r\n\t\tthis.cache_obj = cache_obj;\r\n\t\tthis.obj_personnel.USER = this.cache_obj.USER;\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num, global_id)=>{\r\n\t\t\t// this.loadData(global_id);\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.ppid_dialog.push((val)=>{\t\t\t\r\n\t\t\tthis.loadData(val);\r\n\t\t});\r\n\r\n\t\t// this.obj_personnel.OBSERVERS.clear_ppid.push(()=>{\r\n\t\t// \tthis.clearData();\r\n\t\t// });\r\n\r\n\t\t// this.LoginPassed(this.obj_personnel.USER);\r\n        //this.obj_personnel.OBSERVERS.ppid_dialog.length;\r\n    }\r\n\r\n\t//https://stackoverflow.com/questions/4060004/calculate-age-in-javascript\r\n\tgetAge(dateString) {\r\n\t\tif(dateString == null || dateString.length==0)\r\n\t\t\treturn;\r\n\t\tvar today = new Date();\r\n\t\tvar birthDate = new Date(dateString);\r\n\t\tvar age = today.getFullYear() - birthDate.getFullYear();\r\n\t\tvar m = today.getMonth() - birthDate.getMonth();\r\n\t\tif (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\r\n\t\t\tage--;\r\n\t\t}\r\n\t\treturn age;\r\n\t}\r\n\r\n\r\n\tloadData(global_id)\r\n\t{\r\n\t\tsettings.isNavigating = true;\r\n\t\t//toastr.success('Retrieving data...', 'Loading...');\r\n\t\tthis.obj_personnel.global_indiv_id=global_id;\r\n\t\tvar _query = EntityQuery().from('GLOBAL_INDIV_MSTR')\r\n\t\t\t\t\t.where('GLOBAL_INDIV_ID', '==', global_id);\r\n\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\tthis.obj_personnel.HEADER.global_indiv_id = result.GLOBAL_INDIV_ID;\r\n\t\t\t\tthis.obj_personnel.HEADER.given_name = result.GIVEN_NAME;\r\n\t\t\t\tthis.obj_personnel.HEADER.last_name = result.LAST_NAME;\r\n\t\t\t\tthis.obj_personnel.HEADER.middle_name = result.MIDDLE_NAME;\r\n\t\t\t\tthis.obj_personnel.HEADER.religion_cd = result.RELIGION_CD;\r\n\t\t\t\tif(moment(result.BIRTH_DT).isValid()){\r\n\t\t\t\t\tvar birthdt = moment.utc(result.BIRTH_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\t// birthdt = new Date(birthdt);\r\n\t\t\t\t\tif(birthdt.length==0){\r\n\t\t\t\t\t\t// $(\"#birthDate\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$(\"#birthDate\").datepicker(\"setValue\", new Date(birthdt));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.obj_personnel.HEADER.birth_dt = birthdt;\r\n\t\t\t\t}\r\n\t\t\t\tthis.obj_personnel.HEADER.age = this.getAge(result.BIRTH_DT);\r\n\t\t\t\tthis.obj_personnel.HEADER.civil_status = result.CIVIL_STATUS;\r\n\t\t\t\tthis.obj_personnel.HEADER.mother_maiden_name = result.MOTHER_MAIDEN_NAME;\r\n\t\t\t\tthis.obj_personnel.HEADER.alias = result.ALIAS;\r\n\t\t\t\tthis.obj_personnel.HEADER.birth_place = result.BIRTH_PLACE; \r\n\t\t\t\tthis.obj_personnel.HEADER.gender = result.GENDER;\t\t\t\t\r\n\t\t\t\tswitch(result.GENDER)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase \"M\": \tthis.selectedGender=\"Male\";\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"F\": \tthis.selectedGender=\"Female\";\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tthis.obj_personnel.HEADER.acr_no = result.ACR_NO;\r\n\t\t\t});\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Success\");\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t},(failed)=>{\r\n\t\t\ttoastr.error(failed,\"Error in retrieving data[1].\");\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from('GLOBAL_MSTR')\r\n\t\t\t\t.where('GLOBAL_ID','==', global_id);\r\n\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\t\t\t\t\t\r\n\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\tthis.obj_personnel.HEADER.tin = result.TIN;\r\n\t\t\t\tthis.obj_personnel.HEADER.country_cd = result.COUNTRY_CD;\r\n\t\t\t\tthis.obj_personnel.HEADER.country_base_cd = result.COUNTRY_BASE_CD;\r\n\t\t\t\tthis.obj_personnel.HEADER.location_base_cd = result.LOCATION_BASE_CD;\r\n\t\t\t\tthis.obj_personnel.HEADER.status_cd = result.STATUS_CD;\r\n\t\t\t\tthis.obj_personnel.HEADER.created_by = result.CREATED_BY;\r\n\t\t\t\tthis.obj_personnel.HEADER.created_dt = moment.utc(result.CREATED_DT).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tthis.obj_personnel.HEADER.last_updated_by = result.LAST_UPDATED_BY;\r\n\t\t\t\tthis.obj_personnel.HEADER.last_updated_dt = moment.utc(result.LAST_UPDATED_DT).format(\"MM/DD/YYYY hh:mm A\");\r\n\r\n\t\t\t\tif(this.obj_personnel.HEADER.status_cd == \"SUSPEND\"){\r\n\t\t\t\t\tvar _pred1 = breeze.Predicate.create(\"GLOBAL_ID\",\"==\", global_id);\r\n\t\t\t\t\tvar _pred2 = breeze.Predicate.create(\"SUSPEND_LEVEL\", \"==\", 1);\r\n\t\t\t\t\tvar _finalPred = breeze.Predicate.and([_pred1, _pred2]);\r\n\t\t\t\t\t_query = EntityQuery().from('SUSPEND_TRX')\r\n\t\t\t\t\t\t\t.where(_finalPred)\r\n\t\t\t\t\t\t\t.orderByDesc(\"SUSPEND_ID\")\r\n\t\t\t\t\t\t\t.take(1);\r\n\t\t\t\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\t\t\t\tif(success.results.length>0){\r\n\t\t\t\t\t\t\tthis.obj_personnel.HEADER.suspend_id = success.results[0].SUSPEND_ID;\r\n\t\t\t\t\t\t\t// this.obj_personnel.HEADER.suspension_start = success.results[0].START_DT;\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar start_dt = moment.utc(success.results[0].START_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\t\t\tthis.obj_personnel.HEADER.suspension_start = start_dt;\r\n\t\t\t\t\t\t\t$(\"#suspensionFrom\").datepicker(\"setValue\", new Date(start_dt));\r\n\r\n\t\t\t\t\t\t\tvar end_dt = moment.utc(success.results[0].END_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\t\t\tthis.obj_personnel.HEADER.suspension_end = end_dt;\r\n\t\t\t\t\t\t\t$(\"#suspensionTo\").datepicker(\"setValue\", new Date(end_dt));\r\n\t\t\t\t\t\t\t// this.obj_personnel.HEADER.suspension_end = success.results[0].END_DT;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, (error)=>{\r\n\t\t\t\t\t\ttoastr.error(\"\", error);\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.HEADER.suspension_start = \"\";\r\n\t\t\t\t\tthis.obj_personnel.HEADER.suspension_end=\"\";\r\n\t\t\t\t\t// $(\"#suspensionFrom\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t\t// $(\"#suspensionTo\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t},(failed)=>{\r\n\t\t\t\ttoastr.error(failed,\"Error in retrieving data[2].\");\r\n\t\t\t});\r\n\r\n\r\n\r\n\t\t_query = EntityQuery().from('CITIZENSHIP_TRX')\r\n\t\t\t\t.where('GLOBAL_INDIV_ID','==', global_id)\r\n\t\t\t\t.orderBy('CITIZENSHIP_CD');\r\n\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmpArr=[];\r\n\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\tvar tmp=this.obj_personnel.CITIZENSHIP.find((x)=>{\r\n\t\t\t\t\tif(x.value === result.CITIZENSHIP_CD){\r\n\t\t\t\t\t\treturn x;\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(tmp != null)\r\n\t\t\t\t{\r\n\t\t\t\t\ttmpArr.push(tmp);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.HEADER.citizenship = tmpArr;\r\n\t\t},(failed)=>{\r\n\t\t\ttoastr.error(failed, 'Error in Retrieving Citizenship list.');\r\n\t\t});\r\n\r\n\t\tvar pred1 = breeze.Predicate.create('GLOBAL_INDIV_ID', '==', global_id);\r\n\t\tvar pred2 = breeze.Predicate.create('STATUS_CD', '==', 'ACTV');\r\n\t\tvar finalPred = breeze.Predicate.and([pred1, pred2]);\r\n\t\t_query = EntityQuery().from('GRP_INDIV_MSTR')\r\n\t\t\t\t.where(finalPred);\r\n\r\n\t\tthis.obj_personnel.HEADER.group.length=0;\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmpArr=[];\r\n\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\tvar tmp = this.obj_personnel.GROUP.find((x)=>{\r\n\t\t\t\t\tif(x.value === result.GLOBAL_GRP_ID){\r\n\t\t\t\t\t\treturn x;\r\n\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t\tif(tmp != null){\r\n\t\t\t\t\ttmpArr.push(tmp);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.HEADER.group = tmpArr;\r\n\t\t},(failed)=>{\r\n\t\t\ttoastr.error(failed, 'Error in Retrieving Group list.');\r\n\t\t});\r\n\t}\r\n\r\n\tbtnAdd_Citizenship(){\r\n\t\tif(this.selected_citizenship.length>0){\r\n\r\n\t\t\tvar checkIfExist = this.obj_personnel.HEADER.citizenship.find((c)=>{\r\n\t\t\t\tif(c.value === this.selected_citizenship){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(checkIfExist){\r\n\t\t\t\ttoastr.error('The selected citizenship is already in the list.','Citizenship function');\r\n\t\t\t\t$('.ddCitizenship').val('');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar tmp = this.obj_personnel.CITIZENSHIP.find((c)=>{\r\n\t\t\t\tif(c.value === this.selected_citizenship){\r\n\t\t\t\t\treturn c;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(tmp != null){\r\n\t\t\t\tthis.obj_personnel.HEADER.citizenship.push(tmp);\r\n\t\t\t\t//$('.ddCitizenship').val('');\r\n\t\t\t\tthis.selected_citizenship='';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tremoveCitizenship(item){\r\n\t\tvar index = this.obj_personnel.HEADER.citizenship.indexOf(item);\r\n\t\tthis.obj_personnel.HEADER.citizenship.splice(index, 1);\r\n\t}\r\n\r\n\tremoveAllCitizenship(){\r\n\t\tthis.obj_personnel.HEADER.citizenship=[];\r\n\t}\r\n\r\n\tbtnAdd_Group(){\r\n\r\n\t\tif(this.selected_group.length>0){\r\n\t\t\t// var result = this.obj_personnel.HEADER.group.some((x)=>x.value == this.selected_group);\r\n\t\t\tvar checkIfExist = this.obj_personnel.HEADER.group.find((c)=>{\r\n\t\t\t\tif(c.value === this.selected_group){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(checkIfExist){\r\n\t\t\t\ttoastr.error('The selected group is already added in the list.','Group function');\r\n\t\t\t\t$('.ddGroup').val('');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar tmp = this.obj_personnel.GROUP.find((c)=>{\r\n\t\t\t\tif(c.value === this.selected_group){\r\n\t\t\t\t\treturn c;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(tmp != null){\r\n\t\t\t\tthis.obj_personnel.HEADER.group.push(tmp);\r\n\t\t\t\t//$('.ddGroup').val('');\r\n\t\t\t\tthis.selected_group = '';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tremoveGroup(item)\r\n\t{\r\n\t\tvar index = this.obj_personnel.HEADER.group.indexOf(item);\r\n\t\tthis.obj_personnel.HEADER.group.splice(index, 1);\r\n\t}\r\n\r\n\tremoveAllGroup(){\r\n\t\tthis.obj_personnel.HEADER.group=[];\r\n\t}\r\n\r\n\tfnPersonnel(call)\r\n\t{\r\n\r\n\t\t$(\"#birthDate\").datepicker();\r\n\t\t$(\"#suspensionFrom\").datepicker();\r\n\t\t$(\"#suspensionTo\").datepicker();\t\t\r\n\t\tswitch(call)\r\n\t\t{\r\n\t\t\tcase \"EDIT\": \t\r\n\t\t\t\tthis.dialogService.open({ viewModel: ppid_search }).whenClosed(response=>{\r\n\t\t\t\t\t\tif(!response.wasCancelled)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis._disableSearchPersonnel = true;\r\n\t\t\t\t\t\t\tthis._disableCreatePersonnel = true;\r\n\t\t\t\t\t\t\tthis._disableResetData = false;\r\n\t\t\t\t\t\t\tthis._disableClearData = false;\r\n\t\t\t\t\t\t\tthis._disableSavePersonnel = false;\r\n\t\t\t\t\t\t\tthis._disableForm = false;\r\n\t\t\t\t\t\t\tthis.obj_personnel.editing_status = 'EDIT';\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tconsole.log('search was cancelled.');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"CREATE\": \t\r\n\t\t\t\tthis._disableSearchPersonnel = true;\r\n\t\t\t\tthis._disableCreatePersonnel = true;\r\n\t\t\t\tthis._disableResetData = false;\r\n\t\t\t\tthis._disableClearData = false;\r\n\t\t\t\tthis._disableSavePersonnel = false;\r\n\t\t\t\tthis._disableForm = false;\t\t\t\t\t\t\t\r\n\t\t\t\tthis.obj_personnel.editing_status = 'CREATE';\r\n\t\t\t\tthis.selected_citizenship = \"FIL\";\r\n\t\t\t\tthis.btnAdd_Citizenship();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"CLEAR\": \r\n\t\t\t\tthis.clearData();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"SAVE\": \r\n\t\t\t\tif(this.obj_personnel.editing_status == 'CREATE'){\r\n\t\t\t\t\tthis.validateHeader('INSERT');\r\n\t\t\t\t}else if(this.obj_personnel.editing_status == 'EDIT'){\r\n\t\t\t\t\tthis.validateHeader('UPDATE');\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateHeader(passed_status){\r\n\r\n\t\tconsole.log(this.obj_personnel.HEADER.tin);\r\n\t\tvar strValidation=\"\";\r\n\t\tif(this.obj_personnel.HEADER.country_cd == undefined || this.obj_personnel.HEADER.country_cd == null || this.obj_personnel.HEADER.country_cd.length==0){\r\n\t\t\tstrValidation+=\"No Country specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.tin == undefined || this.obj_personnel.HEADER.tin == null || this.obj_personnel.HEADER.tin.length===0){  \t\t\t\r\n\t\t\tstrValidation+=\"No TIN specified.<br/>\";\r\n\t\t}else{\r\n\t\t\tvar TinRegex = /^(?:\\d{3}-\\d{3}-\\d{3}-\\d{3})$/;\r\n\t\t\tvar TinRegex2 = /^(?:\\d{12})$/;\r\n\t\t\tif(!TinRegex.test(this.obj_personnel.HEADER.tin) && !TinRegex2.test(this.obj_personnel.HEADER.tin))\r\n\t\t\t{\r\n\t\t\t\tstrValidation+=\"TIN is invalid.<br/>\";\r\n\t\t\t}else if(TinRegex2.test(this.obj_personnel.HEADER.tin))\r\n\t\t\t{\r\n\t\t\t\tvar set_1 = this.obj_personnel.HEADER.tin.substring(0,3);\r\n\t\t\t\tvar set_2 = this.obj_personnel.HEADER.tin.substring(3,6);\r\n\t\t\t\tvar set_3 = this.obj_personnel.HEADER.tin.substring(6,9);\r\n\t\t\t\tvar set_4 = this.obj_personnel.HEADER.tin.substring(9,12);\r\n\t\t\t\tthis.obj_personnel.HEADER.tin = set_1+'-'+set_2+'-'+set_3+'-'+set_4;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.last_name == undefined || this.obj_personnel.HEADER.last_name==null || this.obj_personnel.HEADER.last_name.length == 0){\r\n\t\t\tstrValidation+=\"No Last Name specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.given_name == undefined || this.obj_personnel.HEADER.given_name==null || this.obj_personnel.HEADER.given_name.length==0){\r\n\t\t\tstrValidation+=\"No First Name specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.middle_name == undefined || this.obj_personnel.HEADER.middle_name==null || this.obj_personnel.HEADER.middle_name.length==0){\r\n\t\t\tstrValidation+=\"No Middle Name specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.selectedGender.length==0){\r\n\t\t\t//if(this.obj_personnel.HEADER.gender == undefined || this.obj_personnel.HEADER.gender == null || this.obj_personnel.HEADER.gender.length==0){\r\n\t\t\tstrValidation+=\"No Gender specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.birth_dt != undefined && this.obj_personnel.HEADER.birth_dt != null && this.obj_personnel.HEADER.birth_dt.trim().length > 0){\r\n\t\t\tif(!moment(this.obj_personnel.HEADER.birth_dt).isValid()){\r\n\t\t\t\tstrValidation+=\"Invalid date of birth.<br/>\";\r\n\t\t\t}else{\r\n\t\t\t\tvar bdt = new Date(this.obj_personnel.HEADER.birth_dt);\r\n\t\t\t\tvar today = new Date();\r\n\t\t\t\tif(today<bdt){\r\n\t\t\t\t\tstrValidation+=\"Date of birth cannot be greater than today.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tstrValidation += \"No birth date specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.religion_cd == undefined || this.obj_personnel.HEADER.religion_cd==null || this.obj_personnel.HEADER.religion_cd.length == 0){\r\n\t\t\tstrValidation += \"No religion specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.status_cd == \"SUSPEND\"){\r\n\r\n\t\t\tvar sus_start = null;\r\n\t\t\tvar sus_end = null;\r\n\t\t\tthis.obj_personnel.HEADER.suspension_start = $(\"#suspensionFrom\").val();\r\n\t\t\tthis.obj_personnel.HEADER.suspension_end = $(\"#suspensionTo\").val();\r\n\t\t\tif(this.obj_personnel.HEADER.suspension_start != undefined && this.obj_personnel.HEADER.suspension_start != null && this.obj_personnel.HEADER.suspension_start.length>0){\r\n\t\t\t\tif(!moment(this.obj_personnel.HEADER.suspension_start).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid suspension start date.<br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsus_start = new Date(this.obj_personnel.HEADER.suspension_start);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+= \"No start date of suspension specified.<br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.HEADER.suspension_end != undefined && this.obj_personnel.HEADER.suspension_end != null && this.obj_personnel.HEADER.suspension_end.length>0){\t\t\t\r\n\t\t\t\tif(!moment(this.obj_personnel.HEADER.suspension_end).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid suspension end date.<br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsus_end = new Date(this.obj_personnel.HEADER.suspension_end);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+= \"No end date of suspension specified.<br/>\";\t\r\n\t\t\t}\r\n\r\n\t\t\tif(sus_start != null && sus_end != null){\r\n\t\t\t\tif(sus_end < sus_start){\r\n\t\t\t\t\tstrValidation+= \"end date of suspension cannot be greater than the start date.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\r\n\t\tif(strValidation.length>0)\r\n\t\t{\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(strValidation, 'Personnel info');  \t\t\t\r\n\t\t\treturn;\r\n\t\t}else{\r\n\t\t\tvar mother_maiden_nm = this.obj_personnel.HEADER.mother_maiden_name;\r\n\t\t\tvar alias_nick = this.obj_personnel.HEADER.alias;\r\n\t\t\tvar first_nm = this.obj_personnel.HEADER.given_name;\r\n\t\t\tvar middle_nm = this.obj_personnel.HEADER.middle_name;\r\n\t\t\tvar last_nm = this.obj_personnel.HEADER.last_name;\r\n\t\t\tif(mother_maiden_nm != null)\r\n\t\t\t\tthis.obj_personnel.HEADER.mother_maiden_name = mother_maiden_nm.toUpperCase();\r\n\t\t\tif(alias_nick != null)\r\n\t\t\t\tthis.obj_personnel.HEADER.alias = alias_nick.toUpperCase();\r\n\t\t\tif(first_nm != null)\r\n\t\t\t\tthis.obj_personnel.HEADER.given_name = first_nm.toUpperCase();\r\n\t\t\tif(middle_nm != null)\r\n\t\t\t\tthis.obj_personnel.HEADER.middle_name = middle_nm.toUpperCase();\r\n\t\t\tif(last_nm != null)\r\n\t\t\t\tthis.obj_personnel.HEADER.last_name = last_nm.toUpperCase();\r\n\t\t}\r\n\r\n\t\tif(passed_status.includes(\"INSERT\")){\r\n\t\t\tvar query = EntityQuery().from(\"GLOBAL_MSTR\")\r\n\t\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", this.obj_personnel.HEADER.tin+this.obj_personnel.HEADER.country_cd);\r\n\t\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\t\tif(s1.results.length>0){\r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.error(\"Tin already exist.\", \"Personnel info\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.saveHeader();\r\n\t\t\t\t}\r\n\r\n\t\t\t}, (e1)=>{\r\n\t\t\t\ttoastr.error(e1,\"Personnel info\");\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t\telse if(passed_status.includes('UPDATE')){\r\n\t\t\tthis.updateHeader();\r\n\t\t}\r\n\t}\r\n\r\n\tsaveHeader(){\r\n\t\tsettings.isNavigating = true;\r\n\t\ttoastr.clear();\r\n\t\tvar varInsert=null;  \t\t\r\n\t\tvar bdate = null;\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\r\n\t\tthis.obj_personnel.HEADER.birth_dt = $(\"#birthDate\").val();\r\n\r\n\t\tif(this.obj_personnel.HEADER.birth_dt != undefined && this.obj_personnel.HEADER.birth_dt != null && this.obj_personnel.HEADER.birth_dt.length > 0){\r\n\t\t\tbdate = new moment(new Date(this.obj_personnel.HEADER.birth_dt)).add(8,'hours');\r\n\t\t\tbdate = new Date(bdate);\r\n\t\t}\r\n\r\n\r\n\t\tvar varInsert_2 = EntityManager().createEntity('GLOBAL_MSTR', {\r\n\t\t\tGLOBAL_ID: this.obj_personnel.HEADER.tin+this.obj_personnel.HEADER.country_cd,\r\n\t\t\tCOUNTRY_CD: this.obj_personnel.HEADER.country_cd,\r\n\t\t\tTIN: this.obj_personnel.HEADER.tin,\r\n\t\t\tCOUNTRY_BASE_CD: this.obj_personnel.HEADER.country_base_cd,\r\n\t\t\tLOCATION_BASE_CD: this.obj_personnel.HEADER.location_base_cd,\r\n\t\t\tSTATUS_CD: this.obj_personnel.HEADER.status_cd,\r\n\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\tCREATED_DT: dateToday,\r\n\t\t\tACTIVE_FL:'1',\r\n\t\t\tPARK_FL:'0',\r\n\t\t\tINDIV_FL:1\r\n\t\t});\r\n\r\n\t\tconsole.log(varInsert_2);\r\n\r\n\t\tEntityManager().addEntity(varInsert_2);\r\n\t\tEntityManager().saveChanges().then((success)=>{\r\n\r\n\t\t\tvarInsert = EntityManager().createEntity('GLOBAL_INDIV_MSTR', {\r\n\t\t\t\tGLOBAL_INDIV_ID: this.obj_personnel.HEADER.tin+this.obj_personnel.HEADER.country_cd,\r\n\t\t\t\t//TAX_EXEMPT_CD: '--',\r\n\t\t\t\tEMERGENCY_RELATION_CD:null,\r\n\t\t\t\tINDIV_ID:0,\r\n\t\t\t\tGIVEN_NAME: this.obj_personnel.HEADER.given_name,\r\n\t\t\t\tMIDDLE_NAME: this.obj_personnel.HEADER.middle_name,\r\n\t\t\t\tLAST_NAME: this.obj_personnel.HEADER.last_name,\r\n\t\t\t\tBIRTH_DT: bdate,\r\n\t\t\t\tBIRTH_PLACE: this.obj_personnel.HEADER.birth_place,\r\n\t\t\t\tGENDER: this.selectedGender=='Male'?'M':'F',\r\n\t\t\t\tCIVIL_STATUS: this.obj_personnel.HEADER.civil_status,\r\n\t\t\t\tMOTHER_MAIDEN_NAME: this.obj_personnel.HEADER.mother_maiden_name,\r\n\t\t\t\tACR_NO: this.obj_personnel.HEADER.acr_no,\t\r\n\t\t\t\tRELIGION_CD: this.obj_personnel.HEADER.religion_cd,\r\n\t\t\t\tALIAS: this.obj_personnel.HEADER.alias,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t});\r\n\r\n\t\t\tEntityManager().addEntity(varInsert);\r\n\t\t\tEntityManager().saveChanges().then((success_2)=>{\r\n\r\n\t\t\t\tthis.obj_personnel.HEADER.global_indiv_id = this.obj_personnel.HEADER.tin+this.obj_personnel.HEADER.country_cd;\t\t\t\t\r\n\t\t\t\tthis.obj_personnel.global_indiv_id = this.obj_personnel.HEADER.global_indiv_id;\r\n\t\t\t\tthis.obj_personnel.editing_status = 'EDIT';\r\n\t\t\t\ttoastr.success(success_2, \"Record saved.\");\r\n\t\t\t\tsettings.isNavigating = false;\r\n\r\n\t\t\t\tvar getMax = EntityQuery().from('CITIZENSHIP_TRX').orderByDesc('CITIZENSHIP_ID').take(1);\r\n\r\n\t\t\t\tEntityManager().executeQuery(getMax).then((successMax)=>{\r\n\t\t\t\t\tvar Max = 1;\r\n\t\t\t\t\tif (successMax.results.length > 0){\r\n\t\t\t\t\t\tMax = successMax.results[0].CITIZENSHIP_ID;\r\n\r\n\t\t\t\t\t\t_.each(this.obj_personnel.HEADER.citizenship, (c)=>{\r\n\t\t\t\t\t\t\tMax+=1;\r\n\r\n\t\t\t\t\t\t\tvar tempCiti = EntityManager().createEntity('CITIZENSHIP_TRX', {\r\n\t\t\t\t\t\t\t\tCITIZENSHIP_CD: c.value,\r\n\t\t\t\t\t\t\t\tGLOBAL_INDIV_ID: this.obj_personnel.HEADER.global_indiv_id,\r\n\t\t\t\t\t\t\t\tCITIZENSHIP_ID: Max,\r\n\t\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tEntityManager().addEntity(tempCiti);\r\n\t\t\t\t\t\t});\t  \t\r\n\r\n\t\t\t\t\t\tif(this.obj_personnel.HEADER.citizenship.length>0){\r\n\t\t\t\t\t\t\tEntityManager().saveChanges().then((success_3)=>{\r\n\t\t\t\t\t\t\t\t\tconsole.log(success_3);\r\n\t\t\t\t\t\t\t},(failed_3)=>{\r\n\t\t\t\t\t\t\t\ttoastr.error(failed_3,'Error');\r\n\t\t\t\t\t\t\t});\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},(failedMax)=>{\r\n\t\t\t\t\ttoastr.error(failedMax, \"Error in saving citizenship.\");\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgetMax = EntityQuery().from('GRP_INDIV_MSTR').orderByDesc('GRP_INDIV_ID').take(1);\r\n\r\n\t\t\t\tEntityManager().executeQuery(getMax).then((successMax)=>{\r\n\t\t\t\t\tvar Max = 1;\r\n\t\t\t\t\tif(successMax.results.length>0){\r\n\t\t\t\t\t\tMax = successMax.results[0].GRP_INDIV_ID;\r\n\r\n\t\t\t\t\t\t_.each(this.obj_personnel.HEADER.group, (g)=>{\r\n\t\t\t\t\t\t\tMax+=1;\r\n\t\t\t\t\t\t\tvar tempGroup = EntityManager().createEntity('GRP_INDIV_MSTR', {\r\n\t\t\t\t\t\t\t\tGLOBAL_INDIV_ID: this.obj_personnel.HEADER.global_indiv_id,\r\n\t\t\t\t\t\t\t\tGLOBAL_GRP_ID: g.value,\r\n\t\t\t\t\t\t\t\tGRP_INDIV_ID: Max,\r\n\t\t\t\t\t\t\t\tSTATUS_CD: 'ACTV',\r\n\t\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tEntityManager().addEntity(tempGroup);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif(this.obj_personnel.HEADER.group.length>0){\r\n\t\t\t\t\t\t\tEntityManager().saveChanges().then(\r\n\t\t\t\t\t\t\t\t(success_3)=>{\r\n\t\t\t\t\t\t\t\t\tconsole.log(success_3);\r\n\t\t\t\t\t\t\t\t},(failed_3)=>{\r\n\t\t\t\t\t\t\t\t\ttoastr.error(failed_3,'Error');\r\n\t\t\t\t\t\t\t\t});\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, (failedMax)=>{\r\n\t\t\t\t\ttoastr.error(failedMax, \"Error in saving citizenship.\");\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(this.obj_personnel.HEADER.status_cd == \"SUSPEND\"){\r\n\t\t\t\t\tvar getMax = EntityQuery().from(\"SUSPEND_TRX\").orderByDesc(\"SUSPEND_ID\").take(1);\r\n\t\t\t\t\tEntityManager().executeQuery(getMax).then((success_suspend)=>{\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tvar maxId = 1;\r\n\t\t\t\t\t\tif(success_suspend.results.length>0){\r\n\t\t\t\t\t\t\tmaxId = success_suspend.results[0].SUSPEND_ID + 1;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar suspend_trx = EntityManager().createEntity(\"SUSPEND_TRX\", {\r\n\t\t\t\t\t\t\tSUSPEND_ID: maxId,\r\n\t\t\t\t\t\t\tGLOBAL_ID: this.obj_personnel.HEADER.tin+this.obj_personnel.HEADER.country_cd,\r\n\t\t\t\t\t\t\tSUSPEND_LEVEL: 1,\r\n\t\t\t\t\t\t\tSTART_DT: this.obj_personnel.HEADER.suspension_start,\r\n\t\t\t\t\t\t\tEND_DT: this.obj_personnel.HEADER.suspension_end,\r\n\t\t\t\t\t\t\tCOMPANY_ID: 0, \r\n\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tEntityManager().addEntity(suspend_trx);\r\n\t\t\t\t\t\tEntityManager().saveChanges().then((suspend_saved)=>{\r\n\t\t\t\t\t\t\ttoastr.success(\"\", \"Suspension details saved.\");\r\n\t\t\t\t\t\t}, (suspend_error)=>{\r\n\t\t\t\t\t\t\ttoastr.error(suspend_error, \"error in saving suspension details.\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.HEADER.suspension_start = \"\";\r\n\t\t\t\t\tthis.obj_personnel.HEADER.suspension_end=\"\";\r\n\t\t\t\t\t// $(\"#suspensionFrom\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t\t// $(\"#suspensionTo\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t}, (failed_2)=>{\r\n\t\t\t\tif(varInsert != null){\r\n\t\t\t\t\tvarInsert.entityAspect().setDeleted();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(varInsert_2!=null)\r\n\t\t\t\t{\r\n\t\t\t\t\tvarInsert_2.entityAspect.setDeleted();  \r\n\t\t\t\t}\r\n\r\n\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconsole.log(failed_2);\r\n\t\t\t\ttoastr.error(failed_2,\"Error occured.\");\r\n\t\t\t});\r\n\r\n\t\t},(failed)=>{\r\n\t\t\tif(varInsert_2!=null)\r\n\t\t\t{\r\n\t\t\t\tvarInsert_2.entityAspect.setDeleted();  \r\n\t\t\t}\r\n\r\n\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\tconsole.log(errors);\r\n\t\t\t});\r\n\t\t\tconsole.log(failed);\r\n\t\t\ttoastr.error(failed,\"Error occured.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdateHeader(){\r\n\t\tsettings.isNavigating = true;\r\n\t\ttoastr.clear();\r\n\t\tvar dateToday = null;\r\n\t\tvar bdate = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\r\n\t\tthis.obj_personnel.HEADER.birth_dt = $(\"#birthDate\").val();\r\n\r\n\t\tif(this.obj_personnel.HEADER.birth_dt != undefined && this.obj_personnel.HEADER.birth_dt != null && this.obj_personnel.HEADER.birth_dt.length > 0)\r\n\t\t{\r\n\t\t\tbdate = new moment(new Date(this.obj_personnel.HEADER.birth_dt)).add(8,'hours');\r\n\t\t\tbdate = new Date(bdate);\r\n\t\t}\r\n\r\n\t\tvar getEntity = EntityQuery().from('GLOBAL_MSTR').where('GLOBAL_ID','==',this.obj_personnel.HEADER.global_indiv_id);\r\n\t\tEntityManager().executeQuery(getEntity).then((item)=>{\r\n\r\n\t\t\tif(item.results.length==0)\r\n\t\t\t{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error('No data for editing retrieved.', 'Error in updating record.');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\titem.results[0].COUNTRY_BASE_CD = this.obj_personnel.HEADER.country_base_cd;\r\n\t\t\titem.results[0].LOCATION_BASE_CD = this.obj_personnel.HEADER.location_base_cd;\r\n\t\t\titem.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\titem.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\titem.results[0].STATUS_CD = this.obj_personnel.HEADER.status_cd;\r\n\r\n\t\t\tEntityManager().saveChanges().then((success)=>{\t\t\t\t\r\n\r\n\t\t\t\tvar getEntity = EntityQuery().from('GLOBAL_INDIV_MSTR').where('GLOBAL_INDIV_ID','==',this.obj_personnel.HEADER.global_indiv_id);\r\n\t\t\t\tEntityManager().executeQuery(getEntity).then((item_2)=>{\r\n\t\t\t\t\tif(item_2.results.length==0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\ttoastr.error('No data for editing retrieved.', 'Error in updating record.');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\titem_2.results[0].GIVEN_NAME = this.obj_personnel.HEADER.given_name.toUpperCase();\r\n\t\t\t\t\titem_2.results[0].MIDDLE_NAME = this.obj_personnel.HEADER.middle_name.toUpperCase();\r\n\t\t\t\t\titem_2.results[0].LAST_NAME = this.obj_personnel.HEADER.last_name.toUpperCase();\r\n\t\t\t\t\titem_2.results[0].BIRTH_DT = bdate;\r\n\t\t\t\t\titem_2.results[0].BIRTH_PLACE = this.obj_personnel.HEADER.birth_place;\r\n\t\t\t\t\titem_2.results[0].GENDER = this.selectedGender=='Male'?'M':'F';\r\n\t\t\t\t\titem_2.results[0].CIVIL_STATUS = this.obj_personnel.HEADER.civil_status;\r\n\t\t\t\t\titem_2.results[0].MOTHER_MAIDEN_NAME = this.obj_personnel.HEADER.mother_maiden_name;\r\n\t\t\t\t\titem_2.results[0].ACR_NO = this.obj_personnel.HEADER.acr_no;\r\n\t\t\t\t\titem_2.results[0].RELIGION_CD = this.obj_personnel.HEADER.religion_cd;\r\n\t\t\t\t\titem_2.results[0].ALIAS = this.obj_personnel.HEADER.alias;\r\n\t\t\t\t\titem_2.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\t\titem_2.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\t\t\tEntityManager().saveChanges().then((success_2)=>{\r\n\t\t\t\t\t\ttoastr.success('','Record updated.');\r\n\t\t\t\t\t\tsettings.isNavigating = false;\r\n\r\n\t\t\t\t\t\t//update citizenship list\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\tvar getCitizenshipList = EntityQuery().from('CITIZENSHIP_TRX').where('GLOBAL_INDIV_ID', '==', this.obj_personnel.HEADER.global_indiv_id);\r\n\t\t\t\t\t\tEntityManager().executeQuery(getCitizenshipList).then((query)=>{\r\n\r\n\t\t\t\t\t\t\t_.each(query.results, (result)=>{\r\n\t\t\t\t\t\t\t\tvar doesExist = this.obj_personnel.HEADER.citizenship.some((x)=>x.value == result.CITIZENSHIP_CD);\r\n\r\n\t\t\t\t\t\t\t\tif(!doesExist)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tresult.entityAspect.setDeleted();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tvar getMax = EntityQuery().from('CITIZENSHIP_TRX').orderByDesc('CITIZENSHIP_ID').take(1);\r\n\t\t\t\t\t\t\tEntityManager().executeQuery(getMax).then((getMaxSuccess)=>{\r\n\t\t\t\t\t\t\t\tvar Max = 1;\r\n\t\t\t\t\t\t\t\tvar newCount=0;\r\n\t\t\t\t\t\t\t\tif(getMaxSuccess.results.length>0)\r\n\t\t\t\t\t\t\t\t{\r\n\r\n\t\t\t\t\t\t\t\t\tMax = getMaxSuccess.results[0].CITIZENSHIP_ID;\r\n\r\n\t\t\t\t\t\t\t\t\t_.each(this.obj_personnel.HEADER.citizenship, (citi)=>{\r\n\t\t\t\t\t\t\t\t\t\tvar doesExist = query.results.some((x)=>x.CITIZENSHIP_CD == citi.value);\r\n\t\t\t\t\t\t\t\t\t\tif(!doesExist)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tMax+=1;\r\n\t\t\t\t\t\t\t\t\t\t\tnewCount++;\r\n\t\t\t\t\t\t\t\t\t\t\tvar tempEnt = EntityManager().createEntity('CITIZENSHIP_TRX', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tCITIZENSHIP_CD: citi.value,\r\n\t\t\t\t\t\t\t\t\t\t\t\tGLOBAL_INDIV_ID: this.obj_personnel.HEADER.global_indiv_id,\r\n\t\t\t\t\t\t\t\t\t\t\t\tCITIZENSHIP_ID: Max,\r\n\t\t\t\t\t\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tEntityManager().addEntity(tempEnt);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\tEntityManager().saveChanges().then((success_3)=>{\r\n\t\t\t\t\t\t\t\t\t\ttoastr.success(success_3,'Citizenship list was updated.');\r\n\t\t\t\t\t\t\t\t\t},(error)=>{\r\n\t\t\t\t\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t\t\t\ttoastr.error(\"Error Occured_3\", error);\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//update citizenship list end.\r\n\r\n\t\t\t\t\t\t//update group list.\r\n\t\t\t\t\t\tvar getGroup = EntityQuery().from('GRP_INDIV_MSTR').where('GLOBAL_INDIV_ID', '==', this.obj_personnel.HEADER.global_indiv_id);\r\n\t\t\t\t\t\tEntityManager().executeQuery(getGroup).then((queryGroup)=>{\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t_.each(queryGroup.results, (result)=>{\r\n\t\t\t\t\t\t\t\tvar doesExist = this.obj_personnel.HEADER.group.some((x)=>x.value == result.GLOBAL_GRP_ID);\r\n\t\t\t\t\t\t\t\tif(!doesExist)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tresult.entityAspect.setDeleted();\r\n\t\t\t\t\t\t\t\t\t//result.STATUS_CD = 'INACTV';\r\n\t\t\t\t\t\t\t\t\t//result.LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\t\t\t\t\t\t//result.LAST_UPDATED_DT = dateToday;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tvar getMax = EntityQuery().from('GRP_INDIV_MSTR').orderByDesc('GRP_INDIV_ID').take(1);\r\n\t\t\t\t\t\t\tEntityManager().executeQuery(getMax).then((queryMax)=>{\r\n\t\t\t\t\t\t\t\tvar Max=1;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif(queryMax.results.length>0)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tMax = queryMax.results[0].GRP_INDIV_ID;\r\n\t\t\t\t\t\t\t\t\t_.each(this.obj_personnel.HEADER.group, (g)=>{\r\n\t\t\t\t\t\t\t\t\t\tvar doesExist = queryGroup.results.some((x)=>x.GLOBAL_GRP_ID == g.value);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tif(!doesExist)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tMax+=1;\r\n\t\t\t\t\t\t\t\t\t\t\tvar tempEnt = EntityManager().createEntity('GRP_INDIV_MSTR', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tGLOBAL_INDIV_ID: this.obj_personnel.HEADER.global_indiv_id,\r\n\t\t\t\t\t\t\t\t\t\t\t\tGLOBAL_GRP_ID: g.value,\r\n\t\t\t\t\t\t\t\t\t\t\t\tGRP_INDIV_ID: Max,\r\n\t\t\t\t\t\t\t\t\t\t\t\tSTATUS_CD: 'ACTV',\r\n\t\t\t\t\t\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tEntityManager().addEntity(tempEnt);\r\n\t\t\t\t\t\t\t\t\t\t}else{\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tvar index = _.findIndex(queryGroup.results, function(o){\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn o.GLOBAL_GRP_ID == g.value;\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tif(index != -1 && queryGroup.results[index].STATUS_CD == 'INACTV')\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tqueryGroup.results[index].STATUS_CD = 'ACTV';\r\n\t\t\t\t\t\t\t\t\t\t\t\tqueryGroup.results[index].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\t\t\t\t\t\t\t\t\tqueryGroup.results[index].LAST_UPDATED_DT = dateToday;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\tEntityManager().saveChanges().then((success_710)=>{\r\n\t\t\t\t\t\t\t\t\t\ttoastr.success(success_710,'Group list was updated.');\r\n\t\t\t\t\t\t\t\t\t},(error_712)=>{\r\n\t\t\t\t\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(error_712);\r\n\t\t\t\t\t\t\t\t\t\ttoastr.error(\"Error Occured_4\", error_712);\r\n\t\t\t\t\t\t\t\t\t});\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//update group list end.\r\n\r\n\t\t\t\t\t\t//Update/Insert suspend_trx\r\n\t\t\t\t\t\tif(this.obj_personnel.HEADER.status_cd == \"SUSPEND\"){\r\n\t\t\t\t\t\t\tvar suspend_start = null;\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar suspend_end = null;\r\n\t\t\t\t\t\t\tif(moment(this.obj_personnel.HEADER.suspension_start).isValid()){\r\n\t\t\t\t\t\t\t\tsuspend_start = new Date(moment(this.obj_personnel.HEADER.suspension_start).add(8, \"hours\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(moment(this.obj_personnel.HEADER.suspension_end).isValid()){\r\n\t\t\t\t\t\t\t\tsuspend_end = new Date(moment(this.obj_personnel.HEADER.suspension_end).add(8, \"hours\"));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\tif(this.obj_personnel.HEADER.suspend_id != undefined && this.obj_personnel.HEADER.suspend_id != null && this.obj_personnel.HEADER.suspend_id.toString().length>0){\r\n\t\t\t\t\t\t\t\tvar getSuspend = EntityQuery().from(\"SUSPEND_TRX\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t.where(\"SUSPEND_ID\", \"==\", this.obj_personnel.HEADER.suspend_id);\r\n\t\t\t\t\t\t\t\tEntityManager().executeQuery(getSuspend).then((success_getSuspend)=>{\r\n\t\t\t\t\t\t\t\t\tsuccess_getSuspend.results[0].START_DT = suspend_start;\r\n\t\t\t\t\t\t\t\t\tsuccess_getSuspend.results[0].END_DT = suspend_end;\r\n\t\t\t\t\t\t\t\t\tsuccess_getSuspend.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\t\t\t\t\t\tsuccess_getSuspend.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\t\t\t\t\t\t\tEntityManager().saveChanges().then((save_success)=>{\r\n\t\t\t\t\t\t\t\t\t\ttoastr.success(\"\",\"Suspension date updated.\");\r\n\t\t\t\t\t\t\t\t\t},(save_error)=>{\r\n\t\t\t\t\t\t\t\t\t\ttoastr.error(save_error, \"error in updating suspension date.\");\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}, (error_getSuspend)=>{\r\n\t\t\t\t\t\t\t\t\ttoastr.error(error_getSuspend, \"error in updating suspension date.\");\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tvar getMax = EntityQuery().from(\"SUSPEND_TRX\").orderByDesc(\"SUSPEND_ID\").take(1);\r\n\t\t\t\t\t\t\t\tEntityManager().executeQuery(getMax).then((success_suspend)=>{\r\n\t\t\t\t\t\t\t\t\tvar maxId = 1;\r\n\t\t\t\t\t\t\t\t\tif(success_suspend.results.length>0){\r\n\t\t\t\t\t\t\t\t\t\tmaxId = success_suspend.results[0].SUSPEND_ID + 1;\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvar suspend_trx = EntityManager().createEntity(\"SUSPEND_TRX\", {\r\n\t\t\t\t\t\t\t\t\t\tSUSPEND_ID: maxId+\"\",\r\n\t\t\t\t\t\t\t\t\t\tGLOBAL_ID: this.obj_personnel.HEADER.tin+this.obj_personnel.HEADER.country_cd,\r\n\t\t\t\t\t\t\t\t\t\tSUSPEND_LEVEL: 1,\r\n\t\t\t\t\t\t\t\t\t\tSTART_DT: suspend_start,\r\n\t\t\t\t\t\t\t\t\t\tEND_DT: suspend_end,\r\n\t\t\t\t\t\t\t\t\t\tCOMPANY_ID: 0, \r\n\t\t\t\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tEntityManager().addEntity(suspend_trx);\r\n\t\t\t\t\t\t\t\t\tEntityManager().saveChanges().then((suspend_saved)=>{\r\n\t\t\t\t\t\t\t\t\t\ttoastr.success(\"\", \"Suspension details saved.\");\r\n\t\t\t\t\t\t\t\t\t}, (suspend_error)=>{\r\n\t\t\t\t\t\t\t\t\t\t// console.log(suspend_error);\r\n\t\t\t\t\t\t\t\t\t\ttoastr.error(suspend_error, \"error in saving suspension details.\");\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.obj_personnel.HEADER.suspension_start = \"\";\r\n\t\t\t\t\t\t\tthis.obj_personnel.HEADER.suspension_end=\"\";\r\n\t\t\t\t\t\t\t// $(\"#suspensionFrom\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t\t\t\t// $(\"#suspensionTo\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t//Update/Insert suspend_trx\r\n\r\n\r\n\r\n\t\t\t\t\t}, (error)=>{\r\n\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\ttoastr.error(\"Error Occured_2\", error);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},(error)=>{\r\n\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t\ttoastr.error(\"Error Occured_1\", error);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tbtnUpload(){\r\n\t\ttoastr.clear();\r\n\t\ttoastr.info(\"Image Upload under maintenance.\", \"\");\r\n\t}\r\n\r\n\tclickTab_main(index)\r\n\t{\r\n\t\tif(this.obj_personnel.global_indiv_id.length===0)\r\n\t\t\treturn;\r\n\t\tswitch(index){\r\n\t\t\tcase 0: \r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading employee info...\", \"\");\r\n\t\t\t\tthis.loadData(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\t//load Contact list.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading contact list...\", \"\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.maintab_contact_clicked.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2: //load Educational Achievement.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading Educational Achievement...\", \"\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.maintab_education_clicked.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3: //load Characteristic/Interest.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\t// toastr.info(\"Loading Characteristic/Interest...\", \"Success\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4: //load Skills/Talent.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\t// toastr.info(\"Loading Skills/Talent...\", \"Success\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase 5: //load Language/Dialect.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\t// toastr.info(\"Loading Language/Dialect...\", \"Success\");\r\n\t\t\t\tbreak;\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tclearData(){\r\n\t\tthis._disableSavePersonnel = true;\r\n\t\tthis._disableClearData = true;\r\n\t\tthis._disableCreatePersonnel = false;\r\n\t\tthis._disableSearchPersonnel = false;\r\n\t\tthis.obj_personnel.global_indiv_id = \"\";\r\n\t\tthis.obj_personnel.HEADER = {\r\n\t\t\tcitizenship:[],\r\n\t\t\tgroup:[]\r\n\t\t};\r\n\t\tthis.selectedGender = \"\";\r\n\t\tthis.selected_citizenship = \"\";\r\n\t\tthis.selected_group=\"\";\r\n\t\tthis._disableForm = true;\r\n\t\tthis.obj_personnel.editing_status=\"\";\r\n\t\ttoastr.clear();\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.forEach((delegate)=>{\r\n\t\t\tdelegate();\r\n\t\t});\r\n\t}  \r\n\r\n\t// LoginPassed(user){\r\n\t// \tconsole.log(user);\r\n\t// }\r\n\r\n\t// date_mask(id, mask){\r\n\t// \tinput_mask(id, mask);\r\n\t// }\r\n\r\n\tDigitOnly(event){\r\n\t\treturn isDigit(event);\r\n\t}\r\n\r\n\tmask(id, mask){\r\n\t\tinput_mask(id, mask);\t\t\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class main_contact \r\n{\r\n\t_disableForm=true;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\t_disableAddressTable=false;\r\n\t_disableContactTable=false;\r\n\tlblCreatedBy=\"\";\r\n\tlblUpdatedBy=\"\";\r\n\tobj_personnel=null;\r\n\tconstructor(obj_personnel, toastr, DialogService)\r\n\t{\r\n\t\tthis.DialogService = DialogService;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_contact_clicked.push((val)=>{\r\n\t\t\tthis.loadMain_Address(val);\r\n\t\t\tthis.loadMain_Contact(val);\r\n\t\t\tthis.loadMain_EmailWeb(val);\r\n\t\t\tthis.clearAddressData();\r\n\t\t\tthis.clearContactData();\r\n\t\t\t// this.loadLog(val);\r\n\t\t\tthis.loadLog_V2(val);\r\n\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.push((val)=>{\r\n\t\t\tthis.obj_personnel.CONTACT= {\r\n\t\t\t\tstatus:\"\",\r\n\t\t\t\tmodelAddress:{},\r\n\t\t\t\tstatusContact:\"Add\",\r\n\t\t\t\tmodelContact:{},\r\n\t\t\t\tmodelInternet:{},\r\n\t\t\t\taddress:[],\r\n\t\t\t\tcontact:[],\r\n\t\t\t\temail:[],\r\n\t\t\t\twebsite:[]\r\n\t\t\t};\r\n\t\t\tthis.clearAddressData();\r\n\t\t\tthis.clearContactData();\r\n\t\t\tthis.clearEmailWebData();\r\n\t\t});\r\n\t}\r\n\r\n\tloadMain_Address(global_id)\r\n\t{\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from('ADDR_TRX').where('GLOBAL_ID','==',global_id);\t\t\r\n\t\tEntityManager().executeQuery(query).then((success)=>{\r\n\t\t\tvar tmp = [];\r\n\t\t\tvar tmpFullAddress = [];\r\n\t\t\t_.each(success.results,(result)=>{\r\n\t\t\t\tvar strFullAddress=\"\";\r\n\t\t\t\tif(result.UNIT_NO != null && result.UNIT_NO.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.UNIT_NO);\r\n\t\t\t\tif(result.HOUSE_NO != null && result.HOUSE_NO.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.HOUSE_NO);\r\n\t\t\t\tif(result.BLOCK_LOT != null && result.BLOCK_LOT.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.BLOCK_LOT);\r\n\t\t\t\tif(result.BLDG_NAME != null && result.BLDG_NAME.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.BLDG_NAME);\r\n\t\t\t\tif(result.STREET_NAME != null && result.STREET_NAME.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.STREET_NAME);\r\n\t\t\t\tif(result.SUB_VILLAGE != null && result.SUB_VILLAGE.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.SUB_VILLAGE);\r\n\t\t\t\tif(result.BARANGAY != null && result.BARANGAY.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.BARANGAY);\r\n\t\t\t\tif(result.DISTRICT != null && result.DISTRICT.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.DISTRICT);\r\n\t\t\t\tif(result.CITY_TOWN != null && result.CITY_TOWN.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.CITY_TOWN);\r\n\t\t\t\tif(result.STATE_PROVINCE != null && result.STATE_PROVINCE.length>0){\r\n\t\t\t\t\tvar text = this.obj_personnel.LOCATIONS.find((l)=>{\r\n\t\t\t\t\t\tif(l.value == result.STATE_PROVINCE)\r\n\t\t\t\t\t\t\treturn l.text;\r\n\t\t\t\t\t});          \r\n          \t\t\ttmpFullAddress.push(text);\r\n      \t\t\t}\r\n      \t\t\tif(result.REGION != null && result.REGION.length>0)\r\n      \t\t\t\ttmpFullAddress.push(result.REGION);\r\n      \t\t\tif(result.ZIPCODE != null && result.ZIPCODE.length>0)\r\n      \t\t\t\ttmpFullAddress.push(result.ZIPCODE);        \r\n      \t\t\tif(result.COUNTRY_CD != null && result.COUNTRY_CD.length>0)\r\n      \t\t\t\ttmpFullAddress.push(result.COUNTRY_CD);\r\n\r\n      \t\t\tif(tmpFullAddress.length>0){\r\n      \t\t\t\tstrFullAddress = tmpFullAddress.join(' ');\r\n      \t\t\t\ttmpFullAddress=[];\r\n      \t\t\t}\r\n\r\n\r\n      \t\t\ttmp.push({\r\n\t\t\t\t\tglobal_id: result.GLOBAL_ID,\r\n\t\t\t\t\taddr_id: result.ADDR_ID,\r\n\t\t\t\t\tcountry_cd: result.COUNTRY_CD,\r\n\t\t\t\t\tregion: result.REGION,\r\n\t\t\t\t\tstate_province: result.STATE_PROVINCE,\r\n\t\t\t\t\tcity_town: result.CITY_TOWN,\r\n\t\t\t\t\tdistrict: result.DISTRICT,\r\n\t\t\t\t\tbarangay: result.BARANGAY,\r\n\t\t\t\t\tsub_village: result.SUB_VILLAGE,\r\n\t\t\t\t\tphase: result.PHASE,\r\n\t\t\t\t\tpermanent_fl: result.PERMANENT_FL,\r\n\t\t\t\t\tpresent_fl: result.PRESENT_FL,\r\n\t\t\t\t\tblock_lot: result.BLOCK_LOT,\r\n\t\t\t\t\tstreet_name: result.STREET_NAME,\r\n\t\t\t\t\thouse_no: result.HOUSE_NO,\r\n\t\t\t\t\tbldg_name: result.BLDG_NAME,\r\n\t\t\t\t\tunit_no: result.UNIT_NO,\r\n\t\t\t\t\tzipcode: result.ZIPCODE,\r\n\t\t\t\t\tresidential_type: result.RESIDENTIAL_TYPE,\r\n\t\t\t\t\thouse_ownership: result.HOUSE_OWNERSHIP,\r\n\t\t\t\t\tmailing_fl: result.MAILING_FL,\r\n\t\t\t\t\tpostal_box: result.POSTAL_BOX,\r\n\t\t\t\t\tremarks: result.REMARKS,\r\n\t\t\t\t\tsketch_path: result.SKETCH_PATH,\r\n\t\t\t\t\tfull_address: strFullAddress\r\n        \t\t});\r\n \t\t\t});\r\n\t\t\t\r\n\t\t\tthis.obj_personnel.CONTACT.address = tmp;\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Contact info has been loaded.\");\r\n\t\t});\r\n\t}\r\n\r\n\tloadMain_Contact(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from('CONTACT_INFO_TRX')\r\n\t\t\t\t\t.where('GLOBAL_ID', '==', global_id);\r\n\t\tEntityManager().executeQuery(query).then((success)=>{\r\n\r\n\t\t\tvar tmp = [];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\tvar type = this.obj_personnel.CONTACT_TYPE.find((x)=>{\r\n\t\t\t\t\treturn x.value == result.PHONE_TYPE;\r\n\t\t\t\t});\r\n\t\t\t\tvar contact = {\r\n\t\t\t\t\tcontact_no_id: result.CONTACT_NO_ID,\r\n\t\t\t\t\tglobal_id: result.GLOBAL_ID,\r\n\t\t\t\t\tphone_type_text: type.text,\r\n\t\t\t\t\tphone_type: result.PHONE_TYPE,\r\n\t\t\t\t\tarea_cd: result.AREA_CD,\r\n\t\t\t\t\tphone_no: result.PHONE_NO,\r\n\t\t\t\t\tlocal_no: result.LOCAL_NO\r\n\t\t\t\t};\r\n\t\t\t\ttmp.push(contact);\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.CONTACT.contact = tmp;\r\n\t\t\tsettings.isNavigating = false;\r\n\r\n\t\t}, (error)=>{\r\n\t\t\ttoastr.error(error, \"Error in loading contact details.\");\r\n\t\t});\r\n\t}\r\n\r\n\tloadMain_EmailWeb(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"INTERNET_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\r\n\t\t\tvar tmpEmail=[];\r\n\t\t\tvar tmpWeb=[];\r\n\t\t\t_.each(querySuccess.results, (result)=>{\r\n\r\n\t\t\t\tif(result.EMAIL_FL == 1){\r\n\t\t\t\t\tvar email = {\r\n\t\t\t\t\t\tinternet_id: result.INTERNET_ID,\r\n\t\t\t\t\t\tweb_addr: result.WEB_ADDR\r\n\t\t\t\t\t};\r\n\t\t\t\t\ttmpEmail.push(email);\r\n\t\t\t\t}else if(result.REC_STAT_FL == 1){\r\n\t\t\t\t\tvar web = {\r\n\t\t\t\t\t\tinternet_id: result.INTERNET_ID,\r\n\t\t\t\t\t\tweb_addr: result.WEB_ADDR\t\r\n\t\t\t\t\t};\r\n\t\t\t\t\ttmpWeb.push(web);\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.CONTACT.email=tmpEmail;\r\n\t\t\tthis.obj_personnel.CONTACT.website=tmpWeb;\r\n\r\n\t\t}, (queryError)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(queryError, \"Error in loading email data.\");\r\n\t\t\t// console.log(queryError);\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tloadLog(global_id){\r\n\t\tvar createdBy = null;\r\n\t\tvar dtCreated = null;\r\n\t\tvar updatedBy = null;\r\n\t\tvar dtUpdated = null;\r\n\t\tvar query = EntityQuery().from(\"ADDR_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id)\r\n\t\t\t\t\t.orderBy(\"CREATED_DT\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tif(s1.results.length==1){\r\n\t\t\t\tdtCreated = new Date(s1.results[0].CREATED_DT);\r\n\t\t\t\tcreatedBy = s1.results[0].CREATED_BY;\r\n\t\t\t} \r\n\r\n\t\t\t// console.log(createdBy+\":\"+dtCreated);\r\n\t\t\tquery = EntityQuery().from(\"CONTACT_INFO_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\",\"==\", global_id)\r\n\t\t\t\t\t.orderBy(\"CREATED_DT\").take(1);\r\n\t\t\tEntityManager().executeQuery(query).then((s2)=>{\r\n\t\t\t\tif(s2.results.length==1){\t\t\t\t\t\r\n\t\t\t\t\tvar tmpDt = new Date(s2.results[0].CREATED_DT);\r\n\t\t\t\t\tif(dtCreated == null || dtCreated>tmpDt){\r\n\t\t\t\t\t\tdtCreated = tmpDt;\r\n\t\t\t\t\t\tcreatedBy = s2.results[0].CREATED_BY;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tquery = EntityQuery().from(\"INTERNET_TRX\")\r\n\t\t\t\t\t\t.where(\"GLOBAL_ID\",\"==\", global_id)\r\n\t\t\t\t\t\t.orderBy(\"CREATED_DT\").take(1);\r\n\t\t\t\tEntityManager().executeQuery(query).then((s3)=>{\r\n\t\t\t\t\tif(s3.results.length==1){\r\n\t\t\t\t\t\tvar tmpDt = new Date(s3.results[0].CREATED_DT);\r\n\t\t\t\t\t\tif(dtCreated == null || dtCreated>tmpDt){\r\n\t\t\t\t\t\t\tdtCreated = tmpDt;\r\n\t\t\t\t\t\t\tcreatedBy = s3.results[0].CREATED_BY;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(createdBy != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.lblCreatedBy = createdBy+' '+moment.utc(dtCreated).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tvar query2 = EntityQuery().from(\"ADDR_TRX\")\r\n\t\t\t\t\t .where(\"GLOBAL_ID\", \"==\", global_id)\r\n\t\t\t\t\t .orderByDesc(\"LAST_UPDATED_DT\").take(1);\r\n\t\tEntityManager().executeQuery(query2).then((ss1)=>{\r\n\t\t\tif(ss1.results.length==1){\r\n\t\t\t\tif(ss1.results[0].LAST_UPDATED_BY != null){\r\n\t\t\t\t\tupdatedBy = ss1.results[0].LAST_UPDATED_BY;\r\n\t\t\t\t\tdtUpdated = new Date(ss1.results[0].LAST_UPDATED_DT);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tquery2 = EntityQuery().from(\"CONTACT_INFO_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id)\r\n\t\t\t\t\t.orderByDesc(\"LAST_UPDATED_DT\").take(1);\r\n\t\t\tEntityManager().executeQuery(query2).then((ss2)=>{\r\n\t\t\t\tif(ss2.results.length==1){\r\n\t\t\t\t\tif(ss2.results[0].LAST_UPDATED_BY != null){\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar tmpDt = new Date(ss2.results[0].LAST_UPDATED_DT);\r\n\t\t\t\t\t\tif(dtUpdated == null || dtUpdated<tmpDt){\r\n\t\t\t\t\t\t\tupdatedBy = ss2.results[0].LAST_UPDATED_BY;\r\n\t\t\t\t\t\t\tdtUpdated = tmpDt;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tquery2 = EntityQuery().from(\"INTERNET_TRX\")\r\n\t\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id)\r\n\t\t\t\t\t\t.orderByDesc(\"LAST_UPDATED_DT\").take(1);\r\n\t\t\t\tEntityManager().executeQuery(query2).then((ss3)=>{\r\n\t\t\t\t\tif(ss3.results.length==1){\r\n\t\t\t\t\t\tif(ss3.results[0].LAST_UPDATED_BY != null){\r\n\t\t\t\t\t\t\tvar tmpDt = new Date(ss3.results[0].LAST_UPDATED_DT);\r\n\t\t\t\t\t\t\tif(dtUpdated==null || dtUpdated<tmpDt){\r\n\t\t\t\t\t\t\t\tupdatedBy = ss3.results[0].LAST_UPDATED_BY;\r\n\t\t\t\t\t\t\t\tdtUpdated = tmpDt;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(updatedBy != null){\r\n\t\t\t\t\t\tthis.lblUpdatedBy = updatedBy+' '+moment.utc(dtUpdated).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\t\t\r\n\t}\r\n\r\n\tloadLog_V2(global_id){\r\n\t\tvar tmpList=[];\r\n\t\tvar query = EntityQuery().from(\"ADDR_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\tvar _user = r.CREATED_BY;\r\n\t\t\t\t\tvar _date = new Date(r.CREATED_DT);\r\n\t\t\t\t\ttmpList.push({\r\n\t\t\t\t\t\tuser: _user,\r\n\t\t\t\t\t\tdate: _date\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\tvar _user = r.LAST_UPDATED_BY;\r\n\t\t\t\t\tvar _date = new Date(r.LAST_UPDATED_DT);\r\n\t\t\t\t\ttmpList.push({\r\n\t\t\t\t\t\tuser: _user,\r\n\t\t\t\t\t\tdate: _date\r\n\t\t\t\t\t});\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t});\r\n\r\n\t\t\tquery = EntityQuery().from(\"CONTACT_INFO_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\t\t\tEntityManager().executeQuery(query).then((s2)=>{\r\n\t\t\t\t_.each(s2.results, (r2)=>{\r\n\t\t\t\t\tif(r2.CREATED_BY != null){\r\n\t\t\t\t\t\tvar _user = r2.CREATED_BY;\r\n\t\t\t\t\t\tvar _date = new Date(r2.CREATED_DT);\r\n\t\t\t\t\t\ttmpList.push({\r\n\t\t\t\t\t\t\tuser: _user,\r\n\t\t\t\t\t\t\tdate: _date\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(r2.LAST_UPDATED_BY != null){\r\n\t\t\t\t\t\tvar _user = r2.LAST_UPDATED_BY;\r\n\t\t\t\t\t\tvar _date = new Date(r2.LAST_UPDATED_DT);\r\n\t\t\t\t\t\ttmpList.push({\r\n\t\t\t\t\t\t\tuser: _user,\r\n\t\t\t\t\t\t\tdate: _date\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tquery = EntityQuery().from(\"INTERNET_TRX\")\r\n\t\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\t\t\t\tEntityManager().executeQuery(query).then((s3)=>{\r\n\r\n\t\t\t\t\t_.each(s3.results, (r3)=>{\r\n\t\t\t\t\t\tif(r3.CREATED_BY != null){\r\n\t\t\t\t\t\t\tvar _user = r3.CREATED_BY;\r\n\t\t\t\t\t\t\tvar _date = new Date(r3.CREATED_DT);\r\n\t\t\t\t\t\t\ttmpList.push({\r\n\t\t\t\t\t\t\t\tuser: _user,\r\n\t\t\t\t\t\t\t\tdate: _date\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(r3.LAST_UPDATED_BY != null){\r\n\t\t\t\t\t\t\tvar _user = r3.LAST_UPDATED_BY;\r\n\t\t\t\t\t\t\tvar _date = new Date(r3.LAST_UPDATED_DT);\r\n\t\t\t\t\t\t\ttmpList.push({\r\n\t\t\t\t\t\t\t\tuser: _user,\r\n\t\t\t\t\t\t\t\tdate: _date\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\ttmpList.sort(this.OrderByDate);\r\n\t\t\t\t\tvar LastIndex = tmpList.length-1;\r\n\t\t\t\t\tif(tmpList.length>0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.lblCreatedBy = tmpList[0].user+' '+moment.utc(tmpList[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t\t\tif(tmpList.length>1){\r\n\t\t\t\t\t\t\tthis.lblUpdatedBy = tmpList[LastIndex].user + ' ' + moment.utc(tmpList[LastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tOrderByDate(a, b){\r\n\t\tif(a.date > b.date)\r\n\t\t\treturn 1;\r\n\t\tif(a.date < b.date)\r\n\t\t\treturn -1;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\r\n\tclearAddressData(){\r\n\r\n\t\tsettings.isNavigating = false;\r\n\t\tthis.obj_personnel.CONTACT.modelAddress={};\r\n\t\tthis.obj_personnel.CONTACT.status=\"\";\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableAddressTable = false;\r\n\r\n\t}\r\n\r\n\tclearContactData(){\r\n\r\n\t\tsettings.isNavigating = false;\r\n\t\tthis._disableContactTable = false;\r\n\t\tthis.obj_personnel.CONTACT.statusContact=\"Add\";\r\n\t\tthis.obj_personnel.CONTACT.modelContact={};\r\n\r\n\t}\r\n\r\n\tclearEmailWebData(){\r\n\r\n\t\tsettings.isNavigating = false;\r\n\t\tthis.obj_personnel.CONTACT.modelInternet={};\r\n\r\n\t}\r\n\r\n\t//Source: https://stackoverflow.com/questions/13952686/how-to-make-html-input-tag-only-accept-numerical-values\r\n\tisNumberKey(evt){\t\r\n    \tvar charCode = (evt.which) ? evt.which : event.keyCode\r\n    \tif (charCode > 31 && (charCode < 48 || charCode > 57))\r\n\t        return false;\r\n    \treturn true;\r\n\t}\r\n\r\n\tdd_provinceChanged(){\r\n\t\tvar prov = this.obj_personnel.CONTACT.modelAddress.state_province;\r\n\t\tif(prov != undefined && prov != null && prov.length!=0){\r\n\t\t\tvar selectedProv = this.obj_personnel.PROVINCE.find((p)=>{\r\n\t\t\t\tif(p.value == prov){\r\n\t\t\t\t\treturn p;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(selectedProv != null){\r\n\t\t\t\tthis.obj_personnel.CONTACT.modelAddress.region = selectedProv.group;\t\t\t\t\r\n\t\t\t\tthis.dd_regionChanged();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdd_regionChanged(){\r\n\t\tvar reg = this.obj_personnel.CONTACT.modelAddress.region;\r\n\t\tif(reg != undefined && reg!=null && reg.length!=0)\r\n\t\t{\r\n\t\t\t//alert(this.obj_personnel.CONTACT.modelAddress.region);\r\n\t\t\tvar selectedRegion = this.obj_personnel.REGION.find((r)=>{\r\n\t\t\t\tif(r.value == reg)\r\n\t\t\t\t\treturn r;\r\n\t\t\t});\r\n\r\n\t\t\tif(selectedRegion != null)\r\n\t\t\t{\r\n\t\t\t\tthis.obj_personnel.CONTACT.modelAddress.country_cd = selectedRegion.group;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tbtnAdd_Address()\r\n\t{\r\n\t\tthis.obj_personnel.CONTACT.status=\"ADD\";\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableAddressTable = true;\r\n\t}\r\n\r\n\tbtnEdit_Address(address)\r\n\t{\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableAddressTable = true;\r\n\t\tthis.obj_personnel.CONTACT.status=\"EDIT\";\r\n\t\tthis.obj_personnel.CONTACT.modelAddress=address;\r\n\t\tthis.obj_personnel.CONTACT.modelAddress.present_fl=this.obj_personnel.CONTACT.modelAddress.present_fl=='1'?true:false;\r\n\t\tthis.obj_personnel.CONTACT.modelAddress.permanent_fl=this.obj_personnel.CONTACT.modelAddress.permanent_fl=='1'?true:false;\r\n  \t\t//console.log(address);\r\n  \t}\r\n\r\n  \tbtnRemoveAddress(item){\r\n  \t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the address?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\t//alert(\"Confirmed delete.\");\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('ADDR_TRX').where('ADDR_ID', '==', item.addr_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The address was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadMain_Address(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\t// this.loadLog(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.loadLog_V2(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing address.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n  \t}\r\n\r\n  \tvalidateAddress()\r\n  \t{\r\n  \t\tvar strValidation=\"\";\r\n  \t\tif(this.obj_personnel.CONTACT.modelAddress.country_cd == undefined || this.obj_personnel.CONTACT.modelAddress.country_cd == null || this.obj_personnel.CONTACT.modelAddress.country_cd.length==0){\r\n  \t\t\tstrValidation+= \"No country specified.<br/>\";\r\n  \t\t}\r\n\r\n  \t\tif(strValidation.length>0){\r\n  \t\t\ttoastr.clear();\r\n  \t\t\ttoastr.error(strValidation, \"\");\r\n  \t\t\treturn;\r\n  \t\t}else{\r\n  \t\t\tif(this.obj_personnel.CONTACT.status=='ADD'){\r\n  \t\t\t\tthis.insertAddress();\r\n  \t\t\t}else if(this.obj_personnel.CONTACT.status=='EDIT')\r\n  \t\t\t{\r\n  \t\t\t\tthis.updateAddress();\r\n  \t\t\t}\r\n  \t\t}\r\n  \t}\r\n\r\n  \tinsertAddress(){\r\n\r\n  \t\tsettings.isNavigating = true;\r\n  \t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n\r\n  \t\tvar query = EntityQuery().from('ADDR_TRX').orderByDesc('ADDR_ID').take(1);\r\n  \t\tEntityManager().executeQuery(query).then((success)=>{\r\n\r\n  \t\t\tvar Max=1;\r\n  \t\t\tif(success.results.length>0){\r\n  \t\t\t\tMax = success.results[0].ADDR_ID+1;\r\n  \t\t\t}\r\n  \t\t\t// console.log(Max);\r\n        //Upload Image first before save to DB record.\r\n\r\n        \tvar _address = {\r\n\t        \tADDR_ID: Max,\r\n\t        \tBARANGAY: this.obj_personnel.CONTACT.modelAddress.barangay,\r\n\t        \tBLDG_NAME: this.obj_personnel.CONTACT.modelAddress.bldg_name,\r\n\t        \tBLOCK_LOT: this.obj_personnel.CONTACT.modelAddress.block_lot,\r\n\t        \tCITY_TOWN: this.obj_personnel.CONTACT.modelAddress.city_town,\r\n\t        \tCOUNTRY_CD: this.obj_personnel.CONTACT.modelAddress.country_cd,\r\n\t        \tDISTRICT: this.obj_personnel.CONTACT.modelAddress.district,\r\n\t        \tGLOBAL_ID: this.obj_personnel.HEADER.global_indiv_id,\r\n\t        \tHOUSE_NO: this.obj_personnel.CONTACT.modelAddress.house_no,\r\n\t            //HOUSE_OWNERSHIP: this.obj_personnel.CONTACT.modelAddress.house_ownership,\r\n\t            MAILING_FL: 0,\r\n\t            PERMANENT_FL: this.obj_personnel.CONTACT.modelAddress.permanent_fl?1:0,\r\n\t            // PERMANENT_FL: 0,\r\n\t            // PHASE: this.obj_personnel.CONTACT.modelAddress.phase,\r\n\t            // POSTAL_BOX: this.obj_personnel.CONTACT.modelAddress.postal_box,\r\n\t            PRESENT_FL: this.obj_personnel.CONTACT.modelAddress.present_fl?1:0,\r\n\t            // PRESENT_FL: 0,\r\n\t            REGION: this.obj_personnel.CONTACT.modelAddress.region,\r\n\t            REMARKS: this.obj_personnel.CONTACT.modelAddress.remarks,\r\n\t            // RESIDENTIAL_TYPE: this.obj_personnel.CONTACT.modelAddress.residential_type,\r\n\t            // SKETCH_PATH: this.obj_personnel.CONTACT.modelAddress.sketch_path,\r\n\t            STATE_PROVINCE: this.obj_personnel.CONTACT.modelAddress.state_province,\r\n\t            STREET_NAME: this.obj_personnel.CONTACT.modelAddress.street_name,\r\n\t            SUB_VILLAGE: this.obj_personnel.CONTACT.modelAddress.sub_village,\r\n\t            UNIT_NO: this.obj_personnel.CONTACT.modelAddress.unit_no,\r\n\t            ZIPCODE: this.obj_personnel.CONTACT.modelAddress.zipcode,\r\n\t            CREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t            CREATED_DT: dateToday\r\n\t        };\r\n\r\n\t        var address = EntityManager().createEntity('ADDR_TRX', _address);\r\n\r\n    \t    EntityManager().addEntity(address);\r\n        \tEntityManager().saveChanges().then((success)=>{\r\n        \t\ttoastr.clear();\r\n\t        \ttoastr.success(\"\", \"Record saved.\");\r\n\t        \tthis.loadMain_Address(this.obj_personnel.global_indiv_id);\r\n\t        \t// this.loadLog(this.obj_personnel.global_indiv_id);\r\n\t        \tthis.loadLog_V2(this.obj_personnel.global_indiv_id);\r\n\t        \tthis.clearAddressData();\r\n\t        }, (error)=>{\r\n\t        \tif(address != null){\r\n\t        \t\taddress.entityAspect.setDeleted();\r\n\t        \t}\r\n\t        \tEntityManager().getEntities().forEach(function(entity) {\r\n\t        \t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t        \t\tif (errors.length > 0)\r\n\t        \t\t\tconsole.log(errors);\r\n\t        \t});\r\n\t        \ttoastr.clear();\r\n\t        \ttoastr.error(error, \"Error in saving address.\");\r\n\r\n\t        \tsettings.isNavigating = false;\r\n\t        \t// console.log(error);\r\n\t        });\r\n    \t});\r\n  \t}\r\n\r\n  \tupdateAddress(){\r\n\r\n  \t\tsettings.isNavigating = true;\r\n  \t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n  \t\tvar query = EntityQuery().from('ADDR_TRX').where('ADDR_ID','==', this.obj_personnel.CONTACT.modelAddress.addr_id);\r\n  \t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\tsuccess.results[0].BARANGAY = this.obj_personnel.CONTACT.modelAddress.barangay;\r\n  \t\t\tsuccess.results[0].BLDG_NAME = this.obj_personnel.CONTACT.modelAddress.bldg_name;\r\n  \t\t\tsuccess.results[0].BLOCK_LOT = this.obj_personnel.CONTACT.modelAddress.block_lot;\r\n  \t\t\tsuccess.results[0].CITY_TOWN = this.obj_personnel.CONTACT.modelAddress.city_town;\r\n  \t\t\tsuccess.results[0].COUNTRY_CD = this.obj_personnel.CONTACT.modelAddress.country_cd;\r\n  \t\t\tsuccess.results[0].DISTRICT = this.obj_personnel.CONTACT.modelAddress.district;\r\n  \t\t\tsuccess.results[0].HOUSE_NO = this.obj_personnel.CONTACT.modelAddress.house_no;\r\n  \t\t\tsuccess.results[0].PERMANENT_FL = this.obj_personnel.CONTACT.modelAddress.permanent_fl?'1':'0';\r\n  \t\t\tsuccess.results[0].PRESENT_FL = this.obj_personnel.CONTACT.modelAddress.present_fl?'1':'0';\r\n  \t\t\tsuccess.results[0].REGION = this.obj_personnel.CONTACT.modelAddress.region;\r\n  \t\t\tsuccess.results[0].REMARKS = this.obj_personnel.CONTACT.modelAddress.remarks;\r\n  \t\t\tsuccess.results[0].STATE_PROVINCE = this.obj_personnel.CONTACT.modelAddress.state_province;\r\n  \t\t\tsuccess.results[0].STREET_NAME = this.obj_personnel.CONTACT.modelAddress.street_name;\r\n  \t\t\tsuccess.results[0].SUB_VILLAGE = this.obj_personnel.CONTACT.modelAddress.sub_village;\r\n  \t\t\tsuccess.results[0].UNIT_NO = this.obj_personnel.CONTACT.modelAddress.unit_no;\r\n  \t\t\tsuccess.results[0].ZIPCODE = this.obj_personnel.CONTACT.modelAddress.zipcode;\r\n  \t\t\tsuccess.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n  \t\t\tsuccess.results[0].LAST_UPDATED_DT = dateToday;\r\n  \t\t\t\r\n  \t\t\tEntityManager().saveChanges().then((success)=>{\r\n  \t\t\t\ttoastr.clear();\r\n  \t\t\t\ttoastr.success(\"\",\"Record updated sucessfully.\");\r\n  \t\t\t\tthis.loadMain_Address(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\tthis.clearAddressData();\r\n  \t\t\t\t// this.loadLog(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\tthis.loadLog_V2(this.obj_personnel.global_indiv_id);\r\n  \t\t\t},(error)=>{\r\n  \t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\ttoastr.clear();\r\n  \t\t\t\tconsole.log(error);\r\n  \t\t\t\ttoastr.error(error, 'Error in updating address.');\r\n  \t\t\t});\r\n  \t\t});\r\n\r\n  \t}\r\n\r\n  \tbtnEdit_Contact(contact){\r\n  \t\tthis._disableContactTable = true;\r\n  \t\tthis.obj_personnel.CONTACT.statusContact = \"Edit\";\r\n  \t\tthis.obj_personnel.CONTACT.modelContact.contact_no_id = contact.contact_no_id;\r\n  \t\tthis.obj_personnel.CONTACT.modelContact.phone_type = contact.phone_type;\r\n  \t\tthis.obj_personnel.CONTACT.modelContact.area_cd = contact.area_cd;\r\n  \t\tthis.obj_personnel.CONTACT.modelContact.phone_no = contact.phone_no;\r\n  \t\tthis.obj_personnel.CONTACT.modelContact.local_no = contact.local_no;\r\n  \t}\r\n\r\n  \tbtnRemove_Contact(contact){\r\n\r\n  \t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the contact?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n  \t\t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from(\"CONTACT_INFO_TRX\")\r\n  \t\t\t\t\t\t\t\t.where(\"CONTACT_NO_ID\", \"==\", contact.contact_no_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n  \t\t\t\t\t\tif(querySuccess.results.length==0){\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\",\"No to-be-remove record found.\");\r\n  \t\t\t\t\t\t}\r\n  \t\t\t\t\t\tquerySuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((removeSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The contact was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadMain_Contact(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.clearContactData();\r\n  \t\t\t\t\t\t\t// this.loadLog(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.loadLog_V2(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(removeError)=>{\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(removeError, \"Error in removing contact.\");\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n  \t}\r\n\r\n  \tvalidateContact(){\r\n  \t\tvar strValidation = \"\";\r\n\r\n\t\tif(this.obj_personnel.CONTACT.modelContact.phone_type == undefined || this.obj_personnel.CONTACT.modelContact.phone_type == null || this.obj_personnel.CONTACT.modelContact.phone_type.length==0){\r\n  \t\t\tstrValidation+=\"Phone type is required.<br/>\";\r\n  \t\t}\r\n\r\n  \t\tif(this.obj_personnel.CONTACT.modelContact.area_cd == undefined || this.obj_personnel.CONTACT.modelContact.area_cd == null || this.obj_personnel.CONTACT.modelContact.area_cd.length==0){\r\n  \t\t\tstrValidation+=\"Area Code is required.<br/>\";\r\n  \t\t}\r\n\r\n  \t\tif(this.obj_personnel.CONTACT.modelContact.phone_no == undefined || this.obj_personnel.CONTACT.modelContact.phone_no == null || this.obj_personnel.CONTACT.modelContact.phone_no.length==0){\r\n  \t\t\tstrValidation+=\"Phone number is required.<br/>\";\r\n  \t\t}\r\n\r\n  \t\tif(strValidation.length>0){\r\n  \t\t\ttoastr.clear();\r\n  \t\t\ttoastr.error(\"\", strValidation);\r\n  \t\t}else{\r\n  \t\t\tif(this.obj_personnel.CONTACT.statusContact==\"Add\"){\r\n  \t\t\t\tthis.insertContact();\r\n  \t\t\t}else if(this.obj_personnel.CONTACT.statusContact==\"Edit\")\r\n  \t\t\t{\r\n  \t\t\t\tthis.updateContact();\r\n  \t\t\t}  \t\t\r\n  \t\t}\r\n  \t}\r\n  \t\r\n  \tinsertContact(){\r\n\r\n  \t\tsettings.isNavigating = true;\r\n  \t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n  \t\tvar query = EntityQuery().from(\"CONTACT_INFO_TRX\").orderByDesc(\"CONTACT_NO_ID\").take(1);\r\n  \t\tEntityManager().executeQuery(query).then((Success)=>{\r\n  \t\t\tvar Max = 1;\r\n  \t\t\tif(Success.results.length>0)\r\n  \t\t\t{\r\n  \t\t\t\tMax = Success.results[0].CONTACT_NO_ID + 1;\r\n  \t\t\t}\r\n  \t\t\tvar Contact = EntityManager().createEntity(\"CONTACT_INFO_TRX\", {\r\n  \t\t\t\tAREA_CD: this.obj_personnel.CONTACT.modelContact.area_cd,\r\n  \t\t\t\tCONTACT_NO_ID: Max,\r\n  \t\t\t\tCOUNTRY_CD: \"PH\",\r\n  \t\t\t\tGLOBAL_ID: this.obj_personnel.global_indiv_id,\r\n  \t\t\t\tLOCAL_NO: this.obj_personnel.CONTACT.modelContact.local_no,\r\n  \t\t\t\tPHONE_NO: this.obj_personnel.CONTACT.modelContact.phone_no,\r\n  \t\t\t\tPHONE_TYPE: this.obj_personnel.CONTACT.modelContact.phone_type,\r\n  \t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n  \t\t\t\tCREATED_DT: dateToday\r\n\r\n  \t\t\t});\r\n  \t\t\tEntityManager().addEntity(Contact);\r\n  \t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Contact successfully added.\");\r\n\t\t\t\tthis.loadMain_Contact(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearContactData();\r\n\t\t\t\t// this.loadLog(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.loadLog_V2(this.obj_personnel.global_indiv_id);\r\n  \t\t\t}, (error)=>{\r\n  \t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\tif(Contact != null){\r\n  \t\t\t\t\tContact.entityAspect.setDeleted();\r\n  \t\t\t\t}\r\n  \t\t\t\ttoastr.clear();\r\n  \t\t\t\ttoastr.error(error, \"Error in adding contact.\");\r\n  \t\t\t});\r\n\r\n  \t\t});  \t\t\r\n  \t}\r\n\r\n  \tupdateContact(){\r\n\r\n  \t\tsettings.isNavigating = true;\r\n  \t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n  \t\tvar query = EntityQuery().from('CONTACT_INFO_TRX')\r\n  \t\t\t\t\t.where(\"CONTACT_NO_ID\", \"==\", this.obj_personnel.CONTACT.modelContact.contact_no_id);\r\n  \t\tEntityManager().executeQuery(query).then((Success)=>{\r\n\r\n  \t\t\tif(Success.results.length == 0)\r\n  \t\t\t{\r\n  \t\t\t\ttoastr.clear();\r\n  \t\t\t\ttoastr.error(\"\", \"No record to be updated found.\");\r\n  \t\t\t\treturn;\r\n  \t\t\t}\r\n  \t\t\tSuccess.results[0].AREA_CD = this.obj_personnel.CONTACT.modelContact.area_cd;\r\n  \t\t\tSuccess.results[0].LOCAL_NO = this.obj_personnel.CONTACT.modelContact.local_no;\r\n  \t\t\tSuccess.results[0].PHONE_NO = this.obj_personnel.CONTACT.modelContact.phone_no;\r\n  \t\t\tSuccess.results[0].PHONE_TYPE = this.obj_personnel.CONTACT.modelContact.phone_type;\r\n  \t\t\tSuccess.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n  \t\t\tSuccess.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n  \t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\ttoastr.clear();\r\n  \t\t\t\ttoastr.success(\"\", \"The contact was successfully updated.\");\r\n\t\t\t\tthis.loadMain_Contact(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearContactData();\r\n\t\t\t\t// this.loadLog(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.loadLog_V2(this.obj_personnel.global_indiv_id);\r\n  \t\t\t}, (errorSave)=>{  \t\t\t\t\r\n  \t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\ttoastr.clear();\r\n  \t\t\t\ttoastr.error(errorSave, \"Error in updating contact.\");\r\n  \t\t\t\tconsole.log(errorSave);\r\n  \t\t\t});\r\n  \t\t});\r\n  \t}\r\n\r\n  \tvalidateEmail(email) {\r\n  \t\tvar re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n  \t\treturn re.test(email);\r\n\t}\r\n\r\n\tvalidateWeb(URL){\r\n\t\tvar regEx = /^\\s*[a-z](?:[-a-z0-9\\+\\.])*:(?:\\/\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:])*@)?(?:\\[(?:(?:(?:[0-9a-f]{1,4}:){6}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|::(?:[0-9a-f]{1,4}:){5}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4}:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+[-a-z0-9\\._~!\\$&\\'\\(\\)\\*\\+,;=:]+)\\]|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}|(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=@])*)(?::[0-9]*)?(?:\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@]))*)*|\\/(?:(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@]))+)(?:\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@]))*)*)?|(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@]))+)(?:\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@]))*)*|(?!(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@])))(?:\\?(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@])|[\\uE000-\\uF8FF\\uF0000-\\uFFFFD|\\u100000-\\u10FFFD\\/\\?])*)?(?:\\#(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@])|[\\/\\?])*)?\\s*$/i;\r\n\t\treturn regEx.test(URL);\r\n\t}\r\n\r\n\tbtnAdd_EmailWeb(isEmail){\r\n\r\n\t\tif(isEmail){\r\n\t\t\tif(this.obj_personnel.CONTACT.modelInternet.email_addr==undefined || this.obj_personnel.CONTACT.modelInternet.email_addr.length==0){\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", \"No email specified.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.validateEmail(this.obj_personnel.CONTACT.modelInternet.email_addr)){\r\n\t\t\t\t//alert('email is valid.');\r\n\t\t\t\tthis.insertEmailWeb(isEmail);\r\n\t\t\t}else{\r\n\t\t\t\t//alert('email is not valid.');\r\n\t\t\t\ttoastr.error(\"Invalid email.\");\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(this.obj_personnel.CONTACT.modelInternet.url==undefined || this.obj_personnel.CONTACT.modelInternet.url.length==0){\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", \"No URL specified.\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// if(this.validateWeb(this.obj_personnel.CONTACT.modelInternet.url)){\r\n\t\t\t// \talert('url is valid');\r\n\t\t\t\tthis.insertEmailWeb(isEmail);\r\n\t\t\t// }else{\r\n\t\t\t// \talert('url is invalid.');\r\n\t\t\t// \ttoastr.error(\"Invalid URL.\");\r\n\t\t\t// }\r\n\t\t}\r\n\t}\r\n\r\n\tbtnRemove_EmailWeb(internet_id, isEmail){\r\n\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the \"+(isEmail?\"Email address\":\"website url\")+\"?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n  \t\t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from(\"INTERNET_TRX\")\r\n  \t\t\t\t\t\t\t\t.where(\"INTERNET_ID\", \"==\", internet_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n  \t\t\t\t\t\tif(querySuccess.results.length==0){\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\",\"No to-be-remove record found.\");\r\n  \t\t\t\t\t\t}\r\n  \t\t\t\t\t\tquerySuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((removeSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The \"+(isEmail?\"Email address\":\"website url\")+\" was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadMain_EmailWeb(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.clearEmailWebData();\r\n  \t\t\t\t\t\t},(removeError)=>{\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(removeError, \"Error in removing \"+(isEmail?\"Email address\":\"website url\")+\" .\");\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\r\n\t}\r\n\r\n\tbtnRemove_AllEmailWeb(isEmail){\r\n\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove all.\", message:\"Are you sure you want to remove all the \"+(isEmail?\"Email address\":\"website url\")+\"?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n  \t\t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar pred1 = breeze.Predicate.create(\"GLOBAL_ID\", \"==\", this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\tvar pred2 = breeze.Predicate.create(\"EMAIL_FL\", \"==\", isEmail?1:0);\r\n  \t\t\t\t\tvar finalPred = breeze.Predicate.and([pred1, pred2]);\r\n  \t\t\t\t\tvar query = EntityQuery().from(\"INTERNET_TRX\")\r\n  \t\t\t\t\t\t\t\t.where(finalPred);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n  \t\t\t\t\t\tif(querySuccess.results.length==0){\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\",\"No to-be-remove record found.\");\r\n  \t\t\t\t\t\t}\r\n\r\n  \t\t\t\t\t\t_.each(querySuccess.results, (result)=>{\r\n  \t\t\t\t\t\t\tresult.entityAspect.setDeleted();\r\n  \t\t\t\t\t\t});  \t\t\t\t\t\t\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((removeSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The \"+(isEmail?\"Email address\":\"website url\")+\" was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadMain_EmailWeb(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.clearEmailWebData();\r\n  \t\t\t\t\t\t},(removeError)=>{\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(removeError, \"Error in removing \"+(isEmail?\"Email address\":\"website url\")+\" .\");\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\r\n\t}\r\n\r\n\tinsertEmailWeb(isEmail){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from('INTERNET_TRX').orderByDesc('INTERNET_ID').take(1);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tvar Max = 1;\r\n\t\t\tif(querySuccess.results.length>0){\r\n\t\t\t\tMax = querySuccess.results[0].INTERNET_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar internet_trx = {\r\n\t\t\t\tGLOBAL_ID: this.obj_personnel.global_indiv_id,\r\n\t\t\t\tWEB_ADDR: isEmail? this.obj_personnel.CONTACT.modelInternet.email_addr: this.obj_personnel.CONTACT.modelInternet.url,\r\n\t\t\t\tINTERNET_ID: Max,\r\n\t\t\t\tEMAIL_FL: isEmail?1:0,\r\n\t\t\t\tREC_STAT_FL: 1,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\t\t\tvar entity = EntityManager().createEntity(\"INTERNET_TRX\", internet_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"The \"+(isEmail?\"Email\":\"Website\")+ \" successfully added.\");\r\n\t\t\t\tthis.loadMain_EmailWeb(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearEmailWebData();\r\n\t\t\t\t// this.loadLog(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.loadLog_V2(this.obj_personnel.global_indiv_id);\r\n\t\t\t}, (errorSave)=>{\r\n\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(errorSave, \"Error in saving \"+(isEmail?\"Email.\":\"Website.\"));\r\n\t\t\t});\r\n\r\n\t\t});\t\t\r\n\t}\r\n\r\n\r\n\r\n  }","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class main_educational{\r\n\r\n\tobj_personnel = null;\r\n\t_disableForm=true;\r\n\t_disableTable=false;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\tlblCreatedBy=\"\";\r\n\tlblUpdatedBy=\"\";\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_education_clicked.push((val)=>{\r\n\t\t\tthis.loadMain_Educational(val);\r\n\t\t\tthis.loadLog(val);\r\n\t\t\tthis.clearData();\r\n\t\t});\r\n\t\t\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.push(()=>{\r\n\t\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT={\r\n\t\t\t\tstatus:\"\",\r\n\t\t\t\tmodel:{},\r\n\t\t\t\tlist:[]\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\tloadMain_Educational(global_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"EDUCATION_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tvar tmpList=[];\r\n\t\t\t_.each(querySuccess.results, (result)=>{\r\n\t\t\t\tvar school = this.obj_personnel.SCHOOLS.find((x)=>{\r\n\t\t\t\t\treturn x.school_cd == result.SCHOOL_CD;\r\n\t\t\t\t});\r\n\t\t\t\tvar level = this.obj_personnel.LEVEL.find((x)=>{\r\n\t\t\t\t\treturn x.value == result.EDUCATION_LEVEL;\r\n\t\t\t\t});\r\n\t\t\t\tvar education = {\r\n\t\t\t\t\tstart_yr: result.START_YR,\r\n\t\t\t\t\tcourse: result.COURSE,\r\n\t\t\t\t\teducation_id: result.EDUCATION_ID,\r\n\t\t\t\t\teducation_level: result.EDUCATION_LEVEL,\r\n\t\t\t\t\tend_yr: result.END_YR,\r\n\t\t\t\t\tschool_cd: result.SCHOOL_CD,\r\n\t\t\t\t\thonor_awards: result.HONOR_AWARDS,\r\n\t\t\t\t\tcompleted_fl: result.COMPLETED_FL,\r\n\t\t\t\t\tschool_name: school.school_name,\r\n\t\t\t\t\tlevel_name: level.text\t\t\t\t\t\r\n\t\t\t\t};\r\n\t\t\t\ttmpList.push(education);\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT.list = tmpList;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Success\");\r\n\t\t\tsettings.isNavigating = false;\r\n\r\n\t\t}, (error)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(error, \"Error in loading educational details.\");\r\n\t\t});\r\n\t}\r\n\r\n\tloadLog(global_id){\r\n\r\n\t\tvar tmpList=[];\r\n\t\tvar query = EntityQuery().from(\"EDUCATION_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\tvar _user = r.CREATED_BY;\r\n\t\t\t\t\tvar _date = new Date(r.CREATED_DT);\r\n\t\t\t\t\ttmpList.push({\r\n\t\t\t\t\t\tuser: _user,\r\n\t\t\t\t\t\tdate: _date\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(r.LAST_UPDATED_DT != null){\r\n\t\t\t\t\tvar _user = r.LAST_UPDATED_BY;\r\n\t\t\t\t\tvar _date = r.LAST_UPDATED_DT;\r\n\t\t\t\t\ttmpList.push({\r\n\t\t\t\t\t\tuser: _user,\r\n\t\t\t\t\t\tdate: _date\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\ttmpList.sort(this.OrderByDate);\r\n\t\t\tvar LastIndex = tmpList.length-1;\r\n\t\t\tif(tmpList.length>0){\r\n\t\t\t\tthis.lblCreatedBy = tmpList[0].user + ' ' + moment.utc(tmpList[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpList.length>1){\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpList[LastIndex].user + ' ' + moment.utc(tmpList[LastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tOrderByDate(a, b){\r\n\t\tif(a.date > b.date)\r\n\t\t\treturn 1;\r\n\t\tif(a.date < b.date)\r\n\t\t\treturn -1;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tbtnAdd(){\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis._disableBtnAdd = true;\t\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT.status=\"ADD\";\r\n\t}\r\n\r\n\tbtnEdit(education){\t\t\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis._disableBtnAdd = true;\t\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model = {\r\n\t\t\teducation_id: education.education_id,\r\n\t\t\teducation_level: education.education_level,\r\n\t\t\tstart_yr: education.start_yr+\"\",\r\n\t\t\tend_yr: education.end_yr+\"\",\r\n\t\t\tschool_cd: education.school_cd,\r\n\t\t\tcourse: education.course,\r\n\t\t\thonor_awards: education.honor_awards,\r\n\t\t\tcompleted_fl: education.completed_fl==\"1\"\r\n\t\t};\r\n\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT.status=\"EDIT\";\r\n\t}\r\n\r\n\tclearData(){\r\n\t\tsettings.isNavigating = false;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableTable = false;\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model={};\r\n\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT.status=\"\";\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\tvar strValidation=\"\";\r\n\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.education_level == undefined || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.education_level == null || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.education_level.length==0){\r\n\t\t\tstrValidation+=\"No level specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr == undefined || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr == null || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr.length==0){\r\n\t\t\tstrValidation+=\"No start year specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr == undefined || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr == null || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr.length==0){\r\n\t\t\tstrValidation+=\"No end year specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.school_cd == undefined || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.school_cd == null || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.school_cd.length==0){\r\n\t\t\tstrValidation+=\"No school specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.course == undefined || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.course == null || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.course.length==0){\r\n\t\t\tstrValidation+=\"No degree/major specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr != undefined && this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr != null && this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr.length>0){\r\n\t\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr != undefined && this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr != null && this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr.length>0){\t\t\t\t\r\n\t\t\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr> this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr)\r\n\t\t\t\t{\r\n\t\t\t\t\tstrValidation+=\"Start year cannot be greater than end year.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.status==\"ADD\")\r\n\t\t\t{\r\n\t\t\t\tthis.insert();\r\n\t\t\t}else if(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.status==\"EDIT\")\r\n\t\t\t{\r\n\t\t\t\tthis.update();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinsert(){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"EDUCATION_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"EDUCATION_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tvar Max=1;\r\n\t\t\tif(querySuccess.results.length>0)\r\n\t\t\t{\r\n\t\t\t\tMax = querySuccess.results[0].EDUCATION_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar education_trx = {\r\n\t\t\t\tGLOBAL_INDIV_ID: this.obj_personnel.global_indiv_id,\r\n\t\t\t\tSTART_YR: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr,\r\n\t\t\t\tCOURSE: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.course,\r\n\t\t\t\tEDUCATION_ID: Max,\r\n\t\t\t\tEDUCATION_LEVEL: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.education_level,\r\n\t\t\t\tEND_YR: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr,\r\n\t\t\t\tSCHOOL_CD: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.school_cd,\r\n\t\t\t\tYR_GRADUATED: 0,\r\n\t\t\t\tHONOR_AWARDS: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.honor_awards,\r\n\t\t\t\tCOMPLETED_FL: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.completed_fl?1:0,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"EDUCATION_TRX\", education_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadMain_Educational(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearData();\r\n\t\t\t},(saveError)=>{\r\n\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity!= null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", saveError);\r\n\t\t\t});\r\n\t\t});\t\t\r\n\t}\r\n\r\n\tupdate(){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"EDUCATION_TRX\")\r\n\t\t\t\t\t.where(\"EDUCATION_ID\", \"==\", this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.education_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tif(querySuccess.results.length==0){\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", \"Error in query data to be updated\");\r\n\t\t\t}\r\n\t\t\tquerySuccess.results[0].START_YR = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr;\r\n\t\t\tquerySuccess.results[0].COURSE = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.course;\r\n\t\t\tquerySuccess.results[0].EDUCATION_LEVEL = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.education_level;\r\n\t\t\tquerySuccess.results[0].END_YR = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr;\r\n\t\t\tquerySuccess.results[0].SCHOOL_CD = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.school_cd;\r\n\t\t\tquerySuccess.results[0].HONOR_AWARDS = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.honor_awards;\r\n\t\t\tquerySuccess.results[0].COMPLETED_FL = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.completed_fl?1:0;\r\n\t\t\tquerySuccess.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\tquerySuccess.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((updateSuccess)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\tthis.loadMain_Educational(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearData();\r\n\t\t\t}, (updateError)=>{\r\n\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", updateError);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tbtnRemove(educ)\r\n\t{\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the educational achievement\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n  \t\t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from(\"EDUCATION_TRX\")\r\n  \t\t\t\t\t\t\t\t.where(\"EDUCATION_ID\", \"==\", educ.education_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n  \t\t\t\t\t\tif(querySuccess.results.length==0){\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\",\"No to-be-remove record found.\");\r\n  \t\t\t\t\t\t}\r\n  \t\t\t\t\t\tquerySuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((removeSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The educational achievement was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadMain_Educational(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t\t\t\tthis.clearData();\r\n  \t\t\t\t\t\t},(removeError)=>{\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(removeError, \"Error in removing educational achievement.\");\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\n\r\n@inject(DialogService, obj_personnel, toastr)\r\nexport class miscellaneous\r\n{\r\n\tobj_personnel = null;\r\n\tconstructor(dialogService, obj_personnel, toastr){\r\n\t\tthis.dialogService = dialogService;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.obj_personnel.OBSERVERS.ppid_dialog.push((all)=>{\t\t\t\t\r\n\t\t\tthis.CloseSearch(all);\r\n\t\t});\t\r\n\t}\r\n\t\r\n\tCloseSearch(global_id){\t\t\r\n\t\t//alert(\"miscellaneous:\"+global_id);\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\n\r\n@inject(DialogService, obj_personnel, toastr)\r\nexport class relative\r\n{\r\n\tobj_personnel = null;\r\n\t_tab0_loaded = false;\r\n\t_404_img = \"/images/404.png\";\r\n\tconstructor(dialogService, obj_personnel, toastr){\r\n\t\tthis.dialogService = dialogService;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\t//this.obj_personnel.OBSERVERS.ppid_dialog.push((all)=>{\t\t\t\t\r\n\t\t//\tthis.CloseSearch(all);\r\n\t\t//});\r\n\t\t// this.obj_personnel.OBSERVERS.tab_changed.push((tab_num,global_id)=>{\r\n\t\t// \tthis.LoadData(tab_num, global_id);\r\n\t\t// });\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num == 1){\r\n\t\t\t\t$(\"#tab0\").addClass(\"active\");\r\n\t\t\t\t$(\"#tabs1\").removeClass(\"active\");\r\n\t\t\t\t$(\"#tabs2\").removeClass(\"active\");\r\n\t\t\t\t$(\"#tabs3\").removeClass(\"active\");\r\n\t\t\t\t$(\"#tabs4\").removeClass(\"active\");\r\n\t\t\t\t$(\"#relative\").find(\".active\").removeClass(\"active\");\r\n\t\t\t\t$(\"#relative_parent\").addClass(\"active\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tclickTab_relative(tab_num){\r\n\t\t\r\n\t\tif(this.obj_personnel.global_indiv_id == undefined || this.obj_personnel.global_indiv_id == null || this.obj_personnel.global_indiv_id.length==0)\r\n\t\t\treturn;\r\n\r\n\t\tswitch(tab_num){\r\n\t\t\tcase 0: \r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading parents' info...\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading siblings' info...\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading spouse's info...\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading children list...\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4:\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"\", \"Loading emergency contacts...\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(tab_num, this.obj_personnel.global_indiv_id);\t\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\nimport {OrderByDate} from '../../helpers';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class relative_children{\r\n\r\n\tobj_personnel = null;\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\t_disableForm=true;\r\n\t_disableTable=false;\r\n\t_disableDeceasedDt=true;\r\n\tformStatus=\"\";\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num==3){\r\n\t\t\t\t$(\"#children_birth_dt\").datepicker();\r\n\t\t\t\t$(\"#children_deceased_dt\").datepicker();\r\n\t\t\t\tthis.loadChildren(global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tloadChildren(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar pred1 = breeze.Predicate.create(\"GLOBAL_INDIV_ID\", \"==\", global_indiv_id);\r\n\t\tvar pred2 = breeze.Predicate.create(\"IN_CASE_OF_EMERGENCY_FL\", \"!=\", \"1\");\r\n\t\tvar orPred = [];\r\n\t\t_.each(this.obj_personnel.RELATIONSHIP, (relation)=>{\r\n\t\t\tif(relation.group==\"CHILDREN\"){\r\n\t\t\t\torPred.push(breeze.Predicate.create(\"RELATIVE_CD\", \"==\", relation.value));\r\n\t\t\t}\r\n\t\t});\r\n\t\tvar _orPred = breeze.Predicate.or(orPred);\r\n\t\tvar finalPred = breeze.Predicate.and([pred1, pred2, _orPred]);\r\n\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(finalPred);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar tmp = [];\r\n\t\t\tvar tmpLog=[];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\t\t\t\tvar deceased_dt = null;\r\n\t\t\t\tif(moment(r.DECEASED_DT).isValid()){\t\t\t\t\t\r\n\t\t\t\t\tdeceased_dt = moment.utc(r.DECEASED_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\tif(deceased_dt == \"01/01/0001\"){\r\n\t\t\t\t\t\tdeceased_dt = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar status = null;\r\n\t\t\t\tswitch(r.DEPENDENT_FL){\r\n\t\t\t\t\tcase \"0\": status = \"Dependent\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"1\": status = \"Deceased\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\trelative_id: r.RELATIVE_ID,\r\n\t\t\t\t\tgiven_name: r.GIVEN_NAME,\r\n\t\t\t\t\tmiddle_name: r.MIDDLE_NAME,\r\n\t\t\t\t\tlast_name: r.LAST_NAME,\r\n\t\t\t\t\tbirth_dt: moment.utc(r.BIRTH_DT).format(\"MM/DD/YYYY\"),\r\n\t\t\t\t\tage: this.computeAge(moment.utc(r.BIRTH_DT).format(\"MM/DD/YYYY\")),\r\n\t\t\t\t\toccupation: r.OCCUPATION,\r\n\t\t\t\t\temployer: r.EMPLOYER,\r\n\t\t\t\t\tdependent_fl: r.DEPENDENT_FL,\r\n\t\t\t\t\tstatus: status,\r\n\t\t\t\t\tdeceased_dt: deceased_dt,\r\n\t\t\t\t\trelative_cd: r.RELATIVE_CD\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconsole.log(tmp);\r\n\t\t\tthis.obj_personnel.RELATIVE.children.list = tmp;\r\n\t\t\ttmpLog.sort(OrderByDate);\r\n\t\t\tvar LastIndex = tmpLog.length-1;\r\n\t\t\tif(tmpLog.length>0){\r\n\t\t\t\tthis.lblCreatedBy = tmpLog[0].user + ' ' + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpLog[LastIndex].user + ' ' + moment.utc(tmpLog[LastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Relative info has been loaded...\");\r\n\t\t\tsettings.isNavigating = false;\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying children list.\");\r\n\t\t});\r\n\t}\r\n\r\n\tcheckChange(bit){\r\n \r\n\t\tswitch(bit){\r\n\t\t\tcase 0:\r\n\t\t\t\t$(\"#children_deceased\").prop(\"checked\", false);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\t$(\"#children_dependent\").prop(\"checked\", false);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tvar isChecked_dependent = $('#children_dependent').is(\":checked\");\r\n\t\tvar isChecked_deceased = $(\"#children_deceased\").is(\":checked\");\r\n\t\tif(isChecked_dependent){\r\n\t\t\tthis.obj_personnel.RELATIVE.children.model.dependent_fl = \"0\";\r\n\t\t\tthis.obj_personnel.RELATIVE.children.model.deceased_dt = null;\r\n\t\t\t$(\"#deceased_dt\").val(\"\");\r\n\t\t\tthis._disableDeceasedDt = true;\r\n\t\t}else if(isChecked_deceased){\r\n\t\t\tthis.obj_personnel.RELATIVE.children.model.dependent_fl = \"1\";\r\n\t\t\tthis._disableDeceasedDt = false;\r\n\t\t}else if(isChecked_dependent == false && isChecked_deceased == false){\r\n\t\t\tthis._disableDeceasedDt = true;\r\n\t\t\tthis.obj_personnel.RELATIVE.children.model.dependent_fl = null;\t\t\t\t\r\n\t\t\tthis.obj_personnel.RELATIVE.children.model.deceased_dt = null;\r\n\t\t\t$(\"#deceased_dt\").val(\"\");\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tcomputeAge(dateString){\r\n\t\tif(dateString == null || dateString.length==0)\r\n\t\t\treturn;\r\n\t\tvar today = new Date();\r\n\t\tvar birthDate = new Date(dateString);\r\n\t\tvar age = today.getFullYear() - birthDate.getFullYear();\r\n\t\tvar m = today.getMonth() - birthDate.getMonth();\r\n\t\tif (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\r\n\t\t\tage--;\r\n\t\t}\r\n\t\treturn age;\t\r\n\t}\r\n\r\n\tbtnAdd(){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableTable = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis.formStatus = \"ADD\";\r\n\t}\r\n\r\n\tbtnEdit(item){\r\n\t\tconsole.log(item);\r\n\r\n\t\tthis.formStatus=\"EDIT\";\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableTable = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis.obj_personnel.RELATIVE.children.model.relative_id = item.relative_id;\r\n\t\tthis.obj_personnel.RELATIVE.children.model.last_name = item.last_name;\r\n\t\tthis.obj_personnel.RELATIVE.children.model.given_name = item.given_name;\r\n\t\tthis.obj_personnel.RELATIVE.children.model.middle_name = item.middle_name;\r\n\t\tthis.obj_personnel.RELATIVE.children.model.birth_dt = item.birth_dt;\r\n\t\tthis.obj_personnel.RELATIVE.children.model.age = item.age;\r\n\t\tthis.obj_personnel.RELATIVE.children.model.relative_cd = item.relative_cd;\r\n\t\tif(item.dependent_fl != null){\r\n\t\t\tswitch(item.dependent_fl){\r\n\t\t\t\tcase \"0\":\r\n\t\t\t\t\t$(\"#children_dependent\").prop(\"checked\", true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"1\":\r\n\t\t\t\t\t$(\"#children_deceased\").prop(\"checked\", true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tthis.checkChange(this.obj_personnel.RELATIVE.children.model.dependent_fl);\r\n\t\t\tthis.obj_personnel.RELATIVE.children.model.deceased_dt = item.deceased_dt;\r\n\t\t}\r\n\t}\r\n\r\n\tbtnRemove(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the record?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('RELATIVE_TRX').where('RELATIVE_ID', '==', item.relative_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The record was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadChildren(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing address.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tclearField(){\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableTable = false;\r\n\t\t$(\"#children_deceased\").prop(\"checked\", false);\r\n\t\t$(\"#children_dependent\").prop(\"checked\", false);\r\n\t\tthis.obj_personnel.RELATIVE.children.model = {};\t\t\r\n\t\tthis.formStatus = \"\";\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\tvar strValidation = \"\";\r\n\t\tthis.obj_personnel.RELATIVE.children.model.birth_dt = $(\"#children_birth_dt\").val();\r\n\t\tthis.obj_personnel.RELATIVE.children.model.deceased_dt = $(\"#children_deceased_dt\").val();\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.children.model.last_name == undefined || this.obj_personnel.RELATIVE.children.model.last_name == null || this.obj_personnel.RELATIVE.children.model.last_name.length == 0){\r\n\t\t\tstrValidation+=\"No last name specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.children.model.given_name == undefined || this.obj_personnel.RELATIVE.children.model.given_name == null || this.obj_personnel.RELATIVE.children.model.given_name.length == 0){\r\n\t\t\tstrValidation+=\"No given name specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.children.model.birth_dt != undefined && this.obj_personnel.RELATIVE.children.model.birth_dt != null && this.obj_personnel.RELATIVE.children.model.birth_dt.length>0){\r\n\t\t\tif(!moment(this.obj_personnel.RELATIVE.children.model.birth_dt).isValid()){\r\n\t\t\t\tstrValidation+=\"Invalid birth date.<br/>\";\r\n\t\t\t}else{\r\n\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.children.model.birth_dt);\r\n\t\t\t\tvar d2 = new Date();\r\n\t\t\t\tif(d1>d2){\r\n\t\t\t\t\tstrValidation+=\"Birth date cannot be greater than date today.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tstrValidation+=\"No birth date specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.children.model.dependent_fl == \"1\"){\r\n\t\t\tif(this.obj_personnel.RELATIVE.children.model.deceased_dt.length>0){\r\n\t\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.children.model.deceased_dt)).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid deceased date. <br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.children.model.deceased_dt);\r\n\t\t\t\t\tvar d2 = new Date();\r\n\t\t\t\t\tif(d1>d2){\r\n\t\t\t\t\t\tstrValidation+=\"Deceased date cannot be greater than date today.<br/>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// else{\r\n\t\t\t// \tstrValidation+=\"[Mother] No deceased date specified.<br/>\";\r\n\t\t\t// }\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.children.model.relative_cd == undefined || this.obj_personnel.RELATIVE.children.model.relative_cd == null || this.obj_personnel.RELATIVE.children.model.relative_cd.length ==0){\r\n\t\t\tstrValidation+=\"No relationship specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.formStatus==\"ADD\"){\r\n\t\t\t\tthis.save(this.obj_personnel.global_indiv_id);\r\n\t\t\t}else if(this.formStatus==\"EDIT\"){\r\n\t\t\t\tthis.update(this.obj_personnel.RELATIVE.children.model.relative_id);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\t\r\n\r\n\tsave(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar birth_dt = new Date(moment(this.obj_personnel.RELATIVE.children.model.birth_dt).add(8, \"hours\"));\r\n\t\tvar deceased_dt = null;\r\n\r\n\t\tif(moment(this.obj_personnel.RELATIVE.children.model.deceased_dt).isValid()){\r\n\t\t\tdeceased_dt = new Date(moment(this.obj_personnel.RELATIVE.children.model.deceased_dt).add(8, \"hours\"));\r\n\t\t}\r\n\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"RELATIVE_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\t\r\n\t\t\tvar MaxId = 1;\r\n\t\t\tif(s1.results.length==1){\r\n\t\t\t\tMaxId = s1.results[0].RELATIVE_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar relative_trx = {\r\n\t\t\t\tRELATIVE_ID: MaxId,\r\n\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\tGIVEN_NAME: this.obj_personnel.RELATIVE.children.model.given_name,\r\n\t\t\t\tMIDDLE_NAME: this.obj_personnel.RELATIVE.children.model.middle_name,\r\n\t\t\t\tLAST_NAME: this.obj_personnel.RELATIVE.children.model.last_name,\r\n\t\t\t\tBIRTH_DT: birth_dt,\r\n\t\t\t\tDEPENDENT_FL: this.obj_personnel.RELATIVE.children.model.dependent_fl,\r\n\t\t\t\tDECEASED_DT: deceased_dt,\r\n\t\t\t\tRELATIVE_CD: this.obj_personnel.RELATIVE.children.model.relative_cd,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\t\t\tconsole.log(relative_trx);\r\n\t\t\t\r\n\t\t\tvar entity = EntityManager().createEntity(\"RELATIVE_TRX\", relative_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadChildren(global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.error(e2, \"Error in saving children info.\");\r\n\t\t\t});\r\n\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(\"\", \"Error in querying relative id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdate(relative_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(\"RELATIVE_ID\", \"==\", relative_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar birth_dt = new Date(moment(this.obj_personnel.RELATIVE.children.model.birth_dt).add(8, \"hours\"));\r\n\r\n\t\t\tvar deceased_dt = null;\r\n\t\t\tif(moment(this.obj_personnel.RELATIVE.children.model.deceased_dt).isValid()){\r\n\t\t\t\tdeceased_dt = new Date(moment(this.obj_personnel.RELATIVE.children.model.deceased_dt).add(8, \"hours\"));\r\n\t\t\t}\r\n\r\n\t\t\ts1.results[0].LAST_NAME = this.obj_personnel.RELATIVE.children.model.last_name;\r\n\t\t\ts1.results[0].GIVEN_NAME = this.obj_personnel.RELATIVE.children.model.given_name;\r\n\t\t\ts1.results[0].MIDDLE_NAME = this.obj_personnel.RELATIVE.children.model.middle_name;\r\n\t\t\ts1.results[0].BIRTH_DT = birth_dt;\r\n\t\t\ts1.results[0].RELATIVE_CD = this.obj_personnel.RELATIVE.children.model.relative_cd;\r\n\t\t\ts1.results[0].DEPENDENT_FL = this.obj_personnel.RELATIVE.children.model.dependent_fl;\r\n\t\t\ts1.results[0].DECEASED_DT = deceased_dt;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\t\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\tthis.loadChildren(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\ttoastr.error(e2, \"Error in saving changes.\");\r\n\t\t\t});\r\n\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\ttoastr.error(e1, \"Error in querying relative info.\");\r\n\t\t});\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\nimport {OrderByDate} from '../../helpers';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class relative_emergency{\r\n\r\n\tobj_personnel = null;\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\t_disableForm=true;\r\n\t_disableTable=false;\t\r\n\tformStatus=\"\";\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num == 4){\r\n\t\t\t\tthis.loadEmergencyContacts(global_indiv_id);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tloadEmergencyContacts(global_indiv_id){\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar pred1 = breeze.Predicate.create(\"GLOBAL_INDIV_ID\", \"==\", global_indiv_id);\r\n\t\tvar pred2 = breeze.Predicate.create(\"IN_CASE_OF_EMERGENCY_FL\", \"==\", \"1\");\r\n\t\tvar finalPred = breeze.Predicate.and([pred1, pred2]);\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(finalPred)\r\n\t\t\t\t\t.orderBy(\"RELATIVE_ID\");\r\n\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\t// var tmp=[];\r\n\t\t\tthis.obj_personnel.RELATIVE.emergency_contact.list=[];\r\n\t\t\tvar tmpLog = [];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\r\n\t\t\t\tvar emergency={};\r\n\t\t\t\temergency.relative_id = r.RELATIVE_ID;\r\n\t\t\t\temergency.global_indiv_id = r.GLOBAL_INDIV_ID;\r\n\t\t\t\temergency.given_name = r.GIVEN_NAME;\r\n\t\t\t\temergency.middle_name = r.MIDDLE_NAME;\r\n\t\t\t\temergency.last_name = r.LAST_NAME;\r\n\t\t\t\temergency.phone_no = r.PHONE_NO;\r\n\t\t\t\temergency.relative_cd = r.RELATIVE_CD;\r\n\r\n\t\t\t\tquery = EntityQuery().from(\"RELATIVE_ADDR_TRX\")\r\n\t\t\t\t\t\t.where(\"RELATIVE_ID\", \"==\", r.RELATIVE_ID);\r\n\t\t\t\tEntityManager().executeQuery(query).then((s2)=>{\r\n\r\n\t\t\t\t\tif(s2.results.length>0){\r\n\t\t\t\t\t\temergency.relative_addr_id = s2.results[0].RELATIVE_ADDR_ID;\r\n\t\t\t\t\t\temergency.country_cd = s2.results[0].COUNTRY_CD;\r\n\t\t\t\t\t\temergency.region = s2.results[0].REGION;\r\n\t\t\t\t\t\temergency.state_province = s2.results[0].STATE_PROVINCE;\r\n\t\t\t\t\t\temergency.city_town = s2.results[0].CITY_TOWN;\r\n\t\t\t\t\t\temergency.district = s2.results[0].DISTRICT;\r\n\t\t\t\t\t\temergency.barangay = s2.results[0].BARANGAY;\r\n\t\t\t\t\t\temergency.sub_village = s2.results[0].SUB_VILLAGE;\r\n\t\t\t\t\t\temergency.block_lot = s2.results[0].BLOCK_LOT;\r\n\t\t\t\t\t\temergency.street_name = s2.results[0].STREET_NAME;\r\n\t\t\t\t\t\temergency.house_no = s2.results[0].HOUSE_NO;\r\n\t\t\t\t\t\temergency.bldg_name = s2.results[0].BLDG_NAME;\r\n\t\t\t\t\t\temergency.unit_no = s2.results[0].UNIT_NO;\r\n\t\t\t\t\t\temergency.zipcode = s2.results[0].ZIPCODE;\r\n\t\t\t\t\t\tvar strAddress=\"\";\r\n\t\t\t\t\t\tvar tmpAddress=[];\r\n\t\t\t\t\t\tif(s2.results[0].UNIT_NO != null && s2.results[0].UNIT_NO.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].UNIT_NO);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(s2.results[0].HOUSE_NO != null && s2.results[0].HOUSE_NO.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].HOUSE_NO);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].BLOCK_LOT != null && s2.results[0].BLOCK_LOT.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].BLOCK_LOT);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].BLDG_NAME != null && s2.results[0].BLDG_NAME.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].BLDG_NAME);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].STREET_NAME != null && s2.results[0].STREET_NAME.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].STREET_NAME);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].SUB_VILLAGE != null && s2.results[0].SUB_VILLAGE.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].SUB_VILLAGE);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].BARANGAY != null && s2.results[0].BARANGAY.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].BARANGAY);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].DISTRICT != null && s2.results[0].DISTRICT.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].DISTRICT);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].CITY_TOWN != null && s2.results[0].CITY_TOWN.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].CITY_TOWN);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].STATE_PROVINCE != null && s2.results[0].STATE_PROVINCE.length>0){\r\n\t\t\t\t\t\t\tvar text = this.obj_personnel.LOCATIONS.find((l)=>{\r\n\t\t\t\t\t\t\t\tif(l.value == s2.results[0].STATE_PROVINCE)\r\n\t\t\t\t\t\t\t\t\treturn l.text;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\ttmpAddress.push(text);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].REGION != null && s2.results[0].REGION.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].REGION);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].ZIPCODE != null && s2.results[0].ZIPCODE.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].ZIPCODE);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(s2.results[0].COUNTRY_CD != null && s2.results[0].COUNTRY_CD.length>0){\r\n\t\t\t\t\t\t\ttmpAddress.push(s2.results[0].COUNTRY_CD);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(tmpAddress.length>0){\r\n\t\t\t\t\t\t\tstrAddress = tmpAddress.join(' ');\r\n\t\t\t\t\t\t\temergency.address = strAddress;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.obj_personnel.RELATIVE.emergency_contact.list.push(emergency);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\t\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t});\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"emergency contacts has been loaded...\");\r\n\t\t\t// this.obj_personnel.RELATIVE.emergency_contact.list = tmp;\r\n\t\t\ttmpLog.sort(OrderByDate);\r\n\t\t\tif(tmpLog.length >0){\r\n\r\n\t\t\t\tvar lastIndex = tmpLog.length-1;\r\n\t\t\t\tthis.lblCreatedBy = tmpLog[0].user + \" \" + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpLog[lastIndex].user + \" \" + moment.utc(tmpLog[lastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\t\t\tsettings.isNavigating = false;\r\n\r\n\t\t}, (e1)=>{\t\t\t\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying emergency contacts.\")\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tbtnAdd(){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"ADD\";\r\n\t}\r\n\r\n\tbtnEdit(item){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis.formStatus = \"EDIT\";\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.relative_id = item.relative_id;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.last_name = item.last_name;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.given_name = item.given_name;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.middle_name = item.middle_name;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.relative_cd = item.relative_cd;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.phone_no = item.phone_no;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.relative_addr_id = item.relative_addr_id;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.zipcode = item.zipcode;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.unit_no = item.unit_no;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.house_no = item.house_no;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.block_lot = item.block_lot;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.bldg_name = item.bldg_name;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.street_name = item.street_name;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.sub_village = item.sub_village;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.barangay = item.barangay;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.district = item.district;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.city_town = item.city_town;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.state_province = item.state_province;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.region = item.region;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.country_cd = item.country_cd;\r\n\t}\r\n\r\n\tbtnRemove(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the record?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('RELATIVE_ADDR_TRX').where('RELATIVE_ADDR_ID', '==', item.relative_addr_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\r\n  \t\t\t\t\t\t\tquery = EntityQuery().from(\"RELATIVE_TRX\").where(\"RELATIVE_ID\", \"==\", item.relative_id);\r\n  \t\t\t\t\t\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n  \t\t\t\t\t\t\t\ts1.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n  \t\t\t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\t\t\ttoastr.success(\"\", \"Record successfully removed.\");\r\n  \t\t\t\t\t\t\t\t\tthis.loadEmergencyContacts(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\t\t\tthis.clearField();\r\n  \t\t\t\t\t\t\t\t}, (e2)=>{\r\n  \t\t\t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\t\t\ttoastr.error(e2, \"Error in removing emergency contact.\");\r\n  \t\t\t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t\t\t})\r\n\r\n  \t\t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(error, \"Error in removing address.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tdd_provinceChanged(){\t\t\r\n\t\tvar prov = this.obj_personnel.RELATIVE.emergency_contact.model.state_province;\r\n\t\tif(prov != undefined && prov != null && prov.length!=0){\r\n\t\t\tvar selectedProv = this.obj_personnel.PROVINCE.find((p)=>{\r\n\t\t\t\tif(p.value == prov){\r\n\t\t\t\t\treturn p;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(selectedProv != null){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.emergency_contact.model.region = selectedProv.group;\r\n\t\t\t\tthis.dd_regionChanged();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdd_regionChanged(){\r\n\t\tvar reg = this.obj_personnel.RELATIVE.emergency_contact.model.region;\r\n\t\tif(reg != undefined && reg!=null && reg.length!=0)\r\n\t\t{\r\n\t\t\t//alert(this.obj_personnel.CONTACT.modelAddress.region);\r\n\t\t\tvar selectedRegion = this.obj_personnel.REGION.find((r)=>{\r\n\t\t\t\tif(r.value == reg)\r\n\t\t\t\t\treturn r;\r\n\t\t\t});\r\n\r\n\t\t\tif(selectedRegion != null)\r\n\t\t\t{\r\n\t\t\t\treg = this.obj_personnel.RELATIVE.emergency_contact.model.country_cd = selectedRegion.group;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tclearField(){\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableTable = false;\r\n\t\tthis.obj_personnel.RELATIVE.emergency_contact.model={};\r\n\t\tthis.formStatus = \"\";\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\tvar strValidation = \"\";\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.emergency_contact.model.last_name == undefined || this.obj_personnel.RELATIVE.emergency_contact.model.last_name == null || this.obj_personnel.RELATIVE.emergency_contact.model.last_name.length==0){\r\n\t\t\tstrValidation+=\"No last name specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.emergency_contact.model.given_name == undefined || this.obj_personnel.RELATIVE.emergency_contact.model.given_name == null || this.obj_personnel.RELATIVE.emergency_contact.model.given_name.length==0){\r\n\t\t\tstrValidation+=\"No given name specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.emergency_contact.model.relative_cd == undefined || this.obj_personnel.RELATIVE.emergency_contact.model.relative_cd == null || this.obj_personnel.RELATIVE.emergency_contact.model.relative_cd.length==0){\r\n\t\t\tstrValidation+=\"No relationship specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.emergency_contact.model.phone_no == undefined || this.obj_personnel.RELATIVE.emergency_contact.model.phone_no == null || this.obj_personnel.RELATIVE.emergency_contact.model.phone_no.length==0){\r\n\t\t\tstrValidation+= \"No phone number specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.emergency_contact.model.country_cd == undefined || this.obj_personnel.RELATIVE.emergency_contact.model.country_cd == null || this.obj_personnel.RELATIVE.emergency_contact.model.country_cd.length==0){\r\n\t\t\tstrValidation+=\"No country specified. <br/>\";\r\n\t\t}\r\n\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.obj_personnel.RELATIVE.emergency_contact.model.relative_id != undefined && this.obj_personnel.RELATIVE.emergency_contact.model.relative_id != null && this.obj_personnel.RELATIVE.emergency_contact.model.relative_id>0){\r\n\t\t\t\tthis.updateInfo(this.obj_personnel.RELATIVE.emergency_contact.model.relative_id);\r\n\t\t\t}else{\r\n\t\t\t\tthis.saveInfo(this.obj_personnel.global_indiv_id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsaveInfo(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"RELATIVE_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar maxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].RELATIVE_ID+1;\t\t\t\t\r\n\t\t\t}\r\n\t\t\tvar relative = {\r\n\t\t\t\tRELATIVE_ID: maxId,\r\n\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\tGIVEN_NAME: this.obj_personnel.RELATIVE.emergency_contact.model.given_name,\r\n\t\t\t\tMIDDLE_NAME: this.obj_personnel.RELATIVE.emergency_contact.model.middle_name,\r\n\t\t\t\tLAST_NAME: this.obj_personnel.RELATIVE.emergency_contact.model.last_name,\r\n\t\t\t\tBIRTH_DT: \"01/01/0001\",\r\n\t\t\t\tPHONE_NO: this.obj_personnel.RELATIVE.emergency_contact.model.phone_no,\r\n\t\t\t\tIN_CASE_OF_EMERGENCY_FL: 1,\r\n\t\t\t\tRELATIVE_CD: this.obj_personnel.RELATIVE.emergency_contact.model.relative_cd,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"RELATIVE_TRX\", relative);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\tthis.saveAddress(maxId);\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tif(entity!=null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\tsettings.isNavigating=false;\r\n\t\t\t\ttoastr.error(e2, \"Error in saving emergency contact.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating=false;\r\n\t\t\ttoastr.error(e1, \"Error in querying relative id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdateInfo(relative_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(\"RELATIVE_ID\", \"==\", relative_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].GIVEN_NAME = this.obj_personnel.RELATIVE.emergency_contact.model.given_name;\r\n\t\t\ts1.results[0].MIDDLE_NAME = this.obj_personnel.RELATIVE.emergency_contact.model.middle_name;\r\n\t\t\ts1.results[0].LAST_NAME = this.obj_personnel.RELATIVE.emergency_contact.model.last_name;\r\n\t\t\ts1.results[0].PHONE_NO = this.obj_personnel.RELATIVE.emergency_contact.model.phone_no;\r\n\t\t\ts1.results[0].RELATIVE_CD = this.obj_personnel.RELATIVE.emergency_contact.model.relative_cd;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.emergency_contact.model.relative_addr_id != undefined && this.obj_personnel.RELATIVE.emergency_contact.model.relative_addr_id != null && this.obj_personnel.RELATIVE.emergency_contact.model.relative_addr_id>0){\r\n\t\t\t\t\tthis.updateAddress(this.obj_personnel.RELATIVE.emergency_contact.model.relative_addr_id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.saveAddress(relative_id);\r\n\t\t\t\t}\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in updating info.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying emergency contact info.\");\r\n\t\t});\r\n\t}\r\n\r\n\tsaveAddress(relative_id){\r\n\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8,\"hours\"));\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_ADDR_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"RELATIVE_ADDR_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar maxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].RELATIVE_ADDR_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar address_trx = {\r\n\t\t\t\tRELATIVE_ADDR_ID: maxId,\r\n\t\t\t\tRELATIVE_ID: relative_id,\r\n\t\t\t\tCOUNTRY_CD: this.obj_personnel.RELATIVE.emergency_contact.model.country_cd,\r\n\t\t\t\tREGION: this.obj_personnel.RELATIVE.emergency_contact.model.region,\r\n\t\t\t\tSTATE_PROVINCE: this.obj_personnel.RELATIVE.emergency_contact.model.state_province,\r\n\t\t\t\tCITY_TOWN: this.obj_personnel.RELATIVE.emergency_contact.model.city_town,\r\n\t\t\t\tDISTRICT: this.obj_personnel.RELATIVE.emergency_contact.model.district,\r\n\t\t\t\tBARANGAY: this.obj_personnel.RELATIVE.emergency_contact.model.barangay,\r\n\t\t\t\tSUB_VILLAGE: this.obj_personnel.RELATIVE.emergency_contact.model.sub_village,\r\n\t\t\t\tBLOCK_LOT: this.obj_personnel.RELATIVE.emergency_contact.model.block_lot,\r\n\t\t\t\tSTREET_NAME: this.obj_personnel.RELATIVE.emergency_contact.model.street_name,\r\n\t\t\t\tHOUSE_NO: this.obj_personnel.RELATIVE.emergency_contact.model.house_no,\r\n\t\t\t\tBLDG_NAME: this.obj_personnel.RELATIVE.emergency_contact.model.bldg_name,\r\n\t\t\t\tUNIT_NO: this.obj_personnel.RELATIVE.emergency_contact.model.unit_no,\r\n\t\t\t\tZIPCODE: this.obj_personnel.RELATIVE.emergency_contact.model.zipcode,\r\n\t\t\t\tPERMANENT_FL:0,\r\n\t\t\t\tMAILING_FL:0,\r\n\t\t\t\tPRESENT_FL:0,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"RELATIVE_ADDR_TRX\", address_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadEmergencyContacts(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.error(e2, \"Error in saving address.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in quering relative address id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdateAddress(relative_addr_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_ADDR_TRX\")\r\n\t\t\t\t\t.where(\"RELATIVE_ADDR_ID\", \"==\", relative_addr_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].COUNTRY_CD = this.obj_personnel.RELATIVE.emergency_contact.model.country_cd;\r\n\t\t\ts1.results[0].REGION = this.obj_personnel.RELATIVE.emergency_contact.model.region;\r\n\t\t\ts1.results[0].STATE_PROVINCE = this.obj_personnel.RELATIVE.emergency_contact.model.state_province;\r\n\t\t\ts1.results[0].CITY_TOWN = this.obj_personnel.RELATIVE.emergency_contact.model.city_town;\r\n\t\t\ts1.results[0].DISTRICT = this.obj_personnel.RELATIVE.emergency_contact.model.district;\r\n\t\t\ts1.results[0].BARANGAY = this.obj_personnel.RELATIVE.emergency_contact.model.barangay;\r\n\t\t\ts1.results[0].SUB_VILLAGE = this.obj_personnel.RELATIVE.emergency_contact.model.sub_village;\r\n\t\t\ts1.results[0].BLOCK_LOT = this.obj_personnel.RELATIVE.emergency_contact.model.block_lot;\t\t\t\r\n\t\t\ts1.results[0].STREET_NAME = this.obj_personnel.RELATIVE.emergency_contact.model.street_name;\r\n\t\t\ts1.results[0].HOUSE_NO = this.obj_personnel.RELATIVE.emergency_contact.model.house_no;\r\n\t\t\ts1.results[0].BLDG_NAME = this.obj_personnel.RELATIVE.emergency_contact.model.bldg_name;\r\n\t\t\ts1.results[0].UNIT_NO = this.obj_personnel.RELATIVE.emergency_contact.model.unit_no;\r\n\t\t\ts1.results[0].ZIPCODE = this.obj_personnel.RELATIVE.emergency_contact.model.zipcode;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\tthis.loadEmergencyContacts(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.error(e2, \"Error in updating address.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e2)=>{\t\t\t\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e2, \"Error in querying address.\");\r\n\t\t});\r\n\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class relative_parent{\r\n\tobj_personnel = null;\r\n\talreadyLoaded = false;\r\n\tstatus=[\"Dependent\", \"Deceased\"];\r\n\tselectedStatus = null;\r\n\tlblCreatedBy = null;\r\n\tlblUpdatedBy = null;\r\n\r\n\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num == 1){\r\n\t\t\t\tif(!this.alreadyLoaded){\r\n\t\t\t\t\tthis.alreadyLoaded=false; //set to false to always load this tab.\r\n\t\t\t\t\t$(\"#fBirthDate\").datepicker();\r\n\t\t\t\t\t$(\"#fDeceasedDate\").datepicker();\r\n\t\t\t\t\t$(\"#mBirthDate\").datepicker();\r\n\t\t\t\t\t$(\"#mDeceasedDate\").datepicker();\r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.info(\"\", \"Loading parents data...\");\r\n\t\t\t\t\tthis.loadParent(global_indiv_id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num == 0){\r\n\t\t\t\tthis.loadParent(global_indiv_id);\t\t\t\t\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.push(()=>{\r\n\t\t\tthis.obj_personnel.RELATIVE.parents.father={};\r\n\t\t\tthis.obj_personnel.RELATIVE.parents.mother={};\r\n\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t});\r\n\r\n\r\n\r\n\r\n\t}\r\n\r\n\tloadParent(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar tmpLog = [];\r\n\t\tvar pred1 = breeze.Predicate.create(\"GLOBAL_INDIV_ID\", \"==\", global_indiv_id);\t\t\r\n\t\tvar pred2 = breeze.Predicate.create(\"RELATIVE_CD\", \"==\", \"FATHER\");\r\n\t\tvar pred3 = breeze.Predicate.create(\"RELATIVE_CD\", \"==\", \"MOTHER\");\r\n\t\tvar pred4 = breeze.Predicate.create(\"IN_CASE_OF_EMERGENCY_FL\", \"!=\", \"1\");\r\n\t\tvar _pred1 = breeze.Predicate.or([pred2, pred3]);\r\n\t\tvar finalPred = breeze.Predicate.and([pred1, _pred1, pred4]);\t\t\r\n\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(finalPred);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\t\r\n\t\t\t_.each(s1.results, (result)=>{\r\n\t\t\t\tvar birthDt = moment.utc(result.BIRTH_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\tif(moment(result.DECEASED_DT).isValid()){\r\n\t\t\t\t\tvar deceasedDt = moment.utc(result.DECEASED_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\tif(deceasedDt == \"01/01/0001\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdeceasedDt = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(result.RELATIVE_CD == \"FATHER\"){\r\n\t\t\t\t\tvar father={\r\n\t\t\t\t\t\trelative_id: result.RELATIVE_ID,\r\n\t\t\t\t\t\tglobal_indiv_id: result.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\tgiven_name: result.GIVEN_NAME,\r\n\t\t\t\t\t\tmiddle_name: result.MIDDLE_NAME,\r\n\t\t\t\t\t\tlast_name: result.LAST_NAME,\r\n\t\t\t\t\t\tbirth_dt: birthDt,\r\n\t\t\t\t\t\tphone_no: result.PHONE_NO,\r\n\t\t\t\t\t\toccupation: result.OCCUPATION,\r\n\t\t\t\t\t\temployer: result.EMPLOYER,\r\n\t\t\t\t\t\tstatus: result.DEPENDENT_FL,\r\n\t\t\t\t\t\tdependent_fl: result.DEPENDENT_FL,\r\n\t\t\t\t\t\tdeceased_dt: deceasedDt,\r\n\t\t\t\t\t\tin_case_of_emergency_fl: result.IN_CASE_OF_EMERGENCY_FL,\r\n\t\t\t\t\t\trelative_cd: result.RELATIVE_CD\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif(father.dependent_fl == 0){\r\n\t\t\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.status = \"Dependent\";\r\n\t\t\t\t\t\t$(\"#fstatus_dependent\").prop(\"checked\", true);\r\n\t\t\t\t\t\t$(\"#fstatus_deceased\").prop(\"checked\", false);\r\n\t\t\t\t\t}else if(father.dependent_fl == 1){\r\n\t\t\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.status = \"Deceased\";\r\n\t\t\t\t\t\t$(\"#fstatus_dependent\").prop(\"checked\", false);\r\n\t\t\t\t\t\t$(\"#fstatus_deceased\").prop(\"checked\", true);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.obj_personnel.RELATIVE.parents.father = father;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif(result.RELATIVE_CD == \"MOTHER\"){\r\n\t\t\t\t\tvar mother={\r\n\t\t\t\t\t\trelative_id: result.RELATIVE_ID,\r\n\t\t\t\t\t\tglobal_indiv_id: result.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\tgiven_name: result.GIVEN_NAME,\r\n\t\t\t\t\t\tmiddle_name: result.MIDDLE_NAME,\r\n\t\t\t\t\t\tlast_name: result.LAST_NAME,\r\n\t\t\t\t\t\tbirth_dt: birthDt,\r\n\t\t\t\t\t\tphone_no: result.PHONE_NO,\r\n\t\t\t\t\t\toccupation: result.OCCUPATION,\r\n\t\t\t\t\t\temployer: result.EMPLOYER,\r\n\t\t\t\t\t\tstatus: result.DEPENDENT_FL==0?\"Dependent\": \"Deceased\",\r\n\t\t\t\t\t\tdependent_fl: result.DEPENDENT_FL,\r\n\t\t\t\t\t\tdeceased_dt: deceasedDt,\r\n\t\t\t\t\t\tin_case_of_emergency_fl: result.IN_CASE_OF_EMERGENCY_FL,\r\n\t\t\t\t\t\trelative_cd: result.RELATIVE_CD\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother = mother;\r\n\t\t\t\t\t// console.log(mother.dependent_fl);\r\n\t\t\t\t\tif(mother.dependent_fl == 0){\r\n\t\t\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.status = \"Dependent\";\r\n\t\t\t\t\t\t$(\"#mstatus_dependent\").prop(\"checked\", true);\r\n\t\t\t\t\t\t$(\"#mstatus_deceased\").prop(\"checked\", false);\r\n\t\t\t\t\t}else if(mother.dependent_fl == 1){\r\n\t\t\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.status = \"Deceased\";\r\n\t\t\t\t\t\t$(\"#mstatus_dependent\").prop(\"checked\", false);\r\n\t\t\t\t\t\t$(\"#mstatus_deceased\").prop(\"checked\", true);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$(\"#mstatus_dependent\").prop(\"checked\", false);\r\n\t\t\t\t\t\t$(\"#mstatus_deceased\").prop(\"checked\", false);\r\n\t\t\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.status = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.loadParentAddress(result.RELATIVE_ID, (result.RELATIVE_CD==\"MOTHER\"?true:false));\r\n\r\n\t\t\t\tif(result.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: result.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(result.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(result.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: result.LAST_UPDATED_BY,\t\t\t\t\t\t\r\n\t\t\t\t\t\tdate: new Date(result.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\ttmpLog.sort(this.OrderByDate);\r\n\t\t\tvar LastIndex = tmpLog.length-1;\r\n\t\t\tif(tmpLog.length>0){\r\n\r\n\t\t\t\tthis.lblCreatedBy = tmpLog[0].user + ' ' + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpLog[LastIndex].user + ' ' + moment.utc(tmpLog[LastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Relative info has been loaded...\");\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in loading parents data.\");\r\n\t\t});\r\n\t\t// var pred1 = breeze.Predicate.create(\"GLOBAL_INDIV_ID\", \"==\", global_indiv_id);\r\n\t\t// var pred2 = breeze.Predicate.create(\"\");\r\n\t}\r\n\r\n\tloadParentAddress(relative_id, isMother){\r\n\t\t// console.log(relative_id, isMother);\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_ADDR_TRX\")\r\n\t\t\t\t\t.where(\"RELATIVE_ID\",\"==\",relative_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tif(s1.results.length==0)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(isMother){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.unit_no = s1.results[0].UNIT_NO;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.house_no = s1.results[0].HOUSE_NO;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.block_lot = s1.results[0].BLOCK_LOT;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.bldg_name = s1.results[0].BLDG_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.street_name = s1.results[0].STREET_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.sub_village = s1.results[0].SUB_VILLAGE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.barangay = s1.results[0].BARANGAY;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.district = s1.results[0].DISTRICT;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.city_town = s1.results[0].CITY_TOWN;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.state_province = s1.results[0].STATE_PROVINCE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.region = s1.results[0].REGION;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.zipcode = s1.results[0].ZIPCODE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.country_cd = s1.results[0].COUNTRY_CD;\r\n\t\t\t}else{\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.unit_no = s1.results[0].UNIT_NO;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.house_no = s1.results[0].HOUSE_NO;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.block_lot = s1.results[0].BLOCK_LOT;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.bldg_name = s1.results[0].BLDG_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.street_name = s1.results[0].STREET_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.sub_village = s1.results[0].SUB_VILLAGE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.barangay = s1.results[0].BARANGAY;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.district = s1.results[0].DISTRICT;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.city_town = s1.results[0].CITY_TOWN;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.state_province = s1.results[0].STATE_PROVINCE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.region = s1.results[0].REGION;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.zipcode = s1.results[0].ZIPCODE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.country_cd = s1.results[0].COUNTRY_CD;\r\n\t\t\t}\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in parent's address.\");\r\n\t\t});\r\n\t}\r\n\r\n\tOrderByDate(a, b){\t\t\r\n\t\tif(a.date > b.date)\r\n\t\t\treturn 1;\r\n\t\tif(a.date < b.date)\r\n\t\t\treturn -1;\r\n\t\treturn 0;\t\r\n\t}\r\n\r\n\tcheckChange(isMother, status){\r\n\t\tif(isMother){\r\n\r\n\t\t\t// console.log(this.obj_personnel.RELATIVE.parents.mother.status);\t\r\n\r\n\t\t\tif(status==\"Dependent\"){\r\n\t\t\t\t$(\"#mstatus_deceased\").prop(\"checked\", false);\r\n\t\t\t}else if(status = \"Deceased\"){\r\n\t\t\t\t$(\"#mstatus_dependent\").prop(\"checked\", false);\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tvar isChecked_dependent = $('#mstatus_dependent').is(\":checked\");\r\n\t\t\tvar isChecked_deceased = $(\"#mstatus_deceased\").is(\":checked\");\r\n\t\t\tif(isChecked_dependent){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.status = \"Dependent\";\t\t\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.deceased_dt = \"\";\r\n\t\t\t\t$(\"#mDeceasedDate\").val(\"\");\r\n\t\t\t}else if(isChecked_deceased){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.status = \"Deceased\";\r\n\t\t\t}else if(isChecked_dependent == false && isChecked_deceased == false){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.status = \"\";\t\t\t\t\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.deceased_dt = \"\";\r\n\t\t\t\t$(\"#mDeceasedDate\").val(\"\");\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\r\n\t\t\tif(status==\"Dependent\"){\r\n\t\t\t\t$(\"#fstatus_deceased\").prop(\"checked\", false);\r\n\t\t\t}else if(status = \"Deceased\"){\r\n\t\t\t\t$(\"#fstatus_dependent\").prop(\"checked\", false);\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tvar isChecked_dependent = $('#fstatus_dependent').is(\":checked\");\r\n\t\t\tvar isChecked_deceased = $(\"#fstatus_deceased\").is(\":checked\");\r\n\t\t\tif(isChecked_dependent){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.status = \"Dependent\";\t\t\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.deceased_dt = \"\";\r\n\t\t\t\t$(\"#fDeceasedDate\").val(\"\");\r\n\t\t\t}else if(isChecked_deceased){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.status = \"Deceased\";\r\n\t\t\t}else if(isChecked_dependent == false && isChecked_deceased == false){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.status = \"\";\t\t\t\t\r\n\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.deceased_dt = \"\";\r\n\t\t\t\t$(\"#fDeceasedDate\").val(\"\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdd_provinceChanged(isMother){\r\n\t\tvar prov = null;\r\n\t\tif(isMother){\r\n\t\t\tprov = this.obj_personnel.RELATIVE.parents.mother.state_province;\r\n\t\t}else{\r\n\t\t\tprov = this.obj_personnel.RELATIVE.parents.father.state_province;\r\n\t\t}\r\n\t\tif(prov != undefined && prov != null && prov.length!=0){\r\n\t\t\tvar selectedProv = this.obj_personnel.PROVINCE.find((p)=>{\r\n\t\t\t\tif(p.value == prov){\r\n\t\t\t\t\treturn p;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(selectedProv != null){\r\n\t\t\t\tif(isMother){\r\n\t\t\t\t\tthis.obj_personnel.RELATIVE.parents.mother.region = selectedProv.group;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.RELATIVE.parents.father.region = selectedProv.group;\r\n\t\t\t\t}\r\n\t\t\t\tthis.dd_regionChanged(isMother);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdd_regionChanged(isMother){\r\n\t\tvar reg = null;\r\n\t\tif(isMother){\r\n\t\t\treg = this.obj_personnel.RELATIVE.parents.mother.region;\r\n\t\t}else{\r\n\t\t\treg = this.obj_personnel.RELATIVE.parents.father.region;\r\n\t\t}\r\n\t\tif(reg != undefined && reg!=null && reg.length!=0)\r\n\t\t{\r\n\t\t\t//alert(this.obj_personnel.CONTACT.modelAddress.region);\r\n\t\t\tvar selectedRegion = this.obj_personnel.REGION.find((r)=>{\r\n\t\t\t\tif(r.value == reg)\r\n\t\t\t\t\treturn r;\r\n\t\t\t});\r\n\r\n\t\t\tif(selectedRegion != null)\r\n\t\t\t{\r\n\t\t\t\tif(isMother){\r\n\t\t\t\t\treg = this.obj_personnel.RELATIVE.parents.mother.country_cd = selectedRegion.group;\r\n\t\t\t\t}else{\r\n\t\t\t\t\treg = this.obj_personnel.RELATIVE.parents.father.country_cd = selectedRegion.group;\r\n\t\t\t\t}\r\n\t\t\t\t// this.obj_personnel.CONTACT.modelAddress.country_cd = selectedRegion.group;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(){\r\n\r\n\t\tvar strValidation = \"\";\r\n\r\n\t\tthis.obj_personnel.RELATIVE.parents.mother.birth_dt = $(\"#mBirthDate\").val();\r\n\t\tthis.obj_personnel.RELATIVE.parents.mother.deceased_dt = $(\"#mDeceasedDate\").val();\r\n\t\tswitch(this.obj_personnel.RELATIVE.parents.mother.status){\r\n\t\t\tcase \"Dependent\": this.obj_personnel.RELATIVE.parents.mother.dependent_fl = 0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Deceased\": this.obj_personnel.RELATIVE.parents.mother.dependent_fl = 1;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: this.obj_personnel.RELATIVE.parents.mother.dependent_fl = null;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.obj_personnel.RELATIVE.parents.father.birth_dt = $(\"#fBirthDate\").val();\r\n\t\tthis.obj_personnel.RELATIVE.parents.father.deceased_dt = $(\"#fDeceasedDate\").val();\r\n\t\tswitch(this.obj_personnel.RELATIVE.parents.father.status){\r\n\t\t\tcase \"Dependent\": this.obj_personnel.RELATIVE.parents.father.dependent_fl = 0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Deceased\": this.obj_personnel.RELATIVE.parents.father.dependent_fl = 1;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: this.obj_personnel.RELATIVE.parents.father.dependent_fl = null;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.parents.mother.relative_id != undefined && this.obj_personnel.RELATIVE.parents.mother.relative_id.toString().length>0){\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.last_name == null || this.obj_personnel.RELATIVE.parents.mother.last_name.length==0){\r\n\t\t\t\tstrValidation+=\"[Mother] No Last Name specified.<br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.given_name == null || this.obj_personnel.RELATIVE.parents.mother.given_name.length==0){\r\n\t\t\t\tstrValidation+=\"[Mother] No Given Name specified.<br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.birth_dt.length>0){\r\n\t\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.parents.mother.birth_dt)).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid birth date.<br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.parents.mother.birth_dt);\r\n\t\t\t\t\tvar d2 = new Date();\r\n\t\t\t\t\tif(d1>d2){\r\n\t\t\t\t\t\tstrValidation+=\"[Mother] birth date cannot be greater than date today.<br/>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+=\"[Mother] No Birth date specified. <br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.dependent_fl == 1){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.deceased_dt.length>0){\r\n\t\t\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.parents.mother.deceased_dt)).isValid()){\r\n\t\t\t\t\t\tstrValidation+=\"[Mother] Invalid deceased date. <br/>\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.parents.mother.deceased_dt);\r\n\t\t\t\t\t\tvar d2 = new Date();\r\n\t\t\t\t\t\tif(d1>d2){\r\n\t\t\t\t\t\t\tstrValidation += \"[Mother] deceased date cannot be greater than date today.<br/>\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// else{\r\n\t\t\t\t// \tstrValidation+=\"[Mother] No deceased date specified.<br/>\";\r\n\t\t\t\t// }\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.country_cd == undefined || this.obj_personnel.RELATIVE.parents.mother.country_cd.length==0){\r\n\t\t\t\tstrValidation+=\"[Mother] No country specified.<br/>\";\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.last_name != null && this.obj_personnel.RELATIVE.parents.mother.last_name.length>0){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.given_name == null || this.obj_personnel.RELATIVE.parents.mother.given_name.length==0){\r\n\t\t\t\t\tstrValidation+=\"[Mother] No given name specified.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.given_name != null && this.obj_personnel.RELATIVE.parents.mother.given_name.length>0){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.last_name == null || this.obj_personnel.RELATIVE.parents.mother.last_name.length==0){\r\n\t\t\t\t\tstrValidation+=\"[Mother] No last name specified.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.last_name != null && this.obj_personnel.RELATIVE.parents.mother.last_name.length>0){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.given_name != null && this.obj_personnel.RELATIVE.parents.mother.given_name.length>0){\r\n\r\n\t\t\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.country_cd.length==0){\r\n\t\t\t\t\t\tstrValidation+=\"[Mother] No country specified.<br/>\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.dependent_fl==1){\r\n\t\t\t\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.deceased_dt.length>0){\r\n\t\t\t\t\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.parents.mother.deceased_dt)).isValid()){\r\n\t\t\t\t\t\t\t\tstrValidation+=\"[Mother] Invalid deceased date.<br/>\";\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.parents.mother.deceased_dt);\r\n\t\t\t\t\t\t\t\tvar d2 = new Date();\r\n\t\t\t\t\t\t\t\tif(d1>d2){\r\n\t\t\t\t\t\t\t\t\tstrValidation += \"[Mother] deceased date cannot be greater than date today.<br/>\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// else{\r\n\t\t\t\t\t\t// \tstrValidation+=\"[Mother] No deceased date specified.<br/>\";\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t}else if(this.obj_personnel.RELATIVE.parents.mother.dependent_fl == -1){\r\n\t\t\t\t\t\tstrValidation+=\"[Mother] No status specified.<br/>\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.parents.father.relative_id != undefined && this.obj_personnel.RELATIVE.parents.father.relative_id.toString().length>0){\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.father.last_name == null || this.obj_personnel.RELATIVE.parents.father.last_name.length==0){\r\n\t\t\t\tstrValidation+=\"[Father] No Last Name specified.<br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.father.given_name == null || this.obj_personnel.RELATIVE.parents.father.given_name.length==0){\r\n\t\t\t\tstrValidation+=\"[Father] No Given Name specified.<br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.father.birth_dt.length>0){\r\n\t\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.parents.father.birth_dt)).isValid()){\r\n\t\t\t\t\tstrValidation+=\"[Father] Invalid birth date.<br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.parents.father.birth_dt);\r\n\t\t\t\t\tvar d2 = new Date();\r\n\t\t\t\t\tif(d1>d2){\r\n\t\t\t\t\t\tstrValidation+=\"[Father] Birth date cannot be greater than date today.<br/>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+=\"[Father] No Birth date specified. <br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.father.dependent_fl == 1){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.father.deceased_dt.length>0){\r\n\t\t\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.parents.father.deceased_dt)).isValid()){\r\n\t\t\t\t\t\tstrValidation+=\"[Father] Invalid deceased date. <br/>\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.parents.father.deceased_dt);\r\n\t\t\t\t\t\tvar d2 = new Date();\r\n\t\t\t\t\t\tif(d1>d2){\r\n\t\t\t\t\t\t\tstrValidation+=\"[Father] Deceased date cannot be greater than date today.\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// else{\r\n\t\t\t\t// \tstrValidation+=\"[Father] No deceased date specified.<br/>\";\r\n\t\t\t\t// }\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.father.country_cd.length==0){\r\n\t\t\t\tstrValidation+=\"[Father] No country specified.<br/>\";\r\n\t\t\t}\r\n\t\t}else{\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.father.last_name != null && this.obj_personnel.RELATIVE.parents.father.last_name.length>0){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.father.given_name == null || this.obj_personnel.RELATIVE.parents.father.given_name.length==0){\r\n\t\t\t\t\tstrValidation+=\"[Father] No given name specified.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.father.given_name != null && this.obj_personnel.RELATIVE.parents.father.given_name.length>0){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.father.last_name == null || this.obj_personnel.RELATIVE.parents.father.last_name.length==0){\r\n\t\t\t\t\tstrValidation+=\"[Father] No last name specified.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.father.last_name != null && this.obj_personnel.RELATIVE.parents.father.last_name.length>0){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.father.given_name != null && this.obj_personnel.RELATIVE.parents.father.given_name.length>0){\r\n\r\n\t\t\t\t\tif(this.obj_personnel.RELATIVE.parents.father.country_cd.length==0){\r\n\t\t\t\t\t\tstrValidation+=\"[Father] No country specified.<br/>\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(this.obj_personnel.RELATIVE.parents.father.dependent_fl==1){\r\n\t\t\t\t\t\tif(this.obj_personnel.RELATIVE.parents.father.deceased_dt.length>0){\r\n\t\t\t\t\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.parents.father.deceased_dt)).isValid()){\r\n\t\t\t\t\t\t\t\tstrValidation+=\"[Father] Invalid deceased date.<br/>\";\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.parents.father.deceased_dt);\r\n\t\t\t\t\t\t\t\tvar d2 = new Date();\r\n\t\t\t\t\t\t\t\tif(d1>d2){\r\n\t\t\t\t\t\t\t\t\tstrValidation+=\"[Father] Deceased date cannot be greater than date today.<br/>\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// else{\r\n\t\t\t\t\t\t// \tstrValidation+=\"[Father] No deceased date specified.<br/>\";\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t}else if(this.obj_personnel.RELATIVE.parents.father.dependent_fl == -1){\r\n\t\t\t\t\t\tstrValidation+=\"[Father] No status specified.<br/>\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.relative_id > 0){\r\n\t\t\t\tthis.updateRelative(this.obj_personnel.RELATIVE.parents.mother.relative_id, true);\r\n\t\t\t}else if(this.obj_personnel.RELATIVE.parents.mother.last_name != null && this.obj_personnel.RELATIVE.parents.mother.last_name.length>0){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.given_name != null && this.obj_personnel.RELATIVE.parents.mother.given_name.length>0){\r\n\r\n\t\t\t\t\t// this.obj_personnel.RELATIVE.parents.mother.last_name = this.obj_personnel.RELATIVE.parents.mother.last_name.toUpperCase();\r\n\t\t\t\t\t// this.obj_personnel.RELATIVE.parents.mother.given_name = this.obj_personnel.RELATIVE.parents.mother.given_name.toUpperCase();\r\n\t\t\t\t\t// this.obj_personnel.RELATIVE.parents.mother.middle_name = this.obj_personnel.RELATIVE.parents.mother.middle_name.toUpperCase();\r\n\t\t\t\t\tthis.saveRelative(this.obj_personnel.global_indiv_id, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.RELATIVE.parents.father.relative_id > 0){\r\n\t\t\t\tthis.updateRelative(this.obj_personnel.RELATIVE.parents.father.relative_id, false);\r\n\t\t\t}else if(this.obj_personnel.RELATIVE.parents.father.last_name != null && this.obj_personnel.RELATIVE.parents.father.last_name.length>0){\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.father.given_name != null && this.obj_personnel.RELATIVE.parents.father.given_name.length>0){\r\n\t\t\t\t\tthis.saveRelative(this.obj_personnel.global_indiv_id, false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tconvertToGMT8(date){\r\n\t\tif(date==undefined || date == null || date.length==0)\r\n\t\t\treturn null;\r\n\t\tvar tempDt = moment(date).add(8, 'hours');\r\n\t\treturn new Date(tempDt);\r\n\t}\r\n\r\n\tsaveRelative(global_indiv_id, isMother){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = moment(new Date()).add(8, \"hours\");\r\n\t\tdateToday = new Date(dateToday);\r\n\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"RELATIVE_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar MaxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tMaxId = s1.results[0].RELATIVE_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar entity = null;\r\n\t\t\tif(isMother){\r\n\t\t\t\tvar birthdate = this.convertToGMT8(this.obj_personnel.RELATIVE.parents.mother.birth_dt);\r\n\t\t\t\tvar deceased_dt = this.obj_personnel.RELATIVE.parents.mother.deceased_dt;\r\n\t\t\t\tvar mother = {\r\n\t\t\t\t\tRELATIVE_ID: MaxId,\r\n\t\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\t\tLAST_NAME: this.obj_personnel.RELATIVE.parents.mother.last_name,\r\n\t\t\t\t\tGIVEN_NAME: this.obj_personnel.RELATIVE.parents.mother.given_name,\r\n\t\t\t\t\tMIDDLE_NAME: this.obj_personnel.RELATIVE.parents.mother.middle_name,\r\n\t\t\t\t\tBIRTH_DT: birthdate,\r\n\t\t\t\t\tPHONE_NO: this.obj_personnel.RELATIVE.parents.mother.phone_no,\r\n\t\t\t\t\tOCCUPATION: this.obj_personnel.RELATIVE.parents.mother.occupation,\r\n\t\t\t\t\tEMPLOYER: this.obj_personnel.RELATIVE.parents.mother.employer,\r\n\t\t\t\t\tDEPENDENT_FL: this.obj_personnel.RELATIVE.parents.mother.dependent_fl,\r\n\t\t\t\t\tDECEASED_DT: deceased_dt,\r\n\t\t\t\t\tIN_CASE_OF_EMERGENCY_FL: 0,\r\n\t\t\t\t\tRELATIVE_CD: \"MOTHER\",\r\n\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t};\r\n\t\t\t\tentity = EntityManager().createEntity(\"RELATIVE_TRX\", mother);\r\n\t\t\t}else{\r\n\t\t\t\tvar birthdate = this.convertToGMT8(this.obj_personnel.RELATIVE.parents.father.birth_dt);\r\n\t\t\t\tvar deceased_dt = this.convertToGMT8(this.obj_personnel.RELATIVE.parents.father.deceased_dt);\r\n\t\t\t\tvar father = {\r\n\t\t\t\t\tRELATIVE_ID: MaxId,\r\n\t\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\t\tLAST_NAME: this.obj_personnel.RELATIVE.parents.father.last_name,\r\n\t\t\t\t\tGIVEN_NAME: this.obj_personnel.RELATIVE.parents.father.given_name,\r\n\t\t\t\t\tMIDDLE_NAME: this.obj_personnel.RELATIVE.parents.father.middle_name,\r\n\t\t\t\t\tBIRTH_DT: birthdate,\r\n\t\t\t\t\tPHONE_NO: this.obj_personnel.RELATIVE.parents.father.phone_no,\r\n\t\t\t\t\tOCCUPATION: this.obj_personnel.RELATIVE.parents.father.occupation,\r\n\t\t\t\t\tEMPLOYER: this.obj_personnel.RELATIVE.parents.father.employer,\r\n\t\t\t\t\tDEPENDENT_FL: this.obj_personnel.RELATIVE.parents.father.dependent_fl,\r\n\t\t\t\t\tDECEASED_DT: deceased_dt,\r\n\t\t\t\t\tIN_CASE_OF_EMERGENCY_FL: 0,\r\n\t\t\t\t\tRELATIVE_CD: \"FATHER\",\r\n\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t};\r\n\t\t\t\tentity = EntityManager().createEntity(\"RELATIVE_TRX\", father);\r\n\t\t\t}\r\n\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\tquery = EntityQuery().from(\"RELATIVE_ADDR_TRX\")\r\n\t\t\t\t\t\t.orderByDesc(\"RELATIVE_ADDR_ID\").take(1);\r\n\t\t\t\tEntityManager().executeQuery(query).then((s3)=>{\r\n\t\t\t\t\tvar MaxAddrId = 1;\r\n\t\t\t\t\tif(s3.results.length>0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tMaxAddrId = s3.results[0].RELATIVE_ADDR_ID+1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar entity2 = null;\r\n\t\t\t\t\tif(isMother){\r\n\t\t\t\t\t\tvar addr_trx = {\r\n\t\t\t\t\t\t\tRELATIVE_ID: MaxId,\r\n\t\t\t\t\t\t\tRELATIVE_ADDR_ID: MaxAddrId,\r\n\t\t\t\t\t\t\tCOUNTRY_CD: this.obj_personnel.RELATIVE.parents.mother.country_cd,\r\n\t\t\t\t\t\t\tREGION: this.obj_personnel.RELATIVE.parents.mother.region,\r\n\t\t\t\t\t\t\tSTATE_PROVINCE: this.obj_personnel.RELATIVE.parents.mother.state_province,\r\n\t\t\t\t\t\t\tCITY_TOWN: this.obj_personnel.RELATIVE.parents.mother.city_town,\r\n\t\t\t\t\t\t\tDISTRICT: this.obj_personnel.RELATIVE.parents.mother.district,\r\n\t\t\t\t\t\t\tBARANGAY: this.obj_personnel.RELATIVE.parents.mother.barangay,\r\n\t\t\t\t\t\t\tSUB_VILLAGE: this.obj_personnel.RELATIVE.parents.mother.sub_village,\r\n\t\t\t\t\t\t\tPHASE: this.obj_personnel.RELATIVE.parents.mother.phase,\r\n\t\t\t\t\t\t\tBLOCK_LOT: this.obj_personnel.RELATIVE.parents.mother.block_lot,\r\n\t\t\t\t\t\t\tSTREET_NAME: this.obj_personnel.RELATIVE.parents.mother.street_name,\r\n\t\t\t\t\t\t\tHOUSE_NO: this.obj_personnel.RELATIVE.parents.mother.house_no,\r\n\t\t\t\t\t\t\tBLDG_NAME: this.obj_personnel.RELATIVE.parents.mother.bldg_name,\r\n\t\t\t\t\t\t\tUNIT_NO: this.obj_personnel.RELATIVE.parents.mother.unit_no,\r\n\t\t\t\t\t\t\tZIPCODE: this.obj_personnel.RELATIVE.parents.mother.zipcode,\r\n\t\t\t\t\t\t\t// RESIDENTIAL_TYPE: this.obj_personnel.RELATIVE.parents.mother.residential_type,\r\n\t\t\t\t\t\t\t// HOUSE_OWNERSHIP: this.obj_personnel.RELATIVE.parents.mother.house_ownership,\r\n\t\t\t\t\t\t\tPERMANENT_FL: 0,\r\n\t\t\t\t\t\t\tMAILING_FL: 0,\r\n\t\t\t\t\t\t\tPRESENT_FL: 0,\r\n\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tentity2 = EntityManager().createEntity(\"RELATIVE_ADDR_TRX\", addr_trx);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar addr_trx = {\r\n\t\t\t\t\t\t\tRELATIVE_ID: MaxId,\r\n\t\t\t\t\t\t\tRELATIVE_ADDR_ID: MaxAddrId,\r\n\t\t\t\t\t\t\tCOUNTRY_CD: this.obj_personnel.RELATIVE.parents.father.country_cd,\r\n\t\t\t\t\t\t\tREGION: this.obj_personnel.RELATIVE.parents.father.region,\r\n\t\t\t\t\t\t\tSTATE_PROVINCE: this.obj_personnel.RELATIVE.parents.father.state_province,\r\n\t\t\t\t\t\t\tCITY_TOWN: this.obj_personnel.RELATIVE.parents.father.city_town,\r\n\t\t\t\t\t\t\tDISTRICT: this.obj_personnel.RELATIVE.parents.father.district,\r\n\t\t\t\t\t\t\tBARANGAY: this.obj_personnel.RELATIVE.parents.father.barangay,\r\n\t\t\t\t\t\t\tSUB_VILLAGE: this.obj_personnel.RELATIVE.parents.father.sub_village,\r\n\t\t\t\t\t\t\tPHASE: this.obj_personnel.RELATIVE.parents.father.phase,\r\n\t\t\t\t\t\t\tBLOCK_LOT: this.obj_personnel.RELATIVE.parents.father.block_lot,\r\n\t\t\t\t\t\t\tSTREET_NAME: this.obj_personnel.RELATIVE.parents.father.street_name,\r\n\t\t\t\t\t\t\tHOUSE_NO: this.obj_personnel.RELATIVE.parents.father.house_no,\r\n\t\t\t\t\t\t\tBLDG_NAME: this.obj_personnel.RELATIVE.parents.father.bldg_name,\r\n\t\t\t\t\t\t\tUNIT_NO: this.obj_personnel.RELATIVE.parents.father.unit_no,\r\n\t\t\t\t\t\t\tZIPCODE: this.obj_personnel.RELATIVE.parents.father.zipcode,\r\n\t\t\t\t\t\t\t// RESIDENTIAL_TYPE: this.obj_personnel.RELATIVE.parents.father.residential_type,\r\n\t\t\t\t\t\t\t// HOUSE_OWNERSHIP: this.obj_personnel.RELATIVE.parents.father.house_ownership,\r\n\t\t\t\t\t\t\tPERMANENT_FL: 0,\r\n\t\t\t\t\t\t\tMAILING_FL: 0,\r\n\t\t\t\t\t\t\tPRESENT_FL: 0,\r\n\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tentity2 = EntityManager().createEntity(\"RELATIVE_ADDR_TRX\", addr_trx);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tEntityManager().addEntity(entity2);\r\n\t\t\t\t\tEntityManager().saveChanges().then((s4)=>{\r\n\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\t\t\tthis.loadParent(global_indiv_id);\r\n\t\t\t\t\t}, (e4)=>{\r\n\t\t\t\t\t\tif(entity2 != null){\r\n\t\t\t\t\t\t\tentity2.entityAspect.setDeleted();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\t\ttoastr.error(e4, \"Error in saving relative address.\");\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}, (e3)=>{\r\n\t\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t\ttoastr.error(e3, \"Error in querying relative address id.\");\r\n\t\t\t\t});\r\n\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tif(entity != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.error(e2, \"Error in saving relative info.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying relative id.\");\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tupdateRelative(relative_id, isMother){\r\n\t\t\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(\"RELATIVE_ID\", \"==\", relative_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tif(isMother){\r\n\t\t\t\ts1.results[0].LAST_NAME = this.obj_personnel.RELATIVE.parents.mother.last_name;\r\n\t\t\t\ts1.results[0].GIVEN_NAME = this.obj_personnel.RELATIVE.parents.mother.given_name;\r\n\t\t\t\ts1.results[0].MIDDLE_NAME = this.obj_personnel.RELATIVE.parents.mother.middle_name;\r\n\t\t\t\ts1.results[0].BIRTH_DT = this.convertToGMT8(this.obj_personnel.RELATIVE.parents.mother.birth_dt);\r\n\t\t\t\ts1.results[0].PHONE_NO = this.obj_personnel.RELATIVE.parents.mother.phone_no;\r\n\t\t\t\ts1.results[0].OCCUPATION = this.obj_personnel.RELATIVE.parents.mother.occupation;\r\n\t\t\t\ts1.results[0].EMPLOYER = this.obj_personnel.RELATIVE.parents.mother.employer;\r\n\t\t\t\ts1.results[0].DEPENDENT_FL = this.obj_personnel.RELATIVE.parents.mother.dependent_fl;\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.mother.dependent_fl == 1){\r\n\t\t\t\t\ts1.results[0].DECEASED_DT = this.convertToGMT8(this.obj_personnel.RELATIVE.parents.mother.deceased_dt);\r\n\t\t\t\t}else{\r\n\t\t\t\t\ts1.results[0].DECEASED_DT = null;\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\t}else{\r\n\t\t\t\ts1.results[0].LAST_NAME = this.obj_personnel.RELATIVE.parents.father.last_name;\r\n\t\t\t\ts1.results[0].GIVEN_NAME = this.obj_personnel.RELATIVE.parents.father.given_name;\r\n\t\t\t\ts1.results[0].MIDDLE_NAME = this.obj_personnel.RELATIVE.parents.father.middle_name;\r\n\t\t\t\ts1.results[0].BIRTH_DT = this.convertToGMT8(this.obj_personnel.RELATIVE.parents.father.birth_dt);\r\n\t\t\t\ts1.results[0].PHONE_NO = this.obj_personnel.RELATIVE.parents.father.phone_no;\r\n\t\t\t\ts1.results[0].OCCUPATION = this.obj_personnel.RELATIVE.parents.father.occupation;\r\n\t\t\t\ts1.results[0].EMPLOYER = this.obj_personnel.RELATIVE.parents.father.employer;\r\n\t\t\t\ts1.results[0].DEPENDENT_FL = this.obj_personnel.RELATIVE.parents.father.dependent_fl;\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.parents.father.dependent_fl == 1){\r\n\t\t\t\t\ts1.results[0].DECEASED_DT = this.convertToGMT8(this.obj_personnel.RELATIVE.parents.father.deceased_dt);\r\n\t\t\t\t}else{\r\n\t\t\t\t\ts1.results[0].DECEASED_DT = null;\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\t}\r\n\r\n\t\t\tEntityManager().saveChanges().then((s3)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t}, (e3)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.error(e3, \"Error in updating personnel info.\");\r\n\t\t\t});\r\n\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying mother's info.\");\r\n\t\t});\r\n\r\n\t\tvar query2 = EntityQuery().from(\"RELATIVE_ADDR_TRX\")\r\n\t\t\t\t\t .where(\"RELATIVE_ID\", \"==\", relative_id);\r\n\t\tEntityManager().executeQuery(query2).then((s2)=>{\r\n\r\n\t\t\tif(isMother){\r\n\t\t\t\ts2.results[0].COUNTRY_CD = this.obj_personnel.RELATIVE.parents.mother.country_cd;\r\n\t\t\t\ts2.results[0].REGION = this.obj_personnel.RELATIVE.parents.mother.region;\r\n\t\t\t\ts2.results[0].STATE_PROVINCE = this.obj_personnel.RELATIVE.parents.mother.state_province;\r\n\t\t\t\ts2.results[0].CITY_TOWN = this.obj_personnel.RELATIVE.parents.mother.city_town;\r\n\t\t\t\ts2.results[0].DISTRICT = this.obj_personnel.RELATIVE.parents.mother.district;\r\n\t\t\t\ts2.results[0].BARANGAY = this.obj_personnel.RELATIVE.parents.mother.barangay;\r\n\t\t\t\ts2.results[0].SUB_VILLAGE = this.obj_personnel.RELATIVE.parents.mother.sub_village;\r\n\t\t\t\ts2.results[0].PHASE = this.obj_personnel.RELATIVE.parents.mother.phase;\r\n\t\t\t\ts2.results[0].BLOCK_LOT = this.obj_personnel.RELATIVE.parents.mother.block_lot;\r\n\t\t\t\ts2.results[0].STREET_NAME = this.obj_personnel.RELATIVE.parents.mother.street_name;\r\n\t\t\t\ts2.results[0].HOUSE_NO = this.obj_personnel.RELATIVE.parents.mother.house_no;\r\n\t\t\t\ts2.results[0].BLDG_NAME = this.obj_personnel.RELATIVE.parents.mother.bldg_name;\r\n\t\t\t\ts2.results[0].UNIT_NO = this.obj_personnel.RELATIVE.parents.mother.unit_no;\r\n\t\t\t\ts2.results[0].ZIPCODE = this.obj_personnel.RELATIVE.parents.mother.zipcode;\r\n\t\t\t\ts2.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\ts2.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\t}else{\r\n\t\t\t\ts2.results[0].COUNTRY_CD = this.obj_personnel.RELATIVE.parents.father.country_cd;\r\n\t\t\t\ts2.results[0].REGION = this.obj_personnel.RELATIVE.parents.father.region;\r\n\t\t\t\ts2.results[0].STATE_PROVINCE = this.obj_personnel.RELATIVE.parents.father.state_province;\r\n\t\t\t\ts2.results[0].CITY_TOWN = this.obj_personnel.RELATIVE.parents.father.city_town;\r\n\t\t\t\ts2.results[0].DISTRICT = this.obj_personnel.RELATIVE.parents.father.district;\r\n\t\t\t\ts2.results[0].BARANGAY = this.obj_personnel.RELATIVE.parents.father.barangay;\r\n\t\t\t\ts2.results[0].SUB_VILLAGE = this.obj_personnel.RELATIVE.parents.father.sub_village;\r\n\t\t\t\ts2.results[0].PHASE = this.obj_personnel.RELATIVE.parents.father.phase;\r\n\t\t\t\ts2.results[0].BLOCK_LOT = this.obj_personnel.RELATIVE.parents.father.block_lot;\r\n\t\t\t\ts2.results[0].STREET_NAME = this.obj_personnel.RELATIVE.parents.father.street_name;\r\n\t\t\t\ts2.results[0].HOUSE_NO = this.obj_personnel.RELATIVE.parents.father.house_no;\r\n\t\t\t\ts2.results[0].BLDG_NAME = this.obj_personnel.RELATIVE.parents.father.bldg_name;\r\n\t\t\t\ts2.results[0].UNIT_NO = this.obj_personnel.RELATIVE.parents.father.unit_no;\r\n\t\t\t\ts2.results[0].ZIPCODE = this.obj_personnel.RELATIVE.parents.father.zipcode;\r\n\t\t\t\ts2.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\ts2.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\t}\r\n\r\n\t\t\tEntityManager().saveChanges().then((s4)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\t// toastr.success(\"\", \"ParentAddress\");\r\n\t\t\t}, (e4)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\ttoastr.error(e4, \"Error in updating personnel address.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e2)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e2, \"Error in querying Mother's info.\");\r\n\t\t})\r\n\t}\r\n\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\nimport {OrderByDate} from '../../helpers';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class relative_siblings{\r\n\r\n\tobj_personnel = null;\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\t_disableForm=true;\r\n\t_disableTable=false;\r\n\t_disableDeceasedDt=true;\r\n\tformStatus=\"\";\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.push((tab_num, global_indiv_id)=>{\r\n\t\t\tif(tab_num==1){\r\n\t\t\t\t$(\"#birth_dt\").datepicker();\r\n\t\t\t\t$(\"#deceased_dt\").datepicker();\r\n\t\t\t\tthis.loadSiblings(global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}\r\n\t\t});\r\n \r\n\t}\r\n\r\n\tloadSiblings(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar pred1 = breeze.Predicate.create(\"GLOBAL_INDIV_ID\", \"==\", global_indiv_id);\r\n\t\tvar pred2 = breeze.Predicate.create(\"IN_CASE_OF_EMERGENCY_FL\", \"!=\", \"1\");\r\n\t\tvar orPred = [];\r\n\t\t_.each(this.obj_personnel.RELATIONSHIP, (relation)=>{\r\n\t\t\tif(relation.group==\"SIBLING\"){\r\n\t\t\t\torPred.push(breeze.Predicate.create(\"RELATIVE_CD\", \"==\", relation.value));\r\n\t\t\t}\r\n\t\t});\r\n\t\tvar _orPred = breeze.Predicate.or(orPred);\r\n\t\tvar finalPred = breeze.Predicate.and([pred1, pred2, _orPred]);\r\n\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(finalPred);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar tmp = [];\r\n\t\t\tvar tmpLog=[];\r\n\t\t\t_.each(s1.results, (r)=>{\r\n\t\t\t\tvar deceased_dt = null;\r\n\t\t\t\tif(moment(r.DECEASED_DT).isValid()){\t\t\t\t\t\r\n\t\t\t\t\tdeceased_dt = moment.utc(r.DECEASED_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\t\tif(deceased_dt == \"01/01/0001\"){\r\n\t\t\t\t\t\tdeceased_dt = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar status = null;\r\n\t\t\t\tswitch(r.DEPENDENT_FL){\r\n\t\t\t\t\tcase \"0\": status = \"Dependent\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"1\": status = \"Deceased\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\trelative_id: r.RELATIVE_ID,\r\n\t\t\t\t\tgiven_name: r.GIVEN_NAME,\r\n\t\t\t\t\tmiddle_name: r.MIDDLE_NAME,\r\n\t\t\t\t\tlast_name: r.LAST_NAME,\r\n\t\t\t\t\tbirth_dt: moment.utc(r.BIRTH_DT).format(\"MM/DD/YYYY\"),\r\n\t\t\t\t\tage: this.computeAge(moment.utc(r.BIRTH_DT).format(\"MM/DD/YYYY\")),\r\n\t\t\t\t\toccupation: r.OCCUPATION,\r\n\t\t\t\t\temployer: r.EMPLOYER,\r\n\t\t\t\t\tdependent_fl: r.DEPENDENT_FL,\r\n\t\t\t\t\tstatus: status,\r\n\t\t\t\t\tdeceased_dt: deceased_dt,\r\n\t\t\t\t\trelative_cd: r.RELATIVE_CD\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(r.CREATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.CREATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.CREATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(r.LAST_UPDATED_BY != null){\r\n\t\t\t\t\ttmpLog.push({\r\n\t\t\t\t\t\tuser: r.LAST_UPDATED_BY,\r\n\t\t\t\t\t\tdate: new Date(r.LAST_UPDATED_DT)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.RELATIVE.siblings.list = tmp;\r\n\t\t\ttmpLog.sort(OrderByDate);\r\n\t\t\tvar LastIndex = tmpLog.length-1;\r\n\t\t\tif(tmpLog.length>0){\r\n\t\t\t\tthis.lblCreatedBy = tmpLog[0].user + ' ' + moment.utc(tmpLog[0].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\tif(tmpLog.length>1){\r\n\t\t\t\t\tthis.lblUpdatedBy = tmpLog[LastIndex].user + ' ' + moment.utc(tmpLog[LastIndex].date).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.lblCreatedBy = \"\";\r\n\t\t\t\tthis.lblUpdatedBy = \"\";\r\n\t\t\t}\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Relative info has been loaded...\");\r\n\t\t\tsettings.isNavigating = false;\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying siblings list.\");\r\n\t\t});\r\n\t}\r\n\r\n\tcheckChange(bit){\r\n \r\n\t\tswitch(bit){\r\n\t\t\tcase 0:\r\n\t\t\t\t$(\"#status_deceased\").prop(\"checked\", false);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\t$(\"#status_dependent\").prop(\"checked\", false);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tvar isChecked_dependent = $('#status_dependent').is(\":checked\");\r\n\t\tvar isChecked_deceased = $(\"#status_deceased\").is(\":checked\");\r\n\t\tif(isChecked_dependent){\r\n\t\t\tthis.obj_personnel.RELATIVE.siblings.model.dependent_fl = \"0\";\r\n\t\t\tthis.obj_personnel.RELATIVE.siblings.model.deceased_dt = null;\r\n\t\t\t$(\"#deceased_dt\").val(\"\");\r\n\t\t\tthis._disableDeceasedDt = true;\r\n\t\t}else if(isChecked_deceased){\r\n\t\t\tthis.obj_personnel.RELATIVE.siblings.model.dependent_fl = \"1\";\r\n\t\t\tthis._disableDeceasedDt = false;\r\n\t\t}else if(isChecked_dependent == false && isChecked_deceased == false){\r\n\t\t\tthis._disableDeceasedDt = true;\r\n\t\t\tthis.obj_personnel.RELATIVE.siblings.model.dependent_fl = null;\t\t\t\t\r\n\t\t\tthis.obj_personnel.RELATIVE.siblings.model.deceased_dt = null;\r\n\t\t\t$(\"#deceased_dt\").val(\"\");\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tcomputeAge(dateString){\r\n\t\tif(dateString == null || dateString.length==0)\r\n\t\t\treturn;\r\n\t\tvar today = new Date();\r\n\t\tvar birthDate = new Date(dateString);\r\n\t\tvar age = today.getFullYear() - birthDate.getFullYear();\r\n\t\tvar m = today.getMonth() - birthDate.getMonth();\r\n\t\tif (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\r\n\t\t\tage--;\r\n\t\t}\r\n\t\treturn age;\t\r\n\t}\r\n\r\n\tbtnAdd_Siblings(){\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableTable = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis.formStatus = \"ADD\";\r\n\t}\r\n\r\n\tbtnEdit_Siblings(item){\r\n\t\tthis.formStatus=\"EDIT\";\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableTable = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model.relative_id = item.relative_id;\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model.last_name = item.last_name;\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model.given_name = item.given_name;\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model.middle_name = item.middle_name;\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model.birth_dt = item.birth_dt;\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model.age = item.age;\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model.relative_cd = item.relative_cd;\r\n\t\tif(item.dependent_fl != null){\r\n\t\t\tswitch(item.dependent_fl){\r\n\t\t\t\tcase \"0\":\r\n\t\t\t\t\t$(\"#status_dependent\").prop(\"checked\", true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"1\":\r\n\t\t\t\t\t$(\"#status_deceased\").prop(\"checked\", true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tthis.checkChange(this.obj_personnel.RELATIVE.siblings.model.dependent_fl);\r\n\t\t\tthis.obj_personnel.RELATIVE.siblings.model.deceased_dt = item.deceased_dt;\r\n\t\t}\r\n\t}\r\n\r\n\tbtnRemove_Siblings(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the record?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\tsettings.isNavigating = true;\r\n  \t\t\t\t\tvar query = EntityQuery().from('RELATIVE_TRX').where('RELATIVE_ID', '==', item.relative_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The record was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadSiblings(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing address.\");\r\n  \t\t\t\t\t\t\tsettings.isNavigating = false;\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tclearField(){\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableTable = false;\r\n\t\t$(\"#status_deceased\").prop(\"checked\", false);\r\n\t\t$(\"#status_dependent\").prop(\"checked\", false);\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model = {};\t\t\r\n\t\tthis.formStatus = \"\";\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\tvar strValidation = \"\";\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model.birth_dt = $(\"#birth_dt\").val();\r\n\t\tthis.obj_personnel.RELATIVE.siblings.model.deceased_dt = $(\"#deceased_dt\").val();\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.siblings.model.last_name == undefined || this.obj_personnel.RELATIVE.siblings.model.last_name == null || this.obj_personnel.RELATIVE.siblings.model.last_name.length == 0){\r\n\t\t\tstrValidation+=\"No last name specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.siblings.model.given_name == undefined || this.obj_personnel.RELATIVE.siblings.model.given_name == null || this.obj_personnel.RELATIVE.siblings.model.given_name.length == 0){\r\n\t\t\tstrValidation+=\"No given name specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.siblings.model.birth_dt != undefined && this.obj_personnel.RELATIVE.siblings.model.birth_dt != null && this.obj_personnel.RELATIVE.siblings.model.birth_dt.length>0){\r\n\t\t\tif(!moment(this.obj_personnel.RELATIVE.siblings.model.birth_dt).isValid()){\r\n\t\t\t\tstrValidation+=\"Invalid birth date.<br/>\";\r\n\t\t\t}else{\r\n\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.siblings.model.birth_dt);\r\n\t\t\t\tvar d2 = new Date();\r\n\t\t\t\tif(d1>d2){\r\n\t\t\t\t\tstrValidation+=\"Birth date cannot be greater than date today.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tstrValidation+=\"No birth date specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.siblings.model.dependent_fl == \"1\"){\r\n\t\t\tif(this.obj_personnel.RELATIVE.siblings.model.deceased_dt.length>0){\r\n\t\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.siblings.model.deceased_dt)).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid deceased date. <br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.siblings.model.deceased_dt);\r\n\t\t\t\t\tvar d2 = new Date();\r\n\t\t\t\t\tif(d1>d2){\r\n\t\t\t\t\t\tstrValidation+=\"Deceased date cannot be greater than date today.<br/>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// else{\r\n\t\t\t// \tstrValidation+=\"[Mother] No deceased date specified.<br/>\";\r\n\t\t\t// }\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.siblings.model.relative_cd == undefined || this.obj_personnel.RELATIVE.siblings.model.relative_cd == null || this.obj_personnel.RELATIVE.siblings.model.relative_cd.length ==0){\r\n\t\t\tstrValidation+=\"No relationship specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.formStatus==\"ADD\"){\r\n\t\t\t\tthis.save(this.obj_personnel.global_indiv_id);\r\n\t\t\t}else if(this.formStatus==\"EDIT\"){\r\n\t\t\t\tthis.update(this.obj_personnel.RELATIVE.siblings.model.relative_id);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\t\r\n\r\n\tsave(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar birth_dt = new Date(moment(this.obj_personnel.RELATIVE.siblings.model.birth_dt).add(8, \"hours\"));\r\n\t\tvar deceased_dt = null;\r\n\r\n\t\tif(moment(this.obj_personnel.RELATIVE.siblings.model.deceased_dt).isValid()){\r\n\t\t\tdeceased_dt = new Date(moment(this.obj_personnel.RELATIVE.siblings.model.deceased_dt).add(8, \"hours\"));\r\n\t\t}\r\n\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"RELATIVE_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\t\r\n\t\t\tvar MaxId = 1;\r\n\t\t\tif(s1.results.length==1){\r\n\t\t\t\tMaxId = s1.results[0].RELATIVE_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar relative_trx = {\r\n\t\t\t\tRELATIVE_ID: MaxId,\r\n\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\tGIVEN_NAME: this.obj_personnel.RELATIVE.siblings.model.given_name,\r\n\t\t\t\tMIDDLE_NAME: this.obj_personnel.RELATIVE.siblings.model.middle_name,\r\n\t\t\t\tLAST_NAME: this.obj_personnel.RELATIVE.siblings.model.last_name,\r\n\t\t\t\tBIRTH_DT: birth_dt,\r\n\t\t\t\tDEPENDENT_FL: this.obj_personnel.RELATIVE.siblings.model.dependent_fl,\r\n\t\t\t\tDECEASED_DT: deceased_dt,\r\n\t\t\t\tRELATIVE_CD: this.obj_personnel.RELATIVE.siblings.model.relative_cd,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\t\t\t// console.log(relative_trx);\r\n\t\t\t\r\n\t\t\tvar entity = EntityManager().createEntity(\"RELATIVE_TRX\", relative_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadSiblings(global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tsettings.isNavigating = false;\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.error(e2, \"Error in saving siblings info.\");\r\n\t\t\t});\r\n\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(\"\", \"Error in querying relative id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdate(relative_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(\"RELATIVE_ID\", \"==\", relative_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar birth_dt = new Date(moment(this.obj_personnel.RELATIVE.siblings.model.birth_dt).add(8, \"hours\"));\r\n\r\n\t\t\tvar deceased_dt = null;\r\n\t\t\tif(moment(this.obj_personnel.RELATIVE.siblings.model.deceased_dt).isValid()){\r\n\t\t\t\tdeceased_dt = new Date(moment(this.obj_personnel.RELATIVE.siblings.model.deceased_dt).add(8, \"hours\"));\r\n\t\t\t}\r\n\r\n\t\t\ts1.results[0].LAST_NAME = this.obj_personnel.RELATIVE.siblings.model.last_name;\r\n\t\t\ts1.results[0].GIVEN_NAME = this.obj_personnel.RELATIVE.siblings.model.given_name;\r\n\t\t\ts1.results[0].MIDDLE_NAME = this.obj_personnel.RELATIVE.siblings.model.middle_name;\r\n\t\t\ts1.results[0].BIRTH_DT = birth_dt;\r\n\t\t\ts1.results[0].RELATIVE_CD = this.obj_personnel.RELATIVE.siblings.model.relative_cd;\r\n\t\t\ts1.results[0].DEPENDENT_FL = this.obj_personnel.RELATIVE.siblings.model.dependent_fl;\r\n\t\t\ts1.results[0].DECEASED_DT = deceased_dt;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\t\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\tthis.loadSiblings(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearField();\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\ttoastr.error(e2, \"Error in saving changes.\");\r\n\t\t\t});\r\n\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\ttoastr.error(e1, \"Error in querying relative info.\");\r\n\t\t});\r\n\t}\r\n\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport settings from 'settings';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class relative_spouse {\r\n\r\n\tobj_personnel=null;\r\n\tlblCreatedBy=null;\r\n\tlblUpdatedBy=null;\r\n\t_disableDeceasedDt=true;\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.relative_tab_changed.push((tab_num, global_indiv_id)=>{\t\t\t\r\n\t\t\tif(tab_num == 2){\r\n\t\t\t\t$(\"#spouse_birth_dt\").datepicker();\r\n\t\t\t\t$(\"#spouse_deceased_dt\").datepicker();\r\n\t\t\t\tthis.loadSpouse(global_indiv_id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.push(()=>{\r\n\t\t\tthis.obj_personnel.RELATIVE.spouse = {};\r\n\t\t});\r\n\t}\r\n\r\n\tloadSpouse(global_indiv_id){\r\n\r\n\t\tsettings.isNavigating = true;\r\n\t\tvar pred1 = breeze.Predicate.create(\"GLOBAL_INDIV_ID\", \"==\", global_indiv_id);\r\n\t\tvar pred2 = breeze.Predicate.create(\"RELATIVE_CD\", \"==\", \"SPOUSE\");\r\n\t\tvar pred3 = breeze.Predicate.create(\"IN_CASE_OF_EMERGENCY_FL\", \"!=\", \"1\");\r\n\t\tvar finalPred = breeze.Predicate.and([pred1, pred2, pred3]);\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(finalPred);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tvar birth_dt = moment.utc(s1.results[0].BIRTH_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\tvar deceased_dt = null;\r\n\t\t\t\tif(moment(s1.results[0].DECEASED_DT).isValid()){\r\n\t\t\t\t\tdeceased_dt = moment.utc(s1.results[0].DECEASED_DT).format(\"MM/DD/YYYY\");\r\n\t\t\t\t}\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.relative_id = s1.results[0].RELATIVE_ID;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.last_name = s1.results[0].LAST_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.given_name = s1.results[0].GIVEN_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.middle_name = s1.results[0].MIDDLE_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.birth_dt = birth_dt;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.occupation = s1.results[0].OCCUPATION;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.employer = s1.results[0].EMPLOYER;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.unit_no = s1.results[0].UNIT_NO;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.house_no = s1.results[0].HOUSE_NO;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.block_lot = s1.results[0].BLOCK_LOT;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.bldg_name = s1.results[0].BLDG_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.street_name = s1.results[0].STREET_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.sub_village = s1.results[0].SUB_VILLAGE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.barangay = s1.results[0].BARANGAY;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.district = s1.results[0].DISTRICT;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.city_town = s1.results[0].CITY_TOWN;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.state_province = s1.results[0].STATE_PROVINCE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.region = s1.results[0].REGION;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.zipcode = s1.results[0].ZIPCODE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.country_cd = s1.results[0].COUNTRY_CD;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.deceased_dt = deceased_dt;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.dependent_fl = s1.results[0].DEPENDENT_FL;\r\n\t\t\t\tthis.loadSpouseAddress(s1.results[0].RELATIVE_ID);\r\n\t\t\t\tswitch(s1.results[0].DEPENDENT_FL){\r\n\t\t\t\t\tcase 0:\t\t\t\t\t\t\r\n\t\t\t\t\t\t$(\"#status_dependent\").prop(\"checked\", true);\r\n\t\t\t\t\t\t$(\"#status_deceased\").prop(\"checked\", false);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\t\t\t\t\t\t\r\n\t\t\t\t\t\t$(\"#mstatus_dependent\").prop(\"checked\", false);\r\n\t\t\t\t\t\t$(\"#mstatus_deceased\").prop(\"checked\", true);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\t\t\t\t\t\r\n\t\t\t\t\t\t$(\"#mstatus_dependent\").prop(\"checked\", false);\r\n\t\t\t\t\t\t$(\"#mstatus_deceased\").prop(\"checked\", false);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(s1.results[0].CREATED_BY != null){\r\n\t\t\t\t\tthis.lblCreatedBy = s1.results[0].CREATED_BY+ ' ' + moment.utc(s1.results[0].CREATED_DT).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(s1.results[0].LAST_UPDATED_BY != null){\r\n\t\t\t\t\tthis.lblCreatedBy = s1.results[0].LAST_UPDATED_BY+ ' ' + moment.utc(s1.results[0].LAST_UPDATED_DT).format(\"MM/DD/YYYY hh:mm A\");\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse = {};\r\n\t\t\t\tthis.lblCreatedBy=\"\";\r\n\t\t\t\tthis.lblUpdatedBy=\"\";\r\n\t\t\t}\r\n\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Spouse's info has been loaded.\");\r\n\t\t}, (e1)=>{\r\n\t\t\tsettings.isNavigating = false;\r\n\t\t\ttoastr.error(e1, \"Error in querying spouse info.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tloadSpouseAddress(relative_id){\r\n\t\t// console.log(relative_id);\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_ADDR_TRX\")\r\n\t\t\t\t\t.where(\"RELATIVE_ID\",\"==\", relative_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.relative_addr_id = s1.results[0].RELATIVE_ADDR_ID;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.country_cd = s1.results[0].COUNTRY_CD;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.region = s1.results[0].REGION;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.state_province = s1.results[0].STATE_PROVINCE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.city_town = s1.results[0].CITY_TOWN;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.district = s1.results[0].DISTRICT;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.barangay = s1.results[0].BARANGAY;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.sub_village = s1.results[0].SUB_VILLAGE;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.block_lot = s1.results[0].BLOCK_LOT;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.street_name = s1.results[0].STREET_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.house_no = s1.results[0].HOUSE_NO;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.bldg_name = s1.results[0].BLDG_NAME;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.unit_no = s1.results[0].UNIT_NO;\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.zipcode = s1.results[0].ZIPCODE;\r\n\t\t\t}\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\ttoastr.error(e1, \"Error in querying spouse's address\");\r\n\t\t});\r\n\t}\r\n\r\n\tcheckChange(bit){\r\n \r\n\t\tswitch(bit){\r\n\t\t\tcase 0:\r\n\t\t\t\t$(\"#spouse_deceased\").prop(\"checked\", false);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\t$(\"#spouse_dependent\").prop(\"checked\", false);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tvar isChecked_dependent = $('#spouse_dependent').is(\":checked\");\r\n\t\tvar isChecked_deceased = $(\"#spouse_deceased\").is(\":checked\");\r\n\t\tif(isChecked_dependent){\r\n\t\t\tthis.obj_personnel.RELATIVE.spouse.dependent_fl = 0;\r\n\t\t\tthis.obj_personnel.RELATIVE.spouse.deceased_dt = null;\r\n\t\t\t$(\"#spouse_deceased_dt\").val(\"\");\r\n\t\t\tthis._disableDeceasedDt = true;\r\n\t\t}else if(isChecked_deceased){\r\n\t\t\tthis.obj_personnel.RELATIVE.spouse.dependent_fl = 1;\r\n\t\t\tthis._disableDeceasedDt = false;\r\n\t\t}else if(isChecked_dependent == false && isChecked_deceased == false){\r\n\t\t\tthis._disableDeceasedDt = true;\r\n\t\t\tthis.obj_personnel.RELATIVE.spouse.dependent_fl = null;\t\t\t\t\r\n\t\t\tthis.obj_personnel.RELATIVE.spouse.deceased_dt = null;\r\n\t\t\t$(\"#spouse_deceased_dt\").val(\"\");\r\n\t\t}\r\n\t}\r\n\r\n\tdd_provinceChanged(){\t\t\r\n\t\tvar prov = this.obj_personnel.RELATIVE.spouse.state_province;\r\n\t\tif(prov != undefined && prov != null && prov.length!=0){\r\n\t\t\tvar selectedProv = this.obj_personnel.PROVINCE.find((p)=>{\r\n\t\t\t\tif(p.value == prov){\r\n\t\t\t\t\treturn p;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(selectedProv != null){\r\n\t\t\t\tthis.obj_personnel.RELATIVE.spouse.region = selectedProv.group;\r\n\t\t\t\tthis.dd_regionChanged();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdd_regionChanged(){\r\n\t\tvar reg = this.obj_personnel.RELATIVE.spouse.region;\r\n\t\tif(reg != undefined && reg!=null && reg.length!=0)\r\n\t\t{\r\n\t\t\t//alert(this.obj_personnel.CONTACT.modelAddress.region);\r\n\t\t\tvar selectedRegion = this.obj_personnel.REGION.find((r)=>{\r\n\t\t\t\tif(r.value == reg)\r\n\t\t\t\t\treturn r;\r\n\t\t\t});\r\n\r\n\t\t\tif(selectedRegion != null)\r\n\t\t\t{\r\n\t\t\t\treg = this.obj_personnel.RELATIVE.spouse.country_cd = selectedRegion.group;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\tvar strValidation = \"\";\r\n\r\n\t\tthis.obj_personnel.RELATIVE.spouse.birth_dt = $(\"#spouse_birth_dt\").val();\r\n\t\tthis.obj_personnel.RELATIVE.spouse.deceased_dt = $(\"#spouse_deceased_dt\").val();\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.spouse.last_name == undefined || this.obj_personnel.RELATIVE.spouse.last_name == null || this.obj_personnel.RELATIVE.spouse.last_name.length==0){\r\n\t\t\tstrValidation+=\"No last name specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.spouse.given_name == undefined || this.obj_personnel.RELATIVE.spouse.given_name == null || this.obj_personnel.RELATIVE.spouse.given_name.length==0){\r\n\t\t\tstrValidation+=\"No given name specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.spouse.birth_dt.length>0){\r\n\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.spouse.birth_dt)).isValid()){\r\n\t\t\t\tstrValidation+=\"Invalid birth date.<br/>\";\r\n\t\t\t}else{\r\n\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.spouse.birth_dt);\r\n\t\t\t\tvar d2 = new Date();\r\n\t\t\t\tif(d1 > d2){\r\n\t\t\t\t\tstrValidation+=\"Birth date cannot be greater than date today.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tstrValidation+=\"No Birth date specified. <br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.spouse.dependent_fl == 1){\r\n\t\t\tif(this.obj_personnel.RELATIVE.spouse.deceased_dt.length>0){\r\n\t\t\t\tif(!moment(new Date(this.obj_personnel.RELATIVE.spouse.deceased_dt)).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid deceased date. <br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar d1 = new Date(this.obj_personnel.RELATIVE.spouse.deceased_dt);\r\n\t\t\t\t\tvar d2 = new Date();\r\n\t\t\t\t\tif(d1>d2){\r\n\t\t\t\t\t\tstrValidation+=\"Deceased date cannot be greater than date today.<br/>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// else{\r\n\t\t\t// \tstrValidation+=\"[Mother] No deceased date specified.<br/>\";\r\n\t\t\t// }\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.RELATIVE.spouse.country_cd == undefined || this.obj_personnel.RELATIVE.spouse.country_cd.length==0){\r\n\t\t\tstrValidation+=\"No country specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.obj_personnel.RELATIVE.spouse.relative_id == undefined || this.obj_personnel.RELATIVE.spouse.relative_id == null || this.obj_personnel.RELATIVE.spouse.relative_id==0){\r\n\t\t\t\tthis.save(this.obj_personnel.global_indiv_id);\r\n\t\t\t}else if(this.obj_personnel.RELATIVE.spouse.relative_id>0){\r\n\t\t\t\tthis.update(this.obj_personnel.RELATIVE.spouse.relative_id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsave(global_indiv_id){\r\n\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar birth_dt = null;\r\n\t\tvar deceased_dt = null;\r\n\t\tif(moment(this.obj_personnel.RELATIVE.spouse.birth_dt).isValid()){\r\n\t\t\tbirth_dt = new Date(moment(this.obj_personnel.RELATIVE.spouse.birth_dt).add(8, \"hours\"));\r\n\t\t}\r\n\r\n\t\tif(moment(this.obj_personnel.RELATIVE.spouse.deceased_dt).isValid()){\r\n\t\t\tdeceased_dt = new Date(moment(this.obj_personnel.RELATIVE.spouse.deceased_dt).add(8, \"hours\"));\r\n\t\t}\r\n\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"RELATIVE_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar maxId = 1;\r\n\t\t\t// console.log(s1.results);\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].RELATIVE_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar spouse = {\r\n\t\t\t\tRELATIVE_ID: maxId,\r\n\t\t\t\tGLOBAL_INDIV_ID: global_indiv_id,\r\n\t\t\t\tLAST_NAME: this.obj_personnel.RELATIVE.spouse.last_name,\r\n\t\t\t\tGIVEN_NAME: this.obj_personnel.RELATIVE.spouse.given_name,\r\n\t\t\t\tMIDDLE_NAME: this.obj_personnel.RELATIVE.spouse.middle_name,\r\n\t\t\t\tBIRTH_DT: birth_dt,\r\n\t\t\t\tOCCUPATION: this.obj_personnel.RELATIVE.spouse.occupation,\r\n\t\t\t\tEMPLOYER: this.obj_personnel.RELATIVE.spouse.employer,\r\n\t\t\t\tDEPENDENT_FL: this.obj_personnel.RELATIVE.spouse.dependent_fl,\r\n\t\t\t\tDECEASED_DT: deceased_dt,\r\n\t\t\t\tRELATIVE_CD: \"SPOUSE\",\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"RELATIVE_TRX\", spouse);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\tthis.saveAddress(maxId);\r\n\t\t\t\ttoastr.success(\"\",\"Record saved.\");\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tif(entity != null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in saving spouse's details..\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(e1, \"Error in querying relative id.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdate(relative_id){\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_TRX\")\r\n\t\t\t\t\t.where(\"RELATIVE_ID\", \"==\", relative_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\tvar birth_dt = new Date(moment(this.obj_personnel.RELATIVE.spouse.birth_dt).add(8, \"hours\"));\r\n\t\t\tvar deceased_dt = null;\r\n\t\t\tif(moment(this.obj_personnel.RELATIVE.spouse.deceased_dt).isValid()){\r\n\t\t\t\tdeceased_dt = new Date(moment(this.obj_personnel.RELATIVE.spouse.deceased_dt).add(8, \"hours\"));\r\n\t\t\t}\r\n\r\n\t\t\ts1.results[0].GIVEN_NAME = this.obj_personnel.RELATIVE.spouse.given_name;\r\n\t\t\ts1.results[0].MIDDLE_NAME = this.obj_personnel.RELATIVE.spouse.middle_name;\r\n\t\t\ts1.results[0].LAST_NAME = this.obj_personnel.RELATIVE.spouse.last_name;\r\n\t\t\ts1.results[0].BIRTH_DT = birth_dt;\r\n\t\t\ts1.results[0].OCCUPATION = this.obj_personnel.RELATIVE.spouse.occupation;\r\n\t\t\ts1.results[0].EMPLOYER = this.obj_personnel.RELATIVE.spouse.employer;\r\n\t\t\ts1.results[0].DEPENDENT_FL = this.obj_personnel.RELATIVE.spouse.dependent_fl;\r\n\t\t\ts1.results[0].DECEASED_DT = deceased_dt;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\tif(this.obj_personnel.RELATIVE.spouse.relative_addr_id == undefined || this.obj_personnel.RELATIVE.spouse.relative_addr_id == null || this.obj_personnel.RELATIVE.spouse.relative_addr_id.toString().length==0){\r\n\t\t\t\t\tthis.saveAddress(relative_id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.updateAddress(this.obj_personnel.RELATIVE.spouse.relative_addr_id);\r\n\t\t\t\t}\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\ttoastr.error(e2, \"Error in saving spouse's info.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\ttoastr.error(e1, \"Error in querying relative info.\");\r\n\t\t});\r\n\t}\r\n\r\n\tsaveAddress(relative_id){\r\n\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_ADDR_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"RELATIVE_ADDR_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\t\t\tvar maxId = 1;\r\n\t\t\tif(s1.results.length>0){\r\n\t\t\t\tmaxId = s1.results[0].RELATIVE_ADDR_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar relative_addr_trx = {\r\n\t\t\t\tRELATIVE_ADDR_ID: maxId,\r\n\t\t\t\tRELATIVE_ID: relative_id,\r\n\t\t\t\tCOUNTRY_CD: this.obj_personnel.RELATIVE.spouse.country_cd,\r\n\t\t\t\tREGION: this.obj_personnel.RELATIVE.spouse.region,\r\n\t\t\t\tSTATE_PROVINCE: this.obj_personnel.RELATIVE.spouse.state_province,\r\n\t\t\t\tCITY_TOWN: this.obj_personnel.RELATIVE.spouse.city_town,\r\n\t\t\t\tDISTRICT: this.obj_personnel.RELATIVE.spouse.district,\r\n\t\t\t\tBARANGAY: this.obj_personnel.RELATIVE.spouse.barangay,\r\n\t\t\t\tSUB_VILLAGE: this.obj_personnel.RELATIVE.spouse.sub_village, \r\n\t\t\t\tBLOCK_LOT: this.obj_personnel.RELATIVE.spouse.block_lot,\r\n\t\t\t\tSTREET_NAME: this.obj_personnel.RELATIVE.spouse.street_name,\r\n\t\t\t\tHOUSE_NO: this.obj_personnel.RELATIVE.spouse.house_no,\r\n\t\t\t\tBLDG_NAME: this.obj_personnel.RELATIVE.spouse.bldg_name,\r\n\t\t\t\tUNIT_NO: this.obj_personnel.RELATIVE.spouse.unit_no,\r\n\t\t\t\tZIPCODE: this.obj_personnel.RELATIVE.spouse.zipcode,\r\n\t\t\t\tPERMANENT_FL:0,\r\n\t\t\t\tMAILING_FL:0,\r\n\t\t\t\tPRESENT_FL:0,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\t\t\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"RELATIVE_ADDR_TRX\", relative_addr_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\tthis.loadSpouse(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t// toastr.success(\"\", \"Relative address has been saved.\");\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\tif(entity!= null){\r\n\t\t\t\t\tentity.entityAspect.setDeleted();\r\n\t\t\t\t}\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(e2, \"Error in saving relative address.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\ttoastr.error(e1, \"Error ing querying address id.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tupdateAddress(relative_addr_id){\r\n\t\tvar dateToday = new Date(moment(new Date()).add(8, \"hours\"));\r\n\t\tvar query = EntityQuery().from(\"RELATIVE_ADDR_TRX\")\r\n\t\t\t\t\t.where(\"RELATIVE_ADDR_ID\", \"==\", relative_addr_id);\r\n\t\tEntityManager().executeQuery(query).then((s1)=>{\r\n\r\n\t\t\ts1.results[0].COUNTRY_CD = this.obj_personnel.RELATIVE.spouse.country_cd;\r\n\t\t\ts1.results[0].REGION = this.obj_personnel.RELATIVE.spouse.region;\r\n\t\t\ts1.results[0].STATE_PROVINCE = this.obj_personnel.RELATIVE.spouse.state_province;\r\n\t\t\ts1.results[0].CITY_TOWN = this.obj_personnel.RELATIVE.spouse.city_town;\r\n\t\t\ts1.results[0].DISTRICT = this.obj_personnel.RELATIVE.spouse.district;\r\n\t\t\ts1.results[0].BARANGAY = this.obj_personnel.RELATIVE.spouse.barangay;\r\n\t\t\ts1.results[0].SUB_VILLAGE = this.obj_personnel.RELATIVE.spouse.sub_village;\r\n\t\t\ts1.results[0].BLOCK_LOT = this.obj_personnel.RELATIVE.spouse.block_lot;\r\n\t\t\ts1.results[0].STREET_NAME = this.obj_personnel.RELATIVE.spouse.street_name;\r\n\t\t\ts1.results[0].HOUSE_NO = this.obj_personnel.RELATIVE.spouse.house_no;\r\n\t\t\ts1.results[0].BLDG_NAME = this.obj_personnel.RELATIVE.spouse.bldg_name;\r\n\t\t\ts1.results[0].UNIT_NO = this.obj_personnel.RELATIVE.spouse.unit_no;\r\n\t\t\ts1.results[0].ZIPCODE = this.obj_personnel.RELATIVE.spouse.zipcode;\r\n\t\t\ts1.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\ts1.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((s2)=>{\r\n\t\t\t\tthis.loadSpouse(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t// toastr.success(\"\", \"\");\r\n\t\t\t}, (e2)=>{\r\n\t\t\t\ttoastr.error(e2, \"Error in saving spouse's address info.\");\r\n\t\t\t});\r\n\r\n\t\t}, (e1)=>{\r\n\t\t\ttoastr.error(e1, \"Error in querying spouse's address info.\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n}"],"sourceRoot":"../.."}