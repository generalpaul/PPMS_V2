{"version":3,"sources":["src/app.js","src/blankpage.js","src/blur-image.js","src/cache_obj.js","src/child-router.js","src/entity-manager-factory.js","src/environment.js","src/group_individual.js","src/helpers.js","src/main.js","src/mainpage.js","src/masterfiles.js","src/multi-observer.js","src/nav-bar.js","src/service.js","src/settings.js","src/users.js","src/welcome.js","src/converters/datepattern.js","src/converters/filtercustom.js","src/converters/number-format.js","src/converters/signals.js","src/converters/sort.js","src/converters/sorttext.js","src/converters/take.js","src/modals/budget.js","src/modals/buh-program-dialog.js","src/modals/buh-search.js","src/modals/change_password.js","src/modals/confirm_dialog.js","src/modals/edit-person.js","src/modals/globalindivmstr.js","src/modals/indivmstr.js","src/modals/job.js","src/modals/login.js","src/modals/modal-wizard.js","src/modals/modalcontainer.js","src/modals/paymentterm.js","src/modals/program.js","src/modals/talentmanagergroups.js","src/ppid/obj_personnel.js","src/ppid/ppid.js","src/ppfcs/buh.js","src/ppfcs/cache_budget.js","src/tools/gridpaging.js","src/ppid/forms/company_info.js","src/ppid/forms/company_info_main.js","src/ppid/forms/e_a_s_t.js","src/ppid/forms/gov_info.js","src/ppid/forms/gov_info_main.js","src/ppid/forms/main.js","src/ppid/forms/main_contact.js","src/ppid/forms/main_educational.js","src/ppid/forms/miscellaneous.js","src/ppid/forms/relative_character_ref.js","src/ppid/forms/relative_parent.js","src/ppid/forms/relative_siblings.js","src/ppid/modals/DialogBox.js","src/ppid/modals/photo_list.js","src/ppid/modals/ppid_search.js","src/ppfcs/actual_cost/actual_cost.js","src/ppfcs/budget/guest.js","src/ppfcs/budget/main-header.js","src/ppfcs/budget/mainview.js","src/ppfcs/budget/personnel.js","src/ppfcs/budget/summary.js"],"names":["App","configureRouter","config","router","title","map","route","name","moduleId","nav","options","blankpage","BlurImageCustomAttribute","Element","element","valueChanged","newImage","complete","drawBlur","onload","mul_table","shg_table","BLUR_RADIUS","stackBlurCanvasRGBA","canvas","top_x","top_y","width","height","radius","isNaN","context","getContext","imageData","getImageData","e","Error","pixels","data","x","y","i","p","yp","yi","yw","r_sum","g_sum","b_sum","a_sum","r_out_sum","g_out_sum","b_out_sum","a_out_sum","r_in_sum","g_in_sum","b_in_sum","a_in_sum","pr","pg","pb","pa","rbs","div","w4","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","BlurStack","stack","next","stackEnd","stackIn","stackOut","mul_sum","shg_sum","r","g","b","a","putImageData","image","w","h","canvasContext","drawImage","cache_obj","ALLOW_PASS_CONFIDENTIAL","PROGRAM_USER","_ACCESS","CALLER","ACTION","ACTION_CALLER","VALUE1","VALUE2","VALUE3","VALUE4","OBSERVERS","init_modal","close_modal","open_modal","enable_modal_button","open_modal_message","clear_indiv_modal","clear_program_modal","clear_log","clear_login_modal","clear_talentmanager_modal","pass_value","login_passed","loggedout","confirm_dialog","clear_job_modal","budget_loaded","logoutPage","loginPage","clear_budget_modal","budget_dialog","pass_program","ChildRouter","heading","initializeBreeze","EntityManager","EntityQuery","generateID","entityManager","dataService","initializeAdapterInstance","serviceName","saveOptions","SaveOptions","allowConcurrentSaves","fetchMetadata","console","log","Promise","resolve","core","getUuid","copyEntityManager","copy","createEmptyCopy","entityChanged","subscribe","logChanges","message","entity","entityType","entityAspect","getKey","toString","entityAction","getName","EntityAction","PropertyChange","pcArgs","args","propertyName","oldValue","newValue","EntityStateChange","entityState","debug","testing","group_individual","multiObserver","dialogService","masterFilesLoaded","grpMembers","_signal","_GLOBAL_GRP_ID","_GROUP_NAME","isDisableSave","showingLogout","_user","disabledfindTalent","disabledfindTM","controllers","length","close","findTalent","open","viewModel","whenClosed","response","wasCancelled","tmpgrpMembers","varExists","output","forEach","val","indiv","GLOBAL_INDIV_ID","STATUS_CD","push","GLOBAL_GRP_ID","PERSONNEL_NAME","all","undefined","findTalentManager","GROUP_NAME","getGlobalIndivsFromGrpIndiv","LoginReady","user","USER_ID","COMPANY_ID","Is_HR","Is_Branch","clear","success","fnInitMasterfiles","initType","isNavigating","_toastr","info","timeOut","loginDisabled","then","fnPassUserObject","fnLogin","varCookie","varSplitCookie","split","logoutDisabled","LoginPassed","logout","tmpIndivs","_query","from","where","executeQuery","results","GLOBAL_INDIV_WITH_ALIAS","item","GRP_INDIV_ID","PassedGroup","value","saveGroupIndiv","getQueryEntities","successEnties","getMax","orderByDesc","take","successMax","varInsert","createEntity","CREATED_BY","CREATED_DT","Date","now","addEntity","existingIndiv","LAST_UPDATED_DT","LAST_UPDATED_BY","saveChanges","setTimeout","fail","error","addIndividual","deleteItem","isFound","find","_item","isDigit","input_mask","formatDate","fnSerializeCode","substringMatcher","getFilter","checkCookie","setCookie","removeCookie","getCookie","event","charCode","keyCode","id","mask","myMask","myCaja","document","getElementById","myText","myNumbers","myOutPut","theLastPos","charAt","j","shift","setSelectionRange","strDate","dt","month","getMonth","day","getDate","year","getFullYear","slice","btoa","strs","findMatches","q","cb","matches","substrRegex","RegExp","$","each","str","test","varFilterArray","propertyText","filter","indexOf","toUpperCase","cname","cvalue","mins","d","setTime","getTime","expires","toUTCString","cookie","expireAt","setMonth","crumbs","crumbName","toGMTString","ca","c","substring","Datepicker","format","DPGlobal","parseFormat","picker","template","appendTo","on","click","proxy","isInput","is","component","focus","show","keyup","update","minViewMode","viewMode","startViewMode","weekStart","weekEnd","onRender","fillDow","fillMonths","showMode","prototype","constructor","outerHeight","place","window","stopPropagation","preventDefault","that","ev","target","closest","hide","trigger","type","date","off","set","formated","prop","setValue","newDate","parseDate","viewDate","fill","offset","css","top","left","dowCnt","html","dates","daysMin","append","monthsShort","currentDate","valueOf","text","months","prevMonth","getDaysInMonth","setDate","getDay","nextMonth","clsName","prevY","prevM","empty","join","currentYear","end","removeClass","eq","addClass","parseInt","yearCont","nodeName","toLowerCase","className","modes","navFnc","call","navStep","parent","index","setFullYear","Math","min","mousedown","dir","max","fn","datepicker","option","$this","extend","defaults","Constructor","days","daysShort","isLeapYear","separator","match","parts","setHours","setMinutes","setSeconds","setMilliseconds","cnt","m","yy","yyyy","dd","mm","headTemplate","contTemplate","jQuery","configure","aurelia","use","standardConfiguration","developmentLogging","plugin","useDefaults","settings","lock","centerHorizontalOnly","startingZIndex","start","setRoot","mainpage","toastr","Router","budgetAccess","actualAccess","talentgroupAccess","buhAccess","headerVisible","_application","_application_desc","ref","desc","_remove","_ppfcs_modules","_roles","_application_on","_cache_obj","USER","ROLE_CD","includes","isEmpty","post","serviceNameBase","HASH","done","APPLICATION","APPLICATION_DESC","fnCheckAccess","applicationClick","ROLES","APPLICATION_ID","navigateToRoute","APPLICATION_URL","replace","rolesClick","applicationOn","filterMenu","varFound","navigateTo","loadMasterfiles","fnLoadIndiv","loadLookups","getJobByGlobalCompany","getJobByName","getLookups","getPaymentTerm","getGLOBALINDIVandALIAS","getJOB_GRP_CATEGORY","getProgramGenre","getTelecastMode","getEpisodeMode","getEpisodeType","getTalentSupplierComp","getTalentSupplierIndiv","getGlobalGrp","getGrpIndiv","getBdgtHdr","getIOCC","getGlobalIndiv","getAliasTrx","getGlobalCompany","getCompany","getCategory","getDivision","getReference","getJobGroup","getJob","getLocation","getUsers","getUserTrx","globalIndiv","talentSuppComp","talentSuppIndiv","globalAlias","globalCompany","globalGrp","jobMstr","jobGrp","category","lookups","reference","entityNames","IO_CC_MSTR","GLOBAL_INDIV_MSTR","GLOBAL_ALIAS_TRX","GLOBAL_COMPANY_MSTR","COMPANY_MSTR","DIVISION_MSTR","JOB_GRP_MSTR","JOB_MSTR","LOCATION_MSTR","CATEGORY_MSTR","REFERENCE_CD_MSTR","USER_PROFILE_MSTR","USER_ROLE_TRX","BDGT_TMPL_HDR","GRP_INDIV_MSTR","GLOBAL_GRP_MSTR","TALENT_SUPPLIER_COMP_MSTR","TALENT_SUPPLIER_INDIV_MSTR","PROGRAM_GENRE_MSTR","TELECAST_MODE_MSTR","EPISODE_MODE_MSTR","EPISODE_TYPE_MSTR","MODULE_ACCESS_TRX","reject","JOB_GRP_CATEGORY","getLocal","PAYMENT_TERM","unchanged","EntityState","Unchanged","initialValues","varCheck","GLOBAL_ID","varJob","JOB_ID","JOB_DESC","varJOB_p","varGrpCategory","JOB_GRP_ID","CATEGORY_ID","CATEGORY_DESC","paymentterm","REF_GRP_CD","varTmpObject","varGlobalAlias","varGlobalIndiv","varTalentComp","varTalentSuppIndiv","varGlobalGrp","varAliases","varAlias","ALIAS","varFoundAlias","alias","ALIAS_NAME","LAST_NAME","GIVEN_NAME","MIDDLE_NAME","trim","PERSONNEL_INFO_SRC","ALIASES","SUPPLIER_INDIV_GLOBAL_ID","COMPANY_NAME","SUPPLIER_COMP_GLOBAL_ID","p_jobMstr","p_jobGrp","p_category","varFindGrp","allGrp","JOB_GRP_CD","JOB_GRP_DESC","CATEGORY_CD","varFindCategory","allCategory","using","execute","queryFailed","select","processLookups","query","getLocalSelect","resource","ordering","includeNullos","orderBy","executeQueryLocally","objName","blankValue","createNullos","manager","createNullo","entityName","values","jqXHR","textStatus","msg","MultiObserver","inject","observerLocator","observe","properties","callback","subscriptions","object","getObserver","pop","NavBar","DialogService","oldClient","OData","defaultHttpClient","myClient","request","headers","Authorization","varCheckUser","EMPLOYEE_ID","EMAIL_ADDRESS","currentInstruction","home","keyboard","overlayDismiss","changePassword","service","serviceBase","serviceBaseUpdate","getSvcUrl","method","getSvcUrlUpdate","GetJson","jsonIn","ajax","url","dataType","json","PostJson","contentType","PostUpdateJson","pageSize","STATIONS","actualCostWebUrl","actualCostServiceBase","Users","http","users","useStandardConfiguration","withBaseUrl","activate","fetch","Welcome","firstName","lastName","previousValue","fullName","submit","PROGRAMS","alert","canDeactivate","confirm","UpperValueConverter","toView","DatepatternValueConverter","isValid","FiltercustomValueConverter","array","signal","varResult","allFilter","NumberFormatValueConverter","SignalsValueConverter","SortValueConverter","direction","factor","sort","SorttextValueConverter","TakeValueConverter","count","budget","controller","items","pageindex","varFilterArrayLength","currPredicate","lstPredicates","onSpeculateProp","ClearSearch","fnManualFilter","tmpVar","_rBUDGET_TITLE","querySelectorAll","varOb","getAttribute","getValue","Predicate","create","FilterQueryOp","Contains","varValuesHasChanged","tmpVarNew","sortBy","reverse","and","expand","APPR_STAT_CD","findProgramUser","allP","PROGRAM_ID","PROGRAM_MSTR","PROGRAM_TITLE","BDGT_TMPL_ID","PROGRAM_IO","failed","selectedBudget","ok","fnKeyup","evt","_bBDGT_TMPL_ID","_bPROGRAM_TITLE","_bPROGRAM_IO","_bAPPR_STAT_CD","buhProgramDialog","ModalWizard","varFilterArraySelected","_programs","_ModalWizard","attached","selectedTalent","PROGRAM_CD","_rGROUP_TITLE","deleteSelected","splice","SelectingDone","_bPROGRAM_CD","buhSearch","_rBUH_SEARCH","selectedBUH","_bOPTIONAL_GLOBAL_ID","_bFIRST_NAME","change_password","keyPressed","$event","which","savePassword","_NEW_PASSWORD","showing","_buttonTitle","_isDisableElement","_width","_message","CloseModal","val1","val2","val3","OpenModal","InitializeModal","_id","ids","_setTitle","showDialog","_setContent","to","content","cleardispatch","continue","closeModal","enableButton","isEnabled","EditPerson","person","globalindivmstr","varActiveFromCompanyMstr","result_p","all_p","_bGLOBAL_INDIV_ID","_bPERSONNEL_NAME","indivmstr","selectedIndiv","job","intTest","hasFocus","pass_job","_rJOB_TITLE","varJobs","JOB_GRP","selectedJob","_bJOB_GRP","_bJOB_DESC","refJobDesc","login","_user_content","_content","_companies","_users","_USER_PROFILE_MSTR","user_expired","disableLogButton","varGetUserRole","found","ClearLogin","tryLogin","_PASSWORD","_USER","_COMPANY","fnCheckUser","loginSuccess","varUserAtt","checkRole","MODULE_MSTR","MODULE_NAME","ACCESS_FL","resetPassword","isUndefined","isNull","model","location","reload","_USERChanged","EXPIRE_DT","varDateCompare","modalcontainer","buttonTitle","display","btnRef","selectedTerm","program","selectedProgram","talentmanagergroups","_bGLOBAL_GRP_ID","_bGROUP_NAME","obj_personnel","global_indiv_id","editing_status","HEADER","citizenship","group","CONTACT","status","modelAddress","statusContact","modelContact","modelInternet","address","contact","email","website","EDUCATIONAL_ACHIEVEMENT","list","CHARACTERISTIC","SKILLS","LANGUAGE_DIALECT","MEDICAL_RECORD","RELATIVE","WORK_EXPERIENCE","AWARDS","SEMINARS","GOVERNMENT_INFO","modelTaxAffidavit","modelPermit","tax_affidavit","permits","GOVERNMENT_EXAM","CRIMINAL_RECORD","COMPANY_SPECIFIC","ENDORSEMENT","IMAGE_BRANDING","QUESTION_ANSWER","ppid_dialog","tab_changed","clear_ppid","maintab_contact_clicked","maintab_education_clicked","govinfo_main_clicked","company_main_clicked","STATUS","CIVIL_STATUS","CITIZENSHIP","RELIGION","COUNTRY","REGION","GROUP","LOCATIONS","CONTACT_TYPE","LEVEL","YEAR","SCHOOLS","LANGUAGE","POSITION","AWARD","TRAINING","TAX_EXEMPT","INPUT_TAX","PERMIT","VAT_STAT","EXAM","CASE_STAT","VIOLATION","PROFESSIONAL_TYPE","CESSATION","TARGET_MARKET","COMPANY","DIVISION","LOCATIONS_RNG","CATEGORY","JOB_CATEGORY","JOB","PAYROLL_GROUP","BANK","ppid","LoadDropdown","maxYear","leastYear","tmpYear","REF_CD","REF_DESC","COMPANY_CD","OrderByText","tmp","_","result","COUNTRY_CD","COUNTRY_NAME","REGION_CD","REGION_DESC","school_cd","SCHOOL_CD","school_name","SCHOOL_NAME","school_addr","SCHOOL_ADDR","LOCATION_CD","LOCATION_NAME","PAYROLL_GRP_ID","PAYROLL_GRP_CD","PAYROLL_GRP_DESC","BANK_ID","short_nm","BANK_SHORT_NAME","bank_cd","BANK_CD","long_nm","BANK_LONG_NAME","changeTab","tabNumber","FindUsers","AddUsers","buh","_objBUH","_disableCells","_disableAdd","_disableDelete","_disableSave","_disableSearch","_disableGrid","_status","addBUH","fnCRUD","BUH_PERSONNEL_ID","OPTIONAL_GLOBAL_ID","FIRST_NAME","searchExistingBuh","varDelete","getBUHForEdit","setDeleted","getEntities","errors","getValidationErrors","saveBUH","searchBUH","foundItems","searchPrograms","cache_budget","REGULAR","SEMI_REGULAR","STAFF","GUEST","TOTAL","IS_COPYING","_INPUT_AMT_REGULAR","_INPUT_AMT_SEMI_REGULAR","_INPUT_AMT_STAFF","_INPUT_AMT_GUEST","_INPUT_AMT_TOTAL","_LOADING_BUDGET","pass_group","pass_indiv","enable_approved","copy_template_guest","copy_template","budget_refresh","reset_all","refreshPersonnelTab","reset_summary","disable_search_personnel","gridpaging","_Pages","_PagesShow","_currentIndex","subscription","onChange","intByTmp","intDivTmp","ceil","divby","endClick","endValue","selectedClick","company_info","clickTab_Company","tab_num","delegate","company_info_main","_disableLocations","_disableIDNo","_disableStatus","_disableTabsInput","alreadyLoaded","global_id","loadGlobalCompany","suspend","loadSuspend","accreditation","loadAccreditation","GLOBAL_COMPANY_ID","global_company_id","id_no","ID_NO","company_id","start_dt","START_DT","end_dt","END_DT","kapamilya_dt","KAPAMILYA_DT","membership_dt","MEMBERSHIP_DT","exclusive_fl","EXCLUSIVE_FL","status_cd","cessation_reason_cd","CESSATION_REASON_CD","remarks","REMARKS","division_id","DIVISION_ID","location_cd","category_id","job_id","payroll_grp_id","professional_type_cd","PROFESSIONAL_TYPE_CD","suspend_id","suspended_start_dt","suspended_end_dt","dd_companyChanged","accreditation_id","ACCREDITATION_ID","eff_start_dt","EFF_START_DT","eff_end_dt","EFF_END_DT","job_grp_id","competency","COMPETENCY","home_fl","HOME_FL","entry_fl","ENTRY_FL","accreditation_memo","ACCREDITATION_MEMO","pred1","pred2","finalPred","SUSPEND_ID","loadJobDropdown","jc","global_company","gc","level","DIVISION_LEVEL","DIVISION_CD","DIVISION_NAME","startDt","endDt","dd_divisionChanged","division","validate","strValidation","sus_start","sus_end","cid","gcid","saveCompanySpecific","updateCompanySpecific","generated_id","GenerateIDNo","s","dd_bankChanged","bank_id","personnel_bank","bank","bank_nm","acct_name","last_name","given_name","middle_name","LastID","COMPANY_INDEX","lastYear","clearAccreditationField","e_a_s_t","CloseSearch","gov_info","_activeTab","clickTab_GovInfo","gov_info_main","load_TaxInformation","load_TaxAffidavit","load_Permit","clearTaxAffidavitField","validate_input","input","pagibig","sss","philhealth","querySuccess","tax_exempt_cd","TAX_EXEMPT_CD","sss_no","SSS_NO","pagibig_no","PAGIBIG_NO","philhealth_no","PHILHEALTH_NO","national_id","NATIONAL_ID","voters_id","VOTERS_ID","errorQuery","input_tax_cd","INPUT_TAX_CD","tin","TIN","vat_reg_dt","VAT_REG_DT","vat_stat_cd","VAT_STAT_CD","tmpList","tax_affidavit_id","TAX_AFFIDAVIT_ID","affidavit_no","AFFIDAVIT_NO","affidavit_dt","AFFIDAVIT_DT","successQuery","PLACE_OF_ISSUE","permit","PERMIT_CD","permit_no","PERMIT_NO","expiry_dt","EXPIRY_DT","permit_cd","agency_cd","AGENCY_CD","permit_id","PERMIT_ID","grant_dt","GRANT_DT","place_of_issue","poi","LOCATION_DESC","permit_name","btnAdd_TaxAffidavit","insertTaxAffidavit","btnRemove_TaxAffidavit","saveSuccess","dateToday","add","Max","RELEASE_DT","RETURN_DT","errorSave","clearPermitField","btnAdd_Permit","insertPermit","btnUpdate_Permit","btnRemove_Permit","querySuccess1","save1","querySuccess2","save2","error2","error1","queryError1","main","_disableSearchPersonnel","_disableCreatePersonnel","_disableSavePersonnel","_disableClearData","_disableResetData","_disableForm","_isActiveTab","gender","selectedGender","selected_citizenship","selected_group","primary_img","loadData","getAge","dateString","today","birthDate","age","religion_cd","RELIGION_CD","birthdt","BIRTH_DT","birth_dt","civil_status","mother_maiden_name","MOTHER_MAIDEN_NAME","birth_place","BIRTH_PLACE","GENDER","acr_no","ACR_NO","country_cd","country_base_cd","COUNTRY_BASE_CD","location_base_cd","LOCATION_BASE_CD","created_by","last_updated_by","_pred1","_pred2","_finalPred","suspension_start","suspension_end","tmpArr","CITIZENSHIP_CD","checkDate","btnAdd_Citizenship","checkIfExist","removeCitizenship","removeAllCitizenship","btnAdd_Group","removeGroup","removeAllGroup","fnPersonnel","clearData","validateHeader","passed_status","TinRegex","TinRegex2","set_1","set_2","set_3","set_4","mother_maiden_nm","alias_nick","first_nm","middle_nm","last_nm","saveHeader","updateHeader","bdate","varInsert_2","ACTIVE_FL","PARK_FL","INDIV_FL","EMERGENCY_RELATION_CD","INDIV_ID","success_2","CITIZENSHIP_ID","tempCiti","success_3","failed_3","failedMax","tempGroup","success_suspend","maxId","suspend_trx","SUSPEND_LEVEL","suspend_saved","suspend_error","failed_2","getEntity","item_2","getCitizenshipList","doesExist","some","getMaxSuccess","newCount","citi","tempEnt","getGroup","queryGroup","queryMax","findIndex","o","success_710","error_712","getSuspend","success_getSuspend","save_success","save_error","error_getSuspend","btnUpload","clickTab_main","main_contact","_disableBtnAdd","_disableBtnSave","_disableAddressTable","_disableContactTable","loadMain_Address","loadMain_Contact","loadMain_EmailWeb","clearAddressData","clearContactData","clearEmailWebData","tmpFullAddress","strFullAddress","UNIT_NO","HOUSE_NO","BLOCK_LOT","BLDG_NAME","STREET_NAME","SUB_VILLAGE","BARANGAY","DISTRICT","CITY_TOWN","STATE_PROVINCE","l","ZIPCODE","addr_id","ADDR_ID","region","state_province","city_town","district","barangay","sub_village","phase","PHASE","permanent_fl","PERMANENT_FL","present_fl","PRESENT_FL","block_lot","street_name","house_no","bldg_name","unit_no","zipcode","residential_type","RESIDENTIAL_TYPE","house_ownership","HOUSE_OWNERSHIP","mailing_fl","MAILING_FL","postal_box","POSTAL_BOX","sketch_path","SKETCH_PATH","full_address","PHONE_TYPE","contact_no_id","CONTACT_NO_ID","phone_type_text","phone_type","area_cd","AREA_CD","phone_no","PHONE_NO","local_no","LOCAL_NO","tmpEmail","tmpWeb","EMAIL_FL","internet_id","INTERNET_ID","web_addr","WEB_ADDR","REC_STAT_FL","web","queryError","isNumberKey","dd_regionChanged","reg","selectedRegion","btnAdd_Address","btnEdit_Address","btnRemoveAddress","validateAddress","insertAddress","updateAddress","_address","btnEdit_Contact","btnRemove_Contact","removeSuccess","removeError","validateContact","insertContact","updateContact","Success","Contact","validateEmail","re","validateWeb","URL","regEx","btnAdd_EmailWeb","isEmail","email_addr","insertEmailWeb","btnRemove_EmailWeb","btnRemove_AllEmailWeb","internet_trx","main_educational","_disableTable","loadMain_Educational","school","EDUCATION_LEVEL","education","start_yr","START_YR","course","COURSE","education_id","EDUCATION_ID","education_level","end_yr","END_YR","honor_awards","HONOR_AWARDS","completed_fl","COMPLETED_FL","level_name","btnAdd","btnEdit","insert","education_trx","YR_GRADUATED","saveError","updateSuccess","updateError","btnRemove","educ","miscellaneous","relative_character_ref","_tab0_loaded","LoadData","relative_parent","relative_siblings","DialogBox","photo_list","ppid_search","_rppid_queries","NICK_NAME","selectedPersonnel","actual_cost","GuestCustomElement","_cache_budget","_enableAdd","_enableRemove","fnCheckBudget","fnCallCopy","resetView","_PYMNTTERM","fnModalPaymentTerm","passTerm","term","PYMNT_TERM_CD","varRefCd","PAY_RATE_FACTOR_TMP","PAY_RATE_FACTOR","INPUT_AMT_TMP","INPUT_AMT","visible","saveGuest","fnAddGuest","fnRemoveGuest","BDGT_TMPL_GUEST_DTL_ID","BDGT_AMT","parseFloat","fnRegularBlurEvt","fnRegularFocus","AmountBlur","property","varConverted","MainHeaderCustomElement","_PROGRAM_GENRE_MSTR","_TELECAST_MODE_MSTR","_EPISODE_TYPE_MSTR","_STATIONS","_disableCreateBudget","_disableCancelBudget","_disableRefreshBudget","_disableSaveBudget","_disableBudgetId","_disablePrintBudget","_disableCopyBudget","programDisabled","budgetDisabled","CloseBudgetDialog","PassedProgram","fnBudgetRefreshHandle","fnClearHeader","BDGT_FROM","BDGT_TO","varToday","p1","p2","pred","checkExpired","parse","inputChanged","_COMPANY_ID","fnClearBudget","LoggedOut","CHARGE_CD","PROGRAM_GENRE_CD","TELECAST_MODE_CD","EPISODE_TYPE_CD","EPISODES","TAPING_DAYS","STATION_ID","unshift","_STATUS","fnBudget","fnDialogProgram","fnSaveBudget","varUseReport","popup","moveTo","varGetHeader","fnBudgetValidation_1","varSubMin","varAddMin","p3","p4","strException","varFromMax","varToMax","countError","fnBudgetValidation_2","c1","_queryCheckActual","varPromises","newPromise","resolve_2","reject_2","varTmpFrom","ACTUAL_FROM","varTmpTo","ACTUAL_TO","ACTUAL_COST_ID","_queryCheckVtr","foundVtr","varDataFromCompare","varDataToCompare","varMaxDate","allDate","varVtr","VTR_LIVE_DT","new_date","passed","fnValidation_Approved","c2","fnExecuteSaveBudgetHeader","subtract","varFrom","varTo","BDGT_VIEW_FCTR","PARENT_PROGRAM_ID","BDGT_VIEW_CD","CHARGE_TYPE_CD","BDGT_TOTAL","BDGT_STAT_CD","BDGT_FOR_CD","PROGRAM_NAME","STATION_SENT_DATE","STATION_SENT","entities","getEntityQuery","fnDialogBudget","mainview","clickTab","PersonnelCustomElement","styleStringHidden","styleStringVisible","_JOBS","_Personnel","_PersonnelTM","_Index","varPymnt","isIndivMstrTalentsDisabled","isIndivMstrManagerDisabled","isJobDisabled","isIndivMstrDisabled","_ce_head","ButtonStatus","PassedIndiv","refreshOnSelect","passJob","_personnelSearch","collapse_expand_head","ce_value","styleString","collapse_expand","fnCheckExistingTalents","TALENTS","REMOVE","myFunction","usr","TALENT_MANAGER","BDGT_TMPL_DTL_ID_TMP","BDGT_TMPL_DTL_ID","BDGT_TMPL_DTL_ID_LINK","BDGT_TMPL_DTL_ID_LINK_TMP","toPersonModel","USE","savePersonnel","scrollDiv","varPsClType","varJobLength","varCategoryLength","CONTRACT_AMT","STAFF_WORK","PAY_TO_PERSON_FL","BUDGET_AMT","TAPING_DAY_CNT","PERSONNEL_CLASS_CD","CONFIDENTIAL","POOL_RECORD","GROUP_ORDER","GLOBAL_ID_LINK","setPersonnelValues","obj","varTM","CONTRACT_AMT_TMP","BLANK_PERSONNEL_NAME","CONFIDENTIAL_TMP","STAFF_WORK_TMP","POOL_RECORD_TMP","varToDelete","removeTalent","varToSplice","fnModalJob","tblHeader","divRegular","scrollTop","tblData","position","varCol","clientWidth","showTalents","_selectedItem","showTalentMngr","fnIndivMstr","removeTalentMngr","varJobTManager","getDefaultPymntTerm","fnPassedPersonnels","varIndiv","allIndiv","varTalent","modalIndivMstrTalents","allReg","personnel","moveTrigger","varCopy","focusTrigger","tag","varErrorDuplicate","varErrorJobTerms","varErrorCheckTalentManager","varDuplicateValidation","varI","varJ","varIndex","getAllDtl","foundDtl","IsNewTalent","PER_TAPING_DAY_RATE","PERSONNEL_CLASS_TYPE","getPersonnelClassType","WITH_TALENT_MANAGER","varInsertTM","varTalentMngrToDelete","allTm","varTalentToDelete","varTalentToEdit","varCheckTalent","allTalent","save","varTalentMngrToEdit","consoole","fnSequenceDispatch","varPaymentTerm","fnBlankPersonnelRegular","varBudgetLast","chkRemove","removeRegular","varRemoved","fnIndivMstrTalents","fnIndivMstrManager","SummaryCustomElement","_INPUT_AMT_MAINSTAY","varObserveSubscriptions","_multiObserver","fnCheckSummary","fnResetSummarySubscription","fnCheckAll","_cache_budget_LOADING_BUDGET","varSubscription","varSubscriptionTM","toDispose"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import 'bootstrap';\r\nimport {inject} from 'aurelia-framework';\r\n//import 'bootstrap/css/bootstrap.css!';\r\nimport toastr from \"toastr\";\r\n@inject(toastr)\r\nexport class App {\r\n  configureRouter(config, router){\r\n    config.title = 'PPMS';\r\n    config.map([\r\n      { route: ['', 'blankpage'], name: 'blankpage', moduleId: 'blankpage', nav: true, title: 'PPMS' },\r\n      { route: 'mainpage', name: 'mainpage', moduleId: 'mainpage', nav: true, title: 'Main Page' },\r\n      { route: 'mainview', name: 'mainview', moduleId: 'ppfcs/budget/mainview', nav: true, title: 'Budget Template' },\r\n      { route: 'group_individual', name: 'group_individual', moduleId: 'group_individual', nav: true, title:'Talent Groups' },\r\n      { route: 'actual_cost', name: 'actual_cost', moduleId: 'ppfcs/actual_cost/actual_cost', nav: true, title:'Actual Cost' },\r\n      { route: 'buh', name: 'buh', moduleId: 'buh', nav: true, title:'BUH' },\r\n      { route: 'ppid', name: 'ppid', moduleId: 'ppid/ppid', nav: true, title: 'Program Personnel Information Database' }\r\n    ]);\r\n\r\n    this.router = router;\r\n    \r\n    toastr.options = {\r\n      \"closeButton\": true,\r\n      \"debug\": false,\r\n      \"positionClass\": \"toast-bottom-right\",\r\n      \"onclick\": null,\r\n      \"showDuration\": \"300\",\r\n      \"hideDuration\": \"1000\",\r\n      \"timeOut\": \"5000\",\r\n      //\"timeOut\": \"300000\",\r\n      //\"extendedTimeOut\": \"1000\",\r\n      \"showEasing\": \"swing\",\r\n      \"hideEasing\": \"linear\",\r\n      \"showMethod\": \"fadeIn\",\r\n      \"hideMethod\": \"fadeOut\"\r\n    };\r\n  }\r\n}\r\n","\r\nexport class blankpage {\r\n    \r\n}","import {inject} from 'aurelia-framework';\r\n\r\n@inject(Element)\r\nexport class BlurImageCustomAttribute {\r\n  constructor(element){\r\n    this.element = element;\r\n  }\r\n\r\n  valueChanged(newImage){\r\n    if(newImage.complete){\r\n      drawBlur(this.element, newImage);\r\n    } else{\r\n      newImage.onload = () => drawBlur(this.element, newImage);\r\n    }\r\n  }\r\n}\r\n\r\n/*\r\nThis Snippet is using a modified Stack Blur js lib for blurring the header images.\r\n*/\r\n\r\n/*\r\n\r\nStackBlur - a fast almost Gaussian Blur For Canvas\r\n\r\nVersion:     0.5\r\nAuthor:\t\tMario Klingemann\r\nContact: \tmario@quasimondo.com\r\nWebsite:\thttp://www.quasimondo.com/StackBlurForCanvas\r\nTwitter:\t@quasimondo\r\n\r\nIn case you find this class useful - especially in commercial projects -\r\nI am not totally unhappy for a small donation to my PayPal account\r\nmario@quasimondo.de\r\n\r\nOr support me on flattr:\r\nhttps://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript\r\n\r\nCopyright (c) 2010 Mario Klingemann\r\n\r\nPermission is hereby granted, free of charge, to any person\r\nobtaining a copy of this software and associated documentation\r\nfiles (the \"Software\"), to deal in the Software without\r\nrestriction, including without limitation the rights to use,\r\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the\r\nSoftware is furnished to do so, subject to the following\r\nconditions:\r\n\r\nThe above copyright notice and this permission notice shall be\r\nincluded in all copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\r\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\r\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\r\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\r\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\r\nOTHER DEALINGS IN THE SOFTWARE.\r\n*/\r\n\r\nvar mul_table = [\r\n        512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,\r\n        454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,\r\n        482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,\r\n        437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,\r\n        497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,\r\n        320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,\r\n        446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,\r\n        329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,\r\n        505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,\r\n        399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,\r\n        324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,\r\n        268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,\r\n        451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,\r\n        385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,\r\n        332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,\r\n        289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];\r\n\r\n\r\nvar shg_table = [\r\n\t     9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17,\r\n\t\t17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19,\r\n\t\t19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20,\r\n\t\t20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21,\r\n\t\t21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21,\r\n\t\t21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22,\r\n\t\t22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22,\r\n\t\t22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23,\r\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\r\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\r\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\r\n\t\t23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\r\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\r\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\r\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\r\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24 ];\r\n\r\nvar BLUR_RADIUS = 40;\r\n\r\nfunction stackBlurCanvasRGBA( canvas, top_x, top_y, width, height, radius )\r\n{\r\n\tif ( isNaN(radius) || radius < 1 ) return;\r\n\tradius |= 0;\r\n\r\n\tvar context = canvas.getContext(\"2d\");\r\n\tvar imageData;\r\n\r\n\ttry {\r\n\t  imageData = context.getImageData( top_x, top_y, width, height );\r\n\t} catch(e) {\r\n\t  throw new Error(\"unable to access image data: \" + e);\r\n\t}\r\n\r\n\tvar pixels = imageData.data;\r\n\r\n\tvar x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum,\r\n\tr_out_sum, g_out_sum, b_out_sum, a_out_sum,\r\n\tr_in_sum, g_in_sum, b_in_sum, a_in_sum,\r\n\tpr, pg, pb, pa, rbs;\r\n\r\n\tvar div = radius + radius + 1;\r\n\tvar w4 = width << 2;\r\n\tvar widthMinus1  = width - 1;\r\n\tvar heightMinus1 = height - 1;\r\n\tvar radiusPlus1  = radius + 1;\r\n\tvar sumFactor = radiusPlus1 * ( radiusPlus1 + 1 ) / 2;\r\n\r\n\tvar stackStart = new BlurStack();\r\n\tvar stack = stackStart;\r\n\tfor ( i = 1; i < div; i++ )\r\n\t{\r\n\t\tstack = stack.next = new BlurStack();\r\n\t\tif ( i == radiusPlus1 ) var stackEnd = stack;\r\n\t}\r\n\tstack.next = stackStart;\r\n\tvar stackIn = null;\r\n\tvar stackOut = null;\r\n\r\n\tyw = yi = 0;\r\n\r\n\tvar mul_sum = mul_table[radius];\r\n\tvar shg_sum = shg_table[radius];\r\n\r\n\tfor ( y = 0; y < height; y++ )\r\n\t{\r\n\t\tr_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;\r\n\r\n\t\tr_out_sum = radiusPlus1 * ( pr = pixels[yi] );\r\n\t\tg_out_sum = radiusPlus1 * ( pg = pixels[yi+1] );\r\n\t\tb_out_sum = radiusPlus1 * ( pb = pixels[yi+2] );\r\n\t\ta_out_sum = radiusPlus1 * ( pa = pixels[yi+3] );\r\n\r\n\t\tr_sum += sumFactor * pr;\r\n\t\tg_sum += sumFactor * pg;\r\n\t\tb_sum += sumFactor * pb;\r\n\t\ta_sum += sumFactor * pa;\r\n\r\n\t\tstack = stackStart;\r\n\r\n\t\tfor( i = 0; i < radiusPlus1; i++ )\r\n\t\t{\r\n\t\t\tstack.r = pr;\r\n\t\t\tstack.g = pg;\r\n\t\t\tstack.b = pb;\r\n\t\t\tstack.a = pa;\r\n\t\t\tstack = stack.next;\r\n\t\t}\r\n\r\n\t\tfor( i = 1; i < radiusPlus1; i++ )\r\n\t\t{\r\n\t\t\tp = yi + (( widthMinus1 < i ? widthMinus1 : i ) << 2 );\r\n\t\t\tr_sum += ( stack.r = ( pr = pixels[p])) * ( rbs = radiusPlus1 - i );\r\n\t\t\tg_sum += ( stack.g = ( pg = pixels[p+1])) * rbs;\r\n\t\t\tb_sum += ( stack.b = ( pb = pixels[p+2])) * rbs;\r\n\t\t\ta_sum += ( stack.a = ( pa = pixels[p+3])) * rbs;\r\n\r\n\t\t\tr_in_sum += pr;\r\n\t\t\tg_in_sum += pg;\r\n\t\t\tb_in_sum += pb;\r\n\t\t\ta_in_sum += pa;\r\n\r\n\t\t\tstack = stack.next;\r\n\t\t}\r\n\r\n\r\n\t\tstackIn = stackStart;\r\n\t\tstackOut = stackEnd;\r\n\t\tfor ( x = 0; x < width; x++ )\r\n\t\t{\r\n\t\t\tpixels[yi+3] = pa = (a_sum * mul_sum) >> shg_sum;\r\n\t\t\tif ( pa != 0 )\r\n\t\t\t{\r\n\t\t\t\tpa = 255 / pa;\r\n\t\t\t\tpixels[yi]   = ((r_sum * mul_sum) >> shg_sum) * pa;\r\n\t\t\t\tpixels[yi+1] = ((g_sum * mul_sum) >> shg_sum) * pa;\r\n\t\t\t\tpixels[yi+2] = ((b_sum * mul_sum) >> shg_sum) * pa;\r\n\t\t\t} else {\r\n\t\t\t\tpixels[yi] = pixels[yi+1] = pixels[yi+2] = 0;\r\n\t\t\t}\r\n\r\n\t\t\tr_sum -= r_out_sum;\r\n\t\t\tg_sum -= g_out_sum;\r\n\t\t\tb_sum -= b_out_sum;\r\n\t\t\ta_sum -= a_out_sum;\r\n\r\n\t\t\tr_out_sum -= stackIn.r;\r\n\t\t\tg_out_sum -= stackIn.g;\r\n\t\t\tb_out_sum -= stackIn.b;\r\n\t\t\ta_out_sum -= stackIn.a;\r\n\r\n\t\t\tp =  ( yw + ( ( p = x + radius + 1 ) < widthMinus1 ? p : widthMinus1 ) ) << 2;\r\n\r\n\t\t\tr_in_sum += ( stackIn.r = pixels[p]);\r\n\t\t\tg_in_sum += ( stackIn.g = pixels[p+1]);\r\n\t\t\tb_in_sum += ( stackIn.b = pixels[p+2]);\r\n\t\t\ta_in_sum += ( stackIn.a = pixels[p+3]);\r\n\r\n\t\t\tr_sum += r_in_sum;\r\n\t\t\tg_sum += g_in_sum;\r\n\t\t\tb_sum += b_in_sum;\r\n\t\t\ta_sum += a_in_sum;\r\n\r\n\t\t\tstackIn = stackIn.next;\r\n\r\n\t\t\tr_out_sum += ( pr = stackOut.r );\r\n\t\t\tg_out_sum += ( pg = stackOut.g );\r\n\t\t\tb_out_sum += ( pb = stackOut.b );\r\n\t\t\ta_out_sum += ( pa = stackOut.a );\r\n\r\n\t\t\tr_in_sum -= pr;\r\n\t\t\tg_in_sum -= pg;\r\n\t\t\tb_in_sum -= pb;\r\n\t\t\ta_in_sum -= pa;\r\n\r\n\t\t\tstackOut = stackOut.next;\r\n\r\n\t\t\tyi += 4;\r\n\t\t}\r\n\t\tyw += width;\r\n\t}\r\n\r\n\r\n\tfor ( x = 0; x < width; x++ )\r\n\t{\r\n\t\tg_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;\r\n\r\n\t\tyi = x << 2;\r\n\t\tr_out_sum = radiusPlus1 * ( pr = pixels[yi]);\r\n\t\tg_out_sum = radiusPlus1 * ( pg = pixels[yi+1]);\r\n\t\tb_out_sum = radiusPlus1 * ( pb = pixels[yi+2]);\r\n\t\ta_out_sum = radiusPlus1 * ( pa = pixels[yi+3]);\r\n\r\n\t\tr_sum += sumFactor * pr;\r\n\t\tg_sum += sumFactor * pg;\r\n\t\tb_sum += sumFactor * pb;\r\n\t\ta_sum += sumFactor * pa;\r\n\r\n\t\tstack = stackStart;\r\n\r\n\t\tfor( i = 0; i < radiusPlus1; i++ )\r\n\t\t{\r\n\t\t\tstack.r = pr;\r\n\t\t\tstack.g = pg;\r\n\t\t\tstack.b = pb;\r\n\t\t\tstack.a = pa;\r\n\t\t\tstack = stack.next;\r\n\t\t}\r\n\r\n\t\typ = width;\r\n\r\n\t\tfor( i = 1; i <= radius; i++ )\r\n\t\t{\r\n\t\t\tyi = ( yp + x ) << 2;\r\n\r\n\t\t\tr_sum += ( stack.r = ( pr = pixels[yi])) * ( rbs = radiusPlus1 - i );\r\n\t\t\tg_sum += ( stack.g = ( pg = pixels[yi+1])) * rbs;\r\n\t\t\tb_sum += ( stack.b = ( pb = pixels[yi+2])) * rbs;\r\n\t\t\ta_sum += ( stack.a = ( pa = pixels[yi+3])) * rbs;\r\n\r\n\t\t\tr_in_sum += pr;\r\n\t\t\tg_in_sum += pg;\r\n\t\t\tb_in_sum += pb;\r\n\t\t\ta_in_sum += pa;\r\n\r\n\t\t\tstack = stack.next;\r\n\r\n\t\t\tif( i < heightMinus1 )\r\n\t\t\t{\r\n\t\t\t\typ += width;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tyi = x;\r\n\t\tstackIn = stackStart;\r\n\t\tstackOut = stackEnd;\r\n\t\tfor ( y = 0; y < height; y++ )\r\n\t\t{\r\n\t\t\tp = yi << 2;\r\n\t\t\tpixels[p+3] = pa = (a_sum * mul_sum) >> shg_sum;\r\n\t\t\tif ( pa > 0 )\r\n\t\t\t{\r\n\t\t\t\tpa = 255 / pa;\r\n\t\t\t\tpixels[p]   = ((r_sum * mul_sum) >> shg_sum ) * pa;\r\n\t\t\t\tpixels[p+1] = ((g_sum * mul_sum) >> shg_sum ) * pa;\r\n\t\t\t\tpixels[p+2] = ((b_sum * mul_sum) >> shg_sum ) * pa;\r\n\t\t\t} else {\r\n\t\t\t\tpixels[p] = pixels[p+1] = pixels[p+2] = 0;\r\n\t\t\t}\r\n\r\n\t\t\tr_sum -= r_out_sum;\r\n\t\t\tg_sum -= g_out_sum;\r\n\t\t\tb_sum -= b_out_sum;\r\n\t\t\ta_sum -= a_out_sum;\r\n\r\n\t\t\tr_out_sum -= stackIn.r;\r\n\t\t\tg_out_sum -= stackIn.g;\r\n\t\t\tb_out_sum -= stackIn.b;\r\n\t\t\ta_out_sum -= stackIn.a;\r\n\r\n\t\t\tp = ( x + (( ( p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1 ) * width )) << 2;\r\n\r\n\t\t\tr_sum += ( r_in_sum += ( stackIn.r = pixels[p]));\r\n\t\t\tg_sum += ( g_in_sum += ( stackIn.g = pixels[p+1]));\r\n\t\t\tb_sum += ( b_in_sum += ( stackIn.b = pixels[p+2]));\r\n\t\t\ta_sum += ( a_in_sum += ( stackIn.a = pixels[p+3]));\r\n\r\n\t\t\tstackIn = stackIn.next;\r\n\r\n\t\t\tr_out_sum += ( pr = stackOut.r );\r\n\t\t\tg_out_sum += ( pg = stackOut.g );\r\n\t\t\tb_out_sum += ( pb = stackOut.b );\r\n\t\t\ta_out_sum += ( pa = stackOut.a );\r\n\r\n\t\t\tr_in_sum -= pr;\r\n\t\t\tg_in_sum -= pg;\r\n\t\t\tb_in_sum -= pb;\r\n\t\t\ta_in_sum -= pa;\r\n\r\n\t\t\tstackOut = stackOut.next;\r\n\r\n\t\t\tyi += width;\r\n\t\t}\r\n\t}\r\n\r\n\tcontext.putImageData( imageData, top_x, top_y );\r\n\r\n}\r\n\r\nfunction BlurStack()\r\n{\r\n\tthis.r = 0;\r\n\tthis.g = 0;\r\n\tthis.b = 0;\r\n\tthis.a = 0;\r\n\tthis.next = null;\r\n}\r\n\r\nfunction drawBlur(canvas, image) {\r\n  var w = canvas.width;\r\n  var h = canvas.height;\r\n  var canvasContext = canvas.getContext('2d');\r\n  canvasContext.drawImage(image, 0, 0, w, h);\r\n  stackBlurCanvasRGBA(canvas, 0, 0, w, h, BLUR_RADIUS);\r\n};\r\n","export class cache_obj{\r\n\r\n    ALLOW_PASS_CONFIDENTIAL=false;\r\n\r\n    PROGRAM_USER=[];\r\n    _ACCESS = {};\r\n    CALLER={ACTION:null,ACTION_CALLER:null,VALUE1:null,VALUE2:null,VALUE3:null,VALUE4:null};\r\n    OBSERVERS = {\r\n        init_modal:[], \r\n        close_modal: [], \r\n        open_modal:[], \r\n        enable_modal_button: [], \r\n        open_modal_message:[],\r\n        clear_indiv_modal: [], \r\n        clear_program_modal: [], \r\n        clear_log:[], \r\n        clear_login_modal:[], \r\n        clear_talentmanager_modal: [],\r\n        pass_value:[],\r\n        login_passed:[],\r\n        loggedout:[], \r\n        confirm_dialog:[],\r\n        clear_job_modal:[],\r\n        budget_loaded: [],\r\n        logoutPage: [],\r\n        loginPage: [],\r\n        clear_budget_modal: [],\r\n        budget_dialog: [],\r\n        pass_program: []\r\n\r\n    };\r\n}","export class ChildRouter{\r\n  heading = 'Child Router';\r\n\r\n  configureRouter(config, router){\r\n    config.map([\r\n      { route: ['','welcome'],  name: 'welcome',       moduleId: 'welcome',       nav: true, title:'Welcome' },\r\n      { route: 'users',         name: 'users',         moduleId: 'users',         nav: true, title:'Github Users' },\r\n      { route: 'child-router',  name: 'child-router',  moduleId: 'child-router',  nav: true, title:'Child Router' }\r\n    ]);\r\n\r\n    this.router = router;\r\n  }\r\n}\r\n","import settings from './settings';\r\nimport breeze from 'breeze-client';\r\n\r\n\r\nvar entityManager;\r\n//var EntityQuery = breeze.EntityQuery;\r\n\r\n\r\nexport function initializeBreeze() {\r\n  try {\r\n\r\n     \r\n    var dataService = breeze.config.initializeAdapterInstance('dataService', 'webApiOData', true);\r\n    //  dataService.defaultHttpClient = {\r\n    //  headers: { \r\n    //     \"Authorization\": \"foo2\" \r\n    //  },\r\n    // };\r\n    //console.log(dataService.defaultHttpClient);\r\n  \r\n\r\n\r\n\r\n    entityManager = new breeze.EntityManager(settings.serviceName);\r\n    \r\n    //saveOptions: new breeze.SaveOptions({allowConcurrentSaves: true})\r\n    entityManager.saveOptions = new breeze.SaveOptions({ allowConcurrentSaves: true });\r\n    \r\n    return entityManager.fetchMetadata();\r\n\r\n\r\n  } catch (e) {\r\n    console.log(e);\r\n    return Promise.resolve(false);\r\n  }\r\n\r\n}\r\n/**\r\n * Creates Breeze EntityManager instances.\r\n */\r\nexport function EntityManager() {\r\n  return entityManager;\r\n  //copy\r\n  /*entityManager = new breeze.EntityManager(settings.serviceName);\r\n  return entityManager.fetchMetadata()\r\n    .then(() => copyEntityManager());*/\r\n}\r\n\r\nexport function EntityQuery() {\r\n  return breeze.EntityQuery;\r\n}\r\n\r\n\r\nexport function generateID(){\r\n  return breeze.core.getUuid();\r\n}\r\n\r\n\r\nfunction copyEntityManager() {\r\n  var copy = entityManager.createEmptyCopy();\r\n  copy.entityChanged.subscribe(logChanges);\r\n  return copy;\r\n}\r\n\r\n// log entity changes to the console for debugging purposes.\r\nfunction logChanges(data) {\r\n  var message = 'Entity Changed.  Entity: ' + (data.entity ? data.entity.entityType.name + '/' + data.entity.entityAspect.getKey().toString() : '?') + ';  EntityAction: ' + data.entityAction.getName() + '; ';\r\n  if (data.entityAction === breeze.EntityAction.PropertyChange) {\r\n    var pcArgs = data.args;\r\n    message += 'PropertyName: ' + (pcArgs.propertyName || 'null') + '; Old Value: ' + (pcArgs.oldValue ? pcArgs.oldValue.toString() : 'null') + '; New Value: ' + (pcArgs.newValue ? pcArgs.newValue.toString() : 'null') + ';';\r\n  }\r\n  if (data.entityAction === breeze.EntityAction.EntityStateChange) {\r\n    message += 'New State: ' + data.entity.entityAspect.entityState.getName() + ';';\r\n  }\r\n}\r\n","export default {\r\n  debug: true,\r\n  testing: true\r\n};\r\n","import {checkCookie,setCookie,removeCookie} from './helpers';\r\nimport {initializeBreeze,generateID} from './entity-manager-factory';\r\nimport {loadMasterfiles, loadTables, loadLookups, getLookups} from './masterfiles';\r\nimport toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {substringMatcher} from 'helpers';\r\nimport typeahead from 'typeahead';\r\nimport _ from 'underscore';\r\nimport {EntityManager, EntityQuery} from './entity-manager-factory';\r\n//import {handle, Dispatcher} from 'aurelia-flux';  \r\nimport { MultiObserver }from 'multi-observer';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {login} from 'modals/login';\r\nimport {globalindivmstr} from 'modals/globalindivmstr';\r\nimport {talentmanagergroups} from 'modals/talentmanagergroups';\r\nimport settings from './settings';\r\n\r\n@inject(MultiObserver,DialogService)\r\nexport class group_individual {\r\n\tmasterFilesLoaded=false;\r\n\tmodalTalentManager;\r\n\tmodalIndivMstr;\r\n\tgrpMembers = [];\r\n\t//_dispatcher;\r\n\t_signal = null;\r\n\t_GLOBAL_GRP_ID = \"\";\r\n\t_GROUP_NAME = \"\";\r\n\tisDisableSave = true;\r\n\tshowingLogout=\"hidden\";\r\n\t_user=\"\";\r\n\r\n\tdisabledfindTalent=true;\r\n\tdisabledfindTM=false;\r\n\tconstructor(multiObserver,dialogService) {\r\n\r\n\t\tthis.dialogService=dialogService;\r\n\t\tif(this.dialogService.controllers.length>0)\r\n\t\t{\r\n\t\t\tfor (var i = this.dialogService.controllers.length - 1; i >= 0; i--) {\r\n\t\t\t\tthis.dialogService.controllers[i].close();\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t//initializeBreeze().then(() => {\r\n\t\t//      //have to set timeout because of IE, other templates are not loading\r\n\t\t//      // quickly and loading at same time with functions\r\n\t\t//      setTimeout(() => {\r\n\r\n\t\t//      \tif (checkCookie(\"PPMS_USER\") == \"\" || checkCookie(\"PPMS_USER\")==undefined || checkCookie(\"PPMS_USER\").indexOf('undefined')>=0)\r\n\t\t//      \t{\r\n\t\t//      \t\tthis.fnLogin();\r\n\t\t//      \t\tthis.loginDisabled=false;\r\n\t\t//      \t\tthis.logoutDisabled=true;\r\n\t\t//      \t\treturn;\r\n\t\t//      \t}\r\n\r\n\t\t//      \tthis.fnInitMasterfiles(0,\"\");\r\n\r\n\r\n\t\t//      }, 2000);\r\n\t\t//  });\r\n\r\n\t\t// toastr.options = {\r\n\t\t// \t\"closeButton\": true,\r\n\t\t// \t\"debug\": false,\r\n\t\t// \t\"positionClass\": \"toast-bottom-right\",\r\n\t\t// \t\"onclick\": null,\r\n\t\t// \t\"showDuration\": \"300\",\r\n\t\t// \t\"hideDuration\": \"1000\",\r\n\t\t// \t//\"timeOut\": \"300000\",\r\n\t\t// \t//\"extendedTimeOut\": \"1000\",\r\n\t\t// \t\"showEasing\": \"swing\",\r\n\t\t// \t\"hideEasing\": \"linear\",\r\n\t\t// \t\"showMethod\": \"fadeIn\",\r\n\t\t// \t\"hideMethod\": \"fadeOut\"\r\n\t\t// };\r\n\r\n\t\r\n\t}\r\n\r\n\r\n\t\t//this._dispatcher = Dispatcher;\r\n\t\t// this.modalTalentManager = {\r\n\t\t// \ttitle: 'Talent Managers',\r\n\t\t// \tcontent: 'modals/talentmanagergroups',\r\n\t\t// \tvalue: \"\",\r\n\t\t// \tid: generateID(),\r\n\t\t// \tbuttonTitle: \"Find Talent Manager\",\r\n\t\t// \tcleardispatch: \"clear_talentmanager_modal\"\r\n\t\t\t\r\n\t\t// };\r\n\r\n\r\n\t\t// this.modalIndivMstr = {\r\n\t\t// \ttitle: 'Talent Managers',\r\n\t\t// \tcontent: 'modals/globalindivmstr',\r\n\t\t// \tvalue: \"\",\r\n\t\t// \tid: generateID(),\r\n\t\t// \tbuttonTitle: \"Search Talent\",\r\n\t\t// \tcleardispatch: \"clear_indiv_modal\"\r\n\t\t// };\r\n\r\n\t\t// this.modalLogin = {\r\n\t\t// \ttitle: 'LOG-IN',\r\n\t\t// \tcontent: 'modals/login',\r\n\t\t// \tvalue: \"\",\r\n\t\t// \tid: generateID(),\r\n\t\t// \tbuttonTitle: \"Log In\",\r\n\t\t// \tcleardispatch: \"clear_login_modal\",\r\n\t\t// \twidth:500\r\n\t\t// };\r\n\tfindTalent()\r\n\t{\r\n\t\tthis.dialogService.open({\r\n        viewModel: globalindivmstr\r\n        }).whenClosed(response => {\r\n        \r\n        if (!response.wasCancelled) {\r\n           \r\n\t\t\t\tvar tmpgrpMembers=this.grpMembers;\r\n\t\t\t\tvar varExists = false;\r\n\t\t\t\tresponse.output\r\n\t\t\t\t.forEach((val) => {\r\n\r\n\t\t\t\t\tvarExists = false;\r\n\r\n\t\t\t\t\ttmpgrpMembers.forEach((indiv) => {\r\n\t\t\t\t\t\tif (val.GLOBAL_INDIV_ID == indiv.GLOBAL_INDIV_ID) {\r\n\t\t\t\t\t\t\tindiv.STATUS_CD = \"ACTV\";\r\n\t\t\t\t\t\t\tvarExists = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\r\n\t\t\t\t\tif (!varExists) {\r\n\t\t\t\t\t\ttmpgrpMembers.push({\r\n\t\t\t\t\t\t\tGLOBAL_INDIV_ID: val.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\t\tGLOBAL_GRP_ID: this._GLOBAL_GRP_ID,\r\n\t\t\t\t\t\t\tPERSONNEL_NAME: val.PERSONNEL_NAME,\r\n\t\t\t\t\t\t\tSTATUS_CD: \"ACTV\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\ttmpgrpMembers.forEach((all) => {\r\n\t\t\t\t\tif (all.STATUS_CD == \"\" || all.STATUS_CD === undefined)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tall.STATUS_CD = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.grpMembers=tmpgrpMembers;\r\n\r\n\t\t\t\tthis._signal = generateID();\r\n\r\n\r\n\t\t\t\r\n\r\n        } else {\r\n          \r\n        }\r\n      });\r\n\t}\r\n\r\n\tfindTalentManager()\r\n\t{\r\n\t\tthis.dialogService.open({\r\n        viewModel: talentmanagergroups\r\n        }).whenClosed(response => {\r\n        \r\n        if (!response.wasCancelled) {\r\n           \r\n\t\t\t\tthis._GLOBAL_GRP_ID = response.output.GLOBAL_GRP_ID;\r\n\t\t\t\tthis._GROUP_NAME = response.output.GROUP_NAME;\r\n\r\n\t\t\t\tthis.getGlobalIndivsFromGrpIndiv();\r\n\r\n\r\n\t\t\t\tthis.disabledfindTalent=false;\t\r\n\t\t\t\tthis.isDisableSave=false;\r\n\r\n        } else {\r\n          \r\n        }\r\n      });\r\n\t}\r\n\r\n\r\n\t//@handle('login.passed')\r\n\tLoginReady(user) {\r\n\t\t\tthis._user=user;\r\n\t\t\tsetCookie(\"PPMS_USER\", user.USER_ID+\"^\"+user.COMPANY_ID+\"^\"+user.Is_HR+\"^\"+user.Is_Branch, 30);\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"Let's Start...\", \"Success\");\r\n\t\t\tthis.disabledfindTM=false;\r\n\r\n\t\t\tthis.showingLogout=\"visible\";\r\n\t}\r\n\r\n\r\n\r\n\t\tfnInitMasterfiles(initType,output){\r\n\r\n\t\t\tif(this.masterFilesLoaded==false)\r\n            {\r\n                settings.isNavigating = true;\r\n\t\t\t\tthis._toastr = toastr;\r\n\t\t\t\ttoastr.info(\"Masterfiles...\", \"Loading please wait..\", { timeOut: 15000 });\r\n\t\t\t\tthis.loginDisabled = true;\r\n\t\t\t\tloadMasterfiles().then(() => {\r\n\t\t\t\t\tloadLookups().then(() => {\r\n\r\n\t\t\t\t\t\tthis.masterFilesLoaded = true;\r\n\r\n\t\t\t\t\t\tthis.fnPassUserObject(initType,output);\r\n                        settings.isNavigating = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.fnPassUserObject(initType,output);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfnLogin(){\r\n\t\t\tthis.dialogService.open({\r\n\t\t\t\tviewModel: login\r\n            }).whenClosed(response => {\r\n\r\n\t\t\t\tif (!response.wasCancelled) {\r\n\t\t\t\t\tthis.fnInitMasterfiles(1, response.output);\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfnPassUserObject(initType,output){\r\n\r\n\t\t\tif (initType == 1) {\r\n\r\n\r\n\t\t\t} else {\r\n\t\t\t\tvar varCookie = checkCookie(\"PPMS_USER\");\r\n\t\t\t\tvar varSplitCookie = varCookie.split('^');\r\n\t\t\t\tthis._user = {\r\n\t\t\t\t\tUSER_ID: varSplitCookie[0],\r\n\t\t\t\t\tCOMPANY_ID: varSplitCookie[1],\r\n\t\t\t\t\tIs_HR: varSplitCookie[2],\r\n\t\t\t\t\tIs_Branch: varSplitCookie[0]\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.loginDisabled = true;\r\n\t\t\t\tthis.logoutDisabled = false;\r\n\t\t\t\tthis.showingLogout = \"visible\";\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"Let's Start...\", \"Success\");\r\n\t\t\t\tthis.disabledfindTM=false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.LoginPassed(output);\r\n\r\n\t\t}\r\n\r\nLoginPassed(user) {\r\n\r\n\t\t\tthis._user = user; \r\n\r\n      setCookie(\"PPMS_USER\", user.USER_ID+\"^\"+user.COMPANY_ID+\"^\"+user.Is_HR+\"^\"+user.Is_Branch, 30);\r\n      toastr.clear();\r\n      toastr.success(\"Let's Start...\", \"Success\");\r\n\r\n      this.logoutDisabled = false;\r\n      this.loginDisabled=true;\r\n\r\n      this.showingLogout = \"visible\";\r\n\r\n      this.disabledfindTM=false;\r\n  }\r\n\r\n\r\n\r\n  logout() {\r\n  \tthis.disabledfindTM=true;\r\n  \tthis.isDisableSave=true;\r\n\tthis.clear();\r\n  \tthis.loginDisabled=false;\r\n  \tthis.logoutDisabled=true;\r\n  \tthis._user ={};\r\n  \tremoveCookie();\r\n  \tthis.showingLogout = \"hidden\";\r\n  \tthis.fnLogin();\r\n\r\n  }\r\n\t\r\n\r\n\tgetGlobalIndivsFromGrpIndiv(){\r\n\t\tthis.grpMembers=[];\r\n\t\tvar tmpIndivs = [];\r\n\t\tvar _query = EntityQuery().from('GRP_INDIV_MSTR').where(\"GLOBAL_GRP_ID\", \"==\", this._GLOBAL_GRP_ID);\r\n\t\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\tsuccess.results.forEach((all) => {\r\n\t\t\t\t\r\n\t\t\t\tgetLookups().GLOBAL_INDIV_WITH_ALIAS.forEach((item)=>{\r\n\r\n\t\t\t\t\tif(item.GLOBAL_INDIV_ID==all.GLOBAL_INDIV_ID)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttmpIndivs.push({\r\n\t\t\t\t\t\t\tGLOBAL_INDIV_ID: all.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\t\tGLOBAL_GRP_ID: all.GLOBAL_GRP_ID,\r\n\t\t\t\t\t\t\tPERSONNEL_NAME: item.PERSONNEL_NAME,\r\n\t\t\t\t\t\t\tGRP_INDIV_ID: all.GRP_INDIV_ID,\r\n\t\t\t\t\t\t\tSTATUS_CD: all.STATUS_CD\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// console.log(success.results);\r\n\t\t\t\t// \t\tconsole.log(tmpIndivs);\r\n\r\n\t\t\t\tif(success.results.length==tmpIndivs.length)\t\t\t\t\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.grpMembers=tmpIndivs;\r\n\t\t\t\t\tthis._signal = generateID();\r\n\t\t\t\t\ttoastr.success(\"Refreshed..\", \"Data Reloaded..\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// var _getIndiv = EntityQuery().from('GLOBAL_INDIV_MSTR').where(\"GLOBAL_INDIV_ID\", \"==\", all.GLOBAL_INDIV_ID);\r\n\t\t\t\t// EntityManager().executeQuery(_getIndiv).then((successIndiv) => {\r\n\r\n\t\t\t\t// \t_.each(successIndiv.results, (singleIndiv) => {\r\n\r\n\t\t\t\t// \t\ttmpIndivs.push({\r\n\t\t\t\t// \t\t\tGLOBAL_INDIV_ID: all.GLOBAL_INDIV_ID,\r\n\t\t\t\t// \t\t\tGLOBAL_GRP_ID: all.GLOBAL_GRP_ID,\r\n\t\t\t\t// \t\t\tPERSONNEL_NAME: singleIndiv.LAST_NAME + ', ' + singleIndiv.GIVEN_NAME + ' ' + singleIndiv.MIDDLE_NAME,\r\n\t\t\t\t// \t\t\tGRP_INDIV_ID: all.GRP_INDIV_ID,\r\n\t\t\t\t// \t\t\tSTATUS_CD: all.STATUS_CD\r\n\t\t\t\t// \t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t// \t\tif(success.results.length==tmpIndivs.length)\t\t\t\t\r\n\t\t\t\t// \t\t{\r\n\t\t\t\t// \t\t\tthis.grpMembers=tmpIndivs;\r\n\t\t\t\t// \t\t\tthis._signal = generateID();\r\n\t\t\t\t// \t\t\ttoastr.success(\"Refreshed..\", \"Data Reloaded..\");\r\n\t\t\t\t// \t\t}\r\n\r\n\t\t\t\t// \t});\r\n\t\t\t\t// });\r\n\t\t\r\n\t\t\t});\r\n\r\n\t\t\t\r\n\t\t});\r\n\r\n\t}\r\n\t//passed grp indiv mstr\r\n\t//@handle('pass.group')\r\n\tPassedGroup(value) {\r\n\r\n\r\n\t\t//this._dispatcher.dispatch('close.modal', this.modalIndivMstr.id);\r\n\t}\r\n\r\n\tsaveGroupIndiv() {\r\n\r\n\t\t//get existing entites\r\n\t\tvar getQueryEntities = EntityQuery().from('GRP_INDIV_MSTR').where(\"GLOBAL_GRP_ID\", \"==\", this._GLOBAL_GRP_ID);\r\n\t\tEntityManager().executeQuery(getQueryEntities).then((successEnties)=> {\r\n\r\n\t\t\t//get max grp indiv id\r\n\t\t\tvar getMax = EntityQuery().from('GRP_INDIV_MSTR').orderByDesc('GRP_INDIV_ID').take(1);\r\n\t\t\tEntityManager().executeQuery(getMax).then((successMax) => {\r\n\t\t\t\tvar getMax = 1;\r\n\r\n\t\t\t\tif (successMax.results.length > 0)\r\n\t\t\t\t\tgetMax = successMax.results[0].GRP_INDIV_ID + 1;\r\n\r\n\t\t\t\tthis.grpMembers.forEach((indiv) => {\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (indiv.GRP_INDIV_ID === undefined) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar varInsert = EntityManager().createEntity('GRP_INDIV_MSTR', {\r\n\t\t\t\t\t\t\tGLOBAL_INDIV_ID: indiv.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\t\tGLOBAL_GRP_ID: indiv.GLOBAL_GRP_ID,\r\n\t\t\t\t\t\t\tCREATED_BY: this._user.USER_ID, \r\n\t\t\t\t\t\t\tSTATUS_CD: \"ACTV\",\r\n\t\t\t\t\t\t\tCREATED_DT: new Date(Date.now()),\r\n\t\t\t\t\t\t\tGRP_INDIV_ID: getMax\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t++getMax;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tEntityManager().addEntity(varInsert);\r\n\t\t\t\t\t} \r\n\t\t\t\t\telse \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsuccessEnties.results.forEach((existingIndiv) => {\r\n\t\t\t\t\t\t\tif(existingIndiv.GLOBAL_INDIV_ID==indiv.GLOBAL_INDIV_ID)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif (indiv.STATUS_CD == \"INACTV\" && existingIndiv.STATUS_CD != \"INACTV\") {\r\n\t\t\t\t\t\t\t\t\texistingIndiv.STATUS_CD = \"INACTV\";\r\n\t\t\t\t\t\t\t\t\texistingIndiv.LAST_UPDATED_DT = Date.now();\r\n\t\t\t\t\t\t\t\t\texistingIndiv.LAST_UPDATED_BY = this._user.USER_ID;\r\n\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t} else if (indiv.STATUS_CD != existingIndiv.STATUS_CD) {\r\n\t\t\t\t\t\t\t\t\texistingIndiv.STATUS_CD = indiv.STATUS_CD;\r\n\t\t\t\t\t\t\t\t\texistingIndiv.LAST_UPDATED_DT = Date.now();\r\n\t\t\t\t\t\t\t\t\texistingIndiv.LAST_UPDATED_BY = this._user.USER_ID;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tEntityManager().saveChanges().then((success) => {\r\n\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"Talent Manager Group\");\r\n\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.getGlobalIndivsFromGrpIndiv();\r\n\t\t\t\t\t}, 1000);\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t}, (fail) => {\r\n\t\t\t\t\tconsole.log(fail);\r\n\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t});\r\n\r\n\r\n\t\t});\r\n\r\n\t\t\r\n\t}\r\n\r\n\taddIndividual() {\r\n\t\tthis.grpMembers.push({});\r\n\t}\r\n\r\n\tdeleteItem(item) { //item\r\n\t\tvar isFound = this.grpMembers.find((_item) => {\r\n\t\t\tif (_item.GLOBAL_INDIV_ID == item.GLOBAL_INDIV_ID) {\r\n\t\t\t\titem.STATUS_CD = \"INACTV\";\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis._signal = generateID();\r\n\t}\r\n\r\n\tclear(){\r\n\t\tthis.grpMembers=[];\t\t\r\n\t\tthis._GLOBAL_GRP_ID = \"\";\r\n\t\tthis._GROUP_NAME = \"\";\r\n\r\n\t\tthis.isDisableSave=true;\r\n\t\tthis.disabledfindTalent=true;\r\n\r\n\r\n\t}\r\n}","//source: https://stackoverflow.com/questions/12578507/how-to-implement-an-input-with-a-mask\r\n  export function isDigit(event){\r\n    if ((event.charCode >= 48 && event.charCode <= 57) || event.keyCode == 9 || event.keyCode == 10 || event.keyCode == 13 || event.keyCode == 8 || event.keyCode == 116 || event.keyCode == 46 || (event.keyCode <= 40 && event.keyCode >= 37)) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }     \r\n  }\r\n\r\n  //source: https://stackoverflow.com/questions/12578507/how-to-implement-an-input-with-a-mask\r\nexport function input_mask(id, mask){\r\n    var myMask = mask;\r\n      var myCaja = document.getElementById(id);\r\n      var myText = \"\";\r\n      var myNumbers = [];\r\n      var myOutPut = \"\"\r\n      var theLastPos = 1;\r\n      myText = myCaja.value;\r\n      //get numbers\r\n      for (var i = 0; i < myText.length; i++) {\r\n        if (!isNaN(myText.charAt(i)) && myText.charAt(i) != \" \") {\r\n            myNumbers.push(myText.charAt(i));\r\n        }\r\n      }\r\n  //write over mask\r\n      for (var j = 0; j < myMask.length; j++) {\r\n        if (myMask.charAt(j) == \"_\") { //replace \"_\" by a number \r\n            if (myNumbers.length == 0)\r\n              myOutPut = myOutPut + myMask.charAt(j);\r\n            else {\r\n              myOutPut = myOutPut + myNumbers.shift();\r\n              theLastPos = j + 1; //set caret position\r\n            }\r\n        } else {\r\n            myOutPut = myOutPut + myMask.charAt(j);\r\n        }\r\n      }\r\n\r\n      document.getElementById(id).value = myOutPut;\r\n      document.getElementById(id).setSelectionRange(theLastPos, theLastPos);\r\n  }\r\n\r\nexport function formatDate(strDate){\r\n    if(strDate == null || strDate.length == 0)\r\n      return \"\";\r\n    var dt = new Date(strDate);\r\n    var month = dt.getMonth()+1;\r\n    var day = dt.getDate();\r\n    var year = dt.getFullYear();\r\n    return ('0'+month).slice(-2)+'/'+('0'+day).slice(-2)+'/'+(\"000\"+year).slice(-4);\r\n}\r\n\r\n\r\nexport function fnSerializeCode(value)\r\n{\r\n    return btoa(value);\r\n}\r\n\r\nexport function substringMatcher (strs) {\r\n\t\r\n  return function findMatches(q, cb) {\r\n    var matches;\r\n\r\n    // an array that will be populated with substring matches\r\n    matches = [];\r\n\r\n    // regex used to determine if a string contains the substring `q`\r\n    var substrRegex = new RegExp(q, 'i');\r\n\r\n    // iterate through the pool of strings and for any string that\r\n    // contains the substring `q`, add it to the `matches` array\r\n    $.each(strs, function(i, str) {\r\n      if (substrRegex.test(str)) {\r\n        matches.push(str);\r\n      }\r\n    });\r\n\r\n    cb(matches);\r\n  };\r\n}\r\n\r\n\r\nexport function getFilter(varFilterArray, propertyName: object, propertyText: string)\r\n{\r\n    if (varFilterArray === undefined || varFilterArray === null || propertyName === undefined || propertyName === null || propertyName === '') {\r\n        return varFilterArray;\r\n    }\r\n    \r\n    return varFilterArray.filter(x => \r\n      (x[propertyText]===undefined?\"\":x[propertyText].toString()).indexOf(\r\n      (propertyName===undefined?\"\":propertyName).toUpperCase()) !== -1\r\n\r\n      )\r\n}\r\n\r\nexport function checkCookie(value) {\r\n  var user = getCookie(value);\r\n  if (user != \"\") {\r\n    //alert(\"Welcome again \" + user);\r\n    return user;\r\n  } else {\r\n    return \"\";\r\n    // user = prompt(\"Please enter your name:\", \"\");\r\n    // if (user != \"\" && user != null) {\r\n    //   setCookie(\"username\", user, 30);\r\n    // }\r\n  }\r\n}\r\n\r\nexport function setCookie(cname, cvalue, mins) {\r\n  var d = new Date();\r\n  //d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n  d.setTime(d.getTime() +  (60 * 60 * mins * 200));\r\n  var expires = \"expires=\" + d.toUTCString();\r\n  document.cookie = cname + \"=\" + cvalue + \"; \" + expires;\r\n}\r\n\r\nexport function removeCookie() {\r\n\r\n  //document.cookie = undefined;\r\n\r\n  var  expireAt = new Date;\r\n  expireAt.setMonth(expireAt.getMonth() - 1);\r\n\r\n  if (document.cookie != \"\") {\r\n    var crumbs = document.cookie.split(\";\");\r\n    for (var i = 0; i < crumbs.length; i++) {\r\n      var crumbName = crumbs[i].split(\"=\")[0];\r\n      document.cookie = crumbName + \"=;expires=\" + expireAt.toGMTString();\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\nexport function getCookie(cname) {\r\n   var name = cname + \"=\";\r\n   var ca = document.cookie.split(';');\r\n   for (var i = 0; i < ca.length; i++) {\r\n     var c = ca[i];\r\n     while (c.charAt(0) == ' ') c = c.substring(1);\r\n     if (c.indexOf(name) == 0) return c.substring(name.length, c.length);\r\n   }\r\n   return \"\";\r\n }\r\n\r\n\r\n\r\n//you paste this script instead to execute inside <script src=\"../bootstrap-datepicker.js\"></script>.\r\n//because jquery is not being loaded quickly before <script src=\"../bootstrap-datepicker.js\"></script> on the index file. \r\n//so error occurs bec. jquery must be initialized first\r\n//bootstrap-datepicker.js copy\r\n!function( $ ) {\r\n  \r\n  // Picker object\r\n  \r\n  var Datepicker = function(element, options){\r\n    this.element = $(element);\r\n    this.format = DPGlobal.parseFormat(options.format||this.element.data('date-format')||'mm/dd/yyyy');\r\n    this.picker = $(DPGlobal.template)\r\n              .appendTo('body')\r\n              .on({\r\n                click: $.proxy(this.click, this)//,\r\n                //mousedown: $.proxy(this.mousedown, this)\r\n              });\r\n    this.isInput = this.element.is('input');\r\n    this.component = this.element.is('.date') ? this.element.find('.add-on') : false;\r\n    \r\n    if (this.isInput) {\r\n      this.element.on({\r\n        focus: $.proxy(this.show, this),\r\n        //blur: $.proxy(this.hide, this),\r\n        keyup: $.proxy(this.update, this)\r\n      });\r\n    } else {\r\n      if (this.component){\r\n        this.component.on('click', $.proxy(this.show, this));\r\n      } else {\r\n        this.element.on('click', $.proxy(this.show, this));\r\n      }\r\n    }\r\n  \r\n    this.minViewMode = options.minViewMode||this.element.data('date-minviewmode')||0;\r\n    if (typeof this.minViewMode === 'string') {\r\n      switch (this.minViewMode) {\r\n        case 'months':\r\n          this.minViewMode = 1;\r\n          break;\r\n        case 'years':\r\n          this.minViewMode = 2;\r\n          break;\r\n        default:\r\n          this.minViewMode = 0;\r\n          break;\r\n      }\r\n    }\r\n    this.viewMode = options.viewMode||this.element.data('date-viewmode')||0;\r\n    if (typeof this.viewMode === 'string') {\r\n      switch (this.viewMode) {\r\n        case 'months':\r\n          this.viewMode = 1;\r\n          break;\r\n        case 'years':\r\n          this.viewMode = 2;\r\n          break;\r\n        default:\r\n          this.viewMode = 0;\r\n          break;\r\n      }\r\n    }\r\n    this.startViewMode = this.viewMode;\r\n    this.weekStart = options.weekStart||this.element.data('date-weekstart')||0;\r\n    this.weekEnd = this.weekStart === 0 ? 6 : this.weekStart - 1;\r\n    this.onRender = options.onRender;\r\n    this.fillDow();\r\n    this.fillMonths();\r\n    this.update();\r\n    this.showMode();\r\n  };\r\n  \r\n  Datepicker.prototype = {\r\n    constructor: Datepicker,\r\n    \r\n    show: function(e) {\r\n      this.picker.show();\r\n      this.height = this.component ? this.component.outerHeight() : this.element.outerHeight();\r\n      this.place();\r\n      $(window).on('resize', $.proxy(this.place, this));\r\n      if (e ) {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n      }\r\n      if (!this.isInput) {\r\n      }\r\n      var that = this;\r\n      $(document).on('mousedown', function(ev){\r\n        if ($(ev.target).closest('.datepicker').length == 0) {\r\n          that.hide();\r\n        }\r\n      });\r\n      this.element.trigger({\r\n        type: 'show',\r\n        date: this.date\r\n      });\r\n    },\r\n    \r\n    hide: function(){\r\n      this.picker.hide();\r\n      $(window).off('resize', this.place);\r\n      this.viewMode = this.startViewMode;\r\n      this.showMode();\r\n      if (!this.isInput) {\r\n        $(document).off('mousedown', this.hide);\r\n      }\r\n      //this.set();\r\n      this.element.trigger({\r\n        type: 'hide',\r\n        date: this.date\r\n      });\r\n    },\r\n    \r\n    set: function() {\r\n      var formated = DPGlobal.formatDate(this.date, this.format);\r\n      if (!this.isInput) {\r\n        if (this.component){\r\n          this.element.find('input').prop('value', formated);\r\n        }\r\n        this.element.data('date', formated);\r\n      } else {\r\n        this.element.prop('value', formated);\r\n      }\r\n    },\r\n    \r\n    setValue: function(newDate) {\r\n      if (typeof newDate === 'string') {\r\n        this.date = DPGlobal.parseDate(newDate, this.format);\r\n      } else {\r\n        this.date = new Date(newDate);\r\n      }\r\n      this.set();\r\n      this.viewDate = new Date(this.date.getFullYear(), this.date.getMonth(), 1, 0, 0, 0, 0);\r\n      this.fill();\r\n    },\r\n    \r\n    place: function(){\r\n      var offset = this.component ? this.component.offset() : this.element.offset();\r\n      this.picker.css({\r\n        top: offset.top + this.height,\r\n        left: offset.left\r\n      });\r\n    },\r\n    \r\n    update: function(newDate){\r\n      this.date = DPGlobal.parseDate(\r\n        typeof newDate === 'string' ? newDate : (this.isInput ? this.element.prop('value') : this.element.data('date')),\r\n        this.format\r\n      );\r\n      this.viewDate = new Date(this.date.getFullYear(), this.date.getMonth(), 1, 0, 0, 0, 0);\r\n      this.fill();\r\n    },\r\n    \r\n    fillDow: function(){\r\n      var dowCnt = this.weekStart;\r\n      var html = '<tr>';\r\n      while (dowCnt < this.weekStart + 7) {\r\n        html += '<th class=\"dow\">'+DPGlobal.dates.daysMin[(dowCnt++)%7]+'</th>';\r\n      }\r\n      html += '</tr>';\r\n      this.picker.find('.datepicker-days thead').append(html);\r\n    },\r\n    \r\n    fillMonths: function(){\r\n      var html = '';\r\n      var i = 0\r\n      while (i < 12) {\r\n        html += '<span class=\"month\">'+DPGlobal.dates.monthsShort[i++]+'</span>';\r\n      }\r\n      this.picker.find('.datepicker-months td').append(html);\r\n    },\r\n    \r\n    fill: function() {\r\n      var d = new Date(this.viewDate),\r\n        year = d.getFullYear(),\r\n        month = d.getMonth(),\r\n        currentDate = this.date.valueOf();\r\n      this.picker.find('.datepicker-days th:eq(1)')\r\n            .text(DPGlobal.dates.months[month]+' '+year);\r\n      var prevMonth = new Date(year, month-1, 28,0,0,0,0),\r\n        day = DPGlobal.getDaysInMonth(prevMonth.getFullYear(), prevMonth.getMonth());\r\n      prevMonth.setDate(day);\r\n      prevMonth.setDate(day - (prevMonth.getDay() - this.weekStart + 7)%7);\r\n      var nextMonth = new Date(prevMonth);\r\n      nextMonth.setDate(nextMonth.getDate() + 42);\r\n      nextMonth = nextMonth.valueOf();\r\n      var html = [];\r\n      var clsName,\r\n        prevY,\r\n        prevM;\r\n      while(prevMonth.valueOf() < nextMonth) {\r\n        if (prevMonth.getDay() === this.weekStart) {\r\n          html.push('<tr>');\r\n        }\r\n        clsName = this.onRender(prevMonth);\r\n        prevY = prevMonth.getFullYear();\r\n        prevM = prevMonth.getMonth();\r\n        if ((prevM < month &&  prevY === year) ||  prevY < year) {\r\n          clsName += ' old';\r\n        } else if ((prevM > month && prevY === year) || prevY > year) {\r\n          clsName += ' new';\r\n        }\r\n        if (prevMonth.valueOf() === currentDate) {\r\n          clsName += ' active';\r\n        }\r\n        html.push('<td class=\"day '+clsName+'\">'+prevMonth.getDate() + '</td>');\r\n        if (prevMonth.getDay() === this.weekEnd) {\r\n          html.push('</tr>');\r\n        }\r\n        prevMonth.setDate(prevMonth.getDate()+1);\r\n      }\r\n      this.picker.find('.datepicker-days tbody').empty().append(html.join(''));\r\n      var currentYear = this.date.getFullYear();\r\n      \r\n      var months = this.picker.find('.datepicker-months')\r\n            .find('th:eq(1)')\r\n              .text(year)\r\n              .end()\r\n            .find('span').removeClass('active');\r\n      if (currentYear === year) {\r\n        months.eq(this.date.getMonth()).addClass('active');\r\n      }\r\n      \r\n      html = '';\r\n      year = parseInt(year/10, 10) * 10;\r\n      var yearCont = this.picker.find('.datepicker-years')\r\n                .find('th:eq(1)')\r\n                  .text(year + '-' + (year + 9))\r\n                  .end()\r\n                .find('td');\r\n      year -= 1;\r\n      for (var i = -1; i < 11; i++) {\r\n        html += '<span class=\"year'+(i === -1 || i === 10 ? ' old' : '')+(currentYear === year ? ' active' : '')+'\">'+year+'</span>';\r\n        year += 1;\r\n      }\r\n      yearCont.html(html);\r\n    },\r\n    \r\n    click: function(e) {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n      var target = $(e.target).closest('span, td, th');\r\n      if (target.length === 1) {\r\n        switch(target[0].nodeName.toLowerCase()) {\r\n          case 'th':\r\n            switch(target[0].className) {\r\n              case 'switch':\r\n                this.showMode(1);\r\n                break;\r\n              case 'prev':\r\n              case 'next':\r\n                this.viewDate['set'+DPGlobal.modes[this.viewMode].navFnc].call(\r\n                  this.viewDate,\r\n                  this.viewDate['get'+DPGlobal.modes[this.viewMode].navFnc].call(this.viewDate) + \r\n                  DPGlobal.modes[this.viewMode].navStep * (target[0].className === 'prev' ? -1 : 1)\r\n                );\r\n                this.fill();\r\n                this.set();\r\n                break;\r\n            }\r\n            break;\r\n          case 'span':\r\n            if (target.is('.month')) {\r\n              var month = target.parent().find('span').index(target);\r\n              this.viewDate.setMonth(month);\r\n            } else {\r\n              var year = parseInt(target.text(), 10)||0;\r\n              this.viewDate.setFullYear(year);\r\n            }\r\n            if (this.viewMode !== 0) {\r\n              this.date = new Date(this.viewDate);\r\n              this.element.trigger({\r\n                type: 'changeDate',\r\n                date: this.date,\r\n                viewMode: DPGlobal.modes[this.viewMode].clsName\r\n              });\r\n            }\r\n            this.showMode(-1);\r\n            this.fill();\r\n            this.set();\r\n            break;\r\n          case 'td':\r\n            if (target.is('.day') && !target.is('.disabled')){\r\n              var day = parseInt(target.text(), 10)||1;\r\n              var month = this.viewDate.getMonth();\r\n              if (target.is('.old')) {\r\n                month -= 1;\r\n              } else if (target.is('.new')) {\r\n                month += 1;\r\n              }\r\n              var year = this.viewDate.getFullYear();\r\n              this.date = new Date(year, month, day,0,0,0,0);\r\n              this.viewDate = new Date(year, month, Math.min(28, day),0,0,0,0);\r\n              this.fill();\r\n              this.set();\r\n              this.element.trigger({\r\n                type: 'changeDate',\r\n                date: this.date,\r\n                viewMode: DPGlobal.modes[this.viewMode].clsName\r\n              });\r\n            }\r\n            break;\r\n        }\r\n      }\r\n    },\r\n    \r\n    mousedown: function(e){\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    },\r\n    \r\n    showMode: function(dir) {\r\n      if (dir) {\r\n        this.viewMode = Math.max(this.minViewMode, Math.min(2, this.viewMode + dir));\r\n      }\r\n      this.picker.find('>div').hide().filter('.datepicker-'+DPGlobal.modes[this.viewMode].clsName).show();\r\n    }\r\n  };\r\n  \r\n  $.fn.datepicker = function ( option, val ) {\r\n    return this.each(function () {\r\n      var $this = $(this),\r\n        data = $this.data('datepicker'),\r\n        options = typeof option === 'object' && option;\r\n      if (!data) {\r\n        $this.data('datepicker', (data = new Datepicker(this, $.extend({}, $.fn.datepicker.defaults,options))));\r\n      }\r\n      if (typeof option === 'string') data[option](val);\r\n    });\r\n  };\r\n\r\n  $.fn.datepicker.defaults = {\r\n    onRender: function(date) {\r\n      return '';\r\n    }\r\n  };\r\n  $.fn.datepicker.Constructor = Datepicker;\r\n  \r\n  var DPGlobal = {\r\n    modes: [\r\n      {\r\n        clsName: 'days',\r\n        navFnc: 'Month',\r\n        navStep: 1\r\n      },\r\n      {\r\n        clsName: 'months',\r\n        navFnc: 'FullYear',\r\n        navStep: 1\r\n      },\r\n      {\r\n        clsName: 'years',\r\n        navFnc: 'FullYear',\r\n        navStep: 10\r\n    }],\r\n    dates:{\r\n      days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"],\r\n      daysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\r\n      daysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"],\r\n      months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n      monthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\r\n    },\r\n    isLeapYear: function (year) {\r\n      return (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0))\r\n    },\r\n    getDaysInMonth: function (year, month) {\r\n      return [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month]\r\n    },\r\n    parseFormat: function(format){\r\n      var separator = format.match(/[.\\/\\-\\s].*?/),\r\n        parts = format.split(/\\W+/);\r\n      if (!separator || !parts || parts.length === 0){\r\n        throw new Error(\"Invalid date format.\");\r\n      }\r\n      return {separator: separator, parts: parts};\r\n    },\r\n    parseDate: function(date, format) {\r\n      var parts = date.split(format.separator),\r\n        date = new Date(),\r\n        val;\r\n      date.setHours(0);\r\n      date.setMinutes(0);\r\n      date.setSeconds(0);\r\n      date.setMilliseconds(0);\r\n      if (parts.length === format.parts.length) {\r\n        var year = date.getFullYear(), day = date.getDate(), month = date.getMonth();\r\n        for (var i=0, cnt = format.parts.length; i < cnt; i++) {\r\n          val = parseInt(parts[i], 10)||1;\r\n          switch(format.parts[i]) {\r\n            case 'dd':\r\n            case 'd':\r\n              day = val;\r\n              date.setDate(val);\r\n              break;\r\n            case 'mm':\r\n            case 'm':\r\n              month = val - 1;\r\n              date.setMonth(val - 1);\r\n              break;\r\n            case 'yy':\r\n              year = 2000 + val;\r\n              date.setFullYear(2000 + val);\r\n              break;\r\n            case 'yyyy':\r\n              year = val;\r\n              date.setFullYear(val);\r\n              break;\r\n          }\r\n        }\r\n        date = new Date(year, month, day, 0 ,0 ,0);\r\n      }\r\n      return date;\r\n    },\r\n    formatDate: function(date, format){\r\n      var val = {\r\n        d: date.getDate(),\r\n        m: date.getMonth() + 1,\r\n        yy: date.getFullYear().toString().substring(2),\r\n        yyyy: date.getFullYear()\r\n      };\r\n      val.dd = (val.d < 10 ? '0' : '') + val.d;\r\n      val.mm = (val.m < 10 ? '0' : '') + val.m;\r\n      var date = [];\r\n      for (var i=0, cnt = format.parts.length; i < cnt; i++) {\r\n        date.push(val[format.parts[i]]);\r\n      }\r\n      return date.join(format.separator);\r\n    },\r\n    headTemplate: '<thead>'+\r\n              '<tr>'+\r\n                '<th class=\"prev\">&lsaquo;</th>'+\r\n                '<th colspan=\"5\" class=\"switch\"></th>'+\r\n                '<th class=\"next\">&rsaquo;</th>'+\r\n              '</tr>'+\r\n            '</thead>',\r\n    contTemplate: '<tbody><tr><td colspan=\"7\"></td></tr></tbody>'\r\n  };\r\n  DPGlobal.template = '<div class=\"datepicker dropdown-menu\">'+\r\n              '<div class=\"datepicker-days\">'+\r\n                '<table class=\" table-condensed\">'+\r\n                  DPGlobal.headTemplate+\r\n                  '<tbody></tbody>'+\r\n                '</table>'+\r\n              '</div>'+\r\n              '<div class=\"datepicker-months\">'+\r\n                '<table class=\"table-condensed\">'+\r\n                  DPGlobal.headTemplate+\r\n                  DPGlobal.contTemplate+\r\n                '</table>'+\r\n              '</div>'+\r\n              '<div class=\"datepicker-years\">'+\r\n                '<table class=\"table-condensed\">'+\r\n                  DPGlobal.headTemplate+\r\n                  DPGlobal.contTemplate+\r\n                '</table>'+\r\n              '</div>'+\r\n            '</div>';\r\n\r\n}( window.jQuery );","export function configure(aurelia) {\r\n  aurelia.use\r\n    .standardConfiguration()\r\n    .developmentLogging()\r\n    .plugin('aurelia-animator-css')\r\n\t.plugin('aurelia-breeze')\r\n  .plugin('aurelia-dialog', config => {\r\n      config.useDefaults();\r\n      config.settings.lock = false;\r\n      config.settings.centerHorizontalOnly = false;\r\n      config.settings.startingZIndex = 500;\r\n    });\r\n\r\n\r\n\t//.plugin('aurelia-bs-modal')\r\n\t;\r\n  aurelia.start().then(a => a.setRoot());\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { computedFrom, customElement } from 'aurelia-framework';\r\nimport { cache_obj } from 'cache_obj';\r\nimport { initializeBreeze } from './entity-manager-factory';\r\nimport { loadMasterfiles, loadTables, loadLookups, getLookups } from './masterfiles';\r\nimport toastr from \"toastr\";\r\nimport { DialogService } from 'aurelia-dialog';\r\n// import  jquery from \"jquery\";\r\nimport { generateID } from './entity-manager-factory';\r\n//import {handle, Dispatcher} from 'aurelia-flux';  \r\nimport { checkCookie, setCookie, removeCookie, getCookie } from './helpers';\r\n//import { MultiObserver } from 'multi-observer';\r\nimport settings from './settings';\r\nimport { Router } from 'aurelia-router';\r\nimport _ from 'underscore';\r\n@inject(toastr, cache_obj, DialogService, Router) //MultiObserver\r\nexport class mainpage {\r\n\r\n\r\n    _toastr = null;\r\n    _cache_obj;\r\n    \r\n    router;\r\n    budgetAccess=false;\r\n    actualAccess = false;\r\n    talentgroupAccess = false;\r\n    buhAccess = false;\r\n    headerVisible = false;\r\n    _application = [];\r\n    _application_desc = [{ ref: 'PPID', desc: 'PROGRAM PERSONNEL INFORMATION DATABASE' },\r\n        { ref: 'PPCD', desc: 'PROGRAM PERSONNEL CONTRACT DATABASE' },\r\n        { ref: 'TSDB', desc: 'TALENT SUPPLIER INFORMATION DATABASE' },\r\n        { ref: 'TDB', desc: 'PART-TIMER INFORMATION DATABASE' },\r\n        { ref: 'PPFCS MAINTENANCE', desc: 'PROGRAM PERSONNEL FREE CAPTURE SYSTEM' }\r\n    ];\r\n    _remove = ['PROGRAM BUDGET TEMPLATE', 'ACTUALS COST PROCESSING'];\r\n    _ppfcs_modules = [];\r\n\r\n//    { APPLICATION_DESC: 'SPECIAL PROVISION MASTERLIST' },\r\n//{ APPLICATION_DESC: 'MAINTAINED FEE ADJUSTMENT' },\r\n//{ APPLICATION_DESC: 'BUDGET TEMPLATE PER JOB' },\r\n//{ APPLICATION_DESC: 'ADDTL FEE MAINTENANCE' },\r\n//{ APPLICATION_DESC: 'ALLOWED TAPING DAYS' },\r\n//{ APPLICATION_DESC: 'DOWNLOAD IPS FILE' }\r\n\r\n    _roles = [];\r\n    _application_on = true;\r\n    constructor(toastr, cache_obj, dialogService, Router) { //multiObserver\r\n        \r\n        this._cache_obj = cache_obj;\r\n        this.router = Router;\r\n\r\n        setTimeout(() => {\r\n\r\n            if (this._cache_obj.USER !== undefined)\r\n            if (this._cache_obj.USER.ROLE_CD !== undefined)\r\n            {\r\n                //console.log(this._cache_obj.USER.ROLE_CD);\r\n                if (this._cache_obj.USER.ROLE_CD.includes('ACCESSALL')) {\r\n                    this.budgetAccess = true;\r\n                    this.talentgroupAccess = true;\r\n                    this.buhAccess = true;\r\n                    this.actualAccess = true;\r\n                    this.headerVisible = true;\r\n                }\r\n                \r\n                if (_.isEmpty(this._cache_obj._ACCESS))\r\n                {\r\n                  $.post(settings.serviceNameBase + \"/UserAccess/User_Access\", {\r\n                      \"USER_ID\": this._cache_obj.USER.USER_ID,\r\n                      \"HASH\": this._cache_obj.USER.HASH\r\n                  }).done((response) => {\r\n\r\n                      this._cache_obj._ACCESS = response;\r\n\r\n                      //console.log(this._cache_obj._ACCESS);\r\n\r\n                      this._application = this._cache_obj._ACCESS.APPLICATION;\r\n\r\n                      for (var i = 0; i < this._application.length; i++) {\r\n                          for (var j = 0; j < this._application_desc.length; j++) {\r\n                              if (this._application_desc[j].ref == this._application[i].APPLICATION_DESC) {\r\n                                  this._application[i].APPLICATION_DESC = this._application_desc[j].desc;\r\n                              }\r\n                          }\r\n\r\n                          if (this._remove.includes(this._application[i].APPLICATION_DESC))\r\n                          {\r\n                              this._ppfcs_modules.push(this._application[i]);\r\n                          }\r\n                      }\r\n\r\n                      this.fnCheckAccess();\r\n                  });\r\n                }\r\n                else\r\n                {\r\n                    this._application = this._cache_obj._ACCESS.APPLICATION;\r\n                    \r\n                    for (var i = 0; i < this._application.length; i++) {\r\n                        for (var j = 0; j < this._application_desc.length; j++) {\r\n                            if (this._application_desc[j].ref == this._application[i].APPLICATION_DESC) {\r\n                                this._application[i].APPLICATION_DESC = this._application_desc[j].desc;\r\n                            }\r\n                        }\r\n\r\n                        if (this._remove.includes(this._application[i].APPLICATION_DESC)) {\r\n                            this._ppfcs_modules.push(this._application[i]);\r\n                        }\r\n                    }\r\n\r\n\r\n                    this.fnCheckAccess();\r\n                }\r\n\r\n                //else if (this._cache_obj.USER.ROLE_CD.includes('HR'))\r\n                //{\r\n                //    //this.budgetAccess = true;\r\n                //    this.router.navigateToRoute('mainview');\r\n                //}\r\n                //else if (this._cache_obj.USER.ROLE_CD.includes('PPFCS')) {\r\n                //    this.router.navigateToRoute('actual_cost'); return;\r\n                //    //this.actualAccess = true;\r\n                //    this.headerVisible = true;\r\n                //}\r\n                \r\n            }\r\n            \r\n        }, 1000);\r\n        \r\n\r\n        //if (this._cache_obj.OBSERVERS.loggedout.length==0)\r\n        //this._cache_obj.OBSERVERS.loggedout.push(() => {\r\n        //    this.logout();\r\n        //});\r\n\r\n        //if (this._cache_obj.OBSERVERS.loginPage.length == 0)\r\n        //    this._cache_obj.OBSERVERS.loginPage.push(() => {\r\n        //    //    alert(1);\r\n        //    this.fnLogin();\r\n        //});\r\n\r\n       \r\n\r\n        //initializeBreeze().then(() => {\r\n        //    //have to set timeout because of IE, other templates are not loading\r\n        //    // quickly and loading at same time with functions\r\n        //    setTimeout(() => {\r\n\r\n        //        var varCheckUser = checkCookie(\"PPMS_USER\");\r\n        //      //  console.log(varCheckUser);\r\n        //        if (varCheckUser == \"\" || varCheckUser == undefined || varCheckUser.indexOf('undefined') >= 0 || varCheckUser.split('^')[0] == \"\") {\r\n        //           // alert(0);\r\n        //            this.fnLogin();\r\n        //            this.loginDisabled = false;\r\n        //            this.logoutDisabled = true;\r\n        //            return;\r\n        //        }\r\n\r\n        //        this.fnInitMasterfiles(0, \"\");\r\n\r\n\r\n        //    }, 2000);\r\n        //});\r\n\r\n     \r\n\r\n\r\n        //this._cache_obj.OBSERVERS.logoutPage.push(() => {\r\n        //    this.logout();\r\n        //});\r\n\r\n       \r\n    }\r\n\r\n    applicationClick(item)\r\n    {\r\n        // alert(item);\r\n        if (item.APPLICATION_DESC == 'PROGRAM PERSONNEL FREE CAPTURE SYSTEM')\r\n        {\r\n            this._roles= this._cache_obj._ACCESS.ROLES.filter((all) => all.APPLICATION_ID == item.APPLICATION_ID);\r\n            this._application_on = false;\r\n        }\r\n        else\r\n        {\r\n            // console.log(item.APPLICATION_URL.replace('.ASPX', ''));\r\n            this.router.navigateToRoute(item.APPLICATION_URL.replace('.ASPX','').toLowerCase());\r\n        }\r\n        \r\n       \r\n    }\r\n\r\n    rolesClick(item) {\r\n        //console.log(item.APPLICATION_URL);\r\n        if (item.APPLICATION_URL == \"PROGRAMBUDGETTEMPLATE.ASPX\")\r\n        {\r\n            this.router.navigateToRoute('mainview');\r\n        }\r\n        else if (item.APPLICATION_URL == \"ACTUALSCOSTPROCESSING.ASPX\") {\r\n            this.router.navigateToRoute('actual_cost');\r\n        }\r\n    }\r\n    \r\n    applicationOn()\r\n    {\r\n        this._application_on = true;\r\n    }\r\n\r\n    fnCheckAccess()\r\n    {\r\n         // var varResult= getLookups().GLOBAL_INDIV_WITH_ALIAS.filter((all)=>all.ALIASES.length>0);\r\n         // console.log(varResult);\r\n        if (this._cache_obj._ACCESS.APPLICATION === undefined) return;\r\n        \r\n        var filterMenu = ['PROGRAM BUDGET TEMPLATE', 'ACTUALS COST PROCESSING'];\r\n        var varFound = this._cache_obj._ACCESS.APPLICATION.filter(all => filterMenu.includes(all.APPLICATION_DESC));\r\n        if (varFound.length == 1)\r\n        {\r\n            if (varFound == 'PROGRAM BUDGET TEMPLATE')\r\n                this.router.navigateToRoute('mainview');\r\n            else\r\n                this.router.navigateToRoute('actual_cost');\r\n        }\r\n        else\r\n        {\r\n            this.budgetAccess = true;\r\n            this.talentgroupAccess = true;\r\n            this.buhAccess = true;\r\n            this.actualAccess = true;\r\n            this.headerVisible = true;\r\n        }\r\n    }\r\n\r\n    navigateTo(title)\r\n    {\r\n        //console.log(title);\r\n        this.router.navigateToRoute(title);\r\n    }\r\n\r\n    //fnInitMasterfiles(initType, output) {\r\n\r\n    //    if (this.masterFilesLoaded == false) {\r\n\r\n    //        this._toastr = toastr;\r\n    //        toastr.clear();\r\n    //        toastr.info(\"Masterfiles...\", \"Loading please wait..\", { timeOut: 15000 });\r\n    //        this.loginDisabled = true;\r\n    //        loadMasterfiles().then(() => {\r\n    //            loadLookups().then(() => {\r\n\r\n    //                this._cache_obj.OBSERVERS.init_modal.forEach((all) => {\r\n    //                    all();\r\n    //                });\r\n\r\n\r\n\r\n    //                this.masterFilesLoaded = true;\r\n\r\n    //                this.fnPassUserObject(initType, output);\r\n\r\n    //            });\r\n    //        });\r\n    //    }\r\n    //    else {\r\n    //        this.fnPassUserObject(initType, output);\r\n    //    }\r\n\r\n    //}\r\n\r\n    //fnPassUserObject(initType, output) {\r\n    //  //  console.log(initType);\r\n    //    if (initType == 1) {\r\n\r\n\r\n    //    } else {\r\n    //        var varCookie = checkCookie(\"PPMS_USER\");\r\n    //       // console.log(varCookie)\r\n    //        var varSplitCookie = varCookie.split('^');\r\n    //        this._user = {\r\n    //            USER_ID: varSplitCookie[0],\r\n    //            COMPANY_ID: varSplitCookie[1],\r\n    //            Is_HR: varSplitCookie[2],\r\n    //            Is_Branch: varSplitCookie[3],\r\n    //            EMPLOYEE_ID: varSplitCookie[4],\r\n    //            HASH: varSplitCookie[5],\r\n    //            EMAIL_ADDRESS: varSplitCookie[6],\r\n    //        };\r\n\r\n    //        this._cache_obj.USER = this._user;\r\n    //        console.log(this._cache_obj.USER);\r\n    //        this._cache_obj.OBSERVERS.login_passed.forEach((all) => {\r\n    //            all(this._user);\r\n    //        });\r\n\r\n    //        this.loginDisabled = true;\r\n    //        this.logoutDisabled = false;\r\n    //        this.showingLogout = \"visible\";\r\n    //        toastr.clear();\r\n    //        toastr.success(\"Let's Start...\", \"Success\");\r\n    //        this.showMenus = true;\r\n    //        return;\r\n    //    }\r\n\r\n    //    this.LoginPassed(output);\r\n    //    this._cache_obj.OBSERVERS.login_passed.forEach((all) => {\r\n    //        all(output);\r\n    //    });\r\n    //}\r\n\r\n\r\n    //// @handle('login.passed')\r\n    //LoginPassed(user) {\r\n\r\n    //    this._user = user;\r\n    //   // console.log(user);\r\n    //    // total 6 hours\r\n    //    //setCookie(\"PPMS_USER\", user.USER_ID + \"^\" + user.COMPANY_ID + \"^\" + user.Is_HR + \"^\" + user.Is_Branch, 30);\r\n    //    setCookie(\"PPMS_USER\", user.USER_ID + \"^\" + user.COMPANY_ID + \"^\" + user.Is_HR + \"^\"\r\n    //        + user.Is_Branch + \"^\" + user.EMPLOYEE_ID + \"^\" + user.HASH + \"^\" + user.EMAIL_ADDRESS, 30);\r\n\r\n        \r\n    //    toastr.clear();\r\n    //    toastr.success(\"Let's Start...\", \"Success\");\r\n\r\n    //    this.showMenus = true;\r\n    //    // this._cache_obj.OBSERVERS.close_modal.forEach((all) => {\r\n    //    //   all(this.modalLogin.id);\r\n    //    // });\r\n\r\n    //    this.loginDisabled = true;\r\n    //    this.logoutDisabled = false;\r\n    //    // this._cache_obj.OBSERVERS.enable_modal_button.forEach((all) => {\r\n    //    //   all(this.modalLogin.id, false);\r\n    //    // });\r\n\r\n\r\n    //    this.showingLogout = \"visible\";\r\n\r\n    //}\r\n\r\n    //logout() {\r\n    //    this.showMenus = false;\r\n      \r\n    //    // this._cache_obj.OBSERVERS.open_modal.forEach((all) => {\r\n    //    //   all(this.modalLogin.id, true);\r\n    //    // });\r\n    \r\n    //    this.fnLogin();\r\n    //    // this._cache_obj.OBSERVERS.enable_modal_button.forEach((all) => {\r\n    //    //   all(this.modalLogin.id, true);\r\n    //    // });\r\n\r\n    //    //this._cache_obj.OBSERVERS.loggedout.forEach((all) => {\r\n    //    //    all();\r\n    //    //});\r\n\r\n    //    this._cache_obj.OBSERVERS.clear_log.forEach((all) => {\r\n    //        all();\r\n    //    });\r\n\r\n    //    this._cache_obj.USER = {};\r\n    //    removeCookie();\r\n    //    this.showingLogout = \"hidden\";\r\n\r\n    //}\r\n\r\n\r\n    //fnLogin() {\r\n    //    this.showMenus = false;\r\n    //    this.dialogService.open({\r\n    //        viewModel: login\r\n    //    }).whenClosed(response => {\r\n    //        //response.closeResult((result) => {\r\n    //        //    console.log(result);\r\n    //        //});\r\n\r\n    //        if (!response.wasCancelled) {\r\n    //            this.fnInitMasterfiles(1, response.output);\r\n    //        } else {\r\n\r\n    //        }\r\n    //    });\r\n    //}\r\n}","import {\r\n  EntityManager,EntityQuery\r\n}\r\nfrom './entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport breeze from 'breeze-client';\r\n\r\nvar globalIndiv = null;\r\nvar talentSuppComp = null;\r\nvar talentSuppIndiv = null;\r\nvar globalAlias = null;\r\nvar globalCompany=[];\r\nvar globalGrp = null;\r\nvar jobMstr;\r\nvar jobGrp;\r\nvar category;\r\nvar lookups = null;\r\nvar reference;\r\nvar entityNames = {\r\n  //PROGRAM_MSTR: \"PROGRAM_MSTR\",\r\n  IO_CC_MSTR: \"IO_CC_MSTR\",\r\n  GLOBAL_INDIV_MSTR: \"GLOBAL_INDIV_MSTR\",\r\n  //GLOBAL_MSTR: \"GLOBAL_MSTR\",\r\n  GLOBAL_ALIAS_TRX: \"GLOBAL_ALIAS_TRX\",\r\n  GLOBAL_COMPANY_MSTR: \"GLOBAL_COMPANY_MSTR\",\r\n  COMPANY_MSTR: \"COMPANY_MSTR\",\r\n  DIVISION_MSTR: \"DIVISION_MSTR\",\r\n  JOB_GRP_MSTR: \"JOB_GRP_MSTR\",\r\n  JOB_MSTR: \"JOB_MSTR\",\r\n  LOCATION_MSTR: \"LOCATION_MSTR\",\r\n  CATEGORY_MSTR: \"CATEGORY_MSTR\",\r\n  REFERENCE_CD_MSTR: \"REFERENCE_CD_MSTR\",\r\n  USER_PROFILE_MSTR: \"USER_PROFILE_MSTR\",\r\n  USER_ROLE_TRX: \"USER_ROLE_TRX\",\r\n  BDGT_TMPL_HDR: \"BDGT_TMPL_HDR\",\r\n  GRP_INDIV_MSTR: \"GRP_INDIV_MSTR\",\r\n  GLOBAL_GRP_MSTR: \"GLOBAL_GRP_MSTR\",\r\n  TALENT_SUPPLIER_COMP_MSTR: \"TALENT_SUPPLIER_COMP_MSTR\",\r\n  TALENT_SUPPLIER_INDIV_MSTR: \"TALENT_SUPPLIER_INDIV_MSTR\",\r\n  PROGRAM_GENRE_MSTR: \"PROGRAM_GENRE_MSTR\",\r\n  TELECAST_MODE_MSTR: \"TELECAST_MODE_MSTR\",\r\n  EPISODE_MODE_MSTR: \"EPISODE_MODE_MSTR\",\r\n  EPISODE_TYPE_MSTR: \"EPISODE_TYPE_MSTR\",\r\n  MODULE_ACCESS_TRX: \"MODULE_ACCESS_TRX\"\r\n  // ,\r\n  // PROGRAM_USER_TRX: \"PROGRAM_USER_TRX\"\r\n};\r\n\r\nexport function loadMasterfiles() {\r\n  try {\r\n    // getAliasTrx().then((a)=>{\r\n    //   console.log(a);\r\n\r\n    // });\r\n   if(lookups!=null) {\r\n      return new Promise((resolve)=>{ return resolve(true); });\r\n   }\r\n\r\n\r\n    return Promise.all([\r\n//      getPrograms(),\r\n      getGlobalIndiv(),\r\n      getTalentSupplierComp(),\r\n      getTalentSupplierIndiv(),\r\n      getAliasTrx(),\r\n      getGlobalGrp(),\r\n\r\n      //getIOCC(),\r\n      //getGlobalMstr(),\r\n      getGlobalCompany(),\r\n      getCompany(),\r\n      getCategory(),\r\n      getDivision(),\r\n      getReference(),\r\n      getJobGroup(),\r\n      getJob(),\r\n      getLocation(),\r\n      getUsers(),\r\n      getUserTrx(),\r\n      getBdgtHdr(),\r\n      getGrpIndiv(),\r\n\r\n      getProgramGenre(),\r\n      getTelecastMode(),\r\n      getEpisodeMode(),\r\n      getEpisodeType()\r\n      //getProgramUser()\r\n      //getModuleAccess()\r\n      ]);\r\n  } catch (e) {\r\n    Promise.resolve(false);\r\n  }\r\n}\r\n\r\nexport function fnLoadIndiv(){\r\n    //globalIndiv = getLocalSelect('GLOBAL_INDIV_MSTR', 'LAST_NAME', 'GLOBAL_INDIV_ID, LAST_NAME, GIVEN_NAME, MIDDLE_NAME', true);\r\n    //talentSuppComp =  getLocalSelect('TALENT_SUPPLIER_COMP_MSTR', 'COMPANY_NAME', 'SUPPLIER_COMP_GLOBAL_ID, COMPANY_NAME', true);\r\n    //talentSuppIndiv = getLocalSelect('TALENT_SUPPLIER_INDIV_MSTR', 'LAST_NAME', 'TALENT_SUPPLIER_INDIV_ID, LAST_NAME, GIVEN_NAME, MIDDLE_NAME', true);\r\n    //globalAlias = getLocalSelect('GLOBAL_ALIAS_TRX', 'ALIAS_NAME','GLOBAL_ALIAS_ID, GLOBAL_ID, ALIAS_NAME', true);\r\n    //globalGrp = getLocalSelect('GLOBAL_GRP_MSTR','GROUP_NAME', 'GLOBAL_GRP_ID, GROUP_NAME', true);\r\n    //jobMstr = getLocalSelect('JOB_MSTR', 'JOB_ID','JOB_ID, JOB_GRP_ID, JOB_DESC', true);\r\n    //jobGrp = getLocalSelect('JOB_GRP_MSTR', 'JOB_GRP_ID','JOB_GRP_ID, JOB_GRP_CD, JOB_GRP_DESC, COMPANY_ID', true);\r\n    //category = getLocalSelect('CATEGORY_MSTR', 'CATEGORY_ID','CATEGORY_ID, CATEGORY_CD, CATEGORY_DESC, COMPANY_ID', true);\r\n    //reference = getLocal('REFERENCE_CD_MSTR', 'REF_DESC', true);\r\n}\r\n\r\nexport function loadLookups() {\r\n\r\n   if(lookups!=null) {\r\n      return new Promise((resolve)=>{ return resolve(true); });\r\n   }\r\n\r\n\r\n  fnLoadIndiv();\r\n\r\n  return new Promise((resolve, reject) => {\r\n\r\n\r\n    lookups = {\r\n      //PROGRAM_MSTR: getLocal('PROGRAM_MSTR', 'PROGRAM_TITLE', true),\r\n      //IO_CC_MSTR: getLocal('IO_CC_MSTR', 'IO_DESC', true),\r\n      GLOBAL_INDIV_MSTR: globalIndiv,\r\n      TALENT_SUPPLIER_COMP_MSTR: talentSuppComp,\r\n      TALENT_SUPPLIER_INDIV_MSTR: talentSuppIndiv,\r\n      //GLOBAL_MSTR: getLocal('GLOBAL_MSTR', 'GLOBAL_ID', true),\r\n      GLOBAL_ALIAS_TRX: globalAlias,\r\n      GLOBAL_INDIV_WITH_ALIAS: getGLOBALINDIVandALIAS(),\r\n      JOB_GRP_CATEGORY: getJOB_GRP_CATEGORY(),\r\n      GLOBAL_COMPANY_MSTR: globalCompany,\r\n      COMPANY_MSTR: getLocal('COMPANY_MSTR', 'COMPANY_ID', true),\r\n      DIVISION_MSTR: getLocal('DIVISION_MSTR', 'DIVISION_NAME', true),\r\n      JOB_GRP_MSTR: jobGrp,\r\n      JOB_MSTR: jobMstr,\r\n      LOCATION_MSTR: getLocal('LOCATION_MSTR', 'LOCATION_DESC', true),\r\n      CATEGORY_MSTR: category,\r\n      REFERENCE_CD_MSTR: reference,\r\n      USER_PROFILE_MSTR: getLocal('USER_PROFILE_MSTR', 'USER_ID', true),\r\n      USER_ROLE_TRX: getLocal('USER_ROLE_TRX', 'USER_ID', true),\r\n      BDGT_TMPL_HDR: getLocal('BDGT_TMPL_HDR', 'BDGT_TMPL_ID', true),\r\n      GRP_INDIV_MSTR: getLocal('GRP_INDIV_MSTR', 'GRP_INDIV_ID', true),\r\n      GLOBAL_GRP_MSTR: globalGrp,//getLocal('GLOBAL_GRP_MSTR', 'GROUP_NAME', true),\r\n      PROGRAM_GENRE_MSTR: getLocal('PROGRAM_GENRE_MSTR', 'PROGRAM_GENRE_CD', true),\r\n      TELECAST_MODE_MSTR: getLocal('TELECAST_MODE_MSTR', 'TELECAST_MODE_CD', true),\r\n      EPISODE_MODE_MSTR: getLocal('EPISODE_MODE_MSTR', 'EPISODE_MODE_CD', true),\r\n      EPISODE_TYPE_MSTR: getLocal('EPISODE_TYPE_MSTR', 'EPISODE_TYPE_CD', true),\r\n      //PROGRAM_USER_TRX: getLocal('PROGRAM_USER_TRX', 'USER_ID', true),\r\n      PAYMENT_TERM: getPaymentTerm(),\r\n\r\n      //MODULE_ACCESS_TRX: getLocal('MODULE_ACCESS_TRX', 'MODULE_ACCESS_ID',true)\r\n\r\n    };\r\n\r\n    //Insert dummy Budget Header\r\n    var unchanged = breeze.EntityState.Unchanged;\r\n    var initialValues = {\r\n        'BDGT_TMPL_ID': 0,\r\n      };\r\n    EntityManager().createEntity(\"BDGT_TMPL_HDR\", initialValues, unchanged);\r\n\r\n    resolve(true);\r\n\r\n  });\r\n\r\n}\r\n\r\nexport function getJobByGlobalCompany(val)\r\n{\r\n\r\n        var varCheck = globalCompany.find((all) => all.GLOBAL_ID == val);\r\n        var varJob = {\r\n          JOB_ID: \"\",\r\n          JOB_DESC: \"\"\r\n        };\r\n\r\n        if (varCheck !== undefined) {\r\n\r\n          varJob.JOB_ID = varCheck.JOB_ID;\r\n\r\n          var varJOB_p = jobMstr.find((all) => all.JOB_ID == varJob.JOB_ID);\r\n\r\n          varJob.JOB_DESC = varJOB_p.JOB_DESC;\r\n\r\n          var varGrpCategory = getJOB_GRP_CATEGORY().find((all) => all.JOB_GRP_ID == varJOB_p.JOB_GRP_ID);\r\n          varJob.CATEGORY_ID = varGrpCategory.CATEGORY_ID;\r\n          varJob.CATEGORY_DESC = varGrpCategory.CATEGORY_DESC;\r\n          varJob.COMPANY_ID = varGrpCategory.COMPANY_ID;\r\n\r\n        }\r\n\r\n        return varJob;\r\n\r\n}\r\n\r\nexport function getJobByName(val)\r\n{\r\n\r\n        var varJOB_p = jobMstr.find((all) => all.JOB_DESC == val);\r\n\r\n        var varJob = {\r\n          JOB_ID: \"\",\r\n          JOB_DESC: \"\"\r\n        };\r\n\r\n        if (varJOB_p !== undefined) {\r\n\r\n          varJob.JOB_ID = varJOB_p.JOB_ID;\r\n\r\n          varJob.JOB_DESC = varJOB_p.JOB_DESC;\r\n\r\n          var varGrpCategory = getJOB_GRP_CATEGORY().find((all) => all.JOB_GRP_ID == varJOB_p.JOB_GRP_ID);\r\n          varJob.CATEGORY_ID = varGrpCategory.CATEGORY_ID;\r\n          varJob.CATEGORY_DESC = varGrpCategory.CATEGORY_DESC;\r\n          varJob.COMPANY_ID = varGrpCategory.COMPANY_ID;\r\n\r\n        }\r\n\r\n        return varJob;\r\n\r\n}\r\n\r\nexport function getLookups() {\r\n  return lookups;\r\n}\r\n\r\n// export function getPrograms() {\r\n//   var query = EntityQuery().from('PROGRAM_MSTR')\r\n//   return EntityManager().executeQuery(query).then(function() {\r\n//     processLookups(entityNames.PROGRAM_MSTR, {\r\n//       'PROGRAM_ID': 0, //breeze.core.getUuid()\r\n//       'PROGRAM_TITLE': ' [SELECT A VALUE]'\r\n//     });\r\n//   }, queryFailed);\r\n\r\n\r\n//   /*return EntityQuery().from('PROGRAM_MSTR')\r\n//     .using(EntityManager()).execute()\r\n//     .then(\r\n//       function() {\r\n//         processLookups(entityNames.PROGRAM_MSTR, {\r\n//           'PROGRAM_ID': 0, //breeze.core.getUuid()\r\n//           'PROGRAM_TITLE': '[SELECT A VALUE]'\r\n//         });\r\n//       }, queryFailed);*/\r\n// }\r\n\r\nexport function getPaymentTerm(){\r\n  var paymentterm=[];\r\n  reference.forEach((ref) => {\r\n          if (ref.REF_GRP_CD == 'PYMNT_TERM_CD') {\r\n            paymentterm.push(ref);\r\n          }\r\n        });\r\n  return paymentterm;\r\n}\r\n\r\n\r\nexport function getGLOBALINDIVandALIAS(){\r\n\r\n  var varTmpObject=[];\r\n  var varGlobalAlias = globalAlias;\r\n  var varGlobalIndiv = globalIndiv ;\r\n  var varTalentComp = talentSuppComp;\r\n  var varTalentSuppIndiv = talentSuppIndiv;\r\n  var varGlobalGrp = globalGrp;\r\n\r\n  varGlobalIndiv.forEach((all) => {\r\n\r\n    var varAliases=[];\r\n    var varAlias = \"\";\r\n\r\n    if (all.ALIAS != \"\" && all.ALIAS != null) {\r\n      varAlias = \" (\" + all.ALIAS;\r\n      varAliases.push(all.ALIAS);\r\n    }\r\n\r\n    var varFoundAlias=varGlobalAlias.filter(item=>item.GLOBAL_ID==all.GLOBAL_INDIV_ID);\r\n\r\n    if(varFoundAlias.length>0)\r\n        varFoundAlias.forEach((alias)=>{\r\n\r\n        if (varAlias == \"\")\r\n        varAlias = \" (\" + alias.ALIAS_NAME;\r\n        else if (varAlias == \"(\")\r\n          varAlias = alias.ALIAS_NAME;\r\n        else\r\n          varAlias += \",\" + alias.ALIAS_NAME;\r\n\r\n          varAliases.push(alias.ALIAS_NAME);\r\n\r\n        });\r\n\r\n        if (varAlias != \"\") {\r\n          varAlias += \")\";\r\n        }\r\n\r\n    varTmpObject.push({\r\n      PERSONNEL_NAME: ((all.LAST_NAME + ', ' + all.GIVEN_NAME + ' ' + all.MIDDLE_NAME).trim() + varAlias).toUpperCase(),\r\n      GLOBAL_INDIV_ID: all.GLOBAL_INDIV_ID,\r\n      PERSONNEL_INFO_SRC: 'INDIV',\r\n      ALIASES: varAliases,\r\n      LAST_NAME: all.LAST_NAME,\r\n      GIVEN_NAME: all.GIVEN_NAME,\r\n      MIDDLE_NAME: all.MIDDLE_NAME\r\n    });\r\n\r\n  });\r\n\r\n\r\n  varTalentSuppIndiv.forEach((all) => {\r\n\r\n    var varAlias = \"\";\r\n    var varAliases=[];\r\n    if (all.ALIAS != \"\" && all.ALIAS != null) {\r\n      varAlias = \" (\" + all.ALIAS;\r\n      varAliases.push(all.ALIAS);\r\n    }\r\n\r\n   var varFoundAlias=varGlobalAlias.filter(item=>item.GLOBAL_ID==all.SUPPLIER_INDIV_GLOBAL_ID);\r\n\r\n    if(varFoundAlias.length>0)\r\n        varFoundAlias.forEach((alias)=>{\r\n        if (varAlias == \"\")\r\n        varAlias = \" (\" + alias.ALIAS_NAME;\r\n        else if (varAlias == \"(\")\r\n          varAlias = alias.ALIAS_NAME;\r\n        else\r\n          varAlias += \",\" + alias.ALIAS_NAME;\r\n\r\n         varAliases.push(alias.ALIAS_NAME);\r\n    });\r\n\r\n        if (varAlias != \"\") {\r\n          varAlias += \")\";\r\n        }\r\n\r\n\r\n    varTmpObject.push({\r\n      PERSONNEL_NAME: ((all.LAST_NAME + ', ' + all.GIVEN_NAME + ' ' + all.MIDDLE_NAME).trim() + varAlias).toUpperCase(),\r\n      GLOBAL_INDIV_ID: all.SUPPLIER_INDIV_GLOBAL_ID,\r\n      PERSONNEL_INFO_SRC: 'TSUPPLIER',\r\n      ALIASES: varAliases\r\n    });\r\n\r\n  });\r\n\r\n\r\n  varTalentComp.forEach((all) => {\r\n    varTmpObject.push({\r\n      PERSONNEL_NAME: all.COMPANY_NAME.toUpperCase(),\r\n      GLOBAL_INDIV_ID: all.SUPPLIER_COMP_GLOBAL_ID,\r\n      PERSONNEL_INFO_SRC: 'TCOMP',\r\n      ALIASES:[]\r\n    });\r\n\r\n  });\r\n\r\n\r\n varGlobalGrp.forEach((all) => {\r\n    varTmpObject.push({\r\n      PERSONNEL_NAME: all.GROUP_NAME.toUpperCase(),\r\n      GLOBAL_INDIV_ID: all.GLOBAL_GRP_ID,\r\n      PERSONNEL_INFO_SRC: 'GLGRP',\r\n      ALIASES:[]\r\n    });\r\n\r\n  });\r\n\r\n\r\n\r\n      return varTmpObject;\r\n\r\n}\r\n\r\n\r\n\r\nexport function getJOB_GRP_CATEGORY(){\r\n\r\n  var varTmpObject=[];\r\n  var p_jobMstr = jobMstr;\r\n  var p_jobGrp = jobGrp;\r\n  var p_category = category;\r\n\r\n  // console.log(p_jobMstr);\r\n  // console.log(p_jobGrp);\r\n\r\n  p_jobMstr.forEach((all) => {\r\n    //console.log(all);\r\n    var varFindGrp = p_jobGrp.find((allGrp)=>allGrp.JOB_GRP_ID==all.JOB_GRP_ID);\r\n    // console.log(varFindGrp);\r\n    varTmpObject.push({\r\n      JOB_ID: all.JOB_ID,\r\n      JOB_GRP_ID: varFindGrp.JOB_GRP_ID,\r\n      JOB_GRP_CD: varFindGrp.JOB_GRP_CD,\r\n      JOB_GRP_DESC: (varFindGrp!==undefined?varFindGrp.JOB_GRP_DESC:\"\"),\r\n      CATEGORY_ID: \"\",\r\n      CATEGORY_CD: \"\",\r\n      CATEGORY_DESC: \"\",\r\n      COMPANY_ID: varFindGrp.COMPANY_ID,\r\n      JOB_DESC: all.JOB_DESC\r\n    });\r\n\r\n  });\r\n\r\n\r\n  varTmpObject.forEach((all) => {\r\n\r\n      var varFindCategory = p_category.find((allCategory) => allCategory.CATEGORY_CD == all.JOB_GRP_CD && allCategory.COMPANY_ID == all.COMPANY_ID);\r\n      //console.log(varFindCategory);\r\n    if (varFindCategory !== undefined) {\r\n      all.CATEGORY_CD = varFindCategory.CATEGORY_CD;\r\n      all.CATEGORY_ID = varFindCategory.CATEGORY_ID;\r\n      all.CATEGORY_DESC = varFindCategory.CATEGORY_DESC;\r\n    }\r\n\r\n  });\r\n\r\n      return varTmpObject;\r\n\r\n}\r\n\r\n// export function getModuleAccess() {\r\n//   return EntityQuery().from('MODULE_ACCESS_TRX').expand(\"MODULE_MSTR\")\r\n//     .using(EntityManager()).execute()\r\n//     .then(\r\n//       ()=>{\r\n\r\n//       }, queryFailed);\r\n// }\r\n\r\n\r\nexport function getProgramGenre() {\r\n  return EntityQuery().from('PROGRAM_GENRE_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      ()=>{}, queryFailed);\r\n}\r\n\r\nexport function getTelecastMode() {\r\n  return EntityQuery().from('TELECAST_MODE_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      ()=>{}, queryFailed);\r\n}\r\n\r\nexport function getEpisodeMode() {\r\n  return EntityQuery().from('EPISODE_MODE_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      ()=>{}, queryFailed);\r\n}\r\n\r\nexport function getEpisodeType() {\r\n  return EntityQuery().from('EPISODE_TYPE_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      ()=>{}, queryFailed);\r\n}\r\n\r\n\r\n// export function getProgramUser() {\r\n//   return EntityQuery().from('PROGRAM_USER_TRX')\r\n//     .using(EntityManager()).execute()\r\n//     .then(\r\n//       ()=>{}, queryFailed);\r\n// }\r\n\r\n\r\n\r\nexport function getTalentSupplierComp() {\r\n  // return EntityQuery().from('TALENT_SUPPLIER_COMP_MSTR').select('TALENT_SUPPLIER_COMP_MSTR', 'COMPANY_NAME', 'SUPPLIER_COMP_GLOBAL_ID, COMPANY_NAME')\r\n  //   .using(EntityManager()).execute()\r\n  //   .then(\r\n  //     ()=>{}, queryFailed);\r\n\r\n    // var _query = EntityQuery().from('TALENT_SUPPLIER_COMP_MSTR').select('TALENT_SUPPLIER_COMP_MSTR', 'COMPANY_NAME', 'SUPPLIER_COMP_GLOBAL_ID, COMPANY_NAME');\r\n    //   EntityManager().executeQuery(_query).then((success) => {\r\n    //       console.log(success);\r\n    //   });\r\n\r\n     return new Promise((resolve)=>{\r\n      EntityQuery().from('TALENT_SUPPLIER_COMP_MSTR').select('COMPANY_NAME, SUPPLIER_COMP_GLOBAL_ID, COMPANY_NAME')\r\n     .using(EntityManager()).execute()\r\n     .then((success)=>{\r\n      talentSuppComp = success.results;\r\n      resolve(true);\r\n    });\r\n\r\n   });\r\n\r\n}\r\n\r\n\r\nexport function getTalentSupplierIndiv() {\r\n  // return EntityQuery().from('TALENT_SUPPLIER_INDIV_MSTR')\r\n  //   .using(EntityManager()).execute()\r\n  //   .then(\r\n  //     ()=>{}, queryFailed);\r\n  //\r\n\r\n\r\n    return new Promise((resolve)=>{\r\n      EntityQuery().from('TALENT_SUPPLIER_INDIV_MSTR').select('LAST_NAME, TALENT_SUPPLIER_INDIV_ID, LAST_NAME, GIVEN_NAME, MIDDLE_NAME')\r\n     .using(EntityManager()).execute()\r\n     .then((success)=>{\r\n      talentSuppIndiv = success.results;\r\n      resolve(true);\r\n    });\r\n\r\n   });\r\n\r\n}\r\n\r\n\r\n\r\nexport function getGlobalGrp() {\r\n\r\n  // return EntityQuery().from('GLOBAL_GRP_MSTR').select('GLOBAL_GRP_ID, GROUP_NAME')\r\n  //   .using(EntityManager()).execute()\r\n  //   .then(\r\n  //     ()=>{}, queryFailed);\r\n   return new Promise((resolve)=>{\r\n      EntityQuery().from('GLOBAL_GRP_MSTR').select('GLOBAL_GRP_ID, GROUP_NAME')\r\n     .using(EntityManager()).execute()\r\n     .then((success)=>{\r\n      globalGrp = success.results;\r\n      resolve(true);\r\n    });\r\n\r\n   });\r\n}\r\n\r\n\r\nexport function getGrpIndiv() {\r\n  return EntityQuery().from('GRP_INDIV_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      ()=>{}, queryFailed);\r\n}\r\n\r\n\r\nexport function getBdgtHdr() {\r\n  return EntityQuery().from('BDGT_TMPL_HDR').take(1)\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      ()=>{}, queryFailed);\r\n}\r\n\r\nexport function getIOCC() {\r\n  return EntityQuery().from('IO_CC_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      function() {\r\n        processLookups(entityNames.IO_CC_MSTR, {\r\n          'CHARGE_CD': breeze.core.getUuid(),\r\n          'IO_DESC': '[SELECT A VALUE]'\r\n        });\r\n\r\n      }, queryFailed);\r\n}\r\n\r\nexport function getGlobalIndiv() {\r\n return new Promise((resolve)=>{\r\n   EntityQuery().from('GLOBAL_INDIV_MSTR').select('GLOBAL_INDIV_ID,GIVEN_NAME,MIDDLE_NAME,LAST_NAME')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    globalIndiv = success.results;\r\n    resolve(true);\r\n  });\r\n\r\n });\r\n\r\n}\r\n\r\n// export function getGlobalMstr() {\r\n//   return EntityQuery().from('GLOBAL_MSTR')\r\n//     .using(EntityManager()).execute();\r\n// }\r\nexport function getAliasTrx() {\r\n  // return EntityQuery().from('GLOBAL_ALIAS_TRX')\r\n  //   .using(EntityManager()).execute();\r\n\r\n  //globalAlias\r\n//'GLOBAL_GRP_MSTR','GROUP_NAME', 'GLOBAL_GRP_ID, GROUP_NAME'\r\n\r\nreturn new Promise((resolve)=>{\r\n   EntityQuery().from('GLOBAL_ALIAS_TRX').select('GLOBAL_ALIAS_ID,ALIAS_NAME,GLOBAL_ID')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    globalAlias = success.results;\r\n    resolve(true);\r\n  });\r\n\r\n });\r\n\r\n}\r\nexport function getGlobalCompany() {\r\n\r\nreturn new Promise((resolve)=>{\r\n   EntityQuery().from('GLOBAL_COMPANY_MSTR').select('GLOBAL_COMPANY_ID, GLOBAL_ID, JOB_ID, COMPANY_ID, STATUS_CD')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    globalCompany = success.results;\r\n    resolve(true);\r\n  });\r\n\r\n });\r\n\r\n  // return EntityQuery().from('GLOBAL_COMPANY_MSTR').select('GLOBAL_COMPANY_ID, GLOBAL_ID, JOB_ID, COMPANY_ID')\r\n  //   .using(EntityManager()).execute();\r\n}\r\nexport function getCompany() {\r\n  var query = EntityQuery().from('COMPANY_MSTR')\r\n  return EntityManager().executeQuery(query).then(function() {\r\n    processLookups(entityNames.COMPANY_MSTR, {\r\n      'COMPANY_ID': 0, //breeze.core.getUuid()\r\n      'COMPANY_NAME': ' [SELECT A VALUE]'\r\n    });\r\n  }, queryFailed);\r\n\r\n\r\n  /*return EntityQuery().from('PROGRAM_MSTR')\r\n    .using(EntityManager()).execute()\r\n    .then(\r\n      function() {\r\n        processLookups(entityNames.PROGRAM_MSTR, {\r\n          'PROGRAM_ID': 0, //breeze.core.getUuid()\r\n          'PROGRAM_TITLE': '[SELECT A VALUE]'\r\n        });\r\n      }, queryFailed);*/\r\n}\r\nexport function getCategory() {\r\n\r\n  // var query = EntityQuery().from('CATEGORY_MSTR')\r\n  // return EntityManager().executeQuery(query).then(function() {\r\n  //   processLookups(entityNames.CATEGORY_MSTR, {\r\n  //     'CATEGORY_ID': 0, //breeze.core.getUuid()\r\n  //     'CATEGORY_DESC': ' [SELECT A VALUE]'\r\n  //   });\r\n  // }, queryFailed);\r\n\r\n\r\nreturn new Promise((resolve)=>{\r\n   EntityQuery().from('CATEGORY_MSTR')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    category = success.results;\r\n    category.push({ 'CATEGORY_ID': 0,\r\n    'CATEGORY_DESC': ' [SELECT A VALUE]'});\r\n    resolve(true);\r\n  });\r\n\r\n });\r\n\r\n}\r\nexport function getDivision() {\r\n  var query = EntityQuery().from('DIVISION_MSTR');//.select('DIVISION_ID,DIVISION_CD,DIVISION_NAME')\r\n  return EntityManager().executeQuery(query).then(function() {\r\n    processLookups(entityNames.DIVISION_MSTR, {\r\n      'DIVISION_ID': 0, //breeze.core.getUuid()\r\n      'DIVISION_NAME': ' [SELECT A VALUE]'\r\n    });\r\n  }, queryFailed);\r\n}\r\nexport function getReference() {\r\n\r\n  // var query = EntityQuery().from('REFERENCE_CD_MSTR');//.select('REF_CD,REF_GRP_CD,REF_DESC')\r\n  // return EntityManager().executeQuery(query).then(function() {\r\n  //   processLookups(entityNames.REFERENCE_CD_MSTR, {\r\n  //     'REF_CD': breeze.core.getUuid(),\r\n  //     'REF_DESC': ' [SELECT A VALUE]',\r\n  //     'REF_GRP_CD': breeze.core.getUuid()\r\n  //   });\r\n  // }, queryFailed);\r\n\r\n\r\n\r\n    return new Promise((resolve)=>{\r\n   EntityQuery().from('REFERENCE_CD_MSTR').select('REF_CD,REF_GRP_CD,REF_DESC')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    reference = success.results;\r\n   // jobGrp.push({ 'REF_CD': breeze.core.getUuid(), 'REF_DESC':' [SELECT A VALUE]','REF_GRP_CD':breeze.core.getUuid()});\r\n    resolve(true);\r\n  });\r\n});\r\n\r\n\r\n}\r\nexport function getJobGroup() {\r\n  // var query = EntityQuery().from('JOB_GRP_MSTR');//.select('JOB_GRP_ID, JOB_GRP_CD, JOB_GRP_DESC');\r\n  // return EntityManager().executeQuery(query).then(function() {\r\n  //   processLookups(entityNames.JOB_GRP_MSTR, {\r\n  //     'JOB_GRP_ID': 0, //breeze.core.getUuid()\r\n  //     'JOB_GRP_DESC': ' [SELECT A VALUE]'\r\n  //   });\r\n  // }, queryFailed);\r\n\r\n    return new Promise((resolve)=>{\r\n   EntityQuery().from('JOB_GRP_MSTR').select('JOB_GRP_ID, JOB_GRP_CD, JOB_GRP_DESC, COMPANY_ID')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    jobGrp = success.results;\r\n    //jobGrp.push({ 'JOB_GRP_ID': 0, 'JOB_GRP_DESC':' [SELECT A VALUE]'});\r\n    resolve(true);\r\n  });\r\n});\r\n}\r\n\r\nexport function getJob() {\r\n\r\n  return new Promise((resolve)=>{\r\n   EntityQuery().from('JOB_MSTR').select('JOB_ID, JOB_GRP_ID, JOB_DESC')\r\n   .using(EntityManager()).execute()\r\n   .then((success)=>{\r\n    jobMstr = success.results;\r\n    //jobMstr.push({ 'JOB_ID': 0, 'JOB_DESC':' [SELECT A VALUE]'});\r\n    resolve(true);\r\n  });\r\n\r\n });\r\n\r\n  // var query = EntityQuery().from('JOB_MSTR');//.select('JOB_ID, JOB_GRP_ID, JOB_DESC');\r\n  // return EntityManager().executeQuery(query).then(function(success) {\r\n\r\n  //     //EntityManager().createEntity(entityNames.JOB_MSTR, {},null);\r\n  //  // console.log(success);\r\n  //   // processLookups(entityNames.JOB_MSTR, {\r\n  //   //   'JOB_ID': 0, //breeze.core.getUuid()\r\n  //   //   'JOB_DESC': ' [SELECT A VALUE]'\r\n  //   // });\r\n  // }, queryFailed);\r\n\r\n\r\n}\r\nexport function getLocation() {\r\n  var query = EntityQuery().from('LOCATION_MSTR')\r\n  return EntityManager().executeQuery(query).then(function() {\r\n    processLookups(entityNames.LOCATION_MSTR, {\r\n      'LOCATION_CD': breeze.core.getUuid(),\r\n      'LOCATION_DESC': ' [SELECT A VALUE]'\r\n    });\r\n  }, queryFailed);\r\n}\r\n\r\nexport function getUsers() {\r\n  var query = EntityQuery().from('USER_PROFILE_MSTR');//.select('USER_ID,COMPANY_ID,EMPLOYEE_ID')\r\n  return EntityManager().executeQuery(query).then(function() {\r\n    processLookups(entityNames.USER_PROFILE_MSTR, {\r\n      'USER_ID': '[SELECT A USER]'\r\n    });\r\n  }, queryFailed);\r\n}\r\n\r\n\r\nexport function getUserTrx() {\r\n  var query = EntityQuery().from('USER_ROLE_TRX')\r\n  return EntityManager().executeQuery(query).then(function() {\r\n    processLookups(entityNames.USER_ROLE_TRX, {\r\n      'USER_ID': ''\r\n    });\r\n  }, queryFailed);\r\n}\r\n\r\nfunction getLocalSelect(resource, ordering, select, includeNullos) {\r\n\r\n  var query = EntityQuery().from(resource).select(select).orderBy(ordering); //.using(breeze.FetchStrategy.FromLocalCache);\r\n\r\n  return EntityManager().executeQueryLocally(query);\r\n}\r\n\r\n\r\nfunction getLocal(resource, ordering, includeNullos) {\r\n\r\n  var query = EntityQuery().from(resource).orderBy(ordering); //.using(breeze.FetchStrategy.FromLocalCache);\r\n\r\n  return EntityManager().executeQueryLocally(query);\r\n}\r\n\r\nfunction processLookups(objName, blankValue) {\r\n  //you commented it to remove inserting initial value on index 0\r\n  createNullos(EntityManager(), objName, blankValue);\r\n}\r\n\r\nfunction createNullos(manager, objName, blankValue) {\r\n\r\n  var unchanged = breeze.EntityState.Unchanged;\r\n\r\n  createNullo(manager, objName, blankValue, unchanged);\r\n\r\n}\r\n\r\nfunction createNullo(manager, entityName, values, unchanged) {\r\n  var initialValues = values || {}; //nAME: ' [ SELECT A VALUE]'\r\n  return manager.createEntity(entityName, initialValues, unchanged);\r\n\r\n}\r\n\r\nfunction queryFailed(jqXHR, textStatus) {\r\n  var msg = 'Error retrieving data ' + textStatus;\r\n  toastr.error(msg, \"Exception occured..\")\r\n\r\n  // loggerToastProvider.logError(msg, jqXHR, system.getModuleId, datacontext);\r\n}\r\n","import {ObserverLocator} from 'aurelia-framework'; // or 'aurelia-binding'\r\n\r\nexport class MultiObserver {  \r\n    static inject() { return [ObserverLocator]; }\r\n    constructor(observerLocator) {\r\n        this.observerLocator = observerLocator;\r\n    }\r\n\r\n    observe(properties, callback) {\r\n        var subscriptions = [],\r\n            i = properties.length,\r\n            object, propertyName;\r\n\r\n        while (i--) {\r\n            object = properties[i][0];\r\n            propertyName = properties[i][1];\r\n\r\n            subscriptions.push(this.observerLocator.getObserver(object, propertyName).subscribe(callback));\r\n        }\r\n\r\n        // return dispose function\r\n        return () => {\r\n            while (subscriptions.length) {\r\n                subscriptions.pop();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}","import {bindable} from 'aurelia-framework';\r\nimport { cache_obj } from 'cache_obj';\r\nimport { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\nimport { checkCookie, setCookie, removeCookie, getCookie } from './helpers';\r\nimport { initializeBreeze } from './entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport { login } from 'modals/login';\r\nimport { change_password } from 'modals/change_password';\r\nimport { DialogService } from 'aurelia-dialog';\r\nimport { loadMasterfiles, loadTables, loadLookups, getLookups } from './masterfiles';\r\nimport settings from './settings';\r\nimport breeze from 'breeze-client';\r\n\r\n@inject(cache_obj, Router, DialogService)\r\nexport class NavBar {\r\n    @bindable router = null;\r\n    _cache_obj;\r\n    router;\r\n    masterFilesLoaded = false;\r\n    constructor(cache_obj, Router, DialogService)\r\n    {\r\n        this.router = Router;\r\n        this._cache_obj = cache_obj;\r\n        \r\n        this.dialogService = DialogService;\r\n        this.settings = settings;\r\n      \r\n        //initializeBreeze().then(() => {\r\n        //    //have to set timeout because of IE, other templates are not loading\r\n        //    // quickly and loading at same time with functions\r\n        //    setTimeout(() => {\r\n\r\n        //        var varCheckUser = checkCookie(\"PPMS_USER\");\r\n\r\n        //        if (this.router.currentInstruction.config.name != \"mainpage\" && (varCheckUser == \"\" || varCheckUser == undefined || varCheckUser.indexOf('undefined') >= 0 || varCheckUser.split('^')[0] == \"\")) {\r\n        //            this.router.navigateToRoute('mainpage');\r\n        //        }\r\n        //        else {\r\n        //            var varCookie = checkCookie(\"PPMS_USER\");\r\n        //            var varSplitCookie = varCookie.split('^');\r\n        //            var _user = {\r\n        //                USER_ID: varSplitCookie[0],\r\n        //                COMPANY_ID: varSplitCookie[1],\r\n        //                Is_HR: varSplitCookie[2],\r\n        //                Is_Branch: varSplitCookie[3],\r\n        //                EMPLOYEE_ID: varSplitCookie[4],\r\n        //                HASH: varSplitCookie[5],\r\n        //                EMAIL_ADDRESS: varSplitCookie[6],\r\n        //            };\r\n\r\n        //            this._cache_obj.USER = _user;\r\n        //        }\r\n\r\n        //    }, 2000);\r\n        //});\r\n       \r\n  var oldClient = OData.defaultHttpClient; \r\n   \r\n\r\n    var myClient = {\r\n         request:  (request, success, error)=> {\r\n            \r\n             if(this._cache_obj!=undefined)\r\n             if(this._cache_obj.USER!=undefined)\r\n             request.headers.Authorization = \"Basic \"+btoa(this._cache_obj.USER.USER_ID+':'+this._cache_obj.USER.HASH);\r\n             return oldClient.request(request, success, error);\r\n         }\r\n    };\r\n\r\n    OData.defaultHttpClient = myClient;  \r\n\r\n       initializeBreeze().then(() => {\r\n            //have to set timeout because of IE, other templates are not loading\r\n            // quickly and loading at same time with functions\r\n            setTimeout(() => {\r\n                this.router.navigateToRoute('blankpage');\r\n                var varCheckUser = checkCookie(\"PPMS_USER\");\r\n                //console.log(varCheckUser);\r\n                //this.router.currentInstruction.config.name != \"blankpage\" && \r\n                if ((varCheckUser == \"\" || varCheckUser == undefined || varCheckUser.indexOf('undefined') >= 0 || varCheckUser.split('^')[0] == \"\")) {\r\n                    this.fnLogin();\r\n                    return;\r\n                }\r\n                else {\r\n                    var varCookie = checkCookie(\"PPMS_USER\");\r\n                    var varSplitCookie = varCookie.split('^');\r\n                    var _user = {\r\n                        USER_ID: varSplitCookie[0],\r\n                        COMPANY_ID: varSplitCookie[1],\r\n                        Is_HR: varSplitCookie[2],\r\n                        Is_Branch: varSplitCookie[3],\r\n                        EMPLOYEE_ID: varSplitCookie[4],\r\n                        HASH: varSplitCookie[5],\r\n                        EMAIL_ADDRESS: varSplitCookie[6],\r\n                    };\r\n\r\n                    this._cache_obj.USER = _user;\r\n\r\n\r\n                    // var oldClient = OData.defaultHttpClient;\r\n                   \r\n\r\n                    // var newClient = {\r\n                    //      request: function (request, success, error) {\r\n                    //          request.headers.Authorization = \"Basic \"+btoa(varSplitCookie[0]+':'+varSplitCookie[5]);\r\n                    //          return oldClient.request(request, success, error);\r\n                    //      }\r\n                    // };\r\n\r\n                    // OData.defaultHttpClient = newClient;\r\n\r\n                }\r\n\r\n                this.fnInitMasterfiles(0, \"\");\r\n\r\n\r\n            }, 2000);\r\n        });\r\n\r\n    }\r\n\r\n    fnInitMasterfiles(initType, output) {\r\n\r\n        if (this.masterFilesLoaded == false) {\r\n            settings.isNavigating = true;\r\n            this._toastr = toastr;\r\n            toastr.clear();\r\n            toastr.info(\"Masterfiles...\", \"Loading please wait..\", { timeOut: 15000 });\r\n          \r\n            loadMasterfiles().then(() => {\r\n                loadLookups().then(() => {\r\n\r\n                    //this._cache_obj.OBSERVERS.init_modal.forEach((all) => {\r\n                    //    all();\r\n                    //});\r\n\r\n\r\n\r\n                    this.masterFilesLoaded = true;\r\n\r\n                    this.fnPassUserObject(initType, output);\r\n\r\n                });\r\n            });\r\n        }\r\n        else {\r\n            this.fnPassUserObject(initType, output);\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    fnPassUserObject(initType, output) {\r\n        \r\n        if (initType == 1) {\r\n\r\n\r\n        } else {\r\n            var varCookie = checkCookie(\"PPMS_USER\");\r\n\r\n            \r\n\r\n            var varSplitCookie = varCookie.split('^');\r\n            this._user = {\r\n                USER_ID: varSplitCookie[0],\r\n                COMPANY_ID: varSplitCookie[1],\r\n                Is_HR: varSplitCookie[2],\r\n                Is_Branch: varSplitCookie[3],\r\n                EMPLOYEE_ID: varSplitCookie[4],\r\n                HASH: varSplitCookie[5],\r\n                EMAIL_ADDRESS: varSplitCookie[6],\r\n                ROLE_CD: varSplitCookie[7]\r\n            };\r\n\r\n            this._cache_obj.USER = this._user;\r\n            \r\n            toastr.clear();\r\n            toastr.success(\"Let's Start...\", \"Success\");\r\n            settings.isNavigating = false;\r\n            if (this.router.currentInstruction.config.name == \"blankpage\")\r\n            {\r\n                this.router.navigateToRoute('mainpage');\r\n            }\r\n\r\n      \r\n\r\n            return;\r\n        }\r\n\r\n        this.LoginPassed(output);\r\n     \r\n    }\r\n\r\n\r\n    // @handle('login.passed')\r\n    LoginPassed(user) {\r\n\r\n        this._user = user;\r\n        //console.log(user);\r\n        setCookie(\"PPMS_USER\", user.USER_ID + \"^\" + user.COMPANY_ID + \"^\" + user.Is_HR + \"^\"\r\n            + user.Is_Branch + \"^\" + user.EMPLOYEE_ID + \"^\" + user.HASH + \"^\" + user.EMAIL_ADDRESS + \"^\" + user.ROLE_CD, 30);\r\n        settings.isNavigating = false;\r\n\r\n       \r\n        \r\n      //  console.log(checkCookie(\"PPMS_USER\"));\r\n        toastr.clear();\r\n        toastr.success(\"Let's Start...\", \"Success\");\r\n\r\n        if (this.router.currentInstruction.config.name == \"blankpage\") {\r\n            this.router.navigateToRoute('mainpage');\r\n        }\r\n    }\r\n\r\n    logout() {\r\n      \r\n        if (this.router.currentInstruction.config.name != \"blankpage\")\r\n            this.router.navigateToRoute('blankpage');\r\n        else\r\n            this._cache_obj.OBSERVERS.loggedout.forEach((all) => {\r\n                all();\r\n            });\r\n\r\n        this._cache_obj.OBSERVERS.clear_log.forEach((all) => {\r\n            all();\r\n        });\r\n\r\n        this._cache_obj.USER = {};\r\n        this._cache_obj._ACCESS = {};\r\n\r\n   \r\n        removeCookie();\r\n\r\n        this.fnLogin();\r\n       \r\n        \r\n    }\r\n\r\n\r\n    home()\r\n    {\r\n        this.router.navigateToRoute('mainpage');\r\n    }\r\n    \r\n\r\n\r\n    fnLogin() {\r\n\r\n        if (this.dialogService.controllers.length > 0) {\r\n            for (var i = this.dialogService.controllers.length - 1; i >= 0; i--) {\r\n                this.dialogService.controllers[i].close();\r\n            }\r\n        }\r\n\r\n     \r\n        this.dialogService.open({\r\n            viewModel: login, keyboard: false, overlayDismiss: false, lock:true\r\n        }).whenClosed(response => {\r\n           \r\n            if (!response.wasCancelled) {\r\n                this.fnInitMasterfiles(1, response.output);\r\n            } else {\r\n                toastr.clear();\r\n                toastr.info(\"Please Login...\", \"You cannot continue ..\", { timeOut: 15000 });\r\n                this.fnLogin();\r\n            }\r\n        });\r\n    }\r\n\r\n    changePassword()\r\n    {\r\n        this.dialogService.open({\r\n            viewModel: change_password\r\n        }).whenClosed(response => {\r\n\r\n            if (!response.wasCancelled) {\r\n                \r\n            } else {\r\n               \r\n            }\r\n        });\r\n    }\r\n    \r\n}\r\n","import settings from './settings';\r\nexport class service{\r\n    serviceBase = settings.serviceBase+ '/WcfDataService.svc/';\r\n    getSvcUrl(method) {\r\n\t\t\treturn serviceBase + method;\r\n\t\t};\r\n\tserviceBaseUpdate = 'home/';\r\n\tgetSvcUrlUpdate(method) {\r\n\t\t\treturn serviceBaseUpdate + method;\r\n\t\t};\r\n\r\n\tGetJson(method, jsonIn, callback) {\r\n\t\t$.ajax({\r\n\t\t\turl: getSvcUrl(method),\r\n\t\t\ttype: \"GET\",\r\n            dataType: \"jsonp\",\r\n\t\t\tsuccess: function(json) {\r\n\t\t\t\tcallback(json);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tPostJson(method, jsonIn, callback) {\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: getSvcUrl(method),\r\n\t\t\ttype: \"POST\",\r\n\t\t\tdata: jsonIn, //ko.toJSON(jsonIn)\r\n            dataType: \"jsonp\",\r\n\t\t\tcontentType: \"application/json\",\r\n\t\t\tsuccess: function(json) {\r\n\t\t\t\tcallback(json);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tPostUpdateJson(method, jsonIn, callback) {\r\n\t\t$.ajax({\r\n\t\t\turl: getSvcUrlUpdate(method),\r\n\t\t\ttype: \"POST\",\r\n\t\t\tdata: jsonIn,\r\n            dataType: \"jsonp\",\r\n\t\t\tcontentType: \"application/json\",\r\n\t\t\tsuccess: function(json) {\r\n\t\t\t\tcallback(json);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}","/**\r\n* Global settings/constants\r\n*/\r\n// http://localhost:30313/\r\n// http://absppms2:8094/odata\r\n//http://absppms01:8085/odata\r\n//http://absppms2:8072/odata\r\n//ctrl + alt + f (default) formatting indention\r\n//serviceName: \"http://localhost:30313/odata\",\r\n//serviceNameBase: \"http://localhost:30313\", \r\n//serviceName: \"http://absppms2:8094/odata\",\r\n//serviceName: \"http://absppms01:8085/odata\"\r\n\r\nexport default {\r\n    \r\n    // serviceName: \"http://localhost:30313/odata\", //odata url\r\n    // serviceNameBase: \"http://localhost:30313\", //base api url\r\n\r\n    serviceName: \"http://absppms2:8072/odata\", //odata url\r\n    serviceNameBase: \"http://absppms2:8072\", //base api url\r\n\r\n    // serviceName: \"http://absppms2:8094/odata\",\r\n    // serviceNameBase: \"http://absppms2:8094\",\r\n\r\n  pageSize: 100,\r\n  STATIONS: [\"\", \"CEBU\", \"DAVAO\"],\r\n  actualCostWebUrl: \"http://localhost:15253\",\r\n  //actualCostWebUrl: \"http://absppms2:8084\", //actual cost url\r\n  actualCostServiceBase: \"http://absppms2:8083\", //actual cost service\r\n  isNavigating: false,\r\n };\r\n","import {inject} from 'aurelia-framework';\r\nimport {HttpClient} from 'aurelia-fetch-client';\r\n//import 'fetch';\r\n\r\n@inject(HttpClient)\r\nexport class Users{\r\n  heading = 'Github Users';\r\n  users = [];\r\n\r\n  constructor(http){\r\n    http.configure(config => {\r\n      config\r\n        .useStandardConfiguration()\r\n        .withBaseUrl('https://api.github.com/');\r\n    });\r\n\r\n    this.http = http;\r\n  }\r\n\r\n  activate(){\r\n    return this.http.fetch('users')\r\n      .then(response => response.json())\r\n      .then(users => this.users = users);\r\n  }\r\n}\r\n","import {inject,computedFrom} from 'aurelia-framework';\r\nimport {initializeBreeze} from './entity-manager-factory';\r\nimport {loadMasterfiles, loadTables, loadLookups, getLookups} from './masterfiles';\r\nimport toastr from \"toastr\";\r\n\r\n@inject(toastr)\r\nexport class Welcome {\r\n  heading = 'Welcome to the Aurelia Navigation App!';\r\n  firstName = 'John';\r\n  lastName = 'Doe';\r\n  previousValue = this.fullName;\r\n  _toastr = null;\r\n  constructor(toastr) {\r\n    toastr.options = {\r\n      \"closeButton\": true,\r\n      \"debug\": false,\r\n      \"positionClass\": \"toast-bottom-right\",\r\n      \"onclick\": null,\r\n      \"showDuration\": \"300\",\r\n      \"hideDuration\": \"1000\",\r\n      //\"timeOut\": \"300000\",\r\n      //\"extendedTimeOut\": \"1000\",\r\n      \"showEasing\": \"swing\",\r\n      \"hideEasing\": \"linear\",\r\n      \"showMethod\": \"fadeIn\",\r\n      \"hideMethod\": \"fadeOut\"\r\n    };\r\n\r\n   \r\n\r\n  }\r\n\r\n  //Getters can't be observed with Object.observe, so they must be dirty checked.\r\n  //However, if you tell Aurelia the dependencies, it no longer needs to dirty check the property.\r\n  //To optimize by declaring the properties that this getter is computed from, uncomment the line below.\r\n  //@computedFrom('firstName', 'lastName')\r\n  get fullName() {\r\n    return `${this.firstName} ${this.lastName}`;\r\n  }\r\n\r\n  submit() {\r\n    console.log(getLookups().PROGRAMS);\r\n\r\n    this.previousValue = this.fullName;\r\n    alert(`Welcome, ${this.fullName}!`);\r\n  }\r\n\r\n  canDeactivate() {\r\n    if (this.fullName !== this.previousValue) {\r\n      return confirm('Are you sure you want to leave?');\r\n    }\r\n  }\r\n}\r\n\r\nexport class UpperValueConverter {\r\n  toView(value) {\r\n    return value && value.toUpperCase();\r\n  }\r\n}","import moment from 'moment';\r\n\r\nexport class DatepatternValueConverter {\r\n    toView(value) {\r\n    \tif(value===undefined || value==null)\r\n    \t\treturn moment(new Date(),'MM-DD-YYYY').format('MM-DD-YYYY');\r\n    \telse\r\n    \t{\r\n    \t\tif(moment(value,'MM-DD-YYYY',true).isValid())\r\n    \t\t{\r\n    \t\t\treturn moment(value,'MM-DD-YYYY').format('MM-DD-YYYY');\r\n    \t\t}\r\n    \t\telse\r\n    \t\t\treturn moment(new Date(),'MM-DD-YYYY').format('MM-DD-YYYY');\r\n    \t}\r\n\t    \t\r\n        //return new Date(value).toLocaleDateString();\r\n    }\r\n}","export class FiltercustomValueConverter {\r\n    toView(array, propertyName, value, signal) {\r\n            \r\n            //this filter is reverse in condition\r\n\t\t\tvar varResult = [];\r\n    \t\tarray.forEach((all)=>{\r\n\r\n                        if(propertyName.indexOf(',')>0)\r\n                        {\r\n                            var varCheck = propertyName.split(',').find((allFilter)=>all[allFilter]!=value\r\n                            );\r\n                        \r\n                            if(varCheck==undefined)\r\n                            {\r\n                                varResult.push(all);    \r\n                            }\r\n                        }\r\n                        else\r\n    \t\t\t\t\tif(all[propertyName]==value)\t\t\t\t\t\t\r\n    \t\t\t\t\t\t varResult.push(all);\t\r\n\t\t\t\t\t });\r\n\r\n\r\n    \t\t// for (var i = array.length - 1; i >= 0; i--) {\r\n    \t\t// \tconsole.log(propertyName);\r\n    \t\t// \tconsole.log((array[i])[propertyName]);\r\n    \t\t// \tconsole.log(value);\r\n    \t\t// \tif(array[propertyName]==value)\r\n    \t\t// \t{\r\n    \t\t// \t\tarray.splice(i,1);\r\n    \t\t// \t}\r\n    \t\t// };\r\n\r\n    \t\tarray = varResult;\r\n\t\treturn array;\r\n    }\r\n}","import numeral from 'numeral';\r\n\r\nexport class NumberFormatValueConverter {\r\n  toView(value, format) {\r\n    return numeral(value).format(format);\r\n  }\r\n}","export class SignalsValueConverter {\r\n    toView(value, signal) {\r\n\t\treturn value;\r\n    }\r\n}","export class SortValueConverter {\r\n    toView(array, propertyName, direction) {\r\n        var factor = direction === 'ascending' ? 1 : -1;\r\n        return array\r\n          .slice(0)\r\n          .sort((a, b) => {\r\n              return (a[propertyName] - b[propertyName]) * factor\r\n          });\r\n    }\r\n}","export class SorttextValueConverter {\r\n    toView(array, propertyName, direction) {\r\n   //      array.forEach((a)=>{\r\n\t\t\t// \t\tconsole.log(a[propertyName]);\r\n\r\n\t\t\t// });\r\n        if(direction==\"ascending\")\r\n\t\t{\t\r\n\r\n\t\t\treturn array.sort(function(a, b) {\r\n\t\t\t\t//console.log(a[propertyName]);\r\n\t\t\t\tif (a[propertyName] > b[propertyName]) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\tif (a[propertyName] < b[propertyName]) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\t\t\t\t// a must be equal to b\r\n\t\t\t\treturn 0;\r\n\t\t\t});\r\n        }\r\n        else\r\n        {\r\n        \treturn array.sort(function(a, b) {\r\n\t\t\t\tif (a[propertyName] > b[propertyName]) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\t\t\t\tif (a[propertyName] < b[propertyName]) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\t// a must be equal to b\r\n\t\t\t\treturn 0;\r\n\t\t\t});\t\r\n        }\r\n\r\n    }\r\n}","export class TakeValueConverter {\r\n    toView(array, count, index) {\r\n        return array.slice(index*count, (index*count)+count);\r\n    }\r\n}","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';  \r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {cache_obj} from 'cache_obj';\r\nimport { DialogController } from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n@inject(MultiObserver,ObserverLocator,Element,cache_obj,DialogController)\r\nexport class budget {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArrayLength=0;\r\n\tvarFilterArray = [];\r\n\tcurrPredicate=null;\r\n\t_cache_obj;\r\n\tlstPredicates=[];\r\n\tcontroller=null;\r\n\tconstructor(multiObserver,observerLocator,Element,cache_obj,controller) {\r\n\t\tthis.controller=controller;\r\n\t\t//this._dispatcher=Dispatcher;\r\n\t\tthis._cache_obj=cache_obj;\r\n\t\tthis.observerLocator=observerLocator;\r\n\t\t\r\n\t\tthis.items=getLookups().BDGT_TMPL_HDR;\r\n\r\n\t\t// var _query = EntityQuery().from('BDGT_TMPL_HDR').where(\"BDGT_TMPL_ID\", \"==\", this._GLOBAL_GRP_ID);\r\n\t\t// EntityManager().executeQuery(_query).then((success) => {});\r\n\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t[this, '_bBDGT_TMPL_ID'],\r\n\t\t\t[this, '_bPROGRAM_TITLE'],\r\n\t\t\t[this, '_bPROGRAM_IO'],\r\n\t\t\t[this, '_bAPPR_STAT_CD']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_budget_modal.push(()=>{\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n\tfnManualFilter(tmpVar)\r\n\t{\r\n\t\t\r\n\t\tthis.lstPredicates=[];\r\n\r\n\t\t_.each(this._rBUDGET_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\t\t\t\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\")\r\n\t\t\t\tif(varOb.propertyName.indexOf(\"BDGT_TMPL_ID\")>-1)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.lstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), \"==\", varOb.getValue()));\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.lstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', '').replace('PROGRAM_TITLE','PROGRAM_MSTR.PROGRAM_TITLE').replace('PROGRAM_IO','PROGRAM_MSTR.PROGRAM_IO'), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(tmpVar.length>0)\r\n\t\t\t\t{\r\n\t\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t});\r\n\r\n\t\treturn tmpVar;\r\n\t}\r\n\r\n\tonSpeculateProp(newValue, oldValue) {\r\n\t\t\r\n\t\tvar varValuesHasChanged=false;\r\n\t\t//check if inputs has value else return;\r\n\t\t_.each(this._rBUDGET_TITLE.querySelectorAll('input'), all => {\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n\t\t\t{\t\r\n\t\t\t\tvarValuesHasChanged=true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(!varValuesHasChanged) return;\r\n\r\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\r\n\t\t//if has existing results, use it, else, query to server\r\n\t\tif(tmpVar.length>0) \r\n\t\t{\r\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'BDGT_TMPL_ID').reverse();\r\n\t\t\tthis.varFilterArray = tmpVarNew;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.currPredicate=this.lstPredicates;\r\n\t\tif(this._cache_obj.PROGRAM_USER.length==0)\r\n\t\t{\r\n\r\n\t\t\tvar _query = EntityQuery().from('PROGRAM_USER_TRX').where(\"USER_ID\", \"==\", this._cache_obj.USER.USER_ID);\r\n\t\t\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\t\tsuccess.results.forEach((all)=>{\r\n\t\t\t\t\tif(all.USER_ID==this._cache_obj.USER.USER_ID)\r\n\t\t\t\t\t\tthis._cache_obj.PROGRAM_USER.push(all);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\r\n\t\t}//\r\n\t\t//delay to get minimize bloated multiple/simultaneous searching\r\n\t\tsetTimeout((a) => {\r\n\r\n\t\t\tif (a !== this.currPredicate)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis.varFilterArray = [];\r\n\r\n\t\t\tvar _query = EntityQuery().from('BDGT_TMPL_HDR').where(breeze.Predicate.and(this.currPredicate)).expand('PROGRAM_MSTR').orderBy(\"BDGT_TMPL_ID desc\").select('BDGT_TMPL_ID,PROGRAM_MSTR.PROGRAM_TITLE,PROGRAM_MSTR.PROGRAM_IO,PROGRAM_MSTR.PROGRAM_ID, APPR_STAT_CD');\r\n            EntityManager().executeQuery(_query).then((success) => {\r\n                \r\n\t\t\t\ttmpVar = [];\r\n\t\t\t\t_.each(success.results, (all) => {\r\n\t\t\t\t\tif(all.APPR_STAT_CD!=null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar findProgramUser=this._cache_obj.PROGRAM_USER.find((allP)=>allP.PROGRAM_ID==all.PROGRAM_MSTR.PROGRAM_ID);\r\n\t\t\t\t\t\tif(findProgramUser!== undefined)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttmpVar.push({\r\n\t\t\t\t\t\t\tPROGRAM_TITLE: all.PROGRAM_MSTR.PROGRAM_TITLE,\r\n\t\t\t\t\t\t\tBDGT_TMPL_ID: parseInt(all.BDGT_TMPL_ID),\r\n\t\t\t\t\t\t\tPROGRAM_IO: all.PROGRAM_MSTR.PROGRAM_IO,\r\n\t\t\t\t\t\t\tAPPR_STAT_CD: all.APPR_STAT_CD.replace('APP-','')\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\r\n\t\t\t}, (failed) => {\r\n\t\t\t\ttoastr.error(failed, \"Failed loading PROGRAM Names\");\r\n\t\t\t});\r\n\r\n\t\t}, 500, this.currPredicate);\r\n\r\n\t}\r\n\r\n\tselectedBudget(item){\r\n\t\t\r\n\t\tthis._cache_obj.OBSERVERS.budget_dialog.forEach((all)=>{\r\n\t\t\tall(item.BDGT_TMPL_ID);\r\n\t\t});\r\n\r\n\t\tthis.controller.ok();\r\n\r\n\t}\r\n\r\n\tfnKeyup(evt,item){\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis.selectedBudget(this.varFilterArray[0]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tClearSearch(){\r\n\t\tthis._bBDGT_TMPL_ID=\"\";\r\n\t\tthis._bPROGRAM_TITLE=\"\";\r\n\t\tthis._bPROGRAM_IO=\"\";\r\n\t\tthis._bAPPR_STAT_CD=\"\";\r\n\t\t\r\n\t\tthis.varFilterArray=[];\r\n\t\tthis.varFilterArrayLength = 0;\r\n\t}\r\n}\r\n","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n\r\n@inject(MultiObserver, ObserverLocator, Element, ModalWizard, cache_obj, DialogController)\r\nexport class buhProgramDialog {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArray = [];\r\n\tvarFilterArraySelected=[];\r\n\tvarFilterArrayLength=0;\r\n\t\r\n\t_ModalWizard;\r\n\t_cache_obj;\r\n\tcontroller=null;\r\n\t_programs=[];\r\n\tconstructor(multiObserver, observerLocator, Element, ModalWizard, cache_obj,controller) {\r\n\t\tthis.controller=controller;\r\n\r\n\t\tthis._ModalWizard=ModalWizard;\r\n\t\tthis._cache_obj=cache_obj;\r\n\t\t\r\n\t\ttoastr.info(\"Program Data...\", \"Loading..\");\r\n\t\t\r\n\t\ttoastr.success(\"Start Search...\", \"Loading Finish..\");\r\n\r\n\t\tthis.observerLocator = observerLocator;\r\n\t\t\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t\t[this, '_bPROGRAM_CD'],\r\n\t\t\t\t[this, '_bPROGRAM_TITLE']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\t\t\r\n\t\tvar _query = EntityQuery().from('PROGRAM_MSTR').where(breeze.Predicate.and(this.currPredicate)).select('PROGRAM_CD,PROGRAM_TITLE,PROGRAM_ID,BUH_PERSONNEL_ID');\r\n\t\t\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\t\tthis._programs=success.results;\r\n\r\n\t\t\t}, (failed) => {\r\n\t\t\t\ttoastr.error(failed, \"Failed loading Programs\");\r\n\t\t\t});\r\n\r\n\t}\r\n\r\n\tattached(){\r\n    \t\t//console.log($(this));\r\n  \t}\r\n\r\n\tselectedTalent(item) {\r\n\t\tvar isFound=this.varFilterArraySelected.find((_item)=>{\r\n\t\t\tif(_item.PROGRAM_CD==item.PROGRAM_CD)\r\n\t\t\t{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif( isFound===undefined){\r\n\t\t\tthis.varFilterArraySelected.push(item);\r\n\t\t}\r\n\t\r\n\t}\r\n\r\n\tfnKeyup(evt,item){\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis.varFilterArraySelected.push(this.varFilterArray[0]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfnManualFilter(tmpVar)\r\n\t{\r\n\t\tvar lstPredicates=[];\r\n\t\t_.each(this._rGROUP_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\"){\r\n\t\t\t\t\r\n\t\t\t\tif(varOb.propertyName.indexOf(\"PROGRAM_TITLE\")>-1)\r\n\t\t\t\t{\r\n\t\t\t\t\tlstPredicates.push(breeze.Predicate.create(\"PROGRAM_TITLE\", breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tlstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\r\n\t\t});\r\n\r\n\r\n\t\treturn tmpVar;\r\n\t}\r\n\r\n\r\n\tonSpeculateProp(newValue, oldValue) {\r\n\t\t\r\n\t\tif(this._rGROUP_TITLE===undefined || this._rGROUP_TITLE===null || this._rGROUP_TITLE==='') return;\r\n\t\t\r\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\t\t\r\n\t\tif(tmpVar.length>0) \r\n\t\t{\r\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'PROGRAM_TITLE').reverse();\r\n \t\t\tthis.varFilterArray = tmpVarNew;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\ttmpVar=this.fnManualFilter(this._programs.filter((all)=>all.PROGRAM_TITLE.indexOf('[')<=0)); \r\n\t\t}\r\n\t\t\r\n\t\tthis.varFilterArray = tmpVar;\r\n\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\r\n\t}\r\n\r\n\tdeleteSelected(index){\r\n\t\tthis.varFilterArraySelected.splice(index,1);\r\n\t}\r\n\r\n\tSelectingDone(){\r\n\r\n\t\tthis.controller.ok(this.varFilterArraySelected);\r\n\t\t\r\n\t}\r\n\r\n\t//@handle('clear.indiv.modal')\r\n\tClearSearch(){\r\n\t\tthis.varFilterArraySelected=[];\r\n\t\tthis._bPROGRAM_CD=\"\";\r\n\t\tthis._bPROGRAM_TITLE=\"\";\r\n\t\tthis.varFilterArray = [];\r\n\t\tthis.varFilterArrayLength = 0;\r\n\r\n\t}\r\n\r\n}","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';  \r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n\r\n@inject(MultiObserver,ObserverLocator,Element, cache_obj,DialogController)\r\nexport class buhSearch {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArrayLength=0;\r\n\tvarFilterArray = [];\r\n\tcurrPredicate=null;\r\n\tcontroller=null;\r\n\tconstructor(multiObserver,observerLocator,Element, cache_obj, controller) {\r\n\t\tthis.controller=controller;\r\n\r\n\t\tthis.observerLocator=observerLocator;\r\n\t\t\r\n\t\tthis._cache_obj=cache_obj;\r\n\t\t\r\n\t\tvar _query = EntityQuery().from('BUH_PERSONNEL').orderByDesc(\"BUH_PERSONNEL_ID\");\r\n\t\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\tthis.items=success.results;\r\n\r\n\t\t}, (failed) => {\r\n\t\t\ttoastr.error(failed, \"Failed loading PROGRAM Names\");\r\n\t\t});\r\n\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t[this, '_bOPTIONAL_GLOBAL_ID'],\r\n\t\t\t[this, '_bFIRST_NAME'],\r\n\t\t\t[this, '_bLAST_NAME'],\r\n\t\t\t[this, '_bMIDDLE_NAME'],\r\n\t\t\t[this, '_bEMAIL_ADDRESS'],\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\t\t\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_program_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tselectedTalent(item){\r\n\t\r\n\t\tthis._cache_obj.OBSERVERS.pass_value.forEach((all) => {\r\n\t\t\tall(item);\r\n\t\t});\r\n\t}\r\n\r\n\tonSpeculateProp(newValue, oldValue) {\r\n\t\t\r\n\t\t\r\n\t\tvar varValuesHasChanged=false;\r\n\t\t//check if inputs has value else return;\r\n\t\t_.each(this._rBUH_SEARCH.querySelectorAll('input'), all => {\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n\t\t\t{\t\r\n\t\t\t\tvarValuesHasChanged=true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\r\n\t\tif(!varValuesHasChanged) return;\r\n\t\t//++this.intTest;\r\n\t\tvar tmpVar = [];\r\n\t\tif(this.varFilterArray.length>0)\r\n\t\t\ttmpVar=this.varFilterArray;\r\n\r\n\r\n\t\tvar lstPredicates=[];\r\n\t\t_.each(this._rBUH_SEARCH.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\t\t\t\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\")\r\n\t\t\t// if(varOb.propertyName.indexOf(\"OPTIONAL_GLOBAL_ID\")>-1)\r\n\t\t\t// {\r\n\t\t\t// \tlstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), \"==\", varOb.getValue().toUpperCase()));\r\n\t\t\t// }\r\n\t\t\t// else\r\n\t\t\t// {\r\n\t\t\t\tlstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t//}\r\n\r\n\t\t\tif(tmpVar.length>0)\r\n\t\t\t{\r\n\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\t\t\t}\r\n\r\n\r\n\t\t});\r\n\r\n\t\t//console.log(lstPredicates);\r\n\t\tthis.currPredicate=lstPredicates;\r\n\r\n\r\n\t\t//if has existing results, use it, else, query to server\r\n\t\tif(tmpVar.length>0) \r\n\t\t{\r\n\t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//delay to get minimize bloated multiple/simultaneous searching\r\n\t\tsetTimeout((a) => {\r\n\r\n\t\t\tif (a !== this.currPredicate)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis.varFilterArray = [];\r\n\r\n\t\t\tvar _query = EntityQuery().from('BUH_PERSONNEL').where(breeze.Predicate.and(this.currPredicate)).select('BUH_PERSONNEL_ID,OPTIONAL_GLOBAL_ID,FIRST_NAME,MIDDLE_NAME,LAST_NAME, EMAIL_ADDRESS');\r\n\t\t\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\t\ttmpVar = [];\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t_.each(success.results, (all) => {\r\n\t\t\t\t\ttmpVar.push(all);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t\r\n\t\t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\r\n\r\n\t\t\t}, (failed) => {\r\n\t\t\t\ttoastr.error(failed, \"Failed loading BUH Names\");\r\n\t\t\t});\r\n\r\n\t\t}, 500, this.currPredicate);\r\n\r\n\t}\r\n\r\n\tselectedBUH(item){\r\n\t\tthis.controller.ok(item);\r\n\t\t\r\n\t}\r\n\r\n\t//@handle('clear.program.modal')\r\n\tClearSearch(){\r\n\t\tthis._bOPTIONAL_GLOBAL_ID=\"\";\r\n\t\tthis._bFIRST_NAME=\"\";\r\n\t\tthis.varFilterArray = [];\r\n\t\tthis.varFilterArrayLength = 0;\r\n\t}\r\n}\r\n","\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n\r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\n//import {HttpClient} from 'aurelia-http-client';\r\nimport {cache_obj} from 'cache_obj';\r\nimport { DialogController } from 'aurelia-dialog';\r\nimport settings from '../settings';\r\n\r\n@inject(MultiObserver, ObserverLocator, Element, cache_obj,DialogController)\r\nexport class change_password {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\r\n\t//_HttpClient;\r\n\r\n\t_USER;\r\n\t_COMPANY;\r\n\t_PASSWORD;\r\n\r\n    _cache_obj;\r\n    _NEW_PASSWORD;\r\n\r\n\tconstructor(multiObserver, observerLocator, Element, cache_obj,controller) \r\n\t{\r\n\t\tthis.controller=controller;\r\n\t\tthis._cache_obj=cache_obj;\r\n\t}\r\n\r\n    keyPressed($event) {\r\n        if ($event.which === 13) {\r\n            this.savePassword();\r\n        }\r\n    }\r\n\r\n\r\n    savePassword() \r\n    {\r\n        \r\n        if (this._NEW_PASSWORD === undefined || _.isEmpty(this._NEW_PASSWORD) || this._NEW_PASSWORD.length!=8) {\r\n            toastr.error(\"Invalid Password, must be 8 characters long.\", \"Change Password\");\r\n            return;\r\n        }\r\n        settings.isNavigating = true;\r\n        toastr.info(\"Please wait..\", \"Saving Password\");\r\n        \r\n        $.post(settings.serviceNameBase +\"/useraccess/Set_Password\", {\r\n            \"USER_ID\": this._cache_obj.USER.USER_ID,\r\n            \"COMPANY_ID\": this._cache_obj.USER.COMPANY_ID,\r\n            \"Password\": this._NEW_PASSWORD,\r\n            \"HASH\": this._cache_obj.USER.HASH\r\n        }).done((response) => {\r\n            settings.isNavigating = false;\r\n            toastr.clear();\r\n            if (response == \"\" || response == \"false\") {\r\n                toastr.error(\"Problem Occured\", \"Change Password\");\r\n            }\r\n            else if (response == \"duplicate\") {\r\n                toastr.error(\"Password cannot be same as your current.\", \"Change Password\");\r\n            } \r\n            else {\r\n                toastr.success(\"Password successfully saved and e-mailed to you.\", \"Change Password\");\r\n                this.controller.ok(\"\");\r\n            }\r\n        });\r\n\t}\r\n\r\n\r\n}\r\n","import {bindable, inject} from 'aurelia-framework';\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport { MultiObserver }from 'multi-observer';\r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\n\r\n@inject(MultiObserver,ModalWizard,cache_obj,DialogController)\r\nexport class confirm_dialog{\r\n\t@bindable _setContent;\r\n\t@bindable _setTitle;\r\n\t@bindable to;\r\n\t@bindable _id;\r\n\tshowing=false;\r\n\t_buttonTitle = 'Search'\r\n\t_isDisableElement=true;\r\n\t_ModalWizard;\r\n\t_width=\"500\";\r\n\t_message=\"\";\r\n\t_cache_obj;\r\n\tcontroller=null;\r\n\tconstructor(multiObserver,ModalWizard,cache_obj,controller){\r\n\t\t\r\n\t\tthis.controller=controller;\r\n\t\t\r\n\t\tthis._ModalWizard=ModalWizard;\r\n\t\tthis._cache_obj=cache_obj;\r\n\r\n\r\n\t\t//this._cache_obj.OBSERVERS.init_modal.push(() => {\r\n\t\t//\tthis.InitializeModal();\r\n\t\t//});\r\n\r\n\t\tthis._cache_obj.OBSERVERS.close_modal.push((val) => {\r\n\t\t\tthis.CloseModal(val);\r\n\t\t});\r\n\r\n\t\tthis._cache_obj.OBSERVERS.open_modal_message.push((val1,val2,val3) => {\r\n\t\t\tthis.OpenModal(val1,val2,val3);\r\n\t\t});\r\n\r\n\t\tthis._cache_obj.OBSERVERS.enable_modal_button.push((val1,val2) => {\r\n\t\t\tthis.OpenModal(val1,val2);\r\n\t\t});\r\n\t\t\r\n\t}\r\n\r\n\r\n  activate(message)\r\n  {\r\n    this._message=message;\r\n  }\r\n\r\n  /////cannot use this\r\n\t//@handle('init.modal')\r\n    InitializeModal() {\r\n\t\t\t//this._setTitle = this.to.title;\r\n\t\t\t//this._id = this.to.id;\r\n\t\t\t//this._width= this.to.width;\r\n\r\n\t\t\t//if(this.to.display==\"none\")\r\n\t\t\t//{\r\n\t\t\t//\t$(this.btnRef).css(\"visibility\",\"hidden\");\r\n\t\t\t//\tthis._buttonTitle = \"\";\r\n\t\t\t//}\r\n    }\r\n\r\n\r\n\t//@handle('close.modal')\r\n    CloseModal(id) {\r\n    \tif(this._id==id)\r\n    \t\tthis.showing=false;\r\n\r\n    \tthis._ModalWizard.ids.pop();\r\n        //this.messages.push(message);\r\n        //this.dispatcher.dispatch('message.sent', message);\r\n    }\r\n\r\n    //@handle('open.modal.message')\r\n    OpenModal(id, title, message) {\r\n    \tif(this._id==id)\r\n    \t{\t\r\n    \t\tthis._setTitle=title;\r\n    \t\tthis._message=message;\r\n    \t\tthis.showDialog();\r\n    \t\tthis._ModalWizard.ids.push(this._id);\r\n    \t}\r\n    }\r\n\r\n    confirm(){\r\n\r\n  //   \tthis._cache_obj.OBSERVERS.confirm_dialog.forEach((all)=>{\r\n\t\t// \tall(this._message);\r\n\t\t// });\r\n\t\tthis.controller.ok();\r\n\t\t//this._dispatcher.dispatch('confirm.dialog',this._message);\r\n\t}\r\n\r\n\r\n\tshowDialog() {\r\n\t\tthis._setContent = this.to.content;\r\n\t\t//have to do this because theres a problem clicking the modal outside.\r\n\t\t//no sure why this have to be the soltn.\r\n\t\tthis.showing = false;\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.showing = true;\r\n\t\t\tthis._ModalWizard.ids.push(this._id);\r\n\r\n\t\t\tif(this.to.cleardispatch!==undefined)\r\n\t\t\tthis._cache_obj.OBSERVERS[this.to.cleardispatch].forEach((all) => {\r\n\t\t\t\tall();\r\n\t\t\t});\r\n\r\n\t\t\t//this._dispatcher.dispatch(this.to.cleardispatch);\r\n\r\n\t\t}, 10);\r\n\r\n\t}\r\n\r\n\tcontinue(){\r\n\r\n\t}\r\n\r\n\tcloseModal(){\r\n\t\tthis.showing=false;\r\n\t}\r\n\t\r\n\t//@handle('enable.modal.button')\r\n\tenableButton(id ,isEnabled){\r\n\t\tif(this._id==id)\r\n\t\tthis._isDisableElement=!isEnabled;\r\n\t}\r\n}","import {DialogController} from 'aurelia-dialog';\r\n\r\nexport class EditPerson {\r\n  static inject = [DialogController];\r\n  person = { firstName: '' };\r\n  constructor(controller){\r\n    this.controller = controller;\r\n  }\r\n  activate(person){\r\n    this.person = person;\r\n  }\r\n}","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer';\r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';\r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n\r\n@inject(MultiObserver, ObserverLocator, Element, ModalWizard, cache_obj, DialogController)\r\nexport class globalindivmstr {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArray = [];\r\n\tvarFilterArraySelected=[];\r\n\tvarFilterArrayLength=0;\r\n\t_ModalWizard;\r\n\t_cache_obj;\r\n\tcontroller=null;\r\n\tvarActiveFromCompanyMstr=[];\r\n\tconstructor(multiObserver, observerLocator, Element, ModalWizard, cache_obj,controller) {\r\n\t\tthis.controller=controller;\r\n\r\n\t\tthis._ModalWizard=ModalWizard;\r\n\t\tthis._cache_obj=cache_obj;\r\n\r\n\t\ttoastr.info(\"Personnel Data...\", \"Loading..\");\r\n\t\tthis.varActiveFromCompanyMstr = _.filter(getLookups().GLOBAL_COMPANY_MSTR,(all)=>all.STATUS_CD!='ACTV').map((val)=>{return val.GLOBAL_ID});\r\n\r\n\t\ttoastr.success(\"Start Search...\", \"Loading Finish..\");\r\n\t\tthis.observerLocator = observerLocator;\r\n\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t\t[this, '_bGLOBAL_INDIV_ID'],\r\n\t\t\t\t[this, '_bPERSONNEL_NAME']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_indiv_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tattached(){\r\n    \t\t//console.log($(this));\r\n  \t}\r\n\r\n\tselectedTalent(item)\r\n\t{\r\n\r\n\t\tvar isFound=this.varFilterArraySelected.find((_item)=>{\r\n\t\t\tif(_item.GLOBAL_INDIV_ID==item.GLOBAL_INDIV_ID)\r\n\t\t\t{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif( isFound===undefined){\r\n\t\t\tthis.varFilterArraySelected.push(item);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfnKeyup(evt,item)\r\n\t{\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis.varFilterArraySelected.push(this.varFilterArray[0]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfnManualFilter(tmpVar)\r\n\t{\r\n\t\tvar lstPredicates=[];\r\n\t\t_.each(this._rGROUP_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\"){\r\n\r\n\t\t\t\tif(varOb.propertyName.indexOf(\"PERSONNEL_NAME\")>-1)\r\n\t\t\t\t{\r\n\t\t\t\t\t//varOb.propertyName=\"concat(concat(concat(LAST_NAME,', '), GIVEN_NAME)), MIDDLE_NAME)\";\r\n\t\t\t\t\tlstPredicates.push(breeze.Predicate.create(\"concat(concat(concat(LAST_NAME,', '), GIVEN_NAME), MIDDLE_NAME)\", breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tlstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\r\n\t\t});\r\n\r\n\t\treturn tmpVar;\r\n\t}\r\n\r\n\r\n\tonSpeculateProp(newValue, oldValue) {\r\n\r\n\t\tif(this._rGROUP_TITLE===undefined || this._rGROUP_TITLE===null || this._rGROUP_TITLE==='') return;\r\n\r\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\r\n\t\tif(tmpVar.length>0)\r\n\t\t{\r\n\r\n\r\n\r\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'PERSONNEL_NAME').reverse();\r\n \t\t\tthis.varFilterArray = tmpVarNew;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\ttmpVar=this.fnManualFilter(getLookups().GLOBAL_INDIV_WITH_ALIAS);\r\n\t\t\t//console.log(tmpVar);\r\n\t\t\t//console.log(this.varActiveFromCompanyMstr);\r\n\t\t\tvar varFound=_.filter(tmpVar,(all)=>{\r\n\r\n\t\t\t\tvar result_p=_.find(this.varActiveFromCompanyMstr,(all_p)=>{\r\n \t\t\t\t\treturn all_p==all.GLOBAL_INDIV_ID;\r\n \t\t\t\t});\r\n\r\n\t\t\t return result_p==undefined;\r\n\r\n\t\t\t});\r\n\t\t\ttmpVar=varFound;\r\n\t\t\t//console.log(varFound);\r\n\t\t}\r\n\r\n\t\tthis.varFilterArray = tmpVar;\r\n\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\r\n\t}\r\n\r\n\tdeleteSelected(index){\r\n\t\tthis.varFilterArraySelected.splice(index,1);\r\n\t}\r\n\r\n\tSelectingDone(){\r\n\r\n\t\tthis.controller.ok(this.varFilterArraySelected);\r\n\r\n\t}\r\n\r\n\tClearSearch(){\r\n\r\n\t\tthis.varFilterArraySelected=[];\r\n\t\tthis._bGLOBAL_INDIV_ID=\"\";\r\n\t\tthis._bPERSONNEL_NAME=\"\";\r\n\t\tthis.varFilterArray = [];\r\n\t\tthis.varFilterArrayLength = 0;\r\n\r\n\t}\r\n\r\n}\r\n","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n\r\n@inject(MultiObserver, ObserverLocator, Element, ModalWizard, cache_obj, DialogController)\r\nexport class indivmstr {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArray = [];\r\n\tvarFilterArrayLength=0;\r\n\t_ModalWizard;\r\n\t_cache_obj;\r\n\tcontroller=null;\r\n\tconstructor(multiObserver, observerLocator, Element, ModalWizard,cache_obj,controller) \r\n\t{\r\n\r\n\t\tthis.controller=controller;\r\n\t\tthis._cache_obj=cache_obj;\r\n\t\tthis._ModalWizard=ModalWizard;\r\n\t\ttoastr.info(\"Personnel Data...\", \"Loading..\");\r\n\r\n\t\ttoastr.success(\"Start Search...\", \"Loading Finish..\");\r\n\r\n\r\n\t\tthis.observerLocator = observerLocator;\r\n\t\t\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t[this, '_bGLOBAL_INDIV_ID'],\r\n\t\t\t[this, '_bPERSONNEL_NAME']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_indiv_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n\tselectedIndiv(item) \r\n\t{\r\n\t\t\r\n\t\tthis.controller.ok(item);\r\n\t\r\n\t}\r\n\r\n\tfnManualFilter(tmpVar)\r\n\t{\r\n\r\n\t\tvar lstPredicates=[];\r\n\r\n\t\t_.each(this._rGROUP_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\t\t\t\r\n\t\t\tif(varOb.getValue()!=undefined && \r\n\t\t\t\tvarOb.getValue()!=null && \r\n\t\t\t\tvarOb.getValue()!=\"\" && \r\n\t\t\t\tvarOb.getValue()!=\"undefined\"){\r\n\t\t\t\t\r\n\t\t\t\tif(varOb.propertyName.indexOf(\"PERSONNEL_NAME\")>-1)\r\n\t\t\t\t{\r\n\t\t\t\t\t//varOb.propertyName=\"concat(concat(concat(LAST_NAME,', '), GIVEN_NAME)), MIDDLE_NAME)\";\r\n\t\t\t\t\tlstPredicates.push(breeze.Predicate.create(\"concat(concat(concat(LAST_NAME,', '), GIVEN_NAME), MIDDLE_NAME)\", breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tlstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\r\n\t\t});\r\n\r\n\r\n\t\treturn tmpVar;\r\n\t}\r\n\r\n\tonSpeculateProp(newValue, oldValue) {\r\n\t\t\r\n\t\tif(this._rGROUP_TITLE===undefined || this._rGROUP_TITLE===null) return;\r\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\t\t\r\n\t\tif(tmpVar.length>0) \r\n\t\t{\r\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'PERSONNEL_NAME').reverse();\r\n\t\t\tthis.varFilterArray = tmpVarNew;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\ttmpVar=this.fnManualFilter(getLookups().GLOBAL_INDIV_WITH_ALIAS); \r\n\t\t}\r\n\t\t\r\n\t\tthis.varFilterArray = tmpVar;\r\n\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\r\n\r\n\t}\r\n\r\n\tfnKeyup(evt,item){\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis.selectedIndiv(this.varFilterArray[0])\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t//@handle('clear.indiv.modal')\r\n\tClearSearch(){\r\n\t\tthis._bGLOBAL_INDIV_ID=\"\";\r\n\t\tthis._bPERSONNEL_NAME=\"\";\r\n\t\tthis.varFilterArray = [];\r\n\t\tthis.varFilterArrayLength = 0;\r\n\t}\r\n\r\n}","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';  \r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n@inject(MultiObserver,ObserverLocator,Element, cache_obj, DialogController)\r\nexport class job {\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArrayLength=0;\r\n\tvarFilterArray = [];\r\n\tcurrPredicate=null;\r\n\tintTest=0;\r\n\thasFocus=true;\r\n\tcontroller=null;\r\n\tconstructor(multiObserver,observerLocator,Element, cache_obj, controller) {\r\n\r\n\t\tthis.controller=controller;\r\n\r\n\t\tthis.observerLocator=observerLocator;\r\n\t\t\r\n\t\tthis._cache_obj=cache_obj;\r\n\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t[this, '_bJOB_GRP'],\r\n\t\t\t[this, '_bJOB_DESC']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_job_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t}\r\n\r\n\tselectedTalent(item)\r\n\t{\r\n\r\n\t\tthis._cache_obj.OBSERVERS.pass_job.forEach((all)=>{\r\n\t\t\tall(item);\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tfnManualFilter(tmpVar)\r\n\t{\r\n\t\tthis.currPredicate = [];\r\n\t\t_.each(this._rJOB_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif (varOb.getValue() != undefined && varOb.getValue() != null && varOb.getValue() != \"\" && varOb.getValue() != \"undefined\")\r\n\t\t\t\tthis.currPredicate.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\r\n\t\t\tif (tmpVar.length > 0)\r\n\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\r\n\t\t});\r\n\r\n\t\treturn tmpVar;\r\n\t}\r\n\r\n\tonSpeculateProp(newValue, oldValue) \r\n\t{\r\n\t\t\r\n\r\n\t\tvar varValuesHasChanged=false;\r\n\r\n\t\t//check if inputs has value else return;\r\n\t\t_.each(this._rJOB_TITLE.querySelectorAll('input'), all => \r\n\t\t{\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n\t\t\t{\t\r\n\t\t\t\tvarValuesHasChanged=true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\tif(!varValuesHasChanged) return;\r\n\r\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\r\n\t\t//if has existing results, use it, else, query to server\r\n\t\tif(tmpVar.length>0) \r\n\t\t{\r\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'JOB_DESC').reverse();\r\n\t\t\tthis.varFilterArray = tmpVarNew;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//delay to get minimize bloated multiple/simultaneous searching\r\n\t\tsetTimeout((a) => \r\n\t\t{\r\n\r\n\t\t\tif (a !== this.currPredicate)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar varJobs = getLookups().JOB_GRP_CATEGORY.filter\r\n\t\t\t((all)=>all.COMPANY_ID==this._cache_obj.USER.COMPANY_ID);\r\n\r\n\t\t\tthis.varFilterArray = [];\r\n\r\n\t\t\t_.each(varJobs, (all) => {\r\n\t\t\t\tif(all.JOB_DESC.indexOf(\"[SELECT\")==-1)\r\n\t\t\t\t\ttmpVar.push({\r\n\t\t\t\t\t\tJOB_DESC: all.JOB_DESC,\r\n\t\t\t\t\t\tJOB_GRP: all.CATEGORY_DESC,\r\n\t\t\t\t\t\tJOB_ID: all.JOB_ID\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\ttmpVar=this.fnManualFilter(tmpVar); \r\n\r\n\t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\r\n\t\t}, \r\n\r\n\t\t500, this.currPredicate);\r\n\r\n\t}\r\n\r\n\tselectedJob(item)\r\n\t{\r\n\r\n\t\tthis.controller.ok(item);\r\n\r\n\t}\r\n\r\n\tClearSearch()\r\n\t{\r\n\t\tthis._bJOB_GRP=\"\";\r\n\t\tthis._bJOB_DESC=\"\";\r\n\t\tthis.varFilterArray = [];\r\n\t\tthis.varFilterArrayLength = 0;\r\n\t\t\r\n\t\tsetTimeout(() => {\r\n\t\t\t$(this.refJobDesc).focus();\r\n\t\t}, 500);\r\n\t}\r\n\r\n\r\n\tfnKeyup(evt,item){\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\r\n\t\t\t\tthis._cache_obj.OBSERVERS.pass_job.forEach((all)=>{\r\n\t\t\t\t\tall(this.varFilterArray[0]);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';  \r\nimport { EntityManager, EntityQuery } from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\n//import {HttpClient} from 'aurelia-http-client';\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport {cache_obj} from 'cache_obj';\r\nimport { DialogController, DialogService} from 'aurelia-dialog';\r\nimport settings from '../settings';\r\nimport moment from 'moment';\r\nimport { confirm_dialog } from 'modals/confirm_dialog';\r\nimport { setCookie } from '../helpers';\r\n\r\n@inject(MultiObserver, ObserverLocator, Element, ModalWizard, cache_obj, DialogController, DialogService)\r\nexport class login {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\r\n\tvarFilterArray = [];\r\n\tvarFilterArraySelected = [];\r\n\r\n\t//_HttpClient;\r\n\t_user_content = [];\r\n\t_content = [];\r\n\t@bindable _USER;\r\n\t_COMPANY;\r\n\t_PASSWORD;\r\n\t_ModalWizard;\r\n    _cache_obj;\r\n    _companies=[];\r\n    _users = [];\r\n    _USER_PROFILE_MSTR = [];\r\n    user_expired = false;\r\n    disableLogButton = false;\r\n    dialogService;\r\n    constructor(multiObserver, observerLocator, Element, ModalWizard, cache_obj, controller, DialogService) \r\n    {\r\n        \r\n     \r\n        this.dialogService = DialogService;\r\n        this.controller = controller;\r\n        //controller.settings.lock = true;\r\n\t\tthis._ModalWizard=ModalWizard;\r\n\r\n\t\tthis._cache_obj=cache_obj;\r\n\t\t//httpClient.configure(config => {\r\n\t\t//\tconfig\r\n  //              .withBaseUrl(settings.actualCostWebUrl+'/search/')\r\n\t\t//\t\t//.withHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept')\r\n\t\t//});\r\n\r\n\t\t//this._HttpClient = httpClient;\r\n\r\n\t\t////this._HttpClient.post(\"get_users\").then(response => {\r\n\t\t////\tthis._content = JSON.parse(response.content);\r\n  ////      });\r\n\r\n\t\t\r\n        var varGetUserRole = EntityQuery().from('USER_ROLE_TRX').orderBy(\"USER_ID\");\r\n\r\n        EntityManager().executeQuery(varGetUserRole).then((found) => {\r\n        \tthis._user_content.push({});\r\n\r\n            found.results.forEach((all) => {\r\n              \r\n\t\t\tif(all.ROLE_CD==null || all.ROLE_CD==undefined)\r\n\t\t\t{\r\n\t\t\t\tthis._user_content.push(all);\r\n\t\t\t}\r\n            else if (all.ROLE_CD.includes('ACCESSALL') || all.ROLE_CD.includes('PPFCS'))\r\n\t\t\t{\r\n\t\t\t\tthis._user_content.push(all);\r\n\t\t\t}\r\n\r\n\t\t});\r\n        });\r\n\r\n\r\n\r\n        EntityManager().executeQuery(EntityQuery().from('COMPANY_MSTR').orderBy(\"COMPANY_NAME\")).then((found) => {\r\n            this._companies.push({ COMPANY_ID: 0, COMPANY_NAME: \"\" });\r\n            found.results.forEach((all) => {\r\n                this._companies.push({ COMPANY_ID: all.COMPANY_ID, COMPANY_NAME: all.COMPANY_NAME });\r\n            });\r\n        });\r\n\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_log.push(() => {\r\n\t\t\tthis.ClearLogin();\r\n\t\t});\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_login_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n        EntityManager().executeQuery(EntityQuery().from('USER_PROFILE_MSTR')).then((found) => {\r\n            this._USER_PROFILE_MSTR=found.results;\r\n        });\r\n\r\n        //$.ajax({\r\n        //    type: 'get',\r\n        //    url: settings.serviceNameBase + \"/UserAccess/Check_User\",\r\n        //    data: {\r\n        //        \"USER_ID\": \"KARRENA\",\r\n        //        \"COMPANY_ID\": 1,\r\n        //        \"PASSWORD\": \"12345678\",\r\n        //        \"UPDATE_EXPIRED\": false\r\n        //    },\r\n        //    xhrFields: {\r\n        //        withCredentials: true\r\n        //    },\r\n        //         success: function () { alert(\"Success\"); },\r\n        //    error: function () { alert('Failed!'); }\r\n        //});\r\n\r\n        //$.post(settings.serviceNameBase + \"/UserAccess/Check_User\", {\r\n        //    \"USER_ID\": \"KARRENA\",\r\n        //    \"COMPANY_ID\": 1,\r\n        //    \"PASSWORD\": \"12345678\",\r\n        //    \"UPDATE_EXPIRED\": false\r\n        //}).done((response) => {\r\n        //    console.log(response);\r\n        //    this.loginSuccess(response)//,this._dispatcher\r\n        //    this._ModalWizard.ids.pop();\r\n        //});\r\n\r\n        //$.ajax({\r\n\r\n        //    url: settings.serviceNameBase + \"/UserAccess/Check_User\",\r\n        //    data: {\r\n        //    \"USER_ID\": \"KARRENA\",\r\n        //    \"COMPANY_ID\": 1,\r\n        //    \"PASSWORD\": \"12345678\",\r\n        //    \"UPDATE_EXPIRED\": false},\r\n        //    type: 'GET',\r\n        //    crossDomain: true,\r\n        //    dataType: 'jsonp',\r\n        //    success: function () { alert(\"Success\"); },\r\n        //    error: function () { alert('Failed!'); }\r\n        //    //beforeSend: xhr.setRequestHeader('Authorization', token)\r\n        //});\r\n\r\n       /* $.ajax({\r\n            type: \"GET\",\r\n            dataType: 'jsonp',\r\n            headers: {\r\n                'Access-Control-Allow-Origin': '*'\r\n            },\r\n            data: {\r\n            \"USER_ID\": \"KARRENA\",\r\n            \"COMPANY_ID\": 1,\r\n            \"PASSWORD\": \"12345678\",\r\n            \"UPDATE_EXPIRED\": false},\r\n            url: settings.serviceNameBase + \"/UserAccess/Check_User\",\r\n            success: function (data) {\r\n                alert(9);\r\n            }\r\n        });*/\r\n\t}\r\n\r\n\tkeyPressed($event)\r\n\t{\r\n\t\tif ($event.which === 13) {\r\n\t\t\tthis.tryLogin();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\ttryLogin() \r\n    {\r\n        //$.ajax({\r\n        //    type: \"POST\",\r\n        //    url: \"http://localhost:30313/home/Check_User\",\r\n        //    jsonp: \"callback\",\r\n        //    success: (response) => {\r\n        //    this.loginSuccess(response)//,this._dispatcher\r\n        //    this._ModalWizard.ids.pop();\r\n        //    },\r\n        //    dataType: \"jsonp\"\r\n        //});\r\n\r\n      //  window.open(\"http://localhost:30313/home/Utilization_Type_A\", \"1\");\r\n        \r\n        this.disableLogButton = true;\r\n\r\n        if (this._PASSWORD === undefined || _.isEmpty(this._PASSWORD) || this._USER.USER_ID === undefined || _.isEmpty(this._USER.USER_ID)) \r\n        {\r\n            toastr.error(\"USER ID/PASSWORD cannot be empty.\", \"Change Password\");\r\n            this.disableLogButton = false;\r\n            return;\r\n        }\r\n        else if (this._PASSWORD.length != 8)\r\n        {\r\n            toastr.error(\"Invalid Password, must be 8 characters long.\", \"Change Password\");\r\n            this.disableLogButton = false;\r\n            return;\r\n        }\r\n\r\n        //_NEW_PASSWORD\r\n        if (this.user_expired)\r\n        {\r\n            if (this._PASSWORD == this._NEW_PASSWORD)\r\n            {\r\n                toastr.error(\"New password cannot be similar with current.\", \"Password\");\r\n                this.disableLogButton = false;\r\n                return;\r\n            }\r\n            else if (this._NEW_PASSWORD === undefined || _.isEmpty(this._NEW_PASSWORD) || this._NEW_PASSWORD.length != 8) \r\n            {\r\n                toastr.error(\"Invalid Password, must be 8 characters long.\", \"Change Password\");\r\n                this.disableLogButton = false;\r\n                return;\r\n            }\r\n               \r\n        }\r\n\r\n        settings.isNavigating = true;\r\n        toastr.info(\"Please wait..\", \"Authentication\", { timeOut: 30000});\r\n       \r\n        if (this.user_expired) {\r\n            $.post(settings.serviceNameBase + \"/useraccess/Set_Password\", {\r\n                \"USER_ID\": this._USER.USER_ID,\r\n                \"COMPANY_ID\": this._COMPANY.COMPANY_ID,\r\n                \"PASSWORD\": this._PASSWORD,\r\n                \"NEWPASSWORD\": this._NEW_PASSWORD,\r\n                \"HASH\": \"\"\r\n            }).done((response) => {\r\n                toastr.clear();\r\n                if (response == \"\" || response == \"false\") {\r\n                    toastr.error(\"Problem Occured\", \"Change Password\");\r\n                    this.disableLogButton = false;\r\n                }\r\n                else if (response == \"duplicate\") {\r\n                    toastr.error(\"Password cannot be same as your current.\", \"Change Password\");\r\n                    this.disableLogButton = false;\r\n                }\r\n                else {\r\n                  \r\n                    toastr.success(\"Password successfully saved and e-mailed to you.\", \"Change Password\");\r\n                    this._PASSWORD = this._NEW_PASSWORD;\r\n                    this.fnCheckUser();\r\n                }\r\n                settings.isNavigating = false;\r\n            });\r\n        }\r\n        else\r\n        {\r\n         \r\n            this.fnCheckUser();\r\n        }\r\n            \r\n      \r\n       \r\n    }\r\n\r\n    fnCheckUser()\r\n    {\r\n\r\n        settings.isNavigating = false;\r\n        toastr.clear();\r\n        //$.ajax({\r\n        //    dataType: \"json\",\r\n        //    type: \"GET\",\r\n        //    url: settings.serviceNameBase + \"/UserAccess/Check_User\",\r\n        //    success: function (result) {\r\n        //        console.log(result);\r\n        //    }\r\n        //});\r\n\r\n        $.post(settings.serviceNameBase + \"/UserAccess/Check_User\", {\r\n            \"USER_ID\": this._USER.USER_ID,\r\n            \"COMPANY_ID\": this._COMPANY.COMPANY_ID,\r\n            \"PASSWORD\": this._PASSWORD,\r\n            \"UPDATE_EXPIRED\": false\r\n        }).done((response) => {\r\n            //console.log(response);\r\n            this.loginSuccess(response)//,this._dispatcher\r\n            this._ModalWizard.ids.pop();\r\n        });\r\n    }\r\n\r\n\tloginSuccess(response, CALLER)\r\n\t{\r\n        //console.log(response);\r\n\t\tif (response == \"\") {\r\n            toastr.error(\"USER ID Not found\", \"Searching USER..\");\r\n            this.disableLogButton = false;\r\n            return;\r\n\t\t} else {\r\n            toastr.success(\"Welcome.. \" + response.USER_ID, \"User Found\");\r\n          \r\n            var varUserAtt = response;//JSON.parse(response);\r\n            varUserAtt.ROLE_CD = this._USER.ROLE_CD;\r\n            \r\n            this.controller.ok(varUserAtt);\r\n\r\n            this._cache_obj.USER = varUserAtt;\r\n            \r\n\t\t\tthis._cache_obj.ALLOW_PASS_CONFIDENTIAL = false;\r\n          \r\n\t\t\tvar checkRole = EntityQuery().from('MODULE_ACCESS_TRX').where(\"ROLE_CD\", \"==\", this._USER.ROLE_CD)\r\n\t\t\t\t.select('ROLE_CD,MODULE_MSTR.MODULE_NAME,ACCESS_FL')\r\n\t\t\t\t.expand('MODULE_MSTR');\r\n            \r\n\t\t\tEntityManager().executeQuery(checkRole).then((success) => \r\n\t\t\t{\r\n\t\t\t\tsuccess.results.forEach((all) => {\r\n\t\t\t\t\tif (all.ROLE_CD == this._USER.ROLE_CD) {\r\n\r\n\t\t\t\t\t\tif (all.MODULE_MSTR.MODULE_NAME.includes(\"CONCEAL\") && all.ACCESS_FL == \"1\") {\r\n\t\t\t\t\t\t\tthis._cache_obj.ALLOW_PASS_CONFIDENTIAL = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n            });\r\n\r\n         \r\n            $.post(settings.serviceNameBase + \"/UserAccess/User_Access\", {\r\n                \"USER_ID\": this._USER.USER_ID,\r\n                \"HASH\": this._USER.HASH\r\n            }).done((response) => {\r\n                this._cache_obj._ACCESS = response;\r\n                });\r\n\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tClearLogin()\r\n\t{\r\n\t\tthis._USER=\"\";\r\n\t\tthis._COMPANY=\"\";\r\n\t\tthis._PASSWORD=\"\";\r\n\r\n        this._cache_obj.USER = {};\r\n        this._cache_obj._ACCESS = {};\r\n\t}\t\t\r\n\r\n\t//@handle('clear.login.modal')\r\n\tClearSearch()\r\n\t{\r\n\t\tthis._USER=\"\";\r\n\t\tthis._COMPANY=null;\r\n\t\tthis._PASSWORD=\"\";\r\n    }\r\n\r\n    resetPassword() {\r\n     \r\n        if (_.isUndefined(this._USER.USER_ID) || _.isNull(this._USER.USER_ID) || this._USER.USER_ID.trim().length === 0\r\n            || _.isUndefined(this._COMPANY.COMPANY_ID) || _.isNull(this._COMPANY.COMPANY_ID)) {\r\n            toastr.error(\"Invalid USER/COMPANY\", \"Reset Password\");\r\n            return;\r\n        }\r\n\r\n        this.dialogService.open({ viewModel: confirm_dialog, model: 'Reset Password?' }).whenClosed(response => {\r\n            if (!response.wasCancelled) {\r\n\r\n                toastr.info(\"Please wait..\", \"Resetting Password\");\r\n                settings.isNavigating = true;\r\n                $.post(settings.serviceNameBase + \"/UserAccess/Reset_Password\", {\r\n                    \"USER_ID\": this._USER.USER_ID,\r\n                    \"COMPANY_ID\": this._COMPANY.COMPANY_ID\r\n                }).done((response) => {\r\n                    settings.isNavigating = false;\r\n                    if (response == \"false\") {\r\n                        toastr.error(\"Error saving new password.\", \"Reset Password\");\r\n                    } else {\r\n                        toastr.success(\"Password has been reset and emailed to you.\", \"Reset Password\");\r\n\r\n                        if (this.user_expired)\r\n                            setTimeout(() => { location.reload(); }, 3000);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n       \r\n    }\r\n\r\n    _USERChanged()\r\n    {\r\n        if ((_.isUndefined(this._USER.USER_ID) || _.isNull(this._USER.USER_ID) || this._USER.USER_ID.trim().length === 0))\r\n        { }\r\n        else\r\n        {\r\n            var varFound = this._USER_PROFILE_MSTR.find((all) => all.USER_ID == this._USER.USER_ID);\r\n            if (!_.isUndefined(varFound.EXPIRE_DT) && !_.isNull(varFound.EXPIRE_DT))\r\n            {\r\n                //console.clear();\r\n                \r\n                var varDateCompare = new Date(moment(new Date(varFound.EXPIRE_DT)));\r\n                if (varDateCompare < new Date())\r\n                {\r\n                    if (!this.user_expired)\r\n                        this.user_expired = true;\r\n                }\r\n                else\r\n                    this.user_expired = false;\r\n            }\r\n            else\r\n            {\r\n                toastr.error(\"Please call administrator.\", \"ACCOUNT EXPIRY PROBLEM.\");\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n}\r\n","export class ModalWizard{\r\n   ids = [];\r\n}","import {bindable, inject} from 'aurelia-framework';\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport {MultiObserver}from 'multi-observer';\r\nimport {  cache_obj } from 'cache_obj';\r\n\r\n@inject(ModalWizard,MultiObserver,cache_obj)\r\nexport class modalcontainer{\r\n\t@bindable _setContent;\r\n\t@bindable _setTitle;\r\n\t@bindable to;\r\n\t@bindable _id;\r\n\tshowing=false;\r\n\t_buttonTitle = 'Search'\r\n\t_isDisableElement=true;\r\n\t_ModalWizard;\r\n\t_width=\"900\";\r\n\tmultiObserver;\r\n\t_cache_obj = null;\r\n\tconstructor(ModalWizard,multiObserver,cache_obj){\r\n\t\tthis._cache_obj=cache_obj;\r\n\r\n\t\tthis._ModalWizard=ModalWizard;\r\n\t\tthis.multiObserver=multiObserver;\r\n\r\n\t\t\r\n\t\tthis._cache_obj.OBSERVERS.init_modal.push(() => {\r\n\t\t\tthis.InitializeModal();\r\n\t\t});\r\n\r\n\t\tthis._cache_obj.OBSERVERS.close_modal.push((val) => {\r\n\t\t\tthis.CloseModal(val);\r\n\t\t});\r\n    \t\r\n    \tthis._cache_obj.OBSERVERS.open_modal.push((val) => {\r\n\t\t\tthis.OpenModal(val);\r\n\t\t});\r\n\r\n\t\tthis._cache_obj.OBSERVERS.enable_modal_button.push((val1,val2) => {\r\n\t\t\tthis.enableButton(val1,val2);\r\n\t\t});\r\n\t}\r\n\r\n\r\n\r\n\t//@handle('init.modal')\r\n    InitializeModal() {\r\n\r\n    \t\t//console.log(this.to);\r\n    \t\tthis._buttonTitle = this.to.buttonTitle;\r\n\t\t\tthis._setTitle = this.to.title;\r\n\t\t\tthis._id = this.to.id;\r\n\t\t\tthis._width= this.to.width;\r\n\r\n\t\t\tif(this.to.display==\"none\")\r\n\t\t\t{\r\n\t\t\t\t$(this.btnRef).css(\"visibility\",\"hidden\");\r\n\t\t\t\tthis._buttonTitle = \"\";\r\n\t\t\t}\r\n    }\r\n\r\n\r\n\t//@handle('close.modal')\r\n    CloseModal(id) {\r\n    \tif(this._id==id)\r\n    \t\tthis.showing=false;\r\n\r\n    \tthis._ModalWizard.ids.pop();\r\n        //this.messages.push(message);\r\n        //this.dispatcher.dispatch('message.sent', message);\r\n    }\r\n\r\n    //@handle('open.modal')\r\n    OpenModal(id) {\r\n\r\n    \t// console.log(this._id);\r\n    \t// \tconsole.log(id);\r\n    \tif(this._id==id)\r\n    \t{\r\n    \t\t//console.log(id);\r\n    \t\tthis.showDialog();\r\n    \t\tthis._ModalWizard.ids.push(this._id);\r\n    \t}\r\n    }\r\n\r\n\tshowDialog() {\r\n\r\n\t\t //console.log(this.multiObserver);\r\n    // this.multiObserver.observe(\r\n    //   [\r\n    //     [this._cache_obj, 'TEST1']\r\n    //   ], (newValue, oldValue) => {\r\n\r\n    //   \tconsole.log(2);\r\n    //  \tthis.showing=false;\r\n    // \tthis._ModalWizard.ids.pop();\r\n\r\n    //   });\r\n\r\n\t\tthis._setContent = this.to.content;\r\n\t\t//have to do this because theres a problem clicking the modal outside.\r\n\t\t//no sure why this have to be the soltn.\r\n\t\tthis.showing = false;\r\n\r\n\t\t// window.setTimeout(() => {\r\n\t\t// \tconsole.log(\"Passed dialog3\");\r\n\t\t// \tthis.showing = true;\r\n\t\t// \tthis._ModalWizard.ids.push(this._id);\r\n\t\t// \tthis._dispatcher.dispatch(this.to.cleardispatch);\r\n\t\t// }, 1000);\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.showing = true;\r\n\t\t\tthis._ModalWizard.ids.push(this._id);\r\n\r\n\t\t\t//this._cache_obj.CALLER.ACTION=this.to.cleardispatch;\r\n\r\n\t\t\tif(this.to.cleardispatch!==undefined)\r\n\t\t\tthis._cache_obj.OBSERVERS[this.to.cleardispatch].forEach((all) => {\r\n\t\t\t\tall();\r\n\t\t\t});\r\n\r\n\r\n\t\t\t//this._dispatcher.dispatch(this.to.cleardispatch);\r\n\t\t}, 500);\r\n\r\n\t}\r\n\r\n\tcloseModal(){\r\n\t\tthis.showing=false;\r\n\t}\r\n\t\r\n\t//@handle('enable.modal.button')\r\n\tenableButton(id ,isEnabled){\r\n\t\tif(this._id==id)\r\n\t\tthis._isDisableElement=!isEnabled;\r\n\t}\r\n}","import {getLookups} from '../masterfiles';\r\nimport {inject, bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';  \r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {DialogController} from 'aurelia-dialog';\r\n\r\n@inject(Element, DialogController)\r\nexport class paymentterm {\r\n\r\n\tvarFilterArray = [];\r\n\tcontroller=null;\r\n\tconstructor(Element, controller) {\r\n\r\n\t\tthis.controller=controller;\r\n\t\t\r\n\t\tthis.varFilterArray=getLookups().PAYMENT_TERM;\r\n\r\n\t}\r\n\r\n\tselectedTerm(item){\r\n\t\t\r\n\t\tthis.controller.ok(item);\r\n\r\n\t}\r\n\r\n\tfnKeyup(evt,item){\r\n\t\tconsole.log(evt.keyCode);\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis.selectedIndiv(this.varFilterArray[0])\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';  \r\nimport {EntityManager, EntityQuery} from '../entity-manager-factory';\r\nimport toastr from \"toastr\";\r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n@inject(MultiObserver,ObserverLocator,Element, cache_obj,DialogController)\r\nexport class program {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\tpageindex=0;\r\n\tvarFilterArrayLength=0;\r\n\tvarFilterArray = [];\r\n\tcurrPredicate=null;\r\n\tcontroller=null;\r\n\tconstructor(multiObserver,observerLocator,Element, cache_obj, controller) {\r\n\t\tthis.controller=controller;\r\n\t\r\n\t\t\r\n\t\tthis.observerLocator=observerLocator;\r\n\t\t\r\n\t\tthis.items=getLookups().BDGT_TMPL_HDR;\r\n\r\n\t\tthis._cache_obj=cache_obj;\r\n\t\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t\t[this, '_bPROGRAM_CD'],\r\n\t\t\t\t[this, '_bPROGRAM_TITLE']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_program_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tselectedTalent(item){\r\n\r\n\t\tthis._cache_obj.OBSERVERS.pass_value.forEach((all) => {\r\n\t\t\tall(item);\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tonSpeculateProp(newValue, oldValue) {\r\n\t\t\r\n\t\t\r\n\t\tvar varValuesHasChanged=false;\r\n\t\t//check if inputs has value else return;\r\n\t\t_.each(this._rBUDGET_TITLE.querySelectorAll('input'), all => {\r\n\t\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n\t\t\t\t{\t\r\n\t\t\t\t\tvarValuesHasChanged=true;\r\n\t\t\t\t}\r\n\t\t});\r\n\t\t\r\n\r\n\t\tif(!varValuesHasChanged) return;\r\n\t\t//++this.intTest;\r\n\t\tvar tmpVar = [];\r\n\t\tif(this.varFilterArray.length>0)\r\n\t\t\ttmpVar=this.varFilterArray;\r\n\r\n\t\tvar lstPredicates=[];\r\n\t\t_.each(this._rBUDGET_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\t\t\t\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\")\r\n\t\t\t\r\n\t\t\t\tlstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b', ''), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\r\n\t\t\tif(tmpVar.length>0)\r\n\t\t\t{\r\n\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t});\r\n\r\n\t\tthis.currPredicate=lstPredicates;\r\n\r\n\r\n\t\t//if has existing results, use it, else, query to server\r\n\t\tif(tmpVar.length>0) \r\n\t\t{\r\n \t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t//console.log(this._cache_obj.PROGRAM_USER);\r\n\t\tif(this._cache_obj.PROGRAM_USER.length==0)\r\n\t\t{\r\n\r\n\t\t\tvar _query = EntityQuery().from('PROGRAM_USER_TRX').where(\"USER_ID\", \"==\", this._cache_obj.USER.USER_ID);\r\n\t\t\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\t//\tconsole.log(success.results);\r\n\t\t\t\tsuccess.results.forEach((all)=>{\r\n\t\t\t\t\t//console.log(all.PROGRAM_ID +\"TEST\"+all.USER_ID);\r\n\t\t\t\t\tif(all.USER_ID==this._cache_obj.USER.USER_ID)\r\n\t\t\t\t\t\tthis._cache_obj.PROGRAM_USER.push(all);\r\n\t\t\t\t});\r\n\t\t\t\t\t//var findProgramUser=this._cache_obj.PROGRAM_USER.find((allP)=>allP.PROGRAM_ID==\"9233\");\r\n\t\t\t\t\t//console.log(findProgramUser);\r\n\t\t\t});\r\n\t\t\r\n\t\t}//\r\n\r\n\t\t//delay to get minimize bloated multiple/simultaneous searching\r\n\t\tsetTimeout((a) => {\r\n\t\t\t\r\n\t\t\tif (a !== this.currPredicate)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis.varFilterArray = [];\r\n\r\n\t\t\tvar _query = EntityQuery().from('PROGRAM_MSTR').where(breeze.Predicate.and(this.currPredicate)).select('PROGRAM_CD,PROGRAM_TITLE,PROGRAM_ID,BUH_PERSONNEL_ID');\r\n\t\t\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\t\ttmpVar = [];\r\n\r\n\t\t\t\t_.each(success.results, (all) => {\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar findProgramUser=this._cache_obj.PROGRAM_USER.find((allP)=>allP.PROGRAM_ID==all.PROGRAM_ID);\r\n\t\t\t\t\tif(findProgramUser!== undefined)\r\n\t\t\t\t\t{\r\n\r\n\t\t\t\t\t\ttmpVar.push({\r\n\t\t\t\t\t\tPROGRAM_TITLE: all.PROGRAM_TITLE,\r\n\t\t\t\t\t\tPROGRAM_CD: all.PROGRAM_CD,\r\n\t\t\t\t\t\tPROGRAM_ID: all.PROGRAM_ID,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//if (tmpVar.length < this.varFilterArray.length || this.varFilterArray.length == 0) { //console.log(tmpVar);\r\n\t\t\t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\t\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\t\t\t\t//}\r\n\r\n\t\t\t}, (failed) => {\r\n\t\t\t\ttoastr.error(failed, \"Failed loading PROGRAM Names\");\r\n\t\t\t});\r\n\r\n\t\t}, 500, this.currPredicate);\r\n\r\n\t}\r\n\r\n\tselectedProgram(item){\r\n\r\n\t\t// this._cache_obj.CALLER.VALUE1 = item;\r\n\t\t// this._cache_obj.CALLER.ACTION=\"pass.program\";\r\n\r\n\t\tthis._cache_obj.OBSERVERS.pass_program.forEach((all) => {\r\n\t\t\tall(item);\r\n\t\t});\r\n\r\n\t\tthis.controller.ok();\r\n\t\t//this._dispatcher.dispatch('pass.program', item);\r\n\t}\r\n\r\n\t//@handle('clear.program.modal')\r\n\tClearSearch(){\r\n\t\tthis._bPROGRAM_CD=\"\";\r\n\t\tthis._bPROGRAM_TITLE=\"\";\r\n\t\tthis.varFilterArray = [];\r\n\t\tthis.varFilterArrayLength = 0;\r\n\t}\r\n}\r\n","import {getLookups} from '../masterfiles';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {inject, ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {getFilter} from '../helpers';\r\nimport _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import {Dispatcher, handle} from 'aurelia-flux';  \r\nimport {cache_obj} from 'cache_obj';\r\nimport {DialogController} from 'aurelia-dialog';\r\n\r\n@inject(MultiObserver,ObserverLocator,Element,cache_obj,DialogController)\r\nexport class talentmanagergroups {\r\n\titems = [];\r\n\tobserverLocator = null;\r\n\r\n\tvarFilterArray = [];\r\n\t//_dispatcher;\r\n\tvarFilterArrayLength=0;\r\n\tpageindex=0;\r\n\t_cache_obj;\r\n\tcontroller=null;\r\n\r\n\tconstructor(multiObserver,observerLocator,Element,cache_obj,controller) {\r\n\t\tthis.controller=controller;\r\n\t\t//this._dispatcher=Dispatcher;\r\n\t\tthis._cache_obj = cache_obj;\r\n\t\tthis.observerLocator=observerLocator;\r\n\t\t\r\n\t\tthis.items=getLookups().GLOBAL_GRP_MSTR;\r\n\t\tmultiObserver.observe(\r\n\t\t\t[\r\n\t\t\t[this, '_bGLOBAL_GRP_ID'],\r\n\t\t\t[this, '_bGROUP_NAME']\r\n\t\t\t], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n\t\tthis._cache_obj.OBSERVERS.clear_talentmanager_modal.push(() => {\r\n\t\t\tthis.ClearSearch();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tselectedTalent(item)\r\n\t{\r\n\t\t\r\n\t\tthis.controller.ok(item);\r\n\r\n\t}\r\n\r\n\tfnKeyup(evt,item)\r\n\t{\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis._cache_obj.OBSERVERS.pass_value.forEach((all) => {\r\n\t\t\t\t\tall(this.varFilterArray[0]);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSpeculateProp(newValue, oldValue) \r\n\t{\r\n\r\n\r\n\t\tvar varValuesHasChanged=false;\r\n\t\t//check if inputs has value else return;\r\n\t\t_.each(this._rGROUP_TITLE.querySelectorAll('input'), all => {\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n\t\t\t{\t\r\n\t\t\t\tvarValuesHasChanged=true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\r\n\r\n\t\tif(!varValuesHasChanged) return;\r\n\r\n\t\tvar tmpVar = this.items;\r\n\t\t_.each(this._rGROUP_TITLE.querySelectorAll('input'), all => {\r\n\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\t\t\t\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\")\r\n\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue().toUpperCase() , all.getAttribute('searchable').replace('_s', ''));\r\n\r\n\t\t});\r\n\r\n\t\tthis.varFilterArray = tmpVar;\r\n\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t}\r\n\r\n\t//@handle('clear.talentmanager.modal')\r\n\tClearSearch()\r\n\t{\r\n\t\tthis.varFilterArray=[];\r\n\t\tthis.varFilterArrayLength=0;\r\n\t\tthis._bGLOBAL_GRP_ID=\"\";\r\n\t\tthis._bGROUP_NAME=\"\";\r\n\t\tthis.varFilterArray = [];\r\n\t\tthis.varFilterArrayLength=0;\r\n\t}\r\n}","export class obj_personnel\r\n{\r\n\tglobal_indiv_id=\"\";\t\r\n\tediting_status=\"\";\r\n    HEADER = {\r\n    \tcitizenship:[],\r\n    \tgroup:[]\r\n    };\r\n\tCONTACT={\r\n\t\tstatus:\"\",\r\n\t\tmodelAddress:{},\r\n\t\tstatusContact:\"Add\",\r\n\t\tmodelContact:{},\r\n\t\tmodelInternet:{},\r\n\t\taddress:[],\r\n\t\tcontact:[],\r\n\t\temail:[],\r\n\t\twebsite:[]\r\n\t};\r\n\tEDUCATIONAL_ACHIEVEMENT={\r\n\t\tstatus:\"\",\r\n\t\tmodel:{},\r\n\t\tlist:[]\r\n\t};\r\n\tCHARACTERISTIC=[];\r\n\tSKILLS=[];\r\n\tLANGUAGE_DIALECT=[];\r\n\tMEDICAL_RECORD=[];\r\n\tRELATIVE=[];\r\n\tWORK_EXPERIENCE=[];\r\n\tAWARDS=[];\r\n\tSEMINARS=[];\r\n\tGOVERNMENT_INFO={\r\n\t\tmodelTaxAffidavit:{},\r\n\t\tmodelPermit:{},\r\n\t\ttax_affidavit:[],\r\n\t\tpermits:[]\r\n\t};\r\n\tGOVERNMENT_EXAM=[];\r\n\tCRIMINAL_RECORD=[];\r\n\tCOMPANY_SPECIFIC={\r\n\t\tmodel:{},\r\n\t\tlist:[]\r\n\t};\r\n\tENDORSEMENT=[];\r\n\tIMAGE_BRANDING=[];\r\n\tQUESTION_ANSWER=[];\r\n    USER={};\r\n\tOBSERVERS={\r\n\t\tppid_dialog:[],\r\n\t\ttab_changed:[],\r\n\t\tclear_ppid:[],\r\n\t\tclear_log:[],\r\n\t\tclear_login_modal:[],\r\n\t\tmaintab_contact_clicked:[],\r\n\t\tmaintab_education_clicked:[],\r\n\t\tgovinfo_main_clicked:[],\r\n\t\tcompany_main_clicked:[]\r\n\r\n\t};\r\n\r\n\t//Dropdown\r\n\tSTATUS=[];\r\n\tCIVIL_STATUS=[];\r\n\tCITIZENSHIP=[];\r\n\tRELIGION=[];\r\n\tCOUNTRY=[];\r\n\tREGION=[];\r\n\tGROUP=[];\r\n\tLOCATIONS=[];\r\n\tCONTACT_TYPE=[];\r\n\tLEVEL=[];\r\n\tYEAR=[];\r\n\tSCHOOLS=[];\r\n\tLANGUAGE=[];\r\n\tPOSITION=[];\r\n\tAWARD=[];\r\n\tTRAINING=[];\r\n\tTAX_EXEMPT=[];\r\n\tINPUT_TAX=[];\r\n\tPERMIT=[];\r\n\tVAT_STAT=[];\r\n\tEXAM=[];\r\n\tCASE_STAT=[];\r\n\tVIOLATION=[];\r\n\tPROFESSIONAL_TYPE=[];\r\n\tCESSATION=[];\r\n\tTARGET_MARKET=[];\r\n\tCOMPANY=[];\r\n\tDIVISION=[];\r\n\tLOCATIONS_RNG=[];\r\n\tCATEGORY=[];\r\n\tJOB_CATEGORY=[];\r\n\tJOB=[];\r\n\tPAYROLL_GROUP=[];\r\n\tBANK=[];\r\n\r\n\r\n\t\r\n\tconstructor(){\r\n\t\r\n\t}\r\n}","import {checkCookie,setCookie,removeCookie} from '.././helpers';\r\nimport toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from './obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {ppid_search} from \"./modals/ppid_search\";\r\nimport {EntityManager,EntityQuery} from '../entity-manager-factory'; \r\nimport {getLookups} from '../masterfiles';\r\n\r\n@inject(DialogService, obj_personnel)\r\nexport class ppid\r\n{\r\n\tobj_personnel = null;\r\n\tglobal_indiv_id=\"\";\r\n\t\r\n\t\r\n\tconstructor(dialogService, obj_personnel){\r\n\t\tthis.dialogService=dialogService;\r\n\t\tthis.obj_personnel = obj_personnel;\t\t\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.ppid_dialog.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_contact_clicked.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_education_clicked.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.govinfo_main_clicked.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.company_main_clicked.length=0;\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.length=0;\r\n\t\tthis.obj_personnel.HEADER = {\r\n    \t\tcitizenship:[],\r\n    \t\tgroup:[]\r\n    \t};\r\n\t\tthis.LoadDropdown();\r\n\r\n\t\tthis.LoginPassed(this.obj_personnel.USER);\r\n\t}\r\n\r\n\tLoadDropdown()\r\n\t{\r\n\t\t// var _query = EntityQuery().from('GLOBAL_GRP_MSTR')\r\n\t\t// \t\t.orderBy('GROUP_NAME')\r\n\t\t// \t\t.select('GLOBAL_GRP_ID, GROUP_NAME');\r\n\t\t// EntityManager().executeQuery(_query).then((success)=>{\r\n\t\t// \tvar tmp=[];\r\n\t\t// \t_.each(success.results, (result)=>{\r\n\t\t// \t\ttmp.push({\r\n\t\t// \t\t\tvalue:result.GLOBAL_GRP_ID ,\r\n\t\t// \t\t\ttext:result.GROUP_NAME\r\n\t\t// \t\t});\r\n\t\t// \t});\r\n\t\t// \tthis.obj_personnel.GROUP = tmp;\r\n\t\t// },\r\n\t\t// (failed)=>{\r\n\t\t// \ttoastr.error(failed,'Error in loading group dropdown.');\r\n\t\t// });\r\n\t\tvar maxYear= new Date().getFullYear();\r\n\t\tvar leastYear = 1960;\r\n\t\tvar tmpYear=[];\r\n\t\tdo{\r\n\t\t\ttmpYear.push({\r\n\t\t\t\tvalue: leastYear,\r\n\t\t\t\ttext: leastYear\r\n\t\t\t});\r\n\t\t\tleastYear++;\r\n\t\t}while(leastYear<=maxYear);\r\n\t\tthis.obj_personnel.YEAR = tmpYear;\r\n\r\n\t\tif(getLookups() != null){\r\n\t\t\tthis.obj_personnel.LOCATIONS = getLookups().LOCATION_MSTR;\r\n\t\t\tthis.obj_personnel.LOCATIONS.shift(); //Remove \"[SELECT A VALUE]\" value\t\r\n\r\n\t\t\tthis.obj_personnel.CIVIL_STATUS.length=0;\r\n\t\t\tthis.obj_personnel.RELIGION.length=0;\r\n\t\t\tthis.obj_personnel.CITIZENSHIP.length=0;\r\n\t\t\tthis.obj_personnel.CONTACT_TYPE.length=0;\r\n\t\t\tthis.obj_personnel.LEVEL.length=0;\r\n\t\t\tthis.obj_personnel.LANGUAGE.length=0;\r\n\t\t\tthis.obj_personnel.STATUS.length=0;\r\n\t\t\tthis.obj_personnel.POSITION.length=0;\r\n\t\t\tthis.obj_personnel.AWARD.length=0;\r\n\t\t\tthis.obj_personnel.TRAINING.length=0;\r\n\t\t\tthis.obj_personnel.TAX_EXEMPT.length=0;\r\n\t\t\tthis.obj_personnel.INPUT_TAX.length=0;\r\n\t\t\tthis.obj_personnel.PERMIT.length=0;\r\n\t\t\tthis.obj_personnel.VAT_STAT.length=0;\r\n\t\t\tthis.obj_personnel.EXAM.length=0;\r\n\t\t\tthis.obj_personnel.CASE_STAT.length=0;\r\n\t\t\tthis.obj_personnel.VIOLATION.length=0;\r\n\t\t\tthis.obj_personnel.PROFESSIONAL_TYPE.length=0;\r\n\t\t\tthis.obj_personnel.CESSATION.length=0;\r\n\t\t\tthis.obj_personnel.TARGET_MARKET.length=0;\r\n\r\n\t\t\tgetLookups().REFERENCE_CD_MSTR.forEach((item)=>{\r\n\t\t\t\tswitch(item.REF_GRP_CD){\r\n\t\t\t\t\tcase \"CIVIL_STATUS\": \tthis.obj_personnel.CIVIL_STATUS.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"RELIGION_CD\": \tthis.obj_personnel.RELIGION.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"CITIZENSHIP_CD\": \tthis.obj_personnel.CITIZENSHIP.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"CONTACT_TYPE_CD\": this.obj_personnel.CONTACT_TYPE.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"LEVEL_CD\": \tthis.obj_personnel.LEVEL.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"LANG_DIALECT_CD\":\tthis.obj_personnel.LANGUAGE.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"STATUS_CD\": \tthis.obj_personnel.STATUS.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"POSITION_CD\": this.obj_personnel.POSITION.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"AWARD_CD\": \tthis.obj_personnel.AWARD.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"TRNG_CD\": \tthis.obj_personnel.TRAINING.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"TAX_EXEMPT_CD\":\tthis.obj_personnel.TAX_EXEMPT.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"INPUT_TAX_CD\": \tthis.obj_personnel.INPUT_TAX.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"PERMIT_CD\": \tthis.obj_personnel.PERMIT.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"VAT_STAT_CD\": this.obj_personnel.VAT_STAT.push({\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"EXAM_CD\": this.obj_personnel.EXAM.push({\r\n\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"CASE_STAT_CD\": \tthis.obj_personnel.CASE_STAT.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"VIOLATION_CD\": \tthis.obj_personnel.VIOLATION.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"PROFESSIONAL_TYPE_CD\": \tthis.obj_personnel.PROFESSIONAL_TYPE.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"CESSATION_CODE\": \tthis.obj_personnel.CESSATION.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"TARGET_MARKET_CD\": \tthis.obj_personnel.TARGET_MARKET.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: item.REF_CD,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: item.REF_DESC\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.GROUP.length=0;\r\n\t\t\tgetLookups().GLOBAL_GRP_MSTR.forEach((item)=>{\r\n\t\t\t\tthis.obj_personnel.GROUP.push({\r\n\t\t\t\t\tvalue: item.GLOBAL_GRP_ID,\r\n\t\t\t\t\ttext: item.GROUP_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.COMPANY.length=0;\r\n\t\t\tgetLookups().COMPANY_MSTR.forEach((item)=>{\r\n\t\t\t\tthis.obj_personnel.COMPANY.push({\r\n\t\t\t\t\tid: item.COMPANY_ID,\r\n\t\t\t\t\tvalue: item.COMPANY_CD,\r\n\t\t\t\t\ttext: item.COMPANY_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.COMPANY.shift();\r\n\r\n\t\t\t// this.obj_personnel.DIVISION.length=0;\r\n\t\t\t// getLookups().DIVISION_MSTR.forEach((item)=>{\r\n\t\t\t// \tthis.obj_personnel.DIVISION.push({\r\n\t\t\t// \t\tgroup: item.COMPANY_ID,\r\n\t\t\t// \t\tvalue: item.DIVISION_CD,\r\n\t\t\t// \t\ttext: item.DIVISION_NAME\r\n\t\t\t// \t});\r\n\t\t\t// });\r\n\r\n\t\t\t// order all\r\n\t\t\tthis.obj_personnel.GROUP.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.CIVIL_STATUS.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.RELIGION.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.CITIZENSHIP.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.CONTACT_TYPE.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.LEVEL.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.LANGUAGE.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.STATUS.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.POSITION.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.AWARD.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.TRAINING.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.PERMIT.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.TAX_EXEMPT.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.INPUT_TAX.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.EXAM.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.VIOLATION.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.PROFESSIONAL_TYPE.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.CESSATION.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.TARGET_MARKET.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.COMPANY.sort(this.OrderByText);\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tvar _query = EntityQuery().from('COUNTRY_MSTR')\r\n\t\t\t\t.orderBy('COUNTRY_NAME')\r\n\t\t\t\t.select('COUNTRY_CD, COUNTRY_NAME');\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tvalue:result.COUNTRY_CD ,\r\n\t\t\t\t\ttext:result.COUNTRY_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.COUNTRY = tmp;\r\n\t\t},\r\n\t\t(failed)=>{\r\n\t\t\ttoastr.error(failed,'Error in loading country dropdown.');\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from('REGION_MSTR')\r\n\t\t\t\t .orderBy('REGION_DESC')\r\n\t\t\t\t .select('REGION_CD, REGION_DESC, COUNTRY_CD');\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tvalue: result.REGION_CD,\r\n\t\t\t\t\ttext: result.REGION_DESC,\r\n\t\t\t\t\tgroup: result.COUNTRY_CD\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.REGION = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed, 'Error in loading region dropdown.');\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"SCHOOL_MSTR\")\r\n\t\t\t\t.orderBy(\"SCHOOL_NAME\")\r\n\t\t\t\t.select(\"SCHOOL_CD, SCHOOL_NAME, SCHOOL_ADDR\");\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp = [];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tschool_cd: result.SCHOOL_CD,\r\n\t\t\t\t\tschool_name: result.SCHOOL_NAME,\r\n\t\t\t\t\tschool_addr: result.SCHOOL_ADDR\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.SCHOOLS = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed, \"Error in loading schools dropdown.\");\r\n\t\t\tconsole.log(failed);\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"RNG_LOCATION_MSTR\")\r\n\t\t\t\t .orderBy(\"LOCATION_NAME\");\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp = [];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tvalue: result.LOCATION_CD,\r\n\t\t\t\t\ttext: result.LOCATION_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.LOCATIONS_RNG = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed, \"Error in loading RNG Locations dropdown\");\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"PAYROLL_GRP_MSTR\")\r\n\t\t\t\t .orderBy(\"PAYROLL_GRP_DESC\");\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp = [];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tid: result.PAYROLL_GRP_ID,\t\t\t\t\t\r\n\t\t\t\t\tvalue: result.PAYROLL_GRP_CD,\r\n\t\t\t\t\ttext: result.PAYROLL_GRP_DESC\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.PAYROLL_GROUP = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed, \"Error in loading Payroll Group dropdown.\");\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from(\"BANK_MSTR\")\r\n\t\t\t\t .orderBy(\"BANK_SHORT_NAME\");\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tid: result.BANK_ID,\r\n\t\t\t\t\tshort_nm: result.BANK_SHORT_NAME,\r\n\t\t\t\t\tbank_cd: result.BANK_CD,\r\n\t\t\t\t\tlong_nm: result.BANK_LONG_NAME\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.BANK = tmp;\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed,\"Error in loading Bank dropdown\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tOrderByText(a, b){\r\n\t\tif(a.text.toUpperCase() < b.text.toUpperCase())\r\n\t\t\treturn -1;\r\n\t\tif(a.text.toUpperCase() > b.text.toUpperCase())\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\t\r\n\tchangeTab(tabNumber)\r\n\t{\r\n\t\tif(this.obj_personnel.global_indiv_id == undefined || this.obj_personnel.global_indiv_id == null || this.obj_personnel.global_indiv_id.length==0)\r\n\t\t\treturn;\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.forEach((all)=>{\r\n\t\t\tall(tabNumber, this.obj_personnel.global_indiv_id);\r\n\t\t});\r\n\t}\t\r\n\t\r\n\tFindUsers()\r\n\t{\t\r\n\t\tthis.dialogService.open({\r\n\t\t\tviewModel: ppid_search\r\n\t\t}).whenClosed(response=>{\r\n\t\t\tif(!response.wasCancelled)\r\n\t\t\t{\r\n\t\t\t\tconsole.log(response.output);\r\n\t\t\t\t//var arr = response.output.split('|');\r\n\t\t\t\t//var global_id = arr[0];\r\n\t\t\t\t//var tin = arr[1];\r\n\t\t\t\t//var group = arr[2];\r\n\t\t\t\t//var last_name = arr[3];\r\n\t\t\t\t//var first_name = arr[4];\r\n\t\t\t\t//var nick_name = arr[5];\r\n\t\t\t\t//var project_name = arr[6];\r\n\t\t\t\t//var country = arr[7];\r\n\t\t\t\t//alert(\"Global_id:\"+global_id+\"\\nTin:\"+tin+\"\\nGroup:\"+group+\"\\nLast Name:\"+last_name+\"\\nFirst Name:\"+first_name+\"\\nNick Name:\"+nick_name+\"\\nProject Name:\"+project_name+\"\\nCountry:\"+country);\r\n\t\t\t}else\r\n\t\t\t{\r\n\t\t\t\tconsole.log('reponse was cancelled.');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tAddUsers()\r\n\t{\r\n\t\talert('AddUsers function under maintenance.');\r\n\t}\r\n\r\n\tLoginPassed(user){\r\n\t\t// console.log(user);\r\n\t\t// this.obj_personnel.USER = user;\r\n\t}\r\n}","import { EntityManager, EntityQuery, initializeBreeze, generateID} from '../entity-manager-factory';\r\nimport { checkCookie, setCookie, removeCookie, substringMatcher} from '../helpers';\r\nimport {loadMasterfiles, loadTables, loadLookups, getLookups} from '../masterfiles';\r\nimport toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport typeahead from 'typeahead';\r\nimport _ from 'underscore';\r\nimport {buhProgramDialog} from '../modals/buh-program-dialog';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport { login } from '../modals/login';\r\nimport { buhSearch } from '../modals/buh-search';\r\n@inject(DialogService)\r\nexport class buh {\r\n\t_objBUH={PROGRAMS:[]};\r\n\r\n\tdialogService=null;\r\n\tloginDisabled=true;\r\n\tlogoutDisabled=false;\r\n\t//_BUH_PERSONNEL_ID=0;\r\n\tmasterFilesLoaded=false;\r\n\t_disableCells=true;\r\n\t_disableAdd=false;\r\n\t_disableDelete=true;\r\n\t_disableSave=true;\r\n\t_disableSearch=false;\r\n\t_disableGrid=true;\r\n\t_status=\"\";\r\n\t_user={};\r\n\t_programs=[];\r\n\tconstructor(DialogService)\r\n\t{\r\n\r\n\t\tthis.dialogService=DialogService;\r\n\t\r\n\r\n\t\tif(this.dialogService.controllers.length>0)\r\n\t\t{\r\n\t\t\tfor (var i = this.dialogService.controllers.length - 1; i >= 0; i--) {\r\n\t\t\t\tthis.dialogService.controllers[i].close();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t\t\t//toastr.success(\"Loading Programs\", \"Loading\");\r\n\r\n\t\t\t\t//initializeBreeze().then(() => {\t\r\n\r\n\r\n\t\t\t\t//\tvar _query = EntityQuery().from('PROGRAM_MSTR').where(breeze.Predicate.and(this.currPredicate)).select('PROGRAM_CD,PROGRAM_TITLE,PROGRAM_ID,BUH_PERSONNEL_ID');\r\n\t\t\t\t//\tEntityManager().executeQuery(_query).then((success) => {\r\n\t\t\t\t//\t\tthis._programs= success.results;\r\n\t\t\t\t//\t});\t\r\n\t\t\t\t//      //have to set timeout because of IE, other templates are not loading\r\n\t\t\t\t//      // quickly and loading at same time with functions\r\n\t\t\t\t//      setTimeout(() => {\r\n\r\n\t\t\t\t//      \tif (checkCookie(\"PPMS_USER\") == \"\" || checkCookie(\"PPMS_USER\")==undefined || checkCookie(\"PPMS_USER\").indexOf('undefined')>=0)\r\n\t\t\t\t//      \t{\r\n\t\t\t\t//      \t\tthis.fnLogin();\r\n\t\t\t\t//      \t\tthis.loginDisabled=false;\r\n\t\t\t\t//      \t\tthis.logoutDisabled=true;\r\n\t\t\t\t//      \t\treturn;\r\n\t\t\t\t//      \t}\r\n\r\n\t\t\t\t//      \tthis.fnInitMasterfiles(0,\"\");\r\n\r\n\r\n\t\t\t\t//      }, 2000);\r\n\t\t\t\t//  });\r\n\r\n\r\n    // toastr.options = {\r\n    //   \"closeButton\": true,\r\n    //   \"debug\": false,\r\n    //   \"positionClass\": \"toast-bottom-right\",\r\n    //   \"onclick\": null,\r\n    //   \"showDuration\": \"300\",\r\n    //   \"hideDuration\": \"1000\",\r\n    //   //\"timeOut\": \"300000\",\r\n    //   //\"extendedTimeOut\": \"1000\",\r\n    //   \"showEasing\": \"swing\",\r\n    //   \"hideEasing\": \"linear\",\r\n    //   \"showMethod\": \"fadeIn\",\r\n    //   \"hideMethod\": \"fadeOut\"\r\n    // };\r\n\r\n\t}\r\n\r\n\taddBUH(){\r\n\t\tthis.fnCRUD(\"add\");\r\n\t}\r\n\r\n\tfnCRUD(value)\r\n\t{\r\n\t\tthis._disableCells=true;\r\n\t\tthis._disableSave=true;\r\n\t\tthis._disableDelete=true;\r\n\t\tthis._disableAdd=true;\r\n\t\tthis._disableGrid=true;\r\n\t\tthis._disableSearch=true;\r\n\t\tswitch(value){\r\n\t\t\tcase \"cancel\":\r\n\t\t\t{\r\n\t\t\t\tthis._disableSearch=false;\t\r\n\t\t\t\tthis._disableAdd=false;\r\n\t\t\t\tthis._objBUH={\r\n\t\t\t\t\tBUH_PERSONNEL_ID: 0,\r\n\t\t\t\t\tOPTIONAL_GLOBAL_ID: \"\",\r\n\t\t\t\t\tFIRST_NAME: \"\",\r\n\t\t\t\t\tMIDDLE_NAME: \"\",\r\n\t\t\t\t\tLAST_NAME: \"\",\r\n\t\t\t\t\tEMAIL_ADDRESS: \"\",PROGRAMS:[]};\r\n\t\t\t\tthis._status=\"\";\t\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"search\":\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.searchExistingBuh();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"add\":\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._status=\"add\";\r\n\t\t\t\t\tthis._disableCells=false;\r\n\t\t\t\t\tthis._disableSave=false;\r\n\t\t\t\t\tthis._objBUH={\r\n\t\t\t\t\t\tBUH_PERSONNEL_ID: \"\",\r\n\t\t\t\t\t\tOPTIONAL_GLOBAL_ID: \"\",\r\n\t\t\t\t\t\tFIRST_NAME: \"\",\r\n\t\t\t\t\t\tMIDDLE_NAME: \"\",\r\n\t\t\t\t\t\tLAST_NAME: \"\",\r\n\t\t\t\t\t\tEMAIL_ADDRESS: \"\",PROGRAMS:[]};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"delete\":\r\n\t\t\t\t\t{\r\n\r\n\t\t\t\t\t\tvar varDelete =confirm(\"Delete BUH?\");\r\n\r\n\r\n\t\t\t\t\t\tif(varDelete)\r\n\t\t\t\t\t\t{\r\n\r\n\r\n\t\t\t\t\t\t\tfor (var i = this._objBUH.PROGRAMS.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\t\t\tvar found = this._programs.find((all)=>all.PROGRAM_CD==this._objBUH.PROGRAMS[i].PROGRAM_CD);\r\n\t\t\t\t\t\t\t\tfound.BUH_PERSONNEL_ID=0;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar getBUHForEdit = EntityQuery().from('BUH_PERSONNEL').where(\"BUH_PERSONNEL_ID\",\"==\",this._objBUH.BUH_PERSONNEL_ID);\r\n\t\t\t\t\t\t\tEntityManager().executeQuery(getBUHForEdit).then((success) => {\r\n\t\t\t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\t\t\t\t\t\t\t\tEntityManager().saveChanges().then((success) => {\r\n\r\n\t\t\t\t\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"Program\");\r\n\r\n\t\t\t\t\t\t\t\t}, (fail) => {\r\n\r\n\t\t\t\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\tthis.fnCRUD(\"cancel\");\r\n\r\n\r\n\t\t\t\t\t\t\t});\r\n\r\n\r\n\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis._disableCells=false;\r\n\t\t\t\t\t\tthis._disableSave=false;\r\n\t\t\t\t\t\tthis._disableDelete=false;\r\n\t\t\t\t\t\tthis._disableAdd=false;\r\n\t\t\t\t\t\tthis._disableGrid=false;\r\n\t\t\t\t\t\tthis._disableSearch=false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"save\":\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.saveBUH();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tsaveBUH()\r\n\t\t\t{\r\n\t\t\t\tif(this._status==\"view\")\r\n\t\t\t\t{\r\n\t\t\t\t\tvar getBUHForEdit = EntityQuery().from('BUH_PERSONNEL').where(\"BUH_PERSONNEL_ID\",\"==\",this._objBUH.BUH_PERSONNEL_ID);\r\n\t\t\t\t\tEntityManager().executeQuery(getBUHForEdit).then((success) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsuccess.results[0].OPTIONAL_GLOBAL_ID=this._objBUH.OPTIONAL_GLOBAL_ID.toUpperCase();\r\n\t\t\t\t\t\tsuccess.results[0].FIRST_NAME=this._objBUH.FIRST_NAME.toUpperCase();\r\n\t\t\t\t\t\tsuccess.results[0].MIDDLE_NAME=this._objBUH.MIDDLE_NAME.toUpperCase();\r\n\t\t\t\t\t\tsuccess.results[0].LAST_NAME=this._objBUH.LAST_NAME.toUpperCase();\r\n\t\t\t\t\t\tsuccess.results[0].EMAIL_ADDRESS=this._objBUH.EMAIL_ADDRESS.toUpperCase();\r\n\r\n\t\t\t\t\t\tEntityManager().saveChanges().then((success) => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"New Business Unit Head\");\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis._disableDelete=false;\r\n\t\t\t\t\t\t\tthis._disableGrid=false;\r\n\t\t\t\t\t\t\tthis._disableAdd=false;\r\n\t\t\t\t\t\t\tthis._disableSearch=false;\r\n\t\t\t\t\t\t\tthis._disableCells=false;\r\n\t\t\t\t\t\t\tthis._disableSave=false;\r\n\r\n\t\t\t\t\t\t}, (fail) => {\r\n\r\n\t\t\t\t\t\t\tif(varInsert!=null)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvarInsert.entityAspect.setDeleted();  \r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tconsole.log(fail);\r\n\t\t\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\r\n\t\t\t\t\t\t});\r\n\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t///INSERTING\r\n\t\t\tvar getMax = EntityQuery().from('BUH_PERSONNEL').orderByDesc('BUH_PERSONNEL_ID').take(1);\r\n\t\t\tEntityManager().executeQuery(getMax).then((successMax) => {\r\n\t\t\t\tvar getMax = 1;\r\n\r\n\t\t\t\tif (successMax.results.length > 0)\r\n\t\t\t\t\tgetMax = successMax.results[0].BUH_PERSONNEL_ID + 1;\r\n\r\n\r\n\t\t\t\tvar varInsert = EntityManager().createEntity('BUH_PERSONNEL', {\r\n\t\t\t\t\tBUH_PERSONNEL_ID: getMax,\r\n\t\t\t\t\tOPTIONAL_GLOBAL_ID: this._objBUH.OPTIONAL_GLOBAL_ID.toUpperCase(),\r\n\t\t\t\t\tFIRST_NAME: this._objBUH.FIRST_NAME.toUpperCase(),\r\n\t\t\t\t\tMIDDLE_NAME: this._objBUH.MIDDLE_NAME.toUpperCase(),\r\n\t\t\t\t\tLAST_NAME: this._objBUH.LAST_NAME.toUpperCase(),\r\n\t\t\t\t\tEMAIL_ADDRESS: this._objBUH.EMAIL_ADDRESS.toUpperCase(),\r\n\t\t\t\t\tCREATED_BY: \"PAULV\",\r\n\t\t\t\t\tCREATED_DT: new Date(Date.now()),\r\n\t\t\t\t});\r\n\r\n\t\t\t\tEntityManager().addEntity(varInsert);\r\n\r\n\t\t\t\tEntityManager().saveChanges().then((success) => {\r\n\r\n\t\t\t\t\tthis._objBUH.BUH_PERSONNEL_ID=getMax;\r\n\r\n\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"New Business Unit Head\");\r\n\r\n\t\t\t\t\tthis._disableDelete=false;\r\n\t\t\t\t\tthis._disableGrid=false;\r\n\t\t\t\t\tthis._disableAdd=false;\r\n\t\t\t\t\tthis._disableSearch=false;\r\n\t\t\t\t\tthis._disableDelete=false;\r\n\t\t\t\t\tthis._disableCells=false;\r\n\t\t\t\t\tthis._disableSave=false;\r\n\t\t\t\t\tthis._status=\"view\";\r\n\r\n\t\t\t\t}, (fail) => {\r\n\r\n\t\t\t\t\tif(varInsert!=null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvarInsert.entityAspect.setDeleted();  \r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconsole.log(fail);\r\n\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\r\n\r\n\r\n\t\t}\r\n\r\n\r\n\t\tdeleteSelected(index)\r\n\t\t{\r\n\t\t\tvar varDelete =confirm(\"Delete record?\");\r\n\t\t\tif(varDelete)\r\n\t\t\t{\r\n\r\n\t\t\t\tvar found = this._programs.find((all)=>all.PROGRAM_CD==this._objBUH.PROGRAMS[index].PROGRAM_CD);\r\n\t\t\t\tfound.BUH_PERSONNEL_ID=0;\r\n\r\n\r\n\t\t\t\tEntityManager().saveChanges().then((success) => {\r\n\r\n\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"Program\");\r\n\r\n\t\t\t\t}, (fail) => {\r\n\r\n\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tthis._objBUH.PROGRAMS.splice(index,1);\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\r\n\t\tsearchExistingBuh(){\r\n\t\t\t\r\n\t\t\tthis.dialogService.open({\r\n\t\t\t\tviewModel: buhSearch\r\n            }).whenClosed(response => {\r\n\r\n\t\t\t\tif (!response.wasCancelled) {\r\n\t\t\t\t\tthis.searchBUH(response.output);\r\n\t\t\t\t\tthis._disableGrid=false;\r\n\t\t\t\t\tthis._disableDelete=false;\r\n\t\t\t\t\tthis._disableSave=false;\r\n\t\t\t\t\tthis._disableCells=false;\r\n\t\t\t\t} \r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._disableSearch=false;\r\n\t\t\t\t\tthis._disableAdd=false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tsearchBUH(item)\r\n\t\t{\r\n\t\t\tthis._status=\"view\";\r\n\r\n\t\t\tthis._objBUH.BUH_PERSONNEL_ID=item.BUH_PERSONNEL_ID;\r\n\t\t\tthis._objBUH.OPTIONAL_GLOBAL_ID=item.OPTIONAL_GLOBAL_ID;\r\n\t\t\tthis._objBUH.FIRST_NAME=item.FIRST_NAME;\r\n\t\t\tthis._objBUH.MIDDLE_NAME=item.MIDDLE_NAME;\r\n\t\t\tthis._objBUH.LAST_NAME=item.LAST_NAME;\r\n\t\t\tthis._objBUH.EMAIL_ADDRESS=item.EMAIL_ADDRESS;\r\n\r\n\t\t\tthis._disableAdd=false;\r\n\t\t\tthis._disableSearch=false;\r\n\r\n\t\t\tthis._objBUH.PROGRAMS=[];\r\n\r\n\t\t\tvar found = this._programs.filter((all)=>all.BUH_PERSONNEL_ID==item.BUH_PERSONNEL_ID);\r\n\t\t\t\r\n\t\t\tif(found!==undefined)\r\n\t\t\t\tfound.forEach((foundItems)=>\r\n\t\t\t\t{\t\r\n\t\t\t\t\tthis._objBUH.PROGRAMS.push(foundItems);\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\r\n\r\n\t\tsearchPrograms(){\t\r\n\t\t\tthis.dialogService.open({\r\n\t\t\t\tviewModel: buhProgramDialog\r\n            }).whenClosed(response => {\r\n\r\n\t\t\t\tif (!response.wasCancelled) {\r\n\r\n\t\t\t\t\tfor (var a = response.output.length - 1; a >= 0; --a) {\r\n\t\t\t\t\t\tvar found = this._programs.find((all)=>all.PROGRAM_CD==response.output[a].PROGRAM_CD);\r\n\t\t\t\t\t\tconsole.log(found.BUH_PERSONNEL_ID);\r\n\t\t\t\t\t\tif(found.BUH_PERSONNEL_ID==0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis._objBUH.PROGRAMS.push(response.output[a]);\r\n\t\t\t\t\t\t\tfound.BUH_PERSONNEL_ID=this._objBUH.BUH_PERSONNEL_ID;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttoastr.error(\"<strong>\"+found.PROGRAM_TITLE+\"</strong> cannot be added, it is assigned to other BUH Personnel.\", \"Problem occured\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tEntityManager().saveChanges().then((success) => {\r\n\r\n\t\t\t\t\t\ttoastr.success(\"Succesfully Saved\", \"Program\");\r\n\r\n\t\t\t\t\t}, (fail) => {\r\n\r\n\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\ttoastr.error(\"Error Occured\", fail);\r\n\t\t\t\t\t});\r\n\r\n\r\n\r\n\r\n\t\t\t        \t//this._objBUH.PROGRAMS=response.output;\r\n\t\t\t        } \r\n\t\t\t    });\r\n\t\t}\r\n\r\n\t\tfnInitMasterfiles(initType,output){\r\n\r\n\t\t\tif(this.masterFilesLoaded==false)\r\n\t\t\t{\r\n\t\t\t\tthis._toastr = toastr;\r\n\t\t\t\ttoastr.info(\"Masterfiles...\", \"Loading please wait..\", { timeOut: 15000 });\r\n\t\t\t\tthis.loginDisabled = true;\r\n\t\t\t\tloadMasterfiles().then(() => {\r\n\t\t\t\t\tloadLookups().then(() => {\r\n                        \r\n\t\t\t\t\t\tthis.masterFilesLoaded = true;\r\n\r\n\t\t\t\t\t\tthis.fnPassUserObject(initType,output);\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.fnPassUserObject(initType,output);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfnLogin(){\r\n\t\t\tthis.dialogService.open({\r\n\t\t\t\tviewModel: login\r\n            }).whenClosed(response => {\r\n\r\n\t\t\t\tif (!response.wasCancelled) {\r\n\t\t\t\t\tthis.fnInitMasterfiles(1, response.output);\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfnPassUserObject(initType,output){\r\n\r\n\t\t\tif (initType == 1) {\r\n\r\n\r\n\t\t\t} else {\r\n\t\t\t\tvar varCookie = checkCookie(\"PPMS_USER\");\r\n\t\t\t\tvar varSplitCookie = varCookie.split('^');\r\n\t\t\t\tthis._user = {\r\n\t\t\t\t\tUSER_ID: varSplitCookie[0],\r\n\t\t\t\t\tCOMPANY_ID: varSplitCookie[1],\r\n\t\t\t\t\tIs_HR: varSplitCookie[2],\r\n\t\t\t\t\tIs_Branch: varSplitCookie[0]\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.loginDisabled = true;\r\n\t\t\t\tthis.logoutDisabled = false;\r\n\t\t\t\tthis.showingLogout = \"visible\";\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"Let's Start...\", \"Success\");\r\n\t\t\t\tthis._disableAdd=false;\r\n\t\t\t\tthis._disableSearch=false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.LoginPassed(output);\r\n\r\n\t\t}\r\n\r\n\t\tLoginPassed(user) {\r\n\r\n\t\t\tthis._user = user; \r\n\r\n      //console.log(user.USER_ID+\"^\"+user.COMPANY_ID+\"^\"+user.Is_HR+\"^\"+user.Is_Branch);\r\n\r\n      setCookie(\"PPMS_USER\", user.USER_ID+\"^\"+user.COMPANY_ID+\"^\"+user.Is_HR+\"^\"+user.Is_Branch, 30);\r\n      toastr.clear();\r\n      toastr.success(\"Let's Start...\", \"Success\");\r\n\r\n      this.logoutDisabled = false;\r\n      this.loginDisabled=true;\r\n\r\n      this.showingLogout = \"visible\";\r\n      this._disableAdd=false;\r\n\t  this._disableSearch=false;\r\n  }\r\n\r\n\r\n\r\n  logout() {\r\n  \tthis.fnCRUD(\"cancel\");\r\n  \tthis._disableAdd=true;\r\n\tthis._disableSearch=true;\r\n  \tthis.loginDisabled=false;\r\n  \tthis.logoutDisabled=true;\r\n\r\n  \tthis._user ={};\r\n  \tremoveCookie();\r\n  \tthis.showingLogout = \"hidden\";\r\n  \tthis.fnLogin();\r\n\r\n  }\r\n}","export class cache_budget{\r\n    HEADER = {};\r\n    REGULAR = [];\r\n    SEMI_REGULAR = [];\r\n    STAFF = [];\r\n    GUEST=[];\r\n    USER={};\r\n    TOTAL=0;\r\n    STATUS = \"NONE\";\r\n    IS_COPYING=false;\r\n    _INPUT_AMT_REGULAR=0;\r\n    _INPUT_AMT_SEMI_REGULAR=0;\r\n    _INPUT_AMT_STAFF=0;\r\n    _INPUT_AMT_GUEST=0;\r\n    _INPUT_AMT_TOTAL=0;\r\n    IS_COPYING = false;\r\n    _LOADING_BUDGET = 0;\r\n   \r\n    CALLER={ACTION:null,ACTION_CALLER:null,VALUE1:null,VALUE2:null,VALUE3:null,VALUE4:null};\r\n    OBSERVERS = {\r\n        pass_group: [], \r\n        pass_indiv: [], \r\n        enable_approved: [], \r\n        copy_template_guest:[],\r\n        copy_template:[],\r\n        budget_refresh:[], //0\r\n        reset_all:[],\r\n        refreshPersonnelTab:[], //1\r\n        reset_summary:[],//0\r\n        budget_loaded: [],\r\n        disable_search_personnel: [],\r\n        pass_job: []\r\n    };\r\n}","import {bindable, inject} from 'aurelia-framework';\r\nimport {ObserverLocator} from 'aurelia-binding';\r\nimport {  cache_obj } from 'cache_obj';\r\n\r\n@inject(ObserverLocator,cache_obj)\r\nexport class gridpaging{\r\n\t\r\n\t@bindable to;\r\n\t@bindable pageindex;\r\n\t@bindable divby;\r\n\tshowing=false;\r\n\t_buttonTitle = 'Search';\r\n\t_isDisableElement=true;\r\n\t_Pages = [[]];\r\n\t_PagesShow = [];\r\n\t_currentIndex=0;\r\n\t_cache_obj;\r\n\tconstructor(observerLocator,cache_obj){\r\n\t\tthis._cache_obj=cache_obj;\r\n\r\n\t\t var subscription = observerLocator\r\n      .getObserver(this, 'to')\r\n      .subscribe(()=>{ this.onChange(); });\r\n\r\n      \tthis._cache_obj.OBSERVERS.enable_modal_button.push((id, val) => {\r\n\t\t\tthis.enableButton(id,val);\r\n\t\t});\r\n\r\n\t}\r\n\r\n  onChange() \r\n  {\r\n\t\ttry \r\n\t\t{\r\n\t\t\tthis._Pages = [];\r\n\t\t\tthis._PagesShow = [];\r\n\t\t\tif (this.to != undefined && this.to != null) {\r\n\t\t\t\t\r\n\t\t\t\tvar intByTmp = 0;\r\n\t\t\t\tvar intDivTmp = 0;\r\n\t\t\t\tthis._Pages.push([]);\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i <= Math.ceil(this.to / this.divby) - 1; ++i) {\r\n\r\n\t\t\t\t\tif (intDivTmp >= 10) {\r\n\r\n\t\t\t\t\t\tthis._Pages.push([]);\r\n\t\t\t\t\t\t++intByTmp;\r\n\t\t\t\t\t\tintDivTmp = 1;\r\n\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t\t++intDivTmp;\r\n\r\n\t\t\t\t\tthis._Pages[intByTmp].push(i + 1);\r\n\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis._PagesShow=this._Pages[0];\r\n\t\t\t\tthis._currentIndex=0;\r\n\t\t\t\tthis.pageindex=0;\r\n\t\t\t\t// console.log(this._Pages.length);\r\n\t\t\t\t// console.log(this.to);\r\n\t\t\t}\r\n\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n  }\r\n\r\n\tendClick(endValue) {\r\n\r\n\t\tif (endValue == 0 && this._currentIndex > 0) {\r\n\t\t\t--this._currentIndex;\r\n\t\t} else if (endValue == 1 && this._currentIndex < this._Pages.length-1) {\r\n\t\t\t++this._currentIndex;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._PagesShow = this._Pages[this._currentIndex];\r\n\r\n\r\n\t\tthis.pageindex = this._Pages[this._currentIndex][0] - 1\r\n\r\n\t}\r\n  selectedClick(endValue){\r\n  \tthis.pageindex=this._Pages[this._currentIndex][endValue]-1;\r\n  }\r\n  \r\n\r\n\t//@handle('init.modal')\r\n    InitializeModal() {\r\n\r\n   //  \t\tthis._buttonTitle = this.to.buttonTitle;\r\n\t\t\t// this._setTitle = this.to.title;\r\n\t\t\t// this._id = this.to.id;\r\n    }\r\n\r\n\r\n\t//@handle('enable.modal.button')\r\n\tenableButton(id ,isEnabled){\r\n\t\tif(this._id==id)\r\n\t\tthis._isDisableElement=!isEnabled;\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\n\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class company_info\r\n{\r\n\tobj_personnel=null;\t\r\n\tconstructor(obj_personnel, toastr, DialogService)\r\n\t{\r\n\t\tthis.obj_personnel=obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\t}\r\n\r\n\tclickTab_Company(tab_num){\r\n\t\tif(this.obj_personnel.global_indiv_id.length==0)\r\n\t\t\treturn;\r\n\t\tswitch(tab_num){\r\n\t\t\tcase 0: this.obj_personnel.OBSERVERS.company_main_clicked.forEach((delegate)=>{\r\n\t\t\t\t\t\tdelegate(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\nimport {getLookups} from '../../masterfiles';\r\nimport {formatDate} from \"../../helpers\";\r\n\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class company_info_main{\r\n\t\r\n\tobj_personnel = null;\r\n\t_disableLocations = true;\r\n\t_disableIDNo = false;\r\n\t_disableStatus=true;\r\n\t_disableTabsInput = true;\r\n\talreadyLoaded = false;\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num, global_id)=>{\r\n\t\t\tif(tab_num == 4){\r\n\t\t\t\tif(!this.alreadyLoaded){\r\n\t\t\t\t\tthis.alreadyLoaded=true;\r\n\t\t\t\t\t$(\"#_start_dt\").datepicker();\r\n\t\t\t\t\t$(\"#_end_dt\").datepicker();\r\n\t\t\t\t\t$(\"#kapamilya_dt\").datepicker();\r\n\t\t\t\t\t$(\"#membership_dt\").datepicker();\r\n\t\t\t\t\t$(\"#suspended_start_dt\").datepicker();\r\n\t\t\t\t\t$(\"#suspended_end_dt\").datepicker();\r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.info(\"\", \"Loading company info...\");\r\n\t\t\t\t\t// this.dd_companyChanged();\r\n\t\t\t\t\tthis.loadGlobalCompany(global_id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.company_main_clicked.push((global_id)=>{\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.info(\"\", \"Loading company info...\");\r\n\t\t\tthis.loadGlobalCompany(global_id);\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.push(()=>{\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC = {\r\n\t\t\t\tmodel:{},\r\n\t\t\t\tlist:[]\r\n\t\t\t}\r\n\t\t\tthis.alreadyLoaded = false;\r\n\t\t});\r\n\t}\r\n\r\n\tloadGlobalCompany(global_id){\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_COMPANY_MSTR\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id)\r\n\t\t\t\t\t.orderBy(\"COMPANY_ID\");\r\n\t\tEntityManager().executeQuery(query).then((success)=>{\r\n\t\t\tvar tmp=[];\r\n\t\t\t_.each(success.results, (r)=>{\r\n\t\t\t\tvar suspend = [];\r\n\t\t\t\tif(r.STATUS_CD == \"SUSPEND\"){\r\n\t\t\t\t\tsuspend = this.loadSuspend(global_id, r.COMPANY_ID);\r\n\t\t\t\t}\r\n\t\t\t\tvar accreditation = this.loadAccreditation(r.GLOBAL_COMPANY_ID);\r\n\t\t\t\ttmp.push({\r\n\t\t\t\t\tglobal_company_id: r.GLOBAL_COMPANY_ID,\r\n\t\t\t\t\tglobal_id: r.GLOBAL_ID,\r\n\t\t\t\t\tid_no: r.ID_NO, \r\n\t\t\t\t\tcompany_id: r.COMPANY_ID,\r\n\t\t\t\t\tstart_dt: r.START_DT,\r\n\t\t\t\t\tend_dt: r.END_DT,\r\n\t\t\t\t\tkapamilya_dt: r.KAPAMILYA_DT,\r\n\t\t\t\t\tmembership_dt: r.MEMBERSHIP_DT,\r\n\t\t\t\t\texclusive_fl: r.EXCLUSIVE_FL,\r\n\t\t\t\t\tstatus_cd: r.STATUS_CD,\r\n\t\t\t\t\tcessation_reason_cd: r.CESSATION_REASON_CD,\r\n\t\t\t\t\tremarks: r.REMARKS,\r\n\t\t\t\t\tdivision_id: r.DIVISION_ID,\r\n\t\t\t\t\tlocation_cd: r.LOCATION_CD,\r\n\t\t\t\t\tcategory_id: r.CATEGORY_ID,\r\n\t\t\t\t\tjob_id: r.JOB_ID,\r\n\t\t\t\t\tpayroll_grp_id: r.PAYROLL_GRP_ID,\r\n\t\t\t\t\tprofessional_type_cd: r.PROFESSIONAL_TYPE_CD,\r\n\t\t\t\t\taccreditation: accreditation,\r\n\t\t\t\t\tsuspend_id: suspend.suspend_id,\r\n\t\t\t\t\tsuspended_start_dt: suspend.length==0?\"\":suspend[0].start_dt,\r\n\t\t\t\t\tsuspended_end_dt: suspend.length==0?\"\":suspend[0].end_dt\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.list = tmp;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Company info has been loaded...\");\r\n\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed, \"error in fetching company specific data.\");\r\n\t\t});\r\n\r\n\t\tif(this.obj_personnel.COMPANY.length>0){\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.company_id = this.obj_personnel.COMPANY[0].id;\r\n\t\t\tthis.dd_companyChanged();\r\n\t\t}\r\n\t}\r\n\r\n\tloadAccreditation(global_company_id){\r\n\t\tvar query = EntityQuery().from(\"ACCREDITATION_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_COMPANY_ID\", \"==\", global_company_id);\r\n\t\tvar accreditation = [];\r\n\t\tEntityManager().executeQuery(query).then((success)=>{\r\n\t\t\t_.each(success.results, (r)=>{\t\t\t\t\r\n\t\t\t\taccreditation.push({\r\n\t\t\t\t\taccreditation_id: r.ACCREDITATION_ID,\r\n\t\t\t\t\tglobal_company_id: r.GLOBAL_COMPANY_ID,\r\n\t\t\t\t\teff_start_dt: r.EFF_START_DT,\r\n\t\t\t\t\teff_end_dt: r.EFF_END_DT,\r\n\t\t\t\t\tdivision_id: r.DIVISION_ID,\t\t\t\t\t\r\n\t\t\t\t\tcategory_id: r.CATEGORY_ID,\r\n\t\t\t\t\tjob_grp_id: r.JOB_GRP_ID,\r\n\t\t\t\t\tjob_id: r.JOB_ID,\r\n\t\t\t\t\tcompetency: r.COMPETENCY,\r\n\t\t\t\t\thome_fl: r.HOME_FL,\r\n\t\t\t\t\tentry_fl: r.ENTRY_FL,\r\n\t\t\t\t\taccreditation_memo: r.ACCREDITATION_MEMO\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}, (failed)=>{\r\n\t\t\ttoastr.error(failed, \"Error in fetching company specific data.\");\r\n\t\t});\r\n\t\treturn accreditation;\r\n\t}\r\n\r\n\tloadSuspend(global_id, company_id){\r\n\t\tvar pred1 = breeze.Predicate.create('GLOBAL_ID', '==', global_id);\r\n\t\tvar pred2 = breeze.Predicate.create('SUSPEND_LEVEL', '==', 2);\r\n\t\tvar finalPred = breeze.Predicate.and([pred1, pred2]);\r\n\t\tvar query = EntityQuery().from(\"SUSPEND_TRX\")\r\n\t\t\t\t\t.where(finalPred).orderByDesc(\"SUSPEND_ID\").take(1);\r\n\t\tvar suspend = [];\r\n\t\tEntityManager().executeQuery(query).then((success)=>{\r\n\t\t\t\r\n\t\t\tif(success.results.length>0){\r\n\t\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\t\tsuspend.push({\r\n\t\t\t\t\t\tsuspend_id: result.SUSPEND_ID,\r\n\t\t\t\t\t\tstart_dt: result.START_DT,\r\n\t\t\t\t\t\tend_dt: result.END_DT,\r\n\t\t\t\t\t\tcompany_id: result.COMPANY_ID\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}, (error)=>{\r\n\t\t\ttoastr.error(error, \"Error in fetching company specific data.\");\r\n\t\t});\r\n\t\treturn suspend;\r\n\t}\r\n\r\n\r\n\r\n\tloadJobDropdown(){\r\n\t\tthis.obj_personnel.JOB=[];\r\n\t\t_.each(this.obj_personnel.JOB_CATEGORY, (jc)=>{\r\n\t\t\tgetLookups().JOB_MSTR.forEach((j)=>{\r\n\t\t\t\tif(j.JOB_GRP_ID == jc.id){\r\n\t\t\t\t\tthis.obj_personnel.JOB.push({\r\n\t\t\t\t\t\t//id: j.JOB_ID,\r\n\t\t\t\t\t\tvalue: j.JOB_ID,\r\n\t\t\t\t\t\ttext: j.JOB_DESC\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\tthis.obj_personnel.JOB.sort(this.OrderByText);\t\t\r\n\t}\r\n\r\n\tdd_companyChanged(){\r\n\r\n\t\tvar company_id = this.obj_personnel.COMPANY_SPECIFIC.model.company_id;\r\n\r\n\t\tif(company_id == 2 || company_id == 3 || company_id == 4  || company_id==7 || company_id == 8){\r\n\t\t\tthis._disableIDNo = false;\r\n\t\t}else{\r\n\t\t\tthis._disableIDNo = true;\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.id_no = \"000000\";\r\n\t\t}\r\n\r\n\t\tvar global_company = this.obj_personnel.COMPANY_SPECIFIC.list.find((gc)=>{\r\n\t\t\treturn gc.company_id == company_id;\r\n\t\t});\r\n\r\n\t\tif(getLookups() != null){\r\n\r\n\t\t\tthis.obj_personnel.DIVISION=[];\r\n\t\t\tthis.obj_personnel.CATEGORY=[];\r\n\t\t\tthis.obj_personnel.JOB_CATEGORY=[];\r\n\t\t\t// if(selectedCompany.id == 1){\r\n\t\t\t// \tthis.obj_personnel.JOB_CATEGORY.push({\r\n\t\t\t// \t\tid:0,\r\n\t\t\t// \t\tvalue: \"\",\r\n\t\t\t// \t\ttext: \"(OBSOLETE-NO-USE)\"\r\n\t\t\t// \t});\r\n\t\t\t// }\r\n\r\n\t\t\tgetLookups().DIVISION_MSTR.forEach((d)=>{\r\n\t\t\t\tif(d.COMPANY_ID == company_id){\r\n\t\t\t\t\tthis.obj_personnel.DIVISION.push({\r\n\t\t\t\t\t\tid: d.DIVISION_ID,\r\n\t\t\t\t\t\tlevel: d.DIVISION_LEVEL,\r\n\t\t\t\t\t\tvalue: d.DIVISION_CD,\r\n\t\t\t\t\t\ttext: d.DIVISION_NAME\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgetLookups().CATEGORY_MSTR.forEach((c)=>{\r\n\t\t\t\tif(c.COMPANY_ID == company_id){\r\n\t\t\t\t\tthis.obj_personnel.CATEGORY.push({\r\n\t\t\t\t\t\tid: c.CATEGORY_ID,\r\n\t\t\t\t\t\tvalue: c.CATEGORY_CD,\r\n\t\t\t\t\t\ttext: c.CATEGORY_DESC\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgetLookups().JOB_GRP_MSTR.forEach((j)=>{\r\n\t\t\t\tif(j.COMPANY_ID == company_id){\r\n\t\t\t\t\tthis.obj_personnel.JOB_CATEGORY.push({\r\n\t\t\t\t\t\tid: j.JOB_GRP_ID,\r\n\t\t\t\t\t\tvalue: j.JOB_GRP_CD,\r\n\t\t\t\t\t\ttext: j.JOB_GRP_DESC\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.JOB_CATEGORY.sort(this.OrderByText);\r\n\t\t\tthis.obj_personnel.CATEGORY.sort(this.OrderByText);\r\n\r\n\t\t\tif(global_company != null && global_company != undefined){\r\n\t\t\t\tthis._disableStatus = false;\r\n\t\t\t\tthis._disableTabsInput = false;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.global_company_id = global_company.global_company_id;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.id_no = global_company.id_no;\r\n\t\t\t\tvar startDt = formatDate(global_company.start_dt);\r\n\t\t\t\tif(startDt.length>0 && startDt != \"01/01/0001\"){\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.start_dt = startDt;\r\n\t\t\t\t\t$(\"#_start_dt\").datepicker(\"setValue\", new Date(startDt));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.start_dt = \"\";\r\n\t\t\t\t\t// $(\"#_start_dt\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t}\r\n\t\t\t\tvar endDt = formatDate(global_company.end_dt);\r\n\r\n\t\t\t\tif(endDt.length>0 && endDt != \"01/01/0001\"){\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.end_dt = endDt;\r\n\t\t\t\t\t$(\"#_end_dt\").datepicker(\"setValue\", new Date(endDt));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.end_dt=\"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar kapamilya_dt = formatDate(global_company.kapamilya_dt);\r\n\t\t\t\tif(kapamilya_dt.length >0 && kapamilya_dt != \"01/01/0001\"){\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.kapamilya_dt = kapamilya_dt;\r\n\t\t\t\t\t$(\"#kapamilya_dt\").datepicker(\"setValue\", new Date(kapamilya_dt));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.kapamilya_dt = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar membership_dt = formatDate(global_company.membership_dt);\r\n\t\t\t\tif(membership_dt.length >0 && membership_dt != \"01/01/0001\"){\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.membership_dt = membership_dt;\r\n\t\t\t\t\t$(\"#membership_dt\").datepicker(\"setValue\", new Date(membership_dt));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.membership_dt = \"\";\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.exclusive_fl = global_company.exclusive_fl;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.status_cd = global_company.status_cd;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.cessation_reason_cd = global_company.cessation_reason_cd;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.remarks = global_company.remarks;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.division_id = global_company.division_id+\"\";\r\n\t\t\t\t// this.obj_personnel.COMPANY_SPECIFIC.model.division_cd = this.obj_personnel.DIVISION[0].value;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.location_cd = global_company.location_cd;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.category_id= global_company.category_id+\"\";\t\t\t\t\t\r\n\t\t\t\t// this.obj_personnel.COMPANY_SPECIFIC.model.category_id = this.obj_personnel.CATEGORY[0].value;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.payroll_grp_id = global_company.payroll_grp_id+\"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.professional_type_cd = global_company.professional_type_cd;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt = formatDate(global_company.suspended_start_dt);\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt = formatDate(global_company.suspended_end_dt);\r\n\t\t\t\t$(\"#suspended_start_dt\").datepicker(\"setValue\", formatDate(global_company.suspended_start_dt));\r\n\t\t\t\t$(\"#suspended_end_dt\").datepicker(\"setValue\", formatDate(global_company.suspended_end_dt));\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.accreditation = global_company.accreditation;\r\n\t\t\t\tthis.loadJobDropdown();\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.job_id = global_company.job_id+\"\";\r\n\t\t\t}else{\r\n\t\t\t\tthis._disableStatus = true;\r\n\t\t\t\tthis._disableTabsInput = true;\r\n\t\t\t\t// this.obj_personnel.COMPANY_SPECIFIC.model = {};\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.global_company_id = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.status_cd=\"ACTV\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.start_dt = \"\";\t\t\t\t\t\t\t\t\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.end_dt= \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.kapamilya_dt = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.membership_dt = \"\";\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.division_id = this.obj_personnel.DIVISION[0].value;\r\n\t\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.category_id = this.obj_personnel.CATEGORY[0].value;\r\n\r\n\t\t\t\tthis.loadJobDropdown();\r\n\t\t\t}\r\n\t\t\tthis.dd_divisionChanged();\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\tdd_divisionChanged(){\r\n\t\tvar division_id  = this.obj_personnel.COMPANY_SPECIFIC.model.division_id;\r\n\t\tvar division = this.obj_personnel.DIVISION.find((d)=>{\r\n\t\t\treturn d.id == division_id;\r\n\t\t});\r\n\r\n\t\t// console.log(this.obj_personnel.COMPANY_SPECIFIC.model.division_cd);\r\n\t\tif((division != undefined && division != null) && division.text.indexOf(\"REGIONAL DIVISION\")  != -1){\r\n\t\t\tthis._disableLocations = false;\r\n\t\t}else{\r\n\t\t\tthis._disableLocations = true;\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.location_cd = \"--NONE--\";\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\tvar strValidation = \"\";\r\n\r\n\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.status_cd == \"SUSPEND\"){\r\n\r\n\t\t\tvar sus_start = null;\r\n\t\t\tvar sus_end = null;\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt = $(\"#suspended_start_dt\").val();\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt = $(\"#suspended_end_dt\").val();\r\n\t\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt != undefined && this.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt != null && this.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt.length>0){\r\n\t\t\t\tif(!moment(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid suspension start date.<br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsus_start = new Date(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_start_dt);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+= \"No start date of suspension specified.<br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt != undefined && this.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt != null && this.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt.length>0){\t\t\t\r\n\t\t\t\tif(!moment(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid suspension end date.<br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsus_end = new Date(this.obj_personnel.COMPANY_SPECIFIC.model.suspended_end_dt);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+= \"No end date of suspension specified.<br/>\";\t\r\n\t\t\t}\r\n\r\n\t\t\tif(sus_start != null && sus_end != null){\r\n\t\t\t\tif(sus_end < sus_start){\r\n\t\t\t\t\tstrValidation+= \"end date of suspension cannot be greater than the start date.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\t// console.log(this.obj_personnel.COMPANY_SPECIFIC.model.company_id);\r\n\t\t\t// console.log(this.obj_personnel.COMPANY_SPECIFIC.model.global_company_id);\r\n\t\t\tvar cid = this.obj_personnel.COMPANY_SPECIFIC.model.company_id;\r\n\t\t\tvar gcid = this.obj_personnel.COMPANY_SPECIFIC.model.global_company_id;\r\n\t\t\tif(gcid.length==0){\r\n\t\t\t\tthis.saveCompanySpecific(cid);\r\n\t\t\t}else{\r\n\t\t\t\tthis.updateCompanySpecific(gcid);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsaveCompanySpecific(company_id){\r\n\t\tvar generated_id = this.GenerateIDNo(company_id);\r\n\t\tconsole.log(generated_id);\r\n\t}\r\n\r\n\tupdateCompanySpecific(global_company_id){\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.start_dt = $(\"#_start_dt\").val();\r\n\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.end_dt = $(\"#_end_dt\").val();\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_COMPANY_MSTR\")\r\n\t\t\t\t\t.where(\"GLOBAL_COMPANY_ID\", \"==\", global_company_id);\r\n\t\tEntityManager().executeQuery(query).then((s)=>{\r\n\t\t\t// s.results[0].START_DT = \r\n\t\t},(e)=>{\r\n\t\t\ttoastr.error(\"\", e);\r\n\t\t});\r\n\t}\r\n\r\n\tdd_bankChanged(){\r\n\t\tvar bank_id = this.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.bank_id;\r\n\t\tif(bank_id != undefined && bank_id != null && bank_id.length>0){\r\n\t\t\tvar bank = this.obj_personnel.BANK.find((b)=>{\r\n\t\t\t\treturn b.id == bank_id;\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.bank_nm = bank.long_nm;\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.acct_name = this.obj_personnel.HEADER.last_name+\", \"+this.obj_personnel.HEADER.given_name+\" \"+this.obj_personnel.HEADER.middle_name;\r\n\t\t}else{\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.bank_nm = \"\";\r\n\t\t\tthis.obj_personnel.COMPANY_SPECIFIC.model.personnel_bank.acct_name = \"\";\r\n\t\t}\r\n\t}\r\n\r\n\tGenerateIDNo(company_id){\r\n\t\tvar LastID = \"000000\";\r\n\t\tvar currentYear = (new Date()).getFullYear().toString().substring(2,4);\r\n\t\tvar query = EntityQuery().from(\"COMPANY_SPECIFIC_INDEX\")\r\n\t\t\t\t\t.where(\"COMPANY_SPECIFIC_ID\", \"==\", company_id).take(1);\r\n\t\tEntityManager().executeQuery(query).then((s)=>{\r\n\t\t\tLastID = s.results[0].COMPANY_INDEX;\r\n\t\t\tvar lastYear = LastID.toString().substring(0,2);\r\n\t\t\tif(lastYear != currentYear){\r\n\t\t\t\tLastID = currentYear + \"0001\";\t\t\r\n\t\t\t}\r\n\t\t\treturn LastID;\r\n\t\t},(e)=>{\r\n\t\t\ttoastr.error(e, \"Error in generating ID.\");\r\n\t\t});\r\n\t}\r\n\r\n\tclearAccreditationField(){\r\n\t\t\r\n\t}\r\n\r\n\tOrderByText(a, b){\r\n\t\tif(a.text.toUpperCase() < b.text.toUpperCase())\r\n\t\t\treturn -1;\r\n\t\tif(a.text.toUpperCase() > b.text.toUpperCase())\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\n\r\n@inject(DialogService, obj_personnel, toastr)\r\nexport class e_a_s_t //Experience, awards, seminar, and training.\r\n{\r\n\tobj_personnel = null;\r\n\tconstructor(dialogService, obj_personnel, toastr){\r\n\t\tthis.dialogService = dialogService;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.obj_personnel.OBSERVERS.ppid_dialog.push((all)=>{\t\t\t\t\r\n\t\t\tthis.CloseSearch(all);\r\n\t\t});\r\n\t}\r\n\t\r\n\tCloseSearch(global_id)\r\n\t{\t\t\r\n\t\t//alert(\"awards:\"+global_id);\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\n\r\n@inject(DialogService, obj_personnel, toastr)\r\nexport class gov_info\r\n{\r\n\tobj_personnel = null;\r\n\t_activeTab=0;\r\n\tconstructor(dialogService, obj_personnel, toastr){\r\n\t\tthis.dialogService = dialogService;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\r\n\t}\t\r\n\r\n\tclickTab_GovInfo(tab_num){\r\n\t\tif(this.obj_personnel.global_indiv_id.length===0)\r\n\t\t\treturn;\r\n\t\tswitch(tab_num){\r\n\t\t\tcase 0: \r\n\t\t\t\t\tthis.obj_personnel.OBSERVERS.govinfo_main_clicked.forEach((delegate)=>{\r\n\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\ttoastr.info(\"\", \"Loading government info...\");\r\n\t\t\t\t\t\tdelegate(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class gov_info_main{\r\n\tobj_personnel = null;\r\n\talreadyLoaded = false;\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\r\n\t\t$(\"#affidavit_dt\").datepicker();\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num,global_id)=>{\r\n\t\t\tif(tab_num==3){\r\n\t\t\t\tif(!this.alreadyLoaded){\r\n\t\t\t\t\tthis.alreadyLoaded = true;\r\n\t\t\t\t\t$(\"#affidavit_dt\").datepicker();\r\n\t\t\t\t\t$(\"#expiry_dt\").datepicker();\r\n\t\t\t\t\t$(\"#vat_reg_dt\").datepicker();\r\n\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\ttoastr.info(\"\", \"Loading data...\");\r\n\t\t\t\t\tthis.load_TaxInformation(global_id);\r\n\t\t\t\t\tthis.load_TaxAffidavit(global_id);\r\n\t\t\t\t\tthis.load_Permit(global_id);\r\n\t\t\t\t\tthis.clearTaxAffidavitField();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.govinfo_main_clicked.push((global_id)=>{\r\n\t\t\tthis.load_TaxInformation(global_id);\r\n\t\t\tthis.load_TaxAffidavit(global_id);\r\n\t\t\tthis.load_Permit(global_id);\r\n\t\t\tthis.clearTaxAffidavitField();\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.push(()=>{\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO = {\t\t\t\t\r\n\t\t\t\tmodelTaxAffidavit:{},\r\n\t\t\t\tmodelPermit:{},\r\n\t\t\t\ttax_affidavit:[],\r\n\t\t\t\tpermits:[]\r\n\t\t\t};\r\n\t\t\tthis.alreadyLoaded=false;\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tformatDate(strDate){\r\n\t\tif(strDate == null || strDate.length == 0)\r\n\t\t\treturn \"\";\r\n\t\tvar dt = new Date(strDate);\r\n\t\tvar month = dt.getMonth()+1;\r\n\t\tvar day = dt.getDate();\r\n\t\tvar year = dt.getFullYear();\r\n\t\treturn ('0'+month).slice(-2)+'/'+('0'+day).slice(-2)+'/'+(\"000\"+year).slice(-4);\r\n\t}\r\n\r\n\tvalidate_input(input, type){\r\n\t\tswitch(type){\r\n\t\t\tcase \"PAGIBIG\": \r\n\t\t\t\t\tvar pagibig = /^(?:\\d{4}-\\d{4}-\\d{4})$/;\r\n\t\t\t\t\treturn pagibig.test(input);\r\n\t\t\tcase \"SSS\":\r\n\t\t\t\t\tvar sss = /^(?:\\d{2}-\\d{7}-\\d{1})$/;\r\n\t\t\t\t\treturn sss.test(input);\r\n\t\t\tcase \"PHILHEALTH\":\r\n\t\t\t\t\tvar philhealth = /^(?:\\d{2}-\\d{9}-\\d{1})$/;\r\n\t\t\t\t\treturn philhealth.test(input);\r\n\t\t\tdefault: return false;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tload_TaxInformation(global_id){\t\t\r\n\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_INDIV_MSTR\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.tax_exempt_cd = querySuccess.results[0].TAX_EXEMPT_CD;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.sss_no = querySuccess.results[0].SSS_NO;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.pagibig_no = querySuccess.results[0].PAGIBIG_NO;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.philhealth_no = querySuccess.results[0].PHILHEALTH_NO;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.national_id = querySuccess.results[0].NATIONAL_ID;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.voters_id = querySuccess.results[0].VOTERS_ID;\r\n\t\t\ttoastr.clear();\r\n\r\n\t\t}, (errorQuery)=>{\r\n\t\t\ttoastr.error(errorQuery, \"Error in loading Government information.\");\r\n\t\t});\r\n\r\n\t\tquery = EntityQuery().from(\"GLOBAL_MSTR\")\r\n\t\t\t\t.where(\"GLOBAL_ID\",\"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.input_tax_cd = querySuccess.results[0].INPUT_TAX_CD;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.tin = querySuccess.results[0].TIN;\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.vat_reg_dt = this.formatDate(querySuccess.results[0].VAT_REG_DT);\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.vat_stat_cd = querySuccess.results[0].VAT_STAT_CD;\r\n\t\t\ttoastr.success(\"\",\"Tax Information has been loaded.\");\r\n\t\t}, (errorQuery)=>{\r\n\t\t\ttoastr.error(errorQuery, \"Error in loading Government information.\");\r\n\t\t});\r\n\t}\r\n\r\n\tload_TaxAffidavit(global_id){\r\n\t\tvar query = EntityQuery().from(\"TAX_AFFIDAVIT_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.tax_affidavit=[];\r\n\t\t\tvar tmpList = [];\r\n\t\t\t_.each(querySuccess.results, (result)=>{\r\n\t\t\t\ttmpList.push({\r\n\t\t\t\t\ttax_affidavit_id: result.TAX_AFFIDAVIT_ID,\r\n\t\t\t\t\taffidavit_no: result.AFFIDAVIT_NO,\r\n\t\t\t\t\taffidavit_dt: this.formatDate(result.AFFIDAVIT_DT)\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.tax_affidavit = tmpList;\t\t\t\r\n\t\t}, (errorQuery)=>{\r\n\t\t\ttoastr.error(errorQuery, \"Error in loading tax affidavit\");\r\n\t\t});\r\n\t}\r\n\r\n\tload_Permit(global_id){\r\n\t\tvar query = EntityQuery().from(\"PERMIT_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\r\n\t\tEntityManager().executeQuery(query).then((successQuery)=>{\r\n\t\t\tvar tmpList=[];\r\n\t\t\t_.each(successQuery.results, (result)=>{\r\n\t\t\t\tvar place = this.obj_personnel.LOCATIONS.find((x)=>{\r\n\t\t\t\t\treturn x.LOCATION_CD == result.PLACE_OF_ISSUE;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar permit = this.obj_personnel.PERMIT.find((x)=>{\r\n\t\t\t\t\treturn x.value == result.PERMIT_CD;\r\n\t\t\t\t});\r\n\r\n\t\t\t\ttmpList.push({\r\n\t\t\t\t\tglobal_id: result.GLOBAL_ID,\r\n\t\t\t\t\tpermit_no: result.PERMIT_NO,\r\n\t\t\t\t\texpiry_dt: this.formatDate(result.EXPIRY_DT),\r\n\t\t\t\t\tpermit_cd: result.PERMIT_CD,\r\n\t\t\t\t\tagency_cd: result.AGENCY_CD,\r\n\t\t\t\t\tpermit_id: result.PERMIT_ID,\r\n\t\t\t\t\tgrant_dt: result.GRANT_DT,\r\n\t\t\t\t\tplace_of_issue: result.PLACE_OF_ISSUE,\r\n\t\t\t\t\tpoi: place.LOCATION_DESC,\r\n\t\t\t\t\tpermit_name: permit.text\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.permits = tmpList;\r\n\t\t}, (errorQuery)=>{\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tclearTaxAffidavitField(){\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no = \"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt = \"\";\r\n\t\t//$(\"#affidavit_dt\").val(\"\");\r\n\t}\r\n\r\n\tbtnAdd_TaxAffidavit(){\r\n\t\tvar strValidation=\"\";\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no == undefined || this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no == null || this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no.length==0){\r\n\t\t\tstrValidation += \"Affidavit no is required.<br/>\";\r\n\t\t}\r\n\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt = $(\"#affidavit_dt\").val();\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt == undefined || this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt == null || this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt.length==0){\r\n\t\t\tstrValidation += \"Affidavit date is required.<br/>\";\r\n\t\t}else{\r\n\t\t\tif(!moment(this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt).isValid()){\r\n\t\t\t\tstrValidation += \"Invalid affidavit dt.<br/>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tthis.insertTaxAffidavit();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tbtnRemove_TaxAffidavit(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the tax affidavit?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\t//alert(\"Confirmed delete.\");\r\n  \t\t\t\t\tvar query = EntityQuery().from('TAX_AFFIDAVIT_TRX').where('TAX_AFFIDAVIT_ID', '==', item.tax_affidavit_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The tax affidavit was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.load_TaxAffidavit(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing tax affidavit.\");\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tinsertTaxAffidavit(){\r\n\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"TAX_AFFIDAVIT_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"TAX_AFFIDAVIT_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tvar Max = 1;\r\n\t\t\tif(querySuccess.results.length>0){\r\n\t\t\t\tMax = querySuccess.results[0].TAX_AFFIDAVIT_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar tax_affidavit = {\r\n\t\t\t\tGLOBAL_ID: this.obj_personnel.global_indiv_id,\r\n\t\t\t\tAFFIDAVIT_NO: this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_no,\r\n\t\t\t\tTAX_AFFIDAVIT_ID: Max,\r\n\t\t\t\tAFFIDAVIT_DT: this.obj_personnel.GOVERNMENT_INFO.modelTaxAffidavit.affidavit_dt,\r\n\t\t\t\tRELEASE_DT: dateToday,\r\n\t\t\t\tRETURN_DT: dateToday,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t}\r\n\t\t\tvar entity = EntityManager().createEntity(\"TAX_AFFIDAVIT_TRX\", tax_affidavit);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(saveSuccess, \"Record saved.\");\r\n\t\t\t\tthis.load_TaxAffidavit(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearTaxAffidavitField();\r\n\t\t\t}, (errorSave)=>{\r\n\t\t\t\ttoastr.error(errorQuery, \"Error in loading Tax affidavit.\");\r\n\t\t\t});\r\n\r\n\r\n\t\t}, (errorQuery)=>{\r\n\t\t\ttoastr.error(errorQuery, \"Error in loading Tax affidavit.\");\r\n\t\t});\r\n\t}\r\n\r\n\tclearPermitField(){\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd=\"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no=\"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt=\"\";\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue=\"\";\r\n\t}\r\n\r\n\tbtnAdd_Permit(){\r\n\t\tvar strValidation=\"\";\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd == undefined || this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd == null || this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd.length==0){\r\n\t\t\tstrValidation+=\"No Permit type specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no == undefined || this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no == null || this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no.length==0){\r\n\t\t\tstrValidation+=\"No Permit number specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt = $(\"#expiry_dt\").val();\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt == undefined || this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt == null || this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt.length==0){\r\n\t\t\tstrValidation+=\"No expiry date specified.<br/>\";\r\n\t\t}else{\r\n\t\t\tif(!moment(this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt).isValid()){\r\n\t\t\t\tstrValidation+=\"Invalid expiry date.<br/>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue == undefined || this.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue == null || this.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue.length==0){\r\n\t\t\tstrValidation+=\"No place of issuance specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tthis.insertPermit();\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tbtnUpdate_Permit(item){\r\n\r\n\t}\r\n\r\n\tbtnRemove_Permit(item){\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the permit?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\t//alert(\"Confirmed delete.\");\r\n  \t\t\t\t\tvar query = EntityQuery().from('PERMIT_TRX').where('PERMIT_ID', '==', item.permit_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The permit was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.load_Permit(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing permit.\");\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n\r\n\tinsertPermit(){\r\n\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"PERMIT_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"PERMIT_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tvar Max = 1;\r\n\t\t\tif(querySuccess.results.length>0){\r\n\t\t\t\tMax = querySuccess.results[0].PERMIT_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar permit = {\r\n\t\t\t\tGLOBAL_ID: this.obj_personnel.global_indiv_id,\r\n\t\t\t\tPERMIT_NO: this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_no,\r\n\t\t\t\tEXPIRY_DT: this.obj_personnel.GOVERNMENT_INFO.modelPermit.expiry_dt,\r\n\t\t\t\tPERMIT_CD: this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd,\r\n\t\t\t\t AGENCY_CD: this.obj_personnel.GOVERNMENT_INFO.modelPermit.permit_cd,\r\n\t\t\t\tPERMIT_ID: Max,\r\n\t\t\t\tPLACE_OF_ISSUE: this.obj_personnel.GOVERNMENT_INFO.modelPermit.place_of_issue,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"PERMIT_TRX\", permit);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.load_Permit(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearPermitField();\r\n\t\t\t}, (errorSave)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", errorSave);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t\r\n\tvalidate(){\r\n\r\n\t\tvar strValidation=\"\";\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.pagibig_no.length>0){\r\n\t\t\tif(!this.validate_input(this.obj_personnel.GOVERNMENT_INFO.pagibig_no, \"PAGIBIG\") && this.obj_personnel.GOVERNMENT_INFO.pagibig_no.length>=0){\r\n\t\t\t\tstrValidation+=\"Invalid Pag-ibig No.<br/>\";\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.pagibig_no = \"0000-0000-0000\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.sss_no.length>0){\r\n\t\t\tif(!this.validate_input(this.obj_personnel.GOVERNMENT_INFO.sss_no, \"SSS\")){\r\n\t\t\t\tstrValidation+=\"Invalid SSS No.<br/>\";\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.sss_no = \"00-0000000-0\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.GOVERNMENT_INFO.philhealth_no.length>0){\r\n\t\t\tif(!this.validate_input(this.obj_personnel.GOVERNMENT_INFO.philhealth_no, \"PHILHEALTH\")){\r\n\t\t\t\tstrValidation+=\"Invalid Philhealth No.<br/>\";\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.obj_personnel.GOVERNMENT_INFO.philhealth_no = \"00-000000000-0\";\r\n\t\t}\r\n\r\n\t\tthis.obj_personnel.GOVERNMENT_INFO.vat_reg_dt = $(\"#vat_reg_dt\").val();\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\t\t\t\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tthis.update();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tupdate(){\r\n\t\tvar query = EntityQuery().from(\"GLOBAL_INDIV_MSTR\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", this.obj_personnel.global_indiv_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess1)=>{\r\n\t\t\tquerySuccess1.results[0].TAX_EXEMPT_CD = this.obj_personnel.GOVERNMENT_INFO.tax_exempt_cd;\r\n\t\t\tquerySuccess1.results[0].SSS_NO = this.obj_personnel.GOVERNMENT_INFO.sss_no;\r\n\t\t\tquerySuccess1.results[0].PAGIBIG_NO = this.obj_personnel.GOVERNMENT_INFO.pagibig_no;\r\n\t\t\tquerySuccess1.results[0].PHILHEALTH_NO = this.obj_personnel.GOVERNMENT_INFO.philhealth_no;\r\n\t\t\tquerySuccess1.results[0].NATIONAL_ID = this.obj_personnel.GOVERNMENT_INFO.national_id;\r\n\t\t\tquerySuccess1.results[0].VOTERS_ID = this.obj_personnel.GOVERNMENT_INFO.voters_id;\r\n\t\t\tEntityManager().saveChanges().then((save1)=>{\r\n\t\t\t\t\r\n\t\t\t\tquery=EntityQuery().from(\"GLOBAL_MSTR\")\r\n\t\t\t\t\t  .where(\"GLOBAL_ID\", \"==\", this.obj_personnel.global_indiv_id);\r\n\t\t\t\tEntityManager().executeQuery(query).then((querySuccess2)=>{\r\n\t\t\t\t\tquerySuccess2.results[0].INPUT_TAX_CD = this.obj_personnel.GOVERNMENT_INFO.input_tax_cd;\r\n\t\t\t\t\tquerySuccess2.results[0].VAT_REG_DT = this.obj_personnel.GOVERNMENT_INFO.vat_reg_dt;\r\n\t\t\t\t\tquerySuccess2.results[0].VAT_STAT_CD = this.obj_personnel.GOVERNMENT_INFO.vat_stat_cd;\r\n\r\n\t\t\t\t\tEntityManager().saveChanges().then((save2)=>{\r\n\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\t\t}, (error2)=>{\r\n\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\ttoastr.error(\"\", error2);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t}, (error1)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", error1);\r\n\t\t\t});\r\n\t\t}, (queryError1)=>{\r\n\r\n\t\t});\r\n\t}\r\n\r\n\t//source: https://stackoverflow.com/questions/12578507/how-to-implement-an-input-with-a-mask\r\n\tisDigit(event){\r\n\t\tif ((event.charCode >= 48 && event.charCode <= 57) || event.keyCode == 9 || event.keyCode == 10 || event.keyCode == 13 || event.keyCode == 8 || event.keyCode == 116 || event.keyCode == 46 || (event.keyCode <= 40 && event.keyCode >= 37)) {\r\n    \t\treturn true;\r\n  \t\t} else {\r\n    \t\treturn false;\r\n  \t\t}  \t\t\r\n\t}\r\n\r\n\t//source: https://stackoverflow.com/questions/12578507/how-to-implement-an-input-with-a-mask\r\n\tinput_mask(id, mask){\r\n\t\tvar myMask = mask;\r\n  \t\tvar myCaja = document.getElementById(id);\r\n  \t\tvar myText = \"\";\r\n  \t\tvar myNumbers = [];\r\n  \t\tvar myOutPut = \"\"\r\n  \t\tvar theLastPos = 1;\r\n  \t\tmyText = myCaja.value;\r\n  \t\t//get numbers\r\n  \t\tfor (var i = 0; i < myText.length; i++) {\r\n    \t\tif (!isNaN(myText.charAt(i)) && myText.charAt(i) != \" \") {\r\n      \t\t\tmyNumbers.push(myText.charAt(i));\r\n    \t\t}\r\n  \t\t}\r\n  //write over mask\r\n  \t\tfor (var j = 0; j < myMask.length; j++) {\r\n    \t\tif (myMask.charAt(j) == \"_\") { //replace \"_\" by a number \r\n      \t\t\tif (myNumbers.length == 0)\r\n        \t\t\tmyOutPut = myOutPut + myMask.charAt(j);\r\n      \t\t\telse {\r\n        \t\t\tmyOutPut = myOutPut + myNumbers.shift();\r\n        \t\t\ttheLastPos = j + 1; //set caret position\r\n      \t\t\t}\r\n    \t\t} else {\r\n      \t\t\tmyOutPut = myOutPut + myMask.charAt(j);\r\n    \t\t}\r\n  \t\t}\r\n\r\n  \t\tdocument.getElementById(id).value = myOutPut;\r\n  \t\tdocument.getElementById(id).setSelectionRange(theLastPos, theLastPos);\r\n\t}\r\n\r\n\r\n\r\n}","//import {checkCookie,setCookie,removeCookie} from '.././helpers';\r\nimport toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {ppid_search} from \"../modals/ppid_search\";\r\nimport moment from 'moment';\r\nimport {formatDate} from \"../../helpers\";\r\nimport {fnSerializeCode} from \"../../helpers\";\r\nimport { cache_obj } from '../../cache_obj';\r\n// import {input_mask} from \"../../helpers\";\r\n// import {isDigit} from \"../../helpers\";\r\n\r\n@inject(DialogService, obj_personnel, toastr, cache_obj)\r\nexport class main\r\n{\r\n\t\r\n\r\n\t_disableSearchPersonnel = false;\r\n\t_disableCreatePersonnel = false;\t\r\n\t_disableSavePersonnel = true;\r\n\t_disableClearData = true;\r\n\t_disableResetData = true;\r\n\t_disableForm = true;\r\n\t_isActiveTab=true;\r\n\r\n\tgender=[\"Male\", \"Female\"];\r\n\tselectedGender=\"\";\r\n\tselected_citizenship=\"\";\r\n\tselected_group=\"\";\t\r\n\tobj_personnel=null;\r\n\tcache_obj=null;\r\n\tprimary_img=\"/styles/images/abslogo_BIG.png\";\r\n\tconstructor(dialogService, obj_personnel, toastr, cache_obj)\r\n\t{\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.dialogService = dialogService;\r\n\t\tthis.cache_obj = cache_obj;\r\n\t\tthis.obj_personnel.USER = this.cache_obj.USER;\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num, global_id)=>{\r\n\t\t\t// this.loadData(global_id);\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.ppid_dialog.push((val)=>{\t\t\t\r\n\t\t\tthis.loadData(val);\r\n\t\t});\r\n\r\n\t\t// this.obj_personnel.OBSERVERS.clear_ppid.push(()=>{\r\n\t\t// \tthis.clearData();\r\n\t\t// });\r\n\r\n\t\t// this.LoginPassed(this.obj_personnel.USER);\r\n        //this.obj_personnel.OBSERVERS.ppid_dialog.length;\r\n    }\r\n\r\n\t//https://stackoverflow.com/questions/4060004/calculate-age-in-javascript\r\n\tgetAge(dateString) {\r\n\t\tif(dateString == null || dateString.length==0)\r\n\t\t\treturn;\r\n\t\tvar today = new Date();\r\n\t\tvar birthDate = new Date(dateString);\r\n\t\tvar age = today.getFullYear() - birthDate.getFullYear();\r\n\t\tvar m = today.getMonth() - birthDate.getMonth();\r\n\t\tif (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\r\n\t\t\tage--;\r\n\t\t}\r\n\t\treturn age;\r\n\t}\r\n\r\n\r\n\tloadData(global_id)\r\n\t{\r\n\r\n\t\t//toastr.success('Retrieving data...', 'Loading...');\r\n\t\tthis.obj_personnel.global_indiv_id=global_id;\r\n\t\tvar _query = EntityQuery().from('GLOBAL_INDIV_MSTR')\r\n\t\t\t\t\t.where('GLOBAL_INDIV_ID', '==', global_id);\r\n\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\tthis.obj_personnel.HEADER.global_indiv_id = result.GLOBAL_INDIV_ID;\r\n\t\t\t\tthis.obj_personnel.HEADER.given_name = result.GIVEN_NAME;\r\n\t\t\t\tthis.obj_personnel.HEADER.last_name = result.LAST_NAME;\r\n\t\t\t\tthis.obj_personnel.HEADER.middle_name = result.MIDDLE_NAME;\r\n\t\t\t\tthis.obj_personnel.HEADER.religion_cd = result.RELIGION_CD;\r\n\t\t\t\tvar birthdt = formatDate(result.BIRTH_DT)\r\n\t\t\t\tif(birthdt.length==0){\r\n\t\t\t\t\t// $(\"#birthDate\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$(\"#birthDate\").datepicker(\"setValue\", new Date(birthdt));\r\n\t\t\t\t}\r\n\t\t\t\tthis.obj_personnel.HEADER.birth_dt = birthdt;\r\n\t\t\t\tthis.obj_personnel.HEADER.age = this.getAge(result.BIRTH_DT);\r\n\t\t\t\tthis.obj_personnel.HEADER.civil_status = result.CIVIL_STATUS;\r\n\t\t\t\tthis.obj_personnel.HEADER.mother_maiden_name = result.MOTHER_MAIDEN_NAME;\r\n\t\t\t\tthis.obj_personnel.HEADER.alias = result.ALIAS;\r\n\t\t\t\tthis.obj_personnel.HEADER.birth_place = result.BIRTH_PLACE;\r\n\t\t\t\tthis.obj_personnel.HEADER.gender = result.GENDER;\t\t\t\t\r\n\t\t\t\tswitch(result.GENDER)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase \"M\": \tthis.selectedGender=\"Male\";\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"F\": \tthis.selectedGender=\"Female\";\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tthis.obj_personnel.HEADER.acr_no = result.ACR_NO;\r\n\t\t\t});\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Success\");\r\n\t\t},(failed)=>{\r\n\t\t\ttoastr.error(failed,\"Error in retrieving data[1].\");\r\n\t\t});\r\n\r\n\t\t_query = EntityQuery().from('GLOBAL_MSTR')\r\n\t\t\t\t.where('GLOBAL_ID','==', global_id);\r\n\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\t\t\t\t\t\r\n\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\tthis.obj_personnel.HEADER.tin = result.TIN;\r\n\t\t\t\tthis.obj_personnel.HEADER.country_cd = result.COUNTRY_CD;\r\n\t\t\t\tthis.obj_personnel.HEADER.country_base_cd = result.COUNTRY_BASE_CD;\r\n\t\t\t\tthis.obj_personnel.HEADER.location_base_cd = result.LOCATION_BASE_CD;\r\n\t\t\t\tthis.obj_personnel.HEADER.status_cd = result.STATUS_CD;\r\n\t\t\t\tthis.obj_personnel.HEADER.created_by = result.CREATED_BY;\r\n\t\t\t\tthis.obj_personnel.HEADER.last_updated_by = result.LAST_UPDATED_BY;\r\n\r\n\t\t\t\tif(this.obj_personnel.HEADER.status_cd == \"SUSPEND\"){\r\n\t\t\t\t\tvar _pred1 = breeze.Predicate.create(\"GLOBAL_ID\",\"==\", global_id);\r\n\t\t\t\t\tvar _pred2 = breeze.Predicate.create(\"SUSPEND_LEVEL\", \"==\", 1);\r\n\t\t\t\t\tvar _finalPred = breeze.Predicate.and([_pred1, _pred2]);\r\n\t\t\t\t\t_query = EntityQuery().from('SUSPEND_TRX')\r\n\t\t\t\t\t\t\t.where(_finalPred)\r\n\t\t\t\t\t\t\t.orderByDesc(\"SUSPEND_ID\")\r\n\t\t\t\t\t\t\t.take(1);\r\n\t\t\t\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\t\t\t\tif(success.results.length>0){\r\n\t\t\t\t\t\t\tthis.obj_personnel.HEADER.suspend_id = success.results[0].SUSPEND_ID;\r\n\t\t\t\t\t\t\t// this.obj_personnel.HEADER.suspension_start = success.results[0].START_DT;\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar start_dt = formatDate(success.results[0].START_DT)\r\n\t\t\t\t\t\t\tthis.obj_personnel.HEADER.suspension_start = start_dt;\r\n\t\t\t\t\t\t\t$(\"#suspensionFrom\").datepicker(\"setValue\", new Date(start_dt));\r\n\r\n\t\t\t\t\t\t\tvar end_dt = formatDate(success.results[0].END_DT);\r\n\t\t\t\t\t\t\tthis.obj_personnel.HEADER.suspension_end = end_dt;\r\n\t\t\t\t\t\t\t$(\"#suspensionTo\").datepicker(\"setValue\", new Date(end_dt));\r\n\t\t\t\t\t\t\t// this.obj_personnel.HEADER.suspension_end = success.results[0].END_DT;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, (error)=>{\r\n\t\t\t\t\t\ttoastr.error(\"\", error);\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.HEADER.suspension_start = \"\";\r\n\t\t\t\t\tthis.obj_personnel.HEADER.suspension_end=\"\";\r\n\t\t\t\t\t$(\"#suspensionFrom\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t\t$(\"#suspensionTo\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t},(failed)=>{\r\n\t\t\t\ttoastr.error(failed,\"Error in retrieving data[2].\");\r\n\t\t\t});\r\n\r\n\r\n\r\n\t\t_query = EntityQuery().from('CITIZENSHIP_TRX')\r\n\t\t\t\t.where('GLOBAL_INDIV_ID','==', global_id)\r\n\t\t\t\t.orderBy('CITIZENSHIP_CD');\r\n\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmpArr=[];\r\n\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\tvar tmp=this.obj_personnel.CITIZENSHIP.find((x)=>{\r\n\t\t\t\t\tif(x.value === result.CITIZENSHIP_CD){\r\n\t\t\t\t\t\treturn x;\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(tmp != null)\r\n\t\t\t\t{\r\n\t\t\t\t\ttmpArr.push(tmp);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.HEADER.citizenship = tmpArr;\r\n\t\t},(failed)=>{\r\n\t\t\ttoastr.error(failed, 'Error in Retrieving Citizenship list.');\r\n\t\t});\r\n\r\n\t\tvar pred1 = breeze.Predicate.create('GLOBAL_INDIV_ID', '==', global_id);\r\n\t\tvar pred2 = breeze.Predicate.create('STATUS_CD', '==', 'ACTV');\r\n\t\tvar finalPred = breeze.Predicate.and([pred1, pred2]);\r\n\t\t_query = EntityQuery().from('GRP_INDIV_MSTR')\r\n\t\t\t\t.where(finalPred);\r\n\r\n\t\tthis.obj_personnel.HEADER.group.length=0;\r\n\t\tEntityManager().executeQuery(_query).then((success)=>{\r\n\t\t\tvar tmpArr=[];\r\n\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\tvar tmp = this.obj_personnel.GROUP.find((x)=>{\r\n\t\t\t\t\tif(x.value === result.GLOBAL_GRP_ID){\r\n\t\t\t\t\t\treturn x;\r\n\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t\tif(tmp != null){\r\n\t\t\t\t\ttmpArr.push(tmp);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.HEADER.group = tmpArr;\r\n\t\t},(failed)=>{\r\n\t\t\ttoastr.error(failed, 'Error in Retrieving Group list.');\r\n\t\t});\r\n\r\n\r\n\r\n\t}\r\n\r\n\tcheckDate(id)\r\n\t{\r\n\t\t$(\"#\"+id).datepicker();\r\n\t\t// setTimeout(() => {\r\n\t\t// \tvar dateValue = $(\"#\"+id).val();\r\n\t\t// \tif(dateValue.trim().length!=0 && !Date.parse(dateValue))\r\n\t\t// \t{\r\n\t\t//    \t\ttoastr.error(\"Invalid date \", \"Date Change..\");  \r\n\t\t//  \t\t}\r\n\t\t//  \t\telse\r\n\t\t//  \t\t{\r\n\t\t//    \t\t$(\"#\"+id).datepicker(\"setValue\", new Date($(\"#\"+id).val()));\r\n\t\t//  \t\t}\r\n\t\t//  \t},500);    \r\n\t}\r\n\r\n\tbtnAdd_Citizenship(){\r\n\t\tif(this.selected_citizenship.length>0){\r\n\r\n\t\t\tvar checkIfExist = this.obj_personnel.HEADER.citizenship.find((c)=>{\r\n\t\t\t\tif(c.value === this.selected_citizenship){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(checkIfExist){\r\n\t\t\t\ttoastr.error('The selected citizenship is already in the list.','Citizenship function');\r\n\t\t\t\t$('.ddCitizenship').val('');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar tmp = this.obj_personnel.CITIZENSHIP.find((c)=>{\r\n\t\t\t\tif(c.value === this.selected_citizenship){\r\n\t\t\t\t\treturn c;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(tmp != null){\r\n\t\t\t\tthis.obj_personnel.HEADER.citizenship.push(tmp);\r\n\t\t\t\t//$('.ddCitizenship').val('');\r\n\t\t\t\tthis.selected_citizenship='';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tremoveCitizenship(item){\r\n\t\tvar index = this.obj_personnel.HEADER.citizenship.indexOf(item);\r\n\t\tthis.obj_personnel.HEADER.citizenship.splice(index, 1);\r\n\t}\r\n\r\n\tremoveAllCitizenship(){\r\n\t\tthis.obj_personnel.HEADER.citizenship=[];\r\n\t}\r\n\r\n\tbtnAdd_Group(){\r\n\r\n\t\tif(this.selected_group.length>0){\r\n\t\t\t// var result = this.obj_personnel.HEADER.group.some((x)=>x.value == this.selected_group);\r\n\t\t\tvar checkIfExist = this.obj_personnel.HEADER.group.find((c)=>{\r\n\t\t\t\tif(c.value === this.selected_group){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(checkIfExist){\r\n\t\t\t\ttoastr.error('The selected group is already added in the list.','Group function');\r\n\t\t\t\t$('.ddGroup').val('');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar tmp = this.obj_personnel.GROUP.find((c)=>{\r\n\t\t\t\tif(c.value === this.selected_group){\r\n\t\t\t\t\treturn c;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(tmp != null){\r\n\t\t\t\tthis.obj_personnel.HEADER.group.push(tmp);\r\n\t\t\t\t//$('.ddGroup').val('');\r\n\t\t\t\tthis.selected_group = '';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tremoveGroup(item)\r\n\t{\r\n\t\tvar index = this.obj_personnel.HEADER.group.indexOf(item);\r\n\t\tthis.obj_personnel.HEADER.group.splice(index, 1);\r\n\t}\r\n\r\n\tremoveAllGroup(){\r\n\t\tthis.obj_personnel.HEADER.group=[];\r\n\t}\r\n\r\n\tfnPersonnel(call)\r\n\t{\r\n\r\n\t\tconsole.log(moment(\"01/01/0001\").isValid());\r\n\t\t$(\"#birthDate\").datepicker();\r\n\t\t$(\"#suspensionFrom\").datepicker();\r\n\t\t$(\"#suspensionTo\").datepicker();\t\t\r\n\t\tswitch(call)\r\n\t\t{\r\n\t\t\tcase \"EDIT\": \t\r\n\t\t\t\tthis.dialogService.open({ viewModel: ppid_search }).whenClosed(response=>{\r\n\t\t\t\t\t\tif(!response.wasCancelled)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis._disableSearchPersonnel = true;\r\n\t\t\t\t\t\t\tthis._disableCreatePersonnel = true;\r\n\t\t\t\t\t\t\tthis._disableResetData = false;\r\n\t\t\t\t\t\t\tthis._disableClearData = false;\r\n\t\t\t\t\t\t\tthis._disableSavePersonnel = false;\r\n\t\t\t\t\t\t\tthis._disableForm = false;\r\n\t\t\t\t\t\t\tthis.obj_personnel.editing_status = 'EDIT';\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tconsole.log('search was cancelled.');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"CREATE\": \t\r\n\t\t\t\tthis._disableSearchPersonnel = true;\r\n\t\t\t\tthis._disableCreatePersonnel = true;\r\n\t\t\t\tthis._disableResetData = false;\r\n\t\t\t\tthis._disableClearData = false;\r\n\t\t\t\tthis._disableSavePersonnel = false;\r\n\t\t\t\tthis._disableForm = false;\t\t\t\t\t\t\t\r\n\t\t\t\tthis.obj_personnel.editing_status = 'CREATE';\r\n\t\t\t\tthis.selected_citizenship = \"FIL\";\r\n\t\t\t\tthis.btnAdd_Citizenship();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"CLEAR\": \r\n\t\t\t\tthis.clearData();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"SAVE\": \r\n\t\t\t\tif(this.obj_personnel.editing_status == 'CREATE'){\r\n\t\t\t\t\tthis.validateHeader('INSERT');\r\n\t\t\t\t}else if(this.obj_personnel.editing_status == 'EDIT'){\r\n\t\t\t\t\tthis.validateHeader('UPDATE');\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateHeader(passed_status){\r\n\r\n\t\tvar strValidation=\"\";\r\n\t\tif(this.obj_personnel.HEADER.country_cd == undefined || this.obj_personnel.HEADER.country_cd == null || this.obj_personnel.HEADER.country_cd.length==0){\r\n\t\t\tstrValidation+=\"No Country specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.tin == undefined || this.obj_personnel.HEADER.tin == null || this.obj_personnel.HEADER.tin.length===0){  \t\t\t\r\n\t\t\tstrValidation+=\"No TIN specified.<br/>\";\r\n\t\t}else{\r\n\t\t\tvar TinRegex = /^(?:\\d{3}-\\d{3}-\\d{3}-\\d{3})$/;\r\n\t\t\tvar TinRegex2 = /^(?:\\d{12})$/;\r\n\t\t\tif(!TinRegex.test(this.obj_personnel.HEADER.tin) && !TinRegex2.test(this.obj_personnel.HEADER.tin))\r\n\t\t\t{\r\n\t\t\t\tstrValidation+=\"TIN is invalid.<br/>\";\r\n\t\t\t}else if(TinRegex2.test(this.obj_personnel.HEADER.tin))\r\n\t\t\t{\r\n\t\t\t\tvar set_1 = this.obj_personnel.HEADER.tin.substring(0,3);\r\n\t\t\t\tvar set_2 = this.obj_personnel.HEADER.tin.substring(3,6);\r\n\t\t\t\tvar set_3 = this.obj_personnel.HEADER.tin.substring(6,9);\r\n\t\t\t\tvar set_4 = this.obj_personnel.HEADER.tin.substring(9,12);\r\n\t\t\t\tthis.obj_personnel.HEADER.tin = set_1+'-'+set_2+'-'+set_3+'-'+set_4;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.last_name == undefined || this.obj_personnel.HEADER.last_name==null || this.obj_personnel.HEADER.last_name.length == 0){\r\n\t\t\tstrValidation+=\"No Last Name specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.given_name == undefined || this.obj_personnel.HEADER.given_name==null || this.obj_personnel.HEADER.given_name.length==0){\r\n\t\t\tstrValidation+=\"No First Name specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.middle_name == undefined || this.obj_personnel.HEADER.middle_name==null || this.obj_personnel.HEADER.middle_name.length==0){\r\n\t\t\tstrValidation+=\"No Middle Name specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.selectedGender.length==0){\r\n\t\t\t//if(this.obj_personnel.HEADER.gender == undefined || this.obj_personnel.HEADER.gender == null || this.obj_personnel.HEADER.gender.length==0){\r\n\t\t\tstrValidation+=\"No Gender specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.birth_dt != undefined && this.obj_personnel.HEADER.birth_dt != null && this.obj_personnel.HEADER.birth_dt.trim().length > 0)\r\n\t\t\tif(!moment(this.obj_personnel.HEADER.birth_dt).isValid()){\r\n\t\t\t\tstrValidation+=\"Invalid date of birth.<br/>\";\r\n\t\t\t}\r\n\r\n\t\tif(this.obj_personnel.HEADER.status_cd == \"SUSPEND\"){\r\n\r\n\t\t\tvar sus_start = null;\r\n\t\t\tvar sus_end = null;\r\n\t\t\tthis.obj_personnel.HEADER.suspension_start = $(\"#suspensionFrom\").val();\r\n\t\t\tthis.obj_personnel.HEADER.suspension_end = $(\"#suspensionTo\").val();\r\n\t\t\tif(this.obj_personnel.HEADER.suspension_start != undefined && this.obj_personnel.HEADER.suspension_start != null && this.obj_personnel.HEADER.suspension_start.length>0){\r\n\t\t\t\tif(!moment(this.obj_personnel.HEADER.suspension_start).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid suspension start date.<br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsus_start = new Date(this.obj_personnel.HEADER.suspension_start);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+= \"No start date of suspension specified.<br/>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.obj_personnel.HEADER.suspension_end != undefined && this.obj_personnel.HEADER.suspension_end != null && this.obj_personnel.HEADER.suspension_end.length>0){\t\t\t\r\n\t\t\t\tif(!moment(this.obj_personnel.HEADER.suspension_end).isValid()){\r\n\t\t\t\t\tstrValidation+=\"Invalid suspension end date.<br/>\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsus_end = new Date(this.obj_personnel.HEADER.suspension_end);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstrValidation+= \"No end date of suspension specified.<br/>\";\t\r\n\t\t\t}\r\n\r\n\t\t\tif(sus_start != null && sus_end != null){\r\n\t\t\t\tif(sus_end < sus_start){\r\n\t\t\t\t\tstrValidation+= \"end date of suspension cannot be greater than the start date.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\r\n\t\tif(strValidation.length>0)\r\n\t\t{\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(strValidation, 'Personnel Template');  \t\t\t\r\n\t\t\treturn;\r\n\t\t}else{\r\n\t\t\tvar mother_maiden_nm = this.obj_personnel.HEADER.mother_maiden_name;\r\n\t\t\tvar alias_nick = this.obj_personnel.HEADER.alias;\r\n\t\t\tvar first_nm = this.obj_personnel.HEADER.given_name;\r\n\t\t\tvar middle_nm = this.obj_personnel.HEADER.middle_name;\r\n\t\t\tvar last_nm = this.obj_personnel.HEADER.last_name;\r\n\t\t\tif(mother_maiden_nm != null)\r\n\t\t\t\tthis.obj_personnel.HEADER.mother_maiden_name = mother_maiden_nm.toUpperCase();\r\n\t\t\tif(alias_nick != null)\r\n\t\t\t\tthis.obj_personnel.HEADER.alias = alias_nick.toUpperCase();\r\n\t\t\tif(first_nm != null)\r\n\t\t\t\tthis.obj_personnel.HEADER.given_name = first_nm.toUpperCase();\r\n\t\t\tif(middle_nm != null)\r\n\t\t\t\tthis.obj_personnel.HEADER.middle_name = middle_nm.toUpperCase();\r\n\t\t\tif(last_nm != null)\r\n\t\t\t\tthis.obj_personnel.HEADER.last_name = last_nm.toUpperCase();\r\n\t\t}\r\n\r\n\t\tif(passed_status.includes(\"INSERT\")){\r\n\t\t\tthis.saveHeader();\r\n\t\t}\r\n\t\telse if(passed_status.includes('UPDATE')){\r\n\t\t\tthis.updateHeader();\r\n\t\t}\r\n\t}\r\n\r\n\tsaveHeader(){\r\n\t\ttoastr.clear();\r\n\t\tvar varInsert=null;  \t\t\r\n\t\tvar bdate = null;\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\r\n\t\tthis.obj_personnel.HEADER.birth_dt = $(\"#birthDate\").val();\r\n\r\n\t\tif(this.obj_personnel.HEADER.birth_dt != undefined && this.obj_personnel.HEADER.birth_dt != null && this.obj_personnel.HEADER.birth_dt.length > 0){\r\n\t\t\tbdate = new moment(new Date(this.obj_personnel.HEADER.birth_dt)).add(8,'hours');\r\n\t\t\tbdate = new Date(bdate);\r\n\t\t}\r\n\r\n\r\n\t\tvar varInsert_2 = EntityManager().createEntity('GLOBAL_MSTR', {\r\n\t\t\tGLOBAL_ID: this.obj_personnel.HEADER.tin+this.obj_personnel.HEADER.country_cd,\r\n\t\t\tCOUNTRY_CD: this.obj_personnel.HEADER.country_cd,\r\n\t\t\tTIN: this.obj_personnel.HEADER.tin,\r\n\t\t\tCOUNTRY_BASE_CD: this.obj_personnel.HEADER.country_base_cd,\r\n\t\t\tLOCATION_BASE_CD: this.obj_personnel.HEADER.location_base_cd,\r\n\t\t\tSTATUS_CD: this.obj_personnel.HEADER.status_cd,\r\n\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\tCREATED_DT: dateToday,\r\n\t\t\tACTIVE_FL:'1',\r\n\t\t\tPARK_FL:'0',\r\n\t\t\tINDIV_FL:1\r\n\t\t});\r\n\r\n\t\tEntityManager().addEntity(varInsert_2);\r\n\t\tEntityManager().saveChanges().then((success)=>{\r\n\r\n\t\t\tvarInsert = EntityManager().createEntity('GLOBAL_INDIV_MSTR', {\r\n\t\t\t\tGLOBAL_INDIV_ID: this.obj_personnel.HEADER.tin+this.obj_personnel.HEADER.country_cd,\r\n\t\t\t\t//TAX_EXEMPT_CD: '--',\r\n\t\t\t\tEMERGENCY_RELATION_CD:null,\r\n\t\t\t\tINDIV_ID:0,\r\n\t\t\t\tGIVEN_NAME: this.obj_personnel.HEADER.given_name,\r\n\t\t\t\tMIDDLE_NAME: this.obj_personnel.HEADER.middle_name,\r\n\t\t\t\tLAST_NAME: this.obj_personnel.HEADER.last_name,\r\n\t\t\t\tBIRTH_DT: bdate,\r\n\t\t\t\tBIRTH_PLACE: this.obj_personnel.HEADER.birth_place,\r\n\t\t\t\tGENDER: this.selectedGender=='Male'?'M':'F',\r\n\t\t\t\tCIVIL_STATUS: this.obj_personnel.HEADER.civil_status,\r\n\t\t\t\tMOTHER_MAIDEN_NAME: this.obj_personnel.HEADER.mother_maiden_name,\r\n\t\t\t\tACR_NO: this.obj_personnel.HEADER.acr_no,\t\r\n\t\t\t\tRELIGION_CD: this.obj_personnel.HEADER.religion_cd,\r\n\t\t\t\tALIAS: this.obj_personnel.HEADER.alias,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t});\r\n\r\n\t\t\tEntityManager().addEntity(varInsert);\r\n\t\t\tEntityManager().saveChanges().then((success_2)=>{\r\n\r\n\t\t\t\tthis.obj_personnel.HEADER.global_indiv_id = this.obj_personnel.HEADER.tin+this.obj_personnel.HEADER.country_cd;  \t\t\t\t\r\n\t\t\t\tthis.obj_personnel.editing_status = 'EDIT';\r\n\t\t\t\ttoastr.success(success_2, \"Record saved.\");\r\n\r\n\t\t\t\tvar getMax = EntityQuery().from('CITIZENSHIP_TRX').orderByDesc('CITIZENSHIP_ID').take(1);\r\n\r\n\t\t\t\tEntityManager().executeQuery(getMax).then((successMax)=>{\r\n\t\t\t\t\tvar Max = 1;\r\n\t\t\t\t\tif (successMax.results.length > 0){\r\n\t\t\t\t\t\tMax = successMax.results[0].CITIZENSHIP_ID;\r\n\r\n\t\t\t\t\t\t_.each(this.obj_personnel.HEADER.citizenship, (c)=>{\r\n\t\t\t\t\t\t\tMax+=1;\r\n\r\n\t\t\t\t\t\t\tvar tempCiti = EntityManager().createEntity('CITIZENSHIP_TRX', {\r\n\t\t\t\t\t\t\t\tCITIZENSHIP_CD: c.value,\r\n\t\t\t\t\t\t\t\tGLOBAL_INDIV_ID: this.obj_personnel.HEADER.global_indiv_id,\r\n\t\t\t\t\t\t\t\tCITIZENSHIP_ID: Max,\r\n\t\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tEntityManager().addEntity(tempCiti);\r\n\t\t\t\t\t\t});\t  \t\r\n\r\n\t\t\t\t\t\tif(this.obj_personnel.HEADER.citizenship.length>0){\r\n\t\t\t\t\t\t\tEntityManager().saveChanges().then((success_3)=>{\r\n\t\t\t\t\t\t\t\t\tconsole.log(success_3);\r\n\t\t\t\t\t\t\t},(failed_3)=>{\r\n\t\t\t\t\t\t\t\ttoastr.error(failed_3,'Error');\r\n\t\t\t\t\t\t\t});\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},(failedMax)=>{\r\n\t\t\t\t\ttoastr.error(failedMax, \"Error in saving citizenship.\");\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgetMax = EntityQuery().from('GRP_INDIV_MSTR').orderByDesc('GRP_INDIV_ID').take(1);\r\n\r\n\t\t\t\tEntityManager().executeQuery(getMax).then((successMax)=>{\r\n\t\t\t\t\tvar Max = 1;\r\n\t\t\t\t\tif(successMax.results.length>0){\r\n\t\t\t\t\t\tMax = successMax.results[0].GRP_INDIV_ID;\r\n\r\n\t\t\t\t\t\t_.each(this.obj_personnel.HEADER.group, (g)=>{\r\n\t\t\t\t\t\t\tMax+=1;\r\n\t\t\t\t\t\t\tvar tempGroup = EntityManager().createEntity('GRP_INDIV_MSTR', {\r\n\t\t\t\t\t\t\t\tGLOBAL_INDIV_ID: this.obj_personnel.HEADER.global_indiv_id,\r\n\t\t\t\t\t\t\t\tGLOBAL_GRP_ID: g.value,\r\n\t\t\t\t\t\t\t\tGRP_INDIV_ID: Max,\r\n\t\t\t\t\t\t\t\tSTATUS_CD: 'ACTV',\r\n\t\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tEntityManager().addEntity(tempGroup);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif(this.obj_personnel.HEADER.group.length>0){\r\n\t\t\t\t\t\t\tEntityManager().saveChanges().then(\r\n\t\t\t\t\t\t\t\t(success_3)=>{\r\n\t\t\t\t\t\t\t\t\tconsole.log(success_3);\r\n\t\t\t\t\t\t\t\t},(failed_3)=>{\r\n\t\t\t\t\t\t\t\t\ttoastr.error(failed_3,'Error');\r\n\t\t\t\t\t\t\t\t});\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, (failedMax)=>{\r\n\t\t\t\t\ttoastr.error(failedMax, \"Error in saving citizenship.\");\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(this.obj_personnel.HEADER.status_cd == \"SUSPEND\"){\r\n\t\t\t\t\tvar getMax = EntityQuery().from(\"SUSPEND_TRX\").orderByDesc(\"SUSPEND_ID\").take(1);\r\n\t\t\t\t\tEntityManager().executeQuery(getMax).then((success_suspend)=>{\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tvar maxId = 1;\r\n\t\t\t\t\t\tif(success_suspend.results.length>0){\r\n\t\t\t\t\t\t\tmaxId = success_suspend.results[0].SUSPEND_ID + 1;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar suspend_trx = EntityManager().createEntity(\"SUSPEND_TRX\", {\r\n\t\t\t\t\t\t\tSUSPEND_ID: maxId,\r\n\t\t\t\t\t\t\tGLOBAL_ID: this.obj_personnel.HEADER.tin+this.obj_personnel.HEADER.country_cd,\r\n\t\t\t\t\t\t\tSUSPEND_LEVEL: 1,\r\n\t\t\t\t\t\t\tSTART_DT: this.obj_personnel.HEADER.suspension_start,\r\n\t\t\t\t\t\t\tEND_DT: this.obj_personnel.HEADER.suspension_end,\r\n\t\t\t\t\t\t\tCOMPANY_ID: 0, \r\n\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tEntityManager().addEntity(suspend_trx);\r\n\t\t\t\t\t\tEntityManager().saveChanges().then((suspend_saved)=>{\r\n\t\t\t\t\t\t\ttoastr.success(\"\", \"Suspension details saved.\");\r\n\t\t\t\t\t\t}, (suspend_error)=>{\r\n\t\t\t\t\t\t\ttoastr.error(suspend_error, \"error in saving suspension details.\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.obj_personnel.HEADER.suspension_start = \"\";\r\n\t\t\t\t\tthis.obj_personnel.HEADER.suspension_end=\"\";\r\n\t\t\t\t\t$(\"#suspensionFrom\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t\t$(\"#suspensionTo\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t}, (failed_2)=>{\r\n\t\t\t\tif(varInsert != null){\r\n\t\t\t\t\tvarInsert.entityAspect().setDeleted();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(varInsert_2!=null)\r\n\t\t\t\t{\r\n\t\t\t\t\tvarInsert_2.entityAspect.setDeleted();  \r\n\t\t\t\t}\r\n\r\n\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconsole.log(failed_2);\r\n\t\t\t\ttoastr.error(failed_2,\"Error occured.\");\r\n\t\t\t});\r\n\r\n\t\t},(failed)=>{\r\n\t\t\tif(varInsert_2!=null)\r\n\t\t\t{\r\n\t\t\t\tvarInsert_2.entityAspect.setDeleted();  \r\n\t\t\t}\r\n\r\n\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\tconsole.log(errors);\r\n\t\t\t});\r\n\t\t\tconsole.log(failed);\r\n\t\t\ttoastr.error(failed,\"Error occured.\");\r\n\t\t});\r\n\t}\r\n\r\n\tupdateHeader(){\r\n\t\ttoastr.clear();\r\n\t\tvar dateToday = null;\r\n\t\tvar bdate = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\r\n\t\tthis.obj_personnel.HEADER.birth_dt = $(\"#birthDate\").val();\r\n\r\n\t\tif(this.obj_personnel.HEADER.birth_dt != undefined && this.obj_personnel.HEADER.birth_dt != null && this.obj_personnel.HEADER.birth_dt.length > 0)\r\n\t\t{\r\n\t\t\tbdate = new moment(new Date(this.obj_personnel.HEADER.birth_dt)).add(8,'hours');\r\n\t\t\tbdate = new Date(bdate);\r\n\t\t}\r\n\r\n\t\tvar getEntity = EntityQuery().from('GLOBAL_MSTR').where('GLOBAL_ID','==',this.obj_personnel.HEADER.global_indiv_id);\r\n\t\tEntityManager().executeQuery(getEntity).then((item)=>{\r\n\r\n\t\t\tif(item.results.length==0)\r\n\t\t\t{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error('No data for editing retrieved.', 'Error in updating record.');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\titem.results[0].COUNTRY_BASE_CD = this.obj_personnel.HEADER.country_base_cd;\r\n\t\t\titem.results[0].LOCATION_BASE_CD = this.obj_personnel.HEADER.location_base_cd;\r\n\t\t\titem.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\titem.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\titem.results[0].STATUS_CD = this.obj_personnel.HEADER.status_cd;\r\n\r\n\t\t\tEntityManager().saveChanges().then((success)=>{\t\t\t\t\r\n\r\n\t\t\t\tvar getEntity = EntityQuery().from('GLOBAL_INDIV_MSTR').where('GLOBAL_INDIV_ID','==',this.obj_personnel.HEADER.global_indiv_id);\r\n\t\t\t\tEntityManager().executeQuery(getEntity).then((item_2)=>{\r\n\t\t\t\t\tif(item_2.results.length==0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttoastr.clear();\r\n\t\t\t\t\t\ttoastr.error('No data for editing retrieved.', 'Error in updating record.');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\titem_2.results[0].GIVEN_NAME = this.obj_personnel.HEADER.given_name.toUpperCase();\r\n\t\t\t\t\titem_2.results[0].MIDDLE_NAME = this.obj_personnel.HEADER.middle_name.toUpperCase();\r\n\t\t\t\t\titem_2.results[0].LAST_NAME = this.obj_personnel.HEADER.last_name.toUpperCase();\r\n\t\t\t\t\titem_2.results[0].BIRTH_DT = bdate;\r\n\t\t\t\t\titem_2.results[0].BIRTH_PLACE = this.obj_personnel.HEADER.birth_place;\r\n\t\t\t\t\titem_2.results[0].GENDER = this.selectedGender=='Male'?'M':'F';\r\n\t\t\t\t\titem_2.results[0].CIVIL_STATUS = this.obj_personnel.HEADER.civil_status;\r\n\t\t\t\t\titem_2.results[0].MOTHER_MAIDEN_NAME = this.obj_personnel.HEADER.mother_maiden_name;\r\n\t\t\t\t\titem_2.results[0].ACR_NO = this.obj_personnel.HEADER.acr_no;\r\n\t\t\t\t\titem_2.results[0].RELIGION_CD = this.obj_personnel.HEADER.religion_cd;\r\n\t\t\t\t\titem_2.results[0].ALIAS = this.obj_personnel.HEADER.alias;\r\n\t\t\t\t\titem_2.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\t\titem_2.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\t\t\tEntityManager().saveChanges().then((success_2)=>{\r\n\t\t\t\t\t\ttoastr.success('','Record updated.');\r\n\r\n\t\t\t\t\t\t//update citizenship list\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\tvar getCitizenshipList = EntityQuery().from('CITIZENSHIP_TRX').where('GLOBAL_INDIV_ID', '==', this.obj_personnel.HEADER.global_indiv_id);\r\n\t\t\t\t\t\tEntityManager().executeQuery(getCitizenshipList).then((query)=>{\r\n\r\n\t\t\t\t\t\t\t_.each(query.results, (result)=>{\r\n\t\t\t\t\t\t\t\tvar doesExist = this.obj_personnel.HEADER.citizenship.some((x)=>x.value == result.CITIZENSHIP_CD);\r\n\r\n\t\t\t\t\t\t\t\tif(!doesExist)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tresult.entityAspect.setDeleted();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tvar getMax = EntityQuery().from('CITIZENSHIP_TRX').orderByDesc('CITIZENSHIP_ID').take(1);\r\n\t\t\t\t\t\t\tEntityManager().executeQuery(getMax).then((getMaxSuccess)=>{\r\n\t\t\t\t\t\t\t\tvar Max = 1;\r\n\t\t\t\t\t\t\t\tvar newCount=0;\r\n\t\t\t\t\t\t\t\tif(getMaxSuccess.results.length>0)\r\n\t\t\t\t\t\t\t\t{\r\n\r\n\t\t\t\t\t\t\t\t\tMax = getMaxSuccess.results[0].CITIZENSHIP_ID;\r\n\r\n\t\t\t\t\t\t\t\t\t_.each(this.obj_personnel.HEADER.citizenship, (citi)=>{\r\n\t\t\t\t\t\t\t\t\t\tvar doesExist = query.results.some((x)=>x.CITIZENSHIP_CD == citi.value);\r\n\t\t\t\t\t\t\t\t\t\tif(!doesExist)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tMax+=1;\r\n\t\t\t\t\t\t\t\t\t\t\tnewCount++;\r\n\t\t\t\t\t\t\t\t\t\t\tvar tempEnt = EntityManager().createEntity('CITIZENSHIP_TRX', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tCITIZENSHIP_CD: citi.value,\r\n\t\t\t\t\t\t\t\t\t\t\t\tGLOBAL_INDIV_ID: this.obj_personnel.HEADER.global_indiv_id,\r\n\t\t\t\t\t\t\t\t\t\t\t\tCITIZENSHIP_ID: Max,\r\n\t\t\t\t\t\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tEntityManager().addEntity(tempEnt);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\tEntityManager().saveChanges().then((success_3)=>{\r\n\t\t\t\t\t\t\t\t\t\ttoastr.success(success_3,'Citizenship list was updated.');\r\n\t\t\t\t\t\t\t\t\t},(error)=>{\r\n\t\t\t\t\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t\t\t\ttoastr.error(\"Error Occured_3\", error);\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//update citizenship list end.\r\n\r\n\t\t\t\t\t\t//update group list.\r\n\t\t\t\t\t\tvar getGroup = EntityQuery().from('GRP_INDIV_MSTR').where('GLOBAL_INDIV_ID', '==', this.obj_personnel.HEADER.global_indiv_id);\r\n\t\t\t\t\t\tEntityManager().executeQuery(getGroup).then((queryGroup)=>{\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t_.each(queryGroup.results, (result)=>{\r\n\t\t\t\t\t\t\t\tvar doesExist = this.obj_personnel.HEADER.group.some((x)=>x.value == result.GLOBAL_GRP_ID);\r\n\t\t\t\t\t\t\t\tif(!doesExist)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tresult.entityAspect.setDeleted();\r\n\t\t\t\t\t\t\t\t\t//result.STATUS_CD = 'INACTV';\r\n\t\t\t\t\t\t\t\t\t//result.LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\t\t\t\t\t\t//result.LAST_UPDATED_DT = dateToday;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tvar getMax = EntityQuery().from('GRP_INDIV_MSTR').orderByDesc('GRP_INDIV_ID').take(1);\r\n\t\t\t\t\t\t\tEntityManager().executeQuery(getMax).then((queryMax)=>{\r\n\t\t\t\t\t\t\t\tvar Max=1;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif(queryMax.results.length>0)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tMax = queryMax.results[0].GRP_INDIV_ID;\r\n\t\t\t\t\t\t\t\t\t_.each(this.obj_personnel.HEADER.group, (g)=>{\r\n\t\t\t\t\t\t\t\t\t\tvar doesExist = queryGroup.results.some((x)=>x.GLOBAL_GRP_ID == g.value);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tif(!doesExist)\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tMax+=1;\r\n\t\t\t\t\t\t\t\t\t\t\tvar tempEnt = EntityManager().createEntity('GRP_INDIV_MSTR', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tGLOBAL_INDIV_ID: this.obj_personnel.HEADER.global_indiv_id,\r\n\t\t\t\t\t\t\t\t\t\t\t\tGLOBAL_GRP_ID: g.value,\r\n\t\t\t\t\t\t\t\t\t\t\t\tGRP_INDIV_ID: Max,\r\n\t\t\t\t\t\t\t\t\t\t\t\tSTATUS_CD: 'ACTV',\r\n\t\t\t\t\t\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tEntityManager().addEntity(tempEnt);\r\n\t\t\t\t\t\t\t\t\t\t}else{\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tvar index = _.findIndex(queryGroup.results, function(o){\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn o.GLOBAL_GRP_ID == g.value;\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tif(index != -1 && queryGroup.results[index].STATUS_CD == 'INACTV')\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tqueryGroup.results[index].STATUS_CD = 'ACTV';\r\n\t\t\t\t\t\t\t\t\t\t\t\tqueryGroup.results[index].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\t\t\t\t\t\t\t\t\tqueryGroup.results[index].LAST_UPDATED_DT = dateToday;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\tEntityManager().saveChanges().then((success_710)=>{\r\n\t\t\t\t\t\t\t\t\t\ttoastr.success(success_710,'Group list was updated.');\r\n\t\t\t\t\t\t\t\t\t},(error_712)=>{\r\n\t\t\t\t\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(error_712);\r\n\t\t\t\t\t\t\t\t\t\ttoastr.error(\"Error Occured_4\", error_712);\r\n\t\t\t\t\t\t\t\t\t});\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//update group list end.\r\n\r\n\t\t\t\t\t\t//Update/Insert suspend_trx\r\n\t\t\t\t\t\tif(this.obj_personnel.HEADER.status_cd == \"SUSPEND\"){\r\n\t\t\t\t\t\t\tif(this.obj_personnel.HEADER.suspend_id != undefined && this.obj_personnel.HEADER.suspend_id != null && this.obj_personnel.HEADER.suspend_id.toString().length>0){\r\n\t\t\t\t\t\t\t\tvar getSuspend = EntityQuery().from(\"SUSPEND_TRX\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t.where(\"SUSPEND_ID\", \"==\", this.obj_personnel.HEADER.suspend_id);\r\n\t\t\t\t\t\t\t\tEntityManager().executeQuery(getSuspend).then((success_getSuspend)=>{\r\n\t\t\t\t\t\t\t\t\tsuccess_getSuspend.results[0].START_DT = this.obj_personnel.HEADER.suspension_start;\r\n\t\t\t\t\t\t\t\t\tsuccess_getSuspend.results[0].END_DT = this.obj_personnel.HEADER.suspension_end;\r\n\t\t\t\t\t\t\t\t\tsuccess_getSuspend.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\t\t\t\t\t\t\tsuccess_getSuspend.results[0].LAST_UPDATED_DT = dateToday;\r\n\t\t\t\t\t\t\t\t\tEntityManager().saveChanges().then((save_success)=>{\r\n\t\t\t\t\t\t\t\t\t\ttoastr.success(\"\",\"Suspension date updated.\");\r\n\t\t\t\t\t\t\t\t\t},(save_error)=>{\r\n\t\t\t\t\t\t\t\t\t\ttoastr.error(save_error, \"error in updating suspension date.\");\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}, (error_getSuspend)=>{\r\n\t\t\t\t\t\t\t\t\ttoastr.error(error_getSuspend, \"error in updating suspension date.\");\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tvar getMax = EntityQuery().from(\"SUSPEND_TRX\").orderByDesc(\"SUSPEND_ID\").take(1);\r\n\t\t\t\t\t\t\t\tEntityManager().executeQuery(getMax).then((success_suspend)=>{\r\n\t\t\t\t\t\t\t\t\tvar maxId = 1;\r\n\t\t\t\t\t\t\t\t\tif(success_suspend.results.length>0){\r\n\t\t\t\t\t\t\t\t\t\tmaxId = success_suspend.results[0].SUSPEND_ID + 1;\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvar suspend_trx = EntityManager().createEntity(\"SUSPEND_TRX\", {\r\n\t\t\t\t\t\t\t\t\t\tSUSPEND_ID: maxId+\"\",\r\n\t\t\t\t\t\t\t\t\t\tGLOBAL_ID: this.obj_personnel.HEADER.tin+this.obj_personnel.HEADER.country_cd,\r\n\t\t\t\t\t\t\t\t\t\tSUSPEND_LEVEL: 1,\r\n\t\t\t\t\t\t\t\t\t\tSTART_DT: this.obj_personnel.HEADER.suspension_start,\r\n\t\t\t\t\t\t\t\t\t\tEND_DT: this.obj_personnel.HEADER.suspension_end,\r\n\t\t\t\t\t\t\t\t\t\tCOMPANY_ID: 0, \r\n\t\t\t\t\t\t\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\t\t\t\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tEntityManager().addEntity(suspend_trx);\r\n\t\t\t\t\t\t\t\t\tEntityManager().saveChanges().then((suspend_saved)=>{\r\n\t\t\t\t\t\t\t\t\t\ttoastr.success(\"\", \"Suspension details saved.\");\r\n\t\t\t\t\t\t\t\t\t}, (suspend_error)=>{\r\n\t\t\t\t\t\t\t\t\t\t// console.log(suspend_error);\r\n\t\t\t\t\t\t\t\t\t\ttoastr.error(suspend_error, \"error in saving suspension details.\");\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.obj_personnel.HEADER.suspension_start = \"\";\r\n\t\t\t\t\t\t\tthis.obj_personnel.HEADER.suspension_end=\"\";\r\n\t\t\t\t\t\t\t$(\"#suspensionFrom\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t\t\t\t$(\"#suspensionTo\").datepicker(\"setValue\", new Date());\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t//Update/Insert suspend_trx\r\n\r\n\r\n\r\n\t\t\t\t\t}, (error)=>{\r\n\t\t\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\ttoastr.error(\"Error Occured_2\", error);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},(error)=>{\r\n\t\t\t\tEntityManager().getEntities().forEach(function(entity) {\r\n\t\t\t\t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t\t\t\t\tif (errors.length > 0)\r\n\t\t\t\t\t\tconsole.log(errors);\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t\ttoastr.error(\"Error Occured_1\", error);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tbtnUpload(){\r\n\t\ttoastr.clear();\r\n\t\ttoastr.info(\"Image Upload under maintenance.\", \"\");\r\n\t}\r\n\r\n\tclickTab_main(index)\r\n\t{\t\t\r\n\t\tif(this.obj_personnel.global_indiv_id.length===0)\r\n\t\t\treturn;\r\n\t\tswitch(index){\r\n\t\t\tcase 0: \r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading employee info...\", \"\");\r\n\t\t\t\tthis.loadData(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\t//load Contact list.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading contact list...\", \"\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.maintab_contact_clicked.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2: //load Educational Achievement.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading Educational Achievement...\", \"\");\r\n\t\t\t\tthis.obj_personnel.OBSERVERS.maintab_education_clicked.forEach((delegate)=>{\r\n\t\t\t\t\tdelegate(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3: //load Characteristic/Interest.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading Characteristic/Interest...\", \"Success\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4: //load Skills/Talent.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading Skills/Talent...\", \"Success\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase 5: //load Language/Dialect.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading Language/Dialect...\", \"Success\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase 6: //load Medical Record.\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.info(\"Loading Medical Record...\", \"Success\");\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tclearData(){\r\n\t\tthis._disableSavePersonnel = true;\r\n\t\tthis._disableClearData = true;\r\n\t\tthis._disableCreatePersonnel = false;\r\n\t\tthis._disableSearchPersonnel = false;\r\n\t\tthis.obj_personnel.global_indiv_id = \"\";\r\n\t\tthis.obj_personnel.HEADER = {\r\n\t\t\tcitizenship:[],\r\n\t\t\tgroup:[]\r\n\t\t};\r\n\t\tthis.selectedGender = \"\";\r\n\t\tthis.selected_citizenship = \"\";\r\n\t\tthis.selected_group=\"\";\r\n\t\tthis._disableForm = true;\r\n\t\tthis.obj_personnel.editing_status=\"\";\r\n\t\ttoastr.clear();\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.forEach((delegate)=>{\r\n\t\t\tdelegate();\r\n\t\t});\r\n\t}  \r\n\r\n\t// LoginPassed(user){\r\n\t// \tconsole.log(user);\r\n\t// }\r\n\r\n\t// date_mask(id, mask){\r\n\t// \tinput_mask(id, mask);\r\n\t// }\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class main_contact \r\n{\r\n\t_disableForm=true;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\t_disableAddressTable=false;\r\n\t_disableContactTable=false;\r\n\tobj_personnel=null;\r\n\tconstructor(obj_personnel, toastr, DialogService)\r\n\t{\r\n\t\tthis.DialogService = DialogService;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_contact_clicked.push((val)=>{\r\n\t\t\tthis.loadMain_Address(val);\r\n\t\t\tthis.loadMain_Contact(val);\r\n\t\t\tthis.loadMain_EmailWeb(val);\r\n\t\t\tthis.clearAddressData();\r\n\t\t\tthis.clearContactData();\r\n\t\t});\r\n\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.push((val)=>{\r\n\t\t\tthis.obj_personnel.CONTACT= {\r\n\t\t\t\tstatus:\"\",\r\n\t\t\t\tmodelAddress:{},\r\n\t\t\t\tstatusContact:\"Add\",\r\n\t\t\t\tmodelContact:{},\r\n\t\t\t\tmodelInternet:{},\r\n\t\t\t\taddress:[],\r\n\t\t\t\tcontact:[],\r\n\t\t\t\temail:[],\r\n\t\t\t\twebsite:[]\r\n\t\t\t};\r\n\t\t\tthis.clearAddressData();\r\n\t\t\tthis.clearContactData();\r\n\t\t\tthis.clearEmailWebData();\r\n\t\t});\r\n\t}\r\n\r\n\tloadMain_Address(global_id)\r\n\t{\r\n\t\tvar query = EntityQuery().from('ADDR_TRX').where('GLOBAL_ID','==',global_id);\t\t\r\n\t\tEntityManager().executeQuery(query).then((success)=>{\r\n\t\t\tvar tmp = [];\r\n\t\t\tvar tmpFullAddress = [];\r\n\t\t\t_.each(success.results,(result)=>{\r\n\t\t\t\tvar strFullAddress=\"\";\r\n\t\t\t\tif(result.UNIT_NO != null && result.UNIT_NO.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.UNIT_NO);\r\n\t\t\t\tif(result.HOUSE_NO != null && result.HOUSE_NO.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.HOUSE_NO);\r\n\t\t\t\tif(result.BLOCK_LOT != null && result.BLOCK_LOT.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.BLOCK_LOT);\r\n\t\t\t\tif(result.BLDG_NAME != null && result.BLDG_NAME.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.BLDG_NAME);\r\n\t\t\t\tif(result.STREET_NAME != null && result.STREET_NAME.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.STREET_NAME);\r\n\t\t\t\tif(result.SUB_VILLAGE != null && result.SUB_VILLAGE.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.SUB_VILLAGE);\r\n\t\t\t\tif(result.BARANGAY != null && result.BARANGAY.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.BARANGAY);\r\n\t\t\t\tif(result.DISTRICT != null && result.DISTRICT.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.DISTRICT);\r\n\t\t\t\tif(result.CITY_TOWN != null && result.CITY_TOWN.length>0)\r\n\t\t\t\t\ttmpFullAddress.push(result.CITY_TOWN);\r\n\t\t\t\tif(result.STATE_PROVINCE != null && result.STATE_PROVINCE.length>0){\r\n\t\t\t\t\tvar text = this.obj_personnel.LOCATIONS.find((l)=>{\r\n\t\t\t\t\t\tif(l.value == result.STATE_PROVINCE)\r\n\t\t\t\t\t\t\treturn l.text;\r\n\t\t\t\t\t});          \r\n          \t\t\ttmpFullAddress.push(text);\r\n      \t\t\t}\r\n      \t\t\tif(result.REGION != null && result.REGION.length>0)\r\n      \t\t\t\ttmpFullAddress.push(result.REGION);\r\n      \t\t\tif(result.ZIPCODE != null && result.ZIPCODE.length>0)\r\n      \t\t\t\ttmpFullAddress.push(result.ZIPCODE);        \r\n      \t\t\tif(result.COUNTRY_CD != null && result.COUNTRY_CD.length>0)\r\n      \t\t\t\ttmpFullAddress.push(result.COUNTRY_CD);\r\n\r\n      \t\t\tif(tmpFullAddress.length>0){\r\n      \t\t\t\tstrFullAddress = tmpFullAddress.join(' ');\r\n      \t\t\t\ttmpFullAddress=[];\r\n      \t\t\t}\r\n\r\n\r\n      \t\t\ttmp.push({\r\n\t\t\t\t\tglobal_id: result.GLOBAL_ID,\r\n\t\t\t\t\taddr_id: result.ADDR_ID,\r\n\t\t\t\t\tcountry_cd: result.COUNTRY_CD,\r\n\t\t\t\t\tregion: result.REGION,\r\n\t\t\t\t\tstate_province: result.STATE_PROVINCE,\r\n\t\t\t\t\tcity_town: result.CITY_TOWN,\r\n\t\t\t\t\tdistrict: result.DISTRICT,\r\n\t\t\t\t\tbarangay: result.BARANGAY,\r\n\t\t\t\t\tsub_village: result.SUB_VILLAGE,\r\n\t\t\t\t\tphase: result.PHASE,\r\n\t\t\t\t\tpermanent_fl: result.PERMANENT_FL,\r\n\t\t\t\t\tpresent_fl: result.PRESENT_FL,\r\n\t\t\t\t\tblock_lot: result.BLOCK_LOT,\r\n\t\t\t\t\tstreet_name: result.STREET_NAME,\r\n\t\t\t\t\thouse_no: result.HOUSE_NO,\r\n\t\t\t\t\tbldg_name: result.BLDG_NAME,\r\n\t\t\t\t\tunit_no: result.UNIT_NO,\r\n\t\t\t\t\tzipcode: result.ZIPCODE,\r\n\t\t\t\t\tresidential_type: result.RESIDENTIAL_TYPE,\r\n\t\t\t\t\thouse_ownership: result.HOUSE_OWNERSHIP,\r\n\t\t\t\t\tmailing_fl: result.MAILING_FL,\r\n\t\t\t\t\tpostal_box: result.POSTAL_BOX,\r\n\t\t\t\t\tremarks: result.REMARKS,\r\n\t\t\t\t\tsketch_path: result.SKETCH_PATH,\r\n\t\t\t\t\tfull_address: strFullAddress\r\n        \t\t});\r\n \t\t\t});\r\n\t\t\t\r\n\t\t\tthis.obj_personnel.CONTACT.address = tmp;\r\n\t\t\ttoastr.clear();\t\t\t\r\n\t\t\ttoastr.success(\"\", \"Success\");\r\n\t\t});\r\n\t}\r\n\r\n\tloadMain_Contact(global_id){\r\n\r\n\t\tvar query = EntityQuery().from('CONTACT_INFO_TRX')\r\n\t\t\t\t\t.where('GLOBAL_ID', '==', global_id);\r\n\t\tEntityManager().executeQuery(query).then((success)=>{\r\n\r\n\t\t\tvar tmp = [];\r\n\t\t\t_.each(success.results, (result)=>{\r\n\t\t\t\tvar type = this.obj_personnel.CONTACT_TYPE.find((x)=>{\r\n\t\t\t\t\treturn x.value == result.PHONE_TYPE;\r\n\t\t\t\t});\r\n\t\t\t\tvar contact = {\r\n\t\t\t\t\tcontact_no_id: result.CONTACT_NO_ID,\r\n\t\t\t\t\tglobal_id: result.GLOBAL_ID,\r\n\t\t\t\t\tphone_type_text: type.text,\r\n\t\t\t\t\tphone_type: result.PHONE_TYPE,\r\n\t\t\t\t\tarea_cd: result.AREA_CD,\r\n\t\t\t\t\tphone_no: result.PHONE_NO,\r\n\t\t\t\t\tlocal_no: result.LOCAL_NO\r\n\t\t\t\t};\r\n\t\t\t\ttmp.push(contact);\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.CONTACT.contact = tmp;\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tloadMain_EmailWeb(global_id){\r\n\r\n\t\tvar query = EntityQuery().from(\"INTERNET_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\r\n\t\t\tvar tmpEmail=[];\r\n\t\t\tvar tmpWeb=[];\r\n\t\t\t_.each(querySuccess.results, (result)=>{\r\n\r\n\t\t\t\tif(result.EMAIL_FL == 1){\r\n\t\t\t\t\tvar email = {\r\n\t\t\t\t\t\tinternet_id: result.INTERNET_ID,\r\n\t\t\t\t\t\tweb_addr: result.WEB_ADDR\r\n\t\t\t\t\t};\r\n\t\t\t\t\ttmpEmail.push(email);\r\n\t\t\t\t}else if(result.REC_STAT_FL == 1){\r\n\t\t\t\t\tvar web = {\r\n\t\t\t\t\t\tinternet_id: result.INTERNET_ID,\r\n\t\t\t\t\t\tweb_addr: result.WEB_ADDR\t\r\n\t\t\t\t\t};\r\n\t\t\t\t\ttmpWeb.push(web);\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t});\r\n\r\n\t\t\tthis.obj_personnel.CONTACT.email=tmpEmail;\r\n\t\t\tthis.obj_personnel.CONTACT.website=tmpWeb;\r\n\r\n\t\t}, (queryError)=>{\r\n\t\t\tconsole.log(queryError);\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tclearAddressData(){\r\n\t\tthis.obj_personnel.CONTACT.modelAddress={};\r\n\t\tthis.obj_personnel.CONTACT.status=\"\";\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableAddressTable = false;\r\n\t}\r\n\r\n\tclearContactData(){\r\n\t\tthis._disableContactTable = false;\r\n\t\tthis.obj_personnel.CONTACT.statusContact=\"Add\";\r\n\t\tthis.obj_personnel.CONTACT.modelContact={};\r\n\t}\r\n\r\n\tclearEmailWebData()\r\n\t{\r\n\t\tthis.obj_personnel.CONTACT.modelInternet={};\r\n\t}\r\n\r\n\t//Source: https://stackoverflow.com/questions/13952686/how-to-make-html-input-tag-only-accept-numerical-values\r\n\tisNumberKey(evt){\t\r\n    \tvar charCode = (evt.which) ? evt.which : event.keyCode\r\n    \tif (charCode > 31 && (charCode < 48 || charCode > 57))\r\n\t        return false;\r\n    \treturn true;\r\n\t}\r\n\r\n\tdd_regionChanged(){\r\n\t\tvar reg = this.obj_personnel.CONTACT.modelAddress.region;\r\n\t\tif(reg != undefined && reg!=null && reg.length!=0)\r\n\t\t{\r\n\t\t\t//alert(this.obj_personnel.CONTACT.modelAddress.region);\r\n\t\t\tvar selectedRegion = this.obj_personnel.REGION.find((r)=>{\r\n\t\t\t\tif(r.value == reg)\r\n\t\t\t\t\treturn r;\r\n\t\t\t});\r\n\r\n\t\t\tif(selectedRegion != null)\r\n\t\t\t{\r\n\t\t\t\tthis.obj_personnel.CONTACT.modelAddress.country_cd = selectedRegion.group;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tbtnAdd_Address()\r\n\t{\r\n\t\tthis.obj_personnel.CONTACT.status=\"ADD\";\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableAddressTable = true;\r\n\t}\r\n\r\n\tbtnEdit_Address(address)\r\n\t{\r\n\t\tthis._disableBtnAdd = true;\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableAddressTable = true;\r\n\t\tthis.obj_personnel.CONTACT.status=\"EDIT\";\r\n\t\tthis.obj_personnel.CONTACT.modelAddress=address;\r\n\t\tthis.obj_personnel.CONTACT.modelAddress.present_fl=this.obj_personnel.CONTACT.modelAddress.present_fl=='1'?true:false;\r\n\t\tthis.obj_personnel.CONTACT.modelAddress.permanent_fl=this.obj_personnel.CONTACT.modelAddress.permanent_fl=='1'?true:false;\r\n  \t\t//console.log(address);\r\n  \t}\r\n\r\n  \tbtnRemoveAddress(item){\r\n  \t\t\r\n  \t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the address?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n\t  \t\t\t\t//alert(\"Confirmed delete.\");\r\n  \t\t\t\t\tvar query = EntityQuery().from('ADDR_TRX').where('ADDR_ID', '==', item.addr_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\t\t\t\t\r\n  \t\t\t\t\t\tsuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The address was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadMain_Address(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t},(error)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\", \"Error in removing address.\");\r\n  \t\t\t\t\t\t});\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n  \t}\r\n\r\n  \tvalidateAddress()\r\n  \t{\r\n  \t\tvar strValidation=\"\";\r\n  \t\tif(this.obj_personnel.CONTACT.modelAddress.country_cd == undefined || this.obj_personnel.CONTACT.modelAddress.country_cd == null || this.obj_personnel.CONTACT.modelAddress.country_cd.length==0){\r\n  \t\t\tstrValidation+= \"No country specified.<br/>\";\r\n  \t\t}\r\n\r\n  \t\tif(strValidation.length>0){\r\n  \t\t\ttoastr.clear();\r\n  \t\t\ttoastr.error(strValidation, \"\");\r\n  \t\t\treturn;\r\n  \t\t}else{\r\n  \t\t\tif(this.obj_personnel.CONTACT.status=='ADD'){\r\n  \t\t\t\tthis.insertAddress();\r\n  \t\t\t}else if(this.obj_personnel.CONTACT.status=='EDIT')\r\n  \t\t\t{\r\n  \t\t\t\tthis.updateAddress();\r\n  \t\t\t}\r\n  \t\t}\r\n  \t}\r\n\r\n  \tinsertAddress(){\r\n  \t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n\r\n  \t\tvar query = EntityQuery().from('ADDR_TRX').orderByDesc('ADDR_ID').take(1);\r\n  \t\tEntityManager().executeQuery(query).then((success)=>{\r\n\r\n  \t\t\tvar Max=1;\r\n  \t\t\tif(success.results.length>0){\r\n  \t\t\t\tMax = success.results[0].ADDR_ID+1;\r\n  \t\t\t}\r\n  \t\t\tconsole.log(Max);\r\n        //Upload Image first before save to DB record.\r\n\r\n        \tvar _address = {\r\n\t        \tADDR_ID: Max,\r\n\t        \tBARANGAY: this.obj_personnel.CONTACT.modelAddress.barangay,\r\n\t        \tBLDG_NAME: this.obj_personnel.CONTACT.modelAddress.bldg_name,\r\n\t        \tBLOCK_LOT: this.obj_personnel.CONTACT.modelAddress.block_lot,\r\n\t        \tCITY_TOWN: this.obj_personnel.CONTACT.modelAddress.city_town,\r\n\t        \tCOUNTRY_CD: this.obj_personnel.CONTACT.modelAddress.country_cd,\r\n\t        \tDISTRICT: this.obj_personnel.CONTACT.modelAddress.district,\r\n\t        \tGLOBAL_ID: this.obj_personnel.HEADER.global_indiv_id,\r\n\t        \tHOUSE_NO: this.obj_personnel.CONTACT.modelAddress.house_no,\r\n\t            //HOUSE_OWNERSHIP: this.obj_personnel.CONTACT.modelAddress.house_ownership,\r\n\t            MAILING_FL: 0,\r\n\t            PERMANENT_FL: this.obj_personnel.CONTACT.modelAddress.permanent_fl?1:0,\r\n\t            // PERMANENT_FL: 0,\r\n\t            // PHASE: this.obj_personnel.CONTACT.modelAddress.phase,\r\n\t            // POSTAL_BOX: this.obj_personnel.CONTACT.modelAddress.postal_box,\r\n\t            PRESENT_FL: this.obj_personnel.CONTACT.modelAddress.present_fl?1:0,\r\n\t            // PRESENT_FL: 0,\r\n\t            // REGION: this.obj_personnel.CONTACT.modelAddress.region,\r\n\t            REMARKS: this.obj_personnel.CONTACT.modelAddress.remarks,\r\n\t            // RESIDENTIAL_TYPE: this.obj_personnel.CONTACT.modelAddress.residential_type,\r\n\t            // SKETCH_PATH: this.obj_personnel.CONTACT.modelAddress.sketch_path,\r\n\t            STATE_PROVINCE: this.obj_personnel.CONTACT.modelAddress.state_province,\r\n\t            STREET_NAME: this.obj_personnel.CONTACT.modelAddress.street_name,\r\n\t            SUB_VILLAGE: this.obj_personnel.CONTACT.modelAddress.sub_village,\r\n\t            UNIT_NO: this.obj_personnel.CONTACT.modelAddress.unit_no,\r\n\t            ZIPCODE: this.obj_personnel.CONTACT.modelAddress.zipcode,\r\n\t            CREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t            CREATED_DT: dateToday\r\n\t        };\r\n\r\n\t        var address = EntityManager().createEntity('ADDR_TRX', _address);\r\n\r\n    \t    EntityManager().addEntity(address);\r\n        \tEntityManager().saveChanges().then((success)=>{\r\n        \t\ttoastr.clear();\r\n\t        \ttoastr.success(\"\", \"Record saved.\");\r\n\t        \tthis.loadMain_Address(this.obj_personnel.global_indiv_id);\r\n\t        \tthis.clearAddressData();\r\n\t        }, (error)=>{\r\n\t        \tEntityManager().getEntities().forEach(function(entity) {\r\n\t        \t\tvar errors = entity.entityAspect.getValidationErrors();\r\n\t        \t\tif (errors.length > 0)\r\n\t        \t\t\tconsole.log(errors);\r\n\t        \t});\r\n\t        \ttoastr.clear();\r\n\t        \ttoastr.error(error, \"Error in saving address.\");\r\n\t        \tconsole.log(error);\r\n\t        });\r\n    \t});\r\n  \t}\r\n\r\n  \tupdateAddress(){\r\n\r\n  \t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n  \t\tvar query = EntityQuery().from('ADDR_TRX').where('ADDR_ID','==', this.obj_personnel.CONTACT.modelAddress.addr_id);\r\n  \t\tEntityManager().executeQuery(query).then((success)=>{\r\n  \t\t\tsuccess.results[0].BARANGAY = this.obj_personnel.CONTACT.modelAddress.barangay;\r\n  \t\t\tsuccess.results[0].BLDG_NAME = this.obj_personnel.CONTACT.modelAddress.bldg_name;\r\n  \t\t\tsuccess.results[0].BLOCK_LOT = this.obj_personnel.CONTACT.modelAddress.block_lot;\r\n  \t\t\tsuccess.results[0].CITY_TOWN = this.obj_personnel.CONTACT.modelAddress.city_town;\r\n  \t\t\tsuccess.results[0].COUNTRY_CD = this.obj_personnel.CONTACT.modelAddress.country_cd;\r\n  \t\t\tsuccess.results[0].DISTRICT = this.obj_personnel.CONTACT.modelAddress.district;\r\n  \t\t\tsuccess.results[0].HOUSE_NO = this.obj_personnel.CONTACT.modelAddress.house_no;\r\n  \t\t\tsuccess.results[0].PERMANENT_FL = this.obj_personnel.CONTACT.modelAddress.permanent_fl?'1':'0';\r\n  \t\t\tsuccess.results[0].PRESENT_FL = this.obj_personnel.CONTACT.modelAddress.present_fl?'1':'0';\r\n  \t\t\tsuccess.results[0].REGION = this.obj_personnel.CONTACT.modelAddress.region;\r\n  \t\t\tsuccess.results[0].REMARKS = this.obj_personnel.CONTACT.modelAddress.remarks;\r\n  \t\t\tsuccess.results[0].STATE_PROVINCE = this.obj_personnel.CONTACT.modelAddress.state_province;\r\n  \t\t\tsuccess.results[0].STREET_NAME = this.obj_personnel.CONTACT.modelAddress.street_name;\r\n  \t\t\tsuccess.results[0].SUB_VILLAGE = this.obj_personnel.CONTACT.modelAddress.sub_village;\r\n  \t\t\tsuccess.results[0].UNIT_NO = this.obj_personnel.CONTACT.modelAddress.unit_no;\r\n  \t\t\tsuccess.results[0].ZIPCODE = this.obj_personnel.CONTACT.modelAddress.zipcode;\r\n  \t\t\tsuccess.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n  \t\t\tsuccess.results[0].LAST_UPDATED_DT = dateToday;\r\n  \t\t\t\r\n  \t\t\tEntityManager().saveChanges().then((success)=>{\r\n  \t\t\t\ttoastr.clear();\r\n  \t\t\t\ttoastr.success(\"\",\"Record updated sucessfully.\");\r\n  \t\t\t\tthis.loadMain_Address(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\tthis.clearAddressData();\r\n  \t\t\t},(error)=>{\r\n  \t\t\t\ttoastr.clear();\r\n  \t\t\t\tconsole.log(error);\r\n  \t\t\t\ttoastr.error(error, 'Error in updating address.');\r\n  \t\t\t});\r\n  \t\t});\r\n\r\n  \t}\r\n\r\n  \tbtnEdit_Contact(contact){\r\n  \t\tthis._disableContactTable = true;\r\n  \t\tthis.obj_personnel.CONTACT.statusContact = \"Edit\";\r\n  \t\tthis.obj_personnel.CONTACT.modelContact.contact_no_id = contact.contact_no_id;\r\n  \t\tthis.obj_personnel.CONTACT.modelContact.phone_type = contact.phone_type;\r\n  \t\tthis.obj_personnel.CONTACT.modelContact.area_cd = contact.area_cd;\r\n  \t\tthis.obj_personnel.CONTACT.modelContact.phone_no = contact.phone_no;\r\n  \t\tthis.obj_personnel.CONTACT.modelContact.local_no = contact.local_no;\r\n  \t}\r\n\r\n  \tbtnRemove_Contact(contact){\r\n\r\n  \t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the contact?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n  \t\t\t\t\tvar query = EntityQuery().from(\"CONTACT_INFO_TRX\")\r\n  \t\t\t\t\t\t\t\t.where(\"CONTACT_NO_ID\", \"==\", contact.contact_no_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n  \t\t\t\t\t\tif(querySuccess.results.length==0){\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\",\"No to-be-remove record found.\");\r\n  \t\t\t\t\t\t}\r\n  \t\t\t\t\t\tquerySuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((removeSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The contact was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadMain_Contact(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.clearContactData();\r\n  \t\t\t\t\t\t},(removeError)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(removeError, \"Error in removing contact.\");\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n  \t}\r\n\r\n  \tvalidateContact(){\r\n  \t\tvar strValidation = \"\";\r\n\r\n\t\tif(this.obj_personnel.CONTACT.modelContact.phone_type == undefined || this.obj_personnel.CONTACT.modelContact.phone_type == null || this.obj_personnel.CONTACT.modelContact.phone_type.length==0){\r\n  \t\t\tstrValidation+=\"Phone type is required.<br/>\";\r\n  \t\t}\r\n\r\n  \t\tif(this.obj_personnel.CONTACT.modelContact.area_cd == undefined || this.obj_personnel.CONTACT.modelContact.area_cd == null || this.obj_personnel.CONTACT.modelContact.area_cd.length==0){\r\n  \t\t\tstrValidation+=\"Area Code is required.<br/>\";\r\n  \t\t}\r\n\r\n  \t\tif(this.obj_personnel.CONTACT.modelContact.phone_no == undefined || this.obj_personnel.CONTACT.modelContact.phone_no == null || this.obj_personnel.CONTACT.modelContact.phone_no.length==0){\r\n  \t\t\tstrValidation+=\"Phone number is required.<br/>\";\r\n  \t\t}\r\n\r\n  \t\tif(strValidation.length>0){\r\n  \t\t\ttoastr.clear();\r\n  \t\t\ttoastr.error(\"\", strValidation);\r\n  \t\t}else{\r\n  \t\t\tif(this.obj_personnel.CONTACT.statusContact==\"Add\"){\r\n  \t\t\t\tthis.insertContact();\r\n  \t\t\t}else if(this.obj_personnel.CONTACT.statusContact==\"Edit\")\r\n  \t\t\t{\r\n  \t\t\t\tthis.updateContact();\r\n  \t\t\t}  \t\t\r\n  \t\t}\r\n  \t}\r\n  \t\r\n  \tinsertContact(){\r\n\r\n  \t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n  \t\tvar query = EntityQuery().from(\"CONTACT_INFO_TRX\").orderByDesc(\"CONTACT_NO_ID\").take(1);\r\n  \t\tEntityManager().executeQuery(query).then((Success)=>{\r\n  \t\t\tvar Max = 1;\r\n  \t\t\tif(Success.results.length>0)\r\n  \t\t\t{\r\n  \t\t\t\tMax = Success.results[0].CONTACT_NO_ID + 1;\r\n  \t\t\t}\r\n  \t\t\tvar Contact = EntityManager().createEntity(\"CONTACT_INFO_TRX\", {\r\n  \t\t\t\tAREA_CD: this.obj_personnel.CONTACT.modelContact.area_cd,\r\n  \t\t\t\tCONTACT_NO_ID: Max,\r\n  \t\t\t\tCOUNTRY_CD: \"PH\",\r\n  \t\t\t\tGLOBAL_ID: this.obj_personnel.global_indiv_id,\r\n  \t\t\t\tLOCAL_NO: this.obj_personnel.CONTACT.modelContact.local_no,\r\n  \t\t\t\tPHONE_NO: this.obj_personnel.CONTACT.modelContact.phone_no,\r\n  \t\t\t\tPHONE_TYPE: this.obj_personnel.CONTACT.modelContact.phone_type,\r\n  \t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n  \t\t\t\tCREATED_DT: dateToday\r\n\r\n  \t\t\t});\r\n  \t\t\tEntityManager().addEntity(Contact);\r\n  \t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Contact successfully added.\");\r\n\t\t\t\tthis.loadMain_Contact(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearContactData();\r\n  \t\t\t}, (error)=>{\r\n  \t\t\t\ttoastr.clear();\r\n  \t\t\t\ttoastr.error(error, \"Error in adding contact.\");\r\n  \t\t\t});\r\n\r\n  \t\t});  \t\t\r\n  \t}\r\n\r\n  \tupdateContact(){\r\n  \t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n  \t\tvar query = EntityQuery().from('CONTACT_INFO_TRX')\r\n  \t\t\t\t\t.where(\"CONTACT_NO_ID\", \"==\", this.obj_personnel.CONTACT.modelContact.contact_no_id);\r\n  \t\tEntityManager().executeQuery(query).then((Success)=>{\r\n\r\n  \t\t\tif(Success.results.length == 0)\r\n  \t\t\t{\r\n  \t\t\t\ttoastr.clear();\r\n  \t\t\t\ttoastr.error(\"\", \"No record to be updated found.\");\r\n  \t\t\t\treturn;\r\n  \t\t\t}\r\n  \t\t\tSuccess.results[0].AREA_CD = this.obj_personnel.CONTACT.modelContact.area_cd;\r\n  \t\t\tSuccess.results[0].LOCAL_NO = this.obj_personnel.CONTACT.modelContact.local_no;\r\n  \t\t\tSuccess.results[0].PHONE_NO = this.obj_personnel.CONTACT.modelContact.phone_no;\r\n  \t\t\tSuccess.results[0].PHONE_TYPE = this.obj_personnel.CONTACT.modelContact.phone_type;\r\n  \t\t\tSuccess.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n  \t\t\tSuccess.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n  \t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n  \t\t\t\ttoastr.clear();\r\n  \t\t\t\ttoastr.success(\"\", \"The contact was successfully updated.\");\r\n\t\t\t\tthis.loadMain_Contact(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearContactData();\r\n  \t\t\t}, (errorSave)=>{\r\n  \t\t\t\ttoastr.clear();\r\n  \t\t\t\ttoastr.error(errorSave, \"Error in updating contact.\");\r\n  \t\t\t\tconsole.log(errorSave);\r\n  \t\t\t});\r\n  \t\t});\r\n  \t}\r\n\r\n  \tvalidateEmail(email) {\r\n  \t\tvar re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n  \t\treturn re.test(email);\r\n\t}\r\n\r\n\tvalidateWeb(URL){\r\n\t\tvar regEx = /^\\s*[a-z](?:[-a-z0-9\\+\\.])*:(?:\\/\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:])*@)?(?:\\[(?:(?:(?:[0-9a-f]{1,4}:){6}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|::(?:[0-9a-f]{1,4}:){5}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4}:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+[-a-z0-9\\._~!\\$&\\'\\(\\)\\*\\+,;=:]+)\\]|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}|(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=@])*)(?::[0-9]*)?(?:\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@]))*)*|\\/(?:(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@]))+)(?:\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@]))*)*)?|(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@]))+)(?:\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@]))*)*|(?!(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@])))(?:\\?(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@])|[\\uE000-\\uF8FF\\uF0000-\\uFFFFD|\\u100000-\\u10FFFD\\/\\?])*)?(?:\\#(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&\\'\\(\\)\\*\\+,;=:@])|[\\/\\?])*)?\\s*$/i;\r\n\t\treturn regEx.test(URL);\r\n\t}\r\n\r\n\tbtnAdd_EmailWeb(isEmail){\r\n\r\n\t\tif(isEmail){\r\n\t\t\tif(this.validateEmail(this.obj_personnel.CONTACT.modelInternet.email_addr)){\r\n\t\t\t\t//alert('email is valid.');\r\n\t\t\t\tthis.insertEmailWeb(isEmail);\r\n\t\t\t}else{\r\n\t\t\t\t//alert('email is not valid.');\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t// if(this.validateWeb(this.obj_personnel.CONTACT.modelInternet.url)){\r\n\t\t\t// \talert('url is valid');\r\n\t\t\t\tthis.insertEmailWeb(isEmail);\r\n\t\t\t// }else{\r\n\t\t\t// \talert('url is invalid.');\r\n\t\t\t// }\r\n\t\t}\r\n\t}\r\n\r\n\tbtnRemove_EmailWeb(internet_id, isEmail){\r\n\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the \"+(isEmail?\"Email address\":\"website url\")+\"?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n  \t\t\t\t\tvar query = EntityQuery().from(\"INTERNET_TRX\")\r\n  \t\t\t\t\t\t\t\t.where(\"INTERNET_ID\", \"==\", internet_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n  \t\t\t\t\t\tif(querySuccess.results.length==0){\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\",\"No to-be-remove record found.\");\r\n  \t\t\t\t\t\t}\r\n  \t\t\t\t\t\tquerySuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((removeSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The \"+(isEmail?\"Email address\":\"website url\")+\" was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadMain_EmailWeb(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.clearEmailWebData();\r\n  \t\t\t\t\t\t},(removeError)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(removeError, \"Error in removing \"+(isEmail?\"Email address\":\"website url\")+\" .\");\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\r\n\t}\r\n\r\n\tbtnRemove_AllEmailWeb(isEmail){\r\n\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove all.\", message:\"Are you sure you want to remove all the \"+(isEmail?\"Email address\":\"website url\")+\"?\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n  \t\t\t\t\tvar pred1 = breeze.Predicate.create(\"GLOBAL_ID\", \"==\", this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\tvar pred2 = breeze.Predicate.create(\"EMAIL_FL\", \"==\", isEmail?1:0);\r\n  \t\t\t\t\tvar finalPred = breeze.Predicate.and([pred1, pred2]);\r\n  \t\t\t\t\tvar query = EntityQuery().from(\"INTERNET_TRX\")\r\n  \t\t\t\t\t\t\t\t.where(finalPred);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n  \t\t\t\t\t\tif(querySuccess.results.length==0){\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\",\"No to-be-remove record found.\");\r\n  \t\t\t\t\t\t}\r\n\r\n  \t\t\t\t\t\t_.each(querySuccess.results, (result)=>{\r\n  \t\t\t\t\t\t\tresult.entityAspect.setDeleted();\r\n  \t\t\t\t\t\t});  \t\t\t\t\t\t\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((removeSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The \"+(isEmail?\"Email address\":\"website url\")+\" was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadMain_EmailWeb(this.obj_personnel.global_indiv_id);\r\n  \t\t\t\t\t\t\tthis.clearEmailWebData();\r\n  \t\t\t\t\t\t},(removeError)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(removeError, \"Error in removing \"+(isEmail?\"Email address\":\"website url\")+\" .\");\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\r\n\t}\r\n\r\n\tinsertEmailWeb(isEmail){\r\n\t\tvar dateToday = null;    \r\n  \t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n  \t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from('INTERNET_TRX').orderByDesc('INTERNET_ID').take(1);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tvar Max = 1;\r\n\t\t\tif(querySuccess.results.length>0){\r\n\t\t\t\tMax = querySuccess.results[0].INTERNET_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar internet_trx = {\r\n\t\t\t\tGLOBAL_ID: this.obj_personnel.global_indiv_id,\r\n\t\t\t\tWEB_ADDR: isEmail? this.obj_personnel.CONTACT.modelInternet.email_addr: this.obj_personnel.CONTACT.modelInternet.url,\r\n\t\t\t\tINTERNET_ID: Max,\r\n\t\t\t\tEMAIL_FL: isEmail?1:0,\r\n\t\t\t\tREC_STAT_FL: 1,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\t\t\tvar entity = EntityManager().createEntity(\"INTERNET_TRX\", internet_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"The \"+(isEmail?\"Email\":\"Website\")+ \" successfully added.\");\r\n\t\t\t\tthis.loadMain_EmailWeb(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearEmailWebData();\r\n\t\t\t}, (errorSave)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(errorSave, \"Error in saving \"+(isEmail?\"Email.\":\"Website.\"));\r\n\t\t\t});\r\n\r\n\t\t});\t\t\r\n\t}\r\n\r\n\r\n\r\n  }","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\nimport breeze from 'breeze-client';\r\nimport {DialogService} from 'aurelia-dialog'\r\nimport {DialogBox} from \"../modals/DialogBox\";\r\nimport moment from 'moment';\r\n\r\n@inject(obj_personnel, toastr, DialogService)\r\nexport class main_educational{\r\n\r\n\tobj_personnel = null;\r\n\t_disableForm=true;\r\n\t_disableTable=false;\r\n\t_disableBtnAdd=false;\r\n\t_disableBtnSave=true;\r\n\tconstructor(obj_personnel, toastr, DialogService){\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.DialogService = DialogService;\r\n\t\tthis.obj_personnel.OBSERVERS.maintab_education_clicked.push((val)=>{\r\n\t\t\tthis.loadMain_Educational(val);\r\n\t\t\tthis.clearData();\r\n\t\t});\r\n\t\t\r\n\t\tthis.obj_personnel.OBSERVERS.clear_ppid.push(()=>{\r\n\t\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT={\r\n\t\t\t\tstatus:\"\",\r\n\t\t\t\tmodel:{},\r\n\t\t\t\tlist:[]\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\tloadMain_Educational(global_id){\r\n\t\tvar query = EntityQuery().from(\"EDUCATION_TRX\")\r\n\t\t\t\t\t.where(\"GLOBAL_INDIV_ID\", \"==\", global_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tvar tmpList=[];\r\n\t\t\t_.each(querySuccess.results, (result)=>{\r\n\t\t\t\tvar school = this.obj_personnel.SCHOOLS.find((x)=>{\r\n\t\t\t\t\treturn x.school_cd == result.SCHOOL_CD;\r\n\t\t\t\t});\r\n\t\t\t\tvar level = this.obj_personnel.LEVEL.find((x)=>{\r\n\t\t\t\t\treturn x.value == result.EDUCATION_LEVEL;\r\n\t\t\t\t});\r\n\t\t\t\tvar education = {\r\n\t\t\t\t\tstart_yr: result.START_YR,\r\n\t\t\t\t\tcourse: result.COURSE,\r\n\t\t\t\t\teducation_id: result.EDUCATION_ID,\r\n\t\t\t\t\teducation_level: result.EDUCATION_LEVEL,\r\n\t\t\t\t\tend_yr: result.END_YR,\r\n\t\t\t\t\tschool_cd: result.SCHOOL_CD,\r\n\t\t\t\t\thonor_awards: result.HONOR_AWARDS,\r\n\t\t\t\t\tcompleted_fl: result.COMPLETED_FL,\r\n\t\t\t\t\tschool_name: school.school_name,\r\n\t\t\t\t\tlevel_name: level.text\t\t\t\t\t\r\n\t\t\t\t};\r\n\t\t\t\ttmpList.push(education);\r\n\t\t\t});\r\n\t\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT.list = tmpList;\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(\"\", \"Success\");\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tbtnAdd(){\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis._disableBtnAdd = true;\t\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT.status=\"ADD\";\r\n\t}\r\n\r\n\tbtnEdit(education){\t\t\r\n\t\tthis._disableForm = false;\r\n\t\tthis._disableTable = true;\r\n\t\tthis._disableBtnAdd = true;\t\r\n\t\tthis._disableBtnSave = false;\r\n\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model = {\r\n\t\t\teducation_id: education.education_id,\r\n\t\t\teducation_level: education.education_level,\r\n\t\t\tstart_yr: education.start_yr+\"\",\r\n\t\t\tend_yr: education.end_yr+\"\",\r\n\t\t\tschool_cd: education.school_cd,\r\n\t\t\tcourse: education.course,\r\n\t\t\thonor_awards: education.honor_awards,\r\n\t\t\tcompleted_fl: education.completed_fl==\"1\"\r\n\t\t};\r\n\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT.status=\"EDIT\";\r\n\t}\r\n\r\n\tclearData(){\r\n\t\tthis._disableForm = true;\r\n\t\tthis._disableTable = false;\r\n\t\tthis._disableBtnAdd = false;\r\n\t\tthis._disableBtnSave = true;\r\n\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model={};\r\n\t\tthis.obj_personnel.EDUCATIONAL_ACHIEVEMENT.status=\"\";\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\tvar strValidation=\"\";\r\n\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.education_level == undefined || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.education_level == null || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.education_level.length==0){\r\n\t\t\tstrValidation+=\"No level specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr == undefined || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr == null || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr.length==0){\r\n\t\t\tstrValidation+=\"No start year specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr == undefined || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr == null || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr.length==0){\r\n\t\t\tstrValidation+=\"No end year specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.school_cd == undefined || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.school_cd == null || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.school_cd.length==0){\r\n\t\t\tstrValidation+=\"No school specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.course == undefined || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.course == null || this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.course.length==0){\r\n\t\t\tstrValidation+=\"No degree/major specified.<br/>\";\r\n\t\t}\r\n\r\n\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr != undefined && this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr != null && this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr.length>0){\r\n\t\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr != undefined && this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr != null && this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr.length>0){\t\t\t\t\r\n\t\t\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr> this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr)\r\n\t\t\t\t{\r\n\t\t\t\t\tstrValidation+=\"Start year cannot be greater than end year.<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(strValidation.length>0){\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.error(\"\", strValidation);\r\n\t\t}else{\r\n\t\t\tif(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.status==\"ADD\")\r\n\t\t\t{\r\n\t\t\t\tthis.insert();\r\n\t\t\t}else if(this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.status==\"EDIT\")\r\n\t\t\t{\r\n\t\t\t\tthis.update();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinsert(){\t\t\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"EDUCATION_TRX\")\r\n\t\t\t\t\t.orderByDesc(\"EDUCATION_ID\").take(1);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tvar Max=1;\r\n\t\t\tif(querySuccess.results.length>0)\r\n\t\t\t{\r\n\t\t\t\tMax = querySuccess.results[0].EDUCATION_ID+1;\r\n\t\t\t}\r\n\r\n\t\t\tvar education_trx = {\r\n\t\t\t\tGLOBAL_INDIV_ID: this.obj_personnel.global_indiv_id,\r\n\t\t\t\tSTART_YR: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr,\r\n\t\t\t\tCOURSE: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.course,\r\n\t\t\t\tEDUCATION_ID: Max,\r\n\t\t\t\tEDUCATION_LEVEL: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.education_level,\r\n\t\t\t\tEND_YR: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr,\r\n\t\t\t\tSCHOOL_CD: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.school_cd,\r\n\t\t\t\tYR_GRADUATED: 0,\r\n\t\t\t\tHONOR_AWARDS: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.honor_awards,\r\n\t\t\t\tCOMPLETED_FL: this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.completed_fl?1:0,\r\n\t\t\t\tCREATED_BY: this.obj_personnel.USER.USER_ID,\r\n\t\t\t\tCREATED_DT: dateToday\r\n\t\t\t};\r\n\r\n\t\t\tvar entity = EntityManager().createEntity(\"EDUCATION_TRX\", education_trx);\r\n\t\t\tEntityManager().addEntity(entity);\r\n\t\t\tEntityManager().saveChanges().then((saveSuccess)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record saved.\");\r\n\t\t\t\tthis.loadMain_Educational(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearData();\r\n\t\t\t},(saveError)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", saveError);\r\n\t\t\t});\r\n\t\t});\t\t\r\n\t}\r\n\r\n\tupdate(){\r\n\t\tvar dateToday = null;\r\n\t\tdateToday = new moment(new Date()).add(8, 'hours');\r\n\t\tdateToday = new Date(dateToday);\r\n\t\tvar query = EntityQuery().from(\"EDUCATION_TRX\")\r\n\t\t\t\t\t.where(\"EDUCATION_ID\", \"==\", this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.education_id);\r\n\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n\t\t\tif(querySuccess.results.length==0){\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", \"Error in query data to be updated\");\r\n\t\t\t}\r\n\t\t\tquerySuccess.results[0].START_YR = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.start_yr;\r\n\t\t\tquerySuccess.results[0].COURSE = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.course;\r\n\t\t\tquerySuccess.results[0].EDUCATION_LEVEL = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.education_level;\r\n\t\t\tquerySuccess.results[0].END_YR = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.end_yr;\r\n\t\t\tquerySuccess.results[0].SCHOOL_CD = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.school_cd;\r\n\t\t\tquerySuccess.results[0].HONOR_AWARDS = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.honor_awards;\r\n\t\t\tquerySuccess.results[0].COMPLETED_FL = this.obj_personnel.EDUCATIONAL_ACHIEVEMENT.model.completed_fl?1:0;\r\n\t\t\tquerySuccess.results[0].LAST_UPDATED_BY = this.obj_personnel.USER.USER_ID;\r\n\t\t\tquerySuccess.results[0].LAST_UPDATED_DT = dateToday;\r\n\r\n\t\t\tEntityManager().saveChanges().then((updateSuccess)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.success(\"\", \"Record updated.\");\r\n\t\t\t\tthis.loadMain_Educational(this.obj_personnel.global_indiv_id);\r\n\t\t\t\tthis.clearData();\r\n\t\t\t}, (updateError)=>{\r\n\t\t\t\ttoastr.clear();\r\n\t\t\t\ttoastr.error(\"\", updateError);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tbtnRemove(educ)\r\n\t{\r\n\t\tthis.DialogService.open({ viewModel: DialogBox, model: { title:\"Confirm remove.\", message:\"Are you sure you want to remove the educational achievement\" } })\r\n  \t\t\t.whenClosed(response=>{\r\n  \t\t\t\tif(!response.wasCancelled){\r\n  \t\t\t\t\tvar query = EntityQuery().from(\"EDUCATION_TRX\")\r\n  \t\t\t\t\t\t\t\t.where(\"EDUCATION_ID\", \"==\", educ.education_id);\r\n  \t\t\t\t\tEntityManager().executeQuery(query).then((querySuccess)=>{\r\n  \t\t\t\t\t\tif(querySuccess.results.length==0){\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(\"\",\"No to-be-remove record found.\");\r\n  \t\t\t\t\t\t}\r\n  \t\t\t\t\t\tquerySuccess.results[0].entityAspect.setDeleted();\r\n\r\n  \t\t\t\t\t\tEntityManager().saveChanges().then((removeSuccess)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.success(\"\",\"The educational achievement was successfully removed.\");\r\n  \t\t\t\t\t\t\tthis.loadMain_Educational(this.obj_personnel.global_indiv_id);\r\n\t\t\t\t\t\t\tthis.clearData();\r\n  \t\t\t\t\t\t},(removeError)=>{\r\n  \t\t\t\t\t\t\ttoastr.clear();\r\n  \t\t\t\t\t\t\ttoastr.error(removeError, \"Error in removing educational achievement.\");\r\n  \t\t\t\t\t\t});\r\n\r\n  \t\t\t\t\t});\r\n  \t\t\t\t}\r\n  \t\t});\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\n\r\n@inject(DialogService, obj_personnel, toastr)\r\nexport class miscellaneous\r\n{\r\n\tobj_personnel = null;\r\n\tconstructor(dialogService, obj_personnel, toastr){\r\n\t\tthis.dialogService = dialogService;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\tthis.obj_personnel.OBSERVERS.ppid_dialog.push((all)=>{\t\t\t\t\r\n\t\t\tthis.CloseSearch(all);\r\n\t\t});\t\r\n\t}\r\n\t\r\n\tCloseSearch(global_id){\t\t\r\n\t\t//alert(\"miscellaneous:\"+global_id);\r\n\t}\r\n}","import toastr from \"toastr\";\r\nimport {inject} from 'aurelia-framework';\r\nimport {obj_personnel} from '../obj_personnel';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport {EntityManager,EntityQuery} from '../../entity-manager-factory';\r\n\r\n@inject(DialogService, obj_personnel, toastr)\r\nexport class relative_character_ref\r\n{\r\n\tobj_personnel = null;\r\n\t_tab0_loaded = false;\t\r\n\tconstructor(dialogService, obj_personnel, toastr){\r\n\t\tthis.dialogService = dialogService;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\t//this.obj_personnel.OBSERVERS.ppid_dialog.push((all)=>{\t\t\t\t\r\n\t\t//\tthis.CloseSearch(all);\r\n\t\t//});\r\n\t\tthis.obj_personnel.OBSERVERS.tab_changed.push((tab_num,global_id)=>{\r\n\t\t\tthis.LoadData(tab_num, global_id);\r\n\t\t});\r\n\t}\r\n\t\r\n\tLoadData(tab_num, global_id)\r\n\t{\t\t\r\n\t\tif(tab_num!=1 || global_id==null || global_id.length==0 || this._tab0_loaded)\r\n\t\t\treturn;\r\n\t\t//alert('relative:'+global_id);\r\n\t\ttoastr.success(Success,'Loading relative data...');\r\n\t\tvar _query = EntityQuery().from('RELATIVE_TRX')\r\n\t\t\t\t\t.where('GLOBAL_INDIV_ID', '==', global_id);\r\n\t\tEntityManager().executeQuery(_query).then((Success)=>{\r\n\t\t\ttoastr.clear();\r\n\t\t\ttoastr.success(Success,'Loading relative data...');\r\n\t\t\tthis._tab0_loaded = true;\r\n\t\t},\r\n\t\t(failed)=>{\r\n\t\t\tthis._tab0_loaded=false; //for testing purpose.\t\t\t\r\n\t\t\ttoastr.error(failed,'Error in data retrieval for relative.');\r\n\t\t});\r\n\t}\r\n\t\r\n\t\r\n}","export class relative_parent{\r\n\tconstructor(){\r\n\t\t\r\n\t}\r\n}","export class relative_siblings{\r\n\tconstructor(){\r\n\t\t\r\n\t}\r\n}","import {inject,ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {DialogController} from 'aurelia-dialog';\r\n\r\n@inject(DialogController)\r\nexport class DialogBox\r\n{\r\n\tmessage=\"Sample Message\";\r\n\ttitle=\"Sample Title\";\r\n\tconstructor(controller){\r\n\t\tthis.controller = controller;\t\r\n\t}\r\n\r\n\tactivate(info){\r\n\t\tthis.message = info.message;\r\n\t\tthis.title = info.title;\t\t\r\n\t}\r\n}","export class photo_list{\r\n\tconstructor(){\r\n\t\r\n\t}\r\n}","import {inject,ObserverLocator,bindable} from 'aurelia-framework';\r\nimport {DialogController} from 'aurelia-dialog';\r\nimport {MultiObserver} from 'multi-observer'; \r\nimport {getLookups} from '../.././masterfiles';\r\nimport breeze from 'breeze-client';\r\nimport {EntityManager, EntityQuery} from '../../entity-manager-factory';\r\nimport {getFilter} from '../../helpers';\r\nimport {obj_personnel} from '../obj_personnel';\r\n\r\n@inject(MultiObserver,DialogController,ObserverLocator, obj_personnel)\r\nexport class ppid_search\r\n{\r\n\tobj_personnel=null;\r\n\tvarFilterArrayLength=0;\r\n\tvarFilterArray=[];\r\n\tlstPredicates=[];\r\n\tcurrPredicate=null;\r\n\tobserverLocator=null;\r\n\tconstructor(multiObserver,controller, observerLocator, obj_personnel){\r\n\t\tthis.controller = controller;\r\n\t\tthis.observerLocator = observerLocator;\r\n\t\tthis.obj_personnel = obj_personnel;\r\n\t\t\r\n\t\tmultiObserver.observe([\r\n\t\t\t[this, \"_bglobal_indiv_id\"],\r\n\t\t\t//[this, \"_btin\"],\r\n\t\t\t//[this, \"_bgroup\"],\r\n\t\t\t[this, \"_blast_name\"],\r\n\t\t\t[this, \"_bfirst_name\"],\r\n\t\t\t[this, \"_bnickname\"]\r\n\t\t\t//[this, \"_bproject_name\"],\r\n\t\t\t//[this, \"_bcountry\"]\r\n\t\t], (newValue, oldValue)=> this.onSpeculateProp(newValue, oldValue));\r\n\t\t\r\n\t}\r\n\t\r\n\tfnManualFilter(tmpVar)\r\n\t{\t\t\r\n\t\tthis.lstPredicates = [];\r\n\t\t//_rppid_queries\r\n\t\t_.each(this._rppid_queries.querySelectorAll('input'), all=> {\t\t\t\t\t\t\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\t\t\tif(varOb.getValue()!=undefined && varOb.getValue()!=null && varOb.getValue()!=\"\" && varOb.getValue()!=\"undefined\")\r\n\t\t\t{\r\n\t\t\t\tif((varOb.propertyName.indexOf('global_indiv_id')>-1) /*|| (varOb.propertyName.indexOf('tin')>-1 && varOb.getValue().length>=15)*/)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(varOb.getValue().length>=17)\r\n\t\t\t\t\t\tthis.lstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b','').toUpperCase(), \"==\", varOb.getValue().toUpperCase()));\r\n\t\t\t\t}\r\n\t\t\t\telse if(!(varOb.propertyName.indexOf('global_indiv_id')>-1))\r\n\t\t\t\t{\t\t\t\t\t\r\n\t\t\t\t\tthis.lstPredicates.push(breeze.Predicate.create(varOb.propertyName.replace('_b','').toUpperCase().replace('FIRST_NAME','GIVEN_NAME').replace('NICKNAME','ALIAS'), breeze.FilterQueryOp.Contains, varOb.getValue().toUpperCase()));\r\n\t\t\t\t} \r\n\t\t\t\t\r\n\t\t\t\tif(tmpVar.length>0)\r\n\t\t\t\t{\r\n\t\t\t\t\ttmpVar = getFilter(tmpVar, varOb.getValue(), all.getAttribute('searchable').replace('_s', ''));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn tmpVar;\r\n\t}\r\n\t\r\n\tonSpeculateProp(newValue, oldValue)\r\n\t{\r\n\t\tvar varValuesHasChanged=false;\r\n\t\t//check if inputs has value else return;\r\n\t\t_.each(this._rppid_queries.querySelectorAll('input'), all => {\r\n\t\t\tvar varOb = this.observerLocator.getObserver(this, all.getAttribute('searchable').replace('_s', '_b'));\r\n\r\n\t\t\tif(varOb.getValue()!='' && varOb.getValue()!==undefined)\r\n\t\t\t{\t\r\n\t\t\t\tvarValuesHasChanged=true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tif(!varValuesHasChanged) return;\t\t\r\n\t\t\r\n\t\tvar tmpVar = this.fnManualFilter(this.varFilterArray);\r\n\t\t\r\n\t\tif(tmpVar.length>0){\t\t\t\r\n\t\t\tvar tmpVarNew=_.sortBy(tmpVar, 'GLOBAL_INDIV_ID').reverse();\r\n\t\t\tthis.varFilterArray = tmpVarNew;\r\n\t\t\tthis.varFilterArrayLength=this.varFilterArray.length;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(this.lstPredicates.length==0)\r\n\t\t\treturn;\r\n\r\n\t\tthis.currPredicate=this.lstPredicates;\t\t\r\n\t\tsetTimeout((a)=>{\r\n\t\t\tif(a!==this.currPredicate)\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\tvar _query = EntityQuery().from('GLOBAL_INDIV_MSTR').where(breeze.Predicate.and(this.currPredicate))\r\n\t\t\t//.expand('GLOBAL_GRP_MSTR')\r\n\t\t\t.orderBy('GLOBAL_INDIV_ID desc')\r\n\t\t\t.select('GLOBAL_INDIV_ID,GIVEN_NAME,LAST_NAME,ALIAS');\r\n\t\t\tEntityManager().executeQuery(_query).then(\r\n\t\t\t(success)=>{\r\n\t\t\t\ttmpVar=[];\r\n\t\t\t\t_.each(success.results, (all)=>{\r\n\t\t\t\t\t//console.log(all.GLOBAL_INDIV_ID);\r\n\t\t\t\t\ttmpVar.push({\r\n\t\t\t\t\t\tGLOBAL_INDIV_ID: all.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\t//TIN: all.GLOBAL_INDIV_ID,\r\n\t\t\t\t\t\tGROUP: \"Test group\", \r\n\t\t\t\t\t\tLAST_NAME: all.LAST_NAME,\r\n\t\t\t\t\t\tFIRST_NAME: all.GIVEN_NAME,\r\n\t\t\t\t\t\tNICK_NAME: all.ALIAS,\r\n\t\t\t\t\t\t//PROJECT_NAME: \"Coming soon.\",\r\n\t\t\t\t\t\t//COUNTRY: \"PHILIPPINES\"\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.varFilterArray = tmpVar;\r\n\t\t\t\tthis.varFilterArrayLength = this.varFilterArray.length;\r\n\t\t\t}, \r\n\t\t\t(failed)=>{\r\n\t\t\t\t//console.log(failed);\r\n\t\t\t\ttoastr.error(failed, \"Failed loading Personnel Info\");\t\t\t\t\r\n\t\t\t})\r\n\t\t\t\r\n\t\t}, 500, this.currPredicate);\r\n\t}\r\n\t\r\n\tselectedPersonnel(item)\r\n\t{\r\n\t\tthis.obj_personnel.OBSERVERS.ppid_dialog.forEach((all)=>{\r\n\t\t\tall(item.GLOBAL_INDIV_ID);\r\n\t\t});\r\n\t\tthis.controller.ok();\r\n\t}\r\n\t\r\n\tfnKeyup(evt,item){\r\n\t\tif(evt.keyCode==13){\r\n\t\t\tif(this.varFilterArray.length==1)\r\n\t\t\t{\r\n\t\t\t\tthis.selectedPersonnel(this.varFilterArray[0]);\r\n\t\t\t\t//this.selectedBudget(this.varFilterArray[0]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\t\r\n\t\r\n\t\r\n}","\r\nimport { inject } from 'aurelia-framework';\r\nimport { cache_obj } from 'cache_obj';\r\nimport settings from 'settings';\r\n@inject(cache_obj)\r\nexport class actual_cost{\r\n    _cache_obj;\r\n    constructor(cache_obj) {\r\n        this._cache_obj = cache_obj;\r\n        //console.log(this._cache_obj.USER);\r\n    //  window.location.href=\"http://absppms2:8084/\";\r\n      //window.location.href=\"http://localhost:15253/\";\r\n  }\r\n\r\n}\r\n","import {bindable,inject} from 'aurelia-framework';\r\nimport { cache_budget } from 'ppfcs/cache_budget';\r\nimport { EntityManager, EntityQuery, generateID } from 'entity-manager-factory';\r\n//import {handle, Dispatcher} from 'aurelia-flux';  \r\nimport { getLookups } from 'masterfiles';\r\nimport {  substringMatcher } from 'helpers';\r\nimport typeahead from 'typeahead';\r\nimport settings from 'settings';\r\nimport _ from 'underscore';\r\nimport numeral from 'numeral';\r\nimport toastr from \"toastr\";\r\nimport { MultiObserver }from 'multi-observer';\r\nimport { paymentterm } from '../../modals/paymentterm';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport { cache_obj } from 'cache_obj';\r\n\r\n@inject(cache_obj,cache_budget,MultiObserver,DialogService)\r\nexport class GuestCustomElement {\r\n\r\n  @bindable to;\r\n  _cache_budget = null;\r\n  //_dispatcher;\r\n  _enableAdd=false;\r\n  _enableRemove=false;\r\n  _signal;\r\n  _PYMNTTERM;\r\n  dialogService = null;\r\n  _cache_obj = null;\r\n  constructor(cache_obj, cache_budget, multiObserver, dialogService) {\r\n      if (EntityManager() === undefined) {\r\n          return;\r\n      }\r\n\r\n    this._cache_budget = cache_budget;\r\n    this.dialogService=dialogService;\r\n    this._cache_obj = cache_obj;\r\n    \r\n    this._cache_obj.OBSERVERS.budget_dialog.push((val) => {\r\n      this.fnCheckBudget(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.copy_template_guest.push(() => {\r\n      this.fnCallCopy();\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.reset_all.push(() => {\r\n      this.resetView();\r\n    });\r\n\r\n    this._PYMNTTERM = getLookups().PAYMENT_TERM;\r\n\r\n  }\r\n  \r\n\r\n  fnModalPaymentTerm(){\r\n    this.dialogService.open({\r\n      viewModel: paymentterm\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        this.passTerm(response.output);\r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  passTerm(term) {\r\n      this._cache_budget.GUEST[0].PAYMENT_TERM=term.REF_DESC\r\n      this._cache_budget.GUEST[0].PYMNT_TERM_CD = term.REF_CD;\r\n  }\r\n\r\n  \r\n  //LoginPassed() {\r\n  //  this._PYMNTTERM = getLookups().PAYMENT_TERM;\r\n  //}\r\n\r\n  //@handle('budget.dialog')\r\n  fnCheckBudget(value) {\r\n\r\n    var _query = EntityQuery().from('BDGT_TMPL_GUEST_DTL').where('BDGT_TMPL_ID', '==', value);\r\n    EntityManager().executeQuery(_query).then((found) => {\r\n      \r\n        this._cache_budget.GUEST = found.results;\r\n      \r\n      var varRefCd = [];\r\n\r\n      _.each(this._cache_budget.GUEST, (item) => {\r\n\r\n        for (var i = 0; i <= this._PYMNTTERM.length - 1; ++i) {\r\n          if (this._PYMNTTERM[i].REF_CD == item.PYMNT_TERM_CD) {\r\n            item.PAYMENT_TERM = this._PYMNTTERM[i].REF_DESC;\r\n            break;\r\n          }\r\n        };\r\n\r\n        \r\n        item.PAY_RATE_FACTOR_TMP=numeral(item.PAY_RATE_FACTOR).format('0,0.00');\r\n        item.INPUT_AMT_TMP=numeral(item.INPUT_AMT).format('0,0.00');\r\n        item.visible=true;\r\n      });\r\n\r\n      this._enableAdd=false;\r\n      this._enableRemove=false;\r\n\r\n      if (this._cache_budget.GUEST.length==0)\r\n        this._enableAdd=true;\r\n      else\r\n        this._enableRemove=true;        \r\n\r\n\r\n      // this.fnReloadTypeahead();\r\n\r\n      //this._cache_budget.CALLER.ACTION='reset.summary';\r\n\r\n      this._cache_budget.OBSERVERS.reset_summary.forEach((all) => {\r\n        all();\r\n      });\r\n\r\n      if (this._cache_budget.GUEST.length>0)\r\n        toastr.success(\"GUEST PERSONNEL\", \"Loading Successful.\");\r\n      //this._dispatcher.dispatch('reset.summary');\r\n\r\n    });\r\n\r\n  }\r\n\r\n //@handle('copy.template')\r\n fnCallCopy()\r\n {\r\n   // console.log('passed');\r\n  //if (use==\"GUEST\") {\r\n    this.saveGuest();\r\n  //}\r\n}\r\n\r\n\r\n\r\n  // //CREATE typeahead on focus instead...........!!!!!!!!!!!!\r\n  // fnReloadTypeahead() {\r\n\r\n  //   $('.pymnttrmclass').typeahead('destroy');\r\n\r\n  //   var varCnt = 0;\r\n\r\n  //   _.each($(this.tblData).find(\".pymnttrmclass\"), (all) => {\r\n\r\n  //     $(all).attr(\"tableTermIndex\", varCnt);\r\n  //     ++varCnt;\r\n  //   });\r\n\r\n\r\n  //   $(\"input[tableTermIndex*='\" + 0 + \"']\")\r\n  //     .typeahead({\r\n  //       hint: false,\r\n  //       highlight: true,\r\n  //       minLength: 1,\r\n  //       limit: 10\r\n  //     }, {\r\n  //       source: substringMatcher(this._PYMNTTERM.map((item) => {\r\n  //         return item.REF_DESC\r\n  //       }))\r\n\r\n\r\n  //     });\r\n\r\n  // }\r\n\r\n  fnAddGuest(){\r\n      if (this._cache_budget.GUEST.length>0)\r\n    {\r\n          this._cache_budget.GUEST[0].visible=true;  \r\n    }\r\n    else\r\n          this._cache_budget.GUEST.push({INPUT_AMT_TMP:numeral(0).format('0,0.00'),PAY_RATE_FACTOR_TMP:numeral(1).format('0,0.00'),\r\n        INPUT_AMT:0,PAY_RATE_FACTOR:1,visible:true});\r\n\r\n      //delayed bec breeze is still processing\r\n      // setTimeout(()=>{\r\n      //   this.fnReloadTypeahead();\r\n      // },200);\r\n      \r\n\r\n      this._enableAdd=false;\r\n      this._enableRemove=true;\r\n      this._signal = generateID();\r\n    }\r\n\r\n    \r\n  //@handle('reset.all')\r\n  resetView() {\r\n    this._signal = generateID();\r\n  }\r\n  \r\n  fnRemoveGuest() {\r\n      if (this._cache_budget.GUEST.length > 0) {\r\n          this._cache_budget.GUEST[0].visible = false;\r\n    }\r\n\r\n    this._enableAdd = true;\r\n    this._enableRemove = false;\r\n    this._signal = generateID();\r\n  }\r\n\r\n  saveGuest(){\r\n\r\n\r\n      if (this._cache_budget.GUEST.length > 0) {\r\n          if (this._cache_budget.GUEST[0].PYMNT_TERM_CD == \"\" || this._cache_budget.GUEST[0] == undefined || this._cache_budget.GUEST[0] == null) {\r\n        toastr.error(\"<strong>Payment Term not defined</strong><br /><br />Saving cancelled.\", \"Problem occured\");\r\n        return;\r\n      }\r\n    }\r\n\r\n\r\n    var getMax = EntityQuery().from('BDGT_TMPL_GUEST_DTL').orderByDesc('BDGT_TMPL_GUEST_DTL_ID').take(1);\r\n    EntityManager().executeQuery(getMax).then((successMax) => {\r\n      var getMax = 1;\r\n\r\n      if (successMax.results.length > 0)\r\n        getMax = successMax.results[0].BDGT_TMPL_GUEST_DTL_ID + 1;\r\n\r\n\r\n      //console.log(this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n      var _query = EntityQuery().from('BDGT_TMPL_GUEST_DTL').where('BDGT_TMPL_ID', '==', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n      EntityManager().executeQuery(_query).then((found) => {\r\n\r\n        \r\n          if (this._cache_budget.GUEST.length>0)\r\n              if (this._cache_budget.GUEST[0].visible) {\r\n\r\n            if (found.results.length > 0) {\r\n\r\n                found.results[0].BDGT_AMT = parseFloat(this._cache_budget.GUEST[0].INPUT_AMT_TMP.replace(/,/g,''));\r\n                found.results[0].PYMNT_TERM_CD = this._cache_budget.GUEST[0].PYMNT_TERM_CD;\r\n                found.results[0].INPUT_AMT = parseFloat(this._cache_budget.GUEST[0].INPUT_AMT_TMP.replace(/,/g,''));\r\n                found.results[0].PAY_RATE_FACTOR = parseFloat(this._cache_budget.GUEST[0].PAY_RATE_FACTOR_TMP.replace(/,/g,''));\r\n                found.results[0].REMARKS = this._cache_budget.GUEST[0].REMARKS;\r\n                \r\n                found.results[0].LAST_UPDATED_BY = this._cache_obj.USER.USER_ID;\r\n                found.results[0].LAST_UPDATED_DT =  new Date();\r\n\r\n              \r\n            } else {\r\n\r\n              var varInsert = EntityManager().createEntity('BDGT_TMPL_GUEST_DTL', {\r\n                BDGT_TMPL_GUEST_DTL_ID: getMax,\r\n                PYMNT_TERM_CD: this._cache_budget.GUEST[0].PYMNT_TERM_CD,\r\n                INPUT_AMT: parseFloat(this._cache_budget.GUEST[0].INPUT_AMT_TMP.replace(/,/g,'')),\r\n                BDGT_AMT: parseFloat(this._cache_budget.GUEST[0].INPUT_AMT_TMP.replace(/,/g,'')),\r\n                PAY_RATE_FACTOR: parseFloat(this._cache_budget.GUEST[0].PAY_RATE_FACTOR_TMP.replace(/,/g,'')),\r\n                REMARKS: this._cache_budget.GUEST[0].REMARKS,\r\n                BDGT_TMPL_ID: this._cache_budget.HEADER.BDGT_TMPL_ID,\r\n                CREATED_BY: this._cache_obj.USER.USER_ID,\r\n                CREATED_DT: new Date(),\r\n                LAST_UPDATED_BY: this._cache_obj.USER.USER_ID,\r\n                LAST_UPDATED_DT: new Date()\r\n              });\r\n              \r\n              EntityManager().addEntity(varInsert);\r\n\r\n            }\r\n          }\r\n          else\r\n          {\r\n            if (found.results.length > 0)\r\n              found.results[0].entityAspect.setDeleted();\r\n          }\r\n\r\n\r\n          EntityManager().saveChanges().then((success) => {\r\n            this.fnCheckBudget(this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n            toastr.success(\"Succesfully Saved\", \"GUEST\");\r\n\r\n          }, (fail) => {\r\n\r\n            EntityManager().getEntities().forEach(function(entity) {\r\n              var errors = entity.entityAspect.getValidationErrors();\r\n              if (errors.length > 0)\r\n                console.log(errors);\r\n            });\r\n            console.log(fail);\r\n            toastr.error(\"Error Occured\",\r\n              fail);\r\n          });\r\n\r\n        });\r\n\r\n\r\n    });\r\n\r\n  }\r\n\r\n  fnRegularBlurEvt(item, index) {\r\n\r\n    // if($(\"input[tableTermIndex*='\" + index + \"']\").val()===undefined) return;\r\n\r\n\r\n    // this._cache_budget.GUEST[index].PAYMENT_TERM = $(\"input[tableTermIndex*='\" + index + \"']\").val().toUpperCase();\r\n\r\n    //   var varFound = this._PYMNTTERM.find((all) => {\r\n    //     return this._cache_budget.GUEST[index].PAYMENT_TERM.trim() == all.REF_DESC.trim();\r\n    //   });\r\n\r\n    //   if (varFound !== undefined) {\r\n    //     this._cache_budget.GUEST[index].PYMNT_TERM_CD = varFound.REF_CD;\r\n    //   } else\r\n    //     this._cache_budget.GUEST[index].PYMNT_TERM_CD = \"\";\r\n\r\n  }\r\n\r\n  fnRegularFocus(index, prop) {\r\n\r\n    this.fnModalPaymentTerm();\r\n    \r\n  }\r\n\r\n\r\n  // fnRegularFocus(index) {\r\n\r\n  //   // if ($(\"input[tableTermIndex*='\" + index + \"']\").attr(\"hasTypeahead\") !== undefined) {\r\n  //   //   return;\r\n  //   // }\r\n\r\n  //   // $(\"input[tableTermIndex*='\" + index + \"']\").attr(\"hasTypeahead\", \"true\");\r\n\r\n  //   $(\"input[tableTermIndex*='\" + index + \"']\").focus();\r\n\r\n  // }\r\n\r\n  AmountBlur(item, property) {\r\n    var varConverted = numeral(item[property]).format('0,0.00');\r\n    item[property] = varConverted;\r\n  }\r\n\r\n}","import {bindable,inject} from 'aurelia-framework';\r\nimport { cache_obj } from 'cache_obj';\r\nimport { cache_budget } from 'ppfcs/cache_budget';\r\nimport { EntityManager, EntityQuery, generateID} from 'entity-manager-factory';\r\n//import {handle, Dispatcher} from 'aurelia-flux';  \r\nimport { getLookups } from 'masterfiles';\r\nimport settings from 'settings';\r\n// import $ from 'jquery';\r\nimport {ModalWizard} from 'modals/modal-wizard';\r\nimport toastr from \"toastr\";\r\nimport moment from 'moment';\r\nimport _ from 'underscore';\r\nimport { MultiObserver }from 'multi-observer';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport { program } from '../../modals/program';\r\nimport { budget } from '../../modals/budget';\r\nimport { confirm_dialog } from '../../modals/confirm_dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n//import  datepicker  from 'bootstrap-datepicker';\r\n\r\n/*\r\n  NOTES\r\n  breeze.debug.js function getUriKey(aspect) is updated\r\n  fmtProperty(kps[0], aspect) is replaced by\r\n  fmtProperty(kps[0], aspect).replace(\"M\",\"\") because odata\r\n  is not accepting decimal with 'M' - decimal identity\r\n\r\n  example id 123M is being passed, accepted is 123\r\n  existing primary cannot be replaced to int from decimal bec. ppp is using it.\r\n  if breeze is updated, implement this again\r\n\r\n*/\r\n\r\n\r\n@inject(cache_obj,cache_budget,ModalWizard,toastr,MultiObserver,DialogService)\r\nexport class MainHeaderCustomElement {\r\n  \r\n  @bindable to;\r\n  _cache_obj = null;\r\n  _user;\r\n  //_dispatcher;\r\n  _PROGRAM_GENRE_MSTR=[];\r\n  _TELECAST_MODE_MSTR=[];\r\n  _EPISODE_TYPE_MSTR=[];\r\n  _STATIONS=[];\r\n  _STATUS;//=[\"DRAFT\",\"APPROVED\",\"CLOSED\",\"EXPIRED\"];\r\n  //@bindable modalBudget;\r\n  _COMPANY_ID;\r\n  _ModalWizard;\r\n  \r\n\r\n  _disableCreateBudget = false;\r\n  _disableCancelBudget=true;\r\n  _disableRefreshBudget=true;\r\n  _disableSaveBudget=true;\r\n  _disableBudgetId=false;\r\n  _disablePrintBudget=true;\r\n  _disableCopyBudget=true;\r\n  dialogService=null;\r\n  programDisabled=true;\r\n  budgetDisabled=false;\r\n\r\n  \r\n\r\n  constructor(cache_obj,cache_budget,ModalWizard,toastr,multiObserver,DialogService) {\r\n      if (EntityManager() === undefined) {\r\n         \r\n          return;\r\n      }\r\n\r\n    this.dialogService=DialogService;\r\n    this._cache_obj = cache_obj;\r\n    this._cache_budget = cache_budget;\r\n    \r\n\r\n    this.LoginPassed(this._cache_obj.USER);\r\n    \r\n    this._cache_obj.OBSERVERS.budget_dialog.push((val) => {\r\n      this.CloseBudgetDialog(val);\r\n    });\r\n\r\n    this._cache_obj.OBSERVERS.pass_program.push((val) => {\r\n      this.PassedProgram(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.budget_refresh.push(() => {\r\n      this.fnBudgetRefreshHandle();\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.budget_loaded.push(() => {\r\n       if(this._disableSaveBudget==true)\r\n       {\r\n          this._disableSaveBudget = false;\r\n          this._disableCopyBudget = false;\r\n          settings.isNavigating = false;\r\n          toastr.success(\"Budget has been successfully loaded.\", \"Budget Template\");\r\n       }\r\n    });\r\n\r\n    this._toastr = toastr;\r\n    \r\n    \r\n   // this._dispatcher=Dispatcher;\r\n    this.fnClearHeader();\r\n\r\n\r\n    this._disableCreateBudget = false;\r\n    this._disableCancelBudget=true;\r\n    this._disableRefreshBudget=true;\r\n    this._disableSaveBudget=true;\r\n    this._disableBudgetId=false;\r\n    this._disablePrintBudget=true;\r\n    this._disableCopyBudget=true;\r\n    this._ModalWizard = ModalWizard;\r\n\r\n    \r\n    //this.fnExecuteDatePicker();\r\n    setTimeout(() => {\r\n      \r\n       $('.datepicker').datepicker();\r\n         \r\n      $('#refFrom').datepicker({\r\n          format: \"mm/dd/yyyy\"\r\n        })\r\n        .on(\"changeDate\", () => {\r\n\r\n          if (new Date($('#refFrom').val()) > new Date($('#refTo').val())) {\r\n            toastr.error(\"Invalid date range.\", \"Date Change..\");\r\n            $('#refTo').datepicker(\"setValue\", new Date($('#refFrom').val()));\r\n            return;\r\n          }\r\n\r\n          this._cache_budget.HEADER.BDGT_FROM = $('#refFrom').val();\r\n          if(this._cache_budget.HEADER.BDGT_TO==\"\")\r\n          {\r\n              this._cache_budget.HEADER.BDGT_TO=this._cache_budget.HEADER.BDGT_FROM;\r\n          }\r\n\r\n          $('#refFrom').datepicker('hide');\r\n        });\r\n\r\n\r\n      $('#refTo').datepicker({\r\n          format: \"mm/dd/yyyy\"\r\n        })\r\n        .on(\"changeDate\", () => {\r\n\r\n          if (new Date($('#refTo').val()) < new Date($('#refFrom').val())) {\r\n            toastr.error(\"Invalid date range.\", \"Date Change..\");\r\n            $('#refFrom').datepicker(\"setValue\", new Date($('#refTo').val()));\r\n            return;\r\n          }\r\n\r\n          this._cache_budget.HEADER.BDGT_TO = $('#refTo').val();\r\n          $('#refTo').datepicker('hide');\r\n        });\r\n    }, 1000);\r\n    \r\n\r\n    //UPDATE EXPIRED BUDGET    \r\n    var varToday = new Date(Date.now());\r\n    var p1 = breeze.Predicate.create('BDGT_TO', '<=', new Date(varToday.getFullYear(), varToday.getMonth(), varToday.getDate()));\r\n    var p2 = breeze.Predicate.create('APPR_STAT_CD', '==', \"APP-APPROVED\");\r\n    var pred = breeze.Predicate.and([p1, p2]);\r\n\r\n\r\n    var checkExpired = EntityQuery().from('BDGT_TMPL_HDR').where(pred);\r\n    \r\n    \r\n    EntityManager().executeQuery(checkExpired).then((success) => {\r\n      success.results.forEach((all) => {\r\n        //console.log(all);\r\n        all.APPR_STAT_CD=\"APP-EXPIRED\";\r\n        all.LAST_UPDATED_BY=\"ADMIN\";\r\n        all.LAST_UPDATED_DT= new Date(Date.now());\r\n      });\r\n\r\n      EntityManager().saveChanges().then((success) => {\r\n      //  console.log(success);\r\n      }, (fail) => {\r\n        console.log(fail);\r\n      });\r\n    });\r\n\r\n  }\r\n\r\n  /////cannot use this bec first value is undefined before correct data will be placed by datepicker\r\n  checkDate(id){\r\n\r\n     setTimeout(() => {\r\n     // console.log($(\"#\"+id).val());\r\n     // console.log(Date.parse($(\"#\"+id).val()));\r\n      if(!Date.parse($(\"#\"+id).val()))\r\n      {\r\n        toastr.error(\"Invalid starting date \", \"Date Change..\");  \r\n      }\r\n      else\r\n      {\r\n        $(\"#\"+id).datepicker(\"setValue\", new Date($(\"#\"+id).val()));\r\n      }\r\n\r\n     },1000);\r\n    \r\n    // if(!moment($('#refFrom').val(),'MM-DD-YYYY',true).isValid()){\r\n    //     item\r\n    // }\r\n    // console.log(moment($('#refFrom').val(),'MM-DD-YYYY')._i);\r\n    //   this._cache_budget.HEADER.BDGT_FROM=moment($('#refFrom').val(),'MM-DD-YYYY');\r\n  }\r\n\r\n\r\n  validate() {\r\n\r\n    // var _query = EntityQuery().from('BDGT_TMPL_HDR').where('BDGT_TMPL_ID', '==', '0');\r\n    // this._cache_budget = EntityManager().executeQueryLocally(_query)[0]; //if has offline;\r\n    // //console.log(EntityManager().executeQueryLocally(_query));\r\n    // EntityManager().executeQuery(_query).then((found) => {\r\n    \r\n    // });\r\n  }\r\n\r\n\r\n  inputChanged(evt, value) {\r\n    if (evt.keyCode == 13) {\r\n\r\n    // this._cache_budget.CALLER.VALUE1=this._cache_budget.HEADER.BDGT_TMPL_ID; \r\n    // this._cache_budget.CALLER.ACTION='budget.dialog';\r\n\r\n\r\n    this._cache_obj.OBSERVERS.budget_dialog.forEach((all)=>{\r\n      all(this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n    });\r\n\r\n      // this._dispatcher.dispatch('budget.dialog', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n    }\r\n  }\r\n    \r\n  //@handle('login.passed')\r\n  LoginPassed(user) {\r\n\r\n    if(user.USER_ID==undefined) return;\r\n    this._user = user.USER_ID;\r\n    this._COMPANY_ID = user.COMPANY_ID;\r\n\r\n   \r\n\r\n    this.budgetDisabled=false;\r\n\r\n    // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n    //   all(this.modalBudget.id, true);\r\n    // });\r\n    \r\n    this.programDisabled=true;\r\n    // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n    //   all(this.modalProgram.id, false);\r\n    // });\r\n\r\n   \r\n    this.fnClearBudget();\r\n\r\n    this._disableCreateBudget=false;\r\n    this._disableCancelBudget=true;\r\n    this._disableRefreshBudget=true;\r\n    this._disableSaveBudget=true;\r\n    this._disablePrintBudget=true;\r\n    this._disableCopyBudget=true;\r\n  }\r\n\r\n  //@handle('loggedout')\r\n  LoggedOut()\r\n  {\r\n    \r\n    this._disableCreateBudget = true;\r\n    this._disableCancelBudget = true;\r\n    this._disableRefreshBudget = true;\r\n    this._disableSaveBudget = true;\r\n    this._disablePrintBudget = true;\r\n    this._disableCopyBudget=true;\r\n\r\n    this.budgetDisabled=false;\r\n    // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n    //   all(this.modalBudget.id, false);\r\n    // });\r\n\r\n    this.programDisabled=true;\r\n    // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n    //   all(this.modalProgram.id, false);\r\n    // });\r\n\r\n    //this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n    //this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, false);\r\n\r\n    this.fnClearHeader();\r\n  }\r\n\r\n  fnClearHeader(){\r\n     //var PROGRAM_MSTR={PROGRAM_TITLE:\"\"}  ;\r\n     this._cache_budget.HEADER = {\r\n      BDGT_TMPL_ID:\"\",\r\n      //PROGRAM_MSTR.PROGRAM_TITLE:\"\",\r\n      CHARGE_CD:\"\",\r\n      PROGRAM_GENRE_CD:\"\",\r\n      TELECAST_MODE_CD:\"\",\r\n      EPISODE_TYPE_CD:\"\",\r\n      EPISODES:\"\",\r\n      TAPING_DAYS:\"\",\r\n      BDGT_FROM:\"\",\r\n      BDGT_TO:\"\",\r\n      STATION_ID:\"\",\r\n      APPR_STAT_CD:\"\",\r\n      REMARKS:\"\"\r\n   };\r\n\r\n    while (this._cache_budget.REGULAR.length > 0) {\r\n      this._cache_budget.REGULAR.pop();\r\n    }\r\n    this._cache_budget.REGULAR=[];\r\n\r\n    while (this._cache_budget.SEMI_REGULAR.length > 0) {\r\n      this._cache_budget.SEMI_REGULAR.pop();\r\n    }\r\n    this._cache_budget.SEMI_REGULAR = [];\r\n   \r\n    while (this._cache_budget.STAFF.length > 0) {\r\n      this._cache_budget.STAFF.pop();\r\n    }\r\n    this._cache_budget.STAFF = [];\r\n\r\n    while (this._cache_budget.GUEST.length > 0) {\r\n      this._cache_budget.GUEST.pop();\r\n    }\r\n\r\n    this._cache_budget.GUEST = [];\r\n\r\n    this._cache_budget.OBSERVERS.reset_summary.forEach((all) => {\r\n      all();\r\n    });\r\n\r\n      \r\n    this._disableBudgetId=false;\r\n\r\n     this._cache_budget.OBSERVERS.reset_all.forEach((all) => {\r\n      all();\r\n    });\r\n\r\n    \r\n  }\r\n\r\n  fnClearBudget(){\r\n    this.fnClearHeader();\r\n\r\n    this._PROGRAM_GENRE_MSTR=getLookups().PROGRAM_GENRE_MSTR;\r\n    this._PROGRAM_GENRE_MSTR.unshift({});\r\n    this._TELECAST_MODE_MSTR=getLookups().TELECAST_MODE_MSTR;\r\n    this._TELECAST_MODE_MSTR.unshift({});\r\n    this._EPISODE_TYPE_MSTR=getLookups().EPISODE_TYPE_MSTR;\r\n    this._EPISODE_TYPE_MSTR.unshift({});\r\n    this._STATIONS=settings.STATIONS;\r\n\r\n    this._STATUS=[{}];\r\n    // getLookups().REFERENCE_CD_MSTR.forEach((item)=>{\r\n    //   if(item.REF_GRP_CD=='APPR_STAT_CD')\r\n    //   {\r\n    //       this._STATUS.push(item);\r\n    //       console.log(item);\r\n    //   }\r\n    // });\r\n  }\r\n\r\n  //@handle('budget.dialog')\r\n  CloseBudgetDialog(value) {\r\n      \r\n    var _query = EntityQuery().from('BDGT_TMPL_HDR').where('BDGT_TMPL_ID', '==', value).expand('PROGRAM_MSTR').select('BDGT_TMPL_ID, PROGRAM_MSTR, CHARGE_CD, PROGRAM_GENRE_CD,  TELECAST_MODE_CD,  EPISODE_TYPE_CD,   EPISODES,  TAPING_DAYS, BDGT_FROM, BDGT_TO, STATION_ID, APPR_STAT_CD, REMARKS, CREATED_BY, LAST_UPDATED_BY ');\r\n\r\n    EntityManager().executeQuery(_query).then((found) => {\r\n \r\n        this._STATUS=[{REF_CD:\"APP-DRAFT\",REF_DESC:\"APP-DRAFT\"},{REF_CD:\"APP-APPROVED\",REF_DESC:\"APP-APPROVED\"}];       \r\n        \r\n        if(found.results.length==0) return;\r\n\r\n        this._cache_budget.HEADER = found.results[0];\r\n\r\n        this._cache_budget.HEADER.BDGT_FROM=moment(new Date(this._cache_budget.HEADER.BDGT_FROM)).format('MM-DD-YYYY');\r\n        this._cache_budget.HEADER.BDGT_TO=moment(new Date(this._cache_budget.HEADER.BDGT_TO)).format('MM-DD-YYYY');\r\n        \r\n        this._disableBudgetId=true;\r\n        //update buttons\r\n        this._disableCreateBudget=true;\r\n        this._disableCancelBudget=false;\r\n        this._disableRefreshBudget=false;\r\n\r\n        this._cache_budget._LOADING_BUDGET=1;\r\n        this._disableSaveBudget=true;\r\n        \r\n        this._disablePrintBudget = false;\r\n        this._disableCopyBudget=true;\r\n\r\n        this.budgetDisabled=true;        \r\n        // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n        //   all(this.modalBudget.id, false);\r\n        // });\r\n\r\n        //this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n\r\n        if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-CLOSED\")\r\n        {\r\n          this._STATUS=[{REF_CD:\"APP-CLOSED\",REF_DESC:\"APP-CLOSED\"}];\r\n          this._disableSaveBudget = true;\r\n          //this._disablePrintBudget = true;\r\n        }\r\n        else if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-EXPIRED\")\r\n        {\r\n          this._STATUS=[{REF_CD:\"APP-EXPIRED\",REF_DESC:\"APP-EXPIRED\"}];\r\n          this._disableSaveBudget = true;\r\n          this._disablePrintBudget = true;\r\n          //this._disableCopyBudget=false;\r\n        }\r\n        else if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-DRAFT\")\r\n        {\r\n          \r\n          this.programDisabled=false;\r\n          // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n          //   all( this.modalProgram.id, true);\r\n          // });\r\n\r\n          //this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n\r\n\r\n\r\n          this._cache_budget.OBSERVERS.enable_approved.forEach((all) => {\r\n            all(true);\r\n          });\r\n\r\n          //this._dispatcher.dispatch('enable.approved',true);\r\n        }\r\n        else\r\n        {\r\n\r\n            this._cache_budget.OBSERVERS.enable_approved.forEach((all) => {\r\n              all(false);\r\n            });\r\n\r\n            //this._dispatcher.dispatch('enable.approved', false);\r\n        }\r\n\r\n         if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-APPROVED\")\r\n         {\r\n\r\n            this._cache_budget.STATUS=\"APPROVED\";\r\n            this._disableSaveBudget=true;\r\n\r\n            this.programDisabled=true;\r\n            // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n            //   all(this.modalProgram.id, false);\r\n            // });\r\n\r\n            //this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, false);\r\n         }\r\n         // else if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-APPROVED\")\r\n         // {\r\n         //    this._cache_budget.STATUS=\"EXPIRED\";\r\n         // }\r\n         else\r\n            this._cache_budget.STATUS=\"VIEW\";\r\n\r\n         \r\n        this._cache_budget.OBSERVERS.disable_search_personnel.forEach((all) => {\r\n            all(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-DRAFT\");\r\n        });         \r\n\r\n    },(fail)=>{\r\n      console.log(fail);\r\n\r\n    });\r\n\r\n  }\r\n\r\n  \r\n\r\n\r\n  //@handle('pass.program')\r\n  PassedProgram(value) {\r\n    this._cache_budget.HEADER.PROGRAM_MSTR=value;\r\n    this._cache_budget.HEADER.CHARGE_CD=value.PROGRAM_CD;\r\n\r\n\r\n    // if (this.modalProgram.id == this._ModalWizard.ids[this._ModalWizard.ids.length-1]) {\r\n    //   this._ModalWizard.ids.pop();\r\n\r\n    //   this._cache_budget.OBSERVERS.close_modal.forEach((all)=>{\r\n    //     all(this.modalProgram.id);\r\n    //   });\r\n\r\n    // }\r\n  }\r\n\r\n\r\n  //@handle('budget.refresh')\r\n  fnBudgetRefreshHandle()\r\n  {\r\n      this.fnBudget(\"refresh\");\r\n  }\r\n\r\n  \r\n  fnBudget(call){\r\n\r\n    switch(call)\r\n    {\r\n      case \"create\":\r\n      {\r\n        this._disableCreateBudget=true;\r\n        this._disableCancelBudget=false;\r\n        this._disableRefreshBudget=true;\r\n        this._disableSaveBudget=false;\r\n        this._disableBudgetId=true;\r\n        this._disablePrintBudget = true;\r\n\r\n\r\n        this.budgetDisabled=true;\r\n        this.programDisabled=false;\r\n        // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n        //   all(this.modalBudget.id, false);\r\n        //   all(this.modalProgram.id, true);\r\n        // });\r\n\r\n    \r\n        this._cache_budget.STATUS=\"CREATE\";\r\n        this._STATUS=[{REF_CD:\"APP-DRAFT\",REF_DESC:\"APP-DRAFT\"}];\r\n\r\n        this.fnDialogProgram();\r\n\r\n        break;\r\n      }\r\n      case \"cancel\":\r\n      {\r\n        this.fnClearHeader();\r\n        this._disableCreateBudget=false;\r\n        this._disableCancelBudget=false;\r\n        this._disableRefreshBudget=true;\r\n        this._disableSaveBudget=true;\r\n        this._disablePrintBudget = true;\r\n\r\n        this.budgetDisabled=false;\r\n        this.programDisabled=true;\r\n        // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n        //   all(this.modalBudget.id, true);\r\n        //   all(this.modalProgram.id, false);\r\n        // });\r\n\r\n        // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, false);\r\n        // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, true);\r\n        this._cache_budget.STATUS=\"NONE\";\r\n        break;\r\n      }\r\n      case \"refresh\":\r\n      {\r\n\r\n        this._disableCreateBudget=true;\r\n        this._disableSaveBudget=false;\r\n        this._disableCancelBudget=false;\r\n        this._disableRefreshBudget=false;\r\n        this._disablePrintBudget = true;\r\n    \r\n        this._cache_obj.OBSERVERS.budget_dialog.forEach((all) => {\r\n          all(this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n        });\r\n\r\n        this.budgetDisabled=true;\r\n        this.programDisabled=false;\r\n        // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n        //   all(this.modalBudget.id, false);\r\n        //   all(this.modalProgram.id, true);\r\n        // });\r\n\r\n        // this._dispatcher.dispatch('budget.dialog', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n        // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n        // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n\r\n        break;\r\n      }\r\n      case \"save\":\r\n      {\r\n       \r\n        this.fnSaveBudget(\"\");\r\n\r\n        break;\r\n      }\r\n      case \"print\":\r\n      {\r\n\r\n        var varUseReport=\"\";\r\n        if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-DRAFT\")\r\n        {\r\n            varUseReport=\"Draft\";\r\n        }\r\n        if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-APPROVED\")\r\n        {\r\n            varUseReport=\"Approved\";\r\n        }\r\n\r\n\r\n        if(varUseReport!=\"\")\r\n        {\r\n           // var popup = window.open(\"http://absppms:8080/ReportServer/Pages/ReportViewer.aspx?%2fPPID+Reports%2fBudget_Print&rs:Command=Render&Actual_Cost_id=\"+this._cache_budget.HEADER.BDGT_TMPL_ID+\"&isConfidential=\"+this._cache_obj.ALLOW_PASS_CONFIDENTIAL+\"\", \"popupWindow\", \"width=1280px,height=1024px,scrollbars=yes,directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,addressbar=0,fullscreen=false\");\r\n            var popup = window.open(settings.actualCostWebUrl+\"/report/Budget_\"+varUseReport+\"_Report.aspx?BDID=\"+this._cache_obj.HEADER.BDGT_TMPL_ID+\"&ConcealConfidentialBudgetAmt=\"+this._cache_obj.ALLOW_PASS_CONFIDENTIAL+\"&USER_ACCOUNT=\"+this._user+\"&COMPANY_ID=\"+this._COMPANY_ID, \"popupWindow\", \"width=1280px,height=1024px,scrollbars=yes,directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,addressbar=0,fullscreen=false\");\r\n           popup.moveTo(0, 0);\r\n        }\r\n        \r\n        \r\n         break;\r\n      }\r\n      case \"copy\":\r\n      {\r\n        \r\n\r\n                this.dialogService.open({ viewModel: confirm_dialog, model: 'Copy Template?' }).whenClosed(response => {\r\n          if (!response.wasCancelled) {\r\n             //console.log(response.output);\r\n\r\n\r\n              var varGetHeader = EntityQuery().from('BDGT_TMPL_HDR').where('BDGT_TMPL_ID', '==', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n\r\n              EntityManager().executeQuery(varGetHeader).then((found) => {\r\n                found.results[0].APPR_STAT_CD = \"APP-CLOSED\";\r\n                EntityManager().saveChanges().then((success) => {\r\n\r\n                  this._cache_budget.HEADER.BDGT_TMPL_ID = \"\";\r\n                  this._cache_budget.HEADER.APPR_STAT_CD = \"APP-DRAFT\";\r\n                  this._cache_budget.STATUS = \"DRAFT\";\r\n                  this._cache_budget.IS_COPYING = true;\r\n                  \r\n                  this.fnSaveBudget(\"\");\r\n\r\n                });\r\n              });\r\n\r\n            \r\n\r\n\r\n          } else {\r\n            \r\n          }\r\n         \r\n        });\r\n\r\n      }\r\n      break;\r\n      case \"close\":{\r\n\r\n            this.dialogService.open({ viewModel: confirm_dialog, model: 'Close Template?' }).whenClosed(response => {\r\n          if (!response.wasCancelled) {\r\n            \r\n                //this._cache_budget.HEADER.APPR_STAT_CD='APP-CLOSED';\r\n                this.fnSaveBudget('APP-CLOSED');\r\n           \r\n            \r\n          } else {\r\n            \r\n          }\r\n         \r\n        });\r\n\r\n      }\r\n      break;\r\n\r\n\r\n    }\r\n  }\r\n\r\n\r\n  fnBudgetValidation_1(){\r\n   \r\n      return new Promise((resolve,reject)=>{ \r\n\r\n    var varSubMin = new Date(this._cache_budget.HEADER.BDGT_FROM);\r\n      var varAddMin = new Date(this._cache_budget.HEADER.BDGT_TO);\r\n      \r\n      console.log(new Date(varSubMin.getFullYear(), varSubMin.getMonth(), varSubMin.getDate() - 1));\r\n      console.log(new Date(varAddMin.getFullYear(), varAddMin.getMonth(), varAddMin.getDate() + 1));\r\n\r\n      var p1 = breeze.Predicate.create('BDGT_FROM', '>=', new Date(varSubMin.getFullYear(), varSubMin.getMonth(), varSubMin.getDate() - 1));\r\n      var p2 = breeze.Predicate.create('BDGT_TO', '<=', new Date(varAddMin.getFullYear(), varAddMin.getMonth(), varAddMin.getDate() + 1));\r\n      var p3 = breeze.Predicate.create('BDGT_TMPL_ID', '!=', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n      var p4 = breeze.Predicate.create('EPISODE_TYPE_CD', '==', this._cache_budget.HEADER.EPISODE_TYPE_CD);\r\n      var pred = breeze.Predicate.and([p1, p2, p3, p4]);\r\n      \r\n      var strException=\"\";\r\n      var varFromMax = null;\r\n      var varToMax = null;\r\n      var _query = EntityQuery().from('BDGT_TMPL_HDR').where(pred);\r\n      EntityManager().executeQuery(_query).then((found) => {\r\n        if (found.results !== undefined) {\r\n          var countError=0;\r\n          found.results.forEach((all) => {\r\n            if(all.APPR_STAT_CD!=null)\r\n            if (all.APPR_STAT_CD.includes('EXPIRE') || all.APPR_STAT_CD.includes('CLOSE')) {\r\n              console.log(all);\r\n              \r\n              if(varFromMax==null || varFromMax>all.BDGT_FROM)\r\n              {\r\n                varFromMax=all.BDGT_FROM;\r\n              }\r\n\r\n              if(varToMax==null || varToMax<all.BDGT_TO)\r\n              {\r\n                varToMax=all.BDGT_TO;\r\n              }\r\n\r\n\r\n              ++countError; \r\n            }\r\n          });\r\n\r\n          if(countError>0)\r\n          {\r\n            toastr.error(\"Budget can only be acceptable if date will be out of range of the last CLOSED/EXPIRED TEMPLATE\");\r\n            toastr.error(\"Not in between \"  +  varFromMax.getMonth() + \"-\" + varFromMax.getDate() +  \"-\" + varFromMax.getFullYear() + \" and \"  + varToMax.getMonth() + \"-\" + varToMax.getDate() +  \"-\" + varToMax.getFullYear() );\r\n            reject(false); \r\n          }\r\n          else\r\n            resolve(true);\r\n\r\n        }\r\n        else\r\n          resolve(true);\r\n      });\r\n\r\n          \r\n\r\n      });\r\n\r\n  }\r\n\r\n  fnBudgetValidation_2(){\r\n\r\n     return new Promise((resolve,reject)=>{ \r\n\r\n      var varAddMin = new Date(this._cache_budget.HEADER.BDGT_TO);\r\n      var varSubMin = new Date(this._cache_budget.HEADER.BDGT_FROM);\r\n\r\n      var p3 = breeze.Predicate.create('BDGT_TMPL_ID', '!=', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n      var c1 = breeze.Predicate.create('BDGT_TMPL_HDR.PROGRAM_ID', '==', this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_ID)\r\n\r\n      var pred2 = breeze.Predicate.and([c1, p3]);\r\n      var _queryCheckActual = EntityQuery().from('ACTUAL_COST_HDR').where(pred2).expand(\"BDGT_TMPL_HDR\");\r\n      EntityManager().executeQuery(_queryCheckActual).then((found) => {\r\n\r\n        if (found.results !== undefined) {\r\n\r\n              var varPromises = [];\r\n              found.results.forEach((all) => {\r\n\r\n\r\n                var newPromise = new Promise((resolve_2, reject_2) => {\r\n\r\n                  var varTmpFrom = new Date(all.ACTUAL_FROM.getFullYear(), all.ACTUAL_FROM.getMonth(), all.ACTUAL_FROM.getDate());\r\n                  var varTmpTo = new Date(all.ACTUAL_TO.getFullYear(), all.ACTUAL_TO.getMonth(), all.ACTUAL_TO.getDate());\r\n\r\n                if ((varTmpFrom <= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n                      (varTmpTo <= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpTo >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n                      (varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n                      (varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpTo <= new Date(this._cache_budget.HEADER.BDGT_TO))\r\n                    ) {\r\n                      toastr.error(\"Please enter range beyond the created budget (AC:\" + all.ACTUAL_COST_ID + \")\");\r\n                      reject_2(false); \r\n                    }\r\n\r\n\r\n\r\n                  var _queryCheckVtr = EntityQuery().from('VTR_LIVE_DT_DTL').where('ACTUAL_COST_ID', '==', all.ACTUAL_COST_ID);\r\n                  EntityManager().executeQuery(_queryCheckVtr).then((foundVtr) => {\r\n\r\n                    if (foundVtr.results === undefined) {\r\n                      resolve_2(true);\r\n                    }\r\n\r\n                    var varDataFromCompare = new Date(this._cache_budget.HEADER.BDGT_FROM);\r\n                    var varDataToCompare = new Date(this._cache_budget.HEADER.BDGT_FROM);\r\n\r\n                    var varMaxDate = null;\r\n                    foundVtr.results.forEach((allDate) => {\r\n\r\n                      //var varVtr = new Date(all.VTR_LIVE_DT.getFullYear(), all.VTR_LIVE_DT.getMonth(), all.VTR_LIVE_DT.getDate());\r\n                        var varVtr = moment(new Date(allDate.VTR_LIVE_DT)).format('MM-DD-YYYY');\r\n                        var varDateCompare = new Date(varVtr);\r\n\r\n                        if (varDataFromCompare <= varDateCompare && varDateCompare <= varDataToCompare) {\r\n                        if (varMaxDate == null)\r\n                          varMaxDate = varVtr;\r\n                        else if (varMaxDate < varVtr)\r\n                          varMaxDate = varVtr;\r\n\r\n                        //toastr.error(\"Please enter range beyond the created budget (AC:\" + all.ACTUAL_COST_ID + \")\");\r\n                      }\r\n                    });\r\n\r\n                    if (varMaxDate == null) {\r\n                      resolve_2(true);\r\n                    } else {\r\n                      var new_date = moment(varMaxDate, \"MM-DD-YYYY\");\r\n                      new_date.add(1, 'days');\r\n                      new_date = moment(new Date(new_date)).format('MM-DD-YYYY');\r\n                      toastr.error(\"An existing ActualCost with Id (\" + all.ACTUAL_COST_ID + \") is using this budget template. <br>BudgetId (\" + all.BDGT_TMPL_ID + \") with status (\" + all.BDGT_TMPL_HDR.APPR_STAT_CD.replace(\"APP-\", \"\") + \").\" +\r\n                        \" Either open the existing Budget Template and create a Copy, or start the validity on \" + new_date);\r\n\r\n                      reject_2(false);\r\n                    }\r\n\r\n             \r\n                  });\r\n\r\n\r\n                });\r\n\r\n                varPromises.push(newPromise);\r\n\r\n\r\n\r\n              });\r\n\r\n              Promise.all(varPromises).then((passed) => {\r\n                resolve(true);\r\n              }, (fail) => {\r\n                reject(false);\r\n                //reject(fail);\r\n              });\r\n\r\n\r\n          // found.results.forEach((all) => {\r\n\r\n\r\n          //   var varTmpFrom = new Date(all.ACTUAL_FROM.getFullYear(), all.ACTUAL_FROM.getMonth(), all.ACTUAL_FROM.getDate());\r\n          //   var varTmpTo = new Date(all.ACTUAL_TO.getFullYear(), all.ACTUAL_TO.getMonth(), all.ACTUAL_TO.getDate());\r\n\r\n          //   if ((varTmpFrom <= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n          //     (varTmpTo <= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpTo >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n          //     (varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n          //     (varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpTo <= new Date(this._cache_budget.HEADER.BDGT_TO))\r\n          //   ) {\r\n          //     toastr.error(\"Please enter range beyond the created budget (AC:\" + all.ACTUAL_COST_ID + \")\");\r\n          //     reject(false); \r\n          //   }\r\n\r\n\r\n\r\n          //   var _queryCheckVtr = EntityQuery().from('VTR_LIVE_DT_DTL').where('ACTUAL_COST_ID', '==', all.ACTUAL_COST_ID);\r\n          //   EntityManager().executeQuery(_queryCheckVtr).then((foundVtr) => {\r\n\r\n          //     var varMaxDate = null;\r\n          //     foundVtr.results.forEach((allDate) => {\r\n\r\n          //       //var varVtr = new Date(all.VTR_LIVE_DT.getFullYear(), all.VTR_LIVE_DT.getMonth(), all.VTR_LIVE_DT.getDate());\r\n          //       var varVtr = moment(new Date(allDate.VTR_LIVE_DT)).format('MM-DD-YYYY');\r\n          //       if (this._cache_budget.HEADER.BDGT_FROM >= varVtr && varVtr <= this._cache_budget.HEADER.BDGT_TO) {\r\n          //         if (varMaxDate == null)\r\n          //           varMaxDate = varVtr;\r\n          //         else if (varMaxDate < varVtr)\r\n          //           varMaxDate = varVtr;\r\n\r\n          //       }\r\n          //     });\r\n\r\n          //     if (varMaxDate !== null && (all.BDGT_TMPL_HDR.APPR_STAT_CD == \"APP-EXPIRED\" || all.BDGT_TMPL_HDR.APPR_STAT_CD == \"APP-CLOSED\" || all.BDGT_TMPL_HDR.APPR_STAT_CD == \"APP-APPROVED\")) {\r\n          //       var new_date = moment(varMaxDate, \"DD-MM-YYYY\").add(1, 'days');\r\n          //       new_date = moment(new Date(new_date)).format('MM-DD-YYYY');\r\n          //       toastr.error(\"An existing ActualCost with Id (\" + all.ACTUAL_COST_ID + \") is using this budget template. <br>BudgetId (\" + all.BDGT_TMPL_ID + \") with status (\" + all.BDGT_TMPL_HDR.APPR_STAT_CD.replace(\"APP-\", \"\") + \").\" +\r\n          //         \" Either open the existing Budget Template and create a Copy, or start the validity on \" + new_date);\r\n\r\n          //        reject(false); \r\n          //     }\r\n\r\n          //   });\r\n\r\n          // });\r\n\r\n\r\n\r\n        }\r\n        else\r\n            resolve(true); \r\n\r\n      });\r\n\r\n\r\n\r\n\r\n       \r\n\r\n      });\r\n\r\n\r\n\r\n  }\r\n\r\n  fnValidation_Approved(){\r\n\r\n    return new Promise((resolve,reject) => \r\n    {\r\n      var p3 = breeze.Predicate.create('BDGT_TMPL_ID', '!=', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n      var c1 = breeze.Predicate.create('BDGT_TMPL_HDR.PROGRAM_ID', '==', this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_ID);\r\n      var c2 = breeze.Predicate.create('APPR_STAT_CD', '==', \"APP-APPROVED\");\r\n      var pred2 = breeze.Predicate.and([c1, c2, p3]);\r\n      var _queryCheckActual = EntityQuery().from('ACTUAL_COST_HDR').where(pred2).expand(\"BDGT_TMPL_HDR\");\r\n      EntityManager().executeQuery(_queryCheckActual).then((found) => {\r\n\r\n        if (found.results !== undefined) {\r\n\r\n          var varPromises=[];\r\n          found.results.forEach((all) => {\r\n\r\n\r\n             var newPromise =  new Promise((resolve_2, reject_2) => {\r\n\r\n              var varTmpFrom = new Date(all.ACTUAL_FROM.getFullYear(), all.ACTUAL_FROM.getMonth(), all.ACTUAL_FROM.getDate());\r\n              var varTmpTo = new Date(all.ACTUAL_TO.getFullYear(), all.ACTUAL_TO.getMonth(), all.ACTUAL_TO.getDate());\r\n\r\n\r\n\r\n              var _queryCheckVtr = EntityQuery().from('VTR_LIVE_DT_DTL').where('ACTUAL_COST_ID', '==', all.ACTUAL_COST_ID);\r\n              EntityManager().executeQuery(_queryCheckVtr).then((foundVtr) => {\r\n\r\n                if (foundVtr.results === undefined) {\r\n                   resolve_2(true);\r\n                }\r\n\r\n                var varMaxDate = null;\r\n\t        var varDataFromCompare = new Date(this._cache_budget.HEADER.BDGT_FROM);\r\n                var varDataToCompare = new Date(this._cache_budget.HEADER.BDGT_FROM);\r\n\t\r\n                foundVtr.results.forEach((allDate) => {\r\n\t\t\r\n                  //var varVtr = new Date(all.VTR_LIVE_DT.getFullYear(), all.VTR_LIVE_DT.getMonth(), all.VTR_LIVE_DT.getDate());\r\n                  var varVtr = moment(new Date(allDate.VTR_LIVE_DT)).format('MM-DD-YYYY');\r\n\r\n                  if ((varTmpFrom <= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n                      (varTmpTo <= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpTo >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n                      (varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_TO)) ||\r\n                      (varTmpFrom >= new Date(this._cache_budget.HEADER.BDGT_FROM) && varTmpTo <= new Date(this._cache_budget.HEADER.BDGT_TO))\r\n                  ) {\r\n                  //if (this._cache_budget.HEADER.BDGT_FROM <= varVtr && varVtr <= this._cache_budget.HEADER.BDGT_TO) {\r\n\r\n                      var varVtr = moment(new Date(allDate.VTR_LIVE_DT)).format('MM-DD-YYYY');\r\n                      var varDateCompare = new Date(varVtr);\r\n     \r\n                      if (varDataFromCompare <= varDateCompare && varDateCompare <= varDataToCompare) {\r\n                          if (varMaxDate == null)\r\n                              varMaxDate = varVtr;\r\n                          else if (varMaxDate < varVtr)\r\n                              varMaxDate = varVtr;\r\n                      }\r\n                    //  if (varMaxDate == null)\r\n                    //  varMaxDate = varVtr;\r\n                    //else if (varMaxDate < varVtr)\r\n                    //  varMaxDate = varVtr;\r\n\r\n                    //toastr.error(\"Please enter range beyond the created budget (AC:\" + all.ACTUAL_COST_ID + \")\");\r\n                  }\r\n                });\r\n\r\n                if(varMaxDate==null)\r\n                {\r\n                    resolve_2(true);\r\n                } \r\n                else\r\n                {\r\n                  //console.log(varMaxDate);\r\n                  var new_date = moment(varMaxDate, \"MM-DD-YYYY\");\r\n                  //console.log(new_date);\r\n                  new_date.add(1, 'days');\r\n                  new_date = moment(new Date(new_date)).format('MM-DD-YYYY');\r\n                  toastr.error(\"An existing ActualCost with Id (\" + all.ACTUAL_COST_ID + \") is using this budget template. <br>BudgetId (\" + all.BDGT_TMPL_ID + \") with status (\" + all.BDGT_TMPL_HDR.APPR_STAT_CD.replace(\"APP-\", \"\") + \").\" +\r\n                    \" Either open the existing Budget Template and create a Copy, or start the validity on \" + new_date);\r\n\r\n                  reject_2(false);\r\n                }\r\n\r\n             \r\n              });\r\n\r\n\r\n             });\r\n\r\n            varPromises.push(newPromise);\r\n\r\n          });\r\n\r\n         Promise.all(varPromises).then((passed) => {\r\n             resolve(true);\r\n          }, (fail) => {\r\n             reject(false);\r\n             //reject(fail);\r\n          });\r\n\r\n        }\r\n        else\r\n           resolve(true);\r\n        \r\n\r\n      });\r\n\r\n      \r\n\r\n    });\r\n    \r\n  }\r\n\r\n\r\n  fnSaveBudget(passed_status) \r\n  {\r\n\r\n     var strValidation=\"\";\r\n\r\n     if(this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_TITLE==\"\")\r\n     {\r\n        strValidation+=\"No Program specified. <br>\";\r\n     }\r\n     \r\n     if(!moment(this._cache_budget.HEADER.BDGT_FROM).isValid() || !moment(this._cache_budget.HEADER.BDGT_TO).isValid())\r\n     {\r\n        strValidation+=\"Invalid Template Start/End Date validity. <br>\";\r\n     }\r\n\r\n     if(this._cache_budget.HEADER.PROGRAM_GENRE_CD==\"\")\r\n     {\r\n        strValidation+=\"No Program Genre. <br>\";\r\n     }\r\n     \r\n     if(this._cache_budget.HEADER.EPISODE_TYPE_CD==\"\")\r\n     {\r\n        strValidation+=\"No Episode Type. <br>\";\r\n     }\r\n\r\n     if(this._cache_budget.HEADER.TELECAST_MODE_CD==\"\")\r\n     {\r\n        strValidation+=\"No Telecast Mode. <br>\";\r\n     }\r\n\r\n     if(!parseInt(this._cache_budget.HEADER.TAPING_DAYS)>0)\r\n     {\r\n        strValidation+=\"Invalid Taping Day(s).<br>\";\r\n     }\r\n\r\n     if(!parseInt(this._cache_budget.HEADER.EPISODES)>0)\r\n     {\r\n        strValidation+=\"Invalid Episode(s).<br>\";\r\n     }\r\n\r\n     if(strValidation!=\"\")\r\n     {\r\n        toastr.error(\"Exception occured. <br/><br/>\"+strValidation, \"Budget Template\");\r\n        return;\r\n     }\r\n     \r\n     if(this._cache_budget.TOTAL<=0 && this._cache_budget.HEADER.APPR_STAT_CD.includes('APPROVED'))\r\n     {\r\n        toastr.error(\"Cannot have Zero Total Budget.\", \"Budget Template\");\r\n        return;\r\n     }\r\n\r\n     //have to add +8 hrs or browser minus 8 hrs when passed to server\r\n    // if (this._cache_budget.HEADER.BDGT_FROM !== undefined)\r\n    //   this._cache_budget.HEADER.BDGT_FROM = moment(new Date(this._cache_budget.HEADER.BDGT_FROM)).add(8, 'hours');\r\n\r\n    // if (this._cache_budget.HEADER.BDGT_TO !== undefined)\r\n    //   this._cache_budget.HEADER.BDGT_TO = moment(new Date(this._cache_budget.HEADER.BDGT_TO)).add(8, 'hours');\r\n     //this._cache_budget.HEADER.APPR_STAT_CD\r\n    if (passed_status.includes('EXPIRE') || passed_status.includes('CLOSE')) {\r\n      Promise.all([this.fnBudgetValidation_2()]).then((passed) => { //removed this.fnBudgetValidation_1(), 8/29/2017 -- PAULV and KARRENA\r\n       if(passed_status!='')\r\n         this._cache_budget.HEADER.APPR_STAT_CD=passed_status;\r\n         this.fnExecuteSaveBudgetHeader();\r\n      }, (fail) => {\r\n        toastr.error(\"Saving Cancelled.\", \"Saving..\");\r\n\r\n      });\r\n    }\r\n    else if (this._cache_budget.HEADER.APPR_STAT_CD.includes('APPROVED')) {\r\n\r\n      this.fnValidation_Approved().then((passed) => {\r\n\r\n        var varToday = new Date(Date.now());\r\n\r\n        if (new Date(varToday.getFullYear(), varToday.getMonth(), varToday.getDate()) >= new Date(moment(this._cache_budget.HEADER.BDGT_TO).subtract(8, 'hours').format('MM-DD-YYYY'))) {\r\n          this._cache_budget.HEADER.APPR_STAT_CD = \"APP-EXPIRED\";\r\n        }\r\n\r\n        this.fnExecuteSaveBudgetHeader();\r\n\r\n      }, (fail) => {\r\n        toastr.error(\"Saving Cancelled.\", \"Saving..\");\r\n      });\r\n      \r\n    }\r\n    else\r\n    {\r\n      this.fnExecuteSaveBudgetHeader();\r\n    }\r\n\r\n\r\n    return;\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  fnExecuteSaveBudgetHeader()\r\n  {\r\n\r\n      var varInsert=null;\r\n\r\n    // if (this._cache_budget.HEADER.BDGT_FROM !== undefined)\r\n    //   this._cache_budget.HEADER.BDGT_FROM = moment(new Date(this._cache_budget.HEADER.BDGT_FROM)).add(8, 'hours');\r\n\r\n    // if (this._cache_budget.HEADER.BDGT_TO !== undefined)\r\n    //   this._cache_budget.HEADER.BDGT_TO = moment(new Date(this._cache_budget.HEADER.BDGT_TO)).add(8, 'hours');\r\n\r\n\r\n    // console.log(this._cache_budget.HEADER.BDGT_FROM);\r\n    // console.log(this._cache_budget.HEADER.BDGT_TO);\r\n\r\n      var varFrom = moment(new Date(this._cache_budget.HEADER.BDGT_FROM)).add(8, 'hours');\r\n      varFrom = new Date(varFrom);\r\n\r\n      var varTo = moment(new Date(this._cache_budget.HEADER.BDGT_TO)).add(8, 'hours');\r\n      varTo = new Date(varTo);\r\n\r\n      //var varTo = new Date(this._cache_budget.HEADER.BDGT_TO);\r\n\r\n      // console.log(varFrom);\r\n      // console.log(varTo);\r\n\r\n      if (this._cache_budget.HEADER.REMARKS === undefined || this._cache_budget.HEADER.REMARKS === null) {\r\n        this._cache_budget.HEADER.REMARKS=\"NONE\";\r\n      }\r\n      else if (this._cache_budget.HEADER.REMARKS.trim()==\"\")\r\n      {\r\n        this._cache_budget.HEADER.REMARKS=\"NONE\";\r\n      }\r\n\r\n\r\n      if (this._cache_budget.HEADER.BDGT_TMPL_ID == \"\") {\r\n      var getMax = EntityQuery().from('BDGT_TMPL_HDR').orderByDesc('BDGT_TMPL_ID').take(1);\r\n\r\n      //CHANGED 6-17-2016, changed bec before if only 1 value available will auto bind to APPR_STAT_CD, now have to set it first\r\n      if(this._cache_budget.HEADER.APPR_STAT_CD==null || this._cache_budget.HEADER.APPR_STAT_CD==undefined || this._cache_budget.HEADER.APPR_STAT_CD=='undefined')\r\n      {\r\n        this._cache_budget.HEADER.APPR_STAT_CD=this._STATUS[0].REF_CD;\r\n      }\r\n\r\n      //console.log(this._cache_budget.HEADER.APPR_STAT_CD);\r\n\r\n      EntityManager().executeQuery(getMax).then((successMax) => {\r\n        var getMax = 1;\r\n\r\n        if (successMax.results.length > 0)\r\n          getMax = successMax.results[0].BDGT_TMPL_ID + 1;\r\n\r\n          varInsert = EntityManager().createEntity('BDGT_TMPL_HDR', {\r\n          BDGT_TMPL_ID: getMax,\r\n          COMPANY_ID: this._COMPANY_ID,\r\n          BDGT_FROM: varFrom,\r\n          BDGT_TO: varTo,\r\n          //PROGRAM_TYPE_CD: indiv.GLOBAL_GRP_ID,\r\n          //EPISODE_MODE_CD: indiv.GLOBAL_GRP_ID,\r\n          EPISODE_TYPE_CD: this._cache_budget.HEADER.EPISODE_TYPE_CD,\r\n          BDGT_VIEW_FCTR: 1,\r\n          TAPING_DAYS: this._cache_budget.HEADER.TAPING_DAYS,\r\n          PROGRAM_ID: this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_ID,\r\n          CHARGE_CD: this._cache_budget.HEADER.CHARGE_CD,\r\n          PROGRAM_GENRE_CD: this._cache_budget.HEADER.PROGRAM_GENRE_CD,\r\n          PARENT_PROGRAM_ID: this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_ID,\r\n          BDGT_VIEW_CD: 'EPISODIC',\r\n          APPR_STAT_CD: this._cache_budget.HEADER.APPR_STAT_CD,\r\n          CHARGE_TYPE_CD: '',\r\n          BDGT_TOTAL: 0,\r\n          REMARKS: this._cache_budget.HEADER.REMARKS,\r\n          CREATED_BY: this._user,\r\n          CREATED_DT: new Date(Date.now()),\r\n          LAST_UPDATED_BY: this._user,\r\n          LAST_UPDATED_DT: new Date(Date.now()),\r\n          TELECAST_MODE_CD: this._cache_budget.HEADER.TELECAST_MODE_CD,\r\n          BDGT_STAT_CD: getMax,\r\n          //BDGT_TMPL_TYPE_CD: indiv.GLOBAL_GRP_ID,\r\n          BDGT_FOR_CD: 'BDGT-EPISODIC',\r\n          PROGRAM_NAME: this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_TITLE,\r\n          EPISODES: this._cache_budget.HEADER.EPISODES,\r\n          STATION_ID: this._cache_budget.HEADER.STATION_ID,\r\n          STATION_SENT_DATE: new Date(),\r\n          STATION_SENT: 0\r\n        });\r\n\r\n        EntityManager().addEntity(varInsert);\r\n\r\n        EntityManager().saveChanges().then((success) => {\r\n\r\n          this._cache_budget.HEADER.BDGT_TMPL_ID = success.entities[0].BDGT_TMPL_ID;\r\n\r\n          this._disableCreateBudget=true;\r\n          this._disableCancelBudget=false;\r\n          this._disableRefreshBudget=false;\r\n          this._disableSaveBudget=false;\r\n\r\n\r\n          if(this._cache_budget.HEADER.APPR_STAT_CD==\"APP-APPROVED\")\r\n          {\r\n            this._cache_budget.STATUS=\"APPROVED\";\r\n            this._disableSaveBudget=true;\r\n\r\n            this.budgetDisabled=true;\r\n            this.programDisabled=true;\r\n\r\n            // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n            //   all(this.modalBudget.id, false);\r\n            //   all(this.modalProgram.id, false);\r\n            // });\r\n\r\n            // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n            // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, false);\r\n          }\r\n          else\r\n          {\r\n          \r\n            this.budgetDisabled=true;\r\n            this.programDisabled=false;\r\n\r\n            // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n            //   all(this.modalBudget.id, false);\r\n            //   all(this.modalProgram.id, true);\r\n            // });\r\n\r\n            // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n            // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n          }\r\n\r\n          toastr.success(\"Succesfully Saved\", \"Budget Template\");\r\n\r\n\r\n          if(this._cache_budget.IS_COPYING)\r\n          {\r\n\r\n            this._cache_budget.OBSERVERS.copy_template.forEach((all) => {\r\n              \r\n              all('REGULAR');\r\n              //all('GUEST');\r\n            });\r\n\r\n\r\n            // this._dispatcher.dispatch('copy.template','REGULAR');\r\n            // this._dispatcher.dispatch('copy.template','GUEST');\r\n\r\n\r\n            this._cache_budget.IS_COPYING=false;\r\n\r\n            //  setTimeout(()=>{\r\n\r\n            \r\n            //   this.fnBudget(\"refresh\");\r\n            // },5000);\r\n            \r\n            //this._IS_COPYING=\"\";\r\n          }\r\n          else\r\n          {\r\n            this.fnBudget(\"refresh\"); \r\n          }\r\n\r\n          this._disableCreateBudget=true;\r\n          this._disableSaveBudget=false;\r\n          this._disableCancelBudget=false;\r\n          this._disableRefreshBudget=false;\r\n          this._disablePrintBudget = true;\r\n\r\n          this.budgetDisabled=false;\r\n          this.programDisabled=false;\r\n\r\n          // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n          //   all(this.modalBudget.id, true);\r\n          //   all(this.modalProgram.id, true);\r\n          // });\r\n\r\n          // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, true);\r\n          // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n\r\n\r\n        }, (fail) => {\r\n\r\n          if(varInsert!=null)\r\n          {\r\n            varInsert.entityAspect.setDeleted();  \r\n          }\r\n          \r\n          EntityManager().getEntities().forEach(function(entity) {\r\n            var errors = entity.entityAspect.getValidationErrors();\r\n            if (errors.length > 0)\r\n              console.log(errors);\r\n          });\r\n          console.log(fail);\r\n          toastr.error(\"Error Occured\", fail);\r\n        });\r\n\r\n      });\r\n\r\n    } else {\r\n      \r\n      var getEntityQuery = EntityQuery().from('BDGT_TMPL_HDR').where(\"BDGT_TMPL_ID\", \"==\", this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n      EntityManager().executeQuery(getEntityQuery).then((item) => {\r\n\r\n        item.results[0].BDGT_FROM = varFrom;\r\n        item.results[0].BDGT_TO = varTo;\r\n        item.results[0].EPISODE_TYPE_CD = this._cache_budget.HEADER.EPISODE_TYPE_CD;\r\n        item.results[0].TAPING_DAYS = this._cache_budget.HEADER.TAPING_DAYS;\r\n        item.results[0].PROGRAM_ID = this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_ID;\r\n        item.results[0].CHARGE_CD = this._cache_budget.HEADER.CHARGE_CD;\r\n        item.results[0].PROGRAM_GENRE_CD = this._cache_budget.HEADER.PROGRAM_GENRE_CD;\r\n        item.results[0].PARENT_PROGRAM_ID = this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_ID;\r\n        item.results[0].APPR_STAT_CD = this._cache_budget.HEADER.APPR_STAT_CD;\r\n        item.results[0].REMARKS = this._cache_budget.HEADER.REMARKS;\r\n        item.results[0].LAST_UPDATED_BY = this._user;\r\n        item.results[0].LAST_UPDATED_DT = new Date(Date.now());\r\n        item.results[0].TELECAST_MODE_CD = this._cache_budget.HEADER.TELECAST_MODE_CD;\r\n        item.results[0].PROGRAM_NAME = this._cache_budget.HEADER.PROGRAM_MSTR.PROGRAM_TITLE;\r\n        item.results[0].EPISODES = this._cache_budget.HEADER.EPISODES;\r\n        item.results[0].STATION_ID =  this._cache_budget.HEADER.STATION_ID;\r\n\r\n        EntityManager().saveChanges().then((success) => {\r\n          \r\n          this._disableCreateBudget = true;\r\n          this._disableCancelBudget = false;\r\n          this._disableRefreshBudget = false;\r\n          this._disableSaveBudget = false;\r\n\r\n\r\n          this.budgetDisabled=true;\r\n          this.programDisabled=false;\r\n          // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all)=>{\r\n          //   all(this.modalBudget.id, false);\r\n          //   all(this.modalProgram.id, true);\r\n          // });\r\n\r\n          // this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n          // this._dispatcher.dispatch('enable.modal.button', this.modalProgram.id, true);\r\n\r\n          toastr.success(\"Succesfully Saved\", \"Budget Template\");\r\n          this.fnBudget(\"refresh\"); \r\n        }, (fail) => {\r\n\r\n          EntityManager().getEntities().forEach(function(entity) {\r\n            var errors = entity.entityAspect.getValidationErrors();\r\n            if (errors.length > 0)\r\n              console.log(errors);\r\n          });\r\n          console.log(fail);\r\n          toastr.error(\"Error Occured\", fail);\r\n        });\r\n\r\n\r\n      });\r\n     \r\n\r\n        \r\n      this._disableBudgetId=true;\r\n\r\n      // this._cache_budget.CALLER.VALUE1 = this.modalBudget.id;\r\n      // this._cache_budget.CALLER.VALUE2 = false;\r\n      // this._cache_budget.CALLER.ACTION = 'enable.modal.button';\r\n\r\n      this.budgetDisabled=true;\r\n      // this._cache_budget.OBSERVERS.enable_modal_button.forEach((all) => {\r\n      //   all(this.modalBudget.id, false);\r\n      // });\r\n\r\n      //this._dispatcher.dispatch('enable.modal.button', this.modalBudget.id, false);\r\n      this._disablePrintBudget = false;\r\n    }\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n    fnDialogProgram(){\r\n      this.dialogService.open({\r\n        viewModel: program\r\n      }).whenClosed(response => {\r\n        \r\n        if (!response.wasCancelled) {\r\n          \r\n        } else {\r\n          \r\n        }\r\n      });\r\n    }\r\n\r\n\r\n\r\n    fnDialogBudget(){\r\n      this.dialogService.open({\r\n        viewModel: budget\r\n      }).whenClosed(response => {\r\n         \r\n        if (!response.wasCancelled) {\r\n            settings.isNavigating = true;\r\n        } else {\r\n          \r\n        }\r\n      });\r\n    }\r\n\r\n\r\n}","import {inject} from 'aurelia-framework';\r\nimport {computedFrom,customElement} from 'aurelia-framework';\r\nimport { cache_budget } from 'ppfcs/cache_budget';\r\nimport { initializeBreeze, generateID } from 'entity-manager-factory';\r\nimport { loadMasterfiles, loadTables, loadLookups, getLookups } from 'masterfiles';\r\nimport toastr from \"toastr\";\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport { checkCookie, setCookie, removeCookie } from '../../helpers';\r\nimport { MultiObserver }from 'multi-observer';\r\nimport { login } from 'modals/login';\r\nimport { Router } from 'aurelia-router';\r\nimport { EntityManager, EntityQuery } from 'entity-manager-factory';\r\n\r\n//@customElement('main-header')\r\n@inject(toastr, cache_budget, MultiObserver, DialogService, Router)\r\nexport class mainview {\r\n\r\n\r\n  router;\r\n  _toastr = null;\r\n  //_dispatcher;\r\n  showingLogout=\"hidden\";\r\n  _cache_budget;\r\n  dialogService=null;\r\n  loginDisabled=true;\r\n  logoutDisabled=false;\r\n  masterFilesLoaded=false;\r\n  constructor(toastr, cache_budget, multiObserver, dialogService, Router) {\r\n    //this.fnExecuteDatePicker();\r\n    //console.log(elem);\r\n    this._cache_budget=cache_budget;\r\n    this.router = Router;\r\n\r\n    if (EntityManager() === undefined) {\r\n        this.router.navigateToRoute('mainpage');\r\n        return;\r\n    }\r\n\r\n    this.dialogService=dialogService;\r\n    \r\n      if(this.dialogService.controllers.length>0)\r\n      {\r\n        for (var i = this.dialogService.controllers.length - 1; i >= 0; i--) {\r\n          this.dialogService.controllers[i].close();\r\n        }\r\n      }\r\n\r\n  }\r\n    \r\n  clickTab(index){\r\n      if(index==0){\r\n\r\n      }\r\n      else if(index==1){\r\n\r\n          this._cache_budget.OBSERVERS.refreshPersonnelTab.forEach((all) => {\r\n            all('REGULAR');\r\n          });\r\n          \r\n      }\r\n      else if(index==2){\r\n\r\n         this._cache_budget.OBSERVERS.refreshPersonnelTab.forEach((all) => {\r\n            all('SEMI_REGULAR');\r\n          });\r\n          \r\n      }\r\n      else if(index==3){\r\n\r\n          this._cache_budget.OBSERVERS.refreshPersonnelTab.forEach((all) => {\r\n            all('STAFF');\r\n          });\r\n          \r\n      }\r\n  }\r\n\r\n   \r\n}","import {  bindable, inject } from 'aurelia-framework';\r\nimport { cache_budget } from 'ppfcs/cache_budget';\r\nimport { cache_obj } from 'cache_obj';\r\nimport { EntityManager, EntityQuery, generateID } from 'entity-manager-factory';\r\nimport {  getLookups,getJobByGlobalCompany,getJobByName } from 'masterfiles';\r\nimport {  substringMatcher } from 'helpers';\r\nimport typeahead from 'typeahead';\r\nimport settings from 'settings';\r\nimport _ from 'underscore';\r\nimport {  ModalWizard } from 'modals/modal-wizard';\r\nimport numeral from 'numeral';\r\nimport { MultiObserver } from 'multi-observer';\r\nimport toastr from \"toastr\";\r\n\r\nimport { globalindivmstr } from '../../modals/globalindivmstr';\r\nimport { indivmstr } from '../../modals/indivmstr';\r\nimport { job } from '../../modals/job';\r\nimport { paymentterm } from '../../modals/paymentterm';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport breeze from 'breeze-client';\r\n\r\n@inject(cache_obj, cache_budget, ModalWizard, MultiObserver, DialogService)\r\nexport class PersonnelCustomElement\r\n{\r\n\r\n  @bindable toPerson;\r\n  @bindable toPersonModel;\r\n\r\n  _cache_obj = null;\r\n  _cache_budget = null;\r\n\r\n  styleStringHidden = 'visibility: hidden;display:none;';\r\n  styleStringVisible = 'visibility: visible;';\r\n  _ModalWizard;\r\n  _selectedItem;\r\n  _JOBS = null;\r\n  _PYMNTTERM = [];\r\n  _currentIndex;\r\n  _ce_head;\r\n  _personnelSearch;\r\n  _signal;\r\n  _Personnel=[];\r\n  _PersonnelTM=[];\r\n  _Index=0;\r\n  varPymnt=null;\r\n  isIndivMstrTalentsDisabled=false;\r\n  isIndivMstrManagerDisabled=false;\r\n  isJobDisabled=false;\r\n  isIndivMstrDisabled=false;\r\n  dialogService=null;\r\n  _cache_budget;\r\n\r\n  constructor(cache_obj, cache_budget, ModalWizard, multiObserver,dialogService) \r\n  {\r\n\r\n    if (EntityManager() === undefined) {\r\n        return;\r\n    }\r\n\r\n    this.cache_budget = cache_budget;\r\n    this.dialogService=dialogService;\r\n\r\n    this._cache_obj = cache_obj;\r\n    this._cache_budget = cache_budget;\r\n      \r\n    this._ModalWizard = ModalWizard;\r\n    this._ce_head = \"+\";\r\n\r\n    multiObserver.observe(\r\n      [\r\n      [this, '_personnelSearch']\r\n      ], (newValue, oldValue) => this.onSpeculateProp(newValue, oldValue));\r\n\r\n    \r\n    \r\n    this._cache_budget.OBSERVERS.disable_search_personnel.push((val) => {\r\n      this.ButtonStatus(val);\r\n    });\r\n\r\n    //this._cache_budget.OBSERVERS.login_passed.push(() => {\r\n    //  this.LoginPassed();\r\n    //});\r\n\r\n    this._cache_budget.OBSERVERS.reset_all.push(() => {\r\n      this.resetView();\r\n    });\r\n\r\n    this._cache_obj.OBSERVERS.budget_dialog.push((val) => {\r\n      this.CloseBudgetDialog(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.enable_approved.push((val) => {\r\n      this.ButtonStatus(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.copy_template.push((val) => {\r\n      this.fnCallCopy(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.pass_indiv.push((val) => {\r\n      this.PassedIndiv(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.pass_group.push((val) => {\r\n      this.PassedGroup(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.refreshPersonnelTab.push((val) => {\r\n      this.refreshOnSelect(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.pass_job.push((val) => {\r\n      this.passJob(val);\r\n    });\r\n\r\n    this._PYMNTTERM = getLookups().PAYMENT_TERM;\r\n    //GET BACK HERE!!!. these part is being saved 3 times, regular, semi and staff\r\n    this._JOBS = getLookups().JOB_GRP_CATEGORY.filter\r\n        ((all) => all.COMPANY_ID == this._cache_obj.USER.COMPANY_ID);\r\n\r\n    //console.log(this._PYMNTTERM);\r\n  }\r\n\r\n\r\n  \r\n  //LoginPassed() \r\n  //{\r\n\r\n  //  //GET BACK HERE!!!. these part is being saved 3 times, regular, semi and staff\r\n  //  this._PYMNTTERM = getLookups().PAYMENT_TERM;\r\n  //  //GET BACK HERE!!!. these part is being saved 3 times, regular, semi and staff\r\n  //  this._JOBS = getLookups().JOB_GRP_CATEGORY.filter\r\n  //  ((all)=>all.COMPANY_ID==this._cache_obj.USER.COMPANY_ID);\r\n\r\n  //}\r\n\r\n\r\n  passJob(job)\r\n  {\r\n    var index = this._Index;\r\n    \r\n    this._Personnel[index].JOB_ID = job.JOB_ID;\r\n    this._Personnel[index].JOB_DESC = job.JOB_DESC;\r\n    var varGrpCategory = getLookups().JOB_GRP_CATEGORY.find((all) => all.JOB_ID == this._Personnel[index].JOB_ID && all.COMPANY_ID ==\r\n      this._cache_obj.USER.COMPANY_ID);\r\n\r\n    if (varGrpCategory !== undefined) {\r\n      this._Personnel[index].CATEGORY_ID = varGrpCategory.CATEGORY_ID;\r\n      this._Personnel[index].CATEGORY_DESC = varGrpCategory.CATEGORY_DESC;\r\n    }\r\n    \r\n  }\r\n\r\n  onSpeculateProp(newValue, oldValue)\r\n  {\r\n\r\n    var varResult = [];\r\n\r\n    this._Personnel.forEach((all) =>\r\n    {\r\n      all.visible = true;\r\n\r\n      if (this._personnelSearch.toUpperCase() !== \"\") \r\n      {\r\n        if (all['PERSONNEL_NAME'] !== undefined && all['PERSONNEL_NAME']!=null)\r\n          if (!all['PERSONNEL_NAME'].toUpperCase().includes(this._personnelSearch.toUpperCase())) \r\n          {\r\n            all.visible = false;\r\n          }\r\n\r\n          if (all['BLANK_PERSONNEL_NAME'] !== undefined && all['PERSONNEL_NAME']!=null)\r\n            if (!all['BLANK_PERSONNEL_NAME'].toUpperCase().includes(this._personnelSearch.toUpperCase())) \r\n            {\r\n              all.visible = false;\r\n            }\r\n\r\n          }\r\n          \r\n        });\r\n\r\n    this._signal = generateID();\r\n\r\n  }\r\n\r\n\r\n  \r\n  //@handle('reset.all')\r\n  resetView() \r\n  {\r\n\r\n    this._signal = generateID();\r\n\r\n  }\r\n\r\n  collapse_expand_head()\r\n  {\r\n    if (this._ce_head == \"+\") \r\n    {\r\n      this._ce_head = \"-\";\r\n      this._Personnel.forEach((item) => \r\n      {\r\n        item.ce_value = \"-\";\r\n        item.styleString = this.styleStringVisible;\r\n      });\r\n\r\n    } \r\n    else \r\n    {\r\n      this._ce_head = \"+\";\r\n      this._Personnel.forEach((item) => \r\n      {\r\n        item.ce_value = \"+\";\r\n        item.styleString = this.styleStringHidden;\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  collapse_expand(item) \r\n  {\r\n\r\n    if (item.ce_value == \"+\") \r\n    {\r\n\r\n      item.ce_value = \"-\";\r\n      item.styleString = this.styleStringVisible;\r\n\r\n    } \r\n    else \r\n    {\r\n\r\n      item.ce_value = \"+\";\r\n      item.styleString = this.styleStringHidden;\r\n\r\n    }\r\n  }\r\n\r\n\r\n  //@handle('budget.dialog')\r\n  CloseBudgetDialog(value) \r\n  {\r\n\r\n    this.fnCheckBudget(value);\r\n\r\n  }\r\n\r\n\r\n  fnCheckExistingTalents(TALENTS,item)\r\n  {\r\n\r\n    if(TALENTS==undefined || TALENTS==null || TALENTS==\"\")\r\n    {\r\n     \r\n      return true;\r\n    }\r\n    else if(TALENTS.length>0)\r\n    {\r\n      if(item)\r\n        item.REMOVE=false;\r\n\r\n      return false;\r\n    }\r\n    \r\n    return true;\r\n\r\n  } \r\n\r\n  myFunction() \r\n  {\r\n\r\n    alert('loaded');\r\n\r\n  }\r\n\r\n  //@handle('enable.approved')\r\n  ButtonStatus(value) \r\n  {\r\n\r\n      this._cache_obj.OBSERVERS.enable_modal_button.forEach((all)=>\r\n    {\r\n      this.isIndivMstrDisabled=!value;\r\n      this.isIndivMstrTalentsDisabled=!value;\r\n      \r\n    });\r\n\r\n  }\r\n\r\n\r\n //@handle('copy.template')\r\n fnCallCopy(usr)\r\n {\r\n   \r\n  this._Personnel.forEach((item) => \r\n  {\r\n    if (item.TALENT_MANAGER !== undefined) \r\n    {\r\n      item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP = undefined;\r\n      item.TALENT_MANAGER.BDGT_TMPL_DTL_ID = undefined;\r\n    };\r\n    item.BDGT_TMPL_DTL_ID=undefined;\r\n    \r\n    item.BDGT_TMPL_DTL_ID_LINK = undefined;\r\n    item.BDGT_TMPL_DTL_ID_LINK_TMP = undefined;\r\n\r\n  });\r\n  \r\n  if (this.toPersonModel.USE == usr)\r\n   this.savePersonnel(1);\r\n\r\n \r\n}\r\n\r\n\r\n\r\nfnCheckBudget(BDGT_TMPL_ID) \r\n{\r\n\r\n\r\n  this._cache_obj.OBSERVERS.enable_modal_button.forEach((all)=>\r\n  {\r\n    this.isIndivMstrDisabled=false;\r\n    this.isIndivMstrTalentsDisabled=false;\r\n  });\r\n\r\n  \r\n  setTimeout(() => \r\n  {\r\n\r\n    this.scrollDiv();\r\n\r\n  }, 5000);\r\n\r\n  var varPsClType=\"\";\r\n  if (this.toPersonModel.USE == \"REGULAR\") \r\n  {\r\n\r\n    varPsClType = \"Regular\";\r\n    this._cache_budget.REGULAR = [];\r\n\r\n  } \r\n  else if (this.toPersonModel.USE == \"SEMI_REGULAR\") \r\n  {\r\n\r\n    varPsClType = \"Semi-Regular\";\r\n    this._cache_budget.SEMI_REGULAR = [];\r\n\r\n  } \r\n  else if (this.toPersonModel.USE == \"STAFF\") \r\n  {\r\n\r\n    varPsClType = \"Staff\";\r\n    this._cache_budget.STAFF = [];\r\n\r\n  }\r\n  \r\n\r\n  var p1 = breeze.Predicate.create('BDGT_TMPL_ID', '==', BDGT_TMPL_ID);\r\n  var p2 = breeze.Predicate.create('PERSONNEL_CLASS_TYPE', '==', varPsClType);\r\n  var pred = breeze.Predicate.and([p1, p2]);\r\n  \r\n\r\n  var _query = EntityQuery().from('BDGT_TMPL_DTL').where(pred).orderBy(\"GROUP_ORDER\");\r\n  EntityManager().executeQuery(_query).then((found) => {\r\n\r\n      //this._cache_budget.REGULAR = found.results.filter(all => all.PERSONNEL_CLASS_TYPE.toUpperCase() == \"REGULAR\");\r\n\r\n      var varJobLength = getLookups().JOB_MSTR.length - 1;\r\n      var varCategoryLength = getLookups().CATEGORY_MSTR.length - 1;\r\n      \r\n      this._Personnel.splice(0,this._Personnel.length);\r\n      this._PersonnelTM.splice(0,this._PersonnelTM.length);\r\n      \r\n\r\n      found.results.forEach((item)=>\r\n      {\r\n\r\n        this._Personnel.push(\r\n        {\r\n          BDGT_TMPL_DTL_ID: item.BDGT_TMPL_DTL_ID,\r\n          BDGT_TMPL_ID: this._cache_budget.HEADER.BDGT_TMPL_ID,\r\n          JOB_ID: item.JOB_ID,\r\n          GLOBAL_ID: item.GLOBAL_ID,\r\n          CONTRACT_AMT: item.CONTRACT_AMT,\r\n          CATEGORY_ID: item.CATEGORY_ID,\r\n          STAFF_WORK: item.STAFF_WORK,\r\n          PYMNT_TERM_CD: item.PYMNT_TERM_CD,\r\n          PAY_TO_PERSON_FL: 'T',\r\n          PAY_RATE_FACTOR: item.PAY_RATE_FACTOR,\r\n          BUDGET_AMT: item.INPUT_AMT,\r\n          TAPING_DAY_CNT: this._cache_budget.HEADER.TAPING_DAYS,\r\n          PERSONNEL_CLASS_CD: item.PERSONNEL_CLASS_CD,\r\n          REMARKS: item.REMARKS,\r\n          PERSONNEL_INFO_SRC: item.PERSONNEL_INFO_SRC,\r\n          PERSONNEL_NAME: item.PERSONNEL_NAME,\r\n          INPUT_AMT: item.INPUT_AMT,\r\n          CONFIDENTIAL: item.CONFIDENTIAL,\r\n          POOL_RECORD: item.POOL_RECORD,\r\n          GROUP_ORDER: item.GROUP_ORDER,\r\n          GLOBAL_ID_LINK: item.GLOBAL_ID_LINK,\r\n          BDGT_TMPL_DTL_ID_LINK: item.BDGT_TMPL_DTL_ID_LINK\r\n        });\r\n\r\n      });\r\n      \r\n\r\n\r\n      if (this.toPersonModel.USE == \"REGULAR\") \r\n      {\r\n\r\n        this._cache_budget.REGULAR = this._Personnel;\r\n\r\n        if(this._cache_budget.REGULAR.length>0)\r\n          toastr.success(\"REGULAR PERSONNEL\", \"Loading Successful.\");\r\n        //this._Personnel = this._cache_budget.REGULAR;\r\n        this.setPersonnelValues(this._cache_budget.REGULAR, varJobLength, varCategoryLength);\r\n\r\n      }\r\n      else if (this.toPersonModel.USE == \"SEMI_REGULAR\") \r\n      {\r\n\r\n        varPsClType = \"Semi-Regular\";\r\n\r\n        this._cache_budget.SEMI_REGULAR = this._Personnel;\r\n        \r\n        if(this._cache_budget.SEMI_REGULAR.length>0)\r\n          toastr.success(\"SEMI-REGULAR PERSONNEL\", \"Loading Successful.\");\r\n\r\n        //this._Personnel = this._cache_budget.SEMI_REGULAR;\r\n        this.setPersonnelValues(this._cache_budget.SEMI_REGULAR, varJobLength, varCategoryLength);\r\n\r\n      }\r\n      else if (this.toPersonModel.USE == \"STAFF\")\r\n      {\r\n\r\n        varPsClType = \"Staff\";\r\n\r\n        this._cache_budget.STAFF = this._Personnel;\r\n\r\n        if(this._cache_budget.STAFF.length>0)\r\n          toastr.success(\"STAFF PERSONNEL\", \"Loading Successful.\");\r\n        \r\n        //this._Personnel = this._cache_budget.STAFF;\r\n        this.setPersonnelValues(this._cache_budget.STAFF, varJobLength, varCategoryLength);\r\n\r\n      }\r\n\r\n      this._signal = generateID();\r\n      \r\n\r\n      this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>\r\n      {\r\n\r\n        all();\r\n\r\n      });\r\n\r\n    });\r\n  \r\n}\r\n\r\nsetPersonnelValues(obj,varJobLength,varCategoryLength) \r\n{\r\n \r\n     //move this undefined setting in able not to conflict while adding new talents on the second looop\r\n     _.each(obj, (item) => {\r\n      item.TALENTS = undefined; \r\n    });\r\n     \r\n     _.each(obj, (item) => {\r\n\r\n       \r\n      for (var i = 0; i <= varJobLength; ++i) {\r\n        if (getLookups().JOB_MSTR[i].JOB_ID == item.JOB_ID) {\r\n          item.JOB_DESC = getLookups().JOB_MSTR[i].JOB_DESC;\r\n          break;\r\n        }\r\n      };\r\n\r\n      for (var i = 0; i <= varCategoryLength; ++i) {\r\n        if (getLookups().CATEGORY_MSTR[i].CATEGORY_ID == item.CATEGORY_ID) {\r\n          item.CATEGORY_DESC = getLookups().CATEGORY_MSTR[i].CATEGORY_DESC;\r\n          break;\r\n        }\r\n      };\r\n\r\n\r\n      for (var i = 0; i <= this._PYMNTTERM.length - 1; ++i) {\r\n        if (this._PYMNTTERM[i].REF_CD == item.PYMNT_TERM_CD) {\r\n          item.PAYMENT_TERM = this._PYMNTTERM[i].REF_DESC;\r\n          break;\r\n        }\r\n      };\r\n\r\n\r\n      if (item.BDGT_TMPL_DTL_ID_LINK !== 0) {\r\n\r\n        //var varTalent = getLookups().GLOBAL_INDIV_WITH_ALIAS.find((allIndiv) => allIndiv.GLOBAL_INDIV_ID == item.GLOBAL_ID_LINK);\r\n       //console.log(item.BDGT_TMPL_DTL_ID_LINK);\r\n       var varTM = obj.find((all)=>all.BDGT_TMPL_DTL_ID==item.BDGT_TMPL_DTL_ID_LINK);\r\n       item.TALENT_MANAGER = {\r\n        BDGT_TMPL_DTL_ID_TMP: varTM.BDGT_TMPL_DTL_ID,\r\n        GLOBAL_INDIV_ID: varTM.GLOBAL_ID,\r\n        PERSONNEL_NAME: varTM.PERSONNEL_NAME,\r\n        CONTRACT_AMT_TMP:numeral(varTM.CONTRACT_AMT).format('0,0.00'),\r\n        INPUT_AMT_TMP:numeral(varTM.INPUT_AMT).format('0,0.00'),\r\n        PAY_RATE_FACTOR_TMP:numeral(varTM.PAY_RATE_FACTOR).format('0,0.00'),\r\n        REMARKS: varTM.REMARKS,\r\n        JOB_ID: varTM.JOB_ID,\r\n        CATEGORY_ID: varTM.CATEGORY_ID,\r\n        GROUP_ORDER:-1\r\n      };\r\n\r\n      this._PersonnelTM.push({\r\n        BDGT_TMPL_DTL_ID: varTM.BDGT_TMPL_DTL_ID,\r\n        BDGT_TMPL_DTL_ID_TMP: varTM.BDGT_TMPL_DTL_ID,\r\n        GLOBAL_INDIV_ID: varTM.GLOBAL_ID,\r\n        PERSONNEL_NAME: varTM.PERSONNEL_NAME,\r\n        CONTRACT_AMT_TMP:numeral(varTM.CONTRACT_AMT).format('0,0.00'),\r\n        INPUT_AMT_TMP:numeral(varTM.INPUT_AMT).format('0,0.00'),\r\n        PAY_RATE_FACTOR_TMP:numeral(varTM.PAY_RATE_FACTOR).format('0,0.00'),\r\n        REMARKS: varTM.REMARKS,\r\n        JOB_ID: varTM.JOB_ID,\r\n        CATEGORY_ID: varTM.CATEGORY_ID,\r\n        GROUP_ORDER:-1\r\n      });\r\n\r\n      \r\n\r\n    }\r\n\r\n\r\n\r\n    item.BLANK_PERSONNEL_NAME = item.PERSONNEL_NAME;\r\n    item.CONTRACT_AMT_TMP = numeral(item.CONTRACT_AMT).format('0,0.00');\r\n    item.INPUT_AMT_TMP = numeral(item.INPUT_AMT).format('0,0.00');\r\n    item.PAY_RATE_FACTOR_TMP = numeral(item.PAY_RATE_FACTOR).format('0,0.00');\r\n    item.CONFIDENTIAL_TMP = (item.CONFIDENTIAL == 1 ? true : false);\r\n    item.STAFF_WORK_TMP = (item.STAFF_WORK == 1 ? true : false);\r\n    item.POOL_RECORD_TMP = (item.POOL_RECORD == 1 ? true : false);\r\n\r\n    item.BDGT_TMPL_DTL_ID_LINK_TMP = item.BDGT_TMPL_DTL_ID_LINK;\r\n    \r\n    item.styleString = this.styleStringHidden;\r\n    item.ce_value = \"+\";\r\n    item.visible = true;\r\n    \r\n\r\n  });\r\n     \r\n     \r\n     for (var i = obj.length - 1; i >= 0; i--) {\r\n      var varToDelete = this._PersonnelTM.find((all)=>all.BDGT_TMPL_DTL_ID_TMP==obj[i].BDGT_TMPL_DTL_ID);\r\n\r\n      if(varToDelete!==undefined)\r\n      { \r\n        obj.splice(i,1);\r\n      }\r\n    }\r\n    \r\n  }\r\n\r\n\r\n  removeTalent(parent,item,index)\r\n  {\r\n    this._Personnel.forEach((all)=>{\r\n      if(all.GLOBAL_ID==item.GLOBAL_INDIV_ID)\r\n      {\r\n        //remove this on the list of talents of talent manager\r\n        var varToSplice = parent.item.TALENTS.splice(index,1);\r\n\r\n        delete item.TALENT_MANAGER.CONTRACT_AMT_TMP;\r\n        delete item.TALENT_MANAGER.INPUT_AMT_TMP;\r\n        delete item.TALENT_MANAGER.PAY_RATE_FACTOR_TMP;\r\n        delete item.TALENT_MANAGER.REMARKS;\r\n        delete item.TALENT_MANAGER;\r\n\r\n        this._signal = generateID();\r\n      }\r\n    });\r\n  }\r\n\r\n  fnRegularFocus(index, prop) \r\n  {\r\n\r\n    this._Index = index;\r\n    if (prop == \"JOB\")\r\n    { \r\n\r\n      this.fnModalJob();\r\n\r\n      return;\r\n    }\r\n\r\n\r\n    this.fnModalPaymentTerm();\r\n    \r\n\r\n    \r\n  }\r\n\r\n  //CREATE typeahead on focus instead...........!!!!!!!!!!!!\r\n  // fnReloadTypeahead() {\r\n\r\n  //   //$('.jobclass').typeahead('destroy');\r\n\r\n  //   var varCnt = 0;\r\n\r\n  //   _.each($(this.tblData).find(\".jobclass\"), (all) => {\r\n\r\n  //     $(all).attr(\"tableJobIndex\", varCnt);\r\n  //     //$(\"input[tableJobIndex*='\" + varCnt + \"']\").removeAttr(\"hasTypeahead\");\r\n  //     ++varCnt;\r\n\r\n\r\n  //   });\r\n\r\n\r\n  //   $(\".pymnttrmclass\").typeahead('destroy');\r\n  //   $(\".pymnttrmclass\")\r\n  //     .typeahead({\r\n  //       hint: false,\r\n  //       highlight: true,\r\n  //       minLength: 1,\r\n  //       limit: 10\r\n  //     }, {\r\n  //       source: substringMatcher(this._PYMNTTERM.map((item) => {\r\n  //         return item.REF_DESC\r\n  //       }))\r\n\r\n\r\n  //     });\r\n\r\n  //   varCnt = 0;\r\n  //   _.each($(this.tblData).find(\".pymnttrmclass\"), (all) => {\r\n  //     $(all).attr(\"tableTermIndex\", varCnt);\r\n\r\n  //     ++varCnt;\r\n\r\n\r\n  //   });\r\n  // }\r\n\r\n  scrollDiv() \r\n  {\r\n\r\n\r\n    $(this.tblHeader).css(\"visibility\",\"visible\");\r\n    // console.log($(this.tblData).position().top);\r\n    // console.log($(this.tblHeader).height());\r\n    // console.log($(this.divRegular).scrollTop());\r\n    $(this.tblHeader).css(\"top\", $(this.divRegular).scrollTop() + $(this.tblData).position().top);\r\n\r\n    var varCol = 0;\r\n    _.each($(this.tblData).find('td'), (item) => {\r\n\r\n      //last two is not really td element\r\n      if (varCol > $(this.tblHeader).find('td').length - 2)\r\n        return;\r\n\r\n      $($(this.tblHeader).find('td')[varCol]).css(\"width\", $(this.tblData).find('td')[varCol].clientWidth + 1);\r\n      ++varCol;\r\n    });\r\n\r\n\r\n  }\r\n\r\n  AmountBlur(item, property) \r\n  {\r\n\r\n    var varConverted = numeral(item[property]).format('0,0.00');\r\n    item[property] = varConverted;\r\n\r\n  }\r\n\r\n  showTalents(item)\r\n  {\r\n\r\n    this._selectedItem = item;\r\n\r\n    this._cache_budget.OBSERVERS.open_modal.forEach((all)=>{\r\n      //all(this.modalIndivMstrTalents.id, true);\r\n      this.isIndivMstrTalentsDisabled=false;\r\n    });\r\n\r\n    //this._dispatcher.dispatch('open.modal', this.modalIndivMstrTalents.id, true);\r\n  }\r\n\r\n\r\n  showTalentMngr(item) \r\n  {\r\n\r\n    this._selectedItem = item;\r\n\r\n    this.fnIndivMstr();\r\n    \r\n  }\r\n\r\n  removeTalentMngr(item)\r\n  {\r\n    item.TALENT_MANAGER = undefined;\r\n\r\n    \r\n     // AURELIA now is not supporting removing of property, changed it to undefined instead\r\n     // delete all.TALENT_MANAGER.CONTRACT_AMT_TMP;\r\n     // delete all.TALENT_MANAGER.INPUT_AMT_TMP;\r\n     // delete all.TALENT_MANAGER.PAY_RATE_FACTOR_TMP;\r\n     // delete all.TALENT_MANAGER.REMARKS;\r\n     //delete all.TALENT_MANAGER;\r\n     \r\n\r\n     this._signal = generateID();\r\n\r\n     this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>{\r\n       all();\r\n     });\r\n\r\n   }\r\n\r\n  //@handle('pass.indiv')\r\n  PassedIndiv(value) \r\n  {\r\n   // if (this.modalIndivMstrManager.id == this._ModalWizard.ids[this._ModalWizard.ids.length - 1]) {\r\n  //    this._ModalWizard.ids.pop();\r\n\r\n\r\n    // this._cache_budget.OBSERVERS.close_modal.forEach((all)=>{\r\n    //   all(this.modalIndivMstrManager.id);\r\n    // });\r\n\r\n      //this._dispatcher.dispatch('close.modal', this.modalIndivMstrManager.id);\r\n      if(this._selectedItem!==undefined)\r\n        if(value.GLOBAL_INDIV_ID==this._selectedItem.GLOBAL_ID)\r\n        {\r\n          toastr.error(\"<strong>Talent Manager cannot be same Personnel</strong>.\", \"Problem occured\");\r\n          return;\r\n        }\r\n\r\n      // this._selectedItem.TALENT_MANAGER = value;\r\n      // this._selectedItem.TALENT_MANAGER.CONTRACT_AMT_TMP = numeral(0).format('0,0.00');\r\n      // this._selectedItem.TALENT_MANAGER.INPUT_AMT_TMP = numeral(0).format('0,0.00');\r\n      // this._selectedItem.TALENT_MANAGER.PAY_RATE_FACTOR_TMP = numeral(0).format('0,0.00');\r\n\r\n\r\n      var varJobTManager = getJobByName(\"TALENT MANAGER\");\r\n      if(parseInt(varJobTManager.COMPANY_ID)!=parseInt(this._cache_obj.USER.COMPANY_ID))\r\n      {\r\n        toastr.error(varJobTManager.JOB_DESC+\" Job is not included on jobs from users company.\", \"Problem occured\");\r\n        varJobTManager.JOB_ID=\"\";\r\n        varJobTManager.JOB_DESC=\"\";\r\n      }\r\n\r\n\r\n      this.getDefaultPymntTerm();\r\n\r\n      this._selectedItem.TALENT_MANAGER = { GLOBAL_INDIV_ID: value.GLOBAL_INDIV_ID, PERSONNEL_NAME: value.PERSONNEL_NAME,\r\n        PERSONNEL_INFO_SRC: value.PERSONNEL_INFO_SRC,\r\n        JOB_ID: varJobTManager.JOB_ID,\r\n        JOB_DESC: varJobTManager.JOB_DESC,\r\n        PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n        PAYMENT_TERM: this.varPymnt.REF_DESC,\r\n        CATEGORY_ID: varJobTManager.CATEGORY_ID,\r\n        CATEGORY_DESC: varJobTManager.CATEGORY_DESC,\r\n        PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n        CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n        INPUT_AMT_TMP: numeral(0).format('0,0.00')\r\n      };  \r\n\r\n      \r\n      this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>\r\n      {\r\n        all();\r\n      });\r\n\r\n      \r\n\r\n    //}\r\n  }\r\n\r\n  getDefaultPymntTerm()\r\n  {\r\n\r\n    if(this.varPymnt==null)\r\n      this.varPymnt=this._PYMNTTERM.find(all => all.REF_GRP_CD == 'PYMNT_TERM_CD' && all.REF_CD == 'DAILY');\r\n\r\n  }\r\n\r\n  fnPassedPersonnels(value)\r\n  {\r\n    //  console.log(value);\r\n    this.getDefaultPymntTerm();\r\n\r\n    value.forEach((val) => {\r\n\r\n      var varJob =  getJobByGlobalCompany(val.GLOBAL_INDIV_ID);\r\n\r\n      if (parseInt(varJob.COMPANY_ID) !== parseInt(this._cache_obj.USER.COMPANY_ID)) {\r\n        toastr.error(varJob.JOB_DESC +\" Job is not included on jobs from users company.\", \"Problem occured\");\r\n        varJob.JOB_ID = \"\";\r\n        varJob.JOB_DESC = \"\";\r\n      }\r\n\r\n      this._Personnel.push({\r\n        GLOBAL_ID: val.GLOBAL_INDIV_ID,\r\n        PERSONNEL_NAME: val.PERSONNEL_NAME,\r\n        PERSONNEL_INFO_SRC: val.PERSONNEL_INFO_SRC,\r\n        JOB_ID: varJob.JOB_ID,\r\n        JOB_DESC: varJob.JOB_DESC,\r\n        PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n        PAYMENT_TERM: this.varPymnt.REF_DESC,\r\n        CATEGORY_ID: varJob.CATEGORY_ID,\r\n        CATEGORY_DESC: varJob.CATEGORY_DESC,\r\n        PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n        CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n        INPUT_AMT_TMP: numeral(0).format('0,0.00'),\r\n        STAFF_WORK_TMP: false,\r\n        CONFIDENTIAL_TMP: false,\r\n        visible: true\r\n          //t_talent_manager:true\r\n        });\r\n\r\n      \r\n    });\r\n\r\n\r\n    this._Personnel.forEach((all) => {\r\n      if (all.STATUS_CD == \"\" || all.STATUS_CD === undefined) {\r\n        all.STATUS_CD = \"\";\r\n      }\r\n      all.ce_value = \"+\";\r\n      all.styleString = this.styleStringHidden;\r\n    });\r\n\r\n\r\n      //this.setPersonnel(tmpgrpMembers) ;\r\n      \r\n      \r\n      this._Personnel.forEach((all)=>{\r\n        var varIndiv = getLookups().GRP_INDIV_MSTR.find((allIndiv)=>allIndiv.GLOBAL_INDIV_ID==all.GLOBAL_ID);\r\n        \r\n        if(varIndiv!==undefined)\r\n        {\r\n         var varJobTManager = getJobByName(\"TALENT MANAGER\");\r\n\r\n         if (parseInt(varJobTManager.COMPANY_ID) != parseInt(this._cache_obj.USER.COMPANY_ID)) {\r\n          toastr.error(varJobTManager.JOB_DESC + \"Job is not included on jobs from users company.\", \"Problem occured\");\r\n          varJobTManager.JOB_ID = \"\";\r\n          varJobTManager.JOB_DESC = \"\";\r\n        }\r\n\r\n        var varTalent = getLookups().GLOBAL_GRP_MSTR.find((allIndiv)=>allIndiv.GLOBAL_GRP_ID==varIndiv.GLOBAL_GRP_ID);\r\n        all.TALENT_MANAGER = { GLOBAL_INDIV_ID: varTalent.GLOBAL_GRP_ID, PERSONNEL_NAME: varTalent.GROUP_NAME,\r\n          PERSONNEL_INFO_SRC: varJobTManager.PERSONNEL_INFO_SRC,\r\n          JOB_ID: varJobTManager.JOB_ID,\r\n          JOB_DESC: varJobTManager.JOB_DESC,\r\n          PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n          PAYMENT_TERM: this.varPymnt.REF_DESC,\r\n          CATEGORY_ID: varJobTManager.CATEGORY_ID,\r\n          CATEGORY_DESC: varJobTManager.CATEGORY_DESC,\r\n          PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n          CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n          INPUT_AMT_TMP: numeral(0).format('0,0.00'),\r\n          STAFF_WORK_TMP: false,\r\n          CONFIDENTIAL_TMP: false\r\n        };  \r\n\r\n        \r\n      }\r\n\r\n    });\r\n      \r\n\r\n      this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>{\r\n        all();\r\n      });\r\n\r\n\r\n    }\r\n\r\n  //@handle('pass.group')\r\n  PassedGroup(value) \r\n  {\r\n\r\n    // if (this.modalIndivMstr.id == this._ModalWizard.ids[this._ModalWizard.ids.length - 1]) {\r\n\r\n\r\n    //   this._ModalWizard.ids.pop();\r\n\r\n\r\n    //   this._cache_obj.OBSERVERS.close_modal.forEach((all)=>{\r\n    //     all(this.modalIndivMstr.id);\r\n    //   });\r\n\r\n\r\n\r\n    // } else \r\n\r\n    if (this.modalIndivMstrTalents.id == this._ModalWizard.ids[this._ModalWizard.ids.length - 1]) {\r\n\r\n      \r\n      //var tmpgrpMembers = this._Personnel;\r\n      \r\n      this.getDefaultPymntTerm();\r\n\r\n      this._selectedItem.TALENTS = value;\r\n\r\n      this._selectedItem.TALENTS.forEach((all)=>{\r\n        if (this._Personnel.find((allReg) => allReg.GLOBAL_ID == all.GLOBAL_INDIV_ID) === undefined) {\r\n          \r\n          var varJob = getJobByGlobalCompany(all.GLOBAL_INDIV_ID);\r\n\r\n          if (parseInt(varJob.COMPANY_ID) != parseInt(this._cache_obj.USER.COMPANY_ID)) {\r\n            toastr.error(varJob.JOB_DESC+\" Job is not included on jobs from users company.\", \"Problem occured\");\r\n            varJob.JOB_ID = \"\";\r\n            varJob.JOB_DESC = \"\";\r\n          }\r\n\r\n          var varTalent = getLookups().GLOBAL_INDIV_WITH_ALIAS.find((allIndiv)=>allIndiv.GLOBAL_INDIV_ID==all.GLOBAL_INDIV_ID);\r\n\r\n          this._Personnel.push({\r\n            GLOBAL_ID: all.GLOBAL_INDIV_ID,\r\n            PERSONNEL_NAME: all.PERSONNEL_NAME,\r\n            PERSONNEL_INFO_SRC: varTalent.PERSONNEL_INFO_SRC,\r\n            JOB_ID: varJob.JOB_ID,\r\n            JOB_DESC: varJob.JOB_DESC,\r\n            PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n            PAYMENT_TERM: this.varPymnt.REF_DESC,\r\n            CATEGORY_ID: varJob.CATEGORY_ID,\r\n            CATEGORY_DESC: varJob.CATEGORY_DESC,\r\n            PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n            CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n            INPUT_AMT_TMP: numeral(0).format('0,0.00'),\r\n            STAFF_WORK_TMP: false,\r\n            CONFIDENTIAL_TMP: false,\r\n            GLOBAL_ID_LINK: this._selectedItem.GLOBAL_ID,\r\n            TALENT_MANAGER: {\r\n              GLOBAL_INDIV_ID: this._selectedItem.GLOBAL_ID,\r\n              PERSONNEL_NAME: this._selectedItem.PERSONNEL_NAME\r\n            }\r\n          });\r\n        }\r\n      });\r\n      \r\n\r\n      this._ModalWizard.ids.pop();\r\n\r\n\r\n\r\n      // this._cache_budget.OBSERVERS.close_modal.forEach((all)=>{\r\n      //   all(this.modalIndivMstrTalents.id);\r\n      // });\r\n\r\n\r\n      this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>{\r\n        all();\r\n      });\r\n\r\n    }\r\n\r\n    this._signal = generateID();\r\n\r\n    // setTimeout(() => {\r\n    //   this.fnReloadTypeahead();\r\n    //  }, 5000);\r\n  }\r\n\r\n  //@handle('refreshPersonnelTab')\r\n  refreshOnSelect(personnel) \r\n  {\r\n    $(this.tblHeader).css(\"visibility\",\"hidden\");\r\n  }\r\n\r\n  moveTrigger(value) \r\n  {\r\n\r\n    if (value == \"up\") \r\n    {\r\n      if (this._currentIndex > 0) \r\n      {\r\n\r\n        this._Personnel.splice(this._currentIndex-1, 0, this._Personnel[this._currentIndex]);\r\n        var varCopy = this._Personnel.splice(this._currentIndex + 1, 1);\r\n        this._currentIndex = this._currentIndex-1;\r\n\r\n      }\r\n\r\n    } \r\n    else \r\n    {\r\n\r\n      if (this._currentIndex < this._Personnel.length - 1) {\r\n\r\n       // var varIndex=this._currentIndex + 1;\r\n       //  var varFinish=false;\r\n       //  while (!varFinish) {\r\n       //    if (this._Personnel[varIndex].GROUP_ORDER == -1) {\r\n       //        ++varIndex;\r\n       //        console.log(varIndex);\r\n       //    }\r\n       //    else\r\n       //    {\r\n       //        varFinish=true;\r\n       //    }\r\n\r\n\r\n       //    if(varIndex<0)\r\n       //    {\r\n       //      varFinish=true;\r\n       //      varIndex=this._Personnel.length - 1;\r\n       //    }\r\n       //  }\r\n\r\n       //  this._Personnel.splice(this._currentIndex + 2, 0, this._Personnel[this._currentIndex]);\r\n       //  var varCopy = this._Personnel.splice(this._currentIndex, 1);\r\n       //  this._currentIndex = this._currentIndex + 1;\r\n\r\n       this._Personnel.splice(this._currentIndex + 2, 0, this._Personnel[this._currentIndex]);\r\n       var varCopy = this._Personnel.splice(this._currentIndex, 1);\r\n       this._currentIndex = this._currentIndex + 1;\r\n     }\r\n   }\r\n\r\n    //have to do bec refreshing on filter arrangement will not be refreshed.\r\n    this._signal = generateID();\r\n  }\r\n\r\n  focusTrigger(index)\r\n  {\r\n\r\n    this._currentIndex = index;\r\n    \r\n  }\r\n\r\n  savePersonnel(tag) \r\n  {\r\n    \r\n    var varErrorDuplicate = \"\";\r\n    var varErrorJobTerms = \"\";\r\n    var varErrorCheckTalentManager = \"\";\r\n\r\n    var varDuplicateValidation = [];\r\n\r\n    var varI=0;//eliminate talent manager\r\n    var varJ=0;//eliminate talent manager\r\n\r\n    for (var i = 0; i <= this._Personnel.length - 1; ++i) {\r\n      \r\n      \r\n      for (var j = 0; j <= this._Personnel.length - 1; ++j) {\r\n\r\n        if(this._Personnel[j].GROUP_ORDER!==-1 && this._Personnel[i].GROUP_ORDER!==-1)\r\n        {\r\n          if (this._Personnel[j].PERSONNEL_NAME == this._Personnel[i].PERSONNEL_NAME &&\r\n            this._Personnel[j].JOB_ID == this._Personnel[i].JOB_ID && i != j && varDuplicateValidation.find((all) => all == this._Personnel[j].PERSONNEL_NAME) == undefined && (this._Personnel[i].PERSONNEL_NAME == null ? \"\" : this._Personnel[i].PERSONNEL_NAME.trim()) != \"\") {\r\n\r\n            varErrorDuplicate += \"<br /><br />\" + this._Personnel[j].PERSONNEL_NAME + \"-\" + this._Personnel[j].JOB_DESC + \" Row(\" + (varJ + 1) + \").\";\r\n\r\n          varDuplicateValidation.push(this._Personnel[j].PERSONNEL_NAME);\r\n        }\r\n        \r\n      }\r\n\r\n      if(this._Personnel[j].GROUP_ORDER!==-1)\r\n      {\r\n        ++varJ;\r\n      }\r\n      \r\n    }\r\n\r\n    if (this._Personnel[i].GROUP_ORDER !== -1) {\r\n      ++varI;\r\n    }\r\n  }\r\n\r\n    varI=0;//eliminate talent manager\r\n    varJ=0;//eliminate talent manager\r\n\r\n    for (var j = 0; j <= this._Personnel.length - 1; ++j) {\r\n\r\n      if(this._Personnel[j].GROUP_ORDER!==-1)\r\n        if (this._Personnel[j].JOB_ID === undefined || this._Personnel[j].JOB_ID == \"\" || this._Personnel[j].PYMNT_TERM_CD == \"\" || this._Personnel[j].PYMNT_TERM_CD === undefined || this._Personnel[j].JOB_ID === null || this._Personnel[j].PYMNT_TERM_CD === null)\r\n        { \r\n          varErrorJobTerms += \"<br /><br />\" + \"Row (\" + (varJ + 1) + \").\";\r\n        }\r\n\r\n\r\n        if(this._Personnel[j].GROUP_ORDER!==-1)\r\n        {\r\n          ++varJ;\r\n        }\r\n        \r\n      }\r\n\r\n\r\n      if (varErrorDuplicate != \"\") {\r\n        toastr.error(\"<strong>Duplicate Personnel and Job</strong>\" + varErrorDuplicate + \"<br /><br />Saving cancelled.\", \"Problem occured\");\r\n      }\r\n\r\n      if (varErrorJobTerms != \"\") {\r\n        toastr.error(\"<strong>JOB/PAYMENT TERM not set</strong>\" + varErrorJobTerms + \"<br /><br />Saving cancelled.\", \"Problem occured\");\r\n      }\r\n\r\n\r\n      if (varErrorDuplicate != \"\" || varErrorJobTerms!=\"\" || varErrorCheckTalentManager!=\"\") {\r\n        return;\r\n      }\r\n\r\n      \r\n\r\n      var getMax = EntityQuery().from('BDGT_TMPL_DTL').orderByDesc('BDGT_TMPL_DTL_ID').take(1);\r\n      EntityManager().executeQuery(getMax).then((successMax) => {\r\n        var getMax = 1;\r\n        \r\n        if (successMax.results.length > 0)\r\n          getMax = successMax.results[0].BDGT_TMPL_DTL_ID + 1;\r\n\r\n        var varIndex = 1;\r\n        \r\n\r\n        var getAllDtl = EntityQuery().from('BDGT_TMPL_DTL').where(\"BDGT_TMPL_ID\", '==', this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n        EntityManager().executeQuery(getAllDtl).then((foundDtl) => {\r\n\r\n          this._Personnel.forEach((item) => {\r\n            if (item.BDGT_TMPL_DTL_ID === undefined) {\r\n              item.BDGT_TMPL_DTL_ID_TMP = getMax;\r\n              ++getMax;\r\n            }\r\n          });\r\n\r\n          this._Personnel.forEach((item) => {\r\n              if (item.TALENT_MANAGER !== undefined && item.BDGT_TMPL_DTL_ID_LINK_TMP !== undefined && item.BDGT_TMPL_DTL_ID_LINK_TMP !== 0) {\r\n\r\n              if (item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP == undefined) {\r\n                item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP = getMax;\r\n                item.BDGT_TMPL_DTL_ID_LINK = getMax;\r\n                item.TALENT_MANAGER.IsNewTalent = true;\r\n                ++getMax;\r\n              }\r\n\r\n\r\n            }\r\n\r\n          });\r\n\r\n\r\n\r\n          this._Personnel.forEach((item) => {\r\n           \r\n\r\n            if (item.BDGT_TMPL_DTL_ID === undefined && item.GROUP_ORDER !== -1) {\r\n              \r\n              var varInsert = EntityManager().createEntity('BDGT_TMPL_DTL', {\r\n                BDGT_TMPL_DTL_ID: item.BDGT_TMPL_DTL_ID_TMP,\r\n                BDGT_TMPL_ID: this._cache_budget.HEADER.BDGT_TMPL_ID,\r\n                JOB_ID: item.JOB_ID,\r\n                GLOBAL_ID: item.GLOBAL_ID,\r\n                CONTRACT_AMT: item.CONTRACT_AMT_TMP.replace(/,/g, ''),\r\n                CATEGORY_ID: item.CATEGORY_ID,\r\n                STAFF_WORK: (item.STAFF_WORK_TMP === undefined ? 0 : (item.STAFF_WORK_TMP == true ? 1 : 0)),\r\n                PYMNT_TERM_CD: item.PYMNT_TERM_CD,\r\n                PAY_TO_PERSON_FL: 'T',\r\n                PAY_RATE_FACTOR: item.PAY_RATE_FACTOR_TMP.replace(/,/g, ''),\r\n                BUDGET_AMT: item.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                TAPING_DAY_CNT: this._cache_budget.HEADER.TAPING_DAYS,\r\n                PERSONNEL_CLASS_CD: (this.toPersonModel.USE != \"STAFF\" ? \"Mainstay\" : \"Staff\"),\r\n                REMARKS: item.REMARKS,\r\n                PERSONNEL_INFO_SRC: item.PERSONNEL_INFO_SRC,\r\n                PERSONNEL_NAME: (item.BLANK_PERSONNEL_NAME !== undefined ? item.BLANK_PERSONNEL_NAME : item.PERSONNEL_NAME),\r\n                CREATED_BY: this._cache_obj.USER.USER_ID,\r\n                CREATED_DT: new Date(),\r\n                LAST_UPDATED_BY: this._cache_obj.USER.USER_ID,\r\n                LAST_UPDATED_DT: new Date(),\r\n                INPUT_AMT: item.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                EPISODES: this._cache_budget.HEADER.EPISODES,\r\n                CONFIDENTIAL: (item.CONFIDENTIAL_TMP === undefined ? 0 : (item.CONFIDENTIAL_TMP == true ? 1 : 0)),\r\n                PER_TAPING_DAY_RATE: 0,\r\n                PERSONNEL_CLASS_TYPE: this.getPersonnelClassType(),\r\n                POOL_RECORD: (item.POOL_RECORD_TMP==null || item.POOL_RECORD_TMP==undefined?0:(item.POOL_RECORD_TMP == true ? 1 : 0)),\r\n                GROUP_ORDER: varIndex,\r\n                GLOBAL_ID_LINK: (item.TALENT_MANAGER !== undefined && item.TALENT_MANAGER !== null ? item.TALENT_MANAGER.GLOBAL_INDIV_ID : \"NONE\"),\r\n                BDGT_TMPL_DTL_ID_LINK: (item.BDGT_TMPL_DTL_ID_LINK !== undefined && item.BDGT_TMPL_DTL_ID_LINK !== null? item.BDGT_TMPL_DTL_ID_LINK : 0),\r\n                WITH_TALENT_MANAGER: (item.TALENT_MANAGER !== undefined && item.TALENT_MANAGER !== null ? '1' : '0')\r\n              });\r\n              \r\n\r\n              EntityManager().addEntity(varInsert);\r\n\r\n            //has talent manager\r\n            if (item.TALENT_MANAGER !== undefined) {\r\n              \r\n              var varInsertTM = EntityManager().createEntity('BDGT_TMPL_DTL', {\r\n                BDGT_TMPL_DTL_ID: item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP,\r\n                BDGT_TMPL_ID: this._cache_budget.HEADER.BDGT_TMPL_ID,\r\n                JOB_ID: item.TALENT_MANAGER.JOB_ID,\r\n                GLOBAL_ID: item.TALENT_MANAGER.GLOBAL_INDIV_ID,\r\n                CONTRACT_AMT: item.TALENT_MANAGER.CONTRACT_AMT_TMP.replace(/,/g, ''),\r\n                CATEGORY_ID: item.TALENT_MANAGER.CATEGORY_ID,\r\n                STAFF_WORK: 0,\r\n                PYMNT_TERM_CD: item.PYMNT_TERM_CD,\r\n                PAY_TO_PERSON_FL: 'T',\r\n                PAY_RATE_FACTOR: item.TALENT_MANAGER.PAY_RATE_FACTOR_TMP.replace(/,/g, ''),\r\n                BUDGET_AMT: item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                TAPING_DAY_CNT: this._cache_budget.HEADER.TAPING_DAYS,\r\n                PERSONNEL_CLASS_CD: (this.toPersonModel.USE != \"STAFF\" ? \"Mainstay\" : \"Staff\"),\r\n                REMARKS: item.TALENT_MANAGER.REMARKS,\r\n                PERSONNEL_INFO_SRC: item.PERSONNEL_INFO_SRC,\r\n                PERSONNEL_NAME: item.TALENT_MANAGER.PERSONNEL_NAME,\r\n                CREATED_BY: this._cache_obj.USER.USER_ID,\r\n                CREATED_DT: new Date(),\r\n                LAST_UPDATED_BY: this._cache_obj.USER.USER_ID,\r\n                LAST_UPDATED_DT: new Date(),\r\n                INPUT_AMT: item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                EPISODES: this._cache_budget.HEADER.EPISODES,\r\n                CONFIDENTIAL: 0,\r\n                PER_TAPING_DAY_RATE: 0,\r\n                PERSONNEL_CLASS_TYPE: this.getPersonnelClassType(),\r\n                POOL_RECORD: 0,\r\n                GROUP_ORDER: -1,\r\n                WITH_TALENT_MANAGER: '0',\r\n                GLOBAL_ID_LINK: 'NONE',\r\n                BDGT_TMPL_DTL_ID_LINK:0\r\n              });\r\n\r\n              EntityManager().addEntity(varInsertTM);\r\n            }\r\n\r\n          } else if (item.REMOVE == true) {\r\n            \r\n            if (item.TALENT_MANAGER !== undefined) {\r\n              var varTalentMngrToDelete = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n              \r\n              varTalentMngrToDelete.entityAspect.setDeleted();\r\n            }\r\n            \r\n            var varTalentToDelete = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID);\r\n\r\n            \r\n            varTalentToDelete.entityAspect.setDeleted();\r\n            // item.entityAspect.setDeleted();     \r\n            \r\n\r\n          } else {\r\n           \r\n            var varTalentToEdit = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID);\r\n\r\n            varTalentToEdit.JOB_ID = item.JOB_ID;\r\n            \r\n            varTalentToEdit.GLOBAL_ID = item.GLOBAL_ID;\r\n            varTalentToEdit.CONTRACT_AMT = item.CONTRACT_AMT_TMP.replace(/,/g, '');\r\n            varTalentToEdit.CATEGORY_ID = item.CATEGORY_ID;\r\n            varTalentToEdit.STAFF_WORK = (item.STAFF_WORK_TMP === undefined ? 0 : (item.STAFF_WORK_TMP == true ? 1 : 0));\r\n            varTalentToEdit.PYMNT_TERM_CD = item.PYMNT_TERM_CD;\r\n            varTalentToEdit.PAY_RATE_FACTOR = item.PAY_RATE_FACTOR_TMP.replace(/,/g, '');\r\n            varTalentToEdit.BUDGET_AMT = item.INPUT_AMT_TMP.replace(/,/g, '');\r\n            varTalentToEdit.TAPING_DAY_CNT = this._cache_budget.HEADER.TAPING_DAYS;\r\n            varTalentToEdit.REMARKS = item.REMARKS;\r\n            varTalentToEdit.PERSONNEL_INFO_SRC = item.PERSONNEL_INFO_SRC;\r\n            varTalentToEdit.PERSONNEL_NAME = (item.BLANK_PERSONNEL_NAME !== undefined ? item.BLANK_PERSONNEL_NAME : item.PERSONNEL_NAME);\r\n            varTalentToEdit.LAST_UPDATED_BY = this._cache_obj.USER.USER_ID;\r\n            varTalentToEdit.LAST_UPDATED_DT = new Date();\r\n            varTalentToEdit.INPUT_AMT = item.INPUT_AMT_TMP.replace(/,/g, '');\r\n            varTalentToEdit.EPISODES = this._cache_budget.HEADER.EPISODES;\r\n            varTalentToEdit.CONFIDENTIAL = (item.CONFIDENTIAL_TMP === undefined ? 0 : (item.CONFIDENTIAL_TMP == true ? 1 : 0));\r\n            varTalentToEdit.POOL_RECORD = (item.POOL_RECORD_TMP==null || item.POOL_RECORD_TMP==undefined?0:(item.POOL_RECORD_TMP == true ? 1 : 0));\r\n\r\n            if (varTalentToEdit.GROUP_ORDER !== -1)\r\n              varTalentToEdit.GROUP_ORDER = varIndex;\r\n\r\n            varTalentToEdit.GLOBAL_ID_LINK = (item.TALENT_MANAGER !== undefined && item.TALENT_MANAGER !== null ? item.TALENT_MANAGER.GLOBAL_INDIV_ID : \"NONE\");\r\n            varTalentToEdit.BDGT_TMPL_DTL_ID_LINK = (item.BDGT_TMPL_DTL_ID_LINK !== undefined && item.BDGT_TMPL_DTL_ID_LINK !== null ? item.BDGT_TMPL_DTL_ID_LINK : 0);\r\n            varTalentToEdit.WITH_TALENT_MANAGER = (item.TALENT_MANAGER !== undefined && item.TALENT_MANAGER!==null ? '1' : '0');\r\n\r\n\r\n            if (item.TALENT_MANAGER !== undefined) {\r\n\r\n             \r\n\r\n                if (item.BDGT_TMPL_DTL_ID_LINK_TMP !== undefined && item.BDGT_TMPL_DTL_ID_LINK_TMP !== 0) {\r\n                //check existing linked talent manager before saving check if not match\r\n                var varCheckTalent = this._PersonnelTM.find((allTalent) => allTalent.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n                save\r\n                if (varCheckTalent !== undefined) {\r\n\r\n                    if (varCheckTalent.BDGT_TMPL_DTL_ID !== item.BDGT_TMPL_DTL_ID_LINK && item.BDGT_TMPL_DTL_ID_LINK != 0) {\r\n                        \r\n                    var varTalentMngrToEdit = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n                    \r\n                    varTalentMngrToEdit.entityAspect.setDeleted();\r\n                    // //varCheckTalent.entityAspect.setDeleted();\r\n                    //   var varRemoveTalent = this._Personnel.find((allTalent) => allTalent.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n                    //   if (varRemoveTalent !== undefined) {\r\n                    //     var getForDelete = EntityQuery().from('BDGT_TMPL_DTL').where(\"BDGT_TMPL_DTL_ID\", '==', varRemoveTalent.BDGT_TMPL_DTL_ID);\r\n                    //     EntityManager().executeQuery(getForDelete).then((found) => {\r\n                    //       found.results[0].setDeleted();\r\n                    //     });\r\n\r\n                    //     // varRemoveTalent.entityAspect.setDeleted();      \r\n                    //   }\r\n                  } else {\r\n                    var varTalentMngrToEdit = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n                    varTalentMngrToEdit.CONTRACT_AMT = item.TALENT_MANAGER.CONTRACT_AMT_TMP.replace(/,/g, '');\r\n                    varTalentMngrToEdit.PAY_RATE_FACTOR = item.TALENT_MANAGER.PAY_RATE_FACTOR_TMP.replace(/,/g, '');\r\n                    varTalentMngrToEdit.INPUT_AMT = item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, '');\r\n                    varTalentMngrToEdit.BUDGET_AMT = item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, '');\r\n                    varTalentMngrToEdit.REMARKS = item.TALENT_MANAGER.REMARKS;\r\n\r\n                  }\r\n\r\n                }\r\n              }\r\n\r\n              if (item.TALENT_MANAGER.IsNewTalent) {\r\n                //add new Talent Manager, existing Talent Manager should be remove before adding new\r\n                var varInsertTM = EntityManager().createEntity('BDGT_TMPL_DTL', {\r\n                  BDGT_TMPL_DTL_ID: item.TALENT_MANAGER.BDGT_TMPL_DTL_ID_TMP,\r\n                  BDGT_TMPL_ID: this._cache_budget.HEADER.BDGT_TMPL_ID,\r\n                  JOB_ID: item.TALENT_MANAGER.JOB_ID,\r\n                  GLOBAL_ID: item.TALENT_MANAGER.GLOBAL_INDIV_ID,\r\n                  CONTRACT_AMT: item.TALENT_MANAGER.CONTRACT_AMT_TMP.replace(/,/g, ''),\r\n                  CATEGORY_ID: item.TALENT_MANAGER.CATEGORY_ID,\r\n                  STAFF_WORK: 0,\r\n                  PYMNT_TERM_CD: item.PYMNT_TERM_CD,\r\n                  PAY_TO_PERSON_FL: 'T',\r\n                  PAY_RATE_FACTOR: item.TALENT_MANAGER.PAY_RATE_FACTOR_TMP.replace(/,/g, ''),\r\n                  BUDGET_AMT: item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                  TAPING_DAY_CNT: this._cache_budget.HEADER.TAPING_DAYS,\r\n                  PERSONNEL_CLASS_CD: (this.toPersonModel.USE != \"STAFF\" ? \"Mainstay\" : \"Staff\"),\r\n                  REMARKS: item.TALENT_MANAGER.REMARKS,\r\n                  PERSONNEL_INFO_SRC: item.PERSONNEL_INFO_SRC,\r\n                  PERSONNEL_NAME: item.TALENT_MANAGER.PERSONNEL_NAME,\r\n                  CREATED_BY: this._cache_obj.USER.USER_ID,\r\n                  CREATED_DT: new Date(),\r\n                  LAST_UPDATED_BY: this._cache_obj.USER.USER_ID,\r\n                  LAST_UPDATED_DT: new Date(),\r\n                  INPUT_AMT: item.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''),\r\n                  EPISODES: this._cache_budget.HEADER.EPISODES,\r\n                  CONFIDENTIAL: 0,\r\n                  PER_TAPING_DAY_RATE: 0,\r\n                  PERSONNEL_CLASS_TYPE: this.getPersonnelClassType(),\r\n                  POOL_RECORD: 0,\r\n                  GROUP_ORDER: -1,\r\n                  WITH_TALENT_MANAGER:'0',\r\n                  GLOBAL_ID_LINK: 'NONE',\r\n                  BDGT_TMPL_DTL_ID_LINK:0,\r\n                });\r\n                EntityManager().addEntity(varInsertTM);\r\n              }\r\n\r\n            } else if (item.TALENT_MANAGER === undefined && item.BDGT_TMPL_DTL_ID_LINK_TMP !== undefined  && item.BDGT_TMPL_DTL_ID_LINK_TMP !== 0) {\r\n\r\n              var varTalentMngrToDelete = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID_LINK_TMP);\r\n\r\n              if (varTalentMngrToDelete !== undefined)\r\n              {\r\n                  consoole.log(item.BDGT_TMPL_DTL_ID);\r\n                var varTalentToEdit = foundDtl.results.find((allTm) => allTm.BDGT_TMPL_DTL_ID == item.BDGT_TMPL_DTL_ID);\r\n                varTalentMngrToDelete.entityAspect.setDeleted();\r\n\r\n                varTalentToEdit.GLOBAL_ID_LINK = 'NONE';\r\n                varTalentToEdit.BDGT_TMPL_DTL_ID_LINK = 0;\r\n                varTalentToEdit.WITH_TALENT_MANAGER = '0';\r\n\r\n              }\r\n              \r\n            }\r\n\r\n          }\r\n\r\n          ++varIndex;\r\n\r\n        });\r\n\r\nEntityManager().saveChanges().then((success) => {\r\n  this.fnCheckBudget(this._cache_budget.HEADER.BDGT_TMPL_ID);\r\n  toastr.success(\"Succesfully Saved\", this.toPersonModel.USE);\r\n\r\n  if(tag==1)\r\n    this.fnSequenceDispatch();\r\n\r\n}, (fail) => {\r\n\r\n  EntityManager().getEntities().forEach(function(entity) {\r\n    var errors = entity.entityAspect.getValidationErrors();\r\n    if (errors.length > 0)\r\n      console.log(errors);\r\n  });\r\n  console.log(fail);\r\n  toastr.error(\"Error Occured\",\r\n    fail);\r\n\r\n  if(tag==1)\r\n    this.fnSequenceDispatch();\r\n  \r\n\r\n});\r\n\r\n\r\n      }); //foundDtl\r\n\r\n\r\n\r\n\r\n\r\n\r\n    });//max dtl\r\n\r\n}\r\n\r\nfnSequenceDispatch()\r\n{\r\n\r\n  if (this.toPersonModel.USE == \"REGULAR\")\r\n  {\r\n\r\n    this._cache_budget.OBSERVERS.copy_template.forEach((all)=>{\r\n      all('SEMI_REGULAR');\r\n    });\r\n\r\n  }\r\n  else if (this.toPersonModel.USE == \"SEMI_REGULAR\")\r\n  {\r\n\r\n    this._cache_budget.OBSERVERS.copy_template.forEach((all)=>{\r\n      all('STAFF');\r\n    });\r\n\r\n  }\r\n  else if (this.toPersonModel.USE == \"STAFF\")\r\n  {\r\n\r\n    this._cache_budget.OBSERVERS.copy_template_guest.forEach((all)=>{\r\n     all();\r\n   }); \r\n\r\n  }\r\n\r\n\r\n  \r\n}\r\n\r\ngetPersonnelClassType()\r\n{\r\n  if(this.toPersonModel.USE=='REGULAR')\r\n  {\r\n    return 'Regular';\r\n  }\r\n  else if(this.toPersonModel.USE=='SEMI_REGULAR')\r\n  {\r\n    return 'Semi-Regular';\r\n  }\r\n  else\r\n    return 'Staff'; \r\n}\r\n\r\nfnRegularBlurEvt(item, property, index, BDGT_TMPL_DTL_ID)\r\n{\r\n\r\n\r\n if (property == \"TERM\") {\r\n  if($(\"input[tableTermIndex*='\" + index + \"']\").val()===undefined) return;\r\n  this._Personnel[index].PAYMENT_TERM = $(\"input[tableTermIndex*='\" + index + \"']\").val().toUpperCase();\r\n\r\n  var varPaymentTerm=this._Personnel[index].PAYMENT_TERM.trim();\r\n  var varFound = this._PYMNTTERM.find((all) => {\r\n    return varPaymentTerm == all.REF_DESC.trim();\r\n  });\r\n\r\n\r\n  if (varFound !== undefined) {\r\n    this._Personnel[index].PYMNT_TERM_CD = varFound.REF_CD;\r\n  } else\r\n  this._Personnel[index].PYMNT_TERM_CD = \"\";\r\n\r\n\r\n}\r\n\r\n}\r\n\r\nfnBlankPersonnelRegular()\r\n{\r\n  \r\n  this.getDefaultPymntTerm();\r\n\r\n  this._Personnel.push({visible:true,PAY_RATE_FACTOR_TMP: numeral(1).format('0,0.00'),\r\n    CONTRACT_AMT_TMP: numeral(0).format('0,0.00'),\r\n    INPUT_AMT_TMP: numeral(0).format('0,0.00'),\r\n    PYMNT_TERM_CD: this.varPymnt.REF_CD,\r\n    PAYMENT_TERM: this.varPymnt.REF_DESC\r\n  });\r\n\r\n  var varBudgetLast = this._Personnel[this._Personnel.length - 1];\r\n  varBudgetLast.ce_value = \"+\";\r\n  varBudgetLast.styleString = this.styleStringHidden;\r\n\r\n    // setTimeout(()=>{this.fnReloadTypeahead();},500);\r\n    \r\n    this._signal = generateID();\r\n\r\n    this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>{\r\n      all();\r\n    });\r\n\r\n    //this._cache_budget.CALLER.ACTION='reset.summary';\r\n\r\n    //this._dispatcher.dispatch('reset.summary');\r\n  }\r\n\r\n  chkRemove(item)\r\n  {\r\n    if(item.REMOVE)\r\n    {\r\n      item.REMOVE=false;\r\n    }\r\n    else\r\n    {\r\n      item.REMOVE=true;\r\n    }\r\n  }\r\n\r\n  removeRegular(index) \r\n  {\r\n   \r\n    var varRemoved = this._Personnel.splice(index, 1);\r\n    this._signal = generateID();\r\n    //this._cache_budget.CALLER.ACTION='reset.summary';\r\n    this._cache_budget.OBSERVERS.reset_summary.forEach((all)=>{\r\n      all();\r\n    });\r\n    //this._dispatcher.dispatch('reset.summary');\r\n  }\r\n\r\n  fnIndivMstrTalents(){\r\n    this.dialogService.open({\r\n      viewModel: globalindivmstr\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        \r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n  fnIndivMstr()\r\n  {\r\n    this.dialogService.open({\r\n      viewModel: indivmstr\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        this.PassedIndiv(response.output);\r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n  fnModalJob()\r\n  {\r\n    this.dialogService.open({\r\n      viewModel: job\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        this.passJob(response.output);\r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  fnModalPaymentTerm()\r\n  {\r\n    this.dialogService.open({\r\n      viewModel: paymentterm\r\n    }).whenClosed(response => {\r\n      \r\n      if (!response.wasCancelled) {\r\n        this.passTerm(response.output);\r\n      } else {\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  passTerm(term) \r\n  {\r\n\r\n    var index = this._Index;\r\n    \r\n    this._Personnel[index].PYMNT_TERM_CD = term.REF_CD;\r\n    this._Personnel[index].PAYMENT_TERM = term.REF_DESC;\r\n    \r\n  }\r\n\r\n  fnIndivMstrManager()\r\n  {\r\n   this.dialogService.open({\r\n    viewModel: globalindivmstr\r\n   }).whenClosed(response => {\r\n    \r\n    if (!response.wasCancelled) {\r\n      this.fnPassedPersonnels(response.output);\r\n    } else {\r\n      \r\n    }\r\n  });\r\n}\r\n}","import {bindable,inject} from 'aurelia-framework';\r\nimport { cache_obj } from 'cache_obj';\r\nimport { cache_budget } from 'ppfcs/cache_budget';\r\nimport {EntityManager,EntityQuery} from 'entity-manager-factory';\r\nimport {generateID} from 'entity-manager-factory';\r\n//import {handle, Dispatcher} from 'aurelia-flux';  \r\nimport {getLookups} from 'masterfiles';\r\nimport {  substringMatcher } from 'helpers';\r\nimport typeahead from 'typeahead';\r\nimport settings from 'settings';\r\nimport _ from 'underscore';\r\nimport numeral from 'numeral';\r\nimport toastr from \"toastr\";\r\nimport {  MultiObserver }from 'multi-observer';\r\n\r\n@inject(cache_obj,cache_budget,MultiObserver)\r\nexport class SummaryCustomElement {\r\n\r\n  @bindable to;\r\n  _cache_obj = null;\r\n  //_dispatcher;\r\n  _enableAdd=false;\r\n  _enableRemove=false;\r\n  _signal;\r\n  _PYMNTTERM;\r\n  _multiObserver;\r\n  _INPUT_AMT_MAINSTAY=0;\r\n  _INPUT_AMT_STAFF=0;\r\n  _INPUT_AMT_GUEST=0;\r\n  _INPUT_AMT_TOTAL=0;\r\n  varObserveSubscriptions=[];\r\n  _cache_budget = null;\r\n  constructor(cache_obj, cache_budget, multiObserver) {\r\n    this._cache_obj = cache_obj;\r\n    this._cache_budget = cache_budget;\r\n    this._multiObserver=multiObserver;\r\n\r\n    this._cache_obj.OBSERVERS.budget_dialog.push((val) => {\r\n      this.fnCheckSummary(val);\r\n    });\r\n\r\n    this._cache_budget.OBSERVERS.reset_summary.push(() => {\r\n      this.fnResetSummarySubscription();\r\n    });\r\n\r\n  }\r\n\r\n  fnCheckAll(){\r\n\r\n    this._INPUT_AMT_MAINSTAY=0;\r\n    this._INPUT_AMT_TOTAL=0;\r\n    this._cache_budget._INPUT_AMT_REGULAR=0;\r\n    this._cache_budget._INPUT_AMT_SEMI_REGULAR=0;\r\n\r\n    this._cache_budget.REGULAR.forEach((all)=>{\r\n\r\n      if (this._cache_obj.ALLOW_PASS_CONFIDENTIAL || !all.CONFIDENTIAL_TMP) {\r\n        if (all.GROUP_ORDER !== -1)\r\n          if (all.INPUT_AMT_TMP != \"\" && all.INPUT_AMT_TMP != null && all.INPUT_AMT_TMP != undefined) {\r\n            this._INPUT_AMT_MAINSTAY += parseFloat(all.INPUT_AMT_TMP.replace(/,/g, ''));\r\n            \r\n          }\r\n\r\n          if (all.TALENT_MANAGER) {\r\n            if (all.TALENT_MANAGER.INPUT_AMT_TMP != \"\" && all.TALENT_MANAGER.INPUT_AMT_TMP != null && all.TALENT_MANAGER.INPUT_AMT_TMP != undefined) {\r\n              this._INPUT_AMT_MAINSTAY += parseFloat(all.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''));\r\n\r\n            }            \r\n          }\r\n        }\r\n      });\r\n\r\n    this._cache_budget._INPUT_AMT_REGULAR = numeral(this._INPUT_AMT_MAINSTAY).format('0,0.00');\r\n\r\n    this._cache_budget.SEMI_REGULAR.forEach((all)=>{\r\n\r\n      if (all.INPUT_AMT_TMP != \"\" && all.INPUT_AMT_TMP != null && all.INPUT_AMT_TMP != undefined) {\r\n        if (all.GROUP_ORDER !== -1) {\r\n          if (this._cache_obj.ALLOW_PASS_CONFIDENTIAL || !all.CONFIDENTIAL_TMP)\r\n            this._INPUT_AMT_MAINSTAY += parseFloat(all.INPUT_AMT_TMP.replace(/,/g, ''));\r\n          this._cache_budget._INPUT_AMT_SEMI_REGULAR+=parseFloat(all.INPUT_AMT_TMP.replace(/,/g, ''));\r\n        }\r\n\r\n        if (all.TALENT_MANAGER) {\r\n          if (all.TALENT_MANAGER.INPUT_AMT_TMP != \"\" && all.TALENT_MANAGER.INPUT_AMT_TMP != null && all.TALENT_MANAGER.INPUT_AMT_TMP != undefined) {\r\n            this._INPUT_AMT_MAINSTAY += parseFloat(all.TALENT_MANAGER.INPUT_AMT_TMP .replace(/,/g, ''));\r\n            this._cache_budget._INPUT_AMT_SEMI_REGULAR+=parseFloat(all.TALENT_MANAGER.INPUT_AMT_TMP.replace(/,/g, ''));\r\n          }            \r\n        }\r\n\r\n      }\r\n\r\n    });\r\n    \r\n    this._INPUT_AMT_TOTAL=this._INPUT_AMT_MAINSTAY;\r\n    this._INPUT_AMT_MAINSTAY=numeral(this._INPUT_AMT_MAINSTAY).format('0,0.00');\r\n\r\n    this._cache_budget._INPUT_AMT_SEMI_REGULAR=numeral(this._cache_budget._INPUT_AMT_SEMI_REGULAR).format('0,0.00');\r\n\r\n    this._INPUT_AMT_STAFF=0;\r\n    this._cache_budget._INPUT_AMT_STAFF=0; \r\n\r\n    this._cache_budget.STAFF.forEach((all)=>{\r\n\r\n      if (all.INPUT_AMT_TMP != \"\" && all.INPUT_AMT_TMP != null && all.INPUT_AMT_TMP != undefined)\r\n      {\r\n\r\n        if (all.GROUP_ORDER !== -1)\r\n        {\r\n\r\n          if (this._cache_obj.ALLOW_PASS_CONFIDENTIAL || !all.CONFIDENTIAL_TMP)\r\n            this._INPUT_AMT_STAFF += parseFloat(all.INPUT_AMT_TMP.replace(/,/g, ''));\r\n        }\r\n\r\n        if (all.TALENT_MANAGER) \r\n        {\r\n\r\n          if (all.TALENT_MANAGER.INPUT_AMT_TMP != \"\" && all.TALENT_MANAGER.INPUT_AMT_TMP != null && all.TALENT_MANAGER.INPUT_AMT_TMP != undefined) {\r\n            this._INPUT_AMT_STAFF += parseFloat(all.TALENT_MANAGER.INPUT_AMT_TMP .replace(/,/g, ''));\r\n          }          \r\n\r\n        }\r\n\r\n      }\r\n\r\n    });\r\n\r\n    \r\n\r\n    this._INPUT_AMT_TOTAL+=this._INPUT_AMT_STAFF;\r\n    this._INPUT_AMT_STAFF=numeral(this._INPUT_AMT_STAFF).format('0,0.00');\r\n    this._cache_budget._INPUT_AMT_STAFF=this._INPUT_AMT_STAFF;\r\n\r\n    this._INPUT_AMT_GUEST=0;\r\n    this._cache_budget.GUEST.forEach((all) => \r\n    {\r\n\r\n      if(all.GROUP_ORDER!==-1)    \r\n        if(all.INPUT_AMT_TMP!=\"\" && all.INPUT_AMT_TMP!=null && all.INPUT_AMT_TMP!=undefined)\r\n       // if(this._cache_budget.ALLOW_PASS_CONFIDENTIAL)\r\n     this._INPUT_AMT_GUEST += parseFloat(all.INPUT_AMT_TMP.replace(/,/g, '')) * all.PAY_RATE_FACTOR;\r\n\r\n   });\r\n\r\n    \r\n\r\n    this._INPUT_AMT_TOTAL+=this._INPUT_AMT_GUEST;\r\n    this._INPUT_AMT_GUEST=numeral(this._INPUT_AMT_GUEST).format('0,0.00');\r\n    this._cache_budget._INPUT_AMT_GUEST=numeral(this._INPUT_AMT_GUEST).format('0,0.00');\r\n\r\n    this._INPUT_AMT_TOTAL=numeral(this._INPUT_AMT_TOTAL).format('0,0.00');    \r\n\r\n    this._cache_budget.TOTAL = this._INPUT_AMT_TOTAL;\r\n\r\n    if(this._cache_budget._LOADING_BUDGET==1 && this._cache_budget.TOTAL!=0)\r\n    {\r\n      this._cache_budget_LOADING_BUDGET=0;\r\n      this._cache_budget.OBSERVERS.budget_loaded.forEach((all)=>{\r\n        all();\r\n      });\r\n    }\r\n    \r\n  }\r\n\r\n  //@handle('budget.dialog')\r\n  fnCheckSummary(value) {\r\n\r\n    setTimeout(() => \r\n    {\r\n\r\n                      //REGULAR\r\n                      for (var name in this._cache_budget.REGULAR) \r\n                      {\r\n\r\n                       var varSubscription = this._multiObserver.observe(\r\n                        [\r\n                        [this._cache_budget.REGULAR[name], 'INPUT_AMT_TMP']\r\n                            // [this._cache_budget.REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                            // [this._cache_budget.REGULAR[name], 'CONTRACT_AMT_TMP']\r\n                            ], (newValue, oldValue) => {\r\n\r\n                              this.fnCheckAll();\r\n\r\n                            });\r\n\r\n                       this.varObserveSubscriptions.push(varSubscription);\r\n\r\n                       if(this._cache_budget.REGULAR[name].TALENT_MANAGER!==undefined)\r\n                       {\r\n                            //[this._cache_budget.REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n\r\n                            var varSubscriptionTM = this._multiObserver.observe(\r\n                              [\r\n                              [this._cache_budget.REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                                    // [this._cache_budget.REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                                    // [this._cache_budget.REGULAR[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                                    ], (newValue, oldValue) => {\r\n\r\n                                      this.fnCheckAll();\r\n\r\n                                    });\r\n\r\n                            this.varObserveSubscriptions.push(varSubscriptionTM);\r\n\r\n                          }\r\n\r\n                        }\r\n\r\n\r\n                      //SEMI-REGULAR\r\n                      for (var name in this._cache_budget.SEMI_REGULAR)\r\n                      {\r\n\r\n                        var varSubscription = this._multiObserver.observe(\r\n                          [\r\n                          [this._cache_budget.SEMI_REGULAR[name], 'INPUT_AMT_TMP'],\r\n                            //[this._cache_budget.SEMI_REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                            // [this._cache_budget.SEMI_REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                            // [this._cache_budget.SEMI_REGULAR[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                            ], (newValue, oldValue) =>\r\n                            {\r\n\r\n                              this.fnCheckAll();\r\n\r\n                            });\r\n\r\n                        this.varObserveSubscriptions.push(varSubscription);\r\n\r\n                        if(this._cache_budget.SEMI_REGULAR[name].TALENT_MANAGER!==undefined)\r\n                        {\r\n                              //[this._cache_budget.REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n\r\n                              var varSubscriptionTM = this._multiObserver.observe(\r\n                                [\r\n                                [this._cache_budget.SEMI_REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                                      // [this._cache_budget.REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                                      // [this._cache_budget.REGULAR[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                                      ], (newValue, oldValue) => {\r\n\r\n                                        this.fnCheckAll();\r\n\r\n                                      });\r\n\r\n                              this.varObserveSubscriptions.push(varSubscriptionTM);\r\n\r\n                            }\r\n                          }\r\n\r\n\r\n                    //STAFF\r\n                    for (var name in this._cache_budget.STAFF) \r\n                    {\r\n\r\n                      var varSubscription = this._multiObserver.observe(\r\n                        [\r\n                        [this._cache_budget.STAFF[name], 'INPUT_AMT_TMP'],\r\n                          //[this._cache_budget.STAFF[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                          // [this._cache_budget.STAFF[name], 'PAY_RATE_FACTOR_TMP'],\r\n                          // [this._cache_budget.STAFF[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                          ], (newValue, oldValue) => {\r\n\r\n\r\n\r\n                            this.fnCheckAll();\r\n\r\n                          });\r\n\r\n                      this.varObserveSubscriptions.push(varSubscription);\r\n\r\n                      if (this._cache_budget.STAFF[name].TALENT_MANAGER!==undefined) \r\n                      {\r\n                        //[this._cache_budget.REGULAR[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n\r\n                        var varSubscriptionTM = this._multiObserver.observe(\r\n                          [\r\n                          [this._cache_budget.STAFF[name].TALENT_MANAGER, 'INPUT_AMT_TMP']\r\n                            // [this._cache_budget.REGULAR[name], 'PAY_RATE_FACTOR_TMP'],\r\n                            // [this._cache_budget.REGULAR[name], 'CONTRACT_AMT_TMP']\r\n\r\n\r\n                            ], (newValue, oldValue) => {\r\n\r\n\r\n\r\n                              this.fnCheckAll();\r\n\r\n                            });\r\n\r\n                        this.varObserveSubscriptions.push(varSubscriptionTM);\r\n\r\n                      }\r\n\r\n                    }\r\n\r\n\r\n                  //GUEST\r\n                  for (var name in this._cache_budget.GUEST)\r\n                  {\r\n\r\n                    var varSubscription = this._multiObserver.observe(\r\n                      [\r\n                      [this._cache_budget.GUEST[name], 'INPUT_AMT_TMP']\r\n                        // [this._cache_budget.GUEST[name], 'PAY_RATE_FACTOR_TMP']\r\n\r\n                        ], (newValue, oldValue) => {\r\n\r\n\r\n                          this.fnCheckAll();\r\n\r\n                        });\r\n\r\n                    this.varObserveSubscriptions.push(varSubscription);\r\n\r\n                  }\r\n\r\n                  this.fnCheckAll();\r\n\r\n                }\r\n\r\n                , 6000);\r\n\r\n}\r\n\r\n  //@handle('reset.summary')\r\n  fnResetSummarySubscription()\r\n  {\r\n\r\n    this.varObserveSubscriptions.forEach((toDispose) => {\r\n      toDispose();\r\n    });\r\n\r\n    while (this.varObserveSubscriptions.length > 0) {\r\n     this.varObserveSubscriptions.pop();\r\n   }\r\n\r\n   this.fnCheckSummary();\r\n }\r\n \r\n}"],"sourceRoot":"../.."}